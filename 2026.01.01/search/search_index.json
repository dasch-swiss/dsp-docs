{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"DaSCH Service Platform Documentation","text":"<p>Welcome to DaSCH - Swiss National Data and Service Center for the Humanities!</p> <p>Our mission is to operate a platform for Humanities research data that ensures long-term availability of this data.</p> <p>We operate the necessary infrastructure (a so called \"keep-alive\" archive) and support researchers in using this infrastructure. This is done with various open source software tools, all developed in-house.</p> <p>Our software consists of 3 main components, which are documented here:</p> <ul> <li>DSP-APP: The web application that allows you to view and edit data in your browser</li> <li>DSP-API: The core of our software stack: the RDF database that offers an access via API</li> <li>DSP-TOOLS: A command line tool to upload data models and big data sets to a DSP server</li> </ul> <p>Quick start for researchers</p> <p>If you are a researcher, you're probably most interested in the usage of the generic web application. In this case, have a look at our DSP-APP user guide.</p>"},{"location":"DSP-API/","title":"DSP-API Docs","text":"<p>DSP-API is part of the DaSCH Service Platform (DSP). The following documentation is intended for developers and users who want to interact with the DSP-API directly through the REST API. For a guide on how to use DSP through the web interface, see the DSP-APP User Guide.</p>"},{"location":"DSP-API/Readme/","title":"DSP-API Documentation","text":"<p>This folder contains the sources to the DSP-API part of documentation published under https://docs.dasch.swiss/ and managed by DSP-DOCS repository.</p>"},{"location":"DSP-API/Readme/#build-and-serve-the-docs-locally","title":"Build and serve the docs locally","text":"<p>Documentation can be build by invoking the following make commands from the project root directory:</p> <pre><code>make docs-install-requirements: ## install requirements\nmake docs-build # build the documentation\nmake docs-serve # serve it locally\n</code></pre>"},{"location":"DSP-API/Readme/#prerequisites","title":"Prerequisites","text":"<p>You will need Graphviz. On macOS:</p> <pre><code>brew install graphviz\n</code></pre> <p>On Linux, use your distribution's package manager.</p>"},{"location":"DSP-API/01-introduction/example-project/","title":"An Example Project","text":"<p>This section introduces some of the basic concepts involved in creating ontologies for DSP projects, by means of a relatively simple example project. Before reading this document, it will be helpful to have some familiarity with the basic concepts explained in knora-base.</p> <p>DSP-API comes with two example projects, called <code>incunabula</code> and <code>images-demo</code>. Here we will consider the <code>incunabula</code> example, which is a reduced version of a real research project on early printed books. It is designed to store an image of each page of each book, as well as RDF data about books, pages, their contents, and relationships between them.</p>"},{"location":"DSP-API/01-introduction/example-project/#the-incunabula-ontology","title":"The Incunabula Ontology","text":"<p>Here we will just focus on some of the main aspects of the ontology. An ontology file typically begins by defining prefixes for the IRIs of other ontologies that will be referred to. First there are some prefixes for ontologies that are very commonly used in RDF:</p> <pre><code>@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .\n@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .\n@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .\n@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .\n@prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .\n@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .\n</code></pre> <p>The <code>rdf</code>, <code>rdfs</code>, and <code>owl</code> ontologies contain basic properties that are used to define ontology entities. The <code>xsd</code> ontology contains definitions of literal data types such as <code>string</code> and <code>integer</code>. (For more information about these ontologies, see the references in knora-base.) The <code>foaf</code> ontology contains classes and properties for representing people. The <code>dcterms</code> ontology represents Dublin Core metadata.</p> <p>Then we define prefixes for DSP ontologies:</p> <pre><code>@prefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt; .\n@prefix salsah-gui: &lt;http://www.knora.org/ontology/salsah-gui#&gt; .\n</code></pre> <p>The <code>knora-base</code> ontology contains DSP-API's core abstractions, and is described in knora-base. The <code>salsah-gui</code> ontology includes properties that DSP projects must use to enable SALSAH, DSP-API's generic virtual research environment.</p> <p>For convenience, we can use the empty prefix to refer to the <code>incunabula</code> ontology itself:</p> <pre><code>@prefix : &lt;http://www.knora.org/ontology/0803/incunabula#&gt; .\n</code></pre> <p>However, outside the ontology file, it would make more sense to define an <code>incunabula</code> prefix to refer to the <code>incunabula</code> ontology.</p>"},{"location":"DSP-API/01-introduction/example-project/#properties","title":"Properties","text":"<p>All the content produced by a DSP project must be stored in Knora resources (see incunabula-resource-classes). Resources have properties that point to different parts of their contents; for example, the <code>incunabula</code> project contains books, which have properties like <code>title</code>. Every property that poitns to a DSP value must be a subproperty of <code>knora-base:hasValue</code>, and every property that points to another Knora resource must be a subproperty of <code>knora-base:hasLinkTo</code>.</p> <p>Here is the definition of the <code>incunabula:title</code> property:</p> <pre><code>:title rdf:type owl:ObjectProperty ;\n\n  rdfs:subPropertyOf knora-base:hasValue, dcterms:title ;\n\n  rdfs:label \"Titel\"@de ,\n    \"Titre\"@fr ,\n    \"Titolo\"@it ,\n    \"Title\"@en ;\n\n  knora-base:subjectClassConstraint :book ;\n\n  knora-base:objectClassConstraint knora-base:TextValue ;\n\n  salsah-gui:guiElement salsah-gui:SimpleText ;\n\n  salsah-gui:guiAttribute \"size=80\" ,\n    \"maxlength=255\" .\n</code></pre> <p>The definition of <code>incunabula:title</code> consists of a list of triples, all of which have <code>:title</code> as their subject. To avoid repeating <code>:title</code> for each triple, Turtle syntax allows us to use a semicolon (<code>;</code>) to separate triples that have the same subject. Moreover, some triples also have the same predicate; a comma (<code>,</code>) is used to avoid repeating the predicate. The definition of <code>:title</code> says:</p> <ul> <li><code>rdf:type owl:ObjectProperty</code>: It is an <code>owl:ObjectProperty</code>. There are   two kinds of OWL properties: object properties and datatype properties.   Object properties point to objects, which have IRIs and   can have their own properties. Datatype properties point to literal   values, such as strings and integers.</li> <li><code>rdfs:subPropertyOf knora-base:hasValue, dcterms:title</code>: It is a   subproperty of <code>knora-base:hasValue</code> and <code>dcterms:title</code>. Since the   objects of this property will be Knora values, it must be a   subproperty of <code>knora-base:hasValue</code>. To facilitate searches, we   have also chosen to make it a subproperty of <code>dcterms:title</code>. In the   DSP-API v2, if you do a search for resources that have a certain   <code>dcterms:title</code>, and there is a resource with a matching   <code>incunabula:title</code>, the search results could include that resource.</li> <li><code>rdfs:label \"Titel\"@de</code>, etc.: It has the specified labels in   various languages. These are needed, for example, by user   interfaces, to prompt the user to enter a value.</li> <li><code>knora-base:subjectClassConstraint :book</code>: The subject of the   property must be an <code>incunabula:book</code>.</li> <li><code>knora-base:objectClassConstraint knora-base:TextValue</code>: The object   of this property must be a <code>knora-base:TextValue</code> (which is a   subclass of <code>knora-base:Value</code>).</li> <li><code>salsah-gui:guiElement salsah-gui:SimpleText</code>: When SALSAH asks a   user to enter a value for this property, it should use a simple text   field.</li> <li><code>salsah-gui:guiAttribute \"size=80\" , \"maxlength=255\"</code>: The SALSAH   text field for entering a value for this property should be 80   characters wide, and should accept at most 255 characters.</li> </ul> <p>The <code>incunabula</code> ontology contains several other property definitions that are basically similar. Note that different subclasses of <code>Value</code> are used. For example, <code>incunabula:pubdate</code>, which represents the publication date of a book, points to a <code>knora-base:DateValue</code>. The <code>DateValue</code> class stores a date range, with a specified degree of precision and a preferred calendar system for display.</p> <p>A property can point to a Knora resource instead of to a Knora value. For example, in the <code>incunabula</code> ontology, there are resources representing pages and books, and each page is part of some book. This relationship is expressed using the property <code>incunabula:partOf</code>:</p> <pre><code>:partOf rdf:type owl:ObjectProperty ;\n\n  rdfs:subPropertyOf knora-base:isPartOf ;\n\n  rdfs:label \"ist ein Teil von\"@de ,\n    \"est un part de\"@fr ,\n    \"e una parte di\"@it ,\n    \"is a part of\"@en ;\n\n  rdfs:comment \"\"\"Diese Property bezeichnet eine Verbindung zu einer anderen Resource, in dem ausgesagt wird, dass die vorliegende Resource ein integraler Teil der anderen Resource ist. Zum Beispiel ist eine Buchseite ein integraler Bestandteil genau eines Buches.\"\"\"@de ;\n\n  knora-base:subjectClassConstraint :page ;\n\n  knora-base:objectClassConstraint :book ;\n\n  salsah-gui:guiElement salsah-gui:Searchbox .\n</code></pre> <p>The key things to notice here are:</p> <ul> <li><code>rdfs:subPropertyOf knora-base:isPartOf</code>: The <code>knora-base</code> ontology provides a generic <code>isPartOf</code> property to express   part-whole relationships. A project may use <code>knora-base:isPartOf</code> directly, however creating a subproperty such as   <code>incunabula:partOf</code> will allow to customize the property further, e.g. by giving it a more descriptive label.   It is important to note that <code>knora-base:isPartOf</code> is a subproperty of <code>knora-base:hasLinkTo</code>. Any property that   points to a <code>knora-base:Resource</code> must be a subproperty of <code>knora-base:hasLinkTo</code>. Such a   property is called a link property.</li> <li><code>knora-base:objectClassConstraint :book</code>: The object of this property must be a member of the class <code>incunabula:book</code>,   which, as we will see below, is a subclass of <code>knora-base:Resource</code>.</li> <li><code>salsah-gui:guiElement salsah-gui:Searchbox</code>: When SALSAH prompts a user to select the book that a page is part of, it   should provide a search box enabling the user to find the desired book.</li> </ul> <p>Because <code>incunabula:partOf</code> is a link property, it must always accompanied by a link value property, which enables Knora to store metadata about each link that is created with the link property. This metadata includes the date and time when the link was created, its owner, the permissions it grants, and whether it has been deleted. Storing this metadata allows Knora to authorise users to see or modify the link, as well as to query a previous state of a repository in which a deleted link had not yet been deleted. (The ability to query previous states of a repository is planned for DSP-API version 2.)</p> <p>The name of a link property and its link value property must be related by the following naming convention: to determine the name of the link value property, add the word <code>Value</code> to the name of the link property. Hence, the <code>incunabula</code> ontology defines the property <code>partOfValue</code>:</p> <pre><code>:partOfValue rdf:type owl:ObjectProperty ;\n\n  rdfs:subPropertyOf knora-base:isPartOfValue ;\n\n  knora-base:subjectClassConstraint :page ;\n\n  knora-base:objectClassConstraint knora-base:LinkValue .\n</code></pre> <p>As a link value property, <code>incunabula:partOfValue</code> must point to a <code>knora-base:LinkValue</code>. The <code>LinkValue</code> class is an RDF reification of a triple (in this case, the triple that links a page to a book). For more details about this, see knora-base-linkvalue.</p> <p>Note that the property <code>incunabula:hasAuthor</code> points to a <code>knora-base:TextValue</code>, because the <code>incunabula</code> project represents authors simply by their names. A more complex project could represent each author as a resource, in which case <code>incunabula:hasAuthor</code> would need to be a subproperty of <code>knora-base:hasLinkTo</code>.</p>"},{"location":"DSP-API/01-introduction/example-project/#resource-classes","title":"Resource Classes","text":"<p>The two main resource classes in the <code>incunabula</code> ontology are <code>book</code> and <code>page</code>. Here is <code>incunabula:book</code>:</p> <pre><code>:book rdf:type owl:Class ;\n\n  rdfs:subClassOf knora-base:Resource , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :title ;\n    owl:minCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"1\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasAuthor ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"2\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :publisher ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"3\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :publoc ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"4\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :pubdate ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"5\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :location ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"6\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :url ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"7\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :description ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"2\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :physical_desc ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"9\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :note ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"10\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :citation ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"5\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :book_comment ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"12\"^^xsd:nonNegativeInteger\n  ] ;\n\n  knora-base:resourceIcon \"book.gif\" ;\n\n  rdfs:label \"Buch\"@de ,\n    \"Livre\"@fr ,\n    \"Libro\"@it ,\n    \"Book\"@en ;\n\n  rdfs:comment \"\"\"Diese Resource-Klasse beschreibt ein Buch\"\"\"@de .\n</code></pre> <p>Like every Knora resource class, <code>incunabula:book</code> is a subclass of <code>knora-base:Resource</code>. It is also a subclass of a number of other classes of type <code>owl:Restriction</code>, which are defined in square brackets, using Turtle's syntax for anonymous blank nodes. Each <code>owl:Restriction</code> specifies a cardinality for a property that is allowed in resources of type <code>incunabula:book</code>. A cardinality is indeed a kind of restriction: it means that a resource of this type may have, or must have, a certain number of instances of the specified property. For example, <code>incunabula:book</code> has cardinalities saying that a book must have at least one title and at most one publication date. In the DSP-API version 1, the word 'occurrence' is used instead of 'cardinality'.</p> <p>The OWL cardinalities supported by Knora are described in OWL Cardinalities.</p> <p>Note that <code>incunabula:book</code> specifies a cardinality of <code>owl:minCardinality 0</code> on the property <code>incunabula:hasAuthor</code>. At first glance, this might seem as if it serves no purpose, since it says that the property is optional and can have any number of instances. You may be wondering whether this cardinality could simply be omitted from the definition of <code>incunabula:book</code>. However, Knora requires every property of a resource to have some cardinality in the resource's class. This is because Knora uses the cardinalities to determine which properties are possible for instances of the class, and the DSP-API relies on this information. If there was no cardinality for <code>incunabula:hasAuthor</code>, Knora would not allow a book to have an author.</p> <p>Each <code>owl:Restriction</code> specifying a cardinality can include the predicate <code>salsah-gui:guiOrder</code>, which tells the SALSAH GUI the order the properties should be displayed in.</p> <p>Here is the definition of <code>incunabula:page</code>:</p> <pre><code>:page rdf:type owl:Class ;\n\n  rdfs:subClassOf knora-base:StillImageRepresentation , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :pagenum ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"1\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :partOfValue ;\n    owl:cardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"2\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :partOf ;\n    owl:cardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"2\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :seqnum ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"3\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :description ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"2\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :citation ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"5\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :page_comment ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"6\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :origname ;\n    owl:cardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"7\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasLeftSidebandValue ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"10\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasLeftSideband ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"10\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasRightSidebandValue ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"11\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasRightSideband ;\n    owl:maxCardinality \"1\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"11\"^^xsd:nonNegativeInteger\n  ] , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :transcription ;\n    owl:minCardinality \"0\"^^xsd:nonNegativeInteger ;\n    salsah-gui:guiOrder \"12\"^^xsd:nonNegativeInteger\n  ] ;\n\n  knora-base:resourceIcon \"page.gif\" ;\n\n  rdfs:label \"Seite\"@de ,\n    \"Page\"@fr ,\n    \"Page\"@en ;\n\n  rdfs:comment \"\"\"Eine Seite ist ein Teil eines Buchs\"\"\"@de ,\n    \"\"\"Une page est une partie d'un livre\"\"\"@fr ,\n    \"\"\"A page is a part of a book\"\"\"@en .\n</code></pre> <p>The <code>incunabula:page</code> class is a subclass of <code>knora-base:StillImageRepresentation</code>, which is a subclass of <code>knora-base:Representation</code>, which is a subclass of <code>knora-base:Resource</code>. The class <code>knora-base:Representation</code> is used for resources that contain metadata about files stored by Knora. Each It has different subclasses that can hold different types of files, including still images, audio, and video files. A given <code>Representation</code> can store metadata about several different files, as long as they are of the same type and are semantically equivalent, e.g. are different versions of the same image with different colorspaces, so that coordinates in one file will work in the other files.</p> <p>In Knora, a subclass inherits the cardinalities defined in its superclasses. Let's look at the class hierarchy of <code>incunabula:page</code>, starting with <code>knora-base:Representation</code>:</p> <pre><code>:Representation rdf:type owl:Class ;\n\n  rdfs:subClassOf :Resource , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasFileValue ;\n    owl:minCardinality \"1\"^^xsd:nonNegativeInteger\n  ] ;\n\n  rdfs:comment \"A resource that can store one or more FileValues\"@en .\n</code></pre> <p>This says that a <code>Representation</code> must have at least one instance of the property <code>hasFileValue</code>, which is defined like this:</p> <pre><code>:hasFileValue rdf:type owl:ObjectProperty ;\n\n  rdfs:subPropertyOf :hasValue ;\n\n  :subjectClassConstraint :Representation ;\n\n  :objectClassConstraint :FileValue .              \n</code></pre> <p>The subject of <code>hasFileValue</code> must be a <code>Representation</code>, and its object must be a <code>FileValue</code>. There are different subclasses of <code>FileValue</code> for different kinds of files, but we'll skip the details here.</p> <p>This is the definition of <code>knora-base:StillImageRepresentation</code>:</p> <pre><code>:StillImageRepresentation rdf:type owl:Class ;\n\n  rdfs:subClassOf :Representation , [\n    rdf:type owl:Restriction ;\n    owl:onProperty :hasStillImageFileValue ;\n    owl:minCardinality \"1\"^^xsd:nonNegativeInteger\n  ] ;\n\n  rdfs:comment \"A resource that can contain two-dimensional still image files\"@en .\n</code></pre> <p>It must have at least one instance of the property <code>hasStillImageFileValue</code>, which is defined as follows:</p> <pre><code>:hasStillImageFileValue rdf:type owl:ObjectProperty ;\n\n  rdfs:subPropertyOf :hasFileValue ;\n\n  :subjectClassConstraint :StillImageRepresentation ;\n\n  :objectClassConstraint :AbstractStillImageFileValue .              \n</code></pre> <p>Because <code>hasStillImageFileValue</code> is a subproperty of <code>hasFileValue</code>, the cardinality on <code>hasStillImageFileValue</code>, defined in the subclass <code>StillImageRepresentation</code>, overrides the cardinality on <code>hasFileValue</code>, defined in the superclass <code>Representation</code>. In other words, the more general cardinality in the superclass is replaced by a more specific cardinality in the base class. Since <code>incunabula:page</code> is a subclass of <code>StillImageRepresentation</code>, it inherits the cardinality on <code>hasStillImageFileValue</code>. As a result, a page must have at least one image file value attached to it.</p> <p>Here's another example of cardinality inheritance. The class <code>knora-base:Resource</code> has a cardinality for <code>knora-base:seqnum</code>. The idea is that resources of any type could be arranged in some sort of sequence. As we saw above, <code>incunabula:page</code> is a subclass of <code>knora-base:Resource</code>. But <code>incunabula:page</code> has its own cardinality for <code>incunabula:seqnum</code>, which is a subproperty of <code>knora-base:seqnum</code>. Once again, the subclass's cardinality on the subproperty replaces the superclass's cardinality on the superproperty: a page is allowed to have an <code>incunabula:seqnum</code>, but it is not allowed to have a <code>knora-base:seqnum</code>.</p>"},{"location":"DSP-API/01-introduction/file-formats/","title":"File Formats in DSP-API","text":"<p>Currently, only a limited number of file formats is accepted to be uploaded onto DSP. Some metadata is extracted from the files during the ingest but the file formats are not validated. Only image file formats are currently migrated into another format. Both, the migrated version of the file and the original are kept.</p> <p>The following table shows the accepted file formats:</p> Category Accepted format Converted during ingest? Text, XML *) HTML, JSON, ODD, RNG, TXT, XML, XSD, XSL No Tables CSV, XLS, XLSX No 2D Images JPG, JPEG, JP2, PNG, TIF, TIFF Yes, converted to JPEG 2000 by Sipi Audio MPEG (MP3), WAV No Video MP4 No Office EPUB, PDF, DOC, DOCX, PPT, PPTX No Archives ZIP, TAR, GZ, Z, TAR.GZ, TGZ, GZIP, 7Z No <p>*) If your XML files represent text with markup (e.g. TEI/XML), it is possible to store it as Standoff/RDF, as described in the api overview.</p>"},{"location":"DSP-API/01-introduction/legal-info/","title":"Storing Legal Information","text":"<p>Each file representation in the project data may have legal metadata associated with it. This metadata is stored in the FileValue that represents the file.</p> <p>For each file value, the legal information consists of:</p> <ul> <li>Exactly one copyright holder (mandatory when legal information is required)</li> <li>Exactly one license (mandatory when legal information is required)  </li> <li>One or more authorship attributions (mandatory when legal information is required)</li> </ul> <p>Legal Information Will Become Mandatory</p> <p>Currently, the legal information on the FileValue is optional. This will change in the future when License, Authorship, and Copyright Holder will become mandatory.</p>"},{"location":"DSP-API/01-introduction/legal-info/#copyright-holder","title":"Copyright Holder","text":"<p>The copyright holder of the file. A copyright holder is a person or organization that holds the copyright to a file. Each file value has exactly one copyright holder (currently zero or one).</p> <p>Each project references an allowed list of copyright holders that can be used. System project administrators can add new copyright holders to the list.</p>"},{"location":"DSP-API/01-introduction/legal-info/#authorship","title":"Authorship","text":"<p>The authorship of the file. This can be a person or an organization who was involved in creating the asset, also known as moral rights to the asset. Each file value can have one or more authorship attributions (currently zero or more).</p>"},{"location":"DSP-API/01-introduction/legal-info/#license","title":"License","text":"<p>The license under which the file is published. Each file value has exactly one license (currently zero or one). A license has the following properties:</p> <ul> <li><code>uri</code> - this is a URI that identifies the license.</li> <li><code>label-en</code> - this is a human-readable label for the license in English.</li> <li><code>id</code> - this is a unique identifier as an IRI for the license.</li> </ul> <p>Each project knows which licenses are available. From the set of available licenses a project must enable the licenses it needs. New projects will be created with the DaSCH recommended licenses enabled. Only enabled licenses are allowed to be used for project data.</p> <p>Currently, the set of available licenses is fixed and cannot be changed by the project.</p>"},{"location":"DSP-API/01-introduction/legal-info/#available-licenses","title":"Available Licenses","text":"<p>We encourage the use of Creative Commons licenses for the publication of data. Notable CC BY 4.0 (Attribution 4.0 International) and CC BY-SA 4.0 (Attribution-ShareAlike 4.0 International) licenses are well suited for FAIR content.</p>"},{"location":"DSP-API/01-introduction/legal-info/#licenses-recommended-by-dasch","title":"Licenses Recommended by DaSCH","text":"<ul> <li>Creative Commons Licenses<ul> <li>CC BY 4.0 (Attribution 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by/4.0/</li> </ul> </li> <li>CC BY-SA 4.0 (Attribution-ShareAlike 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-sa-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by-sa/4.0/</li> </ul> </li> <li>CC BY-NC 4.0 (Attribution-NonCommercial 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-nc-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by-nc/4.0/</li> </ul> </li> <li>CC BY-NC-SA 4.0 (Attribution-NonCommercial-ShareAlike 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-nc-sa-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by-nc-sa/4.0/</li> </ul> </li> <li>CC BY-ND 4.0 (Attribution-NoDerivatives 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-nd-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by-nd/4.0/</li> </ul> </li> <li>CC BY-NC-ND 4.0 (Attribution-NonCommercial-NoDerivatives 4.0 International)<ul> <li>Id: <code>http://rdfh.ch/licenses/cc-by-nc-nd-4.0</code></li> <li>URI: https://creativecommons.org/licenses/by-nc-nd/4.0/</li> </ul> </li> </ul> </li> <li>Special licenses<ul> <li>AI-Generated Content - Not Protected by Copyright<ul> <li>Id: <code>http://rdfh.ch/licenses/ai-generated</code></li> <li>URI: http://rdfh.ch/licenses/ai-generated</li> </ul> </li> <li>Unknown License - Ask Copyright Holder for Permission<ul> <li>Id: <code>http://rdfh.ch/licenses/unknown</code></li> <li>URI: http://rdfh.ch/licenses/unknown</li> </ul> </li> <li>Public Domain - Not Protected by Copyright<ul> <li>Id: <code>http://rdfh.ch/licenses/public-domain</code></li> <li>URI: http://rdfh.ch/licenses/public-domain</li> </ul> </li> </ul> </li> </ul>"},{"location":"DSP-API/01-introduction/legal-info/#other-licenses","title":"Other Licenses","text":"<ul> <li>CC_0_1_0 (CC0 1.0 Universal)<ul> <li>Id: http://rdfh.ch/licenses/cc-0-1.0</li> <li>URI: https://creativecommons.org/publicdomain/zero/1.0/</li> </ul> </li> <li>CC_PDM_1_0 (Public Domain Mark 1.0 Universal)<ul> <li>Id: http://rdfh.ch/licenses/cc-pdm-1.0</li> <li>URI: https://creativecommons.org/publicdomain/mark/1.0/</li> </ul> </li> <li>BORIS Standard License<ul> <li>Id: http://rdfh.ch/licenses/boris</li> <li>URI: https://www.ub.unibe.ch/services/open_science/boris_publications/index_eng.html#collapse_pane631832</li> </ul> </li> <li>LICENCE OUVERTE 2.0<ul> <li>Id: \"http://rdfh.ch/licenses/open-licence-2.0</li> <li>URI: https://www.etalab.gouv.fr/wp-content/uploads/2018/11/open-licence.pdf</li> </ul> </li> <li>No Copyright - Non-Commercial Use Only 1.0<ul> <li>Id: http://rdfh.ch/licenses/noc-nc-1.0</li> <li>URI: http://rightsstatements.org/vocab/NoC-NC/1.0/</li> </ul> </li> </ul>"},{"location":"DSP-API/01-introduction/standoff-rdf/","title":"Standoff/RDF Text Markup","text":"<p>Standoff markup is text markup that is stored separately from the content it describes. DSP-API's Standoff/RDF markup stores content as a simple Unicode string, and represents markup separately as RDF data. This approach has some advantages over commonly used markup systems such as XML:</p> <p>First, XML and other hierarchical markup systems assume that a document is a hierarchy, and have difficulty representing non-hierarchical structures or multiple overlapping hierarchies. Standoff markup can easily represent these structures.</p> <p>Second, markup languages are typically designed to be used in text files. But there is no standard system for searching and linking together many different text files containing markup. It is possible to do this in a non-standard way by using an XML database such as eXist, but this still does not allow for queries that include text as well as non-textual data not stored in XML.</p> <p>By storing markup as RDF, DSP-API can search for markup structures in the same way as it searches for any RDF data structure. This makes it possible to do searches that combine text-related criteria with other sorts of criteria. For example, if persons and events are represented as resources, and texts are represented in Standoff/RDF, a text can contain tags representing links to persons or events. You could then search for a text that mentions a person who lived in the same city as another person who is the author of a text that mentions an event that occurred during a certain time period.</p> <p>In DSP-API's Standoff/RDF, a tag is an RDF entity that is linked to a text value. Each tag points to a substring of the text, and has semantic properties of its own. You can define your own tag classes in your ontology by making subclasses of <code>knora-base:StandoffTag</code>, and attach your own properties to them. You can then search for those properties using DSP-API's search language, Gravsearch.</p> <p>The built-in knora-base and <code>standoff</code> ontologies provide some basic tags that can be reused or extended. These include tags that represent DSP-API data types. For example, <code>knora-base:StandoffDateTag</code> represents a date in exactly the same way as a date value, i.e. as a calendar-independent astronomical date. You can use this tag as-is, or extend it by making a subclass, to represent dates in texts. Gravsearch includes built-in functionality for searching for these data type tags. For example, you can search for text containing a date that falls within a certain date range.</p> <p>DSP-API supports automatic conversion between XML and Standoff/RDF. To make this work, Standoff/RDF stores the order of tags and their hierarchical relationships. You must define an XML-to-Standoff Mapping for your standoff tag classes and properties. Then you can import an XML document into DSP-API, which will store it as Standoff/RDF. The text and markup can then be searched using Gravsearch. When you retrieve the document, DSP-API converts it back to the original XML.</p> <p>To represent overlapping or non-hierarchical markup in exported and imported XML, DSP-API supports CLIX tags.</p> <p>As XML-to-Standoff has proved to be complicated and not very well performing,  the use of standoff with custom mappings is discouraged.  Improved integration of text with XML mark up, particularly TEI-XML, is in planning.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/","title":"What is DSP and DSP-API?","text":"<p>The DaSCH Service Platform (DSP) is  a content management system for the long-term preservation and reuse of humanities data. It is designed to accommodate data with a complex internal structure, including data that could be stored in relational databases.</p> <p>DSP aims to solve key problems in the long-term preservation and reuse of humanities data:</p> <p>First, traditional archives preserve data, but do not facilitate reuse. Typically, only metadata can be searched, not the data itself. You have to first identify an information package that might be of interest, then download it, and only then can you find out what's really in it. This is time-consuming, and makes it impractical to reuse data from many different sources.</p> <p>DSP solves this problem by keeping the data alive. You can query all the data in a DSP repository, not just the metadata. You can import thousands of databases into DSP, and run queries that search through all of them at once.</p> <p>Another problem is that researchers use a multitude of different file formats, many of which are proprietary and quickly become obsolete. It is not practical to maintain all the programs that were used to create and read old files, or even all the operating systems that these programs ran on. Therefore, DSP only accepts a certain number of file formats.</p> <ul> <li>Non-binary data is stored as   RDF, in a dedicated   database called a triplestore. RDF is an open, vendor-independent standard   that can express any data structure.</li> <li>Binary media files (images, audio, and video) are converted to a few specialised   archival file formats and stored by Sipi,   with metadata stored in the triplestore.</li> </ul> <p>DSP makes this data available for reuse via its generic, standards-based application programming interface DSP-API. A virtual research environment (VRE) can use DSP-API to query, link, and add to data from different research projects in a unified way.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#humanities-focused-data-storage","title":"Humanities-Focused Data Storage","text":"<p>Each project creates its own data model (or ontology), describing the types of items it wishes to store, using basic data types defined in Knora's base ontology. This gives projects the freedom to describe their data in a way that makes sense to them, while allowing DSP to support searching and linking across projects.</p> <p>DSP has built-in support for data structures that are commonly needed in humanities data, and that present unique challenges for any type of database storage.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#calendar-independent-dates","title":"Calendar-Independent Dates","text":"<p>In the humanities, a date could be based on any sort of calendar (e.g. Gregorian, Julian, Islamic, or Hebrew). The DSP stores dates using a calendar-independent, astronomical representation, and converts between calendars as needed. This makes it possible to search for a date in one calendar, and get search results in other calendars.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#flexible-searchable-text-markup","title":"Flexible, Searchable Text Markup","text":"<p>Commonly used text markup systems, such as TEI/XML, have to represent a text as a hierarchy, and therefore have trouble supporting overlapping markup. DSP supports Standoff/RDF markup: the markup is stored as RDF data, separately from the text, allowing for overlapping markup. The DSP can import any XML document (including TEI/XML) for storage as standoff/RDF, and can regenerate the original XML document at any time.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#powerful-searches","title":"Powerful Searches","text":"<p>DSP-API provides a search language, Gravsearch, that is designed to meet the needs of humanities researchers. Gravsearch supports DSP-API's humanities-focused data structures, including calendar-independent dates and standoff markup, as well as fast full-text searches. This allows searches to combine text-related criteria with any other criteria. For example, you could search for a text that contains a certain word and also mentions a person who lived in the same city as another person who is the author of a text that mentions an event that occurred during a certain time period.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#access-control","title":"Access Control","text":"<p>The RDF standards do not include any concept of permissions. DSP-API's permission system allows project administrators and users to determine who can see or modify each item of data. DSP-API filters search results according to each user's permissions.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#data-history","title":"Data History","text":"<p>RDF does not have a concept of data history. DSP-API maintains all previous versions of each item of data. Ordinary searches return only the latest version, but you can obtain and cite an item as it was at any point in the past.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#data-consistency","title":"Data Consistency","text":"<p>RDF triplestores do not implement a standardised way of ensuring the consistency of data in a repository. DSP-API ensures that all data is consistent, conforms the project-specific data models, and meets DSP-API's minimum requirements for interoperability and reusability of data.</p>"},{"location":"DSP-API/01-introduction/what-is-dsp/#linked-open-data","title":"Linked Open Data","text":"<p>DSP-API supports publishing data online as Linked Open Data, using open standards to allow interoperability between different repositories on the web.</p>"},{"location":"DSP-API/02-dsp-ontologies/introduction/","title":"Introduction","text":"<p>The DSP ontologies provide a generic framework for describing humanities research data, allowing data from different projects to be combined, augmented, and reused.</p>"},{"location":"DSP-API/02-dsp-ontologies/introduction/#resource-description-framework-rdf","title":"Resource Description Framework (RDF)","text":"<p>DSP-API uses a hierarchy of ontologies based on the Resource Description Framework (RDF), RDF Schema (RDFS), and the Web Ontology Language (OWL). Both RDFS and OWL are expressed in RDF. RDF expresses information as a set of statements (called triples). A triple consists of a subject, a predicate, and an object:</p> <p></p> <p>The object may be either a literal value (such as a name or number) or another subject. Thus it is possible to create complex graphs that connect many subjects, like this:</p> <p></p> <p>In RDF, each subject and predicate has a unique, URL-like identifier called an Internationalized Resource Identifier (IRI). Within a given project, IRIs typically differ only in their last component (the \"local part\"), which is often the fragment following a <code>#</code> character. Such IRIs share a long \"prefix\". In Turtle and similar formats for writing RDF, a short prefix label can be defined to represent the long prefix. Then an IRI can be written as a prefix label and a local part, separated by a colon (<code>:</code>). For example, if the \"example\" project's long prefix is <code>http://www.example.org/rdf#</code>, and it contains subjects with IRIs like <code>http://www.example.org/rdf#book</code>, we can define the prefix label <code>ex</code> to represent the prefix label, and write prefixed names for IRIs:</p> <p></p>"},{"location":"DSP-API/02-dsp-ontologies/introduction/#built-in-ontologies-and-user-created-ontologies","title":"Built-in Ontologies and User-Created Ontologies","text":"<p>To ensure the interoperability of data produced by different projects, each project must describe its data model by creating one or more ontologies that extend Knora's built-in ontologies. The main built-in ontology in Knora is knora-base.</p>"},{"location":"DSP-API/02-dsp-ontologies/introduction/#shared-ontologies","title":"Shared Ontologies","text":"<p>Knora does not normally allow a project to use classes or properties defined in an ontology that belongs to another project. Each project must be free to change its own ontologies, but this is not possible if they have been used in ontologies or data created by other projects.</p> <p>However, an ontology can be defined as shared, meaning that it can be used by multiple projects, and that its creators will not change it in ways that could affect other ontologies or data that are based on it. Specifically, in a shared ontology, existing classes and properties cannot safely be changed, but new ones can be added. (It is not even safe to add an optional cardinality to an existing class, because this could cause subclasses to violate the rule that a class cannot have a cardinality on property P as well as a cardinality on a subproperty of P; see Restrictions on Classes.)</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/","title":"The Knora Base Ontology","text":""},{"location":"DSP-API/02-dsp-ontologies/knora-base/#overview","title":"Overview","text":"<p>The Knora base ontology is the main built-in Knora ontology. Each project that uses DSP-API must describe its data model by creating ontologies that extend this ontology.</p> <p>The Knora base ontology is identified by the IRI <code>http://www.knora.org/ontology/knora-base</code>. In the DSP-API documentation in general, it is identified by the prefix <code>knora-base</code>, but for brevity, in this document, we use <code>kb</code> or omit the prefix entirely.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#the-knora-data-model","title":"The Knora Data Model","text":"<p>The Knora data model is based on the observation that, in the humanities, a value or literal is often itself structured and can be highly complex. Moreover, a value may have its own metadata, such as its creation date, information about permissions, and so on. Therefore, the Knora base ontology describes structured value types that can store this type of metadata. In the diagram below, a book (<code>ex:book2</code>) has a title (identified by the predicate <code>ex:title</code>) and a publication date (<code>ex:pubdate</code>), each of which has some metadata.</p> <p></p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#projects","title":"Projects","text":"<p>In DSP-API, each item of data belongs to some particular project. Each project using DSP-API must define a <code>kb:knoraProject</code>, which has these properties (cardinalities are indicated in parentheses after each property name):</p> <ul> <li> <p><code>projectShortname</code> (1): A short name that can be used to identify the project in configuration files and the like.</p> </li> <li> <p><code>projectLongname</code> (0-1): The full name of the project.</p> </li> <li> <p><code>projectShortcode</code> (1): A hexadecimal code that uniquely identifies the project. These codes are assigned to projects   by the DaSCH.</p> </li> <li> <p><code>projectDescription</code> (1-n): A description of the project.</p> </li> </ul> <p>Ontologies and resources are associated with a project by means of the <code>kb:attachedToProject</code> property, as described in Ontologies and Properties of Resource). Users are associated with a project by means of the <code>kb:isInProject</code> property, as described in Users and Groups.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#ontologies","title":"Ontologies","text":"<p>Each user-created ontology must be defined as an <code>owl:Ontology</code> with the properties <code>rdfs:label</code> and <code>kb:attachedToProject</code>. Since DSP-API v20 <code>kb:lastModificationDate</code> property is also required.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#resources","title":"Resources","text":"<p>All the content produced by a project (e.g. digitised primary source materials or research data) must be stored in objects that belong to subclasses of <code>kb:Resource</code>, so that DSP-API can query and update that content. Each project using the Knora base ontology must define its own OWL classes, derived from <code>kb:Resource</code>, to represent the types of data it deals with. A subclass of <code>kb:Resource</code> may additionally be a subclass of any other class, e.g. an industry-standard class such as <code>foaf:Person</code>; this can facilitate searches across projects.</p> <p>Resources have properties that point to different parts of the content they contain. For example, a resource representing a book could have a property called <code>hasAuthor</code>, pointing to the author of the book. There are two possible kinds of content in a Knora resource: Knora values (see Values) or links to other resources (see Links Between Resources). Properties that point to Knora values must be subproperties of <code>kb:hasValue</code>, and properties that point to other resources must be subproperties of <code>kb:hasLinkTo</code>. Either of these two types of properties may also be a subproperty of any other property, e.g. an industry-standard property such as <code>foaf:name</code>; this can facilitate searches across projects. Each property definition must specify the types that its subjects and objects must belong to (see Constraints on the Types of Property Subjects and Objects for details).</p> <p>Each user-created resource class definition must use OWL cardinality restrictions to specify the properties that resources of that class can have (see OWL Cardinalities for details).</p> <p>Resources are not versioned; only their values are versioned (see Values).</p> <p>Every resource is required to have an <code>rdfs:label</code>. The object of this property is an <code>xsd:string</code>, rather than a Knora value; hence it is not versioned. A user who has modify permission on a resource (see Authorisation) can change its label.</p> <p>A resource can be marked as deleted; DSP-API does this by adding the predicate <code>kb:isDeleted true</code> to the resource. An optional <code>kb:deleteComment</code> may be added to explain why the resource has been marked as deleted. Deleted resources are normally hidden. They cannot be undeleted, because even though resources are not versioned, it is necessary to be able to find out when a resource was deleted. If desired, a new resource can be created by copying data from a deleted resource.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#properties-of-resource","title":"Properties of Resource","text":"<ul> <li> <p><code>creationDate</code> (1): The time when the resource was created.</p> </li> <li> <p><code>attachedToUser</code> (1): The user who owns the resource.</p> </li> <li> <p><code>attachedToProject</code> (1): The project that the resource is part of.</p> </li> <li> <p><code>lastModificationDate</code> (0-1): A timestamp indicating when the resource (or one of its values) was last modified.</p> </li> <li> <p><code>seqnum</code> (0-1): The sequence number of the resource, if it is part of an ordered group of resources, such as the pages   in a book.</p> </li> <li> <p><code>isDeleted</code> (1): Indicates whether the resource has been deleted.</p> </li> <li> <p><code>deleteDate</code> (0-1): If the resource has been deleted, indicates when it was deleted.</p> </li> <li> <p><code>deleteComment</code> (0-1): If the resource has been deleted, indicates why it was deleted.</p> </li> </ul> <p>Resources can have properties that point to other resources; see Links Between Resources. A resource grants permissions to groups of users; see Authorisation.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#representations","title":"Representations","text":"<p>It is not practical to store all data in RDF. In particular, RDF is not a good storage medium for binary data such as images. Therefore, DSP-API stores such data outside the triplestore, in ordinary files. A resource can have metadata about a file attached to it. The technical term for such a resource in the Knora ontology is a Representation. For each file, there is a <code>kb:FileValue</code> in the triplestore containing metadata about the file (see FileValue). DSP-API uses Sipi to store files. The DSP-API provides ways to create file values.</p> <p>A resource that has a file value must belong to one of the subclasses of <code>kb:Representation</code>. Its subclasses include:</p> <ul> <li> <p><code>StillImageRepresentation</code>: A representation referring to a still image file which can be stored in Sipi or an external IIIF server.</p> </li> <li> <p><code>MovingImageRepresentation</code>: A representation containing a video file.</p> </li> <li> <p><code>AudioRepresentation</code>: A representation containing an audio file.</p> </li> <li> <p><code>DDDrepresentation</code>: A representation containing a 3D image file.</p> </li> <li> <p><code>TextRepresentation</code>: A representation containing a formatted text file, such as an XML file.</p> </li> <li> <p><code>DocumentRepresentation</code>: A representation containing a document (such as a PDF file) that is not a text file.</p> </li> <li> <p><code>ArchiveRepresentation</code>: A representation containing an archive file (such as a zip archive).</p> </li> </ul> <p>These classes can be used directly in data, but it is often better to make subclasses of them, to include metadata about the files being stored.</p> <p>The base class of all these classes is <code>Representation</code>, which is not intended to be used directly. It has this property, which its subclasses override:</p> <ul> <li><code>hasFileValue</code> (1): Points to a file value.</li> </ul> <p>There are two ways for a project to design classes for representations. The simpler way is to create a resource class that represents a thing in the world (such as <code>ex:Painting</code>) and also belongs to a subclass of <code>Representation</code>. This is adequate if the class can have only one type of file attached to it. For example, if paintings are represented only by still images, <code>ex:Painting</code> could be a subclass of <code>StillImageRepresentation</code>.</p> <p>The more flexible approach, which is supported by DSP-API v2, is for each <code>ex:Painting</code> to link (using <code>kb:hasRepresentation</code> or a subproperty) to other resources containing files that represent the painting. Each of these other resources can extend a different subclass of <code>Representation</code>. For example, a painting could have a <code>StillImageRepresentation</code> as well as a <code>DDDrepresentation</code>.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#standard-resource-classes","title":"Standard Resource Classes","text":"<p>In general, each project must define its own subclasses of <code>kb:Resource</code>. However, the Knora base ontology provides some standard subclasses of <code>kb:Resource</code>, which are intended to be used by any project:</p> <ul> <li> <p><code>Region</code>: Represents a region of a <code>Representation</code> (see Representations).</p> </li> <li> <p><code>Annotation</code>: Represents an annotation of a resource.   The <code>hasComment</code> property points to the text of the annotation, represented as a <code>kb:TextValue</code>.</p> </li> <li> <p><code>LinkObj</code>: Represents a link that connects two or more resources.   A <code>LinkObj</code> has a <code>hasLinkTo</code> property pointing to each resource that it connects, as well as a <code>hasLinkToValue</code>   property pointing to a reification of each of these direct links (   see Links Between Resources).   A <code>LinkObj</code> is more complex (and hence less convenient and readable) than a simple direct link, but it has the   advantage that it can be annotated using an <code>Annotation</code>. For improved readability, a project can make its own   subclasses of <code>LinkObj</code> with specific meanings.</p> </li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#values","title":"Values","text":"<p>The Knora base ontology defines a set of OWL classes that are derived from <code>kb:Value</code> and represent different types of structured values found in humanities data. This set of classes may not be extended by user-created ontologies.</p> <p>A value is always part of one particular resource, which points to it using some property derived from <code>hasValue</code>. For example, a user-created ontology could specify a <code>Book</code> class with a property <code>hasSummary</code> (derived from <code>hasValue</code>), and that property could have a <code>knora-base:objectClassConstraint</code> of <code>TextValue</code>. This would mean that the summary of each book is represented as a <code>TextValue</code>.</p> <p>Knora values are versioned. Existing values are not modified. Instead, a new version of an existing value is created. The new version is linked to the old version via the <code>previousValue</code> property.</p> <p>Since each value version has a different IRI, there is no IRI that can be used to cite the value, such that it will always refer to the latest version of the value. Therefore, the latest version of each value has a separate UUID, as the object of the property <code>valueHasUUID</code>. When a new version of the value is created, this UUID is moved to the new version. This makes it possible to cite the latest version of a value by searching for the UUID.</p> <p>\"Deleting\" a value means marking it with <code>kb:isDeleted</code>. An optional <code>kb:deleteComment</code> may be added to explain why the value has been marked as deleted. Deleted values are normally hidden.</p> <p>Most types of values are marked as deleted without creating a new version of the value. However, link values must be treated as a special case. Before a <code>LinkValue</code> can be marked as deleted, its reference count must be decremented to 0. Therefore, a new version of the <code>LinkValue</code> is made, with a reference count of 0, and it is this new version that is marked as deleted.</p> <p>To simplify the enforcement of ontology constraints, and for consistency with resource updates, no new versions of a deleted value can be made; it is not possible to undelete. Instead, if desired, a new value can be created by copying data from a deleted value.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#properties-of-value","title":"Properties of Value","text":"<ul> <li> <p><code>valueCreationDate</code> (1): The date and time when the value was created.</p> </li> <li> <p><code>attachedToUser</code> (1): The user who owns the value.</p> </li> <li> <p><code>valueHasString</code> (1): A human-readable string representation of the value's contents, which is available to DSP-API's   full-text search index.</p> </li> <li> <p><code>valueHasOrder</code> (0-1): A resource may have several properties of the same type with different values (which will be of   the same class), and it may be necessary to indicate an order in which these values occur. For example, a book may   have several authors which should appear in a defined order. Hence, <code>valueHasOrder</code>, when present, points to an   integer literal indicating the order of a given value relative to the other values of the same property. These   integers will not necessarily start at any particular number, and will not necessarily be consecutive.</p> </li> <li> <p><code>previousValue</code> (0-1): The previous version of the value.</p> </li> <li> <p><code>valueHasUUID</code> (0-1): The UUID that refers to all versions of the value. Only the latest version of the value has this   property.</p> </li> <li> <p><code>isDeleted</code> (1): Indicates whether the value has been deleted.</p> </li> <li> <p><code>deleteDate</code> (0-1): If the value has been deleted, indicates when it was deleted.</p> </li> <li> <p><code>deleteComment</code> (0-1): If the value has been deleted, indicates why it was deleted.</p> </li> </ul> <p>Each Knora value can grant permissions (see Authorisation).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#subclasses-of-value","title":"Subclasses of Value","text":""},{"location":"DSP-API/02-dsp-ontologies/knora-base/#textvalue","title":"TextValue","text":"<p>Represents text, possibly including markup. The text is the object of the <code>valueHasString</code> property. A line break is represented as a Unicode line feed character (<code>U+000A</code>). The non-printing Unicode character <code>INFORMATION SEPARATOR TWO (U+001E)</code> can be used to separate words that are separated only by standoff markup (see below), so they are recognised as separate in a full-text search index.</p> <p>Markup is stored using this property:</p> <ul> <li> <p><code>valueHasStandoff</code> (0-n): Points to a standoff markup tag. See   Text with Standoff Markup.</p> </li> <li> <p><code>valueHasMapping</code> (0-1): Points to the mapping used to create the standoff markup and to convert it back to the   original XML. See Mapping to Create Standoff From XML.</p> </li> </ul> <p>A text value can have a specified language:</p> <ul> <li><code>valueHasLanguage</code> (0-1): An ISO 639-1 code as string specifying the language of the text.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#datevalue","title":"DateValue","text":"<p>Humanities data includes many different types of dates. A date has a specified calendar, and is always represented as a period with start and end points (which may be equal), each of which has a precision (<code>DAY</code>, <code>MONTH</code>, or <code>YEAR</code>). For <code>GREGORIAN</code> and <code>JULIAN</code> calendars, an optional <code>ERA</code> indicator term (<code>BCE</code>, <code>CE</code>, or <code>BC</code>, <code>AD</code>) can be added to the date, when no era is provided the default era <code>AD</code> will be considered. Internally, the start and end points are stored as two Julian Day Numbers. This calendar-independent representation makes it possible to compare and search for dates regardless of the calendar in which they were entered. Properties:</p> <ul> <li> <p><code>valueHasCalendar</code> (1): The name of the calendar in which the date should be displayed. Currently <code>GREGORIAN</code>,   <code>JULIAN</code>, and <code>ISLAMIC</code> civil calendars are supported.</p> </li> <li> <p><code>valueHasStartJDN</code> (1): The Julian Day Number of the start of the period (an <code>xsd:integer</code>).</p> </li> <li> <p><code>valueHasStartPrecision</code> (1): The precision of the start of the period.</p> </li> <li> <p><code>valueHasEndJDN</code> (1): The Julian Day Number of the end of the period (an <code>xsd:integer</code>).</p> </li> <li> <p><code>valueHasEndPrecision</code> (1): The precision of the end of the period.</p> </li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#timevalue","title":"TimeValue","text":"<p>A Knora time value represents a precise moment in time in the Gregorian calendar. Since nanosecond precision can be included, it is suitable for use as a timestamp. Properties:</p> <ul> <li><code>valueHasTimeStamp</code> (1): An <code>xsd:dateTimeStamp</code>, stored as an <code>xsd:dateTime</code> (because SPARQL does not support   <code>xsd:dateTimeStamp</code>).</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#intvalue","title":"IntValue","text":"<p>Represents an integer. Property:</p> <ul> <li><code>valueHasInteger</code> (1): An <code>xsd:integer</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#colorvalue","title":"ColorValue","text":"<ul> <li><code>valueHasColor</code> (1): A string representing a color. The string encodes a color as hexadecimal RGB values, e.g.   <code>\\#FF0000</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#decimalvalue","title":"DecimalValue","text":"<p>Represents an arbitrary-precision decimal number. Property:</p> <ul> <li><code>valueHasDecimal</code> (1): An <code>xsd:decimal</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#urivalue","title":"UriValue","text":"<p>Represents a non-Knora URI. Property:</p> <ul> <li><code>valueHasUri</code> (1): An <code>xsd:anyURI</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#booleanvalue","title":"BooleanValue","text":"<p>Represents a boolean value. Property:</p> <ul> <li><code>valueHasBoolean</code> (1): An <code>xsd:boolean</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#geomvalue","title":"GeomValue","text":"<p>Represents a geometrical object as a JSON string, using normalized coordinates. Property:</p> <ul> <li><code>valueHasGeometry</code> (1): A JSON string.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#geonamevalue","title":"GeonameValue","text":"<p>Represents a geolocation, using the identifiers found at GeoNames. Property:</p> <ul> <li><code>valueHasGeonameCode</code> (1): The identifier of a geographical feature from GeoNames, represented   as an <code>xsd:string</code>.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#intervalvalue","title":"IntervalValue","text":"<p>Represents a time interval, with precise start and end times on a timeline, e.g. relative to the beginning of an audio or video file. Properties:</p> <ul> <li> <p><code>valueHasIntervalStart</code> (1): An <code>xsd:decimal</code> representing the start of the interval in seconds.</p> </li> <li> <p><code>valueHasIntervalEnd</code> (1): An <code>xsd:decimal</code> representing the end of the interval in seconds.</p> </li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#listvalue","title":"ListValue","text":"<p>Projects often need to define lists or hierarchies of categories that can be assigned to many different resources. Then, for example, a user interface can provide a drop-down menu to allow the user to assign a category to a resource. The <code>ListValue</code> class provides a way to represent these sorts of data structures. It can represent either a flat list or a tree.</p> <p>A <code>ListValue</code> has this property:</p> <ul> <li><code>valueHasListNode</code> (1): Points to a <code>ListNode</code>.</li> </ul> <p>Each <code>ListNode</code> can have the following properties:</p> <ul> <li> <p><code>isRootNode</code> (0-1): Set to <code>true</code> if this is the root node.</p> </li> <li> <p><code>hasSubListNode</code> (0-n): Points to the node's child nodes, if any.</p> </li> <li> <p><code>hasRootNode</code> (0-1): Points to the root node of the list (absent if <code>isRootNode</code> is <code>true</code>).</p> </li> <li> <p><code>listNodePosition</code> (0-1): An integer indicating the node's position in the list of its siblings (absent   if <code>isRootNode</code> is <code>true</code>).</p> </li> <li> <p><code>listNodeName</code> (0-1): The node's human-readable name (absent if <code>isRootNode</code> is <code>true</code>).</p> </li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#filevalue","title":"FileValue","text":"<p>DSP-API can store certain kinds of data outside the triplestore, in files (see Representations). Each digital object that is stored outside the triplestore has associated metadata, which is stored in the triplestore in a <code>kb:FileValue</code>. The base class <code>FileValue</code>, which is not intended to be used directly, has the following properties:</p> <ul> <li> <p>File metadata:</p> <ul> <li><code>internalFilename</code> (1): The name of the file as stored by DSP.</li> <li><code>internalMimeType</code> (1): The MIME type of the file as stored by DSP.</li> <li><code>originalFilename</code> (0-1): The original name of the file when it was uploaded to DSP.</li> <li><code>originalMimeType</code> (0-1): The original MIME type of the file when it was uploaded to DSP.</li> </ul> </li> <li> <p>Legal info metadata</p> <ul> <li><code>hasAuthorship</code> (0-n): Indicates the authorship of the file, each author has their own string literal.</li> <li><code>hasCopyrightHolder</code> (0-1): The copyright holder of the file, a string literal. The project restricts which values are allowed.</li> <li><code>hasLicense</code> (0-1): The license under which the file is published, an IRI to the license. The project restricts which values are allowed.</li> </ul> </li> </ul> <p>The subclasses of <code>FileValue</code>, which are intended to be used directly in data, include:</p> <ul> <li> <p><code>StillImageAbstractFileValue</code>: Contains metadata about a still image file, which can be either <code>StillImageFileValue</code> (an image stored in Sipi) or <code>StillImageExternalFileValue</code> (a reference to an image stored in an external IIIF service).</p> </li> <li> <p><code>MovingImageFileValue</code>: Contains metadata about a video file.</p> </li> <li> <p><code>AudioFileValue</code>: Contains metadata about an audio file.</p> </li> <li> <p><code>DDDFileValue</code>: Contains metadata about a 3D image file.</p> </li> <li> <p><code>TextFileValue</code>: Contains metadata about a text file.</p> </li> <li> <p><code>DocumentFileValue</code>: Contains metadata about a document (such as PDF) that is not a text file.</p> </li> <li> <p><code>ArchiveFileValue</code>: Contains metadata about an archive (such as zio archive).</p> </li> </ul> <p>Each of these classes contains properties that are specific to the type of file it describes. For example, still image files have dimensions, video files have frame rates, and so on.</p> <p><code>FileValue</code> objects are versioned like other values, and the actual files stored by DSP-API are also versioned. Version 1 of the DSP-API does not provide a way to retrieve a previous version of a file, but this feature will be added in a subsequent version of the API.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#linkvalue","title":"LinkValue","text":"<p>A <code>LinkValue</code> is an RDF \"reification\" containing metadata about a link between two resources. It is therefore a subclass of <code>rdf:Statement</code> as well as of <code>Value</code>. It has these properties:</p> <p><code>rdf:subject</code> (1)</p> <p>:   The resource that is the source of the link.</p> <p><code>rdf:predicate</code> (1)</p> <p>:   The link property.</p> <p><code>rdf:object</code> (1)</p> <p>:   The resource that is the target of the link.</p> <p><code>valueHasRefCount</code> (1)</p> <p>:   The reference count of the link. This is meaningful when the <code>LinkValue</code> describes resource references in Standoff text markup (see StandoffLinkTag). Otherwise, the reference count will always be 1 (if the link exists) or 0 (if it has been deleted).</p> <p>For details about how links are created in DSP-API, see Links Between Resources.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#externalresvalue","title":"ExternalResValue","text":"<p>Represents a resource that is not stored in the RDF triplestore managed by DSP-API, but instead resides in an external repository managed by some other software. The <code>ExternalResValue</code> contains the information that DSP-API needs in order to access the resource, assuming that a suitable gateway plugin is installed.</p> <p><code>extResAccessInfo</code> (1)</p> <p>:   The location of the repository containing the external resource (e.g. its URL).</p> <p><code>extResId</code> (1)</p> <p>:   The repository-specific ID of the external resource.</p> <p><code>extResProvider</code> (1)</p> <p>:   The name of the external provider of the resource.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#links-between-resources","title":"Links Between Resources","text":"<p>A link between two resources is expressed, first of all, as a triple, in which the subject is the resource that is the source of the link, the predicate is a \"link property\" (a subproperty of <code>kb:hasLinkTo</code>), and the object is the resource that is the target of the link.</p> <p>It is also useful to store metadata about links. For example, DSP-API needs to know who owns the link, who has permission to modify it, when it was created, and so on. Such metadata cannot simply describe the link property, because then it would refer to that property in general, not to any particular instance in which that property is used to connect two particular resources. To attach metadata to a specific link in RDF, it is necessary to create an RDF \"reification\". A reification makes statements about a particular triple (subject, predicate, object), in this case the triple that expresses the link between the resources. DSP-API uses reifications of type <code>kb:LinkValue</code> (described in LinkValue) to store metadata about links.</p> <p>For example, suppose a project describes paintings that belong to collections. The project can define an ontology as follows (expressed here in Turtle format, and simplified for the purposes of illustration):</p> <pre><code>@prefix kb &lt;http://www.knora.org/ontology/knora-base#&gt; .\n@prefix : &lt;http://www.knora.org/ontology/paintings#&gt; .\n\n:Painting rdf:type owl:Class ;\n    rdfs:subClassOf kb:Resource ,\n        [ rdf:type owl:Restriction ;\n            owl:onProperty :hasArtist ;\n            owl:cardinality 1 ] ,\n        [ rdf:type owl:Restriction ;\n              owl:onProperty :hasTitle ;\n              owl:cardinality 1 ] ;\n        [ rdf:type owl:Restriction ;\n              owl:onProperty :isInCollection ;\n              owl:minCardinality 1 ] ;\n        [ rdf:type owl:Restriction ;\n              owl:onProperty :isInCollectionValue ;\n              owl:minCardinality 1 ] .\n\n:Collection rdf:type owl:Class ;\n    rdfs:subClassOf kb:Resource ,\n        [ rdf:type owl:Restriction ;\n            owl:onProperty :hasCollectionName ;\n            owl:cardinality 1 ] .\n\n:hasArtist rdf:type owl:ObjectProperty ;\n    rdfs:label \"Name of artist\" ;\n    kb:subjectClassConstraint :Painting ;\n    kb:objectClassConstraint kb:TextValue .\n\n:hasTitle rdf:type owl:ObjectProperty ;\n    rdfs:label \"Title of painting\"\n    kb:subjectClassConstraint :Painting ;\n    kb:objectClassConstraint kb:TextValue .\n\n:hasCollectionName rdf:type owl:ObjectProperty ;\n    rdfs:label \"Name of collection\" ;\n    kb:subjectClassConstraint :Collection ;\n    kb:objectClassConstraint kb:TextValue .\n</code></pre> <p>To link the paintings to the collection, we must add a \"link property\" to the ontology. In this case, the link property will point from a painting to the collection it belongs to. Every link property must be a subproperty of <code>kb:hasLinkTo</code>.</p> <pre><code>:isInCollection rdf:type owl:ObjectProperty ;\n    rdfs:subPropertyOf kb:hasLinkTo ;\n    kb:subjectClassConstraint :Painting ;\n    kb:objectClassConstraint :Collection .\n</code></pre> <p>We must then add a \"link value property\", which will point from a painting to a <code>kb:LinkValue</code> (described in LinkValue), which will contain metadata about the link between the property and the collection. In particular, the link value specifies the creator of the link, the date when it was created, and the permissions that determine who can view or modify it. The name of the link value property is constructed using a simple naming convention: the word <code>Value</code> is appended to the name of the link property. In this case, since our link property is called <code>:isInCollection</code>, the link value property must be called <code>:isInCollectionValue</code>. Every link value property must be a subproperty of <code>kb:hasLinkToValue</code>.</p> <pre><code>:isInCollectionValue rdf:type owl:ObjectProperty ;\n    rdfs:subPropertyOf kb:hasLinkToValue ;\n    kb:subjectClassConstraint :Painting ;\n    kb:objectClassConstraint kb:LinkValue .\n</code></pre> <p>Given this ontology, we can create some RDF data describing a painting and a collection:</p> <pre><code>@prefix paintings &lt;http://www.knora.org/ontology/paintings#&gt; .\n@prefix data &lt;http://www.knora.org/ontology/paintings/data#&gt; .\n\ndata:dali_4587 rdf:type paintings:Painting ;\n    paintings:hasTitle data:value_A ;\n    paintings:hasArtist data:value_B .\n\ndata:value_A rdf:type kb:TextValue ;\n    kb:valueHasString \"The Persistence of Memory\" .\n\ndata:value_B rdf:type kb:TextValue ;\n    kb:valueHasString \"Salvador Dali\" .\n\ndata:pompidou rdf:type paintings:Collection ;\n    paintings:hasCollectionName data:value_C .\n\ndata:value_C rdf:type kb:TextValue ;\n    kb:valueHasString \"Centre Pompidou, Paris\" .\n</code></pre> <p>We can then state that the painting is in the collection:</p> <pre><code>data:dali_4587 paintings:isInCollection data:pompidou ;\n    paintings:isinCollectionValue data:value_D .\n\ndata:value_D rdf:type kb:LinkValue ;\n    rdf:subject data:dali_4587 ;\n    rdf:predicate paintings:isInCollection ;\n    rdf:object data:pompidou ;\n    kb:valueHasRefCount 1 .\n</code></pre> <p>This creates a link (<code>paintings:isInCollection</code>) between the painting and the collection, along with a reification containing metadata about the link. We can visualise the result as the following graph:</p> <p></p> <p>DSP-API allows a user to see a link if the requesting user has permission to see the source and target resources as well as the <code>kb:LinkValue</code>.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#part-whole-relations-between-resources","title":"Part-Whole-Relations between Resources","text":""},{"location":"DSP-API/02-dsp-ontologies/knora-base/#ispartof","title":"isPartOf","text":"<p>A special case of linked resources are part-of related resources, i.e. a resource consisting of several other resources. In order to create a part-of relation between two resources, the resource that is part of another resource needs to have a property that is either <code>kb:isPartOf</code> or a subproperty thereof. <code>kb:isPartOf</code> itself is a subproperty of <code>kb:hasLinkTo</code>. Same as described above for link properties, a corresponding part-of value property is created automatically. This value property has the same name as the part-of property with <code>Value</code> appended. For example, if in an ontology <code>data</code> a property <code>data:partOf</code> was defined, the corresponding value property would be named <code>data:partOfValue</code>. This newly created property <code>data:partOfValue</code> is defined as a subproperty of <code>kb:isPartOfValue</code>.</p> <p>Part-of relations are recommended for resources of type <code>kb:StillImageRepresentation</code>. In that case, the resource that is part of another resource needs to have a property <code>kb:seqnum</code> or a subproperty thereof, with an integer as value. A client can then use this information to leaf through the parts of the compound resource (p.ex. to leaf through the pages of a book like in this example).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#segment","title":"Segment","text":"<p>DSP-API supports the creation of segment resources. A segment is a part of a resource which has a temporal extent; the segment is defined by a start and end time relative to the resource. Segments are modelled as resources of type <code>kb:Segment</code>, having the properties <code>kb:isSegmentOf</code>, a LinkValue pointing to the resource the segment is part of, and <code>kb:hasSegmentBounds</code>, a IntervalValue representing the temporal extent of the segment. However, <code>kb:Segment</code> is \"abstract\" and cannot be used directly in data.</p> <p>Segments have a number of optional, generic properties to add additional information: <code>kb:hasTitle</code> (0-1), <code>kb:hasDescription</code> (0-n), <code>kb:hasKeyword</code> (0-n), <code>kb:relatesTo</code>/<code>kb:relatesToValue</code> (0-n), and <code>kb:hasComment</code> (0-1).</p> <p>There are two concrete subclasses of <code>kb:Segment</code> for video and audio resources.</p> <p>It is possible to create subclasses of <code>kb:AudioSegment</code> and <code>kb:VideoSegment</code> to add additional properties, but this is discouraged and may not be supported in future versions of DSP-API. Instead, instances of <code>kb:Annotation</code> pointing to the segment should be used to add additional information.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#audiosegment","title":"AudioSegment","text":"<p>Audio segments are defined by the following properties:</p> <ul> <li><code>kb:isAudioSegmentOf</code> (1): A LinkValue pointing to an AudioRepresentation.</li> <li><code>kb:hasSegmentBounds</code> (1): An IntervalValue representing the temporal extent of the segment.</li> <li><code>kb:hasTitle</code> (0-1): A TextValue for adding a title or name to the segment.</li> <li><code>kb:hasDescription</code> (0-n): A TextValue for providing one or more descriptions of the segment.</li> <li><code>kb:hasKeyword</code> (0-n): A TextValue for adding one or more keywords to the segment.</li> <li><code>kb:relatesTo</code>/<code>kb:relatesToValue</code> (0-n): A LinkValue for relating the segment to another resource.</li> <li><code>kb:hasComment</code> (0-1): A TextValue for a comment on the segment.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#videosegment","title":"VideoSegment","text":"<p>Video segments are defined by the following properties:</p> <ul> <li><code>kb:isVideoSegmentOf</code> (1): A LinkValue pointing to a MovingImageRepresentation.</li> <li><code>kb:hasSegmentBounds</code> (1): An IntervalValue representing the temporal extent of the segment.</li> <li><code>kb:hasTitle</code> (0-1): A TextValue for adding a title or name to the segment.</li> <li><code>kb:hasDescription</code> (0-n): A TextValue for providing one or more descriptions of the segment.</li> <li><code>kb:hasKeyword</code> (0-n): A TextValue for adding one or more keywords to the segment.</li> <li><code>kb:relatesTo</code>/<code>kb:relatesToValue</code> (0-n): A LinkValue for relating the segment to another resource.</li> <li><code>kb:hasComment</code> (0-1): A TextValue for a comment on the segment.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#text-with-standoff-markup","title":"Text with Standoff Markup","text":"<p>DSP-API is designed to be able to store text with markup, which can indicate formatting and structure, as well as the complex observations involved in transcribing handwritten manuscripts. One popular way of representing text in the humanities is to encode it in XML using the Text Encoding Initiative (TEI) guidelines. In DSP-API, a TEI/XML document can be stored as a file with attached metadata, but this is not recommended, because it does not allow to perform searches across multiple documents.</p> <p>The recommended way to store text with markup in DSP-API is to use the built-in support for \"standoff\" markup, which is stored separately from the text. This has some advantages over embedded markup such as XML. While XML requires markup to have a hierarchical structure, and does not allow overlapping tags, standoff nodes do not have these limitations (see  Using Standoff Properties for Marking-up Historical Documents in the Humanities). A standoff tag can be attached to any substring in the text by giving its start and end positions. Unlike in corpus linguistics, we do not use any tokenisation resulting in a form of predefined segmentation, which would limit the user's ability to freely annotate any ranges in the text.</p> <p>For example, suppose we have the following text:</p> <pre><code>&lt;blockquote&gt;This &lt;i&gt;sentence &lt;strong&gt;has overlapping&lt;/strong&gt;&lt;/i&gt; &lt;strong&gt;visual&lt;/strong&gt; attributes.&lt;/blockquote&gt;\n</code></pre> <p>This would require just two standoff tags: <code>(italic, start=5, end=29)</code> and <code>(bold, start=14, end=36)</code>.</p> <p>Moreover, standoff makes it possible to mark up the same text in different, possibly incompatible ways, allowing for different interpretations without making redundant copies of the text. In the Knora base ontology, any text value can have standoff tags.</p> <p>By representing standoff as RDF triples, DSP-API makes markup searchable across multiple text documents in a repository. For example, if a repository contains documents in which references to persons are indicated in standoff, it is straightforward to find all the documents mentioning a particular person. DSP-API's standoff support is intended to make it possible to convert documents with embedded, hierarchical markup, such as TEI/XML, into RDF standoff and back again, with no data loss, thus bringing the benefits of RDF to existing TEI-encoded documents.</p> <p>In the Knora base ontology, a <code>TextValue</code> can have one or more standoff tags. Each standoff tag indicates the start and end positions of a substring in the text that has a particular attribute. The OWL class <code>kb:StandoffTag</code>, which is the base class of all standoff node classes, has these properties:</p> <ul> <li><code>standoffTagHasStart</code> (1): The index of the first character in the text that has the attribute.</li> <li><code>standoffTagHasEnd</code> (1): The index of the last character in the text that has the attribute, plus 1.</li> <li><code>standoffTagHasUUID</code> (1): A UUID identifying this instance and those corresponding to it in later versions of   the <code>TextValue</code> it belongs to.   The UUID is a means to maintain a reference to a particular range of a text also when new versions are made and   standoff   tag IRIs change.</li> <li><code>standoffTagHasOriginalXMLID</code> (0-1): The original ID of the XML element that the standoff tag represents, if any.</li> <li><code>standoffTagHasStartIndex</code> (1): The start index of the standoff tag. Start indexes are numbered from 0 within the   context of a particular text.   When several standoff tags share the same start position, they can be nested correctly with this information when   transforming them to XML.</li> <li><code>standoffTagHasEndIndex</code> (1): The end index of the standoff tag. Start indexes are numbered from 0 within the context   of a particular text.   When several standoff tags share the same end position, they can be nested correctly with this information when   transforming   them to XML.</li> <li><code>standoffTagHasStartParent</code> (0-1): Points to the parent standoff tag. This corresponds to the original nesting of tags   in XML. If a standoff tag has no parent, it represents the XML root element.   If the original XML element is a CLIX tag, it represents the start of a virtual (non syntactical) hierarchy.</li> <li><code>standoffTagHasEndParent</code> (0-1): Points to the parent standoff tag if the original XML element is a CLIX tag and   represents the end of a virtual (non syntactical) hierarchy.</li> </ul> <p>The <code>StandoffTag</code> class is not used directly in RDF data; instead, its subclasses are used. A few subclasses are currently provided in <code>standoff-onto.ttl</code>. Projects are able to define their own custom standoff tag classes (direct subclasses of <code>StandoffTag</code> or one of the standoff data type classes or subclasses of one of the standoff classes defined in <code>standoff-onto.ttl</code>).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#subclasses-of-standofftag","title":"Subclasses of StandoffTag","text":""},{"location":"DSP-API/02-dsp-ontologies/knora-base/#standoff-data-type-tags","title":"Standoff Data Type Tags","text":"<p>Associates data in some Knora value type with a substring in a text. Standoff data type tags are subclasses of <code>ValueBase</code> classes.</p> <ul> <li><code>StandoffLinkTag</code> Indicates that a substring refers to another <code>kb:Resource</code>. See StandoffLinkTag.</li> <li><code>StandoffInternalReferenceTag</code> Indicates that a substring refers to another standoff tag in the same text value.   See Internal Links in a TextValue.</li> <li><code>StandoffUriTag</code> Indicates that a substring is associated with a URI, which is stored in the same form that is used   for <code>kb:UriValue</code>. See UriValue.</li> <li><code>StandoffDateTag</code> Indicates that a substring represents a date, which is stored in the same form that is used   for <code>kb:DateValue</code>. See DateValue.</li> <li><code>StandoffColorTag</code> Indicates that a substring represents a color, which is stored in the same form that is used   for <code>kb:ColorValue</code>. See ColorValue.</li> <li><code>StandoffIntegerTag</code> Indicates that a substring represents an integer, which is stored in the same form that is used   for <code>kb:IntegerValue</code>. See IntValue.</li> <li><code>StandoffDecimalTag</code> Indicates that a substring represents a number with fractions, which is stored in the same form   that is used for <code>kb:DecimalValue</code>. See DecimalValue.</li> <li><code>StandoffIntervalTag</code> Indicates that a substring represents an interval, which is stored in the same form that is used   for <code>kb:IntervalValue</code>. See IntervalValue.</li> <li><code>StandoffBooleanTag</code> Indicates that a substring represents a Boolean, which is stored in the same form that is used   for <code>kb:BooleanValue</code>. See BooleanValue.</li> <li><code>StandoffTimeTag</code> Indicates that a substring represents a timestamp, which is stored in the same form that is used   for <code>kb:TimeValue</code>. See TimeValue.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#standofflinktag","title":"StandoffLinkTag","text":"<p>A <code>StandoffLinkTag</code> Indicates that a substring is associated with a Knora resource. For example, if a repository contains resources representing persons, a text could be marked up so that each time a person's name is mentioned, a <code>StandoffLinkTag</code> connects the name to the Knora resource describing that person. It has the following property:</p> <p><code>standoffTagHasLink</code> (1): The IRI of the resource that is referred to.</p> <p>One of the design goals of the Knora base ontology is to make it easy and efficient to find out which resources contain references to a given resource. Direct links are easier and more efficient to query than indirect links. Therefore, when a text value contains a resource reference in its standoff nodes, DSP-API automatically creates a direct link between the containing resource and the target resource, along with an RDF reification (a <code>kb:LinkValue</code>) describing the link, as discussed in Links Between Resources. In this case, the link property is always <code>kb:hasStandoffLinkTo</code>, and the link value property (which points to the <code>LinkValue</code>) is always <code>kb:hasStandoffLinkToValue</code>.</p> <p>DSP-API automatically updates direct links and reifications for standoff resource references when text values are updated. To do this, it keeps track of the number of text values in each resource that contain at least one standoff reference to a given target resource. It stores this number as the reference count of the <code>LinkValue</code> (see LinkValue) describing the direct link. Each time this number changes, it makes a new version of the <code>LinkValue</code>, with an updated reference count. When the reference count reaches zero, it removes the direct link and makes a new version of the <code>LinkValue</code>, marked with <code>kb:isDeleted</code>.</p> <p>For example, if <code>data:R1</code> is a resource with a text value in which the resource <code>data:R2</code> is referenced, the repository could contain the following triples:</p> <pre><code>data:R1\n    ex:hasComment data:V1 .\n\ndata:V1\n    rdf:type            kb:TextValue ;\n    kb:valueHasString   \"This link is internal.\" ;\n    kb:valueHasStandoff data:SO1 .\n\ndata:SO1\n    rdf:type                kb:StandoffLinkTag ;\n    kb:standoffTagHasStart: 5 ;\n    kb:standoffTagHasEnd:   9 ;\n    kb:standoffTagHasLink   data:R2 .\n\ndata:R1\n    kb:hasStandoffLinkTo data:R2 .\n\ndata:R1\n    kb:hasStandoffLinkToValue data:LV1 .\n\ndata:LV1\n    rdf:type            kb:LinkValue ;\n    rdf:subject         data:R1 ;\n    rdf:predicate       kb:hasStandoffLinkTo ;\n    rdf:object          data:R2 ;\n    kb:valueHasRefCount 1 .\n</code></pre> <p>The result can be visualized like this:</p> <p></p> <p>Link values created automatically for resource references in standoff are visible to all users, and the creator of these link values is always <code>kb:SystemUser</code> (see Users and Groups). The DSP-API server allows a user to see a standoff link if the user has permission to see the source and target resources.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#internal-links-in-a-textvalue","title":"Internal Links in a TextValue","text":"<p>Internal links in a <code>TextValue</code> can be represented using the data type standoff class <code>StandoffInternalReferenceTag</code> or a subclass of it. It has the following property:</p> <p><code>standoffTagHasInternalReference</code> (1): Points to a <code>StandoffTag</code> that belongs to the same <code>TextValue</code>. It has an <code>objectClassConstraint</code> of <code>StandoffTag</code>.</p> <p>For links to a <code>kb:Resource</code>, see StandoffLinkTag.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#mapping-to-create-standoff-from-xml","title":"Mapping to Create Standoff From XML","text":"<p>A mapping allows for the conversion of an XML document to RDF-standoff and back. A mapping defines one-to-one relations between XML elements (with or without a class) and attributes and standoff classes and properties (see XML to Standoff Mapping).</p> <p>A mapping is represented by a <code>kb:XMLToStandoffMapping</code> which contains one or more <code>kb:MappingElement</code>. A <code>kb:MappingElement</code> maps an XML element (including attributes) to a standoff class and standoff properties. It has the following properties:</p> <ul> <li><code>mappingHasXMLTagname</code> (1): The name of the XML element that is mapped to a standoff class.</li> <li><code>mappingHasXMLNamespace</code> (1): The XML namespace of the XML element that is mapped to a standoff class. If no namespace   is given, <code>noNamespace</code> is used.</li> <li><code>mappingHasXMLClass</code> (1): The name of the class of the XML element. If it has no class, <code>noClass</code> is used.</li> <li><code>mappingHasStandoffClass</code> (1): The standoff class the XML element is mapped to.</li> <li><code>mappingHasXMLAttribute</code> (0-n): Maps XML attributes to standoff properties using <code>MappingXMLAttribute</code>. See below.</li> <li><code>mappingHasStandoffDataTypeClass</code> (0-1): Indicates the standoff data type class of the standoff class the XML element   is mapped to.</li> <li><code>mappingElementRequiresSeparator</code> (1): Indicates if there should be an invisible word separator inserted after the XML   element in the RDF-standoff representation.   Once the markup is stripped, text segments that belonged to different elements may be concatenated.</li> </ul> <p>A <code>MappingXMLAttribute</code> has the following properties:</p> <ul> <li><code>mappingHasXMLAttributename</code>: The name of the XML attribute that is mapped to a standoff property.</li> <li><code>mappingHasXMLNamespace</code>: The namespace of the XML attribute that is mapped to a standoff property. If no namespace is   given, <code>noNamespace</code> is used.</li> <li><code>mappingHasStandoffProperty</code>: The standoff property the XML attribute is mapped to.</li> </ul> <p>DSP-API includes a standard mapping used by the DSP APP. It has the IRI <code>http://rdfh.ch/standoff/mappings/StandardMapping</code> and defines mappings for a few elements used to write texts with simple markup.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#standoff-in-digital-editions","title":"Standoff in Digital Editions","text":"<p>DSP-API's standoff is designed to make it possible to convert XML documents to standoff and back. One application for this feature is an editing workflow in which an editor works in an XML editor, and the resulting XML documents are converted to standoff and stored in the DSP, where they can be searched and annotated.</p> <p>If an editor wants to correct text that has been imported from XML into standoff, the text can be exported as XML, edited, and imported again. To preserve annotations on standoff tags across edits, each tag can automatically be given a UUID. In a future version of the Knora base ontology, it may be possible to create annotations that point to UUIDs rather than to IRIs. When a text is exported to XML, the UUIDs can be included in the XML. When the edited XML is imported again, it can be converted to new standoff tags with the same UUIDs. Annotations that applied to standoff tags in the previous version of the text will therefore also apply to equivalent tags in the new version.</p> <p>When text is converted from XML into standoff, tags are also given indexes, which are numbered from 0 within the context of a particular text. This makes it possible to order tags that share the same position, and to preserve the hierarchy of the original XML document. An ordinary, hierarchical XML tag is converted to a standoff tag that has one index, as well as the index of its parent tag, if any. The Knora base ontology also supports non-hierarchical markup such as CLIX, which enables overlapping markup to be represented in XML. When non-hierarchical markup is converted to standoff, both the start position and the end position of the standoff tag have indexes and parent indexes.</p> <p>To support these features, a standoff tag can have these additional properties:</p> <ul> <li><code>standoffTagHasStartIndex</code> (0-1): The index of the start position.</li> <li><code>standoffTagHasEndIndex</code> (0-1): The index of the end position, if this is a non-hierarchical tag.</li> <li><code>standoffTagHasStartParent</code> (0-1): The IRI of the tag, if any, that contains the start position.</li> <li><code>standoffTagHasEndParent</code> (0-1): The IRI of the tag, if any, that contains the end position, if this is a   non-hierarchical tag.</li> <li><code>standoffTagHasUUID</code> (0-1): A UUID that can be used to annotate a standoff tag that may be present in different   versions of a text,   or in different layers of a text (such as a diplomatic transcription and an edited critical text).</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#querying-standoff-in-sparql","title":"Querying Standoff in SPARQL","text":"<p>A future version of DSP-API may provide an API for querying standoff markup. In the meantime, it is possible to query it directly in SPARQL. For example, here is a SPARQL query (using RDFS inference) that finds all the text values that have a standoff date tag referring to Christmas Eve 2016, contained in a <code>StandoffItalicTag</code>:</p> <pre><code>PREFIX knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt;\nPREFIX standoff: &lt;http://www.knora.org/ontology/standoff#&gt;\n\nselect * where {\n    ?standoffTag a knora-base:StandoffDateTag  .\n\n    ?standoffTag knora-base:valueHasStartJDN ?dateStart .\n    ?standoffTag knora-base:valueHasEndJDN ?dateEnd .\n\n    FILTER (2457747  &lt;= ?dateEnd &amp;&amp; 2457747  &gt;= ?dateStart)\n\n    ?standoffTag knora-base:standoffTagHasStartParent ?parent .\n    ?parent a standoff:StandoffItalicTag .\n\n    ?textValue knora-base:valueHasStandoff ?standoffTag .\n    ?textValue knora-base:valueHasString ?string .\n\n    ?standoffTag knora-base:standoffTagHasStart ?startPos .\n    ?standoffTag knora-base:standoffTagHasEnd ?endPos .  \n}\n</code></pre>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#authorisation","title":"Authorisation","text":""},{"location":"DSP-API/02-dsp-ontologies/knora-base/#users-and-groups","title":"Users and Groups","text":"<p>Each DSP-API user is represented by an object belonging to the class <code>kb:User</code>, which is a subclass of <code>foaf:Person</code>, and has the following properties:</p> <p><code>userid</code> (1)</p> <p>:   A unique identifier that the user must provide when logging in.</p> <p><code>password</code> (1)</p> <p>:   A cryptographic hash of the user's password.</p> <p><code>email</code> (0-n)</p> <p>:   Email addresses belonging to the user.</p> <p><code>isInProject</code> (0-n)</p> <p>:   Projects that the user is a member of.</p> <p><code>isInGroup</code> (0-n)</p> <p>:   user-created groups that the user is a member of.</p> <p><code>foaf:familyName</code> (1)</p> <p>:   The user's family name.</p> <p><code>foaf:givenName</code> (1)</p> <p>:   The user's given name.</p> <p>DSP-API's concept of access control is that an object (a resource or value) can grant permissions to groups of users (but not to individual users). There are several built-in groups:</p> <p><code>knora-admin:UnknownUser</code></p> <p>:   Any user who has not logged into DSP-API is automatically assigned to this group.</p> <p><code>knora-admin:KnownUser</code></p> <p>:   Any user who has logged into DSP-API is automatically assigned to this group.</p> <p><code>knora-admin:ProjectMember</code></p> <p>:   When checking a user's permissions on an object, the user is automatically assigned to this group if she is a member of the project that the object belongs to.</p> <p><code>knora-admin:Creator</code></p> <p>:   When checking a user's permissions on an object, the user is automatically assigned to this group if he is the creator of the object.</p> <p><code>knora-admin:ProjectAdmin</code></p> <p>:   When checking a user's permissions on an object, the user is automatically assigned to this group if she is an administrator of the project that the object belongs to.</p> <p><code>knora-admin:SystemAdmin</code></p> <p>:   The group of DSP-API system administrators.</p> <p>A user-created ontology can define additional groups, which must belong to the OWL class <code>knora-admin:UserGroup</code>.</p> <p>There is one built-in <code>knora-admin:SystemUser</code>, which is the creator of link values created automatically for resource references in standoff markup (see StandoffLinkTag).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#permissions","title":"Permissions","text":"<p>Each resource or value can grant certain permissions to specified user groups. These permissions are represented as the object of the predicate <code>kb:hasPermissions</code>, which is required on every <code>kb:Resource</code> and on the current version of every <code>kb:Value</code>. The permissions attached to the current version of a value also apply to previous versions of the value. Value versions other than the current one do not have this predicate.</p> <p>The following permissions can be granted:</p> <ol> <li>Restricted view permission (RV) Allows a restricted view of the object, e.g. a view of an image with a watermark.</li> <li>View permission (V) Allows an unrestricted view of the object. Having view permission on a resource only affects    the user's ability to view information about the resource other than its values. To view a value, she must have view    permission on the value itself.</li> <li>Modify permission (M) For values, this permission allows a new version of a value to be created. For resources,    this allows the user to create a new value (as opposed to a new version of an existing value), or to change    information about the resource other than its values. When he wants to make a new version of a value, his permissions    on the containing resource are not relevant. However, when he wants to change the target of a link, the old link must    be deleted and a new one created, so he needs modify permission on the resource.</li> <li>Delete permission (D) Allows the item to be marked as deleted.</li> <li>Change rights permission (CR) Allows the permissions granted by the object to be changed.</li> </ol> <p>Each permission in the above list implies all lower-numbered permissions. A user's permission level on a particular object is calculated in the following way:</p> <ol> <li>Make a list of the groups that the user belongs to, including    <code>Creator</code> and/or <code>ProjectMember</code> if applicable.</li> <li>Make a list of the permissions that she can obtain on the object, by iterating over the permissions that the object    grants. For each permission, if she is in the specified group, add the specified permission to the list of    permissions she can obtain.</li> <li>From the resulting list, select the highest-level permission.</li> <li>If the result is that she would have no permissions, give her whatever permission <code>UnknownUser</code> would have.</li> </ol> <p>To view a link between resources, a user needs permission to view the source and target resources. He also needs permission to view the <code>LinkValue</code> representing the link, unless the link property is <code>hasStandoffLinkTo</code> (see StandoffLinkTag).</p> <p>The format of the object of <code>kb:hasPermissions</code> is as follows:</p> <ul> <li>Each permission is represented by the one-letter or two-letter abbreviation given above.</li> <li>Each permission abbreviation is followed by a space, then a comma-separated list of groups that the permission is   granted to.</li> <li>The IRIs of built-in groups are shortened using the <code>knora-admin</code>   prefix.</li> <li>Multiple permissions are separated by a vertical bar (<code>|</code>).</li> </ul> <p>For example, if an object grants view permission to unknown and known users, and modify permission to project members, the resulting permission literal would be:</p> <pre><code>V knora-admin:UnknownUser,knora-admin:KnownUser|M knora-admin:ProjectMember\n</code></pre>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#consistency-checking","title":"Consistency Checking","text":"<p>DSP-API tries to enforce repository consistency by checking constraints that are specified in the Knora base ontology and in user-created ontologies. Three types of consistency rules are enforced:</p> <ul> <li>Cardinalities in OWL class definitions must be satisfied.</li> <li>Constraints on the types of the subjects and objects of OWL object properties must be satisfied.</li> <li>A datatype property may not have an empty string as an object.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#owl-cardinalities","title":"OWL Cardinalities","text":"<p>As noted in Resources, each subclass of <code>Resource</code> must use OWL cardinality restrictions to specify the properties it can have. More specifically, a resource is allowed to have a property that is a subproperty of <code>kb:hasValue</code> or <code>kb:hasLinkTo</code> only if the resource's class has some cardinality for that property. Similarly, a value is allowed to have a subproperty of <code>kb:valueHas</code> only if the value's class has some cardinality for that property.</p> <p>DSP-API supports, and attempts to enforce, the following cardinality constraints:</p> <ul> <li> <p><code>owl:cardinality 1</code>:   Exactly One <code>1</code> - A resource of this class must have exactly one instance of the specified property.</p> </li> <li> <p><code>owl:minCardinality 1</code>:   At Least One <code>1-n</code> - A resource of this class must have at least one instance of the specified property.</p> </li> <li> <p><code>owl:maxCardinality 1</code>:   Zero Or One <code>0-1</code> - A resource of this class must have either zero or one instance of the specified property.</p> </li> <li> <p><code>owl:minCardinality 0</code>:   Unbounded <code>0-n</code> - A resource of this class may have zero or more instances of the specified property.</p> </li> </ul> <p>DSP-API requires cardinalities to be defined using blank nodes, as in the following example from <code>knora-base</code>:</p> <pre><code>:Representation rdf:type owl:Class ;\n    rdfs:subClassOf :Resource ,\n        [ rdf:type owl:Restriction ;\n          owl:onProperty :hasFileValue ;\n          owl:minCardinality \"1\"^^xsd:nonNegativeInteger ] .\n\n:StillImageRepresentation rdf:type owl:Class ;\n    rdfs:subClassOf :Representation ,\n        [ rdf:type owl:Restriction ;\n          owl:onProperty :hasStillImageFileValue ;\n          owl:minCardinality \"1\"^^xsd:nonNegativeInteger ] .\n</code></pre> <p>The cardinality of a link property must be the same as the cardinality of the corresponding link value property.</p> <p>Each <code>owl:Restriction</code> may have the predicate <code>salsah-gui:guiOrder</code> to indicate the order in which properties should be displayed in a GUI (see The SALSAH GUI Ontology).</p> <p>A resource class inherits cardinalities from its superclasses. This follows from the rules of RDFS inference. Also, in DSP-API, cardinalities in the subclass can override cardinalities that would otherwise be inherited from the superclass. Specifically, if a superclass has a cardinality on a property P, and a subclass has a cardinality on a subproperty of P, the subclass's cardinality overrides the superclass's cardinality. In the example above, <code>hasStillImageFileValue</code> is a subproperty of <code>hasFileValue</code>. Therefore, the cardinality on <code>hasStillImageFileValue</code> overrides (i.e. replaces) the one on <code>hasFileValue</code>.</p> <p>Note that, unlike cardinalities, predicates of properties are not inherited. If <code>:foo rdfs:subPropertyOf :bar</code>, this does not mean that <code>:foo</code> inherits anything from <code>:bar</code>. Any predicates of <code>:foo</code> that are also needed by <code>:bar</code> must be defined explicitly on <code>:bar</code>. This design decision was made because property predicate inheritance is not provided by RDFS inference, and would make it more difficult to check the correctness of ontologies, while providing little practical benefit.</p> <p>For more information about OWL cardinalities, see the OWL 2 Primer.</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#constraints-on-the-types-of-property-subjects-and-objects","title":"Constraints on the Types of Property Subjects and Objects","text":"<p>When a user-created ontology defines a property, it must indicate the types that are allowed as objects (and, if possible, as subjects) of the property. This is done using the following Knora-specific properties:</p> <p><code>subjectClassConstraint</code></p> <p>:   Specifies the class that subjects of the property must belong to. This constraint is recommended but not required. DSP-API will attempt to enforce this constraint.</p> <p><code>objectClassConstraint</code></p> <p>:   If the property is an object property, specifies the class that objects of the property must belong to. Every subproperty of <code>kb:hasValue</code> or a <code>kb:hasLinkTo</code> (i.e. every property of a resource that points to a <code>kb:Value</code> or to another resource) is required to have this constraint, because DSP-API relies on it to know what type of object to expect for the property. DSP-API will attempt to enforce this constraint.</p> <p><code>objectDatatypeConstraint</code></p> <p>:   If the property is a datatype property, specifies the type of literals that can be objects of the property. DSP-API will not attempt to enforce this constraint, but it is useful for documentation purposes.</p> <p>Note that it is possible for a subproperty to have a more restrictive contraint than its base property, by specifing a subject or object class that is a subclass of the one specified in the base property. However, it is not possible for the subproperty to make the base property's constraint less restrictive.</p> <p>See also Why doesn't DSP-API use <code>rdfs:domain</code> and <code>rdfs:range</code> for consistency checking?</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#consistency-constraint-example","title":"Consistency Constraint Example","text":"<p>A user-created ontology could define consistency constraints as in this simplified example:</p> <pre><code>:book rdf:type owl:Class ;\n    rdfs:subClassOf knora-base:Resource ,\n        [ rdf:type owl:Restriction ;\n          owl:onProperty :hasTitle ;\n          owl:cardinality \"1\"^^xsd:nonNegativeInteger ] ,\n        [ rdf:type owl:Restriction ;\n          owl:onProperty :hasAuthor ;\n          owl:minCardinality \"0\"^^xsd:nonNegativeInteger ] .\n\n:hasTitle rdf:type owl:ObjectProperty ;\n    knora-base:subjectClassConstraint :book ;\n    knora-base:objectClassConstraint knora-base:TextValue .\n\n:hasAuthor rdf:type owl:ObjectProperty ;\n    knora-base:subjectClassConstraint :book ;\n    knora-base:objectClassConstraint knora-base:TextValue .\n</code></pre>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#summary-of-restrictions-on-user-created-ontologies","title":"Summary of Restrictions on User-Created Ontologies","text":"<p>An ontology can refer to a Knora ontology in another project only if the other ontology is built-in or shared (see Shared Ontologies).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#restrictions-on-classes","title":"Restrictions on Classes","text":"<ul> <li>Each class must be a subclass of either <code>kb:Resource</code> or   <code>kb:StandoffTag</code>, but not both (note that this forbids user-created subclasses of <code>kb:Value</code>).</li> <li>All the cardinalities that a class defines directly (i.e. does not inherit from <code>kb:Resource</code>) must be on properties   that are defined in the triplestore.</li> <li>Within the cardinalities of a class, there must be a link value property for each link property and vice versa.</li> <li>The cardinality of a link property must be the same as the cardinality of the corresponding link value property.</li> <li>A cardinality on a property with a boolean value must be   <code>owl:cardinality 1</code> or <code>owl:maxCardinality 1</code>.</li> <li>Each class must be a subclass of all the classes that are subject class constraints of the properties in its   cardinalities.</li> <li>If it's a resource class, all its directly defined cardinalities must be on Knora resource properties (subproperties   of <code>kb:hasValue</code>   or <code>kb:hasLinkTo</code>), and all its base classes with Knora IRIs must also be resource classes. A cardinality   on <code>kb:resourceProperty</code> or   <code>kb:hasValue</code> is forbidden. It must also have an <code>rdfs:label</code>.</li> <li>If it's a standoff class, none of its cardinalities may be on Knora resource properties, and all its base classes with   Knora IRIs must also be standoff classes.</li> <li>A class cannot have a cardinality on property P as well as a cardinality on a subproperty of P.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#restrictions-on-properties","title":"Restrictions on properties","text":"<ul> <li>The property's subject class constraint, if provided, must be a subclass of <code>kb:Resource</code> or <code>kb:StandoffTag</code>, and   must be a subclass of the subject class constraints of all its base properties.</li> <li>Its object class constraint, if provided, must be a subclass of the object class constraints of all its base   properties.</li> <li>If the property is a Knora resource property, it must have an object class constraint and an <code>rdfs:label</code>.</li> <li>It can't be a subproperty of both <code>kb:hasValue</code> and <code>kb:hasLinkTo</code>.</li> <li>It can't be a subproperty of <code>kb:hasFileValue</code>.</li> <li>Each of its base properties that has a Knora IRI must also be a Knora resource property.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#standardisation","title":"Standardisation","text":"<p>The DaSCH intends to coordinate the standardisation of generally useful entities proposed in user-created ontologies. We envisage a process in which two or more projects would initiate the process by starting a public discussion on proposed entities to be shared. Once a consensus was reached, the DaSCH would publish these entities in a Shared Ontology).</p>"},{"location":"DSP-API/02-dsp-ontologies/knora-base/#knora-ontology-versions","title":"Knora Ontology Versions","text":"<p>The Knora base ontology has the property <code>kb:ontologyVersion</code>, whose object is a string that indicates the deployed version of all the DSP-API built-in ontologies. This allows the repository update program to determine which repository updates are needed when DSP-API is upgraded.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/","title":"The SALSAH GUI Ontology","text":""},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#overview","title":"Overview","text":"<p>The SALSAH GUI ontology provides entities that can be used in user-created ontologies to indicate to SALSAH (or to another GUI) how data should be entered and displayed.</p> <p>The SALSAH GUI ontology is identified by the IRI <code>http://www.knora.org/ontology/salsah-gui</code>. In the Knora documentation in general, it is identified by the prefix <code>salsah-gui</code>, but for brevity, we omit the prefix in this document.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#properties","title":"Properties","text":""},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#guiorder","title":"guiOrder","text":"<p><code>guiOrder</code> can be attached to a cardinality in a resource class, to indicate the order in which properties should be displayed in the GUI. The object is a non-negative integer. For example, a property with <code>guiOrder</code> 0 would be displayed first, followed by a property with <code>guiOrder</code> 1, and so on.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#guielement","title":"guiElement","text":"<p><code>guiElement</code> can be attached to a property definition to indicate which GUI element should be used to enter data for the property. This should be one of the individuals of class <code>Guielement</code> described below.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#guiattribute","title":"guiAttribute","text":"<p><code>guiAttribute</code> can be attached to a property definition to provide attributes for the GUI element specified in <code>guiElement</code>. The objects of this predicate are written in a DSL with the following syntax:</p> <pre><code>object          = attribute name, \"=\", attribute value ;\nattribute name  = identifier ;\nidentifier      = letter , { letter } ;\nattribute value = integer | decimal | percent | string | iri ;\npercent         = integer, \"%\" ;\niri             = \"&lt;\", string, \"&gt;\" ;\n</code></pre> <p>The attributes used with each GUI element are described below under Individuals.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#guiattributedefinition","title":"guiAttributeDefinition","text":"<p><code>guiAttributeDefinition</code> is used only in the <code>salsah-gui</code> ontology itself, as a predicate attached to instances of <code>Guielement</code> (see Individuals), to specify the attributes that can be given as objects of <code>guiAttribute</code> when a given <code>Guielement</code> is used. The objects of this predicate are written in a DSL with the following syntax:</p> <pre><code>object              = attribute name, [ \"(required)\" ], \":\", attribute type, [ enumerated values ] ;\nenumerated values   = \"(\", enumerated value, { \"|\", enumerated value } \")\" ;\nattribute name      = identifier ;\nattribute type      = \"integer\" | \"decimal\" | \"percent\" | \"string\" | \"iri\" ;\nenumerated value    = identifier ;\nidentifier          = letter , { letter } ;\n</code></pre> <p>Enumerated values are allowed only if <code>attribute type</code> is <code>string</code>. If enumerated values are provided for an attribute, the attribute value given via <code>guiAttribute</code> must be one of the enumerated values.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#classes","title":"Classes","text":""},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#guielement_1","title":"Guielement","text":"<p>The instances of class <code>Guielement</code> are individuals representing GUI elements for data entry.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#individuals","title":"Individuals","text":""},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#colorpicker","title":"Colorpicker","text":"<p><code>Colorpicker</code> is a GUI element for selecting a color. A property definition that uses this element may also contain a <code>guiAttribute</code> predicate whose object is a string in the form <code>\"ncolors=N\"</code>, where <code>N</code> is an integer specifying the number of colors to display.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#date","title":"Date","text":"<p><code>Date</code> is a GUI element for selecting a date.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#geometry","title":"Geometry","text":"<p><code>Geometry</code> is a GUI element for selecting the geometry of a two-dimensional region.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#geonames","title":"Geonames","text":"<p><code>Geonames</code> is a GUI element for selecting a Geonames identifier.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#interval","title":"Interval","text":"<p><code>Interval</code> is a GUI element for selecting a time interval in an audio or video recording.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#list","title":"List","text":"<p><code>List</code> is a GUI element for selecting an item in a hierarchical list (see ListValue). A property definition that uses this element must also contain this <code>guiAttribute</code> predicate:</p> <p><code>\"hlist=&lt;LIST_IRI&gt;\"</code>, where <code>LIST_IRI</code> is the IRI of a <code>knora-base:ListNode</code> that is the root node of a hierarchical list.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#pulldown","title":"Pulldown","text":"<p><code>Pulldown</code> is a GUI element for selecting an item in a flat list (see ListValue) using a pull-down menu. A property definition that uses this element must also contain this <code>guiAttribute</code> predicate:</p> <p><code>\"hlist=&lt;LIST_IRI&gt;\"</code>, where <code>LIST_IRI</code> is the IRI of a <code>knora-base:ListNode</code> that is the root node of a hierarchical list.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#radio","title":"Radio","text":"<p><code>Radio</code> is a GUI element for selecting an item in a flat list (see ListValue) using radio buttons. A property definition that uses this element must also contain this <code>guiAttribute</code> predicate:</p> <p><code>\"hlist=&lt;LIST_IRI&gt;\"</code>, where <code>LIST_IRI</code> is the IRI of a <code>knora-base:ListNode</code> that is the root node of a hierarchical list.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#richtext","title":"Richtext","text":"<p><code>Richtext</code> is a GUI element for editing multi-line formatted text.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#searchbox","title":"Searchbox","text":"<p><code>Searchbox</code> is a GUI element for searching for a resource by matching text in its <code>rdfs:label</code>.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#simpletext","title":"SimpleText","text":"<p><code>SimpleText</code> is a GUI element for editing a single line of unformatted text. A property definition that uses this element may also contain a <code>guiAttribute</code> predicate with one or both of the following objects:</p> <ul> <li><code>\"size=N\"</code>, where <code>N</code> is an integer specifying the size of the   text field.</li> <li><code>\"maxlength=N\"</code>, where <code>N</code> is an integer specifying the maximum   length of the string to be input.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#slider","title":"Slider","text":"<p><code>Slider</code> is a GUI element for choosing numerical values using a slider. A property definition that uses this element must also contain a <code>guiAttribute</code> predicate with both of the following objects:</p> <ul> <li><code>\"min=N\"</code>, where <code>N</code> is an integer specifying the minimum value   of the input.</li> <li><code>\"max=N\"</code>, where <code>N</code> is an integer specifying the maximum value   of the input.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#spinbox","title":"Spinbox","text":"<p><code>Spinbox</code> is a GUI element for choosing numerical values using a spinbox. A property definition that uses this element may also contain a <code>guiAttribute</code> predicate with one or both of the following objects:</p> <ul> <li><code>\"min=N\"</code>, where <code>N</code> is an integer specifying the minimum value   of the input.</li> <li><code>\"max=N\"</code>, where <code>N</code> is an integer specifying the maximum value   of the input.</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#textarea","title":"Textarea","text":"<p><code>Textarea</code> is a GUI element for editing multi-line unformatted text. A property definition that uses this element may also contain a <code>guiAttribute</code> predicate with one or more of the following objects:</p> <ul> <li><code>\"width=N\"</code>, where <code>N</code> is a percentage of the window width (an   integer followed by <code>%</code>).</li> <li><code>\"cols=N\"</code>, where <code>N</code> is an integer representing the number of   colums in the text entry box.</li> <li><code>\"rows=N\"</code>, where <code>N</code> is an integer specifying the height of the   text entry box in rows.</li> <li><code>\"wrap=W\"</code>, where <code>W</code> is <code>soft</code> or <code>hard</code> (see   wrap).</li> </ul>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#checkbox","title":"Checkbox","text":"<p><code>Checkbox</code> is a GUI element for choosing a boolean value using a checkbox.</p>"},{"location":"DSP-API/02-dsp-ontologies/salsah-gui/#fileupload","title":"Fileupload","text":"<p><code>Fileupload</code> is a GUI element for uploading a file.</p>"},{"location":"DSP-API/03-endpoints/openapi/","title":"OpenAPI Documentation","text":"<p>We provide automatically generated OpenAPI documentation for the DSP API. The OpenAPI specification is available both as YAML specification files and through Swagger UI.</p> <p>The documentation for the version currently deployed in production can be found at:</p> <ul> <li>OpenAPI Specification (YAML)</li> <li>Swagger UI</li> </ul> <p>The documentation for the current main branch can be found at:</p> <ul> <li>OpenAPI Specification (YAML)</li> <li>Swagger UI</li> </ul> <p>Documentation for any other server is available on the according routes:</p> <ul> <li>OpenAPI Specification (YAML): <code>/api/docs/docs.yaml</code></li> <li>Swagger UI: <code>/api/docs/</code></li> </ul> <p>With the API URL prefixed. That is: <code>http://localhost:3333</code> when running the API locally,  or <code>https://api.{server}.dasch.swiss</code> when running on a server.</p>"},{"location":"DSP-API/03-endpoints/api-admin/groups/","title":"Groups Endpoint","text":""},{"location":"DSP-API/03-endpoints/api-admin/groups/#endpoint-overview","title":"Endpoint Overview","text":"<p>Group Operations:</p> <ul> <li><code>GET: /admin/groups</code> : return all groups</li> <li><code>GET: /admin/groups/&lt;groupIri&gt;</code> : return single group identified by [IRI]</li> <li><code>POST: /admin/groups</code> : create a new group</li> <li><code>PUT: /admin/groups/&lt;groupIri&gt;</code> : update groups's basic information</li> <li><code>PUT: /admin/groups/&lt;groupIri&gt;/status</code> : update group's status</li> <li><code>DELETE: /admin/groups/&lt;groupIri&gt;</code> : delete group (set status to false)</li> </ul> <p>Member Operations:</p> <ul> <li><code>GET: /admin/groups/&lt;groupIri&gt;/members</code> : return all group members</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/groups/#group-operations","title":"Group Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/groups/#create-group","title":"Create Group","text":"<ul> <li>Required permission: SystemAdmin / hasProjectAllAdminPermission   / hasProjectAllGroupAdminPermission</li> <li>Required information: name (unique inside project), project IRI</li> <li>Optional information: group descriptions</li> <li>Returns information about the newly created group</li> <li>POST: <code>/admin/groups</code></li> <li>BODY:</li> </ul> <pre><code>    {\n  \"name\": \"NewGroup\",\n  \"descriptions\": [\n    {\n      \"value\": \"NewGroupDescription\",\n      \"language\": \"en\"\n    },\n    {\n      \"value\": \"NeueGruppenBeschreibung\",\n      \"language\": \"de\"\n    }\n  ],\n  \"project\": \"http://rdfh.ch/projects/00FF\",\n  \"status\": true,\n  \"selfjoin\": false\n}\n</code></pre> <p>Additionally, each group can have an optional custom IRI (of @ref:Knora IRI form) specified by the <code>id</code> in the request body as below:</p> <pre><code>    {\n  \"id\": \"http://rdfh.ch/groups/00FF/a95UWs71KUklnFOe1rcw1w\",\n  \"name\": \"GroupWithCustomIRI\",\n  \"descriptions\": [\n    {\n      \"value\": \"A new group with a custom IRI\",\n      \"language\": \"en\"\n    }\n  ],\n  \"project\": \"http://rdfh.ch/projects/00FF\",\n  \"status\": true,\n  \"selfjoin\": false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/groups/#update-group-information","title":"Update group information","text":"<ul> <li>Required permission: SystemAdmin / hasProjectAllAdminPermission   / hasProjectAllGroupAdminPermission /   hasProjectRestrictedGroupAdminPermission (for this group)</li> <li>Changeable information: <code>name</code>, <code>descriptions</code>, <code>selfjoin</code></li> <li>TypeScript Docs: groupFormats - ChangeGroupApiRequestADM</li> <li>PUT: <code>/admin/groups/&lt;groupIri&gt;</code></li> <li>BODY:</li> </ul> <pre><code>{\n  \"name\": \"UpdatedGroupName\",\n  \"descriptions\": [\n    {\n      \"value\": \"UpdatedGroupDescription\",\n      \"language\": \"en\"\n    }\n  ],\n  \"selfjoin\": false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/groups/#change-group-status","title":"Change Group Status","text":"<ul> <li>Required permission: SystemAdmin / hasProjectAllAdminPermission</li> <li>Changeable information: <code>status</code></li> <li>Remark: Deleting a group, removes all members from the group.</li> <li>PUT: <code>/admin/groups/&lt;groupIri&gt;/status</code></li> <li>BODY:</li> </ul> <pre><code>{\n  \"status\": false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/groups/#delete-group","title":"Delete Group","text":"<ul> <li>Required permission: SystemAdmin / hasProjectAllAdminPermission</li> <li>Remark: The same as changing the groups <code>status</code> to   <code>false</code>. To un-delete, set <code>status</code> to <code>true</code>.</li> <li>DELETE: <code>/admin/groups/&lt;groupIri&gt;</code></li> </ul> <p>Example Group Information stored in admin named graph: :</p> <pre><code>&lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;\n     rdf:type knora-admin:UserGroup ;\n     knora-admin:groupName \"Name of the group\" ;\n     knora-admin:groupDescriptions \"A description of the group\"@en ;\n     knora-admin:belongsToProject &lt;http://rdfh.ch/projects/[UUID]&gt; ;\n     knora-admin:status \"true\"^^xsd:boolean ;\n     knora-admin:hasSelfJoinEnabled \"false\"^^xsd:boolean .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/groups/#member-operations","title":"Member Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/groups/#get-group-members","title":"Get Group Members","text":"<ul> <li>Returns all group members</li> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>GET: <code>/admin/groups/&lt;groupIri&gt;/members</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/","title":"Introduction: Using the Admin API","text":"<p>The DSP Admin API makes it possible to administrate projects, users, user groups, permissions, and hierarchical lists.</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#restful-api","title":"RESTful API","text":"<p>The Knora Admin API is a RESTful API that allows for reading and adding of administrative resources from and to Knora and changing their values using HTTP requests. The actual data is submitted as JSON (request and response format). The various HTTP methods are applied according to the widespread practice of RESTful APIs: GET for reading, POST for adding, PUT for changing resources and values, and DELETE to delete resources or values (see Using HTTP Methods for RESTful Services).</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#knora-iris-in-the-admin-api","title":"Knora IRIs in the Admin API","text":"<p>Every resource that is created or hosted by Knora is identified by a unique ID called an Internationalized Resource Identifier (IRI).  The IRI is required for every API operation to identify the resource in question.  A Knora IRI has itself the format of a URL.  For some API operations, the IRI has to be URL-encoded (HTTP GET requests).</p> <p>Unlike the DSP-API v2, the admin API uses internal IRIs, i.e. the actual IRIs that are stored in the triplestore (see Knora IRIs).</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#admin-path-segment","title":"Admin Path Segment","text":"<p>Every request to Admin API includes <code>admin</code> as a path segment, e.g. <code>http://host/admin/users/iri/http%3A%2F%2Frdfh.ch%2Fusers%2Froot</code>.</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#admin-api-response-format","title":"Admin API Response Format","text":"<p>If an API request is handled successfully, Knora responds with a 200 HTTP status code. The actual answer from Knora (the representation of the requested resource or information about the executed API operation) is sent in the HTTP body, encoded as JSON.</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#placeholder-host-in-sample-urls","title":"Placeholder <code>host</code> in sample URLs","text":"<p>Please note that all the sample URLs used in this documentation contain <code>host</code> as a placeholder. The placeholder <code>host</code> has to be replaced by the actual hostname (and port) of the server the Knora instance is running on.</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#authentication","title":"Authentication","text":"<p>For all API operations that target at changing resources or values, the client has to provide credentials (username and password) so that the API server can authenticate the user making the request. Credentials can be sent as a part of the HTTP header or as parts of the URL (see Authentication in Knora).</p>"},{"location":"DSP-API/03-endpoints/api-admin/introduction/#admin-api-endpoints","title":"Admin API Endpoints","text":"<p>An overview over all admin API endpoints can be found in the overview.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/","title":"Lists Endpoint","text":""},{"location":"DSP-API/03-endpoints/api-admin/lists/#endpoint-overview","title":"Endpoint Overview","text":"<p>List Item Operations:</p> <ul> <li><code>GET: /admin/lists[?projectIri=&lt;projectIri&gt;]</code> : return all lists optionally filtered by project</li> <li><code>GET: /admin/lists/&lt;listItemIri&gt;</code> : return complete list with all children if IRI of the list (i.e. root node) is given.   If IRI of the child node is given, return the node with its immediate children</li> <li><code>GET: /admin/lists/infos/&lt;listIri&gt;</code> : deprecated, use <code>/admin/lists/&lt;listIri&gt;/info</code> instead</li> <li><code>GET: /admin/lists/nodes/&lt;nodeIri&gt;</code> : deprecated, use <code>/admin/lists/&lt;listIri&gt;/info</code> instead</li> <li><code>GET: /admin/lists/&lt;listIri&gt;/info</code> : return list basic information (without children)</li> <li> <p><code>GET: /admin/lists/candelete/&lt;listItemIri&gt;</code> : check if list or its node is unused and can be deleted</p> </li> <li> <p><code>POST: /admin/lists</code> : create new list</p> </li> <li> <p><code>POST: /admin/lists/&lt;parentNodeIri&gt;</code> : create new child node under the supplied parent node IRI</p> </li> <li> <p><code>PUT: /admin/lists/&lt;listItemIri&gt;</code> : update node information (root or child)</p> </li> <li><code>PUT: /admin/lists/&lt;listItemIri&gt;/name</code> : update the name of the node (root or child)</li> <li><code>PUT: /admin/lists/&lt;listItemIri&gt;/labels</code> : update labels of the node (root or child)</li> <li><code>PUT: /admin/lists/&lt;listItemIri&gt;/comments</code> : update comments of the node (root or child)</li> <li> <p><code>PUT: /admin/lists/&lt;nodeIri&gt;/position</code> : update position of a child node within its current parent   or by changing its parent node</p> </li> <li> <p><code>DELETE: /admin/lists/&lt;listItemIri&gt;</code> : delete a list (i.e. root node) or a child node and all its children, if not used</p> </li> <li><code>DELETE: /admin/lists/comments/&lt;nodeIri&gt;</code> : delete comments of a node (child only)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#list-item-operations","title":"List Item Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/lists/#get-lists","title":"Get lists","text":"<ul> <li>Required permission: none</li> <li>Return all lists optionally filtered by project</li> <li>GET: <code>/admin/lists[?projectIri=&lt;projectIri&gt;]</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#get-list","title":"Get list","text":"<ul> <li>Required permission: none</li> <li>Return complete <code>list</code> (or <code>node</code>) including basic information of the list (or child node),    <code>listinfo</code> (or <code>nodeinfo</code>), and all its children</li> <li>GET: <code>/admin/lists/&lt;listIri&gt;</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#get-list-info","title":"Get list info","text":"<ul> <li>Required permission: none</li> <li>Return list (or node) basic information, <code>listinfo</code> (or <code>nodeinfo</code>), without its children</li> <li>GET: <code>/admin/lists/&lt;listIri&gt;/info</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#check-if-list-node-is-unused-and-can-be-deleted","title":"Check if list node is unused and can be deleted","text":"<ul> <li>Required permission: none</li> <li>GET: <code>/admin/lists/candelete/&lt;listItemIri&gt;</code></li> <li>Return simple JSON that confirms if the list node can be deleted</li> </ul> <pre><code>{\n    \"canDeleteList\": true,\n    \"listIri\": \"http://rdfh.ch/lists/0801/xxx\"\n}\n</code></pre> <p>List (root node or child node with all its children) can be deleted only if it (or one of its children) is not used.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#create-new-list","title":"Create new list","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Required fields: <code>projectIri</code>, <code>labels</code>, <code>comments</code></li> <li>POST: <code>/admin/lists</code></li> <li>BODY:</li> </ul> <pre><code>    {\n        \"projectIri\": \"someprojectiri\",\n        \"labels\": [{ \"value\": \"New list\", \"language\": \"en\"}],\n        \"comments\": []\n    } \n</code></pre> <p>Additionally, each list can have an optional custom IRI (of Knora IRI form) specified by the <code>id</code> in the request body as below:</p> <pre><code>  {\n    \"id\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n    \"projectIri\": \"http://rdfh.ch/projects/0001\",\n    \"name\": \"a new list\",\n    \"labels\": [{ \"value\": \"New list with IRI\", \"language\": \"en\"}],\n    \"comments\": [{ \"value\": \"New comment\", \"language\": \"en\"}]\n  }\n</code></pre> <p>The response will contain the basic information of the list, <code>listinfo</code> and an empty list of its children, as below:</p> <pre><code>{\n    \"list\": {\n        \"children\": [],\n        \"listinfo\": {\n            \"comments\": [{ \"value\": \"New comment\", \"language\": \"en\"}],\n            \"id\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n            \"isRootNode\": true,\n            \"labels\": [\n                {\n                    \"value\": \"New list with IRI\",\n                    \"language\": \"en\"\n                }\n            ],\n            \"name\": \"a new list\",\n            \"projectIri\": \"http://rdfh.ch/projects/0001\"\n        }\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#create-new-child-node","title":"Create new child node","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Required fields: <code>parentNodeIri</code>, <code>projectIri</code>, <code>labels</code>,</li> <li>Appends a new child node under the supplied nodeIri. If the supplied nodeIri   is the listIri, then a new child node is appended to the top level. If a position is given   for the new child node, the node will be created and inserted in the specified position, otherwise   the node is appended to the end of parent's children.</li> <li>POST: <code>/admin/lists/&lt;parentNodeIri&gt;</code></li> <li>BODY:</li> </ul> <pre><code>     {   \n         \"parentNodeIri\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n         \"projectIri\": \"http://rdfh.ch/projects/0001\",\n         \"name\": \"a child\",\n         \"labels\": [{ \"value\": \"New List Node\", \"language\": \"en\"}]\n    }\n</code></pre> <p>Additionally, each child node can have an optional custom IRI (of Knora IRI form) specified by the <code>id</code> in the request body as below:</p> <pre><code>{    \"id\": \"http://rdfh.ch/lists/0001/8u37MxBVMbX3XQ8-d31x6w\",\n     \"parentNodeIri\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n     \"projectIri\": \"http://rdfh.ch/projects/0001\",\n     \"name\": \"a child\",\n     \"labels\": [{ \"value\": \"New List Node\", \"language\": \"en\"}]\n}\n</code></pre> <p>The response will contain the basic information of the node, <code>nodeinfo</code>, as below:</p> <pre><code>{\n    \"nodeinfo\": {\n        \"comments\": [],\n        \"hasRootNode\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n        \"id\": \"http://rdfh.ch/lists/0001/8u37MxBVMbX3XQ8-d31x6w\",\n        \"labels\": [\n            {\n                \"value\": \"New List Node\",\n                \"language\": \"en\"\n            }\n        ],\n        \"name\": \"a new child\",\n        \"position\": 1\n    }\n}\n</code></pre> <p>The new node can be created and inserted in a specific position which must be given in the payload as shown below. If necessary, according to the given position, the sibling nodes will be shifted.  Note that <code>position</code> cannot have a value higher than the number of existing children.</p> <pre><code>{   \"parentNodeIri\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n    \"projectIri\": \"http://rdfh.ch/projects/0001\",\n    \"name\": \"Inserted new child\",\n    \"position\": 0,\n    \"labels\": [{ \"value\": \"New List Node\", \"language\": \"en\"}]\n}\n</code></pre> <p>In case the new node should be appended to the list of current children, either <code>position: -1</code> must be given in the payload or the <code>position</code> parameter must be left out of the payload.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#update-lists-or-nodes-information","title":"Update list's or node's information","text":"<p>The basic information of a list (or node) such as its labels, comments, name, or all of them can be updated.  The parameters that must be updated together with the new value must be given in the JSON body of the request  together with the IRI of the list and the IRI of the project it belongs to. </p> <ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Required fields: <code>listIri</code>, <code>projectIri</code></li> <li>Update list information</li> <li>PUT: <code>/admin/lists/&lt;listIri&gt;</code></li> <li>BODY:</li> </ul> <pre><code>{\n    \"listIri\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n    \"projectIri\": \"http://rdfh.ch/projects/0001\",\n    \"name\": \"new name for the list\",\n    \"labels\": [{ \"value\": \"a new label for the list\", \"language\": \"en\"}],\n    \"comments\": [{ \"value\": \"a new comment for the list\", \"language\": \"en\"}]\n}\n</code></pre> <p>The response will contain the basic information of the list, <code>listinfo</code> (or <code>nodeinfo</code>), without its children, as below:</p> <pre><code>{\n    \"listinfo\": {\n        \"comments\": [\n            {\n                \"value\": \"a new comment for the list\",\n                \"language\": \"en\"\n            }\n        ],\n        \"id\": \"http://rdfh.ch/lists/0001/yWQEGXl53Z4C4DYJ-S2c5A\",\n        \"isRootNode\": true,\n        \"labels\": [\n            {\n                \"value\": \"a new label for the list\",\n                \"language\": \"en\"\n            }\n        ],\n        \"name\": \"new name for the list\",\n        \"projectIri\": \"http://rdfh.ch/projects/0001\"\n    }\n}\n</code></pre> <p>If only name of the list must be updated, it can be given as below in the body of the request:</p> <pre><code>{\n    \"listIri\": \"listIri\",\n    \"projectIri\": \"someprojectiri\",\n    \"name\": \"another name\"\n}\n</code></pre> <p>Alternatively, basic information <code>name</code>, <code>labels</code>, or <code>comments</code> of the root node (i.e. list)  can be updated individually as explained below.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#update-list-or-nodes-name","title":"Update list or node's name","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Update name of the list (i.e. root node) or a child node whose IRI is specified by <code>&lt;listItemIri&gt;</code>.</li> <li>PUT: <code>/admin/lists/&lt;listItemIri&gt;/name</code></li> <li>BODY: The new name of the node must be given in the body of the request as shown below:</li> </ul> <pre><code>{\n    \"name\": \"a new name\"\n}\n</code></pre> <p>There is no need to specify the project IRI because it is automatically extracted using the given <code>&lt;listItemIRI&gt;</code>.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#update-list-or-nodes-labels","title":"Update list or node's labels","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Update labels of the list (i.e. root node) or a child node whose IRI is specified by <code>&lt;listItemIri&gt;</code>.</li> <li>PUT: <code>/admin/lists/&lt;listItemIri&gt;/labels</code></li> <li>BODY: The new set of labels of the node must be given in the body of the request as shown below:</li> </ul> <pre><code>{\n    \"labels\": [{\"language\": \"se\", \"value\": \"nya m\u00e4rkningen\"}]\n}\n</code></pre> <p>There is no need to specify the project IRI because it is automatically extracted using the given <code>&lt;listItemIRI&gt;</code>.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#update-list-or-nodes-comments","title":"Update list or node's comments","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Update comments of the list (i.e. root node) or a child node whose IRI is specified by <code>&lt;listItemIri&gt;</code>.</li> <li>PUT: <code>/admin/lists/&lt;listItemIri&gt;/labels</code></li> <li>BODY: The new set of comments of the node must be given in the body of the request as shown below:</li> </ul> <pre><code>{\n    \"comments\": [{\"language\": \"se\", \"value\": \"nya kommentarer\"}]\n}\n</code></pre> <p>There is no need to specify the project IRI because it is automatically extracted using the given <code>&lt;listItemIRI&gt;</code>.</p>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#repositioning-a-child-node","title":"Repositioning a child node","text":"<p>The position of an existing child node can be updated. The child node can be either repositioned within its  current parent node, or can be added to another parent node in a specific position. The IRI of the parent node  and the new position of the child node must be given in the request body. </p> <p>If a node is supposed to be repositioned to the end of a parent node's children, give <code>position: -1</code>.</p> <p>Suppose a parent node <code>parentNode1</code> has five children in positions 0-4, to change the position of its child node  <code>childNode4</code> from its original position 3 to position 1 the request body should specify the IRI of its parent node  and the new position as below:</p> <pre><code>   {\n      \"parentNodeIri\": \"&lt;parentNode1-IRI&gt;\",\n      \"position\": 1\n  }\n</code></pre> <p>Then the node <code>childNode4</code> will be put in position 1, and its siblings will be shifted accordingly. The new position given  in the request body cannot be the same as the child node's original position. If <code>position: -1</code> is given, the node will  be moved to the end of children list, and its siblings will be shifted to left. In case of repositioning the node  within its current parent, the maximum permitted position is the length of its children list, i.e. in this example the  highest allowed position is 4.</p> <p>To reposition a child node <code>childNode4</code> to another parent node <code>parentNode2</code> in a specific position, for  example <code>position: 3</code>, the IRI of the new parent node and the position the node must be placed within children of  <code>parentNode2</code> must be given as:</p> <pre><code>   {\n      \"parentNodeIri\": \"&lt;parentNode2-IRI&gt;\",\n      \"position\": 3\n  }\n</code></pre> <p>In this case, the <code>childNode4</code> is removed from the list of children of its old parent <code>parentNode1</code> and its old  siblings are shifted accordingly. Then the node <code>childNode4</code> is added to the specified new parent, i.e. <code>parentNode2</code>, in  the given position. The new siblings are shifted accordingly.</p> <p>Note that, the furthest the node can be placed is at the end of the list of the children of <code>parentNode2</code>. That means  if <code>parentNode2</code> had 3 children with positions 0-2, then <code>childNode4</code> can be placed in position 0-3 within children  of its new parent node. If the <code>position: -1</code> is given, the node will be appended to the end of new parent's children,  and new siblings will not be shifted. </p> <p>Values less than -1 are not permitted for parameter <code>position</code>.</p> <ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Response: returns the updated parent node with all its children.</li> <li>Put <code>/admin/lists/&lt;nodeIri&gt;/position</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#delete-a-list-or-a-node","title":"Delete a list or a node","text":"<p>An entire list or a single node of it can be completely deleted, if not in use. Before deleting an entire list  (i.e. root node), the data and ontologies are checked for any usage of the list or its children. If not in use, the list  and all its children are deleted.</p> <p>Similarily, before deleting a single node of a list, it is verified that the node itself and none of its children are used. If not in use, the node and all its children are deleted. Once a node is deleted, its parent node is updated by shifting the  remaining child nodes with respect to the position of the deleted node. </p> <ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li> <p>Response:</p> <ul> <li>If the IRI of the list (i.e. root node) is given, the <code>iri</code> of the deleted list with a flag <code>deleted: true</code> is returned.</li> <li>If the IRI of a child node is given, the updated parent node is returned.</li> </ul> </li> <li> <p>Delete <code>/admin/lists/&lt;listItemIri&gt;</code></p> </li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/lists/#delete-child-node-comments","title":"Delete child node comments","text":"<p>Performing a DELETE request to route <code>/admin/lists/comments/&lt;nodeIri&gt;</code> deletes the comments of that node. As a response sipmle JSON is returned:</p> <pre><code>{\n    \"commentsDeleted\": true,\n    \"nodeIri\": \"http://rdfh.ch/lists/0801/xxx\"\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/overview/","title":"Admin Endpoint","text":"<p>For the management of users, projects, groups, lists, and permissions, the DSP-API following a resource centric approach, provides the following endpoints corresponding to the respective classes of objects that they have an effect on, namely:</p> <ul> <li>Users endpoint: <code>http://server:port/admin/users</code> - <code>knora-base:User</code></li> <li>Projects endpoint: <code>http://server:port/admin/projects</code> - <code>knora-base:knoraProject</code></li> <li>Groups endpoint: <code>http://server:port/admin/groups</code> - <code>knora-base:UserGroup</code></li> <li>Lists endpoint: <code>http://server:port/admin/lists</code> - <code>knora-base:ListNode</code></li> <li>Permissions endpoint: <code>http://server:port/admin/permissions</code> - <code>knora-admin:Permission</code></li> </ul> <p>All information regarding users, projects, groups, lists and permissions is stored in the <code>http://www.knora.org/admin</code> named graph.</p> <p>Additionally there is the stores endpoint which allows manipulation of the triplestore content.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/","title":"Permissions Endpoint","text":"<p>For an extensive explanation on how DSP permissions are implemented, see the permission documentation.</p> Route Operations Explanation <code>/admin/permissions/{projectIri}</code> <code>GET</code> get all permissions of a project <code>/admin/permissions/ap/{projectIri}</code> <code>GET</code> get all administrative permissions of a project <code>/admin/permissions/ap/{projectIri}/{groupIri}</code> <code>GET</code> get all administrative permissions of a group <code>/admin/permissions/doap/{projectIri}</code> <code>GET</code> get all default object access permissions of a project <code>/admin/permissions/ap</code> <code>POST</code> create a new administrative permission <code>/admin/permissions/doap</code> <code>POST</code> create a new default object access permission <code>/admin/permissions/doap/{permissionIri}</code> <code>PUT</code> update an existing default object access permission <code>/admin/permissions/{permissionIri}/group</code> <code>PUT</code> update for which group an administrative or default object access permission is used <code>/admin/permissions/{permissionIri}/hasPermission</code> <code>PUT</code> update the scope of an administrative or default object access permission, i.e. what permissions are granted to which group when this permission applies <code>/admin/permissions/{permissionIri}</code> <code>DELETE</code> delete an administrative or default object access permission <code>/admin/permissions/{doap_permissionIri}/resourceClass</code> <code>PUT</code> deprecated, use <code>/admin/permissions/doap/{permissionIri}</code> instead <code>/admin/permissions/{doap_permissionIri}/property</code> <code>PUT</code> deprecated,  use <code>/admin/permissions/doap/{permissionIri}</code> instead"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#permission-operations","title":"Permission Operations","text":"<p>Note: For the following operations, the requesting user must be either a <code>systemAdmin</code>or a <code>projectAdmin</code>.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#getting-permissions","title":"Getting Permissions","text":"<ul> <li> <p><code>GET: /admin/permissions/&lt;projectIri&gt;</code> : return all permissions for a project. As a response, the IRI and the type of all <code>permissions</code> of a project are returned.</p> </li> <li> <p><code>GET: /admin/permissions/ap/&lt;projectIri&gt;</code>: return all administrative permissions  for a project. As a response, all <code>administrative_permissions</code> of a project are returned.</p> </li> <li> <p><code>GET: /admin/permissions/ap/&lt;projectIri&gt;/&lt;groupIri&gt;</code>: return the administrative  permissions for a project group. As a response, the <code>administrative_permission</code> defined  for the group is returned. </p> </li> <li> <p><code>GET: /admin/permissions/doap/&lt;projectIri&gt;</code>: return all default object access  permissions for a project. As a response, all <code>default_object_acces_permissions</code> of a  project are returned. </p> </li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#creating-new-administrative-permissions","title":"Creating New Administrative Permissions","text":"<ul> <li><code>POST: /admin/permissions/ap</code>: create a new administrative permission. The type of  permissions, the project and group to which the permission should be added must be  included in the request body, for example:</li> </ul> <pre><code>{\n    \"forGroup\":\"http://rdfh.ch/groups/0001/thing-searcher\", \n    \"forProject\":\"http://rdfh.ch/projects/0001\", \n    \"hasPermissions\":[\n      {\n        \"additionalInformation\":null,\n        \"name\":\"ProjectAdminGroupAllPermission\",\n        \"permissionCode\":null\n      }\n    ]\n}\n</code></pre> <p>In addition, in the body of the request, it is possible to specify a custom IRI (of  DSP IRI form) for a permission through the <code>@id</code> attribute which will then be assigned to the permission; otherwise the permission will get a unique random IRI. A custom permission IRI must be <code>http://rdfh.ch/permissions/PROJECT_SHORTCODE/</code> (where <code>PROJECT_SHORTCODE</code> is the shortcode of the project that the permission belongs to), plus a custom ID string. For example:</p> <pre><code>\"id\": \"http://rdfh.ch/permissions/0001/jKIYuaEUETBcyxpenUwRzQ\",\n</code></pre> <p>As a response, the created administrative permission and its IRI are returned as below:</p> <pre><code>{\n    \"administrative_permission\": {\n        \"forGroup\": \"http://rdfh.ch/groups/0001/thing-searcher\",\n        \"forProject\": \"http://rdfh.ch/projects/0001\",\n        \"hasPermissions\": [\n            {\n                \"additionalInformation\": null,\n                \"name\": \"ProjectAdminGroupAllPermission\",\n                \"permissionCode\": null\n            }\n        ],\n        \"iri\": \"http://rdfh.ch/permissions/0001/mFlyBEiMQtGzwy_hK0M-Ow\"\n    }\n}\n</code></pre> <p><code>hasPermissions</code> contains permission types that must be granted. See the complete description of administrative permission types. In summary, each permission should contain followings:</p> <ul> <li><code>additionalInformation</code>: should be left empty, otherwise will be ignored.</li> <li><code>name</code> : indicates the type of the permission that can be one of the followings:<ul> <li><code>ProjectAdminAllPermission</code>: gives the user the permission to do anything  on project level, i.e. create new groups, modify all  existing groups</li> <li><code>ProjectAdminGroupAllPermission</code>: gives the user the permission to modify  group info and group membership on all groups  belonging to the project.</li> <li><code>ProjectAdminGroupRestrictedPermission</code>: gives the user the permission to modify  group info and group membership on certain groups  belonging to the project.</li> <li><code>ProjectAdminRightsAllPermission</code>: gives the user the permission to change the  permissions on all objects belonging to the project  (e.g., default permissions attached to groups and  permissions on objects).</li> <li><code>ProjectResourceCreateAllPermission</code>: gives the permission to create resources  inside the project.</li> <li><code>ProjectResourceCreateRestrictedPermission</code>: gives restricted resource creation permission  inside the project.</li> </ul> </li> <li><code>permissionCode</code>: should be left empty, otherwise will be ignored.</li> </ul> <p>Note that during the creation of a new project,  a default set of administrative permissions are added to its ProjectAdmin and ProjectMember groups  (See Default set of permissions for a new project).  Therefore, it is not possible to create new administrative permissions  for the ProjectAdmin and ProjectMember groups of a project.  However, the default permissions set for these groups can be modified  (See update permission).</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#creating-new-default-object-access-permissions","title":"Creating New Default Object Access Permissions","text":"<ul> <li><code>POST: /admin/permissions/doap</code> : create a new default object access permission.  A single instance of <code>knora-admin:DefaultObjectAccessPermission</code> must always reference a project, but can only reference either a group (<code>knora-admin:forGroup</code> property), a resource class (<code>knora-admin:forResourceClass</code>), a property (<code>knora-admin:forProperty</code>), or a combination of resource class and property. For example, to create a new  default object access permission for a group of a project the request body would be</li> </ul> <pre><code>{\n    \"forGroup\":\"http://rdfh.ch/groups/0001/thing-searcher\",\n    \"forProject\":\"http://rdfh.ch/projects/0001\",\n    \"forProperty\":null,\n    \"forResourceClass\":null,\n    \"hasPermissions\":[\n      {\n        \"additionalInformation\":\"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n        \"name\":\"D\",\n        \"permissionCode\":7\n      }\n    ]\n}\n</code></pre> <p><code>hasPermissions</code> contains permission types that must be granted. See a complete description of object access  permission types.  In summary, each permission should contain followings:</p> <ul> <li><code>additionalInformation</code>: To whom the permission should be granted: project members, known users, unknown users, etc.</li> <li><code>name</code> : indicates the type of the permission that can be one of the followings.<ul> <li><code>RV</code>: restricted view permission (least privileged)</li> <li><code>V</code>: view permission</li> <li><code>M</code> modify permission</li> <li><code>D</code>: delete permission</li> <li><code>CR</code>: change rights permission (most privileged)</li> </ul> </li> <li><code>permissionCode</code>: The code assigned to a permission indicating its hierarchical level. These codes are as below:<ul> <li><code>1</code>: for restricted view permission (least privileged)</li> <li><code>2</code>: for view permission</li> <li><code>6</code>: for modify permission</li> <li><code>7</code>: for delete permission</li> <li><code>8</code>: for change rights permission (most privileged)</li> </ul> </li> </ul> <p>Note that, at least either <code>name</code> or <code>permissionCode</code> must be provided. If one is missing, it will be extrapolated from the other. For example, if <code>permissionCode= 1</code> is given but <code>name</code> was left empty, its value will be set to <code>name = RV</code>.    </p> <p>Similar to the previous case a custom IRI can be assigned to a permission specified by the <code>id</code> in the request body.  The example below shows the request body to create a new default object access permission with a custom IRI defined for  a resource class of a specific project:</p> <pre><code>{\n    \"id\": \"http://rdfh.ch/permissions/00FF/fSw7w1sI5IwDjEfFi1jOeQ\",\n    \"forGroup\": null,\n    \"forProject\": \"http://rdfh.ch/projects/00FF\",\n    \"forProperty\": null,\n    \"forResourceClass\": \"http://api.dasch.swiss/ontology/00FF/images/v2#bild\",\n    \"hasPermissions\": [\n      {\n        \"additionalInformation\": \"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n        \"name\": \"D\",\n        \"permissionCode\": 7\n      }\n    ]\n}\n</code></pre> <p>The response contains the newly created permission and its IRI, as:</p> <pre><code>{\n    \"default_object_access_permission\": {\n        \"forGroup\": null,\n        \"forProject\": \"http://rdfh.ch/projects/00FF\",\n        \"forProperty\": null,\n        \"forResourceClass\": \"http://api.dasch.swiss/ontology/00FF/images/v2#bild\",\n        \"hasPermissions\": [\n            {\n                \"additionalInformation\": \"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n                \"name\": \"D\",\n                \"permissionCode\": 7\n            }\n        ],\n        \"iri\": \"http://rdfh.ch/permissions/00FF/fSw7w1sI5IwDjEfFi1jOeQ\"\n    }\n}\n</code></pre> <p>Note that during the creation of a new project,  a set of default object access permissions are created for its ProjectAdmin and ProjectMember groups  (See Default set of permissions for a new project).  Therefore, it is not possible to create new default object access permissions  for the ProjectAdmin and ProjectMember groups of a project.  However, the default permissions set for these groups can be modified; see below for more information.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#updating-an-existing-default-object-access-permission","title":"Updating an existing Default Object Access Permission","text":"<ul> <li><code>PUT: /admin/permissions/doap/&lt;doap_permissionIri&gt;</code> to change the attributes of an existing default object   access permission, identified by its IRI <code>&lt;doap_permissionIri&gt;</code>.</li> </ul> <p>This is an example of a request body to update an existing default object access permission:</p> <pre><code>{\n  \"forProperty\" : \"http://api.dasch.swiss/ontology/00FF/images/v2#hasTitle\",\n  \"forResourceClass\": \"http://api.dasch.swiss/ontology/0803/incunabula/v2#Book\",\n  \"forGroup\": null, \n  \"hasPermissions\": [\n    {\n      \"additionalInformation\": \"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n      \"name\": \"D\",\n      \"permissionCode\": 7\n    }\n  ]\n}\n</code></pre> <p>All attributes of the default object access permission are optional and may be combined.</p> <p>Warning</p> <p>Only certain combinations of attributes are allowed. Only exactly one of the following combinations is allowed:</p> <ul> <li><code>forGroup</code> </li> <li><code>forResourceClass</code></li> <li><code>forProperty</code></li> <li><code>forResourceClass</code> and <code>forProperty</code></li> </ul> <p>If the combination of attributes is not allowed, the request will fail with a <code>400 Bad Request</code> error. Any valid combination of attributes will replace the existing values.</p> <p>If present, the <code>hasPermissions</code> attribute must contain all permission types that must be granted. See a complete description of object access permission types. This is also described in the Creating New Default Object Access Permissions section.</p> <p>The response is the updated default object access permission with its new attributes and is the same as when creating a new default object access permission.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#updating-a-permissions-group","title":"Updating a Permission's Group","text":"<p>Note</p> <p>For Default Object Access Permissions this endpoint is deprecated,  use <code>PUT: /admin/permissions/doap/&lt;permissionIri&gt;</code> instead. For more information, see the migration guide.</p> <ul> <li><code>PUT: /admin/permissions/&lt;permissionIri&gt;/group</code> to change the group for which an administrative or a default object  access permission, identified by its IRI <code>&lt;permissionIri&gt;</code>, is defined. The request body must contain the IRI of the new  group as below:</li> </ul> <pre><code>{\n    \"forGroup\": \"http://www.knora.org/ontology/knora-admin#ProjectMember\"\n}\n</code></pre> <p>When updating an administrative permission, its previous <code>forGroup</code> value will be replaced with the new one. When updating a default object access permission, if it originally had a <code>forGroup</code> value defined, it will be replaced  with the new group. Otherwise, if the default object access permission was defined for a resource class or a property or  the combination of both, the permission will be defined for the newly specified group and its previous  <code>forResourceClass</code> and <code>forProperty</code> values will be deleted.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#updating-a-permissions-scope","title":"Updating a Permission's Scope","text":"<p>Note</p> <p>For Default Object Access Permissions this endpoint is deprecated,  use <code>PUT: /admin/permissions/doap/&lt;permissionIri&gt;</code> instead. For more information, see the migration guide.</p> <ul> <li><code>PUT: /admin/permissions/&lt;permissionIri&gt;/hasPermissions</code> to change the scope of permissions assigned to an administrative   or a default object access permission identified by it IRI, <code>&lt;permissionIri&gt;</code>. The request body must contain the new set    of permission types as below:</li> </ul> <pre><code>{\n   \"hasPermissions\":[\n     {\n       \"additionalInformation\":\"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n       \"name\":\"D\",\n       \"permissionCode\":7\n     }\n   ]\n}\n</code></pre> <p>Each permission item given in <code>hasPermissions</code>, must contain the necessary parameters with respect to the type of the  permission. For example, if you wish to change the scope of an administrative permission, follow the  guidelines for the content of its <code>hasPermissions</code> property. Similarly, if you wish to change the scope of a default object access permission,  follow the guidelines given about the content of its <code>hasPermissions</code> property. Either the <code>name</code> or the <code>permissionCode</code> must be present; it is not necessary to provide both.</p> <p>The previous permission set is replaced by the new permission set. In order to remove a permission for a group entirely, you can provide a new set of permissions, leaving out the permission specification for the group.</p>"},{"location":"DSP-API/03-endpoints/api-admin/permissions/#deleting-a-permission","title":"Deleting a Permission","text":"<ul> <li><code>DELETE: /admin/permissions/&lt;permissionIri&gt;</code> to delete an administrative, or a default object access permission. The  IRI of the permission must be given in encoded form. </li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/","title":"Projects Endpoint","text":"Scope Route Operations Explanation projects <code>/admin/projects</code> <code>GET</code> get all projects projects <code>/admin/projects</code> <code>POST</code> create a project projects <code>/admin/projects/shortname/{shortname}</code> <code>GET</code> get a single project projects <code>/admin/projects/shortcode/{shortcode}</code> <code>GET</code> get a single project projects <code>/admin/projects/iri/{iri}</code> <code>GET</code> get a single project projects <code>/admin/projects/iri/{iri}</code> <code>PUT</code> update a project projects <code>/admin/projects/iri/{iri}</code> <code>DELETE</code> delete a project projects <code>/admin/projects/iri/{iri}/AllData</code> <code>GET</code> get all data of a project project members <code>/admin/projects/shortname/{shortname}/members</code> <code>GET</code> get all project members project members <code>/admin/projects/shortcode/{shortcode}/members</code> <code>GET</code> get all project members project members <code>/admin/projects/iri/{iri}/members</code> <code>GET</code> get all project members project members <code>/admin/projects/shortname/{shortname}/admin-members</code> <code>GET</code> get all project admins project members <code>/admin/projects/shortcode/{shortcode}/admin-members</code> <code>GET</code> get all project admins project members <code>/admin/projects/iri/{iri}/admin-members</code> <code>GET</code> get all project admins keywords <code>/admin/projects/Keywords</code> <code>GET</code> get all project keywords keywords <code>/admin/projects/iri/{iri}/Keywords</code> <code>GET</code> get project keywords of a single project view settings <code>/admin/projects/shortname/{shortname}/RestrictedViewSettings</code> <code>GET</code> get restricted view settings for a project view settings <code>/admin/projects/shortcode/{shortcode}/RestrictedViewSettings</code> <code>GET</code> get restricted view settings for a project view settings <code>/admin/projects/iri/{iri}/RestrictedViewSettings</code> <code>GET</code> get restricted view settings for a project view settings <code>/admin/projects/iri/{iri}/RestrictedViewSettings</code> <code>POST</code> set restricted view settings for a project view settings <code>/admin/projects/shortcode/{shortcode}/RestrictedViewSettings</code> <code>POST</code> set restricted view settings for a project"},{"location":"DSP-API/03-endpoints/api-admin/projects/#project-operations","title":"Project Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-all-projects","title":"Get All Projects","text":"<p>Permissions: No permissions required</p> <p>Request definition: <code>GET /admin/projects</code></p> <p>Description: Returns a list of all projects except built-in system ones.</p> <p>Example request:</p> <pre><code>curl --request GET --url http://localhost:3333/admin/projects\n</code></pre> <p>Example response:</p> <pre><code>{\n  \"projects\": [\n    {\n      \"description\": [\n        {\n          \"value\": \"A demo project of a collection of images\",\n          \"language\": \"en\"\n        }\n      ],\n      \"id\": \"http://rdfh.ch/projects/00FF\",\n      \"keywords\": [\n        \"collection\",\n        \"images\"\n      ],\n      \"logo\": null,\n      \"longname\": \"Image Collection Demo\",\n      \"ontologies\": [\n        \"http://0.0.0.0:3333/ontology/00FF/images/v2\"\n      ],\n      \"selfjoin\": false,\n      \"shortcode\": \"00FF\",\n      \"shortname\": \"images\",\n      \"status\": true\n    },\n    {\n      // ...\n    }\n  ]\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#create-a-new-project","title":"Create a New Project","text":"<p>Permissions: SystemAdmin</p> <p>Request definition: <code>POST /admin/projects</code></p> <p>Description: Create a new project.</p> <p>Required payload:</p> <ul> <li><code>shortcode</code> (unique, 4-digits)</li> <li><code>shortname</code> (unique, 3-20 characters long, can contain small and capital letters, numbers, special characters: <code>-</code> and <code>_</code>, cannot start with number nor allowed special characters, should be in the form of a xsd:NCNAME and URL safe)</li> <li><code>description</code> (collection of descriptions as strings with language tag)</li> <li><code>keywords</code> (collection of keywords)</li> <li><code>status</code> (true, if project is active. false, if project is inactive)</li> <li><code>selfjoin</code></li> </ul> <p>Optional payload:</p> <ul> <li><code>id</code> (unique, custom DSP IRI, e.g. used for migrating a project from one server to another)</li> <li><code>longname</code></li> <li><code>logo</code></li> </ul> <p>Example request:</p> <pre><code>curl --request POST \\\n  --url http://localhost:3333/admin/projects \\\n  --header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n    \"shortname\": \"newproject\",\n    \"shortcode\": \"3333\",\n    \"longname\": \"project longname\",\n    \"description\": [\n        {\n            \"value\": \"project description\",\n            \"language\": \"en\"\n        }\n    ],\n    \"keywords\": [\n        \"test project\"\n    ],\n    \"logo\": \"/fu/bar/baz.jpg\",\n    \"status\": true,\n    \"selfjoin\": false\n}'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"project\": {\n        \"description\": [\n            {\n                \"value\": \"project description\",\n                \"language\": \"en\"\n            }\n        ],\n        \"id\": \"http://rdfh.ch/projects/3333\",\n        \"keywords\": [\n            \"test project\"\n        ],\n        \"logo\": \"/fu/bar/baz.jpg\",\n        \"longname\": \"project longname\",\n        \"ontologies\": [],\n        \"selfjoin\": false,\n        \"shortcode\": \"3333\",\n        \"shortname\": \"newproject\",\n        \"status\": true\n    }\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code> if the project already exists or any of the provided properties is invalid.</li> <li><code>401 Unauthorized</code> if authorization failed.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#default-set-of-restrictedviewsize","title":"Default set of RestrictedViewSize","text":"<p>Starting from DSP 2023.10.02 release, the creation of new project will also set the <code>RestrictedViewSize</code> to default value, which is: <code>!512,512</code>. It is possible to change the value using dedicated routes.</p>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#default-set-of-permissions-for-a-new-project","title":"Default set of permissions for a new project","text":"<p>When a new project is created, following default permissions are added to its admins and members:</p> <ul> <li> <p>ProjectAdmin group receives an administrative permission to do all project level operations    and to create resources within the new project.    This administrative permission is retrievable through its IRI:   <code>http://rdfh.ch/permissions/[projectShortcode]/defaultApForAdmin</code></p> </li> <li> <p>ProjectAdmin group also gets a default object access permission to change rights    (which includes delete, modify, view, and restricted view permissions) of any entity that belongs to the project.    This default object access permission is retrievable through its IRI:    <code>http://rdfh.ch/permissions/[projectShortcode]/defaultDoapForAdmin</code></p> </li> <li> <p>ProjectMember group receives an administrative permission to create resources within the new project.    This administrative permission is retrievable through its IRI:   <code>http://rdfh.ch/permissions/[projectShortcode]/defaultApForMember</code></p> </li> <li> <p>ProjectMember group also gets a default object access permission to delete    (which includes modify, view and restricted view permissions) of any entity that belongs to the project.    This default object access permission is retrievable through its IRI:    <code>http://rdfh.ch/permissions/[projectShortcode]/defaultDoapForMember</code></p> </li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-project-by-id","title":"Get Project by ID","text":"<p>The ID can be shortcode, shortname or IRI.</p> <p>Permissions: No permissions required</p> <p>Request definition:</p> <ul> <li><code>GET /admin/projects/shortcode/{shortcode}</code></li> <li><code>GET /admin/projects/shortname/{shortname}</code></li> <li><code>GET /admin/projects/iri/{iri}</code></li> </ul> <p>Description: Returns a single project identified by shortcode, shortname or IRI.</p> <p>Example request:</p> <pre><code>curl --request GET --url http://localhost:3333/admin/projects/shortcode/0001\n</code></pre> <pre><code>curl --request GET --url http://localhost:3333/admin/projects/shortname/anything\n</code></pre> <pre><code>curl --request GET --url \\\n    http://localhost:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001\n</code></pre> <p>Example response:</p> <pre><code>{\n  \"project\": {\n    \"description\": [\n      {\n        \"value\": \"Anything Project\"\n      }\n    ],\n    \"id\": \"http://rdfh.ch/projects/0001\",\n    \"keywords\": [\n      \"arbitrary test data\",\n      \"things\"\n    ],\n    \"logo\": null,\n    \"longname\": \"Anything Project\",\n    \"ontologies\": [\n      \"http://0.0.0.0:3333/ontology/0001/something/v2\",\n      \"http://0.0.0.0:3333/ontology/0001/freetest/v2\",\n      \"http://0.0.0.0:3333/ontology/0001/minimal/v2\",\n      \"http://0.0.0.0:3333/ontology/0001/anything/v2\"\n    ],\n    \"selfjoin\": false,\n    \"shortcode\": \"0001\",\n    \"shortname\": \"anything\",\n    \"status\": true\n  }\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code> if the provided ID is not valid.</li> <li><code>404 Not Found</code> if no project with the provided ID is found.</li> </ul> <p>NB:</p> <ul> <li>IRI must be URL-encoded.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#update-project-information","title":"Update Project Information","text":"<p>Permissions: SystemAdmin / ProjectAdmin</p> <p>Request definition: <code>PUT /admin/projects/iri/{iri}</code></p> <p>Description: Update a project identified by its IRI.</p> <p>Payload: The following properties can be changed:</p> <ul> <li><code>longname</code></li> <li><code>description</code></li> <li><code>keywords</code></li> <li><code>logo</code></li> <li><code>status</code></li> <li><code>selfjoin</code></li> </ul> <p>Example request:</p> <pre><code>curl --request PUT \\\n  --url http://localhost:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001 \\\n  --header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0' \\\n  --header 'Content-Type: application/json' \\\n  --data '{\n  \"longname\": \"other longname\"\n}'\n</code></pre> <p>Example response:</p> <pre><code>{\n  \"project\": {\n    \"description\": [\n      {\n        \"value\": \"Anything Project\"\n      }\n    ],\n    \"id\": \"http://rdfh.ch/projects/0001\",\n    \"keywords\": [\n      \"arbitrary test data\",\n      \"things\"\n    ],\n    \"logo\": null,\n    \"longname\": \"other longname\",\n    \"ontologies\": [\n      \"http://api.knora.org/ontology/0001/something/v2\",\n      \"http://api.knora.org/ontology/0001/freetest/v2\",\n      \"http://api.knora.org/ontology/0001/minimal/v2\",\n      \"http://api.knora.org/ontology/0001/anything/v2\"\n    ],\n    \"selfjoin\": false,\n    \"shortcode\": \"0001\",\n    \"shortname\": \"anything\",\n    \"status\": true\n  }\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code><ul> <li>if the provided IRI is not valid.</li> <li>if the provided payload is not valid.</li> </ul> </li> <li><code>404 Not Found</code> if no project with the provided IRI is found.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#delete-a-project","title":"Delete a Project","text":"<p>Permissions: SystemAdmin / ProjectAdmin</p> <p>Request definition: <code>DELETE /admin/projects/iri/{iri}</code></p> <p>Description: Mark a project as deleted (by setting the <code>status</code> flag to <code>false</code>).</p> <pre><code>curl --request DELETE \\\n  --url http://localhost:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001 \\\n  --header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0' \\\n  --header 'Content-Type: application/json'\n</code></pre> <p>Example response:</p> <pre><code>{\n  \"project\": {\n    \"description\": [\n      {\n        \"value\": \"Anything Project\"\n      }\n    ],\n    \"id\": \"http://rdfh.ch/projects/0001\",\n    \"keywords\": [\n      \"arbitrary test data\",\n      \"things\"\n    ],\n    \"logo\": null,\n    \"longname\": \"other longname\",\n    \"ontologies\": [\n      \"http://api.knora.org/ontology/0001/something/v2\",\n      \"http://api.knora.org/ontology/0001/freetest/v2\",\n      \"http://api.knora.org/ontology/0001/minimal/v2\",\n      \"http://api.knora.org/ontology/0001/anything/v2\"\n    ],\n    \"selfjoin\": false,\n    \"shortcode\": \"0001\",\n    \"shortname\": \"anything\",\n    \"status\": false\n  }\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code> if the provided IRI is not valid.</li> <li><code>404 Not Found</code> if no project with the provided IRI is found.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-all-data-of-a-project","title":"Get all Data of a Project","text":"<p>Permissions: ProjectAdmin / SystemAdmin</p> <p>Request definition: <code>POST /admin/projects/iri/{iri}/AllData</code></p> <p>Description: Gets all data of a project as a TriG file (ontologies, resource data, admin data, and permissions).</p> <p>Example request:</p> <pre><code>curl --request GET \\\n  --url http://localhost:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F00FF/AllData \\\n  --header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <p>Example response:</p> <pre><code>@prefix images: &lt;http://www.knora.org/ontology/00FF/images#&gt; .\n@prefix knora-admin: &lt;http://www.knora.org/ontology/knora-admin#&gt; .\n@prefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt; .\n@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .\n@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .\n@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .\n@prefix salsah-gui: &lt;http://www.knora.org/ontology/salsah-gui#&gt; .\n@prefix standoff: &lt;http://www.knora.org/ontology/standoff#&gt; .\n@prefix xml: &lt;http://www.w3.org/XML/1998/namespace&gt; .\n@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .\n\n&lt;http://www.knora.org/ontology/00FF/images&gt; {\n    &lt;http://www.knora.org/ontology/00FF/images&gt;\n            rdf:type                      owl:Ontology ;\n            rdfs:label                    \"The images demo ontology\" ;\n            knora-base:attachedToProject  &lt;http://rdfh.ch/projects/00FF&gt; ;\n            knora-base:lastModificationDate  \"2012-12-12T12:12:12.12Z\"^^xsd:dateTime .\n    images:lastname  rdf:type        owl:ObjectProperty ;\n            rdfs:comment             \"Nachname einer Person\"@de ;\n            rdfs:comment             \"Last name of a person\"@en ;\n            rdfs:label               \"Name\"@de ;\n            rdfs:subPropertyOf       knora-base:hasValue ;\n            knora-base:objectClassConstraint  knora-base:TextValue ;\n            knora-base:subjectClassConstraint  images:person ;\n            salsah-gui:guiAttribute  \"size=32\" ;\n            salsah-gui:guiAttribute  \"maxlength=32\" ;\n            salsah-gui:guiElement    salsah-gui:SimpleText .\n    # ...\n}\n\n&lt;http://www.knora.org/data/00FF/images&gt; {\n    &lt;http://rdfh.ch/00FF/0cb8286054d5&gt;\n            rdf:type                      images:bild ;\n            rdfs:label                    \"1 Alpinismus\" ;\n            images:bearbeiter             &lt;http://rdfh.ch/00FF/0cb8286054d5/values/0b80b43aee0f04&gt; ;\n            images:titel                  &lt;http://rdfh.ch/00FF/0cb8286054d5/values/cea90774ee0f04&gt; ;\n            images:urheber                &lt;http://rdfh.ch/00FF/df1260ad43d5&gt; ;\n            images:urheberValue           &lt;http://rdfh.ch/00FF/0cb8286054d5/values/e346ff38-6b03-4a27-a11b-b0818a2e5ee3&gt; ;\n            knora-base:attachedToProject  &lt;http://rdfh.ch/projects/00FF&gt; ;\n            knora-base:attachedToUser     &lt;http://rdfh.ch/users/c266a56709&gt; ;\n            knora-base:creationDate       \"2016-03-02T15:05:57Z\"^^xsd:dateTime ;\n            knora-base:hasPermissions     \"CR knora-admin:ProjectMember,knora-admin:Creator|V knora-admin:KnownUser|RV knora-admin:UnknownUser\" ;\n            knora-base:hasStillImageFileValue  &lt;http://rdfh.ch/00FF/0cb8286054d5/values/c66133bf942f01&gt; ;\n            knora-base:isDeleted          false .\n    # ...\n}\n\n&lt;http://www.knora.org/data/admin&gt; {\n  # ...\n}\n\n&lt;http://www.knora.org/data/permissions&gt; {\n  # ...\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#project-member-operations","title":"Project Member Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-project-members-by-id","title":"Get Project Members by ID","text":"<p>Permissions: SystemAdmin / ProjectAdmin</p> <p>Request definition: </p> <ul> <li><code>GET /admin/projects/shortcode/{shortcode}/members</code></li> <li><code>GET /admin/projects/shortname/{shortname}/members</code></li> <li><code>GET /admin/projects/iri/{iri}/members</code></li> </ul> <p>Description: returns all members part of a project identified through iri, shortname or shortcode</p> <p>Example request:</p> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortcode/0001/members' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortname/anything/members' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001/members'\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"members\": [\n        {\n            \"email\": \"anything.user01@example.org\",\n            \"familyName\": \"UserFamilyName\",\n            \"givenName\": \"UserGivenName\",\n            \"groups\": [],\n            \"id\": \"http://rdfh.ch/users/BhkfBc3hTeS_IDo-JgXRbQ\",\n            \"lang\": \"de\",\n            \"password\": null,\n            \"permissions\": {\n                \"administrativePermissionsPerProject\": {\n                    \"http://rdfh.ch/projects/0001\": [\n                        {\n                            \"additionalInformation\": null,\n                            \"name\": \"ProjectResourceCreateAllPermission\",\n                            \"permissionCode\": null\n                        }\n                    ]\n                },\n                \"groupsPerProject\": {\n                    \"http://rdfh.ch/projects/0001\": [\n                        \"http://www.knora.org/ontology/knora-admin#ProjectMember\"\n                    ]\n                }\n            },\n            \"projects\": [\n                {\n                    \"description\": [\n                        {\n                            \"value\": \"Anything Project\"\n                        }\n                    ],\n                    \"id\": \"http://rdfh.ch/projects/0001\",\n                    \"keywords\": [\n                        \"arbitrary test data\",\n                        \"things\"\n                    ],\n                    \"logo\": null,\n                    \"longname\": \"Anything Project\",\n                    \"ontologies\": [\n                        \"http://0.0.0.0:3333/ontology/0001/something/v2\",\n                        \"http://0.0.0.0:3333/ontology/0001/anything/v2\"\n                    ],\n                    \"selfjoin\": false,\n                    \"shortcode\": \"0001\",\n                    \"shortname\": \"anything\",\n                    \"status\": true\n                }\n            ],\n            \"sessionId\": null,\n            \"status\": true,\n            \"token\": null,\n            \"username\": \"anything.user01\"\n        }\n    ]\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code> if the provided ID is not valid.</li> <li><code>404 Not Found</code> if no project with the provided ID is found.</li> </ul> <p>NB:</p> <ul> <li>IRI must be URL-encoded.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-project-admins-by-id","title":"Get Project Admins by ID","text":"<p>Permissions: SystemAdmin / ProjectAdmin</p> <p>Request definition: </p> <ul> <li><code>GET /admin/projects/shortcode/{shortcode}/admin-members</code></li> <li><code>GET /admin/projects/shortname/{shortname}/admin-members</code></li> <li><code>GET /admin/projects/iri/{iri}/admin-members</code></li> </ul> <p>Description: returns all admin members part of a project identified through iri, shortname or shortcode</p> <p>Example request:</p> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortcode/0001/admin-members' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortname/anything/admin-members' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001/admin-members'\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"members\": [\n        {\n            \"email\": \"anything.admin@example.org\",\n            \"familyName\": \"Admin\",\n            \"givenName\": \"Anything\",\n            \"groups\": [],\n            \"id\": \"http://rdfh.ch/users/AnythingAdminUser\",\n            \"lang\": \"de\",\n            \"password\": null,\n            \"permissions\": {\n                \"administrativePermissionsPerProject\": {\n                    \"http://rdfh.ch/projects/0001\": [\n                        {\n                            \"additionalInformation\": null,\n                            \"name\": \"ProjectResourceCreateAllPermission\",\n                            \"permissionCode\": null\n                        },\n                        {\n                            \"additionalInformation\": null,\n                            \"name\": \"ProjectAdminAllPermission\",\n                            \"permissionCode\": null\n                        }\n                    ]\n                },\n                \"groupsPerProject\": {\n                    \"http://rdfh.ch/projects/0001\": [\n                        \"http://www.knora.org/ontology/knora-admin#ProjectMember\",\n                        \"http://www.knora.org/ontology/knora-admin#ProjectAdmin\"\n                    ]\n                }\n            },\n            \"projects\": [\n                {\n                    \"description\": [\n                        {\n                            \"value\": \"Anything Project\"\n                        }\n                    ],\n                    \"id\": \"http://rdfh.ch/projects/0001\",\n                    \"keywords\": [\n                        \"arbitrary test data\",\n                        \"things\"\n                    ],\n                    \"logo\": null,\n                    \"longname\": \"Anything Project\",\n                    \"ontologies\": [\n                        \"http://0.0.0.0:3333/ontology/0001/something/v2\",\n                        \"http://0.0.0.0:3333/ontology/0001/freetest/v2\",\n                        \"http://0.0.0.0:3333/ontology/0001/minimal/v2\",\n                        \"http://0.0.0.0:3333/ontology/0001/anything/v2\"\n                    ],\n                    \"selfjoin\": false,\n                    \"shortcode\": \"0001\",\n                    \"shortname\": \"anything\",\n                    \"status\": true\n                }\n            ],\n            \"sessionId\": null,\n            \"status\": true,\n            \"token\": null,\n            \"username\": \"anything.admin\"\n        }\n    ]\n}\n</code></pre> <p>Errors:</p> <ul> <li><code>400 Bad Request</code> if the provided ID is not valid.</li> <li><code>404 Not Found</code> if no project with the provided ID is found.</li> </ul> <p>NB:</p> <ul> <li>IRI must be URL-encoded.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#other-project-operations","title":"Other Project Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-all-keywords","title":"Get all Keywords","text":"<p>Permissions:</p> <p>Request definition: <code>GET /admin/projects/Keywords</code></p> <p>Description: returns keywords of all projects as a list</p> <p>Example request:</p> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/Keywords'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"keywords\": [\n        \"Annotation\",\n        \"Arabe\",\n        \"Arabic\",\n        \"Arabisch\",\n        \"Audio\",\n        \"Basel\",\n        \"Basler Fr\u00fchdrucke\",\n        \"Bilder\",\n        \"Bilderfolgen\",\n        \"Contectualisation of images\",\n        \"Cyrillic\",\n        \"Cyrillique\",\n        \"Data and Service Center for the Humanities (DaSCH)\",\n        \"Grec\",\n        \"Greek\",\n        \"Griechisch\",\n        \"Hebrew\",\n        \"Hebr\u00e4isch\",\n        \"Hieroglyphen\",\n        \"H\u00e9breu\",\n        \"Inkunabel\",\n        \"Japanese\",\n        \"Japanisch\",\n        \"Japonais\",\n        \"Keilschrift\",\n        \"Kunsthistorisches Seminar Universit\u00e4t Basel\",\n        \"Kyrillisch\",\n        \"Late Middle Ages\",\n        \"Letterpress Printing\",\n        \"Markup\",\n        \"Narrenschiff\",\n        \"Objekte\",\n        \"Sebastian Brant\",\n        \"Sonderzeichen\",\n        \"Texteigenschaften\",\n        \"Textquellen\",\n        \"Wiegendrucke\",\n        \"XML\",\n        \"arbitrary test data\",\n        \"asdf\",\n        \"audio\",\n        \"caract\u00e8res sp\u00e9ciaux\",\n        \"collection\",\n        \"cuneiform\",\n        \"cun\u00e9iforme\",\n        \"early print\",\n        \"hieroglyphs\",\n        \"hi\u00e9roglyphes\",\n        \"images\",\n        \"incunabula\",\n        \"objects\",\n        \"objets\",\n        \"propri\u00e9t\u00e9s de texte\",\n        \"ship of fools\",\n        \"sources\",\n        \"special characters\",\n        \"textual properties\",\n        \"textual sources\",\n        \"things\"\n    ]\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-keywords-of-a-project","title":"Get Keywords of a Project","text":"<p>Permissions:</p> <p>Request definition:</p> <ul> <li><code>GET /admin/projects/iri/{iri}/Keywords</code></li> </ul> <p>Description: returns the keywords of a single project</p> <p>Example request:</p> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001/Keywords'\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"keywords\": [\n        \"arbitrary test data\",\n        \"things\"\n    ]\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#get-restricted-view-settings","title":"Get Restricted View Settings","text":"<p>Permissions: ProjectAdmin</p> <p>Request definition:</p> <ul> <li><code>GET /admin/projects/shortcode/{shortcode}/RestrictedViewSettings</code></li> <li><code>GET /admin/projects/shortname/{shortname}/RestrictedViewSettings</code></li> <li><code>GET /admin/projects/iri/{iri}/RestrictedViewSettings</code></li> </ul> <p>Description: returns the project's restricted view settings</p> <p>Example request:</p> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortcode/0001/RestrictedViewSettings' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/shortname/anything/RestrictedViewSettings' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <pre><code>curl --request GET 'http://0.0.0.0:3333/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001/RestrictedViewSettings' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0'\n</code></pre> <p>Example response:</p> <pre><code>{\n    \"settings\": {\n        \"size\": \"!512,512\",\n        \"watermark\": false\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/projects/#set-restricted-view-settings","title":"Set Restricted View Settings","text":"<p>Set how all still image resources of a projects should be displayed when viewed as restricted.  This can be either a size restriction or a watermark. </p> <p>For that, we support two of the IIIF size forms:</p> <ul> <li><code>!d,d</code> The returned image is scaled so that the width and height of the returned image are not greater than d,    while maintaining the aspect ratio.</li> <li><code>pct:n</code> The width and height of the returned image is scaled to n percent    of the width and height of the original image. 1&lt;= n &lt;= 100.</li> </ul> <p>If the watermark is set to <code>true</code>, the returned image will be watermarked, otherwise the default size <code>!128,128</code> is set. It is only possible to set either the size or the watermark, not both at the same time.</p> <p>Permissions: ProjectAdmin/SystemAdmin</p> <p>Request definition:</p> <ul> <li><code>POST /admin/projects/iri/{iri}/RestrictedViewSettings</code></li> <li><code>POST /admin/projects/shortcode/{shortcode}/RestrictedViewSettings</code></li> </ul> <p>Description: Set the project's restricted view</p> <p>The endpoint accepts either a size or a watermark but not both.</p> <p>Size:</p> <pre><code>{ \"size\": \"!512,512\" }\n</code></pre> <p>Watermark:</p> <pre><code>{ \"watermark\": true }\n</code></pre> <p>Examples :</p> <p>Request:</p> <pre><code>curl --request POST 'http://0.0.0.0:5555/admin/projects/iri/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001/RestrictedViewSettings' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0' \\\n--data '{\"size\": \"!512,512\"}\n</code></pre> <p>Response:</p> <pre><code>{ \"size\": \"!512,512\" }\n</code></pre> <p>Request:</p> <pre><code>curl --request POST 'http://0.0.0.0:5555/admin/projects/shortcode/0001/RestrictedViewSettings' \\\n--header 'Authorization: Basic cm9vdEBleGFtcGxlLmNvbTp0ZXN0' \\\n--data '{\"watermark\": true}'\n</code></pre> <p>Response:</p> <pre><code>{ \"watermark\": true }\n</code></pre> <p>Operates on the following mutually exclusive properties:</p> <ul> <li><code>knora-admin:projectRestrictedViewSize</code>: the IIIF size value</li> <li><code>knora-admin:projectRestrictedViewWatermark</code>: whether images of a project should be protected with a watermark.</li> </ul> <p>Note: Restricted view settings only take effect, if a user has \"Restricted View\" permission on an image.</p>"},{"location":"DSP-API/03-endpoints/api-admin/stores/","title":"Stores Endpoint","text":"<p>This endpoint allows manipulation of the triplestore content.</p> <p><code>POST admin/store/ResetTriplestoreContent</code> resets the triplestore content, given that the <code>allowReloadOverHttp</code> configuration flag is set to <code>true</code>. This route is mostly used in tests.</p>"},{"location":"DSP-API/03-endpoints/api-admin/users/","title":"Users Endpoint","text":""},{"location":"DSP-API/03-endpoints/api-admin/users/#endpoint-overview","title":"Endpoint Overview","text":""},{"location":"DSP-API/03-endpoints/api-admin/users/#general-user-operations","title":"General User Operations","text":"<ul> <li><code>GET: /admin/users</code> : return all users</li> <li><code>GET: /admin/users/[iri | email | username]/&lt;identifier&gt;</code> : return single user identified by [IRI | email | username]</li> <li><code>POST: /admin/users/</code> : create new user</li> <li><code>PUT: /admin/users/iri/&lt;userIri&gt;/BasicUserInformation</code> : update user's basic user information</li> <li><code>PUT: /admin/users/iri/&lt;userIri&gt;/Password</code> : update user's password</li> <li><code>PUT: /admin/users/iri/&lt;userIri&gt;/Status</code> : update user's status</li> <li><code>DELETE: /admin/users/iri/&lt;userIri&gt;</code> : delete user (set status to false)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#project-membership-operations","title":"Project membership operations","text":"<ul> <li><code>GET: /admin/users/iri/&lt;userIri&gt;/project-memberships</code> : get user's project memberships</li> <li><code>POST: /admin/users/iri/&lt;userIri&gt;/project-memberships/&lt;projectIri&gt;</code> : add user to project (to ProjectMember group)</li> <li><code>DELETE: /admin/users/iri/&lt;userIri&gt;/project-memberships/&lt;projectIri&gt;</code> : remove user from project (to ProjectMember   group)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#group-membership-operations","title":"Group membership operations","text":"<ul> <li><code>GET: /admin/users/iri/&lt;userIri&gt;/project-admin-memberships</code> : get user's ProjectAdmin group memberships</li> <li><code>POST: /admin/users/iri/&lt;userIri&gt;/project-admin-memberships/&lt;projectIri&gt;</code> : add user to ProjectAdmin group</li> <li> <p><code>DELETE: /admin/users/iri/&lt;userIri&gt;/project-admin-memberships/&lt;projectIri&gt;</code> : remove user from ProjectAdmin group</p> </li> <li> <p><code>GET: /admin/users/iri/&lt;userIri&gt;/group-memberships</code> : get user's normal group memberships</p> </li> <li><code>POST: /admin/users/iri/&lt;userIri&gt;/group-memberships/&lt;groupIri&gt;</code> : add user to normal group</li> <li> <p><code>DELETE: /admin/users/iri/&lt;userIri&gt;/group-memberships/&lt;groupIri&gt;</code> : remove user from normal group</p> </li> <li> <p><code>PUT: /admin/users/iri/&lt;userIri&gt;/SystemAdmin</code> : Add/remove user to/from SystemAdmin group</p> </li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#user-operations","title":"User Operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/users/#get-users","title":"Get users","text":"<ul> <li>Required permission: SystemAdmin</li> <li>GET: <code>/admin/users</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#get-user","title":"Get user","text":"<ul> <li>Required permission:<ul> <li>SystemAdmin / self: for getting all properties</li> <li>All other users: for getting only the public properties (<code>givenName</code> and <code>familyName</code>)</li> </ul> </li> <li>GET:<code>/admin/users/[iri | email | username ]/&lt;identifier&gt;</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#create-user","title":"Create user","text":"<ul> <li>Required permission: none, self-registration is allowed</li> <li>Required information: email (unique), given name, family name,   password, status, systemAdmin</li> <li>Username restrictions:<ul> <li>3 - 50 characters long</li> <li>Only contains alphanumeric characters (a-z, A-Z, 0-9), underscore (_), hyphen (-), and dot (.)</li> <li>Cannot start or end with underscore, hyphen, or dot</li> <li>Underscore, hyphen, or dot cannot be used multiple times in a row</li> </ul> </li> <li>Returns information about the newly created user</li> <li>POST: <code>/admin/users</code></li> <li>BODY:</li> </ul> <pre><code>    {\n  \"email\": \"donald.duck@example.org\",\n  \"givenName\": \"Donald\",\n  \"familyName\": \"Duck\",\n  \"username\": \"donald.duck\",\n  \"password\": \"test\",\n  \"status\": true,\n  \"lang\": \"en\",\n  \"systemAdmin\": false\n}\n</code></pre> <p>Additionally, each user can have an optional custom IRI (of Knora IRI form) specified by the <code>id</code> in the request body as below:</p> <pre><code>    {\n  \"id\": \"http://rdfh.ch/users/FnjFfIQFVDvI7ex8zSyUyw\",\n  \"email\": \"donald.duck@example.org\",\n  \"givenName\": \"Donald\",\n  \"familyName\": \"Duck\",\n  \"username\": \"donald.duck\",\n  \"password\": \"test\",\n  \"status\": true,\n  \"lang\": \"en\",\n  \"systemAdmin\": false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/users/#update-basic-user-information","title":"Update basic user information**","text":"<ul> <li>Required permission: SystemAdmin / self</li> <li>Changeable information: username, email, given name, family name,   password, status, SystemAdmin membership</li> <li>TypeScript Docs: userFormats - ChangeUserApiRequestADM</li> <li>PUT: <code>/admin/users/iri/&lt;userIri&gt;/BasicUserInformation</code></li> <li>BODY:</li> </ul> <pre><code>    {\n  \"username\": \"donald.big.duck\",\n  \"email\": \"donald.big.duck@example.org\",\n  \"givenName\": \"Big Donald\",\n  \"familyName\": \"Duckmann\",\n  \"lang\": \"de\"\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/users/#update-users-password","title":"Update user's password","text":"<ul> <li>Required permission: SystemAdmin / self</li> <li>Changeable information: password</li> <li>PUT: <code>/admin/users/iri/&lt;userIri&gt;/Password</code></li> <li>BODY:</li> </ul> <pre><code>    {\n  \"requesterPassword\": \"test\",\n  \"newPassword\": \"test1234\"\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/users/#delete-user","title":"Delete user","text":"<ul> <li>Required permission: SystemAdmin / self</li> <li>Remark: The same as updating a user and changing <code>status</code> to <code>false</code>. To un-delete, set <code>status</code> to <code>true</code>.</li> <li>PUT: <code>/admin/users/iri/&lt;userIri&gt;/Status</code></li> <li>BODY:</li> </ul> <pre><code>{\n  \"status\": false\n  // true or false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/users/#delete-user-update-user","title":"Delete user (-\\update user)**","text":"<ul> <li>Required permission: SystemAdmin / self</li> <li>Remark: The same as updating a user and changing <code>status</code> to <code>false</code>. To un-delete, set <code>status</code> to <code>true</code>.</li> <li>DELETE: <code>/admin/users/iri/&lt;userIri&gt;</code></li> <li>BODY: empty</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#users-project-membership-operations","title":"User's project membership operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/users/#get-users-project-memberships","title":"Get user's project memberships","text":"<ul> <li>GET: <code>/admin/users/iri/&lt;userIri&gt;/project-memberships</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#addremove-user-tofrom-project","title":"Add/remove user to/from project","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin / self (if project self-assignment is enabled)</li> <li>Required information: project IRI, user IRI</li> <li>Effects: <code>knora-base:isInProject</code> user property</li> <li>POST / DELETE: <code>/admin/users/iri/&lt;userIri&gt;/project-memberships/&lt;projectIri&gt;</code></li> <li>BODY: empty</li> </ul> <p>Note: When a user is project admin in the same project, his project admin membership will be removed as well.</p>"},{"location":"DSP-API/03-endpoints/api-admin/users/#users-group-membership-operations","title":"User's group membership operations","text":""},{"location":"DSP-API/03-endpoints/api-admin/users/#get-users-project-admin-memberships","title":"Get user's project admin memberships","text":"<ul> <li>GET: <code>/admin/users/iri/&lt;userIri&gt;/project-admin-memberships</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#addremove-user-tofrom-project-admin-group","title":"Add/remove user to/from project admin group","text":"<ul> <li>Required permission: SystemAdmin / ProjectAdmin</li> <li>Required information: project IRI, user IRI</li> <li>Effects: <code>knora-base:isInProjectAdminGroup</code> user property</li> <li>POST / DELETE: <code>/admin/users/iri/&lt;userIri&gt;/project-admin-memberships/&lt;projectIri&gt;</code></li> <li>BODY: empty</li> </ul> <p>Note: In order to add a user to a project admin group, the user needs to be member of that project.</p>"},{"location":"DSP-API/03-endpoints/api-admin/users/#get-users-group-memberships","title":"Get user's group memberships**","text":"<ul> <li>GET: <code>/admin/users/iri/&lt;userIri&gt;/group-memberships</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#addremove-user-tofrom-normal-group-not-systemadmin-or-projectadmin","title":"Add/remove user to/from 'normal' group (not SystemAdmin or ProjectAdmin)","text":"<ul> <li>Required permission: SystemAdmin / hasProjectAllAdminPermission   / hasProjectAllGroupAdminPermission /   hasProjectRestrictedGroupAdminPermission (for this group) / User   (if group self-assignment is enabled)</li> <li>Required information: group IRI, user IRI</li> <li>Effects: <code>knora-base:isInGroup</code></li> <li>POST / DELETE: <code>/admin/users/iri/&lt;userIri&gt;/group-memberships/&lt;groupIri&gt;</code></li> <li>BODY: empty</li> </ul>"},{"location":"DSP-API/03-endpoints/api-admin/users/#addremove-user-tofrom-system-admin-group","title":"Add/remove user to/from system admin group","text":"<ul> <li>Required permission: SystemAdmin / self</li> <li>Effects property: <code>knora-base:isInSystemAdminGroup</code> with value   <code>true</code> or <code>false</code></li> <li>PUT: <code>/admin/users/iri/&lt;userIri&gt;/SystemAdmin</code></li> <li>BODY:</li> </ul> <pre><code>{\n  \"systemAdmin\": false\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-admin/users/#example-data","title":"Example Data","text":"<p>The following is an example for user information stored in the <code>admin</code> named graph:</p> <pre><code>&lt;http://rdfh.ch/users/c266a56709&gt;\n    rdf:type knora-admin:User ;\n    knora-admin:username \"user01.user1\"^^xsd:string ;\n    knora-admin:email \"user01.user1@example.com\"^^xsd:string ;\n    knora-admin:givenName \"User01\"^^xsd:string ;\n    knora-admin:familyName \"User\"^^xsd:string ;\n    knora-admin:password \"$e0801$FGl9FDIWw+D83OeNPGmD9u2VTqIkJopIQECgmb2DSWQLS0TeKSvYoWAkbEv6KxePPlCI3CP9MmVHuvnWv8/kag==$mlegCYdGXt+ghuo8i0rLjgOiNnGDW604Q5g/v7zwBPU=\"^^xsd:string ;\n    knora-admin:preferredLanguage \"de\"^^xsd:string ;\n    knora-admin:status \"true\"^^xsd:boolean ;\n    knora-admin:isInProject &lt;http://rdfh.ch/projects/00FF&gt; ;\n    knora-admin:isInSystemAdminGroup \"false\"^^xsd:boolean ;\n    knora-admin:isInProjectAdminGroup &lt;http://rdfh.ch/projects/00FF&gt; .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-util/version/","title":"Version","text":"<p>The version endpoint provides all versions of used components in the DSP stack.</p>"},{"location":"DSP-API/03-endpoints/api-util/version/#example-request","title":"Example request","text":"<p><code>GET /version</code></p>"},{"location":"DSP-API/03-endpoints/api-util/version/#example-response","title":"Example response","text":"<pre><code>HTTP/1.1 200 OK\nContent-Length: 247\nContent-Type: application/json\nDate: Mon, 11 Mar 2024 17:40:32 GMT\nServer: webapi/v30.9.0\n\n{\n    \"buildCommit\": \"bbb0e65c7\",\n    \"buildTime\": \"2024-03-11T17:40:17.322491Z\",\n    \"fuseki\": \"2.1.5\",\n    \"scala\": \"2.13.13\",\n    \"sipi\": \"3.9.0\",\n    \"webapi\": \"v30.9.0\"\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/authentication/","title":"Authentication","text":"<p>Certain routes are secured and require authentication. When accessing any secured route an Access Token must be sent in the HTTP authorization header with the HTTP bearer scheme.</p> <p>Any other method of authentication is deprecated.</p>"},{"location":"DSP-API/03-endpoints/api-v2/authentication/#access-token-login-and-logout","title":"Access Token / Login and Logout","text":"<p>A client can obtain an access token by sending a POST request (e.g., <code>{\"identifier_type\":\"identifier_value\", \"password\":\"password_value\"}</code>) to the /v2/authentication route with identifier and password in the body. The <code>identifier_type</code> can be <code>iri</code>, <code>email</code>, or <code>username</code>. If the credentials are valid, a JSON WEB Token (JWT) will be sent back in the response (e.g., <code>{\"token\": \"eyJ0eXAiOiJ...\"}</code>). </p> <p>To logout, the client sends a DELETE request to the same route /v2/authentication  along with the access token. This will invalidate the access token, thus not allowing further request that would supply the invalidated token.</p>"},{"location":"DSP-API/03-endpoints/api-v2/authentication/#checking-credentials","title":"Checking Credentials","text":"<p>To check the credentials, send a GET request to /v2/authentication with the credentials supplied as URL parameters or HTTP authentication headers as described before.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/","title":"Creating and Editing Resources","text":""},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#creating-a-resource","title":"Creating a Resource","text":"<p>To create a new resources, use this route:</p> <pre><code>HTTP POST to http://host/v2/resources\n</code></pre> <p>The body of the request is a JSON-LD document in the complex API schema, specifying the type,<code>rdfs:label</code>, and its Knora resource properties and their values. The representation of the resource is the same as when it is returned in a <code>GET</code> request, except that its <code>knora-api:attachedToUser</code> is not given, and the resource IRI and those of its values can be optionally specified. The format of the values submitted is described in Creating and Editing Values.  If there are multiple values for a property, these must be given in an array.</p> <p>For example, here is a request to create a resource with various value types:</p> <pre><code>{\n  \"@type\" : \"anything:Thing\",\n  \"anything:hasBoolean\" : {\n    \"@type\" : \"knora-api:BooleanValue\",\n    \"knora-api:booleanValueAsBoolean\" : true\n  },\n  \"anything:hasColor\" : {\n    \"@type\" : \"knora-api:ColorValue\",\n    \"knora-api:colorValueAsColor\" : \"#ff3333\"\n  },\n  \"anything:hasDate\" : {\n    \"@type\" : \"knora-api:DateValue\",\n    \"knora-api:dateValueHasCalendar\" : \"GREGORIAN\",\n    \"knora-api:dateValueHasEndEra\" : \"CE\",\n    \"knora-api:dateValueHasEndYear\" : 1489,\n    \"knora-api:dateValueHasStartEra\" : \"CE\",\n    \"knora-api:dateValueHasStartYear\" : 1489\n  },\n  \"anything:hasDecimal\" : {\n    \"@type\" : \"knora-api:DecimalValue\",\n    \"knora-api:decimalValueAsDecimal\" : {\n      \"@type\" : \"xsd:decimal\",\n      \"@value\" : \"100000000000000.000000000000001\"\n    }\n  },\n  \"anything:hasGeometry\" : {\n    \"@type\" : \"knora-api:GeomValue\",\n    \"knora-api:geometryValueAsGeometry\" : \"{\\\"status\\\":\\\"active\\\",\\\"lineColor\\\":\\\"#ff3333\\\",\\\"lineWidth\\\":2,\\\"points\\\":[{\\\"x\\\":0.08098591549295775,\\\"y\\\":0.16741071428571427},{\\\"x\\\":0.7394366197183099,\\\"y\\\":0.7299107142857143}],\\\"type\\\":\\\"rectangle\\\",\\\"original_index\\\":0}\"\n  },\n  \"anything:hasGeoname\" : {\n    \"@type\" : \"knora-api:GeonameValue\",\n    \"knora-api:geonameValueAsGeonameCode\" : \"2661604\"\n  },\n  \"anything:hasInteger\" : [ {\n    \"@type\" : \"knora-api:IntValue\",\n    \"knora-api:hasPermissions\" : \"CR knora-admin:Creator|V http://rdfh.ch/groups/0001/thing-searcher\",\n    \"knora-api:intValueAsInt\" : 5,\n    \"knora-api:valueHasComment\" : \"this is the number five\"\n  }, {\n    \"@type\" : \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\" : 6\n  } ],\n  \"anything:hasInterval\" : {\n    \"@type\" : \"knora-api:IntervalValue\",\n    \"knora-api:intervalValueHasEnd\" : {\n      \"@type\" : \"xsd:decimal\",\n      \"@value\" : \"3.4\"\n    },\n    \"knora-api:intervalValueHasStart\" : {\n      \"@type\" : \"xsd:decimal\",\n      \"@value\" : \"1.2\"\n    }\n  },\n  \"anything:hasListItem\" : {\n    \"@type\" : \"knora-api:ListValue\",\n    \"knora-api:listValueAsListNode\" : {\n      \"@id\" : \"http://rdfh.ch/lists/0001/treeList03\"\n    }\n  },\n  \"anything:hasOtherThingValue\" : {\n    \"@type\" : \"knora-api:LinkValue\",\n    \"knora-api:linkValueHasTargetIri\" : {\n      \"@id\" : \"http://rdfh.ch/0001/a-thing\"\n    }\n  },\n  \"anything:hasRichtext\" : {\n    \"@type\" : \"knora-api:TextValue\",\n    \"knora-api:textValueAsXml\" : \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\\n&lt;text&gt;&lt;p&gt;&lt;strong&gt;this is&lt;/strong&gt; text&lt;/p&gt; with standoff&lt;/text&gt;\",\n    \"knora-api:textValueHasMapping\" : {\n      \"@id\" : \"http://rdfh.ch/standoff/mappings/StandardMapping\"\n    }\n  },\n  \"anything:hasText\" : {\n    \"@type\" : \"knora-api:TextValue\",\n    \"knora-api:valueAsString\" : \"this is text without standoff\"\n  },\n  \"anything:hasUri\" : {\n    \"@type\" : \"knora-api:UriValue\",\n    \"knora-api:uriValueAsUri\" : {\n      \"@type\" : \"xsd:anyURI\",\n      \"@value\" : \"https://www.knora.org\"\n    }\n  },\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"http://rdfh.ch/projects/0001\"\n  },\n  \"rdfs:label\" : \"test thing\",\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Permissions for the new resource can be given by adding <code>knora-api:hasPermissions</code>, a custom creation date can be specified by adding <code>knora-api:creationDate</code> (an xsd:dateTimeStamp), and the resource's creator can be specfied by adding <code>knora-api:attachedToUser</code>. For example:</p> <pre><code>{\n  \"@type\" : \"anything:Thing\",\n  \"anything:hasBoolean\" : {\n    \"@type\" : \"knora-api:BooleanValue\",\n    \"knora-api:booleanValueAsBoolean\" : true\n  },\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"http://rdfh.ch/projects/0001\"\n  },\n  \"knora-api:attachedToUser\" : {\n    \"@id\" : \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n  },\n  \"rdfs:label\" : \"test thing\",\n  \"knora-api:hasPermissions\" : \"CR knora-admin:Creator|V http://rdfh.ch/groups/0001/thing-searcher\",\n  \"knora-api:creationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"2019-01-09T15:45:54.502951Z\"\n  },\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>The format of the object of <code>knora-api:hasPermissions</code> is described in Permissions.</p> <p>If permissions are not given, configurable default permissions are used (see Default Object Access Permissions ).</p> <p>To create a resource, the user must have permission to create resources of that class in that project.</p> <p>The predicate <code>knora-api:attachedToUser</code> can be used to specify a creator other than the requesting user only if the requesting user is an administrator of the project or a system administrator. The specified creator must also have permission to create resources of that class in that project.</p> <p>In addition to the creation date, in the body of the request, it is possible to specify a custom IRI ( of Knora IRI form) for a resource through the <code>@id</code> attribute which will then be assigned to the resource; otherwise the resource will get a unique random IRI.</p> <p>A custom resource IRI must be <code>http://rdfh.ch/PROJECT_SHORTCODE/</code> (where <code>PROJECT_SHORTCODE</code> is the shortcode of the project that the resource belongs to) plus a custom ID string.</p> <p>Similarly, it is possible to assign a custom IRI to the values using their <code>@id</code> attributes; if not given, random IRIs will be assigned to the values.</p> <p>A custom value IRI must be the IRI of the containing resource, followed by a <code>/values/</code> and a custom ID string.</p> <p>An optional custom UUID of a value can also be given by adding <code>knora-api:valueHasUUID</code>. Each custom UUID must be base64url-encoded without padding. Each value of the new resource can also have a custom creation date specified by adding <code>knora-api:creationDate</code> (an xsd:dateTimeStamp). For example:</p> <pre><code>{\n   \"@id\" : \"http://rdfh.ch/0001/oveR1dQltEUwNrls9Lu5Rw\",\n   \"@type\" : \"anything:Thing\",\n   \"knora-api:attachedToProject\" : {\n     \"@id\" : \"http://rdfh.ch/projects/0001\"\n   },\n   \"anything:hasInteger\" : {\n       \"@id\" : \"http://rdfh.ch/0001/oveR1dQltEUwNrls9Lu5Rw/values/IN4R19yYR0ygi3K2VEHpUQ\",\n       \"@type\" : \"knora-api:IntValue\",\n       \"knora-api:intValueAsInt\" : 10,\n       \"knora-api:valueHasUUID\" : \"IN4R19yYR0ygi3K2VEHpUQ\",\n       \"knora-api:creationDate\" : {\n               \"@type\" : \"xsd:dateTimeStamp\",\n               \"@value\" : \"2020-06-04T12:58:54.502951Z\"\n       }\n   },\n   \"rdfs:label\" : \"test thing with custom IRI\",\n   \"knora-api:creationDate\" : {\n     \"@type\" : \"xsd:dateTimeStamp\",\n     \"@value\" : \"2019-01-09T15:45:54.502951Z\"\n   },\n   \"@context\" : {\n     \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n     \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n     \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n     \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n     \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>The response is a JSON-LD document containing a preview of the resource.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#modifying-a-resources-values","title":"Modifying a Resource's Values","text":"<p>See Creating and Editing Values.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#modifying-a-resources-metadata","title":"Modifying a Resource's Metadata","text":"<p>You can modify the following metadata attached to a resource:</p> <ul> <li>label</li> <li>permissions</li> <li>last modification date</li> </ul> <p>To do this, use this route:</p> <pre><code>HTTP PUT to http://host/v2/resources\n</code></pre> <p>The request body is a JSON-LD object containing the following information about the resource:</p> <ul> <li><code>@id</code>: the resource's IRI</li> <li><code>@type</code>: the resource's class IRI</li> <li><code>knora-api:lastModificationDate</code>: an <code>xsd:dateTimeStamp</code> representing the last modification date that is currently   attached to the resource, if any. This is used to make sure that the resource has not been modified by someone else   since you last read it.</li> </ul> <p>The submitted JSON-LD object must also contain one or more of the following predicates, representing the metadata you want to change:</p> <ul> <li><code>rdfs:label</code>: a string</li> <li><code>knora-api:hasPermissions</code>, in the format described   in Permissions</li> <li><code>knora-api:newModificationDate</code>: an xsd:dateTimeStamp.</li> </ul> <p>Here is an example:</p> <pre><code>{\n  \"@id\" : \"http://rdfh.ch/0001/a-thing\",\n  \"@type\" : \"anything:Thing\",\n  \"rdfs:label\" : \"this is the new label\",\n  \"knora-api:hasPermissions\" : \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:ProjectMember\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"2017-11-20T15:55:17Z\"\n  },\n  \"knora-api:newModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"2018-12-21T16:56:18Z\"\n  },\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>If you submit a <code>knora-api:lastModificationDate</code> that is different from the resource's actual last modification date, you will get an HTTP 409 (Conflict) error.</p> <p>If you submit a <code>knora-api:newModificationDate</code> that is earlier than the resource's <code>knora-api:lastModificationDate</code>, you will get an HTTP 400 (Bad Request) error.</p> <p>A successful response is an HTTP 200 (OK) status containing the resource's metadata.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#deleting-a-resource","title":"Deleting a Resource","text":"<p>Knora does not normally delete resources; instead, it marks them as deleted, which means that they do not appear in normal query results.</p> <p>To mark a resource as deleted, use this route:</p> <pre><code>HTTP POST to http://host/v2/resources/delete\n</code></pre> <p>The request body is a JSON-LD object containing the following information about the resource:</p> <ul> <li><code>@id</code>: the resource's IRI</li> <li><code>@type</code>: the resource's class IRI</li> <li><code>knora-api:lastModificationDate</code>: an <code>xsd:dateTimeStamp</code> representing the last modification date that is currently   attached to the resource, if any. This is used to make sure that the resource has not been modified by someone else   since you last read it.</li> </ul> <pre><code>{\n  \"@id\" : \"http://rdfh.ch/0001/a-thing\",\n  \"@type\" : \"anything:Thing\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"2019-02-05T17:05:35.776747Z\"\n  },\n  \"knora-api:deleteComment\" : \"This resource was created by mistake.\",\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>The optional property <code>knora-api:deleteComment</code> specifies a comment to be attached to the resource, explaining why it has been marked as deleted.</p> <p>The optional property <code>knora-api:deleteDate</code> (an xsd:dateTimeStamp) indicates when the resource was marked as deleted; if not given, the current time is used.</p> <p>The response is a JSON-LD document containing the predicate <code>knora-api:result</code> with a confirmation message.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#requesting-deleted-resources","title":"Requesting Deleted Resources","text":"<p>Resources marked as deleted are not found in search queries. It is however possible to request them directly or from an ARK URL. In these instances, the API will not return the deleted resource, but instead a generic resource of type  <code>knora-base:DeletedResource</code>. This resource will be similar to the requested resource, having e.g. the same IRI. The resource will contain the deletion date and optionally the deletion comment.</p> <p>The response to requesting a deleted resource will look as the following example:</p> <pre><code>{\n    \"rdfs:label\": \"Deleted Resource\",\n    \"knora-api:versionArkUrl\": {\n        \"@value\": \"http://0.0.0.0:3336/ark:/72163/1/0001/a=thingO.20211214T084407677335Z\",\n        \"@type\": \"xsd:anyURI\"\n    },\n    \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0001\"\n    },\n    \"knora-api:userHasPermission\": \"CR\",\n    \"knora-api:attachedToUser\": {\n        \"@id\": \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n    },\n    \"knora-api:hasPermissions\": \"CR knora-admin:ProjectMember|V knora-admin:ProjectMember\",\n    \"knora-api:isDeleted\": true,\n    \"@type\": \"knora-api:DeletedResource\",\n    \"@id\": \"http://rdfh.ch/0001/a-thing\",\n    \"knora-api:deleteComment\": \"This resource is too boring.\",\n    \"knora-api:arkUrl\": {\n        \"@value\": \"http://0.0.0.0:3336/ark:/72163/1/0001/a=thingO\",\n        \"@type\": \"xsd:anyURI\"\n    },\n    \"knora-api:creationDate\": {\n        \"@value\": \"2021-12-14T08:44:07.677335Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n    },\n    \"knora-api:deleteDate\": {\n        \"@type\": \"xsd:dateTimeStamp\",\n        \"@value\": \"2021-12-14T08:44:07.372543Z\"\n    },\n    \"@context\": {\n        \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#links-to-deleted-resources","title":"Links to Deleted Resources","text":"<p>If resource <code>A</code> has a link to resource <code>B</code>, and resource <code>B</code> is later marked as deleted, <code>A</code>'s link will still exist. DSP-API v2 will still return the link when <code>A</code> is queried, but without any information about <code>B</code> (except for <code>B</code>'s IRI). If <code>A</code>'s link is necessary to meet the requirements of a cardinality, marking <code>B</code> as deleted will not violate the cardinality.</p> <p>The reason for this design is that <code>A</code> and <code>B</code> might be in different projects, and each project must retain control of its resources and be able to mark them as deleted, even if they are used by another project.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-resources/#erasing-a-resource-from-the-triplestore","title":"Erasing a Resource from the Triplestore","text":"<p>Normally, resources are not actually removed from the triplestore; they are only marked as deleted (see Deleting a Resource). However, sometimes it is necessary to erase a resource from the triplestore. To do so, use this route:</p> <pre><code>HTTP POST to http://host/v2/resources/erase\n</code></pre> <p>The request body is the same as for Deleting a Resource, except that <code>knora-api:deleteComment</code> is not relevant and will be ignored.</p> <p>To do this, a user must be a system administrator or an administrator of the project containing the resource. The user's permissions on the resource are not otherwise checked.</p> <p>A resource cannot be erased if any other resource has a link to it. Any such links must first be changed or marked as deleted (see Updating a Value and Deleting a Value). Then, when the resource is erased, the deleted link values that referred to it will also be erased.</p> <p>This operation cannot be undone (except by restoring the repository from a backup), so use it with care.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/","title":"Creating and Editing Values","text":""},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-value","title":"Creating a Value","text":"<p>To create a value in an existing resource, use this route:</p> <pre><code>HTTP POST to http://host/v2/values\n</code></pre> <p>The body of the request is a JSON-LD document in the complex API schema, specifying the resource's IRI and type, the resource property, and the content of the value. The representation of the value is the same as when it is returned in a <code>GET</code> request, except that its IRI and <code>knora-api:attachedToUser</code> are not given. For example, to create an integer value:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 4\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Each value can have a comment, given in <code>knora-api:valueHasComment</code>. For example:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 4,\n    \"knora-api:valueHasComment\": \"This is a comment.\"\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Permissions for the new value can be given by adding <code>knora-api:hasPermissions</code>. For example:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 4,\n    \"knora-api:hasPermissions\": \"CR knora-admin:Creator|V http://rdfh.ch/groups/0001/thing-searcher\"\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Each value can have an optional custom IRI (of Knora IRI form) specified by the <code>@id</code> attribute, a custom creation date specified by adding <code>knora-api:valueCreationDate</code> (an xsd:dateTimeStamp), or a custom UUID given by <code>knora-api:valueHasUUID</code>. Each custom UUID must be base64url-encoded, without padding. If a custom UUID is provided, it will be used in value IRI. If a custom IRI is given for the value, its UUID should match the given custom UUID. If a custom IRI is provided, but there is no custom UUID provided, then the UUID given in the IRI will be assigned to the <code>knora-api:valueHasUUID</code>. A custom value IRI must be the IRI of the containing resource, followed by a <code>/values/</code> and a custom ID string. For example:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@id\": \"http://rdfh.ch/0001/a-thing/values/IN4R19yYR0ygi3K2VEHpUQ\",\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 21,\n    \"knora-api:valueHasUUID\": \"IN4R19yYR0ygi3K2VEHpUQ\",\n    \"knora-api:valueCreationDate\": {\n      \"@type\": \"xsd:dateTimeStamp\",\n      \"@value\": \"2020-06-04T12:58:54.502951Z\"\n    }\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\",\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>The format of the object of <code>knora-api:hasPermissions</code> is described in Permissions.</p> <p>If permissions are not given, configurable default permissions are used (see Default Object Access Permissions ).</p> <p>To create a value, the user must have modify permission on the containing resource.</p> <p>The response is a JSON-LD document containing:</p> <ul> <li><code>@id</code>: the IRI of the value that was created.</li> <li><code>@type</code>: the value's type.</li> <li><code>knora-api:valueHasUUID</code>, the value's UUID, which remains stable across value versions   (except for link values, as explained below).</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-link-between-resources","title":"Creating a Link Between Resources","text":"<p>To create a link, you must create a <code>knora-api:LinkValue</code>, which represents metadata about the link. The property that connects the resource to the <code>LinkValue</code> is a link value property, whose name is constructed by adding <code>Value</code> to the name of the link property (see Links Between Resources). The triple representing the direct link between the resources is created automatically. For example, if the link property that should connect the resources is <code>anything:hasOtherThing</code>, we can create a link like this:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasOtherThingValue\": {\n    \"@type\": \"knora-api:LinkValue\",\n    \"knora-api:linkValueHasTargetIri\": {\n      \"@id\": \"http://rdfh.ch/0001/tPfZeNMvRVujCQqbIbvO0A\"\n    }\n  },\n  \"@context\": {\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>As with ordinary values, permissions on links can be specified by adding <code>knora-api:hasPermissions</code>.</p> <p>The response is a JSON-LD document containing:</p> <ul> <li><code>@id</code>: the IRI of the value that was created.</li> <li><code>@type</code>: the value's type.</li> <li><code>knora-api:valueHasUUID</code>, the value's UUID, which remains stable across value versions, unless the link is changed to   point to a different resource, in which case it is considered a new link and gets a new UUID. Changing a link's   metadata, without changing its target, creates a new version of the link value with the same UUID.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-text-value-without-standoff-markup","title":"Creating a Text Value Without Standoff Markup","text":"<p>Use the predicate <code>knora-api:valueAsString</code> of <code>knora-api:TextValue</code>:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasText\": {\n    \"@type\": \"knora-api:TextValue\",\n    \"knora-api:valueAsString\": \"This is a text without markup.\"\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-text-value-with-standoff-markup","title":"Creating a Text Value with Standoff Markup","text":"<p>Currently, the only way to create a text value with standoff markup is to submit it in XML format using an XML-to-standoff mapping. See the overview for more detials.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-text-value-with-standard-mapping","title":"Creating a Text Value with Standard Mapping","text":"<p>To create a value with the standard mapping (<code>http://rdfh.ch/standoff/mappings/StandardMapping</code>), we can make an XML document like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;text&gt;\n    This text links to another &lt;a class=\"salsah-link\" href=\"http://rdfh.ch/0001/another-thing\"&gt;resource&lt;/a&gt;.\n&lt;/text&gt;\n</code></pre> <p>This document can then be embedded in a JSON-LD request, using the predicate <code>knora-api:textValueAsXml</code>:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasText\": {\n    \"@type\": \"knora-api:TextValue\",\n    \"knora-api:textValueAsXml\": \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\\n&lt;text&gt;\\n   This text links to another &lt;a class=\\\"salsah-link\\\" href=\\\"http://rdfh.ch/0001/another-thing\\\"&gt;resource&lt;/a&gt;.\\n&lt;/text&gt;\",\n    \"knora-api:textValueHasMapping\": {\n      \"@id\": \"http://rdfh.ch/standoff/mappings/StandardMapping\"\n    }\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Note that quotation marks and line breaks in the XML must be escaped, and that the IRI of the mapping must be provided.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-a-text-value-with-a-custom-mapping","title":"Creating a Text Value with a Custom Mapping","text":"<p>To create a text value with custom mapping, the following steps are required:</p> <ol> <li>Optionally, an XSL transformation resource (<code>kb:XSLTransformation</code>) can be created that may be defined as the default    transformation of the mapping.</li> <li>The mapping resource (<code>kb:XMLToStandoffMapping</code>) must be created, if it does not already exist.</li> <li>The text value can be created as in the example above, using the mapping resource IRI in <code>kb:textValueHasMapping</code>.</li> </ol> <p>The <code>kb:XSLTransformation</code> resource is a subclass of <code>kb:TextRepresentation</code>, so it has a <code>kb:hasTextFileValue</code> pointing to a <code>kb:TextFileValue</code> which represents the XSLT file stored in SIPI. For more Details, see Creating File Values.</p> <p>The <code>kb:XMLToStandoffMapping</code> resource requires the mapping XML as specified in the custom standoff documentation. If an XSL transformation has been defined, the IRI the transformation can be placed in the <code>&lt;defaultXSLTransformation&gt;</code> tag of the mapping XML.</p> <p>If a mapping has been defined, then requesting the text value will return both the <code>kb:textValueAsXml</code> and the <code>kb:textValueAsHtml</code> properties, where the XML can be used for editing the value, while the HTML can be used to display it. If no mapping has been defined, only <code>kb:textValueAsXml</code> can be returned.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#creating-file-values","title":"Creating File Values","text":"<p>DSP-API supports the storage of certain types of data as files, using SIPI (see FileValue). DSP-API v2 currently supports using SIPI to store the following types of files:</p> <ul> <li>Images: JPEG, JPEG2000, TIFF, or PNG which are stored internally as JPEG2000</li> <li>Documents: PDF</li> <li>Audio: MPEG or Waveform audio file format (.wav, .x-wav, .vnd.wave)</li> <li>Text files: CSV, JSON, ODD, RNG, TXT, XLS, XLSX, XML, XSD, XSL</li> <li>Video files: MP4</li> <li>Archive files: ZIP, TAR, GZIP</li> </ul> <p>Support for other types of files will be added in the future.</p> <p>The following sections describe the steps for creating a file value.</p> <p>Files can be ingested into DSP using SIPI or DSP-INGEST (experimental).</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#upload-files-to-sipi","title":"Upload Files to SIPI","text":"<p>The first step is to upload one or more files to SIPI, using a <code>multipart/form-data</code> request, where <code>sipihost</code> represents the host and port on which SIPI is running:</p> <pre><code>HTTP POST to http://sipihost/upload?token=TOKEN\n</code></pre> <p>The <code>token</code> parameter must provide the JSON Web Token that DSP-API returned when the client logged in. Each body part in the request must contain a parameter <code>filename</code>, providing the file's original filename, which both DSP-API and SIPI will store; these filenames can be descriptive and need not be unique.</p> <p>SIPI stores the file in a temporary location. If the file is an image, it is converted first to JPEG2000 format, and the converted file is stored.</p> <p>SIPI then returns a JSON response that looks something like this:</p> <pre><code>{\n  \"uploadedFiles\": [\n    {\n      \"originalFilename\": \"manuscript-1234-page-1.tiff\",\n      \"internalFilename\": \"3UIsXH9bP0j-BV0D4sN51Xz.jp2\",\n      \"temporaryBaseIIIFUrl\": \"http://sipihost/tmp\"\n    },\n    {\n      \"originalFilename\": \"manuscript-1234-page-2.tiff\",\n      \"internalFilename\": \"2RvJgguglpe-B45EOk0Gx8H.jp2\",\n      \"temporaryBaseIIIFUrl\": \"http://sipihost/tmp\"\n    }\n  ]\n}\n</code></pre> <p>In this example, we uploaded two files to SIPI, so <code>uploadedFiles</code> is an array with two elements. For each file, we have:</p> <ul> <li>the <code>originalFilename</code>, which we submitted when uploading the file</li> <li>the unique <code>internalFilename</code> that SIPI has randomly generated for the file</li> <li>the <code>temporaryBaseIIIFUrl</code>, which we can use to construct a IIIF URL for previewing the file</li> </ul> <p>In the case of an image file, the client may now wish to get a thumbnail of each uploaded image, to allow the user to confirm that the correct files have been uploaded. This can be done by adding IIIF parameters to <code>temporaryBaseIIIFUrl</code>. For example, to get a JPG thumbnail image that is 150 pixels wide, you would add <code>/full/150,/0/default.jpg</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#upload-files-to-dsp-ingest","title":"Upload Files to DSP-INGEST","text":"<p>Support for uploads with DSP-INGEST is now the preferred method of uploading files (and also for ingesting large amounts of data internally).</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#submit-a-file-value-to-dsp-api","title":"Submit A File Value to DSP-API","text":"<p>A DSP-API <code>Representation</code> (i.e. a resource containing information about a file) must always have exactly one file value attached to it. (see Representations). Therefore, a request to create a new file value must always be submitted as part of a request to create a new resource (see Creating a Resource). You can also update a file value in an existing <code>Representation</code>; see Updating a Value.</p> <p>Instead of providing the file's complete metadata to DSP-API, you just provide the unique internal filename generated by SIPI.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#still-images","title":"Still Images","text":"<p>Still Image may be stored in SIPI or in an external IIIF server.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#images-stored-in-sipi","title":"Images stored in SIPI","text":"<p>Here is an example of a request to create a resource of class <code>anything:ThingPicture</code> with a still image stored in SIPI. The resource's class is a subclass of <code>knora-api:StillImageRepresentation</code> and therefore has the property <code>knora-api:hasStillImageFileValue</code>. The file value is of type <code>knora-api:StillImageFileValue</code>:</p> <pre><code>{\n  \"@type\": \"anything:ThingPicture\",\n  \"knora-api:hasStillImageFileValue\": {\n    \"@type\": \"knora-api:StillImageFileValue\",\n    \"knora-api:fileValueHasFilename\": \"3UIsXH9bP0j-BV0D4sN51Xz.jp2\"\n  },\n  \"knora-api:attachedToProject\": {\n    \"@id\": \"http://rdfh.ch/projects/0001\"\n  },\n  \"rdfs:label\": \"test thing\",\n  \"@context\": {\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>In the case of a <code>knora-api:StillImageFileValue</code> DSP-API gets the rest of the file's metadata from SIPI. If the client's request to DSP-API is valid, DSP-API saves the file value in the triplestore and instructs SIPI to move the file to permanent storage. Otherwise, the temporary file that was stored by SIPI is deleted.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#images-stored-in-an-external-iiif-server","title":"Images stored in an external IIIF server","text":"<p>In the case of a Still image stored in an external IIIF server, the request is similar to the one above, but the file value is of type <code>knora-api:StillImageExternalFileValue</code> and the <code>knora-api:externalUrl</code> property is used to provide the URL of the image in the IIIF server:</p> <pre><code>{\n  \"@type\": \"anything:ThingPicture\",\n  \"knora-api:hasStillImageFileValue\": {\n    \"@type\": \"knora-api:StillImageExternalFileValue\",\n    \"knora-api:stillImageFileValueHasExternalUrl\": {\n      \"@type\": \"xsd:anyURI\",\n      \"@value\": \"https://example.com/iiif/3UIsXH9bP0j-BV0D4sN51Xz.jp2/full/max/0/default.jpg\"\n    }\n  },\n  \"knora-api:attachedToProject\": {\n    \"@id\": \"http://rdfh.ch/projects/0001\"\n  },\n  \"rdfs:label\": \"test thing\",\n  \"@context\": {\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>Note</p> <p>For backwards compatibility, we support using <code>knora-api:fileValueHasExternalUrl</code> and  <code>knora-api:stillImageFileValueExternalFileValue</code> properties if the value is submitted as a <code>String</code> literal, i.e.  <code>\"knora-api:stillImageFileValueExternalFileValue\" : \"https://example.com/iiif/3UIsXH9bP0j-BV0D4sN51Xz.jp2/full/max/0/default.jpg\"</code>.</p> <p>Support for <code>String</code> literals and the <code>knora-api:fileValueHasExternalUrl</code> property  is deprecated and will be removed in the future. The <code>knora-api:stillImageFileValueHasExternalUrl</code> property with a <code>xsd:anyURI</code> type  is correct and must be used for reading and writing.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#pdf-documents","title":"PDF Documents","text":"<p>If you're submitting a PDF document, use the resource class <code>knora-api:DocumentRepresentation</code>, which has the property <code>knora-api:hasDocumentFileValue</code>, pointing to a <code>knora-api:DocumentFileValue</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#text-files","title":"Text Files","text":"<p>For a text file, use <code>knora-api:TextRepresentation</code>, which has the property <code>knora-api:hasTextFileValue</code>, pointing to a <code>knora-api:TextFileValue</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#archive-files","title":"Archive Files","text":"<p>For an archive like zip, use <code>knora-api:ArchiveRepresentation</code>, which has the property <code>knora-api:hasArchiveFileValue</code>, pointing to a <code>knora-api:ArchiveFileValue</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#updating-a-value","title":"Updating a Value","text":"<p>To update a value, use this route:</p> <pre><code>HTTP PUT to http://host/v2/values\n</code></pre> <p>Updating a value means creating a new version of an existing value. The new version will have a different IRI. The request is the same as for creating a value, except that the <code>@id</code> of the current value version is given. For example, to update an integer value:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@id\": \"http://rdfh.ch/0001/a-thing/values/vp96riPIRnmQcbMhgpv_Rg\",\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 5\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>The value can be given a comment by using <code>knora-api:valueHasComment</code>. To change only the comment of a value, you can resubmit the existing value with the updated comment.</p> <p>Permissions can be specified by adding <code>knora-api:hasPermissions</code>. Otherwise, the new version has the same permissions as the previous one. To change the permissions on a value, the user must have change rights permission on the value.</p> <p>To update only the permissions on a value, submit it with the new permissions and with its <code>@id</code> and <code>@type</code> but without any other content, like this:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@id\": \"http://rdfh.ch/0001/a-thing/values/vp96riPIRnmQcbMhgpv_Rg\",\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:hasPermissions\": \"CR knora-admin:Creator|V knora-admin:KnownUser\"\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>To update a link, the user must have modify permission on the containing resource as well as on the value.</p> <p>To update a value and give it a custom timestamp, add <code>knora-api:valueCreationDate</code> (an xsd:dateTimeStamp).</p> <p>To update a value and give the new version a custom IRI, add <code>knora-api:newValueVersionIri</code>, like this:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@id\": \"http://rdfh.ch/0001/a-thing/values/vp96riPIRnmQcbMhgpv_Rg\",\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:intValueAsInt\": 21,\n    \"knora-api:newValueVersionIri\": {\n      \"@id\": \"http://rdfh.ch/0001/a-thing/values/int-value-IRI\"\n    }\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>A custom value IRI must be the IRI of the containing resource, followed by a <code>/values/</code> and a custom ID string.</p> <p>The response is a JSON-LD document containing only <code>@id</code> and <code>@type</code>, returning the IRI and type of the new value version.</p> <p>If you submit an outdated value ID in a request to update a value, the response will be an HTTP 404 (Not Found) error.</p> <p>The response to a value update request contains:</p> <ul> <li><code>@id</code>: the IRI of the value that was created.</li> <li><code>@type</code>: the value's type.</li> <li><code>knora-api:valueHasUUID</code>, the value's UUID, which remains stable across value versions, unless the value is a link   value and is changed to point to a different resource, in which case it is considered a new link and gets a new UUID.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#deleting-a-value","title":"Deleting a Value","text":"<p>DSP-API does not normally delete values; instead, it marks them as deleted, which means that they do not appear in normal query results.</p> <p>To mark a value as deleted, use this route:</p> <pre><code>HTTP POST to http://host/v2/values/delete\n</code></pre> <p>The request must include the resource's ID and type, the property that points from the resource to the value, and the value's ID and type. For example:</p> <pre><code>{\n  \"@id\": \"http://rdfh.ch/0001/a-thing\",\n  \"@type\": \"anything:Thing\",\n  \"anything:hasInteger\": {\n    \"@id\": \"http://rdfh.ch/0001/a-thing/values/vp96riPIRnmQcbMhgpv_Rg\",\n    \"@type\": \"knora-api:IntValue\",\n    \"knora-api:deleteComment\": \"This value was created by mistake.\"\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre> <p>The optional property <code>knora-api:deleteComment</code> specifies a comment to be attached to the value, explaining why it has been marked as deleted</p> <p>The optional property <code>knora-api:deleteDate</code> (an xsd:dateTimeStamp) specifies a custom timestamp indicating when the value was deleted. If not specified, the current time is used.</p> <p>The response is a JSON-LD document containing the predicate <code>knora-api:result</code> with a confirmation message.</p>"},{"location":"DSP-API/03-endpoints/api-v2/editing-values/#requesting-deleted-values","title":"Requesting Deleted Values","text":"<p>Values marked as deleted are not found in search queries. But when requesting a resource that has deleted values, these will show up as generic <code>knora-api:DeletedValue</code> values. This value will be similar to the deleted value, having e.g. the same IRI. The <code>DeletedValue</code> will contain the deletion date and optionally the deletion comment.</p> <p>The response to requesting a deleted resource will look as the following example:</p> <pre><code>{\n  \"knora-api:DeletedValue\": [\n    {\n      \"knora-api:versionArkUrl\": {\n        \"@value\": \"http://0.0.0.0:3336/ark:/72163/1/0001/a=thingO/sWSymIzAS_qXqyHLhwbwwAU.20211216T18193124797Z\",\n        \"@type\": \"xsd:anyURI\"\n      },\n      \"knora-api:userHasPermission\": \"RV\",\n      \"knora-api:valueCreationDate\": {\n        \"@value\": \"2021-12-16T18:19:31.247970Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"knora-api:deleteDate\": {\n        \"@type\": \"xsd:dateTimeStamp\",\n        \"@value\": \"2021-12-16T18:20:02.550828Z\"\n      },\n      \"knora-api:attachedToUser\": {\n        \"@id\": \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n      },\n      \"knora-api:valueHasUUID\": \"sWSymIzAS_qXqyHLhwbwwA\",\n      \"knora-api:hasPermissions\": \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:KnownUser|RV knora-admin:UnknownUser\",\n      \"knora-api:isDeleted\": true,\n      \"@type\": \"knora-api:DeletedValue\",\n      \"http://www.knora.org/ontology/knora-base#DeletedValue\": \"DeletedValue\",\n      \"@id\": \"http://rdfh.ch/0001/a-thing/values/DrXts3Up3DijGriI403nhg\",\n      \"knora-api:deleteComment\": \"This value is obsolete\",\n      \"knora-api:arkUrl\": {\n        \"@value\": \"http://0.0.0.0:3336/ark:/72163/1/0001/a=thingO/sWSymIzAS_qXqyHLhwbwwAU\",\n        \"@type\": \"xsd:anyURI\"\n      }\n    },\n    {}\n  ]\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/getting-lists/","title":"Getting Lists","text":""},{"location":"DSP-API/03-endpoints/api-v2/getting-lists/#getting-a-complete-list","title":"Getting a complete List","text":"<p>In order to request a complete list, make a HTTP GET request to the <code>lists</code> route,  appending the Iri of the list's root node (URL-encoded):</p> <pre><code>HTTP GET to http://host/v2/lists/listRootNodeIri\n</code></pre> <p>Lists are only returned in the complex schema.  The response to a list request is a <code>List</code> (see interface <code>List</code> in module <code>ListResponse</code>). </p>"},{"location":"DSP-API/03-endpoints/api-v2/getting-lists/#getting-a-single-node","title":"Getting a single Node","text":"<p>In order to request a single node of a list, make a HTTP GET request to the <code>node</code> route,  appending the node's Iri (URL-encoded):</p> <pre><code>HTTP GET to http://host/v2/node/nodeIri\n</code></pre> <p>Nodes are only returned in the complex schema.  The response to a node request is a <code>ListNode</code> (see interface <code>List</code> in module <code>ListResponse</code>).</p>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/","title":"Introduction: Using API v2","text":""},{"location":"DSP-API/03-endpoints/api-v2/introduction/#api-v2-path-segment","title":"API v2 Path Segment","text":"<p>Every request to API v2 includes <code>v2</code> as a path segment, e.g. <code>http://host/v2/resources/http%3A%2F%2Frdfh.ch%2Fc5058f3a</code>. Accordingly, requests using any other version of the API will require another path segment.</p>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/#response-formats","title":"Response Formats","text":"<p>All API v2 responses can be returned in JSON-LD, Turtle, or RDF/XML, using HTTP content negotiation. The client can request these formats using the following MIME types:</p> Format MIME Type JSON-LD <code>application/ld+json</code> Turtle <code>text/turtle</code> RDF/XML <code>application/rdf+xml</code>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/#json-ld","title":"JSON-LD","text":"<p>Our preferred format for data exchange is JSON-LD. JSON-LD allows the DSP-API server to provide responses that are relatively easy for automated processes to interpret, since their structure and semantics is explicitly defined. For example, each user-created Knora resource property is identified by an IRI, which can be dereferenced to get more information about it (e.g. its label in different languages). Moreover, each value has a type represented by an IRI. These are either standard RDF types (e.g. XSD datatypes) or more complex types whose IRIs can be dereferenced to get more information about their structure.</p> <p>At the same time, JSON-LD responses are relatively easy for software developers to work with, and are more concise and easier to read than the equivalent XML. Items in a response can have human-readable names, which can nevertheless be expanded to full IRIs. Also, while a format such as Turtle just provides a set of RDF triples, an equivalent JSON-LD response can explicitly provide data in a hierarchical structure, with objects nested inside other objects.</p>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/#hierarchical-vs-flat-json-ld","title":"Hierarchical vs. Flat JSON-LD","text":"<p>The client can choose between hierarchical and flat JSON-LD. In hierarchical JSON-LD, entities with IRIs are inlined (nested) where they are used. If the same entity is used in more than one place, it is inlined only once, and other uses just refer to its IRI. In Knora's flat JSON-LD, all entities with IRIs are located at the top level of the document (in a <code>@graph</code> if there is more than one of them). This setting does not affect blank nodes, which are always inlined (unlike in standard flat JSON-LD). DSP ontologies are always returned in the <code>flat</code> rendering; other kinds of responses default to <code>hierarchical</code>. To use this setting, submit the HTTP header <code>X-Knora-JSON-LD-Rendering</code> with the value <code>hierarchical</code> or <code>flat</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/#knora-iris","title":"Knora IRIs","text":"<p>Resources and entities are identified by IRIs. The format of these IRIs is explained in Knora IRIs.</p>"},{"location":"DSP-API/03-endpoints/api-v2/introduction/#api-schema","title":"API Schema","text":"<p>DSP-API v2 uses RDF data structures that are simpler than the ones actually stored in the triplestore, and more suitable for the development of client software. Thus we refer to the internal schema of data as it is stored in the triplestore, and to external schemas which are used to represent that data in API v2.</p> <p>DSP-API v2 offers a complex schema and a simple one. The main difference is that the complex schema exposes the complexity of value objects, while the simple version does not. A client that needs to edit values must use the complex schema in order to obtain the IRI of each value. A client that reads but does not update data can use the simplified schema. The simple schema is mainly intended to facilitate interoperability with other RDF-based systems in the context of Linked Open Data. It is therefore designed to use the simplest possible datatypes and to require minimal knowledge of Knora.</p> <p>In either case, the client deals only with data whose structure and semantics are defined by external DSP-API ontologies, which are distinct from the internal ontologies that are used to store date in the triplestore. The Knora API server automatically converts back and forth between these internal and external representations. This approach encapsulates the internals and adds a layer of abstraction to them.</p> <p>IRIs representing ontologies and ontology entities are different in different schemas; see Knora IRIs.</p> <p>Some API operations inherently require the client to accept responses in the complex schema. For example, if an ontology is requested using an IRI indicating the simple schema, the ontology will be returned in the simple schema (see Querying, Creating, and Updating Ontologies).</p> <p>Other API operations can return data in either schema. In this case, the complex schema is used by default in the response, unless the request specifically asks for the simple schema. The client can specify the desired schema by using an HTTP header or a URL parameter:</p> <ul> <li>the HTTP header <code>X-Knora-Accept-Schema</code></li> <li>the URL parameter <code>schema</code></li> </ul> <p>Both the HTTP header and the URL parameter accept the values <code>simple</code> or <code>complex</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/","title":"Knora IRIs","text":"<p>The IRIs used in Knora repositories and in the DSP-API v2 follow certain conventions.</p>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#project-short-codes","title":"Project Short-Codes","text":"<p>A project short-code is a hexadecimal number of at least four digits, assigned by the DaSCH to uniquely identify a Knora project regardless of where it is hosted. The IRIs of ontologies that are built into Knora do not contain shortcodes; these ontologies implicitly belong to the Knora system project.</p> <p>A user-created ontology IRI must always include its project shortcode.</p> <p>Project ID <code>0000</code> is reserved for shared ontologies (see Shared Ontologies).</p> <p>The range of project IDs from <code>0001</code> to <code>00FF</code> inclusive is reserved for local testing. Thus, the first useful project will be <code>0100</code>.</p> <p>In the beginning, Unil will use the IDs <code>0100</code> to <code>07FF</code>, and Unibas <code>0800</code> to <code>08FF</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#iris-for-ontologies-and-ontology-entities","title":"IRIs for Ontologies and Ontology Entities","text":""},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#internal-ontology-iris","title":"Internal Ontology IRIs","text":"<p>Knora makes a distinction between internal and external ontologies. Internal ontologies are used in the triplestore, while external ontologies are used in API v2. For each internal ontology, there is a corresponding external ontology. Some internal ontologies are built into Knora, while others are user-created. Knora automatically generates external ontologies based on user-created internal ontologies.</p> <p>Each internal ontology has an IRI, which is also the IRI of the named graph that contains the ontology in the triplestore. An internal ontology IRI has the form:</p> <pre><code>http://www.knora.org/ontology/PROJECT_SHORTCODE/ONTOLOGY_NAME\n</code></pre> <p>For example, the internal ontology IRI based on project code <code>0001</code> and ontology name <code>example</code> would be:</p> <pre><code>http://www.knora.org/ontology/0001/example\n</code></pre> <p>An ontology name must be a valid XML NCName and must be URL safe. The following names are reserved for built-in internal DSP ontologies:</p> <ul> <li><code>knora-base</code></li> <li><code>standoff</code></li> <li><code>salsah-gui</code></li> </ul> <p>Names starting with <code>knora</code> are reserved for future built-in Knora ontologies. A user-created ontology name may not start with the letter <code>v</code> followed by a digit, and may not contain these reserved words:</p> <ul> <li><code>knora</code></li> <li><code>ontology</code></li> <li><code>simple</code></li> <li><code>shared</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#external-ontology-iris","title":"External Ontology IRIs","text":"<p>Unlike internal ontology IRIs, external ontology IRIs are meant to be dereferenced as URLs. When an ontology IRI is dereferenced, the ontology itself can be served either in a machine-readable format or as human-readable documentation.</p> <p>The IRI of an external Knora ontology has the form:</p> <pre><code>http://HOST[:PORT]/ontology/PROJECT_SHORTCODE/ONTOLOGY_NAME/API_VERSION\n</code></pre> <p>For built-in and shared ontologies, the host is always <code>api.knora.org</code>. Otherwise, the hostname and port configured in <code>application.conf</code> under <code>app.http.knora-api.host</code> and <code>app.http.knora-api.http-port</code> are used (the port is omitted if it is 80).</p> <p>This means that when a built-in or shared external ontology IRI is dereferenced, the ontology can be served by a DSP-API server running at <code>api.knora.org</code>. When the external IRI of a non-shared, project-specific ontology is dereferenced, the ontology can be served by Knora that hosts the project. During development and testing, this could be <code>localhost</code>.</p> <p>The name of an external ontology is the same as the name of the corresponding internal ontology, with one exception: the external form of <code>knora-base</code> is called <code>knora-api</code>.</p> <p>The API version identifier indicates not only the version of the API, but also an API 'schema'. The DSP-API v2 is available in two schemas:</p> <ul> <li>A complex schema, which is suitable both for reading and for editing   data. The complex schema represents values primarily as complex   objects. Its version identifier is <code>v2</code>.</li> <li>A simple schema, which is suitable for reading data but not for   editing it. The simple schema facilitates interoperability between   DSP ontologies and non-DSP ontologies, since it represents   values primarily as literals. Its version identifier is <code>simple/v2</code>.</li> </ul> <p>Other schemas could be added in the future for more specific use cases.</p> <p>When requesting an ontology, the client requests a particular schema. (This will also be true of most DSP-API v2 requests: the client will be able to specify which schema the response should be provided in.)</p> <p>For example, suppose a DSP-API server is running at <code>knora.example.org</code> and hosts an ontology whose internal IRI is <code>http://www.knora.org/ontology/0001/example</code>. That ontology can then be requested using either of these IRIs:</p> <ul> <li><code>http://knora.example.org/ontology/0001/example/v2</code> (in the complex schema)</li> <li><code>http://knora.example.org/ontology/0001/example/simple/v2</code> (in the simple schema)</li> </ul> <p>While the internal <code>example</code> ontology refers to definitions in <code>knora-base</code>, the external <code>example</code> ontology that is served by the API refers instead to a <code>knora-api</code> ontology, whose IRI depends on the schema being used:</p> <ul> <li><code>http://api.knora.org/ontology/knora-api/v2</code> (in the complex schema)</li> <li><code>http://api.knora.org/ontology/knora-api/simple/v2</code> (in the simple schema)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#ontology-entity-iris","title":"Ontology Entity IRIs","text":"<p>DSP ontologies use 'hash namespaces' (see URI Namespaces). This means that the IRI of an ontology entity (a class or property definition) is constructed by adding a hash character (<code>#</code>) to the ontology IRI, followed by the name of the entity. In Knora, an entity name must be a valid XML NCName. Thus, if there is a class called <code>ExampleThing</code> in an ontology whose internal IRI is <code>http://www.knora.org/ontology/0001/example</code>, that class has the following IRIs:</p> <ul> <li><code>http://www.knora.org/ontology/0001/example#ExampleThing</code> (in the internal ontology)</li> <li><code>http://HOST[:PORT]/ontology/0001/example/v2#ExampleThing</code> (in the API v2 complex schema)</li> <li><code>http://HOST[:PORT]/ontology/0001/example/simple/v2#ExampleThing</code> (in the API v2 simple schema)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#shared-ontology-iris","title":"Shared Ontology IRIs","text":"<p>As explained in Shared Ontologies, a user-created ontology can be defined as shared, meaning that it can be used by multiple projects, and that its creators will not change it in ways that could affect other ontologies or data that are based on it.</p> <p>There is currently one project for shared ontologies:</p> <pre><code>http://www.knora.org/ontology/knora-base#DefaultSharedOntologiesProject\n</code></pre> <p>Its project code is <code>0000</code>. Additional projects for shared ontologies may be supported in future.</p> <p>The internal and external IRIs of shared ontologies always use the hostname <code>api.knora.org</code>, and have an additional segment, <code>shared</code>, after <code>ontology</code>. The project code can be omitted, in which case the default shared ontology project, <code>0000</code>, is assumed. The sample shared ontology, <code>example-box</code>, has these IRIs:</p> <ul> <li><code>http://www.knora.org/ontology/shared/example-box</code> (internal)</li> <li><code>http://api.knora.org/ontology/shared/example-box/v2</code> (external, complex schema)</li> <li><code>http://api.knora.org/ontology/shared/example-box/simple/v2</code> (external, simple schema)</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/knora-iris/#iris-for-data","title":"IRIs for Data","text":"<p>Knora generates IRIs for data that it creates in the triplestore. Each generated data IRI contains one or more UUID identifiers to make it unique. To keep data IRIs relatively short, each UUID is base64url-encoded, without padding; thus each UUID is a 22-character string. DSP-API supports UUID version 4 or 5.</p> <p>Data IRIs are not currently intended to be dereferenced as URLs. Instead, each Knora resource has a separate permalink.</p> <p>A Knora value does not have a stable IRI throughout its version history. Each time a new version of a value is made, the new version gets a new IRI. Therefore, it would not make sense to publish Knora value IRIs. When designing ontologies for Knora projects, keep in mind that if you want something be directly citable, it needs to be a resource, not a value.</p> <p>The formats of generated data IRIs for different types of objects are as follows:</p> <ul> <li>Resource: <code>http://rdfh.ch/PROJECT_SHORTCODE/RESOURCE_UUID</code>.</li> <li>Value:   <code>http://rdfh.ch/PROJECT_SHORTCODE/RESOURCE_UUID/values/VALUE_UUID</code></li> <li>Standoff tag:   <code>http://rdfh.ch/PROJECT_SHORTCODE/RESOURCE_UUID/values/VALUE_UUID/STANDOFF_UUID</code></li> <li>XML-to-standoff mapping:   <code>http://rdfh.ch/projects/PROJECT_SHORTCODE/mappings/MAPPING_NAME</code></li> <li>XML-to-standoff mapping element:   <code>http://rdfh.ch/projects/PROJECT_SHORTCODE/mappings/MAPPING_NAME/elements/MAPPING_ELEMENT_UUID</code></li> <li>Project: <code>http://rdfh.ch/projects/PROJECT_UUID</code></li> <li>Group: <code>http://rdfh.ch/groups/PROJECT_SHORTCODE/GROUP_UUID</code></li> <li>Permission:   <code>http://rdfh.ch/permissions/PROJECT_SHORTCODE/PERMISSION_UUID</code></li> <li>Lists: <code>http://rdfh.ch/lists/PROJECT_SHORTCODE/LIST_UUID</code></li> <li>User: <code>http://rdfh.ch/users/USER_UUID</code></li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/","title":"Querying, Creating, and Updating Ontologies","text":""},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#querying-ontology-information","title":"Querying Ontology Information","text":"<p>Before reading this document, you should have a basic understanding of DSP-API v2 external ontology schemas (see API Schema).</p> <p>Each request returns a single RDF graph, which can be represented in JSON-LD, Turtle, or RDF/XML, using HTTP content negotiation (see Response Formats).</p> <p>The response format uses prefixes to shorten IRIs, making them more human-readable. A client may wish to convert these to full IRIs for processing. This can be done with responses in JSON-LD by using a library that implements the JSON-LD API to compact the document with an empty JSON-LD <code>@context</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#querying-ontology-metadata","title":"Querying Ontology Metadata","text":"<p>Requests for ontology metadata can return information about more than one ontology, unlike other requests for ontology information. To get metadata about all ontologies:</p> <pre><code>HTTP GET to http://host/v2/ontologies/metadata\n</code></pre> <p>If you submit a project IRI in the <code>X-Knora-Accept-Project</code> header, only the ontologies for that project will be returned.</p> <p>The response is in the complex API v2 schema. Sample response:</p> <pre><code>{\n  \"@graph\": [\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2017-12-19T15:23:42.166Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The anything ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0001\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0001/anything/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The something ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0001\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0001/something/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The images demo ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/00FF\" \n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/00FF/images/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The BEOL ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/yTerZGyxjZVqFMNNKXCDPF\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0801/beol/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The Biblio ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/yTerZGyxjZVqFMNNKXCDPF\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0801/biblio/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The Newton-Project ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/yTerZGyxjZVqFMNNKXCDPF\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0801/newton/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The incunabula ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0803\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0803/incunabula/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The dokubib ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0804\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/0804/dokubib/v2\"\n    },\n    {\n      \"knora-api:lastModificationDate\": {\n        \"@value\": \"2022-03-23T07:14:17.445208Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n      },\n      \"rdfs:label\": \"The Anton Webern project ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/08AE\"\n      },\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://0.0.0.0:3333/ontology/08AE/webern/v2\"\n    },\n    {\n      \"rdfs:label\": \"The Knora admin ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://www.knora.org/ontology/knora-admin#SystemProject\"\n      },\n      \"knora-api:isBuiltIn\": true,\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://api.knora.org/ontology/knora-admin/v2\"\n    },\n    {\n      \"rdfs:label\": \"The knora-api ontology in the complex schema\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://www.knora.org/ontology/knora-admin#SystemProject\"\n      },\n      \"knora-api:isBuiltIn\": true,\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://api.knora.org/ontology/knora-api/v2\"\n    },\n    {\n      \"rdfs:label\": \"The salsah-gui ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://www.knora.org/ontology/knora-admin#SystemProject\"\n      },\n      \"knora-api:isBuiltIn\": true,\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://api.knora.org/ontology/salsah-gui/v2\"\n    },\n    {\n      \"rdfs:label\": \"The standoff ontology\",\n      \"knora-api:attachedToProject\": {\n        \"@id\": \"http://www.knora.org/ontology/knora-admin#SystemProject\"\n      },\n      \"knora-api:isBuiltIn\": true,\n      \"@type\": \"owl:Ontology\",\n      \"@id\": \"http://api.knora.org/ontology/standoff/v2\"\n    }\n  ],\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"owl\": \"http://www.w3.org/2002/07/owl#\"\n  }\n}\n</code></pre> <p>To get metadata about the ontologies that belong to one or more particular projects:</p> <pre><code>HTTP GET to http://host/v2/ontologies/metadata/PROJECT_IRI[/PROJECT_IRI...]\n</code></pre> <p>The project IRIs must be URL-encoded.</p> <p>Example response for the <code>anything</code> test project (project IRI <code>http://rdfh.ch/projects/0001</code>):</p> <pre><code>{\n  \"@id\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"http://rdfh.ch/projects/0001\"\n  },\n  \"knora-api:lastModificationDate\": \"2017-12-19T15:23:42.166Z\",\n  \"rdfs:label\" : \"The anything ontology\",\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\"\n  }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#querying-an-ontology","title":"Querying an Ontology","text":"<p>An ontology can be queried either by using an API route directly or by simply dereferencing the ontology IRI. The API route is as follows:</p> <pre><code>HTTP GET to http://host/v2/ontologies/allentities/ONTOLOGY_IRI\n</code></pre> <p>The ontology IRI must be URL-encoded, and may be in either the complex or the simple schema. The response will be in the same schema. For example, if the server is running on <code>0.0.0.0:3333</code>, you can request the <code>knora-api</code> ontology in the complex schema as follows:</p> <pre><code>HTTP GET to http://0.0.0.0:3333/v2/ontologies/allentities/http%3A%2F%2Fapi.knora.org%2Fontology%2Fknora-api%2Fv2\n</code></pre> <p>By default, this returns the ontology in JSON-LD; to request Turtle or RDF/XML, add an HTTP <code>Accept</code> header (see Response Formats).</p> <p>If the client dereferences a project-specific ontology IRI as a URL, the DSP-API server running on the hostname in the IRI will serve the ontology. For example, if the server is running on <code>0.0.0.0:3333</code>, the IRI <code>http://0.0.0.0:3333/ontology/00FF/images/simple/v2</code> can be dereferenced to request the <code>images</code> sample ontology in the simple schema.</p> <p>If the client dereferences a built-in Knora ontology, such as <code>http://api.knora.org/ontology/knora-api/simple/v2</code>, there must be a DSP-API server running at <code>api.knora.org</code> that can serve the ontology. The DaSCH intends to run such as server. For testing, you can configure your local <code>/etc/hosts</code> file to resolve <code>api.knora.org</code> as <code>localhost</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#differences-between-internal-and-external-ontologies","title":"Differences Between Internal and External Ontologies","text":"<p>The external ontologies used by DSP-API v2 are different to the internal ontologies that are actually stored in the triplestore (see API Schema). In general, the external ontologies use simpler data structures, but they also provide additional information to make it easier for clients to use them. This is illustrated in the examples in the next sections.</p> <p>The internal predicates <code>knora-base:subjectClassConstraint</code> and <code>knora-base:objectClassConstraint</code> (see Constraints on the Types of Property Subjects and Objects) are represented as <code>knora-api:subjectType</code> and <code>knora-api:objectType</code> in external ontologies.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#json-ld-representation-of-an-ontology-in-the-simple-schema","title":"JSON-LD Representation of an Ontology in the Simple Schema","text":"<p>The simple schema is suitable for client applications that need to read but not update data in Knora. For example, here is the response for the <code>images</code> sample ontology in the simple schema, <code>http://0.0.0.0:3333/ontology/00FF/images/simple/v2</code> (simplified for clarity):</p> <pre><code>{\n  \"@id\" : \"http://0.0.0.0:3333/ontology/00FF/images/simple/v2\",\n  \"@type\" : \"owl:Ontology\",\n  \"rdfs:label\" : \"The images demo ontology\",\n  \"@graph\" : [ {\n    \"@id\" : \"images:bild\",\n    \"@type\" : \"owl:Class\",\n    \"knora-api:resourceIcon\" : \"bild.png\",\n    \"rdfs:comment\" : \"An image of the demo image collection\",\n    \"rdfs:label\" : \"Image\",\n    \"rdfs:subClassOf\" : [ {\n      \"@id\" : \"knora-api:StillImageRepresentation\"\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:creationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasIncomingLink\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkTo\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:minCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStillImageFile\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:lastModificationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"rdfs:label\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:description\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:erfassungsdatum\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:urheber\"\n      }\n    } ]\n  }, {\n    \"@id\" : \"images:description\",\n    \"@type\" : \"owl:DatatypeProperty\",\n    \"knora-api:objectType\" : {\n      \"@id\" : \"xsd:string\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"rdfs:label\" : \"Description\",\n    \"rdfs:subPropertyOf\" : [ {\n      \"@id\" : \"knora-api:hasValue\"\n    }, {\n      \"@id\" : \"http://purl.org/dc/terms/description\"\n    } ]\n  }, {\n    \"@id\" : \"images:erfassungsdatum\",\n    \"@type\" : \"owl:DatatypeProperty\",\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:Date\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"rdfs:label\" : \"Date of acquisition\",\n    \"rdfs:subPropertyOf\" : [ {\n      \"@id\" : \"knora-api:hasValue\"\n    }, {\n      \"@id\" : \"http://purl.org/dc/terms/date\"\n    } ]\n  }, {\n    \"@id\" : \"images:firstname\",\n    \"@type\" : \"owl:DatatypeProperty\",\n    \"knora-api:objectType\" : {\n      \"@id\" : \"xsd:string\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"rdfs:comment\" : \"First name of a person\",\n    \"rdfs:label\" : \"First name\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasValue\"\n    }\n  }, {\n    \"@id\" : \"images:lastname\",\n    \"@type\" : \"owl:DatatypeProperty\",\n    \"knora-api:objectType\" : {\n      \"@id\" : \"xsd:string\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"rdfs:comment\" : \"Last name of a person\",\n    \"rdfs:label\" : \"Name\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasValue\"\n    }\n  }, {\n    \"@id\" : \"images:person\",\n    \"@type\" : \"owl:Class\",\n    \"knora-api:resourceIcon\" : \"person.png\",\n    \"rdfs:comment\" : \"Person\",\n    \"rdfs:label\" : \"Person\",\n    \"rdfs:subClassOf\" : [ {\n      \"@id\" : \"knora-api:Resource\"\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:creationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasIncomingLink\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkTo\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:lastModificationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"rdfs:label\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:lastname\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:firstname\"\n      }\n    } ]\n  }, {\n    \"@id\" : \"images:urheber\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:objectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"rdfs:comment\" : \"An entity primarily responsible for making the resource. Examples of a Creator include a person, an organization, or a service. Typically, the name of a Creator should be used to indicate the entity.\",\n    \"rdfs:label\" : \"Creator\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasLinkTo\"\n    }\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"images\" : \"http://0.0.0.0:3333/ontology/00FF/images/simple/v2#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/simple/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>The response format is an RDF graph. The top level object describes the ontology itself, providing its IRI (in the <code>@id</code> member) and its <code>rdfs:label</code>. The <code>@graph</code> member (see Named Graphs in the JSON-LD specification) contains an array of entities that belong to the ontology.</p> <p>In a class definition, cardinalities for properties of the class are represented as in OWL, using objects of type <code>owl:Restriction</code>. The supported cardinalities are the ones indicated in OWL Cardinalities.</p> <p>The class definitions include cardinalities that are directly defined on each class, as well as cardinalities inherited from base classes. For example, we can see cardinalities inherited from <code>knora-api:Resource</code>, such as <code>knora-api:hasStandoffLinkTo</code> and <code>http://schema.org/name</code> (which represents <code>rdfs:label</code>).</p> <p>In the simple schema, Knora value properties can be datatype properties. The <code>knora-base:objectType</code> of a Knora value property such as <code>images:description</code> is a literal datatype, in this case <code>xsd:string</code>. Moreover, <code>images:description</code> is a subproperty of the standard property <code>dcterms:description</code>, whose object can be a literal value. A client that understands <code>rdfs:subPropertyOf</code>, and is familiar with <code>dcterms:description</code>, can then work with <code>images:description</code> on the basis of its knowledge about <code>dcterms:description</code>.</p> <p>By default, values for <code>rdfs:label</code> and <code>rdfs:comment</code> are returned only in the user's preferred language, or in the system default language. To obtain these values in all available languages, add the URL parameter <code>?allLanguages=true</code>. For example, with this parameter, the definition of <code>images:description</code> becomes:</p> <pre><code>{\n  \"@id\" : \"images:description\",\n  \"@type\" : \"owl:DatatypeProperty\",\n  \"knora-api:objectType\" : {\n    \"@id\" : \"xsd:string\"\n  },\n  \"knora-api:subjectType\" : {\n    \"@id\" : \"images:bild\"\n  },\n  \"rdfs:label\" : [ {\n    \"@language\" : \"en\",\n    \"@value\" : \"Description\"\n  }, {\n    \"@language\" : \"de\",\n    \"@value\" : \"Beschreibung\"\n  }, {\n    \"@language\" : \"fr\",\n    \"@value\" : \"Description\"\n  }, {\n    \"@language\" : \"it\",\n    \"@value\" : \"Descrizione\"\n  } ],\n  \"rdfs:subPropertyOf\" : [ {\n    \"@id\" : \"knora-api:hasValue\"\n  }, {\n    \"@id\" : \"http://purl.org/dc/terms/description\"\n  } ]\n}\n</code></pre> <p>To find out more about the <code>knora-api</code> entities used in the response, the client can request the <code>knora-api</code> ontology in the simple schema: <code>http://api.knora.org/ontology/knora-api/simple/v2</code>. For example, <code>images:erfassungsdatum</code> has a <code>knora-api:objectType</code> of <code>knora-api:Date</code>, which is a subtype of <code>xsd:string</code> with a Knora-specific, human-readable format. In the <code>knora-api</code> simple ontology, there is a definition of this type:</p> <pre><code>{\n  \"@id\" : \"http://api.knora.org/ontology/knora-api/simple/v2\",\n  \"@type\" : \"owl:Ontology\",\n  \"rdfs:label\" : \"The knora-api ontology in the simple schema\",\n  \"@graph\" : [ {\n    \"@id\" : \"knora-api:Date\",\n    \"@type\" : \"rdfs:Datatype\",\n    \"rdfs:comment\" : \"Represents a date as a period with different possible precisions.\",\n    \"rdfs:label\" : \"Date literal\",\n    \"rdfs:subClassOf\" : {\n      \"@type\" : \"rdfs:Datatype\",\n      \"owl:onDatatype\" : {\n        \"@id\" : \"xsd:string\"\n      },\n      \"owl:withRestrictions\" : {\n        \"xsd:pattern\" : \"(GREGORIAN|JULIAN|ISLAMIC):\\\\d{1,4}(-\\\\d{1,2}(-\\\\d{1,2})?)?( BC| AD| BCE| CE)?(:\\\\d{1,4}(-\\\\d{1,2}(-\\\\d{1,2})?)?( BC| AD| BCE| CE)?)?\"\n      }\n    }\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/simple/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#json-ld-representation-of-an-ontology-in-the-complex-schema","title":"JSON-LD Representation of an Ontology in the Complex Schema","text":"<p>The complex schema is suitable for client applications that need to update data in Knora. For example, here is the response for the <code>images</code> sample ontology in the complex schema, <code>http://0.0.0.0:3333/ontology/00FF/images/v2</code> (simplified for clarity):</p> <pre><code>{\n  \"@id\" : \"http://0.0.0.0:3333/ontology/00FF/images/v2\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"http://rdfh.ch/projects/00FF\"\n  },\n  \"rdfs:label\" : \"The images demo ontology\",\n  \"@graph\" : [ {\n    \"@id\" : \"images:bild\",\n    \"@type\" : \"owl:Class\",\n    \"knora-api:canBeInstantiated\" : true,\n    \"knora-api:isResourceClass\" : true,\n    \"knora-api:resourceIcon\" : \"bild.png\",\n    \"rdfs:comment\" : \"An image of the demo image collection\",\n    \"rdfs:label\" : \"Image\",\n    \"rdfs:subClassOf\" : [ {\n      \"@id\" : \"knora-api:StillImageRepresentation\"\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:attachedToProject\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:attachedToUser\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:creationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasIncomingLink\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasPermissions\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkTo\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkToValue\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStillImageFileValue\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:lastModificationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"rdfs:label\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 3,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:description\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 8,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:erfassungsdatum\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 12,\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:urheber\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 12,\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:urheberValue\"\n      }\n    } ]\n  }, {\n    \"@id\" : \"images:description\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:TextValue\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"salsah-gui:guiAttribute\" : [ \"rows=10\", \"width=95%\", \"wrap=soft\" ],\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:Textarea\"\n    },\n    \"rdfs:label\" : \"Description\",\n    \"rdfs:subPropertyOf\" : [ {\n      \"@id\" : \"knora-api:hasValue\"\n    }, {\n      \"@id\" : \"http://purl.org/dc/terms/description\"\n    } ]\n  }, {\n    \"@id\" : \"images:erfassungsdatum\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:DateValue\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:Date\"\n    },\n    \"rdfs:label\" : \"Date of acquisition\",\n    \"rdfs:subPropertyOf\" : [ {\n      \"@id\" : \"knora-api:hasValue\"\n    }, {\n      \"@id\" : \"http://purl.org/dc/terms/date\"\n    } ]\n  }, {\n    \"@id\" : \"images:firstname\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:TextValue\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"salsah-gui:guiAttribute\" : [ \"maxlength=32\", \"size=32\" ],\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:SimpleText\"\n    },\n    \"rdfs:comment\" : \"First name of a person\",\n    \"rdfs:label\" : \"First name\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasValue\"\n    }\n  }, {\n    \"@id\" : \"images:lastname\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:TextValue\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"salsah-gui:guiAttribute\" : [ \"maxlength=32\", \"size=32\" ],\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:SimpleText\"\n    },\n    \"rdfs:comment\" : \"Last name of a person\",\n    \"rdfs:label\" : \"Name\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasValue\"\n    }\n  }, {\n    \"@id\" : \"images:person\",\n    \"@type\" : \"owl:Class\",\n    \"knora-api:canBeInstantiated\" : true,\n    \"knora-api:isResourceClass\" : true,\n    \"knora-api:resourceIcon\" : \"person.png\",\n    \"rdfs:comment\" : \"Person\",\n    \"rdfs:label\" : \"Person\",\n    \"rdfs:subClassOf\" : [ {\n      \"@id\" : \"knora-api:Resource\"\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:attachedToProject\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:attachedToUser\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:creationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasIncomingLink\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasPermissions\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkTo\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:minCardinality\" : 0,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:hasStandoffLinkToValue\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:maxCardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"knora-api:lastModificationDate\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"knora-api:isInherited\" : true,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"rdfs:label\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 0,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:lastname\"\n      }\n    }, {\n      \"@type\" : \"owl:Restriction\",\n      \"salsah-gui:guiOrder\" : 1,\n      \"owl:cardinality\" : 1,\n      \"owl:onProperty\" : {\n        \"@id\" : \"images:firstname\"\n      }\n    } ]\n  }, {\n    \"@id\" : \"images:urheber\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isLinkProperty\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"images:person\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"salsah-gui:guiAttribute\" : \"numprops=2\",\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:Searchbox\"\n    },\n    \"rdfs:comment\" : \"An entity primarily responsible for making the resource. Examples of a Creator include a person, an organization, or a service. Typically, the name of a Creator should be used to indicate the entity.\",\n    \"rdfs:label\" : \"Creator\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasLinkTo\"\n    }\n  }, {\n    \"@id\" : \"images:urheberValue\",\n    \"@type\" : \"owl:ObjectProperty\",\n    \"knora-api:isEditable\" : true,\n    \"knora-api:isLinkValueProperty\" : true,\n    \"knora-api:isResourceProperty\" : true,\n    \"knora-api:objectType\" : {\n      \"@id\" : \"knora-api:LinkValue\"\n    },\n    \"knora-api:subjectType\" : {\n      \"@id\" : \"images:bild\"\n    },\n    \"salsah-gui:guiAttribute\" : \"numprops=2\",\n    \"salsah-gui:guiElement\" : {\n      \"@id\" : \"salsah-gui:Searchbox\"\n    },\n    \"rdfs:comment\" : \"An entity primarily responsible for making the resource. Examples of a Creator include a person, an organization, or a service. Typically, the name of a Creator should be used to indicate the entity.\",\n    \"rdfs:label\" : \"Creator\",\n    \"rdfs:subPropertyOf\" : {\n      \"@id\" : \"knora-api:hasLinkToValue\"\n    }\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"images\" : \"http://0.0.0.0:3333/ontology/00FF/images/v2#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"salsah-gui\" : \"http://api.knora.org/ontology/salsah-gui/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>In the complex schema, all Knora value properties are object properties, whose objects are IRIs, each of which uniquely identifies a value that contains metadata and can potentially be edited. The <code>knora-base:objectType</code> of a Knora value property such as <code>images:description</code> is a Knora value class, in this case <code>knora-api:TextValue</code>. Similarly, <code>images:erfassungsdatum</code> has a <code>knora-api:objectType</code> of <code>knora-api:DateValue</code>, which has a more complex structure than the <code>knora-api:Date</code> datatype shown in the previous section. A client can find out more about these value classes by requesting the <code>knora-api</code> ontology in the complex schema, <code>http://api.knora.org/ontology/knora-api/v2</code>.</p> <p>Moreover, additional information is provided in the complex schema, to help clients that wish to create or update resources and values. A Knora resource class that can be instantiated is identified with the boolean properties <code>knora-api:isResourceClass</code> and <code>knora-api:canBeInstantiated</code>, to distinguish it from built-in abstract classes. Knora resource properties whose values can be edited by clients are identified with <code>knora-api:isResourceProperty</code> and <code>knora-api:isEditable</code>, to distinguish them from properties whose values are maintained automatically by Knora. Link value properties are shown along with link properties, because a client that updates links will need the IRIs of their link values. The predicate <code>salsah-gui:guiOrder</code> tells a GUI client in what order to display the properties of a class, and the predicates <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> specify how to configure a GUI element for editing the value of a property. For more information on the <code>salsah-gui</code> ontology, see The SALSAH GUI Ontology.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#querying-class-definition","title":"Querying class definition","text":"<p>To get the definition of a class, use the following route:</p> <pre><code>HTTP GET to http://host/v2/ontologies/classes/CLASS_IRI\n</code></pre> <p>Sample response:</p> <pre><code>{\n    \"knora-api:lastModificationDate\": {\n        \"@value\": \"2023-01-09T15:39:48.548298041Z\",\n        \"@type\": \"xsd:dateTimeStamp\"\n    },\n    \"rdfs:label\": \"The anything ontology\",\n    \"@graph\": [\n        {\n            \"knora-api:isResourceClass\": true,\n            \"rdfs:label\": \"Institution\",\n            \"knora-api:canBeInstantiated\": true,\n            \"rdfs:subClassOf\": [\n                {\n                    \"@id\": \"knora-api:Resource\"\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:arkUrl\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:attachedToProject\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:attachedToUser\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:creationDate\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:deleteComment\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:deleteDate\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:deletedBy\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:hasIncomingLinkValue\"\n                    },\n                    \"owl:minCardinality\": 0,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:hasPermissions\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:hasStandoffLinkTo\"\n                    },\n                    \"owl:minCardinality\": 0,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:hasStandoffLinkToValue\"\n                    },\n                    \"owl:minCardinality\": 0,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:isDeleted\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:lastModificationDate\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:userHasPermission\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:versionArkUrl\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"knora-api:versionDate\"\n                    },\n                    \"owl:maxCardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"rdfs:label\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"knora-api:isInherited\": true\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"anything:hasName\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"salsah-gui:guiOrder\": 1\n                },\n                {\n                    \"@type\": \"owl:Restriction\",\n                    \"owl:onProperty\": {\n                        \"@id\": \"anything:hasLocation\"\n                    },\n                    \"owl:cardinality\": 1,\n                    \"salsah-gui:guiOrder\": 2\n                }\n            ],\n            \"rdfs:comment\": \"some comment\",\n            \"@type\": \"owl:Class\",\n            \"@id\": \"anything:Institution\"\n        }\n    ],\n    \"knora-api:attachedToProject\": {\n        \"@id\": \"http://rdfh.ch/projects/0001\"\n    },\n    \"@type\": \"owl:Ontology\",\n    \"@id\": \"http://0.0.0.0:3333/ontology/0001/anything/v2\",\n    \"@context\": {\n        \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n        \"anything\": \"http://0.0.0.0:3333/ontology/0001/anything/v2#\",\n        \"owl\": \"http://www.w3.org/2002/07/owl#\",\n        \"salsah-gui\": \"http://api.knora.org/ontology/salsah-gui/v2#\",\n        \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n        \"xsd\": \"http://www.w3.org/2001/XMLSchema#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#ontology-updates","title":"Ontology Updates","text":"<p>The ontology update API must ensure that the ontologies it creates are valid and consistent, and that existing data is not invalidated by a change to an ontology. To make this easier to enforce, the ontology update API allows only one entity to be created or modified at a time. It is not possible to submit an entire ontology all at once. Each update request is a JSON-LD document providing only the information that is relevant to the update.</p> <p>Moreover, the API enforces the following rules:</p> <ul> <li>An entity (i.e. a class or property) cannot be referred to until it has been created.</li> <li>An entity cannot be modified or deleted if it is used in data,   except for changes to its <code>rdfs:label</code> or <code>rdfs:comment</code>.</li> <li>An entity cannot be modified if another entity refers to it, with   one exception: a <code>knora-api:subjectType</code> or <code>knora-api:objectType</code>   that refers to a class will not prevent the class's cardinalities   from being modified.</li> </ul> <p>Because of these rules, some operations have to be done in a specific order:</p> <ul> <li>Properties have to be defined before they can be used in the   cardinalities of a class, but a property's <code>knora-api:subjectType</code>   cannot refer to a class that does not yet exist. The recommended   approach is to first create a class with no cardinalities, then   create the properties that it needs, then add cardinalities for   those properties to the class.</li> <li>To delete a class along with its properties, the client must first   remove the cardinalities from the class, then delete the property   definitions, then delete the class definition.</li> </ul> <p>When changing an existing ontology, the client must always supply the ontology's <code>knora-api:lastModificationDate</code>, which is returned in the response to each update or when querying the ontology. If user A attempts to update an ontology, but user B has already updated it since the last time user A received the ontology's <code>knora-api:lastModificationDate</code>, user A's update will be rejected with an HTTP 409 Conflict error. This means that it is possible for two different users to work concurrently on the same ontology, but this is discouraged since it is likely to lead to confusion.</p> <p>An ontology can be created or updated only by a system administrator, or by a project administrator in the ontology's project.</p> <p>Ontology updates always use the complex schema.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#creating-a-new-ontology","title":"Creating a New Ontology","text":"<p>An ontology is always created within a particular project.</p> <pre><code>HTTP POST to http://host/v2/ontologies\n</code></pre> <pre><code>{\n  \"knora-api:ontologyName\" : \"ONTOLOGY_NAME\",\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"PROJECT_IRI\"\n  },\n  \"rdfs:label\" : \"ONTOLOGY_NAME\",\n  \"@context\" : {\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>The ontology name must follow the rules given in Knora IRIs.</p> <p>The ontology metadata can have an optional comment given in the request  body as:</p> <pre><code>\"rdfs:comment\": \"some comment\",\n</code></pre> <p>If the ontology is to be shared by multiple projects, it must be created in the default shared ontologies project, <code>http://www.knora.org/ontology/knora-base#DefaultSharedOntologiesProject</code>, and the request must have this additional boolean property:</p> <pre><code>\"knora-api:isShared\" : true\n</code></pre> <p>See Shared Ontologies for details about shared ontologies.</p> <p>A successful response will be a JSON-LD document providing only the ontology's metadata, which includes the ontology's IRI. When the client makes further requests to create entities (classes and properties) in the ontology, it must construct entity IRIs by concatenating the ontology IRI, a <code>#</code> character, and the entity name. An entity name must be a valid XML NCName.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-an-ontologys-metadata","title":"Changing an Ontology's Metadata","text":"<p>One can modify an ontology's metadata by updating its <code>rdfs:label</code> or <code>rdfs:comment</code>  or both. The example below shows the request for changing the label of an ontology.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/metadata\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"rdfs:label\" : \"NEW_ONTOLOGY_LABEL\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@context\" : {\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>Similarly, a user can change an ontology's existing comment or add one by specifying  the new comment in the request body:</p> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"rdfs:comment\" : \"NEW_ONTOLOGY_COMMENT\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@context\" : {\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>The request body can also contain a new label and a new comment for the ontology's metadata.  A successful response will be a JSON-LD document providing only the ontology's metadata.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-an-ontologys-comment","title":"Deleting an Ontology's comment","text":"<pre><code>HTTP DELETE to http://host/v2/ontologies/comment/ONTOLOGY_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The ontology IRI and the ontology's last modification date must be URL-encoded.</p> <p>A successful response will be a JSON-LD document containing the ontology's updated metadata.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-an-ontology","title":"Deleting an Ontology","text":"<p>An ontology can be deleted only if it is not used in data.</p> <pre><code>HTTP DELETE to http://host/v2/ontologies/ONTOLOGY_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The ontology IRI and the ontology's last modification date must be URL-encoded.</p> <p>A successful response will be a JSON-LD document containing a confirmation message.</p> <p>To check whether an ontology can be deleted:</p> <pre><code>HTTP GET to http://host/v2/ontologies/candeleteontology/ONTOLOGY_IRI\n</code></pre> <p>The response will look like this:</p> <pre><code>{\n    \"knora-api:canDo\": false,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#creating-a-class-without-cardinalities","title":"Creating a Class Without Cardinalities","text":"<pre><code>HTTP POST to http://host/v2/ontologies/classes\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"CLASS_IRI\",\n      \"@type\" : \"owl:Class\",\n      \"rdfs:label\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"LABEL\"\n      },\n      \"rdfs:comment\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"COMMENT\"\n      },\n      \"rdfs:subClassOf\" : {\n        \"@id\" : \"BASE_CLASS_IRI\"\n      }\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:label</code> must be submitted in at least one language, either as an object or as an array of objects.</p> <p>Values for <code>rdfs:comment</code> are optional, but if they are provided, they must include a language code.</p> <p>At least one base class must be provided, which can be <code>knora-api:Resource</code> or any of its subclasses.</p> <p>A successful response will be a JSON-LD document providing the new class definition (but not any of the other entities in the ontology).</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#creating-a-class-with-cardinalities","title":"Creating a Class With Cardinalities","text":"<p>This can work if the new class will have cardinalities for properties that have no <code>knora-api:subjectType</code>, or if the new class will be a subclass of their <code>knora-api:subjectType</code>.</p> <pre><code>HTTP POST to http://host/v2/ontologies/classes\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"CLASS_IRI\",\n      \"@type\" : \"owl:Class\",\n      \"rdfs:label\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"LABEL\"\n      },\n      \"rdfs:comment\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"COMMENT\"\n      },\n      \"rdfs:subClassOf\" : [ {\n        \"@id\" : \"BASE_CLASS_IRI\"\n      }, {\n        \"@type\": \"owl:Restriction\",\n        \"OWL_CARDINALITY_PREDICATE\": \"OWL_CARDINALITY_VALUE\",\n        \"owl:onProperty\": {\n          \"@id\" : \"PROPERTY_IRI\"\n        }\n      } ]\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p><code>OWL_CARDINALITY_PREDICATE</code> and <code>OWL_CARDINALITY_VALUE</code> must correspond to the supported combinations given in OWL Cardinalities. (The placeholder <code>OWL_CARDINALITY_VALUE</code> is shown here in quotes, but it should be an unquoted integer.)</p> <p>Values for <code>rdfs:label</code> must be submitted in at least one language, either as an object or as an array of objects.</p> <p>Values for <code>rdfs:comment</code> are optional, but if they are provided, they must include a language code.</p> <p>At least one base class must be provided.</p> <p>When a cardinality on a link property is submitted, an identical cardinality on the corresponding link value property is automatically added (see Links Between Resources).</p> <p>A successful response will be a JSON-LD document providing the new class definition (but not any of the other entities in the ontology).</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-labels-of-a-class","title":"Changing the Labels of a Class","text":"<p>This operation is permitted even if the class is used in data.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/classes\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"CLASS_IRI\",\n      \"@type\" : \"owl:Class\",\n      \"rdfs:label\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"LABEL\"\n      }\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:label</code> must be submitted in at least one language, either as an object or as an array of objects. The submitted labels will replace the existing ones.</p> <p>To get the current labels use the class definition.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-comments-of-a-class","title":"Changing the Comments of a Class","text":"<p>This operation is permitted even if the class is used in data.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/classes\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"CLASS_IRI\",\n      \"@type\" : \"owl:Class\",\n      \"rdfs:comment\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"COMMENT\"\n      }\n    }\n  ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:comment</code> must be submitted in at least one language, either as an object or as an array of objects. The submitted comments will replace the existing ones.</p> <p>To get the current comments use the class definition.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-the-comments-of-a-class","title":"Deleting the Comments of a Class","text":"<p>This operation is permitted even if the class is used in data.</p> <pre><code>HTTP DELETE to http://host/v2/ontologies/classes/comment/CLASS_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The class IRI and the ontology's last modification date must be URL-encoded.</p> <p>All values i.e. all languages for <code>rdfs:comment</code> are deleted.</p> <p>A successful response will be a JSON-LD document providing the class definition.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#creating-a-property","title":"Creating a Property","text":"<pre><code>HTTP POST to http://host/v2/ontologies/properties\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"PROPERTY_IRI\",\n      \"@type\" : \"owl:ObjectProperty\",\n      \"knora-api:subjectType\" : {\n        \"@id\" : \"SUBJECT_TYPE\"\n      },\n      \"knora-api:objectType\" : {\n        \"@id\" : \"OBJECT_TYPE\"\n      },\n      \"rdfs:label\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"LABEL\"\n      },\n      \"rdfs:comment\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"COMMENT\"\n      },\n      \"rdfs:subPropertyOf\" : {\n        \"@id\" : \"BASE_PROPERTY_IRI\"\n      },\n      \"salsah-gui:guiElement\" : {\n        \"@id\" : \"GUI_ELEMENT_IRI\"\n      },\n      \"salsah-gui:guiAttribute\" : [ \"GUI_ATTRIBUTE\" ]\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"salsah-gui\" : \"http://api.knora.org/ontology/salsah-gui/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:label</code> must be submitted in at least one language, either as an object or as an array of objects.</p> <p>Values for <code>rdfs:comment</code> are optional, but if they are provided, they must include a language code.</p> <p>At least one base property must be provided, which can be <code>knora-api:hasValue</code>, <code>knora-api:hasLinkTo</code>, or any of their subproperties, with the exception of file properties (subproperties of <code>knora-api:hasFileValue</code>) and link value properties (subproperties of <code>knora-api:hasLinkToValue</code>).</p> <p>If the property is a link property, the corresponding link value property (see Links Between Resources) will automatically be created.</p> <p>The property definition must specify its <code>knora-api:objectType</code>. If the new property is a subproperty of <code>knora-api:hasValue</code>, its <code>knora-api:objectType</code> must be one of the built-in subclasses of <code>knora-api:Value</code>, which are defined in the <code>knora-api</code> ontology in the complex schema. If the new property is a subproperty of <code>knora-base:hasLinkTo</code>, its <code>knora-api:objectType</code> must be a subclass of <code>knora-api:Resource</code>.</p> <p>To improve consistency checking, it is recommended, but not required, to provide <code>knora-api:subjectType</code>, which must be a subclass of <code>knora-api:Resource</code>.</p> <p>The predicates <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> are optional. If provided, the object of <code>guiElement</code> must be one of the OWL named individuals defined in The SALSAH GUI Ontology. Some GUI elements take required or optional attributes, which are provided as objects of <code>salsah-gui:guiAttribute</code>; see The SALSAH GUI Ontology for details.</p> <p>A successful response will be a JSON-LD document providing the new property definition (but not any of the other entities in the ontology).</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-labels-of-a-property","title":"Changing the Labels of a Property","text":"<p>This operation is permitted even if the property is used in data.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/properties\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"PROPERTY_IRI\",\n      \"@type\" : \"owl:ObjectProperty\",\n      \"rdfs:label\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"LABEL\"\n      }\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:label</code> must be submitted in at least one language, either as an object or as an array of objects.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-comments-of-a-property","title":"Changing the Comments of a Property","text":"<p>This operation is permitted even if the property is used in data.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/properties\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [\n    {\n      \"@id\" : \"PROPERTY_IRI\",\n      \"@type\" : \"owl:ObjectProperty\",\n      \"rdfs:comment\" : {\n        \"@language\" : \"LANGUAGE_CODE\",\n        \"@value\" : \"COMMENT\"\n      }\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Values for <code>rdfs:comment</code> must be submitted in at least one language, either as an object or as an array of objects.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-the-comments-of-a-property","title":"Deleting the Comments of a Property","text":"<p>This operation is permitted even if the property is used in data.</p> <pre><code>HTTP DELETE to http://host/v2/ontologies/properties/comment/PROPERTY_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The property IRI and the ontology's last modification date must be URL-encoded.</p> <p>All values i.e. all languages for <code>rdfs:comment</code> are deleted.</p> <p>If the property is a link property, the <code>rdfs:comment</code> of its corresponding link value property will automatically be deleted.</p> <p>A successful response will be a JSON-LD document providing the property definition.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-gui-element-and-gui-attributes-of-a-property","title":"Changing the GUI Element and GUI Attributes of a Property","text":"<p>This operation is permitted even if the property is used in data.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/properties/guielement\n</code></pre> <pre><code>{\n  \"@id\": \"ONTOLOGY_IRI\",\n  \"@type\": \"owl:Ontology\",\n  \"knora-api:lastModificationDate\": {\n    \"@type\": \"xsd:dateTimeStamp\",\n    \"@value\": \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\": [\n    {\n      \"@id\": \"PROPERTY_IRI\",\n      \"@type\": \"owl:ObjectProperty\",\n      \"salsah-gui:guiElement\": {\n        \"@id\": \"salsah-gui:Textarea\"\n      },\n      \"salsah-gui:guiAttribute\": [\n        \"cols=80\",\n        \"rows=24\"\n      ]\n    }\n  ],\n  \"@context\": {\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"salsah-gui\": \"http://api.knora.org/ontology/salsah-gui/v2#\",\n    \"owl\": \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>To remove the values of <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> from the property definition, submit the request without those predicates.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#adding-cardinalities-to-a-class","title":"Adding Cardinalities to a Class","text":"<p>If the class (or any of its sub-classes) is used in data,  it is not allowed to add cardinalities <code>owl:minCardinality</code> greater than 0 or <code>owl:cardinality 1</code> to the class.</p> <pre><code>HTTP POST to http://host/v2/ontologies/cardinalities\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [ \n    {\n      \"@id\" : \"CLASS_IRI\",\n      \"@type\" : \"owl:Class\",\n      \"rdfs:subClassOf\" : {\n        \"@type\": \"owl:Restriction\",\n        \"OWL_CARDINALITY_PREDICATE\": \"OWL_CARDINALITY_VALUE\",\n        \"owl:onProperty\": {\n          \"@id\" : \"PROPERTY_IRI\"\n        }\n      }\n    }\n  ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>At least one cardinality must be submitted.</p> <p><code>OWL_CARDINALITY_PREDICATE</code> and <code>OWL_CARDINALITY_VALUE</code> must correspond to the supported combinations given in OWL Cardinalities. (The placeholder <code>OWL_CARDINALITY_VALUE</code> is shown here in quotes, but it should be an unquoted integer.)</p> <p>When a cardinality on a link property is submitted, an identical cardinality on the corresponding link value property is automatically added (see Links Between Resources).</p> <p>A successful response will be a JSON-LD document providing the new class definition (but not any of the other entities in the ontology).</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#replacing-the-cardinalities-of-a-class","title":"Replacing the Cardinalities of a Class","text":"<p>It is possible to replace all cardinalities on properties used by a class. If it succeeds the request will effectively replace all direct cardinalities of the class as specified. That is, it removes all the cardinalities from the class and replaces them with the submitted cardinalities.  Meaning that, if no cardinalities are submitted (i.e. the request contains no <code>rdfs:subClassOf</code>),  the class is left with no cardinalities.</p> <p>The request will fail if any of the \"Pre-Update Checks\" fails.  A partial update of the ontology will not be performed.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#pre-update-checks","title":"Pre-Update Checks","text":"<ul> <li>Ontology Check<ul> <li>Any given cardinality on a property must be included in any of the existing cardinalities    for the same property of the super-classes.</li> <li>Any given cardinality on a property must include the effective cardinalities    for the same property of all subclasses,    taking into account the respective inherited cardinalities from the class hierarchy of the subclasses.</li> </ul> </li> <li>Consistency Check with existing data<ul> <li>Given that instances of the class or any of its subclasses exist,   then these instances are checked if they conform to the given cardinality.</li> </ul> </li> </ul> <p>Subproperty handling for cardinality pre-update checks</p> <p>The Pre-Update check does not take into account any <code>subproperty</code> relations between the properties.  Every cardinality is checked against only the given property and not its subproperties,  neither in the ontology nor the consistency check with existing data.  This means that currently it is necessary to maintain the cardinalities on all subproperties of a property  in sync with the cardinalities on the superproperty.</p> <pre><code>HTTP PUT to http://host/v2/ontologies/cardinalities\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [ {\n    \"@id\" : \"CLASS_IRI\",\n    \"@type\" : \"owl:Class\",\n    \"rdfs:subClassOf\" : {\n      \"@type\": \"owl:Restriction\",\n      \"OWL_CARDINALITY_PREDICATE\": \"OWL_CARDINALITY_VALUE\",\n      \"owl:onProperty\": {\n        \"@id\" : \"PROPERTY_IRI\"\n      }\n    }\n  } ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p><code>OWL_CARDINALITY_PREDICATE</code> and <code>OWL_CARDINALITY_VALUE</code> must correspond to the supported combinations given in OWL Cardinalities. (The placeholder <code>OWL_CARDINALITY_VALUE</code> is shown here in quotes, but it should be an unquoted integer.)</p> <p>When a cardinality on a link property is submitted, an identical cardinality on the corresponding link value property is automatically added (see Links Between Resources).</p> <p>A successful response will be a JSON-LD document providing the new class definition (but not any of the other entities in the ontology). If any of the \"Pre-Update Checks\" fail the endpoint will respond with a 400 Bad Request containing the reasons why the update failed.</p> <p>The \"Pre-Update Checks\" are available on a dedicated endpoint. For a check whether a particular cardinality can be set on a class/property combination, use the following request:</p> <pre><code>HTTP GET to http://host/v2/ontologies/canreplacecardinalities/CLASS_IRI?propertyIri=PROPERTY_IRI&amp;newCardinality=[0-1|1|1-n|0-n]\n</code></pre> <p>The response will look like this:</p> <p>Failure:</p> <pre><code>{\n  \"knora-api:canDo\": false,\n  \"knora-api:cannotDoReason\": \"An explanation, understandable to humans, why the update cannot be carried out.\",\n  \"knora-api:cannotDoContext\": {\n    \"knora-api:canSetCardinalityCheckFailure\": [\n      {\n        \"knora-api:canSetCardinalityOntologySuperClassCheckFailed\": [\n          {\n            \"@id\": \"http://0.0.0.0:3333/ontology/0801/biblio/v2#somePublicationInstance\"\n          },\n          {\n            \"@id\": \"http://0.0.0.0:3333/ontology/0801/biblio/v2#someArticleInstance\"\n          }\n        ]\n      },\n      {\n        \"knora-api:canSetCardinalityOntologySubclassCheckFailed\": {\n          \"@id\": \"http://0.0.0.0:3333/ontology/0801/biblio/v2#someJournalArticleInstance\"\n        }\n      }\n    ]\n  },\n  \"@context\": {\n    \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>Success:</p> <pre><code>{\n    \"knora-api:canDo\": true,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    } \n}\n</code></pre> <p>Note</p> <p>The following check is still available but deprecated - use the more detailed check above. This request is only checking if the class is in use. </p> <p>To check whether all class's cardinalities can be replaced:</p> <pre><code>HTTP GET to http://host/v2/ontologies/canreplacecardinalities/CLASS_IRI\n</code></pre> <p>The response will look like this:</p> <pre><code>{\n    \"knora-api:canDo\": false,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre> <p>The <code>ontologies/canreplacecardinalities/CLASS_IRI</code> request is only checking if the class is in use. </p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#delete-a-single-cardinality-from-a-class","title":"Delete a single cardinality from a class","text":"<p>If a class is used in data, it is only allowed to delete a cardinality, if the property a cardinality refers to, is not used inside the data. Also, the property isn't allowed to be used inside the data in any subclasses of this class.</p> <pre><code>HTTP PATCH to http://host/v2/ontologies/cardinalities\n</code></pre> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [ {\n    \"@id\" : \"CLASS_IRI\",\n    \"@type\" : \"owl:Class\",\n    \"rdfs:subClassOf\" : {\n      \"@type\": \"owl:Restriction\",\n      \"OWL_CARDINALITY_PREDICATE\": \"OWL_CARDINALITY_VALUE\",\n      \"owl:onProperty\": {\n        \"@id\" : \"PROPERTY_IRI\"\n      }\n    }\n  } ],\n  \"@context\" : {\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p><code>OWL_CARDINALITY_PREDICATE</code> and <code>OWL_CARDINALITY_VALUE</code> must correspond to the supported combinations given in OWL Cardinalities. (The placeholder <code>OWL_CARDINALITY_VALUE</code> is shown here in quotes, but it should be an unquoted integer.)</p> <p>When a cardinality on a link property is submitted, an identical cardinality on the corresponding link value property is automatically added (see Links Between Resources).</p> <p>A successful response will be a JSON-LD document providing the new class definition (but not any of the other entities in the ontology).</p> <p>To check whether a class's cardinality can be deleted:</p> <pre><code>HTTP POST to http://host/v2/ontologies/candeletecardinalities\n</code></pre> <p>The response will look like this:</p> <pre><code>{\n    \"knora-api:canDo\": false,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#changing-the-gui-order-of-cardinalities","title":"Changing the GUI Order of Cardinalities","text":"<p>To change the GUI order of one or more cardinalities in a class:</p> <pre><code>HTTP PUT to http://host/v2/ontologies/guiorder\n</code></pre> <p>This can be done even if the class is used in data.</p> <p>The request body includes the cardinalities whose GUI order should be changed, using the predicate <code>salsah-gui:guiOrder</code>, whose object is an integer:</p> <pre><code>{\n  \"@id\" : \"ONTOLOGY_IRI\",\n  \"@type\" : \"owl:Ontology\",\n  \"knora-api:lastModificationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"ONTOLOGY_LAST_MODIFICATION_DATE\"\n  },\n  \"@graph\" : [ {\n    \"@id\" : \"CLASS_IRI\",\n    \"@type\" : \"owl:Class\",\n    \"rdfs:subClassOf\" : {\n      \"@type\": \"owl:Restriction\",\n      \"OWL_CARDINALITY_PREDICATE\": \"OWL_CARDINALITY_VALUE\",\n      \"owl:onProperty\": {\n        \"@id\" : \"PROPERTY_IRI\"\n      },\n      \"salsah-gui:guiOrder\": \"GUI_ORDER_VALUE\"\n    }\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"salsah-gui\" : \"http://api.knora.org/ontology/salsah-gui/v2#\",\n    \"owl\" : \"http://www.w3.org/2002/07/owl#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>Only the cardinalities whose GUI order is to be changed need to be included in the request. The <code>OWL_CARDINALITY_PREDICATE</code> and <code>OWL_CARDINALITY_VALUE</code> are ignored; only the <code>GUI_ORDER_VALUE</code> is changed.</p>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-a-property","title":"Deleting a Property","text":"<p>A property can be deleted only if no other ontology entity refers to it, and if it is not used in data.</p> <pre><code>HTTP DELETE to http://host/v2/ontologies/properties/PROPERTY_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The property IRI and the ontology's last modification date must be URL-encoded.</p> <p>If the property is a link property, the corresponding link value property (see Links Between Resources) will automatically be deleted.</p> <p>A successful response will be a JSON-LD document providing only the ontology's metadata.</p> <p>To check whether a property can be deleted:</p> <pre><code>HTTP GET to http://host/v2/ontologies/candeleteproperty/PROPERTY_IRI\n</code></pre> <p>The response will look like this:</p> <pre><code>{\n    \"knora-api:canDo\": false,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/ontology-information/#deleting-a-class","title":"Deleting a Class","text":"<p>A class can be deleted only if no other ontology entity refers to it, and if it is not used in data.</p> <pre><code>HTTP DELETE to http://host/v2/ontologies/classes/CLASS_IRI?lastModificationDate=ONTOLOGY_LAST_MODIFICATION_DATE\n</code></pre> <p>The class IRI and the ontology's last modification date must be URL-encoded.</p> <p>A successful response will be a JSON-LD document providing only the ontology's metadata.</p> <p>To check whether a class can be deleted:</p> <pre><code>HTTP GET to http://host/v2/ontologies/candeleteclass/CLASS_IRI\n</code></pre> <p>The response will look like this:</p> <pre><code>{\n    \"knora-api:canDo\": false,\n    \"@context\": {\n        \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n    }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/","title":"Permalinks","text":"<p>Knora provides a permanent, citable URL for each resource and value. These URLs use Archival Resource Key (ARK) Identifiers, and are designed to remain valid even if the resource itself is moved from one Knora repository to another.</p>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#obtaining-ark-urls","title":"Obtaining ARK URLs","text":"<p>In the complex schema, a resource or value is always returned with two ARK URLs: one that will always refer to the latest version of the resource or value (<code>knora-api:arkUrl</code>), and one that refers specifically to the version being returned (<code>knora-api:versionArkUrl</code>). For example:</p> <pre><code>{\n  \"@id\" : \"http://rdfh.ch/0803/2a6221216701\",\n  \"@type\" : \"incunabula:book\",\n  \"incunabula:book_comment\" : {\n    \"@id\" : \"http://rdfh.ch/0803/2a6221216701/values/56c287fc9505\",\n    \"@type\" : \"knora-api:TextValue\",\n    \"knora-api:arkUrl\" : {\n      \"@type\" : \"xsd:anyURI\",\n      \"@value\" : \"http://ark.dasch.swiss/ark:/72163/1/0803/2a6221216701W/dhaRsvZATjmOxhCOOzHqewB\"\n    },\n    \"knora-api:versionArkUrl\" : {\n      \"@type\" : \"xsd:anyURI\",\n      \"@value\" : \"http://ark.dasch.swiss/ark:/72163/1/0803/2a6221216701W/dhaRsvZATjmOxhCOOzHqewB.20160302T150521Z\"\n    },\n    \"knora-api:attachedToUser\" : {\n      \"@id\" : \"http://rdfh.ch/users/91e19f1e01\"\n    },\n    \"knora-api:hasPermissions\" : \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:UnknownUser\",\n    \"knora-api:userHasPermission\" : \"V\",\n    \"knora-api:valueAsString\" : \"Katalogaufnahme anhand ISTC und v.d.Haegen\",\n    \"knora-api:valueCreationDate\" : {\n      \"@type\" : \"xsd:dateTimeStamp\",\n      \"@value\" : \"2016-03-02T15:05:21Z\"\n    },\n    \"knora-api:valueHasUUID\" : \"dhaRsvZATjmOxhCOOzHqew\"\n  },\n  \"knora-api:arkUrl\" : {\n    \"@type\" : \"xsd:anyURI\",\n    \"@value\" : \"http://ark.dasch.swiss/ark:/72163/1/0803/2a6221216701W\"\n  },\n  \"knora-api:versionArkUrl\" : {\n    \"@type\" : \"xsd:anyURI\",\n    \"@value\" : \"http://ark.dasch.swiss/ark:/72163/1/0803/2a6221216701W.20160302T150521Z\"\n  },\n  \"knora-api:attachedToProject\" : {\n    \"@id\" : \"http://rdfh.ch/projects/0803\"\n  },\n  \"knora-api:attachedToUser\" : {\n    \"@id\" : \"http://rdfh.ch/users/91e19f1e01\"\n  },\n  \"knora-api:creationDate\" : {\n    \"@type\" : \"xsd:dateTimeStamp\",\n    \"@value\" : \"2016-03-02T15:05:21Z\"\n  },\n  \"knora-api:hasPermissions\" : \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:UnknownUser\",\n  \"knora-api:userHasPermission\" : \"V\",\n  \"rdfs:label\" : \"Reise ins Heilige Land\",\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"incunabula\" : \"http://0.0.0.0:3333/ontology/0803/incunabula/v2#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\"\n  }\n}\n</code></pre> <p>In the simple schema, resources are returned with ARK URLs, but values are returned as literals, so ARK URLs are not provided for values.</p> <p>For more information on getting past versions of resources and values, see:</p> <ul> <li>Get a Full Representation of a Version of a Resource by IRI</li> <li>Get a Version of a Value in a Resource</li> <li>Get the Version History of a Resource</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#resolving-knora-ark-urls","title":"Resolving Knora ARK URLs","text":"<p>A Knora ARK URL is intended to be resolved by the Knora ARK resolver.</p>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#knora-ark-url-format","title":"Knora ARK URL Format","text":"<p>For details, see Archival Resource Key (ARK) Identifiers.</p>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#ark-urls-for-projects","title":"ARK URLs for Projects","text":"<p>The format of a Knora project ARK URL is as follows:</p> <pre><code>http://HOST/ark:/NAAN/VERSION/PROJECT\n</code></pre> <p><code>NAAN</code> is a Name Assigning Authority Number, <code>VERSION</code> is the version number of the Knora ARK URL format (currently always 1), and <code>PROJECT</code> is the project's short-code.</p> <p>For example, given a project with ID <code>0001</code>, and using the DaSCH's ARK resolver hostname and NAAN, the ARK URL for the project itself is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001\n</code></pre> <p>This could redirect to a page describing the project.</p>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#ark-urls-for-resources","title":"ARK URLs for Resources","text":"<p>The format of a Knora resource ARK URL is as follows:</p> <pre><code>http://HOST/ark:/NAAN/VERSION/PROJECT/RESOURCE_UUID[.TIMESTAMP]\n</code></pre> <p><code>NAAN</code> is a Name Assigning Authority Number, <code>VERSION</code> is the version number of the Knora ARK URL format (currently always 1), <code>PROJECT</code> is the project's short-code, and <code>RESOURCE_UUID</code> is the resource's UUID.</p> <p>For example, given the Knora resource IRI <code>http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ</code>, and using the DaSCH's ARK resolver hostname and NAAN, the corresponding ARK URL without a timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY\n</code></pre> <p>The same ARK URL with an optional timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY.20180604T085622513Z\n</code></pre> <p>Without a timestamp, a Knora resource ARK URL refers to the latest version of the resource at the time when the URL is resolved.</p>"},{"location":"DSP-API/03-endpoints/api-v2/permalinks/#ark-urls-for-values","title":"ARK URLs for Values","text":"<p>The format of a Knora value ARK URL is as follows:</p> <pre><code>http://HOST/ark:/NAAN/VERSION/PROJECT/RESOURCE_UUID/VALUE_UUID[.TIMESTAMP]\n</code></pre> <p><code>NAAN</code> is a Name Assigning Authority Number, <code>VERSION</code> is the version number of the Knora ARK URL format (currently always 1), <code>PROJECT</code> is the project's short-code, <code>RESOURCE_UUID</code> is the resource's UUID, and <code>VALUE_UUID</code> is the value's <code>knora-api:valueHasUUID</code>.</p> <p>For example, given a value with <code>knora-api:valueHasUUID \"4OOf3qJUTnCDXlPNnygSzQ\"</code> in the resource <code>http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ</code>, and using the DaSCH's ARK resolver hostname and NAAN, the corresponding ARK URL without a timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY/4OOf3qJUTnCDXlPNnygSzQX\n</code></pre> <p>The same ARK URL with an optional timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY/4OOf3qJUTnCDXlPNnygSzQX.20180604T085622513Z\n</code></pre> <p>Without a timestamp, a Knora value ARK URL refers to the latest version of the value at the time when the URL is resolved.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/","title":"Gravsearch: Virtual Graph Search","text":""},{"location":"DSP-API/03-endpoints/api-v2/query-language/#basic-concept","title":"Basic Concept","text":"<p>Gravsearch is intended to offer the advantages of SPARQL endpoints (particularly the ability to perform queries using complex search criteria) while avoiding their drawbacks in terms of performance and security (see The Enduring Myth of the SPARQL Endpoint). It also has the benefit of enabling clients to work with a simpler RDF data model than the one the API actually uses to store data in the triplestore and makes it possible to provide better error-checking.</p> <p>Rather than being processed directly by the triplestore, a Gravsearch query is interpreted by the API, which enforces certain restrictions on the query, and implements paging and permission checking. The API server generates SPARQL based on the Gravsearch query submitted, queries the triplestore, filters the results according to the user's permissions, and returns each page of query results as an API response. Thus, Gravsearch is a hybrid between a RESTful API and a SPARQL endpoint.</p> <p>A Gravsearch query conforms to a subset of the syntax of a SPARQL CONSTRUCT query, with some additional restrictions and functionality. In particular, the variable representing the top-level (or 'main') resource that will appear in each search result must be identified, statements must be included to specify the types of the entities being queried, OFFSET is used to control paging, and <code>ORDER BY</code> is used to sort the results.</p> <p>It is certainly possible to write Gravsearch queries by hand, but we expect that in general, they will be automatically generated by client software, e.g. by a client user interface.</p> <p>For a more detailed overview of Gravsearch, see Gravsearch: Transforming SPARQL to query humanities data.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#submitting-gravsearch-queries","title":"Submitting Gravsearch Queries","text":"<p>The recommended way to submit a Gravsearch query is via HTTP POST:</p> <pre><code>HTTP POST to http://host/v2/searchextended\n</code></pre> <p>This works like query via POST directly in the SPARQL 1.1 Protocol: the query is sent unencoded as the HTTP request message body, in the UTF-8 charset.</p> <p>It is also possible to submit a Gravsearch query using HTTP GET. The entire query must be URL-encoded and included as the last element of the URL path:</p> <pre><code>HTTP GET to http://host/v2/searchextended/QUERY\n</code></pre> <p>The response to a Gravsearch query is an RDF graph, which can be requested in various formats (see Responses Describing Resources).</p> <p>To request the number of results rather than the results themselves, you can do a count query:</p> <pre><code>HTTP POST to http://host/v2/searchextended/count\n</code></pre> <p>The response to a count query request is an object with one predicate, <code>http://schema.org/numberOfItems</code>, with an integer value.</p> <p>If a gravsearch query times out, a <code>504 Gateway Timeout</code> will be returned.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#gravsearch-and-api-schemas","title":"Gravsearch and API Schemas","text":"<p>A Gravsearch query can be written in either of the two DSP-API v2 schemas. The simple schema is easier to work with, and is sufficient if you don't need to query anything below the level of a DSP-API value. If your query needs to refer to standoff markup, you must use the complex schema. Each query must use a single schema, with one exception (see Date Comparisons).</p> <p>Gravsearch query results can be requested in the simple or complex schema; see API Schema.</p> <p>All examples hereafter run with the DSP stack started locally. If you access another stack, you can check  the IRI of the ontology you are targeting by requesting the ontologies metadata.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#using-the-simple-schema","title":"Using the Simple Schema","text":"<p>To write a query in the simple schema, use the <code>knora-api</code> ontology in the simple schema, and use the simple schema for any other DSP ontologies the query refers to, e.g.:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\n</code></pre> <p>In the simple schema, DSP-API values are represented as literals, which can be used in <code>FILTER</code> expressions (see Filtering on Values in the Simple Schema).</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#using-the-complex-schema","title":"Using the Complex Schema","text":"<p>To write a query in the complex schema, use the <code>knora-api</code> ontology in the complex schema, and use the complex schema for any other DSP ontologies the query refers to, e.g.:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/v2#&gt;\n</code></pre> <p>In the complex schema, DSP-API values are represented as objects belonging to subclasses of <code>knora-api:Value</code>, e.g. <code>knora-api:TextValue</code>, and have predicates of their own, which can be used in <code>FILTER</code> expressions (see Filtering on Values in the Complex Schema).</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#main-and-dependent-resources","title":"Main and Dependent Resources","text":"<p>The main resource is the top-level resource in a search result. Other resources that are in some way connected to the main resource are referred to as dependent resources. If the client asks for a resource A relating to a resource B, then all matches for A will be presented as main resources and those for B as dependent resources. The main resource must be represented by a variable, marked with <code>knora-api:isMainResource</code>, as explained under CONSTRUCT Clause.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#virtual-incoming-links","title":"Virtual incoming Links","text":"<p>Depending on the ontology design, a resource A points to B or vice versa. For example, a page A is part of a book B using the property <code>incunabula:partOf</code>. If A is marked as the main resource, then B is nested as a dependent resource in its link value <code>incunabula:partOfValue</code>. But in case B is marked as the main resource, B does not have a link value pointing to A because in fact B is pointed to by A. Instead, B has a virtual property <code>knora-api:hasIncomingLink</code> containing A's link value:</p> <pre><code>\"knora-api:hasIncomingLinkValue\" : {\n    \"@id\" : \"http://rdfh.ch/A/values/xy\",\n    \"@type\" : \"knora-api:LinkValue\",\n    \"knora-api:linkValueHasSource\" : {\n      \"@id\" : \"http://rdfh.ch/A\",\n      \"@type\" : \"incunabula:page\",\n      \"incunabula:partOfValue\" : {\n        \"@id\" : \"http://rdfh.ch/A/values/xy\",\n        \"@type\" : \"knora-api:LinkValue\",\n        \"knora-api:linkValueHasTargetIri\" : {\n          \"@id\" : \"http://rdfh.ch/B\"\n        }\n      }\n    }\n  },\n</code></pre> <p>Note that the virtually inserted link value inverts the relation by using <code>knora-api:linkValueHasSource</code>. The source of the link is A and its target B is only represented by an IRI (<code>knora-api:linkValueHasTargetIri</code>) since B is the main resource.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#dedicated-endpoint-for-querying-the-incoming-links","title":"Dedicated endpoint for querying the incoming links","text":"<p>Internal use only</p> <p>This endpoint is intended for internal use only and may be subject to change.</p> <p>The dedicated endpoint for querying the incoming links was introduced in DSP-API version v31.10.0.</p> <pre><code>HTTP GET to http://host/v2/searchIncomingLinks/[resourceIri]?offset=[pageNumber]\n</code></pre> <p>The route have two parameters, the resource IRI and the page number which translates to the SPARQL <code>OFFSET</code>. The default value for the page numbers is 0. The entire query must be URL-encoded and included as the last element of the URL path. Here is an example of the request for the resource <code>http://rdfh.ch/0001/a-thing-picture</code> with the page number 1:</p> <pre><code>http://host/v2/searchIncomingLinks/http%3A%2F%2Frdfh.ch%2F0001%2Fa-thing-picture?offset=1\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#graph-patterns-and-result-graphs","title":"Graph Patterns and Result Graphs","text":"<p>The WHERE clause of a Gravsearch query specifies a graph pattern. Each query result will match this graph pattern, and will have the form of a graph whose starting point is a main resource. The query's graph pattern, and hence each query result graph, can span zero more levels of relations between resources. For example, a query could request regions in images on pages of books written by a certain author, articles by authors who were students of a particular professor, or authors of texts that refer to events that took place within a certain date range.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#permission-checking","title":"Permission Checking","text":"<p>Each matching resource is returned with the values that the user has permission to see. If the user does not have permission to see a matching main resource, it is hidden in the results. If a user does not have permission to see a matching dependent resource, the link value is hidden.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#paging","title":"Paging","text":"<p>Gravsearch results are returned in pages. The maximum number of main resources per page is determined by the API (and can be configured in <code>application.conf</code> via the setting <code>app/v2/resources-sequence/results-per-page</code>). If some resources have been filtered out because the user does not have permission to see them, a page could contain fewer results, or no results. If it is possible that more results are available in subsequent pages, the Gravsearch response will contain the predicate <code>knora-api:mayHaveMoreResults</code> with the boolean value <code>true</code>, otherwise it will not contain this predicate. Therefore, to retrieve all available results, the client must request each page one at a time, until the response does not contain <code>knora-api:mayHaveMoreResults</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#inference","title":"Inference","text":"<p>Gravsearch queries are understood to imply a subset of RDFS reasoning. This is done by the API by expanding the incoming query.</p> <p>Specifically, if a statement pattern specifies a property, the pattern will also match subproperties of that property, and if a statement specifies that a subject has a particular <code>rdf:type</code>, the statement will also match subjects belonging to subclasses of that type.</p> <p>If you know that reasoning will not return any additional results for your query, you can disable it by adding this line to the <code>WHERE</code> clause, which may improve query performance:</p> <pre><code>knora-api:GravsearchOptions knora-api:useInference false .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#gravsearch-syntax","title":"Gravsearch Syntax","text":"<p>Every Gravsearch query is a valid SPARQL 1.1 CONSTRUCT query. However, Gravsearch only supports a subset of the elements that can be used in a SPARQL Construct query, and a Gravsearch CONSTRUCT Clause has to indicate which variable is to be used for the main resource in each search result.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#supported-sparql-syntax","title":"Supported SPARQL Syntax","text":"<p>The current version of Gravsearch accepts <code>CONSTRUCT</code> queries whose <code>WHERE</code> clauses use the following patterns, with the specified restrictions:</p> <ul> <li><code>OPTIONAL</code>: cannot be nested in a <code>UNION</code>.</li> <li><code>UNION</code>: cannot be nested in a <code>UNION</code>.</li> <li><code>FILTER</code>: may contain a complex expression using the Boolean   operators AND and OR, as well as comparison operators. The left   argument of a comparison operator must be a query variable.   A Knora ontology entity IRI used in a <code>FILTER</code> must be a property IRI.</li> <li><code>FILTER NOT EXISTS</code></li> <li><code>MINUS</code></li> <li><code>OFFSET</code>: the <code>OFFSET</code> is needed for paging. It does not actually   refer to the number of triples to be returned, but to the   requested page of results. The default value is 0, which refers   to the first page of results.</li> <li><code>ORDER BY</code>: In SPARQL, the result of a <code>CONSTRUCT</code> query is an   unordered set of triples. However, a Gravsearch query returns an   ordered list of resources, which can be ordered by the values of   specified properties. If the query is written in the complex schema,   items below the level of DSP-API values may not be used in <code>ORDER BY</code>.</li> <li><code>BIND</code>: The value assigned must be a DSP resource IRI.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#resources-properties-and-values","title":"Resources, Properties, and Values","text":"<p>Resources can be represented either by an IRI or by a variable, except for the main resource, which must be represented by a variable.</p> <p>It is possible to do a Gravsearch query in which the IRI of the main resource is already known, e.g. to request specific information about that resource and perhaps about linked resources. In this case, the IRI of the main resource must be assigned to a variable using <code>BIND</code>. Note that <code>BIND</code> statements slow the query down, therefore we recommend that you do not use them unless you have to.</p> <p>Properties can be represented by an IRI or a query variable. If a property is represented by a query variable, it can be restricted to certain property IRIs using a <code>FILTER</code>.</p> <p>A Knora value (i.e. a value attached to a <code>knora-api:Resource</code>) must be represented as a query variable.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-on-values","title":"Filtering on Values","text":""},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-on-values-in-the-simple-schema","title":"Filtering on Values in the Simple Schema","text":"<p>In the simple schema, a variable representing a DSP-API value can be used directly in a <code>FILTER</code> expression. For example:</p> <pre><code>?book incunabula:title ?title .\nFILTER(?title = \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\")\n</code></pre> <p>Here the type of <code>?title</code> is <code>xsd:string</code>.</p> <p>The following value types can be compared with literals in <code>FILTER</code> expressions in the simple schema:</p> <ul> <li>Text values (<code>xsd:string</code>)</li> <li>URI values (<code>xsd:anyURI</code>)</li> <li>Integer values (<code>xsd:integer</code>)</li> <li>Decimal values (<code>xsd:decimal</code>)</li> <li>Boolean values (<code>xsd:boolean</code>)</li> <li>Date values (<code>knora-api:Date</code>)</li> <li>List values (<code>knora-api:ListNode</code>)</li> </ul> <p>List values can only be searched for using the equal operator (<code>=</code>), performing an exact match on a list node's label. Labels can be given in different languages for a specific list node. If one of the given list node labels matches, it is considered a match. Note that in the simple schema, uniqueness is not guaranteed (as opposed to the complex schema).</p> <p>A DSP-API value may not be represented as the literal object of a predicate; for example, this is not allowed:</p> <pre><code>?book incunabula:title \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\" .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-on-values-in-the-complex-schema","title":"Filtering on Values in the Complex Schema","text":"<p>In the complex schema, variables representing DSP-API values are not literals. You must add something to the query (generally a statement) to get a literal from a DSP-API value. For example:</p> <pre><code>?book incunabula:title ?title .\n?title knora-api:valueAsString \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\" .\n</code></pre> <p>Here the type of <code>?title</code> is <code>knora-api:TextValue</code>. Note that no <code>FILTER</code> is needed in this example. But if you want to use a different comparison operator, you need a <code>FILTER</code>:</p> <pre><code>?page incunabula:seqnum ?seqnum .\n?seqnum knora-api:intValueAsInt ?seqnumInt .\nFILTER(?seqnumInt &lt;= 10)\n</code></pre> <p>To match a date value in the complex schema, you must use the <code>knora-api:toSimpleDate</code> function in a <code>FILTER</code> (see Date Comparisons). The predicates of <code>knora-api:DateValue</code> (<code>knora-api:dateValueHasStartYear</code>, etc.) are not available in Gravsearch.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#date-comparisons","title":"Date Comparisons","text":"<p>In the simple schema, you can compare a date value directly with a <code>knora-api:Date</code> in a <code>FILTER</code>:</p> <pre><code>?book incunabula:pubdate ?pubdate .\nFILTER(?pubdate &lt; \"JULIAN:1497\"^^knora-api:Date)\n</code></pre> <p>In the complex schema, you must use the function <code>knora-api:toSimpleDate</code>, passing it the variable representing the date value. The date literal used in the comparison must still be a <code>knora-api:Date</code> in the simple schema. This is the only case in which you can use both schemas in a single query:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX knora-api-simple: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true .\n    ?book incunabula:pubdate ?pubdate .\n} WHERE {\n    ?book a incunabula:book .\n    ?book incunabula:pubdate ?pubdate .\n    FILTER(knora-api:toSimpleDate(?pubdate) &lt; \"JULIAN:1497\"^^knora-api-simple:Date)\n} ORDER BY ?pubdate\n</code></pre> <p>You can also use <code>knora-api:toSimpleDate</code> with to search for date tags in standoff text markup (see Matching Standoff Dates).</p> <p>Note that the given date value for comparison must have the following format: </p> <pre><code>(GREGORIAN|JULIAN|ISLAMIC):\\d{1,4}(-\\d{1,2}(-\\d{1,2})?)?( BC| AD| BCE| CE)?(:\\d{1,4}(-\\d{1,2}(-\\d{1,2})?)?( BC| AD| BCE| CE)?)?\n</code></pre> <p>E.g. an exact date like <code>GREGORIAN:2015-12-03</code> or a period like <code>GREGORIAN:2015-12-03:2015-12-04</code>. Dates may also have month or year precision, e.g. <code>ISLAMIC:1407-02</code> (the whole month of december) or <code>JULIAN:1330</code>  (the whole year 1330). An optional ERA indicator term (<code>BCE</code>, <code>CE</code>, or <code>BC</code>, <code>AD</code>) can be added to the date, when no  era is provided the default era <code>AD</code> will be considered. Era can be given as <code>GREGORIAN:1220 BC</code> or in range as  <code>GREGORIAN:600 BC:480 BC</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#searching-for-matching-words","title":"Searching for Matching Words","text":"<p>The function <code>knora-api:matchText</code> searches for matching words anywhere in a text value and is implemented using a full-text search index if available. The first argument must represent a text value (a <code>knore-api:TextValue</code> in the complex schema, or an <code>xsd:string</code> in the simple schema). The second argument is a string literal containing the words to be matched, separated by spaces. The function supports the Lucene Query Parser syntax. Note that Lucene's default operator is a logical OR when submitting several search terms.</p> <p>This function can only be used as the top-level expression in a <code>FILTER</code>.</p> <p>For example, to search for titles that contain the words 'Zeitgl\u00f6cklein' and 'Lebens':</p> <pre><code>?book incunabule:title ?title .\nFILTER knora-api:matchText(?title, \"Zeitgl\u00f6cklein Lebens\")\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-text-by-language","title":"Filtering Text by Language","text":"<p>To filter a text value by language in the simple schema, use the SPARQL <code>lang</code> function on the text value, e.g.:</p> <pre><code>FILTER(lang(?text) = \"fr\")\n</code></pre> <p>In the complex schema, the <code>lang</code> function is not supported. Use the text value's <code>knora-api:textValueHasLanguage</code> predicate instead:</p> <pre><code>?text knora-api:textValueHasLanguage \"fr\" .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#regular-expressions","title":"Regular Expressions","text":"<p>The SPARQL <code>regex</code> function is supported. In the simple schema, you can use it directly on the text value, e.g.</p> <pre><code>?book incunabula:title ?title .\nFILTER regex(?title, \"Zeit\", \"i\")\n</code></pre> <p>In the complex schema, use it on the object of the text value's <code>knora-api:valueAsString</code> predicate:</p> <pre><code>?book incunabula:title ?title .\n?title knora-api:valueAsString ?titleStr .\nFILTER regex(?titleStr, \"Zeit\", \"i\")\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#searching-for-text-markup","title":"Searching for Text Markup","text":"<p>To refer to standoff markup in text values, you must write your query in the complex schema.</p> <p>A <code>knora-api:TextValue</code> can have the property <code>knora-api:textValueHasStandoff</code>, whose objects are the standoff markup tags in the text. You can match the tags you're interested in using <code>rdf:type</code> or other properties of each tag.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#matching-text-in-a-standoff-tag","title":"Matching Text in a Standoff Tag","text":"<p>The function <code>knora-api:matchTextInStandoff</code> searches for standoff tags containing certain terms. The implementation is optimised using the full-text search index if available. The function takes three arguments:</p> <ol> <li>A variable representing a text value.</li> <li>A variable representing a standoff tag.</li> <li>A string literal containing space-separated search terms.</li> </ol> <p>This function can only be used as the top-level expression in a <code>FILTER</code>. For example:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX standoff: &lt;http://api.knora.org/ontology/standoff/v2#&gt;\nPREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasText ?text .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasText ?text .\n    ?text knora-api:textValueHasStandoff ?standoffParagraphTag .\n    ?standoffParagraphTag a standoff:StandoffParagraphTag .\n    FILTER knora-api:matchTextInStandoff(?text, ?standoffParagraphTag, \"Grund Richtigkeit\")\n}\n</code></pre> <p>Here we are looking for letters containing the words \"Grund\" and \"Richtigkeit\" within a single paragraph.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#matching-standoff-links","title":"Matching Standoff Links","text":"<p>If you are only interested in specifying that a resource has some text value containing a standoff link to another resource, the most efficient way is to use the property <code>knora-api:hasStandoffLinkTo</code>, whose subjects and objects are resources. This property is automatically maintained by the API. For example:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasText ?text .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasText ?text .\n    ?letter knora-api:hasStandoffLinkTo ?person .\n    ?person a beol:person .\n    ?person beol:hasIAFIdentifier ?iafIdentifier .\n    ?iafIdentifier knora-api:valueAsString \"(VIAF)271899510\" .\n}\n</code></pre> <p>Here we are looking for letters containing a link to the historian Claude Jordan, who is identified by his Integrated Authority File identifier, <code>(VIAF)271899510</code>.</p> <p>However, if you need to specify the context in which the link tag occurs, you must use the function <code>knora-api:standoffLink</code>. It takes three arguments:</p> <ol> <li>A variable or IRI representing the resource that is the source of the link.</li> <li>A variable representing the standoff link tag.</li> <li>A variable or IRI representing the resource that is the target of the link.</li> </ol> <p>This function can only be used as the top-level expression in a <code>FILTER</code>. For example:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX standoff: &lt;http://api.knora.org/ontology/standoff/v2#&gt;\nPREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasText ?text .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasText ?text .\n    ?text knora-api:textValueHasStandoff ?standoffLinkTag .\n    ?standoffLinkTag a knora-api:StandoffLinkTag .\n    FILTER knora-api:standoffLink(?letter, ?standoffLinkTag, ?person)\n    ?person a beol:person .\n    ?person beol:hasIAFIdentifier ?iafIdentifier .\n    ?iafIdentifier knora-api:valueAsString \"(VIAF)271899510\" .\n    ?standoffLinkTag knora-api:standoffTagHasStartParent ?standoffItalicTag .\n    ?standoffItalicTag a standoff:StandoffItalicTag .\n}\n</code></pre> <p>This has the same effect as the previous example, except that because we are matching the link tag itself, we can specify that its immediate parent is a <code>StandoffItalicTag</code>.</p> <p>If you actually want to get the target of the link (in this example, <code>?person</code>) in the search results, you need to add a statement like <code>?letter knora-api:hasStandoffLinkTo ?person .</code> to the <code>WHERE</code> clause and to the <code>CONSTRUCT</code> clause:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX standoff: &lt;http://api.knora.org/ontology/standoff/v2#&gt;\nPREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasText ?text .\n    ?letter knora-api:hasStandoffLinkTo ?person .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasText ?text .\n    ?text knora-api:textValueHasStandoff ?standoffLinkTag .\n    ?standoffLinkTag a knora-api:StandoffLinkTag .\n    FILTER knora-api:standoffLink(?letter, ?standoffLinkTag, ?person)\n    ?person a beol:person .\n    ?person beol:hasIAFIdentifier ?iafIdentifier .\n    ?iafIdentifier knora-api:valueAsString \"(VIAF)271899510\" .\n    ?standoffLinkTag knora-api:standoffTagHasStartParent ?standoffItalicTag .\n    ?standoffItalicTag a standoff:StandoffItalicTag .\n    ?letter knora-api:hasStandoffLinkTo ?person .\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#matching-standoff-dates","title":"Matching Standoff Dates","text":"<p>You can use the <code>knora-api:toSimpleDate</code> function (see @refDate Comparisons) to match dates in standoff date tags, i.e. instances of <code>knora-api:StandoffDateTag</code> or of one of its subclasses. For example, here we are looking for a text containing an <code>anything:StandoffEventTag</code> (which is a project-specific subclass of <code>knora-api:StandoffDateTag</code>) representing an event that occurred sometime during the month of December 2016:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/v2#&gt;\nPREFIX knora-api-simple: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n    ?thing anything:hasText ?text .\n} WHERE {\n    ?thing a anything:Thing .\n    ?thing anything:hasText ?text .\n    ?text knora-api:textValueHasStandoff ?standoffEventTag .\n    ?standoffEventTag a anything:StandoffEventTag .\n    FILTER(knora-api:toSimpleDate(?standoffEventTag) = \"GREGORIAN:2016-12 CE\"^^knora-api-simple:Date)\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#matching-ancestor-tags","title":"Matching Ancestor Tags","text":"<p>Suppose we want to search for a standoff date in a paragraph, but we know that the paragraph tag might not be the immediate parent of the date tag. For example, the date tag might be in an italics tag, which is in a paragraph tag. In that case, we can use the inferred property <code>knora-api:standoffTagHasStartAncestor</code>. We can modify the previous example to do this:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX standoff: &lt;http://api.knora.org/ontology/standoff/v2#&gt;\nPREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/v2#&gt;\nPREFIX knora-api-simple: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n    ?thing anything:hasText ?text .\n} WHERE {\n    ?thing a anything:Thing .\n    ?thing anything:hasText ?text .\n    ?text knora-api:textValueHasStandoff ?standoffDateTag .\n    ?standoffDateTag a knora-api:StandoffDateTag .\n    FILTER(knora-api:toSimpleDate(?standoffDateTag) = \"GREGORIAN:2016-12-24 CE\"^^knora-api-simple:Date)\n    ?standoffDateTag knora-api:standoffTagHasStartAncestor ?standoffParagraphTag .\n    ?standoffParagraphTag a standoff:StandoffParagraphTag .\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-on-rdfslabel","title":"Filtering on <code>rdfs:label</code>","text":"<p>The <code>rdfs:label</code> of a resource is not a DSP-API value, but you can still search for it. This can be done in the same ways in the simple or complex schema:</p> <p>Using a string literal object:</p> <pre><code>?book rdfs:label \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\" .\n</code></pre> <p>Using a variable and a FILTER:</p> <pre><code>?book rdfs:label ?label .\nFILTER(?label = \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\")\n</code></pre> <p>Using the <code>regex</code> function:</p> <pre><code>?book rdfs:label ?bookLabel .\nFILTER regex(?bookLabel, \"Zeit\", \"i\")\n</code></pre> <p>To match words in an <code>rdfs:label</code> using the full-text search index, use the <code>knora-api:matchLabel</code> function, which works like <code>knora-api:matchText</code>, except that the first argument is a variable representing a resource:</p> <pre><code>FILTER knora-api:matchLabel(?book, \"Zeitgl\u00f6cklein\")\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filtering-on-resource-iris","title":"Filtering on Resource IRIs","text":"<p>A <code>FILTER</code> can compare a variable with another variable or IRI representing a resource. For example, to find a letter whose author and recipient are different persons:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasAuthor ?person1 .\n    ?letter beol:hasRecipient ?person2 .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasAuthor ?person1 .\n    ?letter beol:hasRecipient ?person2 .\n    FILTER(?person1 != ?person2) .\n}\nOFFSET 0\n</code></pre> <p>To find a letter whose author is not a person with a specified IRI:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n    ?letter knora-api:isMainResource true .\n    ?letter beol:hasAuthor ?person1 .\n    ?letter beol:hasRecipient ?person2 .\n} WHERE {\n    ?letter a beol:letter .\n    ?letter beol:hasAuthor ?person1 .\n    ?letter beol:hasRecipient ?person2 .\n    FILTER(?person1 != &lt;http://rdfh.ch/0801/F4n1xKa3TCiR4llJeElAGA&gt;) .\n}\nOFFSET 0\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#construct-clause","title":"CONSTRUCT Clause","text":"<p>In the <code>CONSTRUCT</code> clause of a Gravsearch query, the variable representing the main resource must be indicated with <code>knora-api:isMainResource true</code>. Exactly one variable representing a resource must be marked in this way.</p> <p>Any other statements in the <code>CONSTRUCT</code> clause must also be present in the WHERE clause. If a variable representing a resource or value is used in the <code>WHERE</code> clause but not in the <code>CONSTRUCT</code> clause, the matching resources or values will not be included in the results.</p> <p>If the query is written in the complex schema, all variables in the <code>CONSTRUCT</code> clause must refer to DSP-API resources, DSP-API values, or properties. Data below the level of values may not be mentioned in the <code>CONSTRUCT</code> clause.</p> <p>Predicates from the <code>rdf</code>, <code>rdfs</code>, and <code>owl</code> ontologies may not be used in the <code>CONSTRUCT</code> clause. The <code>rdfs:label</code> of each matching resource is always returned, so there is no need to mention it in the query.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#gravsearch-by-example","title":"Gravsearch by Example","text":"<p>In this section, we provide some sample queries of different complexity to illustrate the usage of Gravsearch.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#getting-all-the-components-of-a-compound-resource","title":"Getting All the Components of a Compound Resource","text":"<p>In order to get all the components of a compound resource, the following Gravsearch query can be sent to the API.</p> <p>In this case, the compound resource is an <code>incunabula:book</code> identified by the IRI <code>http://rdfh.ch/0803/c5058f3a</code> and the components are of type <code>incunabula:page</code> (test data for the Incunabula project). Since inference is assumed, we can use <code>knora-api:StillImageRepresentation</code> (<code>incunabula:page</code> is one of its subclasses). This makes the query more generic and allows for reuse (for instance, a client would like to query different types of compound resources defined in different ontologies).</p> <p><code>ORDER BY</code> is used to sort the components by their sequence number.</p> <p><code>OFFSET</code> is set to 0 to get the first page of results.</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n   ?component knora-api:isMainResource true . # marking of the component searched for as the main resource, required\n   ?component knora-api:seqnum ?seqnum . # return the sequence number in the response\n   ?component knora-api:hasStillImageFileValue ?file . # return the StillImageFile in the response\n} WHERE {\n   ?component a knora-api:StillImageRepresentation . # restriction of the type of component\n   ?component knora-api:isPartOf &lt;http://rdfh.ch/0803/c5058f3a&gt; . # component relates to a compound resource via this property\n   ?component knora-api:seqnum ?seqnum . # component must have a sequence number\n   ?component knora-api:hasStillImageFileValue ?file . # component must have a StillImageFile\n}\nORDER BY ASC(?seqnum) # order by sequence number, ascending\nOFFSET 0 # get first page of results\n</code></pre> <p>The <code>incunabula:book</code> with the IRI <code>http://rdfh.ch/0803/c5058f3a</code> has 402 pages. (This result can be obtained by doing a count query; see Submitting Gravsearch Queries.) However, with <code>OFFSET 0</code>, only the first page of results is returned. The same query can be sent again with <code>OFFSET 1</code> to get the next page of results, and so forth. When a page of results is not full (see settings in <code>app/v2</code> in <code>application.conf</code>) or is empty, no more results are available.</p> <p>By design, it is not possible for the client to get more than one page of results at a time; this is intended to prevent performance problems that would be caused by huge responses. A client that wants to download all the results of a query must request each page sequentially.</p> <p>Let's assume the client is not interested in all of the book's pages, but just in first ten of them. In that case, the sequence number can be restricted using a <code>FILTER</code> that is added to the query's <code>WHERE</code> clause:</p> <pre><code>FILTER (?seqnum &lt;= 10)\n</code></pre> <p>The first page starts with sequence number 1, so with this <code>FILTER</code> only the first ten pages are returned.</p> <p>This query would be exactly the same in the complex schema, except for the expansion of the <code>knora-api</code> prefix:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#traversing-multiple-links","title":"Traversing Multiple Links","text":"<p>Here we are looking for regions of pages that are part of books that have a particular title. In the simple schema:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n  ?region knora-api:isMainResource true ;\n    knora-api:isRegionOf ?page .\n\n  ?page incunabula:partOf ?book .\n\n  ?book incunabula:title ?title .\n} WHERE {\n  ?region a knora-api:Region ;\n    knora-api:isRegionOf ?page .\n\n  ?page a incunabula:page ;\n    incunabula:partOf ?book .\n\n  ?book incunabula:title ?title .\n\n  FILTER(?title = \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\")\n}\n</code></pre> <p>In the complex schema:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n  ?region knora-api:isMainResource true ;\n    knora-api:isRegionOf ?page .\n\n  ?page incunabula:partOf ?book .\n\n  ?book incunabula:title ?title .\n} WHERE {\n  ?region a knora-api:Region ;\n    knora-api:isRegionOf ?page .\n\n  ?page a incunabula:page ;\n    incunabula:partOf ?book .\n\n  ?book incunabula:title ?title .\n\n  ?title knora-api:valueAsString \"Zeitgl\u00f6cklein des Lebens und Leidens Christi\" .\n}\n</code></pre> <p>If we remove the line <code>?book incunabula:title ?title .</code> from the <code>CONSTRUCT</code> clause, so that the <code>CONSTRUCT</code> clause no longer mentions <code>?title</code>, the response will contain the same matching resources, but the titles of those resources will not be included in the response.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#requesting-a-graph-starting-with-a-known-resource","title":"Requesting a Graph Starting with a Known Resource","text":"<p>Here the IRI of the main resource is already known and we want specific information about it, as well as about related resources. In this case, the IRI of the main resource must be assigned to a variable using <code>BIND</code>:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n  ?letter knora-api:isMainResource true ;\n    beol:creationDate ?date ;\n    ?linkingProp1 ?person1 .\n\n  ?person1 beol:hasFamilyName ?familyName .\n} WHERE {\n  BIND(&lt;http://rdfh.ch/0801/_B3lQa6tSymIq7_7SowBsA&gt; AS ?letter)\n\n  ?letter a beol:letter ;\n    beol:creationDate ?date ;\n    ?linkingProp1 ?person1 .\n\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient)\n\n  ?person1 beol:hasFamilyName ?familyName .\n} ORDER BY ?date\n</code></pre> <p>This query would be the same in the complex schema, except for the prefix expansions:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#searching-for-a-list-value-referring-to-a-particular-list-node","title":"Searching for a List Value Referring to a Particular List Node","text":"<p>Since list nodes are represented by their IRI in the complex schema, uniqueness is guranteed (as opposed to the simple schema). Also all the subnodes of the given list node are considered a match.</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n    ?thing anything:hasListItem ?listItem .\n} WHERE {\n    ?thing anything:hasListItem ?listItem .\n    ?listItem knora-api:listValueAsListNode &lt;http://rdfh.ch/lists/0001/treeList02&gt; .\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#type-inference","title":"Type Inference","text":"<p>Gravsearch needs to be able to determine the types of the entities that query variables and IRIs refer to in the <code>WHERE</code> clause. In most cases, it can infer these from context and from the ontologies used. In particular, it needs to know:</p> <ul> <li>The type of the subject and object of each statement.</li> <li>The type that is expected as the object of each predicate.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#type-annotations","title":"Type Annotations","text":"<p>When one or more types cannot be inferred, Gravsearch will return an error message indicating the entities for which it could not determine types. The missing information must then be given by adding type annotations to the query. This can always done by adding statements with the predicate <code>rdf:type</code>. The subject must be a resource or value, and the object must either be <code>knora-api:Resource</code> (if the subject is a resource) or the subject's specific type (if it is a value).</p> <p>For example, consider this query that uses a non-DSP property:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX dcterms: &lt;http://purl.org/dc/terms/&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true ;\n        dcterms:title ?title .\n\n} WHERE {\n    ?book dcterms:title ?title .\n}\n</code></pre> <p>This produces the error message:</p> <pre><code>The types of one or more entities could not be determined:\n  ?book, &lt;http://purl.org/dc/terms/title&gt;, ?title\n</code></pre> <p>To solve this problem, it is enough to specify the types of <code>?book</code> and <code>?title</code>; the type of the expected object of <code>dcterms:title</code> can then be inferred from the type of <code>?title</code>.</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX dcterms: &lt;http://purl.org/dc/terms/&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true ;\n        dcterms:title ?title .\n\n} WHERE {\n\n    ?book rdf:type incunabula:book ;\n        dcterms:title ?title .\n\n    ?title rdf:type xsd:string .\n\n}\n</code></pre> <p>It would also be possible to annotate the property itself, using the predicate <code>knora-api:objectType</code>; then the type of <code>?title</code> would be inferred:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX dcterms: &lt;http://purl.org/dc/terms/&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true ;\n        dcterms:title ?title .\n\n} WHERE {\n\n    ?book rdf:type incunabula:book ;\n        dcterms:title ?title .\n\n    dcterms:title knora-api:objectType xsd:string .\n\n}\n</code></pre> <p>Note that it only makes sense to use <code>dcterms:title</code> in the simple schema, because its object is supposed to be a literal.</p> <p>Here is another example, using a non-DSP class:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;\n\nCONSTRUCT {\n    ?person knora-api:isMainResource true .\n} WHERE {\n    ?person a foaf:Person .\n    ?person foaf:familyName ?familyName .\n    FILTER(?familyName = \"Meier\")\n}\n</code></pre> <p>This produces the error message:</p> <pre><code>Types could not be determined for one or more entities: ?person\n</code></pre> <p>The solution is to specify that <code>?person</code> is a <code>knora-api:Resource</code>:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;\n\nCONSTRUCT {\n    ?person knora-api:isMainResource true .\n} WHERE {\n    ?person a foaf:Person .\n    ?person a knora-api:Resource .\n    ?person foaf:familyName ?familyName .\n    FILTER(?familyName = \"Meier\")\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#inconsistent-types","title":"Inconsistent Types","text":"<p>Gravsearch will also reject a query if an entity is used with inconsistent types. For example:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true ;\n        incunabula:pubdate ?pubdate .\n} WHERE {\n    ?book a incunabula:book ;\n        incunabula:pubdate ?pubdate .\n\n  FILTER(?pubdate = \"JULIAN:1497-03-01\") .\n}\n</code></pre> <p>This returns the error message:</p> <pre><code>One or more entities have inconsistent types:\n\n&lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#pubdate&gt;\n  knora-api:objectType &lt;http://api.knora.org/ontology/knora-api/simple/v2#Date&gt; ;\n  knora-api:objectType &lt;http://www.w3.org/2001/XMLSchema#string&gt; .\n\n?pubdate rdf:type &lt;http://api.knora.org/ontology/knora-api/simple/v2#Date&gt; ;\n  rdf:type &lt;http://www.w3.org/2001/XMLSchema#string&gt; .\n</code></pre> <p>This is because the <code>incunabula</code> ontology says that the object of <code>incunabula:pubdate</code> must be a <code>knora-api:Date</code>, but the <code>FILTER</code> expression compares <code>?pubdate</code> with an <code>xsd:string</code>. The solution is to specify the type of the literal in the <code>FILTER</code>:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?book knora-api:isMainResource true ;\n        incunabula:pubdate ?pubdate .\n} WHERE {\n    ?book a incunabula:book ;\n        incunabula:pubdate ?pubdate .\n\n  FILTER(?pubdate = \"JULIAN:1497-03-01\"^^knora-api:Date) .\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#scoping-issues","title":"Scoping Issues","text":"<p>SPARQL is evaluated from the bottom up. A <code>UNION</code> block therefore opens a new scope, in which variables bound at higher levels are not necessarily in scope. This can cause unexpected results if queries are not carefully designed. Gravsearch tries to prevent this by rejecting queries in the following cases.</p>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#filter-in-union","title":"FILTER in UNION","text":"<p>A <code>FILTER</code> in a <code>UNION</code> block can only use variables that are bound in the same block, otherwise the query will be rejected. This query is invalid because <code>?text</code> is not bound in the <code>UNION</code> block containing the <code>FILTER</code> where the variable is used:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX mls: &lt;http://0.0.0.0:3333/ontology/0807/mls/simple/v2#&gt;\n\nCONSTRUCT {\n    ?lemma knora-api:isMainResource true .\n    ?lemma mls:hasLemmaText ?text .        \n} WHERE {\n    ?lemma a mls:Lemma .\n    ?lemma mls:hasLemmaText ?text .\n\n    {\n        ?lemma mls:hasPseudonym ?pseudo .\n        FILTER regex(?pseudo, \"Abel\", \"i\") .\n    } UNION {\n        FILTER regex(?text, \"Abel\", \"i\") .\n    }\n}\nORDER BY ASC(?text)\nOFFSET 0\n</code></pre> <p>It can be corrected like this:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX mls: &lt;http://0.0.0.0:3333/ontology/0807/mls/simple/v2#&gt;\n\nCONSTRUCT {\n    ?lemma knora-api:isMainResource true .\n    ?lemma mls:hasLemmaText ?text .        \n} WHERE {\n    ?lemma a mls:Lemma .\n    ?lemma mls:hasLemmaText ?text .\n\n    {\n        ?lemma mls:hasPseudonym ?pseudo .\n        FILTER regex(?pseudo, \"Abel\", \"i\") .\n    } UNION {\n        ?lemma mls:hasLemmaText ?text .\n        FILTER regex(?text, \"Abel\", \"i\") .\n    }\n}\nORDER BY ASC(?text)\nOFFSET 0\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#order-by","title":"ORDER BY","text":"<p>A variable used in <code>ORDER BY</code> must be bound at the top level of the <code>WHERE</code> clause. This query is invalid, because <code>?int</code> is not bound at the top level of the <code>WHERE</code> clause:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n    ?thing anything:hasInteger ?int .\n    ?thing anything:hasRichtext ?richtext .\n    ?thing anything:hasText ?text .\n} WHERE {\n    ?thing a knora-api:Resource .\n    ?thing a anything:Thing .\n\n    {\n        ?thing anything:hasRichtext ?richtext .\n        FILTER knora-api:matchText(?richtext, \"test\")\n        ?thing anything:hasInteger ?int .\n    }\n    UNION\n    {\n        ?thing anything:hasText ?text .\n        FILTER knora-api:matchText(?text, \"test\")\n        ?thing anything:hasInteger ?int .\n    }\n}\nORDER BY (?int)\n</code></pre> <p>It can be corrected like this:</p> <pre><code>PREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\nPREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n    ?thing anything:hasInteger ?int .\n    ?thing anything:hasRichtext ?richtext .\n    ?thing anything:hasText ?text .\n} WHERE {\n    ?thing a knora-api:Resource .\n    ?thing a anything:Thing .\n    ?thing anything:hasInteger ?int .\n\n    {\n        ?thing anything:hasRichtext ?richtext .\n        FILTER knora-api:matchText(?richtext, \"test\")\n    }\n    UNION\n    {\n        ?thing anything:hasText ?text .\n        FILTER knora-api:matchText(?text, \"test\")\n    }\n}\nORDER BY (?int)\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/query-language/#query-optimization-by-dependency","title":"Query Optimization by Dependency","text":"<p>The query performance of triplestores, such as Fuseki, is highly dependent on the order of query patterns. To improve performance, Gravsearch automatically reorders the statement patterns in the WHERE clause according to their dependencies on each other, to minimise the number of possible matches for each pattern.</p> <p>Consider the following Gravsearch query:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n  ?letter knora-api:isMainResource true .\n  ?letter ?linkingProp1  ?person1 .\n  ?letter ?linkingProp2  ?person2 .\n  ?letter beol:creationDate ?date .\n} WHERE {\n  ?letter beol:creationDate ?date .\n\n  ?letter ?linkingProp1 ?person1 .\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient )\n\n  ?letter ?linkingProp2 ?person2 .\n  FILTER(?linkingProp2 = beol:hasAuthor || ?linkingProp2 = beol:hasRecipient )\n\n  ?person1 beol:hasIAFIdentifier ?gnd1 .\n  ?gnd1 knora-api:valueAsString \"(DE-588)118531379\" .\n\n  ?person2 beol:hasIAFIdentifier ?gnd2 .\n  ?gnd2 knora-api:valueAsString \"(DE-588)118696149\" .\n} ORDER BY ?date\n</code></pre> <p>Gravsearch optimises the performance of this query by moving these statements to the top of the WHERE clause:</p> <pre><code>  ?gnd1 knora-api:valueAsString \"(DE-588)118531379\" .\n  ?gnd2 knora-api:valueAsString \"(DE-588)118696149\" .\n</code></pre> <p>The rest of the WHERE clause then reads:</p> <pre><code>  ?person1 beol:hasIAFIdentifier ?gnd1 .\n  ?person2 beol:hasIAFIdentifier ?gnd2 .\n  ?letter ?linkingProp1 ?person1 .\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient )\n\n  ?letter ?linkingProp2 ?person2 .\n  FILTER(?linkingProp2 = beol:hasAuthor || ?linkingProp2 = beol:hasRecipient )\n ?letter beol:creationDate ?date .\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/","title":"Reading and Searching Resources","text":"<p>To retrieve an existing resource, the HTTP method <code>GET</code> has to be used. Reading resources may require authentication, since some resources may have restricted viewing permissions.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#responses-describing-resources","title":"Responses Describing Resources","text":"<p>Resources can be returned in JSON-LD, Turtle, or RDF/XML, using HTTP content negotiation (see Response Formats).</p> <p>Operations for reading and searching resources can return responses in either the simple or the complex ontology schema. The complex schema is used by default. To receive a response in the simple schema, use the HTTP request header or URL parameter described in API Schema.</p> <p>Each DSP-API v2 response describing one or more resources returns a single RDF graph. For example, a request for a single resource returns that resource and all its values. In a full-text search, the resource is returned with the values that matched the search criteria. A response to an extended search may represent a whole graph of interconnected resources.</p> <p>In JSON-LD, if only one resource is returned, it is the top-level object; if more than one resource is returned, they are represented as an array of objects of the <code>@graph</code> member of the top-level object (see Named Graphs in the JSON-LD specification).</p> <p>In the complex schema, dependent resources, i.e. resources that are referred to by other resources on the top level, are nested in link value objects. If resources on the top level are referred to by other resources and  these links are part of the response, virtual incoming links are generated; see Gravsearch: Virtual Graph Search).</p> <p>See the interfaces <code>Resource</code> and <code>ResourcesSequence</code> in module <code>ResourcesResponse</code> (exists for both API schemas: <code>ApiV2Simple</code> and <code>ApiV2WithValueObjects</code>).</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#requesting-text-markup-as-xml","title":"Requesting Text Markup as XML","text":"<p>When requesting a text value with standoff markup, there are three possibilities:</p> <ol> <li>The text value uses standard mapping.</li> <li>The text value uses a custom mapping which does not specify an XSL transformation.</li> <li>The text value uses a custom mapping which specifies an XSL transformation.</li> </ol> <p>In the first case, the mapping will be defined as:</p> <pre><code>\"kb:textValueHasMapping\": {\n        \"@id\": \"http://rdfh.ch/standoff/mappings/StandardMapping\"\n    }\n</code></pre> <p>the text value will only be available as <code>kb:textValueAsXml</code>, which will be of the following structure:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;text documentType=\"html\"&gt;\n   ...\n&lt;/text&gt;\n</code></pre> <p>where the content of <code>&lt;text&gt;</code> is a limited set of HTML tags that can be handled by CKEditor in DSP-APP. This allows for both displaying and editing the text value.</p> <p>In the second and third case, <code>kb:textValueHasMapping</code> will point to the custom mapping  that may or may not specify an XSL transformation.</p> <p>If no transformation is specified (second case), the text value will be returned only as <code>kb:textValueAsXml</code>. This property will be a string containing the contents of the initially uploaded XML.</p> <p>Note: The returned XML document is equivalent to the uploaded document but it is not necessarily identical - the order of the attributes in one element may vary from the original.</p> <p>In the third case, when a transformation is specified, both <code>kb:textValueAsXml</code> and <code>kb:textValueAsHtml</code> will be returned. <code>kb:textValueAsHtml</code> is the result of the XSL transformation applied to <code>kb:textValueAsXml</code>. The HTML representation is intended to display the text value in a human readable and properly styled way,  while the XML representation can be used to update the text value.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-the-representation-of-a-resource-by-iri","title":"Get the Representation of a Resource by IRI","text":""},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-a-full-representation-of-a-resource-by-iri","title":"Get a Full Representation of a Resource by IRI","text":"<p>A full representation of resource can be obtained by making a GET request to the API providing its IRI. Because a DSP IRI has the format of a URL, its IRI has to be URL-encoded.</p> <p>To get the resource with the IRI <code>http://rdfh.ch/c5058f3a</code> (a book from the sample Incunabula project, which is included in the DSP-API  server's test data), make a HTTP GET request to the <code>resources</code> route (path segment <code>resources</code> in the API call) and append the URL-encoded IRI:</p> <pre><code>HTTP GET to http://host/v2/resources/http%3A%2F%2Frdfh.ch%2Fc5058f3a\n</code></pre> <p>If necessary, several resources can be queried at the same time, their IRIs separated by slashes. Please note that the amount of resources that can be queried in one requested is limited. See the settings for <code>app/v2</code> in <code>application.conf</code>.</p> <p>More formally, the URL looks like this:</p> <pre><code>HTTP GET to http://host/v2/resources/resourceIRI(/anotherResourceIri)*\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-a-full-representation-of-a-version-of-a-resource-by-iri","title":"Get a Full Representation of a Version of a Resource by IRI","text":"<p>To get a specific past version of a resource, use the route described in Get a Full Representation of a Resource by IRI, and add the URL parameter <code>?version=TIMESTAMP</code>, where <code>TIMESTAMP</code> is an xsd:dateTimeStamp in the UTC timezone. The timestamp can either be URL-encoded, or submitted with all punctuation (<code>-</code>, <code>:</code>, and <code>.</code>) removed (this is to accept timestamps from DSP's ARK URLs).</p> <p>The resource will be returned with the values that it had at the specified time. Since DSP only versions values, not resource metadata (e.g. <code>rdfs:label</code>), the current metadata will be returned.</p> <p>Each value will be returned with the permissions that are attached to the current version of the value (see Permissions).</p> <p>The returned resource will include the predicate <code>knora-api:versionDate</code>, containing the timestamp that was submitted, and its <code>knora-api:versionArkUrl</code> (see Resource Permalinks) will contain the same timestamp.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-a-value-in-a-resource","title":"Get a Value in a Resource","text":"<p>To get a specific value of a resource, use this route:</p> <pre><code>HTTP GET to http://host/v2/values/resourceIRI/valueUUID\n</code></pre> <p>The resource IRI must be URL-encoded. The path element <code>valueUUID</code> is the string object of the value's <code>knora-api:valueHasUUID</code>.</p> <p>The value will be returned within its containing resource, in the same format as for Responses Describing Resources, but without any of the resource's other values.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-a-version-of-a-value-in-a-resource","title":"Get a Version of a Value in a Resource","text":"<p>To get a particular version of a specific value of a resource, use the route described in Get a Value in a Resource, and add the URL parameter <code>?version=TIMESTAMP</code>, where <code>TIMESTAMP</code> is an xsd:dateTimeStamp in the UTC timezone. The timestamp can either be URL-encoded, or submitted with all punctuation (<code>-</code>, <code>:</code>, and <code>.</code>) removed (this is to accept timestamps from DSP's ARK URLs).</p> <p>The value will be returned within its containing resource, in the same format as for Responses Describing Resources, but without any of the resource's other values.</p> <p>Since DSP only versions values, not resource metadata (e.g. <code>rdfs:label</code>), the current resource metadata will be returned.</p> <p>The value will be returned with the permissions that are attached to its current version (see Permissions).</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-the-version-history-of-a-resource","title":"Get the Version History of a Resource","text":"<p>To get a list of the changes that have been made to a resource since its creation, use this route:</p> <pre><code>HTTP GET to http://host/v2/resources/history/resourceIRI[?startDate=START_DATE&amp;endDate=END_DATE]\n</code></pre> <p>The resource IRI must be URL-encoded. The start and end dates are optional, and are URL-encoded timestamps in xsd:dateTimeStamp format. The start date is inclusive, and the end date is exclusive. If the start date is not provided, the resource's history since its creation is returned. If the end date is not provided, the resource's history up to the present is returned.</p> <p>The response is a list of changes made to the resource, in reverse chronological order. Each entry has the properties <code>knora-api:author</code> (the IRI of the user who made the change) and <code>knora-api:versionDate</code> (the date when the change was made). For example:</p> <pre><code>{\n  \"@graph\" : [ {\n    \"knora-api:author\" : {\n      \"@id\" : \"http://rdfh.ch/users/BhkfBc3hTeS_IDo-JgXRbQ\"\n    },\n    \"knora-api:versionDate\" : {\n      \"@type\" : \"xsd:dateTimeStamp\",\n      \"@value\" : \"2019-02-11T09:05:10Z\"\n    }\n  }, {\n    \"knora-api:author\" : {\n      \"@id\" : \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n    },\n    \"knora-api:versionDate\" : {\n      \"@type\" : \"xsd:dateTimeStamp\",\n      \"@value\" : \"2019-02-10T10:30:10Z\"\n    }\n  }, {\n    \"knora-api:author\" : {\n      \"@id\" : \"http://rdfh.ch/users/BhkfBc3hTeS_IDo-JgXRbQ\"\n    },\n    \"knora-api:versionDate\" : {\n      \"@type\" : \"xsd:dateTimeStamp\",\n      \"@value\" : \"2019-02-10T10:05:10Z\"\n    }\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>The entries include all the dates when the resource's values were created or modified (within the requested date range), as well as the date when the resource was created (if the requested date range allows it). Each date is included only once. Since DSP only versions values, not resource metadata (e.g. <code>rdfs:label</code>), changes to a resource's metadata are not included in its version history.</p> <p>To request the resource as it was at each of these dates, see Get a Full Representation of a Version of a Resource by IRI.  For consistency in citation, we recommend using these dates when requesting resource versions.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-the-preview-of-a-resource-by-iri","title":"Get the preview of a resource by IRI","text":"<p>In some cases, the client may only want to request the preview of a resource, which just provides its metadata (e.g. its IRI, <code>rdfs:label</code>, and type), without its values.</p> <p>This works exactly like making a conventional resource request, using the path segment <code>resourcespreview</code>:</p> <pre><code>HTTP GET to http://host/v2/resourcespreview/resourceIRI(/anotherResourceIri)*\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-a-graph-of-resources","title":"Get a Graph of Resources","text":"<p>DSP can return a graph of connections between resources, e.g. for generating a network diagram.</p> <pre><code>HTTP GET to http://host/v2/graph/resourceIRI[depth=Integer]\n[direction=outbound|inbound|both][excludeProperty=propertyIri]\n</code></pre> <p>The first parameter must be preceded by a question mark <code>?</code>, any following parameter by an ampersand <code>&amp;</code>.</p> <ul> <li><code>depth</code> must be at least 1. The maximum depth is a DSP configuration setting.   The default is 4.</li> <li><code>direction</code> specifies the direction of the links to be queried, i.e. links to   and/or from the given resource. The default is <code>outbound</code>.</li> <li><code>excludeProperty</code> is an optional link property to be excluded from the   results.</li> </ul> <p>To accommodate large graphs, the graph response format is very concise, and is therefore simpler than the usual resources response format. Each resource represented only by its IRI, class, and label. Direct links are shown instead of link values. For example:</p> <pre><code>{\n  \"@graph\" : [ {\n    \"@id\" : \"http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ\",\n    \"@type\" : \"anything:Thing\",\n    \"rdfs:label\" : \"Sierra\"\n  }, {\n    \"@id\" : \"http://rdfh.ch/0001/A67ka6UQRHWf313tbhQBjw\",\n    \"@type\" : \"anything:Thing\",\n    \"rdfs:label\" : \"Victor\"\n  }, {\n    \"@id\" : \"http://rdfh.ch/0001/Lz7WEqJETJqqsUZQYexBQg\",\n    \"@type\" : \"anything:Thing\",\n    \"rdfs:label\" : \"Foxtrot\"\n  }, {\n    \"@id\" : \"http://rdfh.ch/0001/WLSHxQUgTOmG1T0lBU2r5w\",\n    \"@type\" : \"anything:Thing\",\n    \"anything:hasOtherThing\" : {\n      \"@id\" : \"http://rdfh.ch/0001/A67ka6UQRHWf313tbhQBjw\"\n    },\n    \"rdfs:label\" : \"Tango\"\n  }, {\n    \"@id\" : \"http://rdfh.ch/0001/start\",\n    \"@type\" : \"anything:Thing\",\n    \"anything:hasOtherThing\" : [ {\n      \"@id\" : \"http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ\"\n    }, {\n      \"@id\" : \"http://rdfh.ch/0001/WLSHxQUgTOmG1T0lBU2r5w\"\n    }, {\n      \"@id\" : \"http://rdfh.ch/0001/tPfZeNMvRVujCQqbIbvO0A\"\n    } ],\n    \"rdfs:label\" : \"Romeo\"\n  }, {\n    \"@id\" : \"http://rdfh.ch/0001/tPfZeNMvRVujCQqbIbvO0A\",\n    \"@type\" : \"anything:Thing\",\n    \"anything:hasOtherThing\" : {\n      \"@id\" : \"http://rdfh.ch/0001/Lz7WEqJETJqqsUZQYexBQg\"\n    },\n    \"rdfs:label\" : \"Echo\"\n  } ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"anything\" : \"http://0.0.0.0:3333/ontology/0001/anything/v2#\"\n  }\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#search-for-resources","title":"Search for Resources","text":""},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#search-for-a-resource-by-its-rdfslabel","title":"Search for a Resource by its <code>rdfs:label</code>","text":"<p>DSP offers the possibility to search for resources by their <code>rdfs:label</code>. The use case for this search is to find a specific resource as you type. E.g., the user wants to get a list of resources whose <code>rdfs:label</code> contain some search terms separated by a whitespace character:</p> <ul> <li>Zeit</li> <li>Zeitg</li> <li>...</li> <li>Zeitgl\u00f6cklein d</li> <li>...</li> <li>Zeitgl\u00f6cklein des Lebens</li> </ul> <p>With each character added to the last term, the selection gets more specific. The first term should at least contain three characters. To make this kind of \"search as you type\" possible, a wildcard character is automatically added to the last search term. </p> <p>Characters provided by the user that have a special meaning in the Lucene Query Parser  syntax need to be escaped. If a user wants to search for the string \"Zeit-Gl\u00f6cklein\", she needs to type \"Zeit-Gl\u00f6cklein\". The special characters that need escaping are:  <code>+</code>, <code>-</code>, <code>&amp;</code>, <code>|</code>, <code>!</code>, <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code>, <code>^</code>, <code>\"</code>, <code>~</code>, <code>*</code>, <code>?</code>, <code>:</code>, <code>\\</code>, <code>/</code></p> <pre><code>HTTP GET to http://host/v2/searchbylabel/searchValue[limitToResourceClass=resourceClassIRI]\n[limitToProject=projectIRI][offset=Integer]\n</code></pre> <p>The first parameter must be preceded by a question mark <code>?</code>, any following parameter by an ampersand <code>&amp;</code>.</p> <p>The default value for the parameter <code>offset</code> is 0, which returns the first page of search results. Subsequent pages of results can be fetched by increasing <code>offset</code> by one. The amount of results per page is defined in <code>app/v2</code> in <code>application.conf</code>.</p> <p>For performance reasons, standoff markup is not queried for this route.</p> <p>To request the number of results rather than the results themselves, you can do a count query:</p> <pre><code>HTTP GET to http://host/v2/searchbylabel/count/searchValue[limitToResourceClass=resourceClassIRI][limitToProject=projectIRI][offset=Integer]\n</code></pre> <p>The response to a count query request is an object with one predicate, <code>http://schema.org/numberOfItems</code>, with an integer value.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#full-text-search","title":"Full-text Search","text":"<p>DSP offers a full-text search that searches through all textual representations of values and <code>rdfs:label</code> of resources.  Full-text search supports the  Lucene Query Parser syntax. Note that Lucene's default operator is a logical OR when submitting several search terms.</p> <p>The search index used by DSP transforms all text into lower case characters and splits text into tokens by whitespace.  For example, if a text value is: <code>The cake needs flour, sugar, and butter.</code>,  the tokens are <code>the</code>, <code>cake</code>, <code>needs</code>, <code>flour,</code>, <code>sugar,</code>, <code>and</code>, <code>butter.</code>. Note that punctuation marks like <code>,</code> and <code>.</code> are left with the word where they occurred. Therefore, if you search for <code>sugar</code> you would have to use <code>sugar*</code> or <code>sugar?</code>  to get results that contain <code>sugar,</code> or <code>sugar.</code> as well. The reason for this kind of tokenization is  that some users need to be able to search explicitly for special characters including punctuation marks.</p> <p>Alphabetic, numeric, symbolic, and diacritical Unicode characters  which are not in the first 127 ASCII characters (the \"Basic Latin\" Unicode block)  are converted into their ASCII equivalents, if one exists, e.g. <code>\u00e9</code> or <code>\u00e4</code> are converted into <code>e</code> and <code>a</code>.</p> <p>Please note that the search terms have to be URL-encoded.</p> <pre><code>HTTP GET to http://host/v2/search/searchValue[limitToResourceClass=resourceClassIRI]\n[limitToStandoffClass=standoffClassIri][limitToProject=projectIRI][offset=Integer]\n</code></pre> <p>The first parameter has to be preceded by a question mark <code>?</code>, any following parameter by an ampersand <code>&amp;</code>.</p> <p>A search value must have a minimal length of three characters (default value)  as defined in <code>search-value-min-length</code> in <code>application.conf</code>.</p> <p>A search term may contain wildcards. A <code>?</code> represents a single character.  It has to be URL-encoded as <code>%3F</code> since it has a special meaning in the URL syntax.  For example, the term <code>Uniform</code> can be search for like this:</p> <pre><code>HTTP GET to http://host/v2/search/Unif%3Frm\n</code></pre> <p>A <code>*</code> represents zero, one or multiple characters. For example, the term <code>Uniform</code> can be searched for like this:</p> <pre><code>HTTP GET to http://host/v2/search/Uni*m\n</code></pre> <p>The default value for the parameter <code>offset</code> is 0 which returns the first page of search results. Subsequent pages of results can be fetched by increasing <code>offset</code> by one. The amount of results per page is defined in <code>results-per-page</code> in <code>application.conf</code>.</p> <p>If the parameter <code>limitToStandoffClass</code> is provided, DSP will look for search terms that are marked up with the indicated standoff class.</p> <p>If the parameter <code>returnFiles=true</code> is provided, DSP will return any file value attached to each matching resource.</p> <p>To request the number of results rather than the results themselves, you can do a count query:</p> <pre><code>HTTP GET to http://host/v2/search/count/searchValue[limitToResourceClass=resourceClassIRI][limitToStandoffClass=standoffClassIri][limitToProject=projectIRI][offset=Integer]\n</code></pre> <p>The first parameter has to be preceded by a question mark <code>?</code>, any following parameter by an ampersand <code>&amp;</code>.</p> <p>The response to a count query request is an object with one predicate, <code>http://schema.org/numberOfItems</code>, with an integer value.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#gravsearch","title":"Gravsearch","text":"<p>For more complex queries than a full-text search, DSP offers a query language called Gravsearch: Virtual Graph Search).</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#support-of-teixml","title":"Support of TEI/XML","text":"<p>To convert standoff markup to TEI/XML, see TEI/XML.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#iiif-manifests","title":"IIIF Manifests","text":"<p>This is an experimental feature and may change.</p> <p>To generate a IIIF manifest for a resource, containing the still image representations that have <code>knora-api:isPartOf</code> (or a subproperty) pointing to that resource:</p> <pre><code>HTTP GET to http://host/v2/resources//iiifmanifest/RESOURCE_IRI\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#reading-resources-by-class-from-a-project","title":"Reading Resources by Class from a Project","text":"<p>To facilitate the development of tabular user interfaces for data entry, it is possible to get a paged list of all the resources belonging to a particular class in a given project, sorted by the value of a property:</p> <pre><code>HTTP GET to http://host/v2/resources?resourceClass=RESOURCE_CLASS_IRI&amp;page=PAGE[&amp;orderByProperty=PROPERTY_IRI]\n</code></pre> <p>This is useful only if the project does not contain a large amount of data; otherwise, you should use Gravsearch to search using more specific criteria.</p> <p>The specified class and property are used without inference; they will not match subclasses or subproperties.</p> <p>The HTTP header <code>X-Knora-Accept-Project</code> must be submitted; its value is a DSP project IRI. In the request URL, the values of <code>resourceClass</code> and <code>orderByProperty</code> are URL-encoded IRIs in the complex schema. The <code>orderByProperty</code> parameter is optional; if it is not supplied, resources will be sorted alphabetically by resource IRI (an arbitrary but consistent order). The value of <code>page</code> is a 0-based integer page number. Paging works as it does in Gravsearch).</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-the-full-history-of-a-resource-and-its-values-as-events","title":"Get the Full History of a Resource and its Values as Events","text":"<p>To get a list of the changes that have been made to a resource and its values since its creation as events ordered by  date:</p> <pre><code>HTTP GET to http://host/v2/resources/resourceHistoryEvents/&lt;resourceIRI&gt;\n</code></pre> <p>The resource IRI must be URL-encoded. The response is a list of events describing changes made to the resource and its values,  in chronological order. Each entry has the properties:   <code>knora-api:eventType</code> (the type of the operation performed on a specific date. The operation can be either  <code>createdResource</code>, <code>updatedResourceMetadata</code>, <code>deletedResource</code>, <code>createdValue</code>, <code>updatedValueContent</code>,   <code>updatedValuePermissions</code>, or <code>deletedValue</code>.),  <code>knora-api:versionDate</code> (the date when the change was made), <code>knora-api:author</code> (the IRI of the user who made the change), <code>knora-api:eventBody</code> (the information necessary to make the same request). </p> <p>For example, the following response contains the list of events describing the version history of the resource  <code>http://rdfh.ch/0001/thing-with-history</code> ordered by date:</p> <pre><code>{\n  \"@graph\" : [ \n        {\n            \"knora-api:eventType\": \"createdResource\",\n            \"knora-api:author\": {\n                \"@id\": \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n            },\n            \"knora-api:eventBody\": {\n                \"rdfs:label\": \"A thing with version history\",\n                \"knora-api:resourceIri\": \"http://rdfh.ch/0001/thing-with-history\",\n                \"knora-api:resourceClassIri\": \"http://www.knora.org/ontology/0001/anything#Thing\",\n                \"knora-api:hasPermissions\": \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:UnknownUser\",\n                \"knora-api:creationDate\": {\n                    \"@value\": \"2019-02-08T15:05:10Z\",\n                    \"@type\": \"xsd:dateTimeStamp\"\n                },\n                \"knora-api:attachedToProject\": {\n                    \"@id\": \"http://rdfh.ch/projects/0001\"\n                }\n            },\n            \"knora-api:versionDate\": {\n                \"@value\": \"2019-02-08T15:05:10Z\",\n                \"@type\": \"xsd:dateTimeStamp\"\n            }\n        },\n        {\n            \"knora-api:eventType\": \"createdValue\",\n            \"knora-api:author\": {\n                \"@id\": \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n            },\n            \"knora-api:eventBody\": {\n                \"knora-api:resourceIri\": \"http://rdfh.ch/0001/thing-with-history\",\n            \"knora-api:resourceClassIri\": \"http://www.knora.org/ontology/0001/anything#Thing\",\n                \"knora-api:valueCreationDate\": {\n                    \"@value\": \"2019-02-10T10:30:10Z\",\n                    \"@type\": \"xsd:dateTimeStamp\"\n                },\n                \"knora-api:valueHasUUID\": \"IZGOjVqxTfSNO4ieKyp0SA\",\n                \"knora-api:hasPermissions\": \"V knora-admin:UnknownUser|M knora-admin:ProjectMember\",\n                \"@type\": \"knora-base:LinkValue\",\n                \"http://www.knora.org/ontology/0001/anything#hasOtherThingValue\": {\n                    \"knora-api:linkValueHasTargetIri\": {\n                        \"@id\": \"http://rdfh.ch/0001/2qMtTWvVRXWMBcRNlduvCQ\"\n                    }\n                },\n                \"rdf:Property\": \"http://www.knora.org/ontology/0001/anything#hasOtherThingValue\",\n                \"@id\": \"http://rdfh.ch/0001/thing-with-history/values/3a\"\n            },\n            \"knora-api:versionDate\": {\n                \"@value\": \"2019-02-10T10:30:10Z\",\n                \"@type\": \"xsd:dateTimeStamp\"\n            }\n        },\n        {\n            \"knora-api:eventType\": \"updatedValueContent\",\n            \"knora-api:author\": {\n                \"@id\": \"http://rdfh.ch/users/BhkfBc3hTeS_IDo-JgXRbQ\"\n            },\n            \"knora-api:eventBody\": {\n                \"knora-api:resourceIri\": \"http://rdfh.ch/0001/thing-with-history\",\n                \"knora-api:resourceClassIri\": \"http://www.knora.org/ontology/0001/anything#Thing\"\n                \"http://www.knora.org/ontology/0001/anything#hasText\": {\n                    \"knora-api:valueAsString\": \"two\"\n                },\n                \"knora-api:valueCreationDate\": {\n                    \"@value\": \"2019-02-11T10:05:10Z\",\n                    \"@type\": \"xsd:dateTimeStamp\"\n                },\n                \"knora-base:previousValue\": \"http://rdfh.ch/0001/thing-with-history/values/2a\",\n                \"knora-api:valueHasUUID\": \"W5fm67e0QDWxRZumcXcs6g\",\n                \"@type\": \"knora-base:TextValue\",\n                \"rdf:Property\": \"http://www.knora.org/ontology/0001/anything#hasText\",\n                \"@id\": \"http://rdfh.ch/0001/thing-with-history/values/2b\"\n            },\n            \"knora-api:versionDate\": {\n                \"@value\": \"2019-02-11T10:05:10Z\",\n                \"@type\": \"xsd:dateTimeStamp\"\n            }\n        },\n        {\n            \"knora-api:eventType\": \"deletedValue\",\n            \"knora-api:author\": {\n                \"@id\": \"http://rdfh.ch/users/9XBCrDV3SRa7kS1WwynB4Q\"\n            },\n            \"knora-api:eventBody\": {\n                \"knora-api:resourceIri\": \"http://rdfh.ch/0001/thing-with-history\",\n                \"knora-api:resourceClassIri\": \"http://www.knora.org/ontology/0001/anything#Thing\",\n                \"knora-base:previousValue\": \"http://rdfh.ch/0001/thing-with-history/values/3a\",\n                \"knora-api:deleteDate\": {\n                    \"@type\": \"xsd:dateTimeStamp\",\n                    \"@value\": \"2019-02-13T09:00:10Z\"\n                },\n                \"knora-api:isDeleted\": true,\n                \"@type\": \"knora-base:LinkValue\",\n                \"rdf:Property\": \"http://www.knora.org/ontology/0001/anything#hasOtherThingValue\",\n                \"@id\": \"http://rdfh.ch/0001/thing-with-history/values/3b\"\n            },\n            \"knora-api:versionDate\": {\n                \"@value\": \"2019-02-13T09:00:10Z\",\n                \"@type\": \"xsd:dateTimeStamp\"\n            }\n        }\n    ],\n  \"@context\" : {\n    \"rdf\" : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"rdfs\" : \"http://www.w3.org/2000/01/rdf-schema#\",\n    \"xsd\" : \"http://www.w3.org/2001/XMLSchema#\",\n    \"knora-api\" : \"http://api.knora.org/ontology/knora-api/v2#\"\n  }\n}\n</code></pre> <p>Since the history of changes made to the metadata of a resource is not part of resouce's version history, there are no  events describing the changes on metadata elements like its <code>rdfs:label</code> or <code>rdfs:comment</code>.  The only record depicting a change in a resource's metadata is the <code>knora-api:lastModificationDate</code> of the resource. Thus  the event <code>updatedResourceMetadata</code> indicates a change in a resource's metadata, its <code>knora-api:eventBody</code> contains the  payload needed to update the value of the resource's <code>lastModificationDate</code>, see  modifying metadata of a resource.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-and-searching-resources/#get-the-full-history-of-all-resources-of-a-project-as-events","title":"Get the Full History of all Resources of a Project as Events","text":"<p>To get a list of the changes that have been made to the resources and their values of a project as events ordered by  date:</p> <pre><code>HTTP GET to http://host/v2/resources/projectHistoryEvents/&lt;projectIRI&gt;\n</code></pre> <p>The project IRI must be URL-encoded. The response contains the resource history events of all resources that belong to  the specified project.</p>"},{"location":"DSP-API/03-endpoints/api-v2/reading-user-permissions/","title":"Reading the User's Permissions on Resources and Values","text":"<p>In the complex API schema, each resource and value is returned with the predicate <code>knora-api:userHasPermission</code>. The object of this predicate is a string containing a permission code, which indicates the requesting user's maximum permission on the resource or value. These are the possible permission codes, in ascending order:</p> <ul> <li><code>RV</code>: restricted view permission (least privileged)</li> <li><code>V</code>: view permission</li> <li><code>M</code> modify permission</li> <li><code>D</code>: delete permission</li> <li><code>CR</code>: change rights permission (most privileged)</li> </ul> <p>Each permission implies all lesser permissions. For more details, see Permissions.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/","title":"XML to Standoff Mapping in API v2","text":""},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#creating-a-custom-mapping","title":"Creating a custom Mapping","text":"<p>The DSP-API's standard standoff mapping only supports a few HTML tags. In order to submit more complex XML markup, a custom mapping has to be created first. A mapping expresses the relations between XML elements and attributes, and their corresponding standoff classes and properties. The relations expressed in a mapping are one-to-one relations, so the XML can be recreated from the data in RDF. However, since HTML offers a very limited set of elements, custom mappings support the combination of element names and classes. In this way, the same element can be used several times in combination with another classname (please note that <code>&lt;a&gt;</code> without a class is a hyperlink whereas <code>&lt;a class=\"salsah-link\"&gt;</code> is an internal link/standoff link).</p> <p>With a mapping, a default XSL transformation may be provided to transform the XML to HTML before sending it back to the client. This is useful when the client is a web-browser expecting HTML (instead of XML).</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#basic-structure-of-a-mapping","title":"Basic Structure of a Mapping","text":"<p>The mapping is written in XML itself (for a formal description, see <code>webapi/src/resources/mappingXMLToStandoff.xsd</code>). It has the following structure (the indentation corresponds to the nesting in XML):</p> <ul> <li><code>&lt;mapping&gt;</code>: the root element<ul> <li><code>&lt;defaultXSLTransformation&gt; (optional)</code>: the IRI of the   default XSL transformation to be applied to the XML when   reading it back from DSP-API. The XSL transformation is   expected to produce HTML. If given, the IRI has to refer to   a resource of type <code>knora-base:XSLTransformation</code>.</li> <li><code>&lt;mappingElement&gt;</code>: an element of the mapping (at least one)<ul> <li><code>&lt;tag&gt;</code>: information about the XML element that is mapped to a standoff class<ul> <li><code>&lt;name&gt;</code>: name of the XML element</li> <li><code>&lt;class&gt;</code>: value of the class attribute of   the XML element, if any. If the element has   no class attribute, the keyword <code>noClass</code>   has to be used.</li> <li><code>&lt;namespace&gt;</code>: the namespace the XML element   belongs to, if any. If the element does not   belong to a namespace, the keyword   <code>noNamespace</code> has to be used.</li> <li><code>&lt;separatesWords&gt;</code>: a Boolean value   indicating whether this tag separates words   in the text. Once an XML document is   converted to RDF-standoff the markup is   stripped from the text, possibly leading to   continuous text that has been separated by   tags before. For structural tags like   paragraphs etc., <code>&lt;separatesWords&gt;</code> can be   set to <code>true</code> in which case a special   separator is inserted in the text in the   RDF representation. In this way, words stay   separated and are represented in the   fulltext index as such.</li> </ul> </li> <li><code>&lt;standoffClass&gt;</code>: information about the standoff class the XML element is mapped to<ul> <li><code>&lt;classIri&gt;</code>: IRI of the standoff class the XML element is mapped to</li> <li><code>&lt;attributes&gt;</code>: XML attributes to be mapped to standoff properties (other than <code>id</code> or <code>class</code>), if any<ul> <li><code>&lt;attribute&gt;</code>: an XML attribute to be mapped to a standoff property, may be repeated<ul> <li><code>&lt;attributeName&gt;</code>: the name of the XML attribute</li> <li><code>&lt;namespace&gt;</code>: the namespace the attribute belongs to, if any.    If the attribute does not belong to a namespace, the keyword <code>noNamespace</code> has to be used.</li> <li><code>&lt;propertyIri&gt;</code>: the IRI of the standoff property the XML attribute is mapped to.</li> </ul> </li> </ul> </li> <li><code>&lt;datatype&gt;</code>: the data type of the standoff class, if any.<ul> <li><code>&lt;type&gt;</code>: the IRI of the data type standoff class</li> <li><code>&lt;attributeName&gt;</code>: the name of the attribute holding the typed value in the expected standard format</li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> <p>XML structure of a mapping:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mapping&gt;\n    &lt;defaultXSLTransformation&gt;Iri of a knora-base:XSLTransformation&lt;/defaultXSLTransformation&gt;\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;XML element name&lt;/name&gt;\n            &lt;class&gt;XML class name or \"noClass\"&lt;/class&gt;\n            &lt;namespace&gt;XML namespace or \"noNamespace\"&lt;/namespace&gt;\n            &lt;separatesWords&gt;true or false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;standoff class Iri&lt;/classIri&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;\n                    &lt;attributeName&gt;XML attribute name&lt;/attributeName&gt;\n                    &lt;namespace&gt;XML namespace or \"noNamespace\"&lt;/namespace&gt;\n                    &lt;propertyIri&gt;standoff property Iri&lt;/propertyIri&gt;\n                &lt;/attribute&gt;\n            &lt;/attributes&gt;\n            &lt;datatype&gt;\n                &lt;type&gt;standoff data type class&lt;/type&gt;\n                &lt;attributeName&gt;XML attribute with the typed value&lt;/attributeName&gt;\n            &lt;/datatype&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n    &lt;mappingElement&gt;\n       ...\n    &lt;/mappingElement&gt;\n&lt;/mapping&gt;\n</code></pre> <p>Please note that the absence of an XML namespace and/or a class have to be explicitly stated using the keywords <code>noNamespace</code> and <code>noClass</code>. This is because we use XML Schema validation to ensure the one-to-one relations between XML elements and standoff classes. XML Schema validation's unique checks do not support optional values.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#id-and-class-attributes","title":"<code>id</code> and <code>class</code> Attributes","text":"<p>The <code>id</code> and <code>class</code> attributes are supported by default and do not have to be included in the mapping like other attributes. The <code>id</code> attribute identifies an element and must be unique in the document. <code>id</code> is an optional attribute. The <code>class</code> attribute allows for the reuse of an element in the mapping, i.e. the same element can be combined with different class names and mapped to different standoff classes (mapping element <code>&lt;class&gt;</code> in <code>&lt;tag&gt;</code>).</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#respecting-cardinalities","title":"Respecting Cardinalities","text":"<p>A mapping from XML elements and attributes to standoff classes and standoff properties must respect the cardinalities defined in the ontology for those very standoff classes. If an XML element is mapped to a certain standoff class and this class requires a standoff property, an attribute must be defined for the XML element mapping to that very standoff property. Equally, all mappings for attributes of an XML element must have corresponding cardinalities for standoff properties defined for the standoff class the XML element maps to.</p> <p>However, since an XML attribute may occur once at maximum, it makes sense to make the corresponding standoff property required (<code>owl:cardinality</code> of one) in the ontology or optional (<code>owl:maxCardinality</code> of one), but not allowing it more than once.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#standoff-data-types","title":"Standoff Data Types","text":"<p>DSP-API allows the use of all its value types as standoff data types (defined in <code>knora-base.ttl</code>):</p> <ul> <li><code>knora-base:StandoffLinkTag</code>: Represents a reference to a    resource (the IRI of the target resource must be submitted in the   data type attribute).</li> <li><code>knora-base:StandoffInternalReferenceTag</code>: Represents an internal   reference inside a document (the id of the target element inside the   same document must be indicated in the data type attribute); see   Internal References in an XML Document.</li> <li><code>knora-base:StandoffUriTag</code>: Represents a reference to a URI (the   URI of the target resource must be submitted in the data type   attribute).</li> <li><code>knora-base:StandoffDateTag</code>: Represents a date (a date   string must be submitted in the data type attribute, e.g.   <code>GREGORIAN:2017-01-27</code>).</li> <li><code>knora-base:StandoffColorTag</code>: Represents a color (a hexadecimal   RGB color string must be submitted in the data type attribute, e.g.   <code>#0000FF</code>).</li> <li><code>knora-base:StandoffIntegerTag</code>: Represents an integer (the integer   must be submitted in the data type attribute).</li> <li><code>knora-base:StandoffDecimalTag</code>: Represents a number with fractions   (the decimal number must be submitted in the data type attribute,   e.g. <code>1.1</code>).</li> <li><code>knora-base:StandoffIntervalTag</code>: Represents an interval (two   decimal numbers separated with a comma must be submitted in the data   type attribute, e.g. <code>1.1,2.2</code>).</li> <li><code>knora-base:StandoffBooleanTag</code>: Represents a Boolean value (<code>true</code>   or <code>false</code> must be submitted in the data type attribute).</li> <li><code>knora-base:StandoffTimeTag</code>: Represents a timestamp value (an <code>xsd:dateTimeStamp</code>   must be submitted in the data type attribute).</li> </ul> <p>The basic idea is that parts of a text can be marked up in a way that allows using DSP-API's built-in data types. In order to do so, the typed values have to be provided in a standardized way in an attribute that has to be defined in the mapping.</p> <p>Data type standoff classes are standoff classes with predefined properties (e.g., a <code>knora-base:StandoffLinkTag</code> has a <code>knora-base:standoffTagHasLink</code> and a <code>knora-base:StandoffIntegerTag</code> has a <code>knora-base:valueHasInteger</code>). Please note the data type standoff classes can not be combined, i.e. a standoff class can only be the subclass of one data type standoff class. However, standoff data type classes can be subclassed and extended further by assigning properties to them (see below).</p> <p>The following simple mapping illustrates this principle:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mapping&gt;\n     &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;text&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/standoff#StandoffRootTag&lt;/classIri&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;mydate&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/0001/anything#StandoffEventTag&lt;/classIri&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;\n                    &lt;attributeName&gt;description&lt;/attributeName&gt;\n                    &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n                    &lt;propertyIri&gt;http://www.knora.org/ontology/0001/anything#standoffEventTagHasDescription&lt;/propertyIri&gt;\n                &lt;/attribute&gt;\n            &lt;/attributes&gt;\n            &lt;datatype&gt;\n                &lt;type&gt;http://www.knora.org/ontology/knora-base#StandoffDateTag&lt;/type&gt;\n                &lt;attributeName&gt;knoraDate&lt;/attributeName&gt;\n            &lt;/datatype&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n&lt;/mapping&gt;\n</code></pre> <p><code>&lt;datatype&gt;</code> must hold the IRI of a standoff data type class (see list above). The <code>&lt;classIri&gt;</code> must be a subclass of this type or this type itself (the latter is probably not recommendable since semantics are missing: what is the meaning of the date?). In the example above, the standoff class is <code>anything:StandoffEventTag</code> which has the following definition in the ontology <code>anything-onto.ttl</code>:</p> <pre><code>anything:StandoffEventTag rdf:type owl:Class ;\n\n    rdfs:subClassOf knora-base:StandoffDateTag,\n                   [\n                      rdf:type owl:Restriction ;\n                      owl:onProperty :standoffEventTagHasDescription ;\n                      owl:cardinality \"1\"^^xsd:nonNegativeInteger\n                   ] ;\n\n    rdfs:label \"Represents an event in a TextValue\"@en ;\n\n    rdfs:comment \"\"\"Represents an event in a TextValue\"\"\"@en .\n</code></pre> <p><code>anything:StandoffEventTag</code> is a subclass of <code>knora-base:StandoffDateTag</code> and therefore has the data type date. It also requires the standoff property <code>anything:standoffEventTagHasDescription</code> which is defined as an attribute in the mapping.</p> <p>Once the mapping has been created, an XML like the following could be sent to DSP-API and converted to standoff:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;text&gt;\n    We had a party on &lt;mydate description=\"new year\" knoraDate=\"GREGORIAN:2016-12-31\"&gt;New Year's Eve&lt;/mydate&gt;. \n    It was a lot of fun.\n&lt;/text&gt;\n</code></pre> <p>The attribute holds the date in the format of a DSP-API date string (the format is also documented in the typescript type alias <code>dateString</code> in module <code>basicMessageComponents</code>. There you will also find documentation about the other types like color etc.). DSP-API date strings have this format: <code>GREGORIAN|JULIAN):YYYY[-MM[-DD]][:YYYY[-MM[-DD]]]</code>. This allows for different formats as well as for imprecision and periods. Intervals are submitted as one attribute in the following format: <code>interval-attribute=\"1.0,2.0\"</code> (two decimal numbers separated with a comma).</p> <p>You will find a sample mapping with all the data types and a sample XML file in the the test data: <code>test_data/test_route/texts/mappingForHTML.xml</code> and <code>test_data/test_route/texts/HTML.xml</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#internal-references-in-an-xml-document","title":"Internal References in an XML Document","text":"<p>Internal references inside an XML document can be represented using the data type standoff class <code>knora-base:StandoffInternalReferenceTag</code> or a subclass of it. This class has a standoff property that points to a standoff node representing the target XML element when converted to RDF.</p> <p>The following example shows the definition of a mapping element for an internal reference (for reasons of simplicity, only the mapping element for the element is question is depicted):</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mappingElement&gt;\n    &lt;tag&gt;\n        &lt;name&gt;ref&lt;/name&gt;\n        &lt;class&gt;noClass&lt;/class&gt;\n        &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n        &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n    &lt;/tag&gt;\n    &lt;standoffClass&gt;\n        &lt;classIri&gt;http://www.knora.org/ontology/knora-base#StandoffInternalReferenceTag&lt;/classIri&gt;\n        &lt;datatype&gt;\n            &lt;type&gt;http://www.knora.org/ontology/knora-base#StandoffInternalReferenceTag&lt;/type&gt;\n            &lt;attributeName&gt;internalRef&lt;/attributeName&gt;\n        &lt;/datatype&gt;\n    &lt;/standoffClass&gt;\n&lt;/mappingElement&gt;\n</code></pre> <p>Now, an internal reference to an element in the same document can be made that will be converted to a pointer in RDF:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;text&gt;\n    This is an &lt;sample id=\"1\"&gt;element&lt;/sample&gt; and here is a reference to &lt;ref internalRef=\"#1\"&gt;it&lt;/ref&gt;.\n&lt;/text&gt;\n</code></pre> <p>An internal reference in XML has to start with a <code>#</code> followed by the value of the <code>id</code> attribute of the element referred to.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#predefined-standoff-classes-and-properties","title":"Predefined Standoff Classes and Properties","text":"<p>The standoff ontology <code>standoff-onto.ttl</code> offers a set of predefined standoff classes that can be used in a custom mapping like the following:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mapping&gt;\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;myDoc&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/standoff#StandoffRootTag&lt;/classIri&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;\n                    &lt;attributeName&gt;documentType&lt;/attributeName&gt;\n                    &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n                    &lt;propertyIri&gt;http://www.knora.org/ontology/standoff#standoffRootTagHasDocumentType&lt;/propertyIri&gt;\n                &lt;/attribute&gt;\n            &lt;/attributes&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;p&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;true&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/standoff#StandoffParagraphTag&lt;/classIri&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;i&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/standoff#StandoffItalicTag&lt;/classIri&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n&lt;/mapping&gt;\n</code></pre> <p>Predefined standoff classes may be used by various projects, each providing a custom mapping to be able to recreate the original XML from RDF. Predefined standoff classes may also be inherited and extended in project specific ontologies.</p> <p>The mapping above allows for an XML like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;myDoc documentType=\"letter\"&gt;\n    &lt;p&gt;\n        This my text that is &lt;i&gt;very&lt;/i&gt; interesting.\n    &lt;/p&gt;\n    &lt;p&gt;\n        And here it goes on.\n    &lt;/p&gt;\n&lt;/myDoc&gt;\n</code></pre>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#respecting-property-types","title":"Respecting Property Types","text":"<p>When mapping XML attributes to standoff properties, attention has to be paid to the properties' object constraints.</p> <p>In the ontology, standoff property literals may have one of the following <code>knora-base:objectDatatypeConstraint</code>:</p> <ul> <li><code>xsd:string</code></li> <li><code>xsd:integer</code></li> <li><code>xsd:boolean</code></li> <li><code>xsd:decimal</code></li> <li><code>xsd:anyURI</code></li> </ul> <p>In XML, all attribute values are submitted as strings. However, these string representations need to be convertible to the types defined in the ontology. If they are not, the request will be rejected. It is recommended to enforce types on attributes by applying XML Schema validations (restrictions).</p> <p>Links (object property) to a <code>knora-base:Resource</code> can be represented using the data type standoff class <code>knora-base:StandoffLinkTag</code>, internal links using the data type standoff class <code>knora-base:StandoffInternalReferenceTag</code>.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/custom-standoff/#validating-a-mapping-and-sending-it-to-dsp-api","title":"Validating a Mapping and sending it to DSP-API","text":"<p>A mapping can be validated before sending it to DSP-API with the following XML Schema file: <code>webapi/src/resources/mappingXMLToStandoff.xsd</code>. Any mapping that does not conform to this XML Schema file will be rejected by DSP-API.</p> <p>The mapping has to be sent as a multipart request to the standoff route using the path segment <code>mapping</code>:</p> <pre><code>HTTP POST http://host/v2/mapping\n</code></pre> <p>The multipart request consists of two named parts:</p> <pre><code>\"json\":\n\n  {\n      \"knora-api:mappingHasName\": \"My Mapping\",\n      \"knora-api:attachedToProject\": \"projectIRI\",\n      \"rdfs:label\": \"MappingNameSegment\",\n      \"@context\": {\n          \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n          \"knora-api\": \"http://api.knora.org/ontology/knora-api/v2#\"\n      }\n  }\n\n\"xml\":\n\n  &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n  &lt;mapping&gt;\n      ...\n  &lt;/mapping&gt;\n</code></pre> <p>A successful response returns the IRI of the mapping. However, the IRI of a mapping is predictable: it consists of the project Iri followed by <code>/mappings/</code> and the <code>knora-api:mappingHasName</code> submitted in the JSON-LD (if the name already exists, the request will be rejected). Once created, a mapping can be used to create TextValues in Knora. The formats are documented in the v2 typescript interfaces <code>AddMappingRequest</code> and <code>AddMappingResponse</code> in module <code>MappingFormats</code></p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/","title":"Overview","text":"<p>DSP-API supports various ways of handling textual data:</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#text-in-rdf","title":"Text in RDF","text":"<p>Textual data can be included directly in the data stored in DSP-API.  This is the default way of handling text in the DSP.  There are three ways of representing textual data in DSP-API, two of which are fully supported by DSP-APP and DSP-TOOLS.</p> <p>Texts stored in RDF can be searched using both full-text search and structured queries.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#simple-text","title":"Simple Text","text":"<p>If a text requires no formatting, it can simply be stored as a string in a <code>knora-base:TextValue</code>.  This is sufficient in many cases, especially for shorter texts like names, titles, identifiers, etc.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#text-with-formatting","title":"Text with Formatting","text":"<p>For text requiring regular markup, <code>knora-base:TextValue</code> can be used  in combination with the DSP's standard standoff markup.</p> <p>This allows for the following markup:</p> <ul> <li>structural markup<ul> <li>paragraphs</li> <li>headings levels 1-6</li> <li>ordered lists</li> <li>unordered lists</li> <li>tables</li> <li>line breaks</li> <li>horizontal rules</li> <li>code blocks</li> <li>block quotes</li> <li>footnotes</li> </ul> </li> <li>typographical markup<ul> <li>italics</li> <li>bold</li> <li>underline</li> <li>strikethrough</li> <li>subscript</li> <li>superscript</li> </ul> </li> <li>semantic markup<ul> <li>links</li> <li>DSP internal links</li> </ul> </li> </ul> <p>DSP-APP provides a text editor for conveniently editing text with standard standoff markup.</p> <p>More details can be found the standard standoff documentation.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#text-with-custom-markup","title":"Text with Custom Markup","text":"<p>It is possible to create custom XML-to-Schema mappings, which allows for creating project specific custom markup for text values.  Details can be found in the custom standoff documentation.</p> <p>Info</p> <p>Custom markup is not supported by DSP-TOOLS and is view-only in DSP-APP. Creating custom markup is relatively involved,  so that it should only be used by projects working with complex textual data.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#file-based","title":"File Based","text":"<p>Text files of various formats (Word, PDF, XML, etc.) can be uploaded to the media file server.  For more details, see the file formats documentation</p> <p>This allows for easy upload and retrieval of the file.  However, it does not allow for searching within the file content.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/overview/#tei-xml","title":"TEI XML","text":"<p>All text values in DSP-API using standoff markup can be converted to TEI XML as described in the tei xml documentation.</p> <p>Info</p> <p>Improved support for TEI XML is in planning.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/standard-standoff/","title":"Standard Standoff Markup Mapping","text":"<p>A mapping allows for the conversion of XML to standoff representation in RDF and back.  In order to create a <code>TextValue</code> with markup,  the text has to be provided in XML format,  along with the IRI of the mapping that will be used to convert the markup to standoff.</p> <p>DSP-API offers a standard mapping with the IRI <code>http://rdfh.ch/standoff/mappings/StandardMapping</code>.  The standard mapping covers the HTML elements and attributes  supported by the GUI's text editor, CKEditor.  (Please note that the HTML has to be encoded in strict XML syntax.  CKeditor offers the possibility to define filter rules. They should reflect the elements supported by the mapping.) The standard mapping contains the following elements and attributes  that are mapped to standoff classes and properties defined in the ontology:</p> <ul> <li><code>&lt;text&gt;</code> \u2192 <code>standoff:StandoffRootTag</code></li> <li><code>&lt;p&gt;</code> \u2192 <code>standoff:StandoffParagraphTag</code></li> <li><code>&lt;em&gt;</code> \u2192 <code>standoff:StandoffItalicTag</code></li> <li><code>&lt;strong&gt;</code> \u2192 <code>standoff:StandoffBoldTag</code></li> <li><code>&lt;u&gt;</code> \u2192 <code>standoff:StandoffUnderlineTag</code></li> <li><code>&lt;sub&gt;</code> \u2192 <code>standoff:StandoffSubscriptTag</code></li> <li><code>&lt;sup&gt;</code> \u2192 <code>standoff:StandoffSuperscriptTag</code></li> <li><code>&lt;strike&gt;</code> \u2192 <code>standoff:StandoffStrikeTag</code></li> <li><code>&lt;a href=\"URL\"&gt;</code> \u2192 <code>knora-base:StandoffUriTag</code></li> <li><code>&lt;a class=\"salsah-link\" href=\"Knora IRI\"&gt;</code> \u2192 <code>knora-base:StandoffLinkTag</code></li> <li><code>&lt;a class=\"internal-link\" href=\"#fragment\"&gt;</code> \u2192 <code>knora-base:StandoffInternalReferenceTag</code></li> <li><code>&lt;h1&gt;</code> to <code>&lt;h6&gt;</code> \u2192 <code>standoff:StandoffHeader1Tag</code> to <code>standoff:StandoffHeader6Tag</code></li> <li><code>&lt;ol&gt;</code> \u2192 <code>standoff:StandoffOrderedListTag</code></li> <li><code>&lt;ul&gt;</code> \u2192 <code>standoff:StandoffUnrderedListTag</code></li> <li><code>&lt;li&gt;</code> \u2192 <code>standoff:StandoffListElementTag</code></li> <li><code>&lt;tbody&gt;</code> \u2192 <code>standoff:StandoffTableBodyTag</code></li> <li><code>&lt;thead&gt;</code> \u2192 <code>standoff:StandoffTableHeaderTag</code></li> <li><code>&lt;table&gt;</code> \u2192 <code>standoff:StandoffTableTag</code></li> <li><code>&lt;tr&gt;</code> \u2192 <code>standoff:StandoffTableRowTag</code></li> <li><code>&lt;th&gt;</code> \u2192 <code>standoff:StandoffTableHeaderCellTag</code></li> <li><code>&lt;td&gt;</code> \u2192 <code>standoff:StandoffTableCellTag</code></li> <li><code>&lt;br&gt;</code> \u2192 <code>standoff:StandoffBrTag</code></li> <li><code>&lt;hr&gt;</code> \u2192 <code>standoff:StandoffLineTag</code></li> <li><code>&lt;pre&gt;</code> \u2192 <code>standoff:StandoffPreTag</code></li> <li><code>&lt;cite&gt;</code> \u2192 <code>standoff:StandoffCiteTag</code></li> <li><code>&lt;blockquote&gt;</code> \u2192 <code>standoff:StandoffBlockquoteTag</code></li> <li><code>&lt;code&gt;</code> \u2192 <code>standoff:StandoffCodeTag</code></li> <li><code>&lt;footnote content=\"footnote text\"&gt;</code> \u2192 <code>standoff:StandoffFootnoteTag</code></li> </ul> <p>The HTML produced by CKEditor is wrapped in an XML doctype and a pair of root tags <code>&lt;text&gt;...&lt;/text&gt;</code>  and then sent to the DSP-API. The XML sent to the GUI by the DSP-API is unwrapped accordingly. Although the GUI supports HTML5, it is treated as if it was XHTML in strict XML notation.</p> <p>Text with standard standoff markup can be transformed to TEI XML as described in the tei xml documentation.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/standard-standoff/#footnotes","title":"Footnotes","text":"<p>The <code>&lt;footnote&gt;</code> tag is an anchor tag indicating where in the text a footnote should be placed. It must not contain any text or other tags.</p> <p>The contents of the footnote are stored in the <code>content</code> attribute of the <code>&lt;footnote&gt;</code> tag. These may contain further markup, so the content of the footnote must be valid XML.</p> <p>In order to result in valid xml, the content of the footnote must be properly escaped so that it does not contain any characters that are not allowed in XML. Special characters like <code>&lt;</code>, <code>&gt;</code>, <code>&amp;</code>, <code>\"</code>, and <code>'</code> must be replaced by their respective XML entities, i.e. <code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;amp;</code>, <code>&amp;quot;</code>, and <code>&amp;apos;</code>.</p> <p>The following example shows how a footnote is used in the XML:</p> <pre><code>&lt;text&gt;\n  &lt;p&gt;\n    Some text with a \n    footnote&lt;footnote content=\"Text with &amp;lt;a href=&amp;quot;...&amp;quot;&amp;gt;markup&amp;lt;/a&amp;gt;.\" /&gt; \n    in it.\n  &lt;/p&gt;\n&lt;/text&gt;\n</code></pre> <p>Note: Footnote support is still in an early stage, and may change in the future. There are some known limitations:</p> <ul> <li>CKE does not support footnotes out of the box. DSP-APP uses a custom build of CKE that supports footnotes.</li> <li>The content of footnotes is not covered by the full text search.</li> <li>The content of footnotes may contain further markup, but this will not be converted to standoff by the API.   For that reason, markup in footnotes can not be searched for through gravsearch   and hence outgoing and incoming links will not be displayed in DSP-APP.</li> </ul>"},{"location":"DSP-API/03-endpoints/api-v2/text/tei-xml/","title":"TEI/XML: Converting Standoff to TEI/XML","text":""},{"location":"DSP-API/03-endpoints/api-v2/text/tei-xml/#general","title":"General","text":"<p>DSP-API offers a way to convert standoff markup to TEI/XML. The conversion is based on the assumption that a whole resource is to be turned into a TEI document. There is a basic distinction between the body and the header of a TEI document. The resource's property that contains the text with standoff markup is mapped to the TEI document's body. Other of the resource's property may be mapped to the TEI header.</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/tei-xml/#standard-standoff-to-tei-conversion","title":"Standard Standoff to TEI Conversion","text":"<p>DSP-API offers a built-in conversion form standard standoff entities (defined in the <code>standoff</code> ontology) tags to TEI.</p> <p>Note</p> <p>As TEI provides a wide range of Elements and Attributes  which can have different meaning depending on the markup practices of a project, whereas DSP standard standoff has a very limited tagset, this conversion is oppinionated by necessity and may not be appropriate for all projects.</p> <p>In order to obtain a resource as a TEI document, the following request has to be performed.  Please note that the URL parameters have to be URL-encoded.</p> <pre><code>HTTP GET to http://host/v2/tei/resourceIri?textProperty=textPropertyIri\n</code></pre> <p>In addition to the resource's Iri, the Iri of the property containing the text with standoff has to be submitted.  This will be converted to the TEI body.  Please note that the resource can only have one instance of this property and the text must have standoff markup.</p> <p>The test data contain the resource <code>http://rdfh.ch/0001/thing_with_richtext_with_markup</code>  with the text property <code>http://0.0.0.0:3333/ontology/0001/anything/v2#hasRichtext</code>  that can be converted to TEI as follows:</p> <pre><code>HTTP GET to http://host/v2/tei/http%3A%2F%2Frdfh.ch%2F0001%2Fthing_with_richtext_with_markup?textProperty=http%3A%2F%2F0.0.0.0%3A3333%2Fontology%2F0001%2Fanything%2Fv2%23hasRichtext\n</code></pre> <p>The response to this request is a TEI XML document:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TEI xmlns=\"http://www.tei-c.org/ns/1.0\" version=\"3.3.0\"&gt;\n  &lt;teiHeader&gt;\n    &lt;fileDesc&gt;\n      &lt;titleStmt&gt;\n        &lt;title&gt;test thing with markup&lt;/title&gt;\n      &lt;/titleStmt&gt;\n      &lt;publicationStmt&gt;\n        &lt;p&gt;\n             This is the TEI/XML representation of a resource identified by the Iri http://rdfh.ch/0001/thing_with_richtext_with_markup.\n         &lt;/p&gt;\n      &lt;/publicationStmt&gt;\n      &lt;sourceDesc&gt;\n        &lt;p&gt;Representation of the resource's text as TEI/XML&lt;/p&gt;\n      &lt;/sourceDesc&gt;\n    &lt;/fileDesc&gt;\n  &lt;/teiHeader&gt;\n  &lt;text&gt;\n    &lt;body&gt;\n      &lt;p&gt;\n        This is a test that contains marked up elements. \n        This is &lt;hi rend=\"italic\"&gt;interesting text&lt;/hi&gt; in italics.\n        This is &lt;hi rend=\"italic\"&gt;boring text&lt;/hi&gt; in italics.\n      &lt;/p&gt;\n    &lt;/body&gt;\n  &lt;/text&gt;\n&lt;/TEI&gt;        \n</code></pre> <p>The body of the TEI document contains the standoff markup as XML.  The header contains contains some basic metadata about the resource such as the <code>rdfs:label</code> an its IRI.  However, this might not be sufficient for more advanced use cases like digital edition projects.  In that case, a custom conversion has to be performed (see below).</p>"},{"location":"DSP-API/03-endpoints/api-v2/text/tei-xml/#custom-conversion","title":"Custom Conversion","text":"<p>If a project defines its own standoff entities, a custom conversion can be provided (body of the TEI document).  Also for the TEI header, a custom conversion can be provided.</p> <p>For the custom conversion, additional configuration is required.</p> <p>TEI body:</p> <ul> <li>additional mapping from standoff to XML (URL parameter <code>mappingIri</code>)</li> <li>XSL transformation to turn the XML into a valid TEI body (referred to by the mapping).</li> </ul> <p>The mapping has to refer to a <code>defaultXSLTransformation</code> that transforms the XML that was created from standoff markup  (see XML To Standoff Mapping).  This step is necessary because the mapping assumes a one to one relation  between standoff classes and properties and XML elements and attributes. For example, we may want to convert a <code>standoff:StandoffItalicTag</code> into TEI/XML.  TEI expresses this as <code>&lt;hi rend=\"italic\"&gt;...&lt;/hi&gt;</code>.  In the mapping, the <code>standoff:StandoffItalicTag</code> may be mapped to a temporary XML element  that is going to be converted to <code>&lt;hi rend=\"italic\"&gt;...&lt;/hi&gt;</code> in a further step by the XSLT. </p> <p>For sample data, see <code>webapi/_test_data/test_route/texts/beol/BEOLTEIMapping.xml</code> (mapping)  and <code>webapi/_test_data/test_route/texts/beol/standoffToTEI.xsl</code>.  The standoff entities are defined in <code>beol-onto.ttl</code>.</p> <p>TEI header:</p> <ul> <li>Gravsearch template to query the resources metadata, results are serialized to RDF/XML (URL parameter <code>gravsearchTemplateIri</code>)</li> <li>XSL transformation to turn that RDF/XML into a valid TEI header (URL parameter <code>teiHeaderXSLTIri</code>)</li> </ul> <p>The Gravsearch template is expected to be of type <code>knora-base:TextRepresentation</code>  and to contain a placeholder <code>$resourceIri</code> that is to be replaced by the actual resource Iri. The Gravsearch template is expected to contain a query involving the text property (URL parameter <code>textProperty</code>)  and more properties that are going to be mapped to the TEI header.  The Gravsearch template is a simple text file with the files extension <code>.txt</code>.</p> <p>A Gravsearch template may look like this (see <code>test_data/test_route/texts/beol/gravsearch.txt</code>):</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\nPREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;\n\n    CONSTRUCT {\n        ?letter knora-api:isMainResource true .\n\n        ?letter beol:creationDate ?date .\n\n        ?letter beol:hasText ?text .\n\n        ?letter beol:hasAuthor ?person1 .\n\n        ?person1 beol:hasFamilyName ?name1 .\n\n        ?person1 beol:hasGivenName ?givenName1 .\n\n        ?person1 beol:hasIAFIdentifier ?iaf1 .\n\n        ?letter beol:hasRecipient ?person2 .\n\n        ?person2 beol:hasFamilyName ?name2 .\n\n        ?person2 beol:hasGivenName ?givenName2 .\n\n        ?person2 beol:hasIAFIdentifier ?iaf2 .\n\n\n    } WHERE {\n        BIND(&lt;$resourceIri&gt; as ?letter)\n        ?letter a knora-api:Resource .\n        ?letter a beol:letter .\n\n        ?letter beol:creationDate ?date .\n\n        beol:creationDate knora-api:objectType knora-api:Date .\n        ?date a knora-api:Date .\n\n        ?letter beol:hasText ?text .\n\n        beol:hasText knora-api:objectType xsd:string .\n\n        ?text a xsd:string .\n\n        ?letter beol:hasAuthor ?person1 .\n\n        ?person1 beol:hasFamilyName ?name1 .\n\n        ?person1 beol:hasGivenName ?givenName1 .\n\n        ?person1 beol:hasIAFIdentifier ?iaf1 .\n\n        ?name1 a xsd:string .\n\n        ?givenName1 a xsd:string .\n\n        ?iaf1 a xsd:string .\n\n        ?person2 beol:hasFamilyName ?name2 .\n\n        ?person2 beol:hasGivenName ?givenName2 .\n\n        ?person2 beol:hasIAFIdentifier ?iaf2 .\n\n        ?name2 a xsd:string .\n\n        ?givenName2 a xsd:string .\n\n        ?iaf2 a xsd:string .\n\n        beol:hasGivenName knora-api:objectType xsd:string .\n        beol:hasFamilyName knora-api:objectType xsd:string .\n        beol:hasIAFIdentifier knora-api:objectType xsd:string .\n\n        beol:hasAuthor knora-api:objectType knora-api:Resource .\n\n        ?letter beol:hasRecipient ?person2 .\n\n        beol:hasRecipient knora-api:objectType knora-api:Resource .\n\n        ?person1 a knora-api:Resource .\n        ?person2 a knora-api:Resource .\n\n    }\n</code></pre> <p>Note the placeholder <code>BIND(&lt;$resourceIri&gt; as ?letter)</code> that is going to be replaced  by the Iri of the resource the request is performed for. The query asks for information about the letter's text <code>beol:hasText</code> and information about its author and recipient.  This information is converted to the TEI header in the format required by correspSearch.</p> <p>To write the XSLT, do the Gravsearch query and request the data as RDF/XML using content negotiation  (see Introduction).</p> <p>The Gravsearch query's result may look like this (<code>RDF/XML</code>):</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;rdf:RDF\n    xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n    xmlns:rdfs=\"http://www.w3.org/2000/01/rdf-schema#\"\n    xmlns:knora-api=\"http://api.knora.org/ontology/knora-api/v2#\"\n    xmlns:beol=\"http://0.0.0.0:3333/ontology/0801/beol/v2#\"&gt;\n&lt;beol:letter rdf:about=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA\"&gt;\n    &lt;beol:creationDate rdf:resource=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/Ob_1YRO_QmaDxTRI64vGOQ\"/&gt;\n    &lt;beol:hasAuthorValue rdf:resource=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/zt4a3XoESTq9To4mSN8Dug\"/&gt;\n    &lt;beol:hasRecipientValue rdf:resource=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/pVerHO_FRXePZQT9kgEp_Q\"/&gt;\n    &lt;rdfs:label rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Testletter&lt;/rdfs:label&gt;\n&lt;/beol:letter&gt;\n&lt;knora-api:DateValue rdf:about=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/Ob_1YRO_QmaDxTRI64vGOQ\"&gt;\n    &lt;knora-api:dateValueHasCalendar rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;GREGORIAN&lt;/knora-api:dateValueHasCalendar&gt;\n    &lt;knora-api:dateValueHasEndDay rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;10&lt;/knora-api:dateValueHasEndDay&gt;\n    &lt;knora-api:dateValueHasEndEra rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;CE&lt;/knora-api:dateValueHasEndEra&gt;\n    &lt;knora-api:dateValueHasEndMonth rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;6&lt;/knora-api:dateValueHasEndMonth&gt;\n    &lt;knora-api:dateValueHasEndYear rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;1703&lt;/knora-api:dateValueHasEndYear&gt;\n    &lt;knora-api:dateValueHasStartDay rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;10&lt;/knora-api:dateValueHasStartDay&gt;\n    &lt;knora-api:dateValueHasStartEra rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;CE&lt;/knora-api:dateValueHasStartEra&gt;\n    &lt;knora-api:dateValueHasStartMonth rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;6&lt;/knora-api:dateValueHasStartMonth&gt;\n    &lt;knora-api:dateValueHasStartYear rdf:datatype=\"http://www.w3.org/2001/XMLSchema#integer\"&gt;1703&lt;/knora-api:dateValueHasStartYear&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;GREGORIAN:1703-06-10 CE&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:DateValue&gt;\n&lt;knora-api:LinkValue rdf:about=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/zt4a3XoESTq9To4mSN8Dug\"&gt;\n    &lt;knora-api:linkValueHasTarget&gt;\n        &lt;beol:person rdf:about=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ\"&gt;\n            &lt;beol:hasFamilyName rdf:resource=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/NG42jDqSTz2U35N6sJ8cqg\"/&gt;\n            &lt;beol:hasGivenName rdf:resource=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/W2lVG1mvQU2MauAvCGB13w\"/&gt;\n            &lt;beol:hasIAFIdentifier rdf:resource=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/N2TVtntdToqJQpdZhYPc5g\"/&gt;\n            &lt;rdfs:label rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Johann Jacob Scheuchzer&lt;/rdfs:label&gt;\n        &lt;/beol:person&gt;\n    &lt;/knora-api:linkValueHasTarget&gt;\n&lt;/knora-api:LinkValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/NG42jDqSTz2U35N6sJ8cqg\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Scheuchzer&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/W2lVG1mvQU2MauAvCGB13w\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Johann Jacob&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/_9LEnLM7TFuPRjTshOTJpQ/values/N2TVtntdToqJQpdZhYPc5g\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;(DE-588)118607308&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n&lt;knora-api:LinkValue rdf:about=\"http://rdfh.ch/0801/MbZdHVcsR_Ky5pZoytaiBA/values/pVerHO_FRXePZQT9kgEp_Q\"&gt;\n    &lt;knora-api:linkValueHasTarget&gt;\n        &lt;beol:person rdf:about=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw\"&gt;\n            &lt;beol:hasFamilyName rdf:resource=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/k1Exqf93SsWi7LWK9ozXkw\"/&gt;\n            &lt;beol:hasGivenName rdf:resource=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/gkqK5Ij_R7mtO59xfSDGJA\"/&gt;\n            &lt;beol:hasIAFIdentifier rdf:resource=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/C-Dl15S-SV63L1KCCPFfew\"/&gt;\n            &lt;rdfs:label rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Jacob Hermann&lt;/rdfs:label&gt;\n        &lt;/beol:person&gt;\n    &lt;/knora-api:linkValueHasTarget&gt;\n&lt;/knora-api:LinkValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/k1Exqf93SsWi7LWK9ozXkw\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Hermann&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/gkqK5Ij_R7mtO59xfSDGJA\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;Jacob&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n&lt;knora-api:TextValue rdf:about=\"http://rdfh.ch/0801/JaQwPsYEQJ6GQrAgKC0Gkw/values/C-Dl15S-SV63L1KCCPFfew\"&gt;\n    &lt;knora-api:valueAsString rdf:datatype=\"http://www.w3.org/2001/XMLSchema#string\"&gt;(DE-588)119112450&lt;/knora-api:valueAsString&gt;\n&lt;/knora-api:TextValue&gt;\n\n&lt;/rdf:RDF&gt;\n</code></pre> <p>In order to convert the metadata (not the actual standoff markup),  a <code>knora-base:knora-base:XSLTransformation</code> has to be provided.  For our example, it looks like this (see <code>test_data/test_route/texts/beol/header.xsl</code>):</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:transform xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n               xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n               xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n               xmlns:rdfs1=\"http://www.w3.org/2000/01/rdf-schema#\"\n               xmlns:beol=\"http://0.0.0.0:3333/ontology/0801/beol/v2#\"\n               xmlns:knora-api=\"http://api.knora.org/ontology/knora-api/v2#\"\n               exclude-result-prefixes=\"rdf beol knora-api xs rdfs1\" version=\"2.0\"&gt;\n\n    &lt;xsl:output method=\"xml\" omit-xml-declaration=\"yes\" encoding=\"utf-8\" indent=\"yes\"/&gt;\n\n    &lt;!-- make IAF id a URL --&gt;\n    &lt;xsl:function name=\"knora-api:iaf\" as=\"xs:anyURI\"&gt;\n        &lt;xsl:param name=\"input\" as=\"xs:string\"/&gt;\n        &lt;xsl:value-of select=\"replace($input, '\\(DE-588\\)', 'http://d-nb.info/gnd/')\"/&gt;\n    &lt;/xsl:function&gt;\n\n    &lt;!-- make a standard date (Gregorian calendar assumed) --&gt;\n    &lt;xsl:function name=\"knora-api:dateformat\" as=\"element()*\"&gt;\n        &lt;xsl:param name=\"input\" as=\"element()*\"/&gt;\n\n        &lt;xsl:choose&gt;\n            &lt;xsl:when test=\"$input/knora-api:dateValueHasStartYear/text() = $input/knora-api:dateValueHasEndYear/text() and $input/knora-api:dateValueHasStartMonth/text() = $input/knora-api:dateValueHasEndMonth/text() and $input/knora-api:dateValueHasStartDay/text() = $input/knora-api:dateValueHasEndDay/text()\"&gt;\n                &lt;!-- no period, day precision --&gt;\n                &lt;date&gt;\n                    &lt;xsl:attribute name=\"when\"&gt;\n                        &lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartYear/text(), '0000')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartMonth/text(), '00')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartMonth/text(), '00')\"/&gt;\n                    &lt;/xsl:attribute&gt;\n                &lt;/date&gt;\n\n            &lt;/xsl:when&gt;\n            &lt;xsl:otherwise&gt;\n                &lt;!-- period --&gt;\n                &lt;date&gt;\n                    &lt;xsl:attribute name=\"notBefore\"&gt;\n                        &lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartYear/text(), '0000')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartMonth/text(), '00')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasStartDay/text(), '00')\"/&gt;\n                    &lt;/xsl:attribute&gt;\n\n                    &lt;xsl:attribute name=\"notAfter\"&gt;\n                        &lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasEndYear/text(), '0000')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasEndMonth/text(), '00')\"/&gt;-&lt;xsl:value-of select=\"format-number($input/knora-api:dateValueHasEndDay/text(), '00')\"/&gt;\n                    &lt;/xsl:attribute&gt;\n                &lt;/date&gt;\n\n            &lt;/xsl:otherwise&gt;\n        &lt;/xsl:choose&gt;\n\n\n    &lt;/xsl:function&gt;\n\n    &lt;xsl:template match=\"rdf:RDF\"&gt;\n        &lt;xsl:variable name=\"resourceIri\" select=\"beol:letter/@rdf:about\"/&gt;\n        &lt;xsl:variable name=\"label\" select=\"beol:letter/rdfs1:label/text()\"/&gt;\n\n\n        &lt;teiHeader&gt;\n            &lt;fileDesc&gt;\n                &lt;titleStmt&gt;\n                    &lt;title&gt;\n                        &lt;xsl:value-of select=\"$label\"/&gt;\n                    &lt;/title&gt;\n                &lt;/titleStmt&gt;\n                &lt;publicationStmt&gt;\n                    &lt;p&gt; This is the TEI/XML representation of the resource identified by the Iri\n                        &lt;xsl:value-of select=\"$resourceIri\"/&gt;. &lt;/p&gt;\n                &lt;/publicationStmt&gt;\n                &lt;sourceDesc&gt;\n                    &lt;p&gt;Representation of the resource's text as TEI/XML&lt;/p&gt;\n                &lt;/sourceDesc&gt;\n            &lt;/fileDesc&gt;\n            &lt;profileDesc&gt;\n\n                &lt;correspDesc&gt;\n                    &lt;xsl:attribute name=\"ref\"&gt;\n                        &lt;xsl:value-of select=\"$resourceIri\"/&gt;\n                    &lt;/xsl:attribute&gt;\n                    &lt;xsl:apply-templates/&gt;\n                &lt;/correspDesc&gt;\n            &lt;/profileDesc&gt;\n        &lt;/teiHeader&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=\"beol:letter/beol:hasAuthorValue\"&gt;\n        &lt;xsl:variable name=\"authorValue\" select=\"@rdf:resource\"/&gt;\n\n        &lt;xsl:variable name=\"authorIAFValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$authorValue]//beol:hasIAFIdentifier/@rdf:resource\"/&gt;\n        &lt;xsl:variable name=\"authorFamilyNameValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$authorValue]//beol:hasFamilyName/@rdf:resource\"/&gt;\n        &lt;xsl:variable name=\"authorGivenNameValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$authorValue]//beol:hasGivenName/@rdf:resource\"/&gt;\n\n        &lt;correspAction type=\"sent\"&gt;\n\n            &lt;xsl:variable name=\"authorIAFText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$authorIAFValue]/knora-api:valueAsString/text()\"/&gt;\n            &lt;xsl:variable name=\"authorFamilyNameText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$authorFamilyNameValue]/knora-api:valueAsString/text()\"/&gt;\n            &lt;xsl:variable name=\"authorGivenNameText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$authorGivenNameValue]/knora-api:valueAsString/text()\"/&gt;\n\n            &lt;persName&gt;\n                &lt;xsl:attribute name=\"ref\"&gt;&lt;xsl:value-of select=\"knora-api:iaf($authorIAFText)\"\n                /&gt;&lt;/xsl:attribute&gt;\n                &lt;xsl:value-of select=\"$authorFamilyNameText\"/&gt;, &lt;xsl:value-of\n                    select=\"$authorGivenNameText\"/&gt;\n            &lt;/persName&gt;\n\n            &lt;xsl:variable name=\"dateValue\" select=\"//beol:creationDate/@rdf:resource\"/&gt;\n\n            &lt;xsl:variable name=\"dateObj\"\n                          select=\"//knora-api:DateValue[@rdf:about=$dateValue]\"/&gt;\n\n            &lt;xsl:copy-of select=\"knora-api:dateformat($dateObj)\"/&gt;\n\n        &lt;/correspAction&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=\"beol:letter/beol:hasRecipientValue\"&gt;\n        &lt;xsl:variable name=\"recipientValue\" select=\"@rdf:resource\"/&gt;\n\n        &lt;xsl:variable name=\"recipientIAFValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$recipientValue]//beol:hasIAFIdentifier/@rdf:resource\"/&gt;\n        &lt;xsl:variable name=\"recipientFamilyNameValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$recipientValue]//beol:hasFamilyName/@rdf:resource\"/&gt;\n        &lt;xsl:variable name=\"recipientGivenNameValue\"\n                      select=\"//knora-api:LinkValue[@rdf:about=$recipientValue]//beol:hasGivenName/@rdf:resource\"/&gt;\n\n        &lt;correspAction type=\"received\"&gt;\n\n            &lt;xsl:variable name=\"recipientIAFText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$recipientIAFValue]/knora-api:valueAsString/text()\"/&gt;\n            &lt;xsl:variable name=\"recipientFamilyNameText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$recipientFamilyNameValue]/knora-api:valueAsString/text()\"/&gt;\n            &lt;xsl:variable name=\"recipientGivenNameText\"\n                          select=\"//knora-api:TextValue[@rdf:about=$recipientGivenNameValue]/knora-api:valueAsString/text()\"/&gt;\n\n            &lt;persName&gt;\n                &lt;xsl:attribute name=\"ref\"&gt;&lt;xsl:value-of select=\"knora-api:iaf($recipientIAFText)\"\n                /&gt;&lt;/xsl:attribute&gt;\n                &lt;xsl:value-of select=\"$recipientFamilyNameText\"/&gt;, &lt;xsl:value-of\n                    select=\"$recipientGivenNameText\"/&gt;\n            &lt;/persName&gt;\n\n        &lt;/correspAction&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;!-- ignore text if there is no template for the element containing it --&gt;\n    &lt;xsl:template match=\"text()\"&gt; &lt;/xsl:template&gt;\n\n\n&lt;/xsl:transform&gt;\n</code></pre> <p>You can use the functions <code>knora-api:iaf</code> and <code>knora-api:dateformat</code> in your own XSLT in case you want to support <code>correspSearch</code>.</p> <p>The complete request looks like this:</p> <pre><code>HTTP GET request to http://host/v2/tei/resourceIri&amp;textProperty=textPropertyIri&amp;mappingIri=mappingIri&amp;gravsearchTemplateIri=gravsearchTemplateIri&amp;teiHeaderXSLTIri=teiHeaderXSLTIri\n</code></pre>"},{"location":"DSP-API/03-endpoints/instrumentation/health/","title":"Health","text":"<p>The health endpoint provides information about the health state of the dsp-stack.</p>"},{"location":"DSP-API/03-endpoints/instrumentation/health/#example-request","title":"Example request","text":"<p><code>GET /health</code></p>"},{"location":"DSP-API/03-endpoints/instrumentation/health/#example-response","title":"Example response","text":"<pre><code>{\n    \"name\":\"AppState\",\n    \"message\" : \"Application is healthy\",\n    \"severity\":\"non fatal\",\n    \"status\":\"healthy\"\n}\n</code></pre>"},{"location":"DSP-API/03-endpoints/instrumentation/introduction/","title":"Instrumentation","text":"<p>The instrumentation endpoints are running on a separate port (default <code>3339</code>) defined in <code>application.conf</code> under the key: <code>app.instrumentaion-server-config.port</code> and can also be set through the environment variable: <code>KNORA_INSTRUMENTATION_SERVER_PORT</code>.</p> <p>The exposed endpoints are:</p> <ul> <li><code>/metrics</code> - a metrics endpoint, backed by the ZIO metrics backend exposing metrics in the prometheus format</li> <li><code>/health</code> - provides information about the health state, see Health Endpoint</li> </ul>"},{"location":"DSP-API/03-endpoints/instrumentation/metrics/","title":"Metrics Endpoint","text":"<p>The metrics endpoint exposes metrics gathered through the ZIO metrics frontend in the Prometheus format. Additionally, ZIO runtime, JVM and ZIO-HTTP metrics are also exposed.</p>"},{"location":"DSP-API/03-endpoints/instrumentation/metrics/#configuration","title":"Configuration","text":"<p>The refresh interval is configured in <code>application.conf</code> under the key: <code>app.instrumentaion-server-config.interval</code> which es per default set to <code>5 seconds</code>.</p>"},{"location":"DSP-API/03-endpoints/instrumentation/metrics/#example-request","title":"Example request","text":"<p><code>GET /metrics</code></p>"},{"location":"DSP-API/03-endpoints/instrumentation/metrics/#example-response","title":"Example response","text":"<pre><code># TYPE jvm_memory_pool_allocated_bytes_total counter\n# HELP jvm_memory_pool_allocated_bytes_total Some help\njvm_memory_pool_allocated_bytes_total{pool=\"G1 Survivor Space\"}  4828024.0 1671021037947\n# TYPE jvm_memory_pool_allocated_bytes_total counter\n# HELP jvm_memory_pool_allocated_bytes_total Some help\njvm_memory_pool_allocated_bytes_total{pool=\"G1 Eden Space\"}  3.3554432E7 1671021037947\n# TYPE zio_fiber_successes counter\n# HELP zio_fiber_successes Some help\nzio_fiber_successes 17.0 1671021037947\n# TYPE zio_fiber_lifetimes histogram\n# HELP zio_fiber_lifetimes Some help\nzio_fiber_lifetimes_bucket{le=\"1.0\"}  17.0 1671021037947\nzio_fiber_lifetimes_bucket{le=\"2.0\"}  17.0 1671021037947\n...\n</code></pre>"},{"location":"DSP-API/03-endpoints/instrumentation/metrics/#zio-http-metrics","title":"ZIO-HTTP metrics","text":"<p>Metrics of all routes served by ZIO-HTTP (default: port <code>5555</code>) are exposed through a default metrics middleware.  However, instead of <code>http_concurrent_requests_total</code> etc. they are labeled <code>zio_http_concurrent_requests_total</code> etc. with <code>zio</code> prepended, so that they are clearly distinguishable while we still run ZIO-HTTP and Pekko-HTTP in parallel. </p> <p>To prevent excessive amounts of labels, it is considered good practice,  to replace dynamic path segments with slugs (e.g. <code>/projects/shortcode/0000</code> with <code>/projects/shortcode/:shortcode</code>).  Like this, requesting different projects by identifier will add multiple values to the histogram of a single route, instead of creating a histogram for each project:</p> <pre><code>zio_http_request_duration_seconds_bucket{method=\"GET\",path=\"/admin/projects/shortcode/:shortcode\",status=\"200\",le=\"0.005\"} 0.0 1676481606015\n...\n</code></pre> <p>Instead of:</p> <pre><code>zio_http_request_duration_seconds_bucket{method=\"GET\",path=\"/admin/projects/shortcode/0000\",status=\"200\",le=\"0.005\"} 0.0 1676481606015\nzio_http_request_duration_seconds_bucket{method=\"GET\",path=\"/admin/projects/shortcode/0001\",status=\"200\",le=\"0.005\"} 0.0 1676481606015\n...\n</code></pre> <p>This is achieved by providing the middleware a <code>pathLabelMapper</code>; when adding new routes, it is advisable to assert that this replacement works correctly for the newly added route.</p>"},{"location":"DSP-API/04-publishing-deployment/configuration/","title":"Configuration","text":"<p>All configuration for Knora is done in <code>application.conf</code>. </p> <p>For optimal performance it is important to tune the configuration to the hardware used, mainly to the number of CPUs and cores per CPU.</p> <p>The relevant sections for tuning are:</p> <ul> <li><code>knora-actor-dispatcher</code></li> <li><code>knora-blocking-dispatcher</code></li> </ul>"},{"location":"DSP-API/04-publishing-deployment/configuration/#system-environment-variables","title":"System Environment Variables","text":"<p>A number of core settings is additionally configurable through system environment variables. These are:</p> key in application.conf environment variable default value app.print-extended-config KNORA_WEBAPI_PRINT_EXTENDED_CONFIG false app.bcrypt-password-strength KNORA_WEBAPI_BCRYPT_PASSWORD_STRENGTH 12 app.jwt.secret KNORA_WEBAPI_JWT_SECRET_KEY super-secret-key app.jwt.expiration KNORA_WEBAPI_JWT_LONGEVITY 30 days app.jwt.issuer KNORA_WEBAPI_JWT_ISSUER 0.0.0.0:3333 app.dsp-ingest.audience KNORA_WEBAPI_DSP_INGEST_AUDIENCE http://localhost:3340 app.dsp-ingest.base-url KNORA_WEBAPI_DSP_INGEST_BASE_URL http://localhost:3340 app.allow-reload-over-http KNORA_WEBAPI_ALLOW_RELOAD_OVER_HTTP false app.ark.resolver KNORA_WEBAPI_ARK_RESOLVER_URL http://0.0.0.0:3336 app.ark.assigned-number KNORA_WEBAPI_ARK_NAAN 72163 app.knora-api.internal-host KNORA_WEBAPI_KNORA_API_INTERNAL_HOST 0.0.0.0 app.knora-api.internal-port KNORA_WEBAPI_KNORA_API_INTERNAL_PORT 3333 app.knora-api.external-protocol KNORA_WEBAPI_KNORA_API_EXTERNAL_PROTOCOL http app.knora-api.external-host KNORA_WEBAPI_KNORA_API_EXTERNAL_HOST 0.0.0.0 app.knora-api.external-port KNORA_WEBAPI_KNORA_API_EXTERNAL_PORT 3333 app.sipi.internal-protocol KNORA_WEBAPI_SIPI_INTERNAL_PROTOCOL http app.sipi.internal-host KNORA_WEBAPI_SIPI_INTERNAL_HOST localhost app.sipi.internal-port KNORA_WEBAPI_SIPI_INTERNAL_PORT 1024 app.sipi.external-protocol KNORA_WEBAPI_SIPI_EXTERNAL_PROTOCOL http app.sipi.external-host KNORA_WEBAPI_SIPI_EXTERNAL_HOST localhost app.sipi.external-port KNORA_WEBAPI_SIPI_EXTERNAL_PORT 443 app.ark.resolver KNORA_WEBAPI_ARK_RESOLVER_URL http://0.0.0.0:3336 app.ark.assigned-number KNORA_WEBAPI_ARK_NAAN 72163 app.salsah1.base-url KNORA_WEBAPI_SALSAH1_BASE_URL http://localhost:3335 app.triplestore.dbtype KNORA_WEBAPI_TRIPLESTORE_DBTYPE fuseki app.triplestore.use-https KNORA_WEBAPI_TRIPLESTORE_USE_HTTPS false app.triplestore.host KNORA_WEBAPI_TRIPLESTORE_HOST localhost app.triplestore.fuseki.port KNORA_WEBAPI_TRIPLESTORE_FUSEKI_PORT 3030 app.triplestore.fuseki.repository-name KNORA_WEBAPI_TRIPLESTORE_FUSEKI_REPOSITORY_NAME dsp-repo app.triplestore.fuseki.username KNORA_WEBAPI_TRIPLESTORE_FUSEKI_USERNAME admin app.triplestore.fuseki.password KNORA_WEBAPI_TRIPLESTORE_FUSEKI_PASSWORD test"},{"location":"DSP-API/04-publishing-deployment/configuration/#selectively-disabling-routes","title":"Selectively Disabling Routes","text":"<p>In <code>application.conf</code> the setting <code>app.routes-to-reject</code> contains a list of strings, representing routes which should be rejected.</p> <p>For Example, the string <code>\"v2/users\"</code> would lead to rejection of any route which contains this string.</p>"},{"location":"DSP-API/04-publishing-deployment/configuration/#startup-flags","title":"Startup Flags","text":"<p>There is a number of flags that can be set on startup, they will override any value set in the application configuration file:</p> <ul> <li><code>loadDemoData</code>, <code>--loadDemoData</code>, <code>-d</code>: Loads the demo data.</li> <li><code>allowReloadOverHTTP</code>, <code>--allow-reload-over-http</code>, <code>-r</code>: Allows   reloading of data over HTTP.</li> <li><code>-c</code>: Print the configuration at startup.</li> <li><code>--help</code>: Shows the help message with all startup flags.</li> </ul>"},{"location":"DSP-API/04-publishing-deployment/publishing/","title":"Publishing","text":"<p>DSP is published as a set of Docker images under the DaSCH Dockerhub Organization.</p> <p>The following Docker images are published:</p> <ul> <li>DSP-API</li> <li>Sipi (includes DSP's specific Sipi scripts)</li> <li>DSP-APP</li> </ul> <p>DSP's Docker images are published automatically through Github CI each time a pull-request is merged into the <code>main</code> branch.</p> <p>Each image is tagged with a version number, which is derived by using the result of <code>git describe</code>. The describe version is built from the <code>last tag + number of commits since tag + short hash</code>, e.g., <code>8.0.0-7-ga7827e9</code>.</p> <p>The images can be published locally by running:</p> <pre><code>make docker-build\n</code></pre> <p>or to Dockerhub:</p> <pre><code>make docker-publish\n</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0001-record-architecture-decisions/","title":"ADR-0001 Record architectural decisions as ADR","text":"<p>Date: 2022-03-14</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0001-record-architecture-decisions/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0001-record-architecture-decisions/#context","title":"Context","text":"<p>We need to record the architectural decisions made on this project.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0001-record-architecture-decisions/#decision","title":"Decision","text":"<p>We will use Architectural Decision Records, as described by Michael Nygard.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0001-record-architecture-decisions/#consequences","title":"Consequences","text":"<p>See Michael Nygard's article, linked above. For a lightweight ADR toolset, see Nat Pryce's adr-tools.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0002-change-cache-service-manager-from-akka-actor-to-zlayer/","title":"ADR-0002 Change Cache Service Manager from Akka-Actor to ZLayer","text":"<p>Date: 2022-04-06</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0002-change-cache-service-manager-from-akka-actor-to-zlayer/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0002-change-cache-service-manager-from-akka-actor-to-zlayer/#context","title":"Context","text":"<p>The <code>org.knora.webapi.store.cacheservice.CacheServiceManager</code> was implemented as an <code>Akka-Actor</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0002-change-cache-service-manager-from-akka-actor-to-zlayer/#decision","title":"Decision","text":"<p>As part of the move from <code>Akka</code> to <code>ZIO</code>,  it was decided that the <code>CacheServiceManager</code>  and the whole implementation of the in-memory and Redis backed cache  is refactored using ZIO.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0002-change-cache-service-manager-from-akka-actor-to-zlayer/#consequences","title":"Consequences","text":"<p>The usage from other actors stays the same. The actor messages and responses don't change.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0003-change-iiif-service-manager-and-sipi-implementation-to-zlayer/","title":"ADR-0003 Change IIIF Service Manager and Sipi implementation to zlayer","text":"<p>Date: 2022-04-29</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0003-change-iiif-service-manager-and-sipi-implementation-to-zlayer/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0003-change-iiif-service-manager-and-sipi-implementation-to-zlayer/#context","title":"Context","text":"<p>Both <code>org.knora.webapi.store.iiif.IIIFServiceManager</code> and <code>org.knora.webapi.store.iiif.impl.IIIFServiceSipiImpl</code> where implemented as Akka-Actors </p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0003-change-iiif-service-manager-and-sipi-implementation-to-zlayer/#decision","title":"Decision","text":"<p>As part of the move from <code>Akka</code> to <code>ZIO</code>,  it was decided that the <code>IIIFServiceManager</code> and the <code>IIIFServiceSipiImpl</code> is refactored using ZIO.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0003-change-iiif-service-manager-and-sipi-implementation-to-zlayer/#consequences","title":"Consequences","text":"<p>The usage from other actors stays the same. The actor messages and responses don't change.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0004-change-triplestore-service-manager-and-fuseki-implementation-to-zlayer/","title":"ADR-0004 Change Triplestore Service Manager and Fuseki implementation to ZLayer","text":"<p>Date: 2022-05-23</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0004-change-triplestore-service-manager-and-fuseki-implementation-to-zlayer/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0004-change-triplestore-service-manager-and-fuseki-implementation-to-zlayer/#context","title":"Context","text":"<p>Both <code>org.knora.webapi.store.triplestore.TriplestoreServiceManager</code>  and <code>org.knora.webapi.store.triplestore.impl.TriplestoreServiceHttpConnectorImpl</code> where implemented as Akka-Actors.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0004-change-triplestore-service-manager-and-fuseki-implementation-to-zlayer/#decision","title":"Decision","text":"<p>As part of the move from <code>Akka</code> to <code>ZIO</code>,  it was decided that the <code>TriplestoreServiceManager</code>  and the <code>TriplestoreServiceHttpConnectorImpl</code>  is refactored using ZIO.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0004-change-triplestore-service-manager-and-fuseki-implementation-to-zlayer/#consequences","title":"Consequences","text":"<p>The usage from other actors stays the same. The actor messages and responses don't change.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0005-change-respondermanager-to-a-simple-case-class/","title":"ADR-0005 Change ResponderManager to a simple case class","text":"<p>Date: 2022-06-06</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0005-change-respondermanager-to-a-simple-case-class/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0005-change-respondermanager-to-a-simple-case-class/#context","title":"Context","text":"<p>The <code>org.knora.webapi.responders.ResponderManager</code> was implemented as an Akka-Actor.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0005-change-respondermanager-to-a-simple-case-class/#decision","title":"Decision","text":"<p>In preparation of the move from <code>Akka</code> to <code>ZIO</code>, it was decided that the <code>ResponderManager</code> is refactored using plain <code>case</code> classes.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0005-change-respondermanager-to-a-simple-case-class/#consequences","title":"Consequences","text":"<p>The actor messages and responses don't change.  All calls made previously to the <code>ResponderManager</code> and the <code>StorageManager</code>  are now changed to the <code>ApplicationActor</code>  which will route the calls to either the <code>ResponderManager</code>  or the <code>StorageManager</code>, based on the message type.  The <code>ApplicationActor</code> is the only actor that is allowed to make calls  to either the <code>ResponderManager</code> or the <code>StorageManager</code>.  All requests from routes are now routed to the <code>ApplicationActor</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0006-use-zio-http/","title":"ADR-0006 Use ZIO HTTP","text":"<p>Date: 2022-12-01</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0006-use-zio-http/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0006-use-zio-http/#context","title":"Context","text":"<p>The current routes use the <code>Akka Http</code> library.  Because of changes to the licensing of the <code>Akka</code> framework,  we want to move away from using <code>Akka Http</code>.  This also fits the general strategic decision to use ZIO for the backend.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0006-use-zio-http/#decision","title":"Decision","text":"<p>In preparation of the move from <code>Akka</code> to <code>ZIO</code>,  it was decided that the routes should be ported to use the <code>ZIO HTTP</code> server / library instead of <code>Akka Http</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0006-use-zio-http/#consequences","title":"Consequences","text":"<p>In a first step only the routes are going to be ported, one by one,  to use <code>ZIO HTTP</code> instead of being routed through <code>Akka Http</code>.  The <code>Akka Actor System</code> still remains and will be dealt with later.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/","title":"ADR-0007 ZIO-fication of Responders","text":"<p>Date: 2023-02-20</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#context","title":"Context","text":"<p>In order to remove all Akka dependencies, we have to migrate the existing <code>Responder</code>s to a <code>ZIO</code> based implementation. This migration should be possible to do on a per <code>Responder</code> basis so that we do not do a single \"big-bang\" release with too much code changed at once.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#status-quo","title":"Status Quo","text":"<p>The central and only <code>Actor</code> is the <code>RoutingActor</code> which contains instances of each <code>Responder</code> as a field. Each of the <code>Responder</code>s needs an <code>ActorRef</code> to the <code>RoutingActor</code> and used the Akka \"ask pattern\" for communication with the other <code>Responders</code>. This means a <code>Responder</code> can only be created inside the <code>RoutingActor</code> because the <code>RoutingActor</code> must know every <code>Responder</code> in order to route the message but the <code>Responder</code> needs the <code>ActorRef</code> in order to communicate with the other <code>Responders</code>. This leads to a circular dependency between the <code>RoutingActor</code> and all Akka based <code>Responders</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#goal","title":"Goal","text":"<p>In the long term all <code>Responders</code> do not contain any Akka dependency anymore and all implementations currently returning a <code>Future</code> will return a <code>zio.Task</code>.</p> <p>The <code>zio.Task</code> is a very suitable replacement for the <code>Future</code> because:</p> <ul> <li>a <code>Future[A]</code> will complete with either a value <code>A</code> or with a failure <code>Throwable</code>.</li> <li>a <code>zio.Task[A]</code> will succeed with either a value <code>A</code> or fail with an error of type <code>Throwable</code>.</li> </ul> <p>Ideally all <code>Responders</code> will directly call the necessary components directly through invoking methods. However, this will not be possible in the beginning as there are <code>Responders</code> who call on each other creating yet another circular dependency which we cannot simply recreate with <code>ZLayer</code> dependency injection. Hence, a message like communication pattern through a central component the <code>MessageRelay</code> will be introduced which can replace the existing Akka \"ask pattern\" one to one in the ziofied component.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#solution","title":"Solution","text":"<p>The <code>MessageRelay</code> is capable of relaying message to subscribed <code>MessageHandler</code>s and replaces the existing Akka \"ask pattern\" with the <code>RoutingActor</code>. Messages which will have a <code>MessageHandler</code> implementation must <code>extend</code> the <code>RelayedMessage</code> trait so that these are routed to the <code>MessageRelay</code> from the <code>RoutingActor</code>. All other messages will be handled as before.</p> <p>In ziofied <code>Responders</code> we can use the <code>MessageRelay</code> for communication with all other <code>Responders</code> in a similar fashion as the Akka \"ask pattern\" by invoking the method <code>MessageRelay#ask(ResponderRequest): Task[Any]</code>. A special <code>MessageHandler</code> will route all messages which do not implement the <code>RelayedMessage</code> trait back to the <code>RoutingActor</code>, this is the <code>AppRouterRelayingMessageHandler</code>.</p> <p>In the long run we will prefer to invoke methods on the respective ziofied services directly. This is now already possible for example with the <code>TriplestoreServive</code>, i.e. instead of calling <code>MessageRelay#ask[SparqlSelectResul](SparqlSelectRequest)</code> it is much easier and more importantly typesafe to call <code>TriplestoreService#sparqlHttpSelect(String): UIO[SparqlSelectResult]</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#communication-between-akka-based-responder-and-another-akka-based-responder","title":"Communication between Akka based Responder and another Akka based Responder","text":"<p>Nothing changes with regard to existing communication patterns:</p> <pre><code>sequenceDiagram\n    autonumber\n    AkkaResponder -&gt;&gt; RoutingActor: \"ask(Request)\"\n    activate RoutingActor\n    RoutingActor -&gt;&gt; OtherAkkaResponder: \"sends message to\"\n    activate OtherAkkaResponder\n    OtherAkkaResponder -&gt;&gt; RoutingActor: \"returns response\"\n    deactivate OtherAkkaResponder\n    RoutingActor -&gt;&gt; AkkaResponder: \"returns response\"\n    deactivate RoutingActor</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#communication-between-akka-based-responder-and-ziofied-responder","title":"Communication between Akka based Responder and ziofied Responder","text":"<p>The <code>AkkaResponder</code> code remains unchanged and will still <code>ask</code> the <code>ActorRef</code> to the <code>RoutingActor</code>. The <code>RoutingActor</code> will forward the message to the <code>MessageRelay</code> and return its response to the <code>AkkaResponder</code>.</p> <pre><code>sequenceDiagram\n    autonumber\n    AkkaResponder -&gt;&gt; RoutingActor: \"ask(RelayedMessage)\"\n    activate RoutingActor\n    RoutingActor -&gt;&gt; MessageRelay: \"messageRelay.ask(RelayedMessage)\"\n    activate MessageRelay\n    MessageRelay -&gt;&gt; MessageRelay: \"finds MessageHandler\"\n    MessageRelay -&gt;&gt; ZioResponder: \"calls .handle(Request)\"\n    activate ZioResponder\n    ZioResponder -&gt;&gt; MessageRelay: \"returns response\"\n    deactivate ZioResponder\n    MessageRelay -&gt;&gt; RoutingActor: \"returns response\"\n    deactivate MessageRelay\n    RoutingActor -&gt;&gt; AkkaResponder: \"returns response\"\n    deactivate RoutingActor</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#communication-between-ziofied-responder-and-akka-based-responder","title":"Communication between ziofied Responder and Akka based Responder","text":"<p>The <code>AppRouterRelayingMessageHandler</code> route all messages which do not implement the <code>RelayedMessage</code> trait to the <code>RoutingActor</code>.</p> <pre><code>sequenceDiagram\n    autonumber\n    ZioResponder -&gt;&gt; MessageRelay: \"ask(Request)\"\n    activate MessageRelay\n    MessageRelay -&gt;&gt; MessageRelay: \"finds MessageHandler\"\n    MessageRelay -&gt;&gt; AppRouterRelayingMessageHandler: \"calls .handle(Request)\"\n    activate AppRouterRelayingMessageHandler\n    AppRouterRelayingMessageHandler -&gt;&gt; RoutingActor: \"sends message to\"\n    deactivate AppRouterRelayingMessageHandler\n    activate RoutingActor\n    RoutingActor -&gt;&gt; AkkaResponder: \"calls AkkaResponder\"\n    activate AkkaResponder\n    AkkaResponder -&gt;&gt; RoutingActor: \"returns response\"\n    deactivate AkkaResponder\n    RoutingActor -&gt;&gt; MessageRelay: \"returns response\"\n    deactivate RoutingActor\n    MessageRelay -&gt;&gt; ZioResponder: \"returns response\"\n    deactivate MessageRelay</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#communication-between-two-ziofied-responders","title":"Communication between two ziofied Responders","text":""},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#variant-using-the-messagerelay","title":"Variant using the MessageRelay","text":"<pre><code>sequenceDiagram\n    autonumber\n    ZioResponder -&gt;&gt; MessageRelay: \"ask(Request)\"\n    activate MessageRelay\n    MessageRelay -&gt;&gt; MessageRelay: \"finds MessageHandler\"\n    MessageRelay -&gt;&gt; OtherZioResponder: \"calls .handle(Request)\"\n    activate OtherZioResponder\n    OtherZioResponder -&gt;&gt; MessageRelay: \"returns response\"\n    deactivate OtherZioResponder\n    MessageRelay -&gt;&gt; ZioResponder: \"returns response\"\n    deactivate MessageRelay</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#variant-if-other-responder-is-a-direct-dependency","title":"Variant if other Responder is a direct dependency","text":"<pre><code>sequenceDiagram\n    autonumber\n    ZioResponder -&gt;&gt; TriplestoreService: \"calls method\"\n    activate TriplestoreService\n    TriplestoreService -&gt;&gt; ZioResponder: \"returns response\"\n    deactivate TriplestoreService</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#decision","title":"Decision","text":"<p>In preparation of the move from <code>Akka</code> to <code>ZIO</code>,  it was decided that the <code>Responders</code> should be ported to use return <code>ZIO</code>s and the <code>MessageRelay</code>  instead of <code>Future</code>s and the <code>ActorRef</code> to the <code>RoutingActor</code>.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0007-zio-fication-of-responders/#consequences","title":"Consequences","text":"<p>In a first step only the <code>Responders</code> are going to be ported, one by one, to use the above pattern.  The <code>Akka Actor System</code> still remains, will be used in the test and will be removed in a later step. Due to the added indirections and the blocking nature of <code>Unsafe.unsafe(implicit u =&gt; r.unsafe.run(effect))</code>  it is necessary to spin up more <code>RoutingActor</code> instances as otherwise deadlocks will occur. This should not be a problem as any shared state, e.g. caches,  is not held within the <code>RoutingActor</code> or one of its contained <code>Responder</code> instances.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0008-replace-akka-with-pekko/","title":"ADR-0006 Replace Akka with Pekko","text":""},{"location":"DSP-API/05-internals/design/adr/ADR-0008-replace-akka-with-pekko/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0008-replace-akka-with-pekko/#context","title":"Context","text":"<p>On 7. September 2022 Lightbend announced a  license change for the Akka project,  the TL;DR being that you will need a commercial license to use future versions of Akka (2.7+) in production  if you exceed a certain revenue threshold.</p> <p>For now, we have staid on Akka 2.6, the current latest version that is still available under the original license.  Historically Akka has been incredibly stable, and combined with our limited use of features,  we did not expect this to be a problem.</p> <p>However, the last update of Akka 2.6 is announced to be in September 2023.</p> <p>Will critical vulnerabilities and bugs be patched in 2.6.x? Yes, critical security updates and critical bugs will be patched in Akka v2.6.x    under the current Apache 2 license until September of 2023.</p> <p>As a result, we will not receive further updates and we will never get support for Scala 3 for Akka.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0008-replace-akka-with-pekko/#proposal","title":"Proposal","text":"<p>Apache Pekko is based on the latest version of Akka in the v2.6.x series.  It is currently an incubator project in the ASF.  All Akka modules currently in use in the dsp-api are already released and ported to  pekko:  https://mvnrepository.com/artifact/org.apache.pekko</p> <p>The latest stable version 1.0.1  is compatible with Akka v2.6.x series and meant to be a plug in replacement.</p> <p>Scala 3.3.0 is the minimum Scala 3 version supported. Scala 2.12 and 2.13 are still supported.</p> <p>The migration guide</p> <p>Our current migration to another http server implementation is currently on hold,  but we might want to switch to Pekko so that we could receive security updates and bugfixes.</p> <p>The proof of concept implementation has been shared in the pull request  here,  allowing for further testing and validation of the proposed switch to Pekko.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0008-replace-akka-with-pekko/#decision","title":"Decision","text":"<p>We replace Akka and Akka/Http with Apache Pekko.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0009-api-v3/","title":"ADR-009: API <code>v3</code> for client-optimized endpoints","text":"<p>Date: 2025-09-22 RFC: RFC-018</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0009-api-v3/#status","title":"Status","text":"<p>Accepted</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0009-api-v3/#context","title":"Context","text":"<p>DSP-APP currently requires excessive API calls to load a single project page.  The existing v2 and admin APIs present several challenges:</p> <ul> <li>API Design Mismatch: APIs reflect backend/triplestore structure rather than frontend domain concepts</li> <li>Technical Limitations: RDF-based v2 API doesn't integrate well with OpenAPI, requires JS-Lib intermediary layer</li> <li>Performance Issues: Single-entity focus leads to excessive round trips and complex state management</li> <li>Stability Constraints: v2's public status prevents breaking changes needed for frontend optimization</li> </ul> <p>The team needs an API specifically designed for frontend consumption without the constraints of backward compatibility.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0009-api-v3/#decision","title":"Decision","text":"<p>We will implement a new v3 API with the following characteristics:</p> <ul> <li>Internal, non-public API explicitly flagged as volatile and subject to change without notice</li> <li>Frontend-optimized design focusing on complete domain entities and data aggregation</li> <li>Plain JSON requests/responses with comprehensive OpenAPI specifications</li> <li>Incremental development starting with high-impact endpoints identified by frontend developers</li> <li>Coexistence with existing APIs rather than replacement - v2 remains for semantic web use cases</li> </ul> <p>The v3 API will share services and repositories with existing APIs in the long term,  diverging only at endpoint and REST service layers.</p> <p>While the focus is on DSP-APP, the v3 API will be designed supporting all internal clients, including DSP-TOOLS.</p> <p>Initial up-front design of the v3 API will be done in a separate project  in collaboration between frontend and backend developers. This document will be updated when the design is finalized.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0009-api-v3/#consequences","title":"Consequences","text":"<p>To be seen.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/","title":"ADR-0010: API <code>v3</code> basics","text":"<p>Date: 2025-11- 05 </p> <p>RFC: RFC-020</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#context","title":"Context","text":"<p>We want to build a V3 API (ADR-0009).  In this ADR the foundational basics on which we can agree on before modelling specific endpoints in detail are laid out. This will describe content types, error types and authentication as well as a general approach on how to model the API in the long run.</p> <p>ADR-009 has decided the V3 API should be based on plain JSON requests/responses with a comprehensive OpenAPI specification.</p> <p>Identified Problems with existing API v2:</p> <ul> <li>JSON-LD is hard to handle</li> <li>Requesting multiple entities is cumbersome</li> <li>API design confusing sometimes<ul> <li>Supporting too many different identifiers for an entity</li> <li>Overloading responsibilities in the permissions api for example</li> <li>Unclear how certain parameters are passed (header, body, implicit by passing a certain IRI schema\u2026)</li> <li>Projects are not well separated in resource/values api</li> </ul> </li> </ul>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#authentication","title":"Authentication","text":"<p>V3 will accept JWT Bearer tokens in the header only.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#identifiers-for-entities","title":"Identifiers for Entities","text":"<p>As an identifier for any entity we will use existing IRIs in the current complex schema.</p> <p>Alternative (kind of but not really)</p> <p>Create new external identifiers for existing entities.</p> <p>Advantage:</p> <ul> <li>New ids could be shorter, more human readable, no need for URL encoding</li> </ul> <p>Drawback:</p> <ul> <li>Huge effort in data migration.</li> <li>Not easy to use with existing code already integrated with  v2 (which supports these iris  supported for all entities).</li> <li>It is confusing to have too many different identifiers for an entity.</li> </ul>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#api-design-guidelines","title":"API Design Guidelines","text":"<p>Generally we would like to follow a RESTful approach to API design with the focus on entities being part of the REST resource.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#naming-conventions","title":"Naming Conventions","text":"<p>Entities are always named in plural in the path, e.g. <code>/v3/projects/</code>.</p> <p>Compound words are in camel case, e.g. <code>resourceIri</code> <code>resourceClassIri</code> in the path, query params as well as in payloads.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#design-examples","title":"Design Examples","text":"<p>As an example for retrieving information using GET requests for projects, resources and values:</p> <p><code>/v3/projects/:projectIri/resources/:resourceIri/values/:valueIri</code> - returns a single Value</p> <p><code>/v3/projects/:projectIri/resources/:resourceIri</code>  - returns a single Resource</p> <p><code>/v3/projects/:projectIri</code> - returns a single Project</p> <p>Currently the a Value IRI by design contains the information to which resource/project it belongs to.  The proposed API design reflects that: a value can only exist by belonging to a resource that itself must belong to a single project.</p> <p>Retrieving multiple entities within its context is done using a GET request on the respective path using query parameters, for example: <code>/v3/projects/:projectIri/resources/?resourceClassIri=???</code></p> <p>Other aspects as for example project boundary crossing searches or exports can be modelled using new paths on the v3 base level:</p> <ul> <li><code>/v3/search/</code></li> <li><code>/v3/export/resources</code></li> </ul>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#pagination","title":"Pagination","text":"<p>Retrieving multiple entities MUST be done using pagination as is currently the case with the project legal info endpoints.</p> <p>The default page SHOULD be 1 (i.e. the first page, one indexed), and the default page-size SHOULD be 25.</p> <p>A paged response look like this:</p> <pre><code>{\n  \"data\": [\n    /** some entity JSON objects **/\n  ],\n  \"pagination\": {\n    \"pageSize\": 25,\n    \"totalItems\": 75,\n    \"totalPages\": 3,\n    \"currentPage\": 2\n  }\n}\n</code></pre> <p>These endpoints MUST share the common vocabulary for page and size query params <code>page</code> and <code>page-size</code> .</p> <p>Designing filtering and ordering commonalities should be considered a separate ADR, if that is even possible.</p>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#error-responses","title":"Error Responses","text":"<p>A new error response model has already been discussed in more detail.</p> <p>In general error responses:</p> <ul> <li>MUST allow to provide multiple problems at once.</li> <li>MUST contain a code identifying the error which will be translated by the app</li> <li>SHOULD contain error details which may be interpolated while translating the app</li> <li>SHOULD be human readable for developers</li> </ul> <p>Example:</p> <pre><code>{\n  \"message\" : \"Unable to authenticate\",\n  \"errors\" : [\n     {\n       \"code\" : \"user_not_found\",\n       \"message\" : \"User https://example.org/userIri not found\",\n       \"details\" : {\n         \"userIri\" : \"https://example.org/userIri\"\n       }\n  ]\n}\n</code></pre>"},{"location":"DSP-API/05-internals/design/adr/ADR-0010-api-v3-basics/#language-support","title":"Language support","text":"<p>Where the api currently supports different languages we will keep on supporting them and will have to make it explicit in the responses, for the time being we should return all available languages immediately.  For multilanguage properties the responses should look something like the following example, if a language is not present in the data it may be omitted in the response, as to indicate the lack of a value.</p> <pre><code>{\n   \"someValueWithLanguageSupport\" : {\n     \"en\" : \"English\",\n     \"de\" : \"Deutsch\"\n   },\n   \"someValueWithoutLanguage\" : \"the string is the value, no knowlegde of what language\"\n }\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-admin/administration/","title":"Administration","text":""},{"location":"DSP-API/05-internals/design/api-admin/administration/#permissions","title":"Permissions","text":"<p>The permissions API endpoint is described in the permission documentation.</p> <p>The default permissions when a project is created are described admin api documenation.</p> <p>DSP's concept of access control is that permissions  can only be granted to groups and not to individual users. There are two distinct ways of granting permission.</p> <ol> <li>An object (a resource or value) can grant permissions to groups of users.</li> <li>Permissions can be granted directly to a group of users (not bound to a specific object).</li> </ol> <p>There are six built-in groups:  UnknownUser, KnownUser, Creator, ProjectMember, ProjectAdmin, and SystemAdmin.  These groups can be used in the same way as normal user created groups for permission management, i.e. can be used to give certain groups of users, certain permissions, without the need to explicitly create them.</p> <p>A user becomes implicitly a member of such a group by satisfying certain conditions:</p> <ul> <li> <p>knora-admin:UnknownUser:   Any user who has not logged into the DSP is automatically assigned to this group.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#UnknownUser</code></p> </li> <li> <p>knora-admin:KnownUser:   Any user who has logged into the DSP is automatically assigned to this group.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#KnownUser</code></p> </li> <li> <p>knora-admin:Creator:   When checking a user\u2019s permissions on an object, the user is automatically assigned to this group    if they are the creator of the object.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#Creator</code></p> </li> <li> <p>knora-admin:ProjectMember:   When checking a user\u2019s permissions, the user is automatically assigned to this group    by being a member of a project designated by the <code>knora-admin:isInProject</code> property.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#ProjectMember</code></p> </li> <li> <p>knora-admin:ProjectAdmin:   When checking a user's permission, the user is automatically assigned to this group    through the <code>knora-admin:isInProjectAdminGroup</code> property, which points to the  project in question.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#ProjectAdmin</code></p> </li> <li> <p>knora-admin:SystemAdmin:   Membership is received by setting the property <code>knora-admin:isInSystemAdminGroup</code> to <code>true</code> on a <code>knora-admin:User</code>.   Group IRI: <code>http://www.knora.org/ontology/knora-admin#SystemAdmin</code></p> </li> </ul> <p>There are three kinds of permissions:</p> <ol> <li>object access permissions, which contain permissions     that point from explicit objects (resources/values) to groups.</li> <li>administrative permissions, which contain permissions     that are put on instances of <code>knora-admin:Permission</code> objects directly affecting groups. </li> <li>default object access permissions which are also put on instances of <code>knora-admin:Permission</code>,    and which also directly affect groups.</li> </ol>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#object-access-permissions","title":"Object Access Permissions","text":"<p>An object (resource / value) can grant the following permissions, which are stored in a compact format in a single string, which is the object of the predicate <code>knora-base:hasPermissions</code>:</p> <ol> <li>Restricted view permission (RV): Allows a restricted view of    the object, e.g. a view of an image with a watermark.</li> <li>View permission (V): Allows an unrestricted view of the    object. Having view permission on a resource only affects the    user's ability to view information about the resource other than    its values. To view a value, she must have view permission on the    value itself.</li> <li>Modify permission (M): For values, this permission allows a    new version of a value to be created. For resources, this allows    the user to create a new value (as opposed to a new version of an    existing value), or to change information about the resource other    than its values. When he wants to make a new version of a value,    his permissions on the containing resource are not relevant.    However, when he wants to change the target of a link, the old    link must be deleted and a new one created, so he needs modify    permission on the resource.</li> <li>Delete permission (D): Allows the item to be marked as deleted.</li> <li>Change rights permission (CR): Allows the permissions granted by the object to be changed.</li> </ol> <p>Each permission in the above list implies all lower-numbered permissions.</p> <p>A user's permission level on a particular object is calculated in the following way:</p> <ol> <li>Make a list of the groups that the user belongs to, including    Creator and/or ProjectMember and/or ProjectAdmin if applicable.</li> <li>Make a list of the permissions that she can obtain on the    object, by iterating over the permissions that the object    grants. For each permission, if she is in the specified group,    add the specified permission to the list of permissions she can    obtain.</li> <li>From the resulting list, select the highest-level permission.</li> <li>If the result is that she would have no permissions, give her    whatever permission UnknownUser would have.</li> </ol> <p>The format of the object of <code>knora-base:hasPermissions</code> is as follows:</p> <ul> <li>Each permission is represented by the one-letter or two-letter   abbreviation given above.</li> <li>Each permission abbreviation is followed by a space, then a   comma-separated list of groups that the permission is granted   to.</li> <li>The IRIs of built-in groups are shortened using the knora-admin   prefix.</li> <li>Multiple permissions are separated by a vertical bar (|).</li> </ul> <p>For example, if an object grants view permission to unknown and known users, and modify permission to project members, the resulting permission literal would be: <code>V knora-admin:UnknownUser,knora-admin:KnownUser|M knora-admin:ProjectMember</code>.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#administrative-permissions","title":"Administrative Permissions","text":"<p>The following permissions can be set via instances of <code>knora-admin:AdministrativePermission</code> on any group belonging to a project. For users that are members of a number of groups with administrative permissions attached, the final set of permissions is additive and most permissive. The administrative permissions are stored in a compact format in a single string, which is the object of the predicate <code>knora-base:hasPermissions</code> attached to an instance of the <code>knora-admin:AdministrativePermission</code> class. The following permission values can be used:</p> <ol> <li>Resource / Value Creation Permissions:     1) ProjectResourceCreateAllPermission:         - description: gives the permission to create resources inside the project.         - usage: used as a value for knora-base:hasPermissions.     2) ProjectResourceCreateRestrictedPermission:         - description: gives restricted resource creation permission inside the project.         - usage: used as a value for knora-base:hasPermissions.         - value: <code>RestrictedProjectResourceCreatePermission</code>           followed by a comma-separated list of ResourceClasses           the user should only be able to create instances of.</li> <li>Project Administration Permissions:     1) ProjectAdminAllPermission:         - description: gives the user the permission to do anything           on project level, i.e. create new groups, modify all           existing groups (group info, group membership,           resource creation permissions, project administration           permissions, and default permissions).         - usage: used as a value for knora-base:hasPermissions.     2) ProjectAdminGroupAllPermission:         - description: gives the user the permission to modify           group info and group membership on all groups           belonging to the project.         - usage: used as a value for the knora-base:hasPermissions property.     3) ProjectAdminGroupRestrictedPermission:         - description: gives the user the permission to modify           group info and group membership on certain groups           belonging to the project.         - usage: used as a value for knora-base:hasPermissions         - value: <code>ProjectGroupAdminRestrictedPermission</code> followed by           a comma-separated list of <code>knora-admin:UserGroup</code>.     4) ProjectAdminRightsAllPermission:         - description: gives the user the permission to change the           permissions on all objects belonging to the project           (e.g., default permissions attached to groups and           permissions on objects).         - usage: used as a value for the knora-base:hasPermissions property.</li> </ol> <p>The administrative permissions are stored in a compact format in a single string, which is the object of the predicate <code>knora-base:hasPermissions</code> attached to an instance of the <code>knora-admin:AdministrativePermission</code> class.</p> <ul> <li>The format of the object of <code>knora-base:hasPermissions</code> is as follows:<ul> <li>Each permission is represented by the name given above.</li> <li>Each permission is followed by a space, then if applicable, by comma separated list of IRIs, as defined above.</li> <li>The IRIs of built-in values (e.g., built-in groups, resource   classes, etc.) are shortened using the knora-admin prefix <code>knora-admin:</code>.</li> <li>Multiple permissions are separated by a vertical bar (|).</li> </ul> </li> </ul> <p>For example, if an administrative permission grants the <code>knora-admin:ProjectMember</code> group the permission to create all resources (ProjectResourceCreateAllPermission), the resulting administrative permission object with the compact form literal would be: :</p> <pre><code>&lt;http://rdfh.ch/permissions/001\n        rdf:type knora-admin:AdministrativePermission ;\n        knora-admin:forProject &lt;http://rdfh.ch/projects/00FF&gt;;\n        knora-admin:forGroup knora-admin:ProjectMember ;\n        knora-base:hasPermissions \"ProjectResourceCreateAllPermission\"^^xsd:string .\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#default-object-access-permissions","title":"Default Object Access Permissions","text":"<p>Default Object Access Permissions are used when new objects (resources and/or values) are created. They represent object access permissions with which the new object will be initially outfitted. As with administrative permissions, these default object access permissions can be defined for any number of groups. Additionally, they can be also defined for resource classes and properties.</p> <p>The following default object access permissions can be attached to groups, resource classes and/or properties via instances of knora-admin:DefaultObjectAccessPermission (described further bellow). The default object access permissions correspond to the earlier described object access permission:</p> <ol> <li>Default Restricted View Permission (RV):<ul> <li>description: any object, created by a user inside a group   holding this permission, is restricted to carry this permission</li> <li>value: <code>RV</code> followed by a comma-separated list of <code>knora-admin:UserGroup</code></li> </ul> </li> <li>Default View Permission (V):<ul> <li>description: any object, created by a user inside a group   holding this permission, is restricted to carry this permission</li> <li>value: <code>V</code> followed by a comma-separated list of <code>knora-admin:UserGroup</code></li> </ul> </li> <li>Default Modify Permission (M) accompanied by a list of groups.<ul> <li>description: any object, created by a user inside a group   holding this permission, is restricted to carry this permission</li> <li>value: <code>M</code> followed by a comma-separated list of <code>knora-admin:UserGroup</code></li> </ul> </li> <li>Default Delete Permission (D) accompanied by a list of groups.<ul> <li>description: any object, created by a user inside a group   holding this permission, is restricted to carry this permission</li> <li>value: <code>D</code> followed by a comma-separated list of <code>knora-admin:UserGroup</code></li> </ul> </li> <li>Default Change Rights Permission (CR) accompanied by a list of groups.<ul> <li>description: any object, created by a user inside a group   holding this permission, is restricted to carry this permission</li> <li>value: <code>CR</code> followed by a comma-separated list of <code>knora-admin:UserGroup</code></li> </ul> </li> </ol> <p>A single instance of <code>knora-admin:DefaultObjectAccessPermission</code> must always reference a project, but can only reference either a group (<code>knora-admin:forGroup</code> property), a resource class (<code>knora-admin:forResourceClass</code>), a property (<code>knora-admin:forProperty</code>), or a combination of resource class and property.</p> <p>Example default object access permission instance:</p> <pre><code>&lt;http://rdfh.ch/permissions/002\n        rdf:type knora-admin:DefaultObjectAccessPermission ;\n        knora-admin:forProject &lt;http://rdfh.ch/projects/00FF&gt;;\n        knora-admin:forGroup knora-admin:ProjectMember ;\n        knora-base:hasPermissions \"CR knora-admin:Creator|M knora-admin:ProjectMember|V knora-admin:KnownUser\"^^xsd:string .\n</code></pre> <p>This instance is setting default object access permissions to the project member group of a project, giving change right permission to the creator, modify permission to all project members, and view permission to known users. Further, this implicitly applies to all resource classes and all their properties inside the project.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#permission-precedence-rules","title":"Permission Precedence Rules","text":"<p>For both administrative permissions and default object access permissions, the resulting permissions are derived by applying precedence rules, for the case that the user is member of more than one group.</p> <p>The following list is sorted by the permission precedence level in descending order:</p> <ul> <li>permissions on <code>knora-admin:ProjectAdmin</code> (highest level)</li> <li>permissions on resource classes and property combination (own project)</li> <li>permissions on properties (own project, when creating a Value)</li> <li>permissions on resource classes (own project, when creating a Resource)</li> <li>permissions on custom groups</li> <li>permissions on <code>knora-admin:ProjectMember</code></li> </ul> <p>The permissions on resource classes / properties are only relevant for default object access permissions.</p> <p>Administrative Permissions: When a user performs an operation requiring administrative permissions, then only the permissions from the highest level are taken into account. If a user is a member of more than one group on the same level (only possible for custom groups) then the defined permissions are summed up and all are taken into account.</p> <p>Default Object Access Permissions: When a user creates a resource or value, then only the default object permissions from the highest level are applied. If a user is a member of more than one group on the same level (only possible for custom groups) then the defined permissions are summed up and the most permissive are applied.</p> <p>In the case of the user belonging to the SystemAdmin group, but which is not member of a project and thus not member of any group belonging to the project, the default object access permissions from the ProjectAdmin, or ProjectMember group will be applied in the order of precedence. If no permissions are defined on either of these groups, then the resulting permission will be <code>CR knora-admin:Creator</code>.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#implicit-permissions","title":"Implicit Permissions","text":"<p>The <code>knora-admin:SystemAdmin</code> group receives implicitly the following permissions:</p> <ul> <li>receives implicitly ProjectAdminAllPermission for all projects.</li> <li>receives implicitly ProjectResourceCreateAllPermission for all projects.</li> <li>receives implicitly CR on all objects from all projects.</li> </ul> <p>These permissions are baked into the system, and cannot be changed.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#default-permissions-matrix-for-new-projects","title":"Default Permissions Matrix for new Projects","text":"<p>The access control matrix defines what are the default operations a subject (i.e. User), being a member of a built-in group (represented by row headers), is permitted to perform on an object (represented by column headers). The different operation abbreviations used are defined as follows:</p> <ul> <li> <p>C: Create - the subject inside the group is allowed to create the object.</p> </li> <li> <p>U: Update - the subject inside the group is allowed to update the object.</p> </li> <li> <p>R: Read - the subject inside the group is allowed to read all information about the object.</p> </li> <li> <p>D: Delete - the subject inside the group is allowed to delete the object.</p> </li> <li> <p>P: Permission - the subject inside the group is allowed to change the permissions on the object.</p> </li> <li> <p>-: none - none or not applicable</p> </li> </ul> Built-In Group Project Group User Resource Value SystemAdmin <code>CRUD</code> <code>CRUDP</code> <code>CRUDP</code> all <code>CRUDP</code> all <code>CRUDP</code> all ProjectAdmin <code>-RUD</code> <code>CRUDP</code> <code>CRUDP</code> +/- project <code>CRUDP</code> (in project) <code>CRUDP</code> (in project) ProjectMember <code>----</code> <code>-----</code> <code>-----</code> <code>CRU--</code> (in project) <code>-----</code> (in project) Creator <code>----</code> <code>-----</code> <code>-----</code> <code>-----</code> (his resource) <code>-----</code> (his value) KnownUser <code>C---</code> <code>C----</code> <code>CRUD-</code> himself <code>-----</code> (in project) <code>-----</code> (in project) <p>Default Permissions Matrix for new Projects</p> <p>The explicitly defined default permissions for a new project are as follows:</p> <ul> <li> <p><code>knora-admin:ProjectAdmin</code> group:</p> <ul> <li>Administrative Permissions:<ul> <li>ProjectResourceCreateAllPermission.</li> <li>ProjectAdminAllPermission.</li> </ul> </li> <li>Default Object Access Permissions:<ul> <li>CR for the knora-admin:ProjectAdmin group</li> <li>D for the knora-admin:ProjectAdmin group</li> <li>M for the knora-admin:ProjectAdmin group</li> <li>V for the knora-admin:ProjectAdmin group</li> <li>RV for the knora-admin:ProjectAdmin group</li> </ul> </li> </ul> </li> <li> <p>The <code>knora-admin:ProjectMember</code> group:</p> <ul> <li>Administrative Permissions:<ul> <li>ProjectResourceCreateAllPermission.</li> </ul> </li> <li>Default Object Access Permissions:<ul> <li>M for the knora-admin:ProjectMember group</li> <li>V for the knora-admin:ProjectMember group</li> <li>RV for the knora-admin:ProjectMember group</li> </ul> </li> </ul> </li> </ul>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#basic-workflows-involving-permissions","title":"Basic Workflows involving Permissions","text":""},{"location":"DSP-API/05-internals/design/api-admin/administration/#creating-a-new-resource","title":"Creating a new Resource","text":""},{"location":"DSP-API/05-internals/design/api-admin/administration/#accessing-a-resourcevalue","title":"Accessing a Resource/Value","text":""},{"location":"DSP-API/05-internals/design/api-admin/administration/#project-group-administration","title":"Project / Group Administration","text":""},{"location":"DSP-API/05-internals/design/api-admin/administration/#implementation","title":"Implementation","text":"<p>The requirements for defining default permissions imposed by all the different use cases are very broad. Potentially, we need to be able to define default permissions per project, per group, per resource class, per resource property, and all their possible combinations.</p> <p>For this reason, we introduce the knora-admin:Permission class with two sub-classes, namely knora-admin:AdministrativePermission and knora-admin:DefaultObjectAccessPermission, which instances will carry all the necessary information.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#permission-class-hierarchy-and-structure","title":"Permission Class Hierarchy and Structure","text":"<p>The following graphs show the class hierarchy and the structure of each permission class.</p> <p>Permission Class Hierarchy:</p> <p></p> <p>Administrative Permission Structure:</p> <p></p> <p>and the same as RDF:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:AdministrativePermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forGroup &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt; ;\n     knora-base:hasPermissions \"ProjectResourceCreateAllPermission|\n                                ProjectResourceCreateRestrictedPermission \"&lt;Resource Class IRI&gt;\"|\n                                ProjectAdminAllPermission|\n                                ProjectAdminGroupAllPermission|\n                                ProjectAdminGroupRestrictedPermission \"&lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;, &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;\"|\n                                ProjectAdminRightsAllPermission\"^^xsd:string .\n</code></pre> <p>Default Object Access Permission Structure:</p> <p></p> <p>and the same as RDF:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:DefaultObjectAccessPermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forGroup &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt; ;\n     knora-admin:forResourceClass \"Resource Class Name\" ;\n     knora-admin:forProperty \"Resource Property Name\" ;\n     knora-base:hasPermissions \"RV &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;|\n                                 V &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;|\n                                 M &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;|\n                                 D &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;|\n                                CR &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;\"^^xsd:string .\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#querying-permission-instances","title":"Querying Permission Instances","text":"<p>The properties forProject and either of forGroup, forResourceClass, and forProperty form together a compound key, allowing finding existing permission instances, that address the same set of Project / Group / ResourceClass / Property combination, thus making it possible to extend or change the attached permissions.</p> <p>Administrative Permission Instances: For each group inside the project, there can be zero or one instance holding administrative permission information. Querying is straitforward by using the knora-admin:forProject and knora-admin:forGroup properties as the compound key.</p> <p>Default Object Access Permission Instances: For each group, resource class, or property inside the project, there can be zero or one instances holding default object access permission informations. Querying is straitforward by using the knora-admin:forProject and either knora-admin:forGroup, knora-admin:forResourceClass, or knora-admin:forProperty properties as part of the compound key.</p>"},{"location":"DSP-API/05-internals/design/api-admin/administration/#example-data-stored-in-the-permissions-graph","title":"Example Data stored in the permissions graph","text":"<p>Administrative permissions on a 'ProjectAdmin' group:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:AdministrativePermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/00FF&gt; ;\n     knora-admin:forGroup knora-admin:ProjectAdmin ;\n     knora-base:hasPermissions \"ProjectResourceCreateAllPermission|\n                                ProjectAdminAllPermission\"^^xsd:string .\n</code></pre> <p>Administrative permissions on a 'ProjectMember' group:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:AdministrativePermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/00FF&gt; ;\n     knora-admin:forGroup knora-admin:ProjectMember ;\n     knora-base:hasPermissions \"ProjectResourceCreateAllPermission\"^^xsd:string .\n</code></pre> <p>Administrative permission restricting project admin permission on a group:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:Permission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forGroup &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt; ;\n     knora-base:hasPermissions \"ProjectGroupAdminRestrictedPermission &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;\"^^xsd:string .\n</code></pre> <p>Administrative permission restricting resource creation for a group:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:AdministrativePermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forGroup &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt; ;\n     knora-base:hasPermissions \"ProjectResourceCreateRestrictedPermission &lt;http://www.knora.org/ontology/00FF/images#Person&gt;\"^^xsd:string .\n</code></pre> <p>Default object access permission on a 'ProjectMember' group:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:DefaultObjectAccessPermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/00FF&gt; ;\n     knora-admin:forGroup knora-admin:ProjectMember ;\n     knora-base:hasPermissions \"CR knora-admin:Creator|\n                                 M &lt;http://rdfh.ch/groups/[shortcode]/[UUID]&gt;|\n                                 V knora-admin:KnownUser\"^^xsd:string .\n</code></pre> <p>Default object access permission on a resource class:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:DefaultObjectAccessPermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forResourceClass &lt;http://www.knora.org/ontology/00FF/images#person&gt; ;\n     knora-base:hasPermissions \"CR knora-admin:Creator,knora-admin:ProjectMember|\n                                 V knora-admin:KnownUser,knora-admin:UnknownUser\"^^xsd:string .\n</code></pre> <p>Default object access permission on a resource property:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:DefaultObjectAccessPermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forProperty &lt;http://www.knora.org/ontology/00FF/images#lastname&gt; ;\n     knora-base:hasPermissions \"D knora-admin:ProjectMember,knora-admin:Creator|\n                                V knora-admin:KnownUser,knora-admin:UnknownUser\"^^ .\n</code></pre> <p>Default object access permission on a resource class and property:</p> <pre><code>&lt;http://rdfh.ch/permissions/[UUID]&gt; rdf:type knora-admin:DefaultObjectAccessPermission ;\n     knora-admin:forProject &lt;http://rdfh.ch/projects/[shortcode]&gt; ;\n     knora-admin:forResourceClass &lt;http://www.knora.org/ontology/00FF/images#person&gt; ;\n     knora-admin:forProperty &lt;http://www.knora.org/ontology/00FF/images#lastname&gt; ;\n     knora-base:hasPermissions \"CR knora-admin:Creator,knora-admin:ProjectMember|\n                                 V knora-admin:KnownUser,knora-admin:UnknownUser\"^^xsd:string .\n</code></pre> <p>When the user's <code>UserProfile</code> is queried, all permissions for all projects and groups the user is a member of are also queried. This information is then stored as an easy accessible object inside the <code>UserProfile</code>, being readily available wherever needed. As this is a somewhat expensive operation, built-in caching mechanism at different levels (e.g., UsersResponder, PermissionsResponder), will be applied.</p>"},{"location":"DSP-API/05-internals/design/api-v2/ark/","title":"Archival Resource Key (ARK) Identifiers","text":""},{"location":"DSP-API/05-internals/design/api-v2/ark/#requirements","title":"Requirements","text":"<p>Knora must produce an ARK URL for each resource and each value. The ARK identifiers used by Knora must respect the draft ARK specification. The format of Knora\u2019s ARK URLs must be able to change over time, while ensuring that previously generated ARK URLs still work.</p>"},{"location":"DSP-API/05-internals/design/api-v2/ark/#design","title":"Design","text":""},{"location":"DSP-API/05-internals/design/api-v2/ark/#ark-url-format","title":"ARK URL Format","text":"<p>The format of a Knora ARK URL is as follows:</p> <pre><code>http://HOST/ark:/NAAN/VERSION/PROJECT/RESOURCE_UUID[/VALUE_UUID][.TIMESTAMP]\n</code></pre> <ul> <li> <p><code>HOST</code>: the hostname of the ARK resolver.</p> </li> <li> <p><code>NAAN</code>: the Name Assigning Authority Number (NAAN) that the ARK resolver uses.</p> </li> <li> <p><code>VERSION</code>: the version of the Knora ARK URL format being used (always 1 for now).</p> </li> <li> <p><code>PROJECT</code>: the short code of the   project that the resource belongs to.</p> </li> <li> <p><code>RESOURCE_UUID</code>: the resource's unique ID, which is normally a   base64url-encoded UUID, as described in   IRIs for Data.</p> </li> <li> <p><code>VALUE_UUID</code>: optionally, the <code>knora-base:valueHasUUID</code> of one of the   resource's values, normally a   base64url-encoded UUID, as described in   IRIs for Data.</p> </li> <li> <p><code>TIMESTAMP</code>: an optional timestamp indicating that the ARK URL represents   the state of the resource at a specific time in the past. The format   of the timestamp is an ISO 8601   date in Coordinated universal time (UTC), including date, time, and an optional   nano-of-second field (of at most 9 digits), without the characters <code>-</code>, <code>:</code>, and <code>.</code> (because   <code>-</code> and <code>.</code> are reserved characters in ARK, and <code>:</code> would have to be URL-encoded).   Example: <code>20180528T155203897Z</code>.</p> </li> </ul> <p>Following the ARK ID spec, <code>/</code> represents object hierarchy and <code>.</code> represents an object variant. A value is thus contained in a resource, which is contained in its project, which is contained in a repository (represented by the URL version number). A timestamp is a type of variant.</p> <p>Since sub-objects are optional, there is also implicitly an ARK URL for each project, as well as for the repository as a whole.</p> <p>The <code>RESOURCE_UUID</code> and <code>VALUE_UUID</code> are processed as follows:</p> <ol> <li> <p>A check digit is calculated, using the algorithm in    the Scala class <code>org.knora.webapi.util.Base64UrlCheckDigit</code>, and appended    to the UUID.</p> </li> <li> <p>Any <code>-</code> characters in the resulting string are replaced with <code>=</code>, because    <code>base64url</code> encoding uses <code>-</code>, which is a reserved character in ARK URLs.</p> </li> </ol> <p>For example, given a project with ID <code>0001</code>, and using the DaSCH's ARK resolver hostname and NAAN, the ARK URL for the project itself is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001\n</code></pre> <p>Given the Knora resource IRI <code>http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ</code>, the corresponding ARK URL without a timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY\n</code></pre> <p>The same ARK URL with an optional timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY.20180528T155203897Z\n</code></pre> <p>Given a value with <code>knora-api:valueHasUUID \"4OOf3qJUTnCDXlPNnygSzQ\"</code> in the resource <code>http://rdfh.ch/0001/0C-0L1kORryKzJAJxxRyRQ</code>, and using the DaSCH's ARK resolver hostname and NAAN, the corresponding ARK URL without a timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY/4OOf3qJUTnCDXlPNnygSzQX\n</code></pre> <p>The same ARK URL with an optional timestamp is:</p> <pre><code>http://ark.dasch.swiss/ark:/72163/1/0001/0C=0L1kORryKzJAJxxRyRQY/4OOf3qJUTnCDXlPNnygSzQX.20180604T085622513Z\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/ark/#serving-ark-urls","title":"Serving ARK URLs","text":"<p><code>SmartIri</code> converts Knora resource IRIs to ARK URLs. This conversion is invoked in <code>ReadResourceV2.toJsonLD</code>, when returning a resource's metadata in JSON-LD format.</p>"},{"location":"DSP-API/05-internals/design/api-v2/ark/#resolving-knora-ark-urls","title":"Resolving Knora ARK URLs","text":"<p>A Knora ARK URL is intended to be resolved by the Knora ARK resolver.</p>"},{"location":"DSP-API/05-internals/design/api-v2/content-wrappers/","title":"Content Wrappers","text":"<p>Whenever possible, the same data structures are used to represent the same types of data, regardless of the API operation (reading, creating, or modifying). However, often more data is available in output than in input. For example, when a value is read from the triplestore, its IRI is available, but when it is being created, it does not yet have an IRI.</p> <p>The implementation of API v2 therefore uses content wrappers. For each type, there is a case class that represents the lowest common denominator of the type, the data that will be present regardless of the API operation. For example, the trait <code>ValueContentV2</code> represents a Knora value, regardless of whether it is received as input or returned as output. Case classes such as <code>DateValueContentV2</code> and <code>TextValueContentV2</code> implement this trait.</p> <p>An instance of this lowest-common-denominator class, or \"content class\", can then be wrapped in an instance of an operation-specific class that carries additional data. For example, when a Knora value is returned from the triplestore, a <code>ValueContentV2</code> is wrapped in a <code>ReadValueV2</code>, which additionally contains the value's IRI. When a value is created, it is wrapped in a <code>CreateValueV2</code>, which has the resource IRI and the property IRI, but not the value IRI.</p> <p>A read wrapper can be wrapped in another read wrapper; for example, a <code>ReadResourceV2</code> contains <code>ReadValueV2</code> objects.</p> <p>In general, DSP-API v2 responders deal only with the internal schema. (The exception is <code>OntologyResponderV2</code>, which can return ontology information that exists only in an external schema.) Therefore, a content class needs to be able to convert itself from the internal schema to an external schema (when it is being used for output) and vice versa (when it is being used for input). Each content class class should therefore extend <code>KnoraContentV2</code>, and thus have a <code>toOntologySchema</code> method or converting itself between internal and external schemas, in either direction:</p> <pre><code>/**\n  * A trait for content classes that can convert themselves between internal and internal schemas.\n  *\n  * @tparam C the type of the content class that extends this trait.\n  */\ntrait KnoraContentV2[C &lt;: KnoraContentV2[C]] {\n    this: C =&gt;\n    def toOntologySchema(targetSchema: OntologySchema): C\n}\n</code></pre> <p>Since read wrappers are used only for output, they need to be able convert themselves only from the internal schema to an external schema. Each read wrapper class should extend <code>KnoraReadV2</code>, and thus have a method for doing this:</p> <pre><code>/**\n  * A trait for read wrappers that can convert themselves to external schemas.\n  *\n  * @tparam C the type of the read wrapper that extends this trait.\n  */\ntrait KnoraReadV2[C &lt;: KnoraReadV2[C]] {\n    this: C =&gt;\n    def toOntologySchema(targetSchema: ApiV2Schema): C\n}\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/","title":"Gravsearch Design","text":"<p>For a detailed overview of Gravsearch, see Gravsearch: Transforming SPARQL to query humanities data.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#type-inspection","title":"Type Inspection","text":"<p>The code that converts Gravsearch queries into SPARQL queries, and processes the query results, needs to know the types of the entities that are used in the input query. As explained in Type Inference, these types can be inferred, or they can be specified in the query using type annotations.</p> <p>Type inspection is implemented in the package <code>org.knora.webapi.messages.util.search.gravsearch.types</code>. The entry point to this package is <code>GravsearchTypeInspectionRunner</code>, which is instantiated by <code>SearchResponderV2</code>. The result of type inspection is a <code>GravsearchTypeInspectionResult</code>, in which each typeable entity in the input query is associated with a <code>GravsearchEntityTypeInfo</code>, which can be either:</p> <ul> <li>A <code>PropertyTypeInfo</code>, which specifies the type of object that a property is expected to have.</li> <li>A <code>NonPropertyTypeInfo</code>, which specifies the type of a variable, or the type of an IRI representing a resource or value.</li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#identifying-typeable-entities","title":"Identifying Typeable Entities","text":"<p>After parsing a Gravsearch query, <code>SearchResponderV2</code> calls <code>GravsearchTypeInspectionRunner.inspectTypes</code>, passing the WHERE clause of the input query. This method first identifies the entities whose types need to be determined. Each of these entities is represented as a <code>TypeableEntity</code>. To do this, <code>GravsearchTypeInspectionRunner</code> uses <code>QueryTraverser</code> to traverse the WHERE clause, collecting typeable entities in a visitor called <code>TypeableEntityCollectingWhereVisitor</code>. The entities that are considered to need type information are:</p> <ul> <li>All variables.</li> <li>All IRIs except for those that represent type annotations or types.</li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#the-type-inspection-pipeline","title":"The Type Inspection Pipeline","text":"<p><code>GravsearchTypeInspectionRunner</code> contains a pipeline of type inspectors, each of which extends <code>GravsearchTypeInspector</code>. There are two type inspectors in the pipeline:</p> <ul> <li><code>AnnotationReadingGravsearchTypeInspector</code>: reads    type annotations included in a Gravsearch query.</li> <li><code>InferringGravsearchTypeInspector</code>: infers the types of entities from the context in which they are used, as well   as from ontology information that it requests from <code>OntologyResponderV2</code>.</li> </ul> <p>Each type inspector takes as input, and returns as output, an <code>IntermediateTypeInspectionResult</code>, which associates each <code>TypeableEntity</code> with zero or more types. Initially, each <code>TypeableEntity</code> has no types.  Each type inspector adds whatever types it finds for each entity. </p> <p>At the end of the pipeline, each entity should have exactly one type. Therefore, to only keep the most specific type for an entity,  the method <code>refineDeterminedTypes</code> refines the determined types by removing those that are base classes of others. However, it can be that inconsistent types are determined for entities. For example, in cases where multiple resource class types  are determined, but one is not a base class of the others. From the following statement </p> <pre><code>{ ?document a beol:manuscript . } UNION { ?document a beol:letter .}\n</code></pre> <p>two inconsistent types can be inferred for <code>?document</code>: <code>beol:letter</code> and <code>beol:manuscript</code>. In these cases, a sanitizer <code>sanitizeInconsistentResourceTypes</code> replaces the inconsistent resource types by  their common base resource class (in the above example, it would be <code>beol:writtenSource</code>). </p> <p>Lastly, an error is returned if</p> <ul> <li>An entity's type could not be determined. The client must add a type annotation to make the query work.</li> <li>Inconsistent types could not be sanitized (an entity appears to have more than one type). The client must correct the query.</li> </ul> <p>If there are no errors, <code>GravsearchTypeInspectionRunner</code> converts the pipeline's output to a <code>GravsearchTypeInspectionResult</code>, in which each entity is associated with exactly one type.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#annotationreadinggravsearchtypeinspector","title":"AnnotationReadingGravsearchTypeInspector","text":"<p>This inspector uses <code>QueryTraverser</code> to traverse the WHERE clause, collecting type annotations in a visitor called <code>AnnotationCollectingWhereVisitor</code>. It then converts each annotation to a <code>GravsearchEntityTypeInfo</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#inferringgravsearchtypeinspector","title":"InferringGravsearchTypeInspector","text":"<p>This inspector first uses <code>QueryTraverser</code> to traverse the WHERE clause, assembling an index of usage information about typeable entities in a visitor called <code>UsageIndexCollectingWhereVisitor</code>. The <code>UsageIndex</code> contains, for example, an index of all the entities that are used as subjects, predicates, or objects, along with the statements in which they are used. It also contains sets of all the Knora class and property IRIs that are used in the WHERE clause. <code>InferringGravsearchTypeInspector</code> then asks <code>OntologyResponderV2</code> for information about those classes and properties, as well as about the classes that are subject types or object types of those properties.</p> <p>Next, the inspector runs inference rules (which extend <code>InferenceRule</code>) on each <code>TypeableEntity</code>. Each rule takes as input a <code>TypeableEntity</code>, the usage index, the ontology information, and the <code>IntermediateTypeInspectionResult</code>, and returns a new <code>IntermediateTypeInspectionResult</code>. For example, <code>TypeOfObjectFromPropertyRule</code> infers an entity's type if the entity is used as the object of a statement and the predicate's <code>knora-api:objectType</code> is known. For each <code>TypeableEntity</code>,  if a type is inferred from a property, the entity and the inferred type are added to  <code>IntermediateTypeInspectionResult.entitiesInferredFromProperty</code>.</p> <p>The inference rules are run repeatedly, because the output of one rule may allow another rule to infer additional information. There are two pipelines of rules: a pipeline for the first iteration of type inference, and a pipeline for subsequent iterations. This is because some rules can return additional information if they are run more than once on the same entity, while others cannot.</p> <p>The number of iterations is limited to <code>InferringGravsearchTypeInspector.MAX_ITERATIONS</code>, but in practice two iterations are sufficient for most realistic queries, and it is difficult to design a query that requires more than six iterations.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#transformation-of-a-gravsearch-query","title":"Transformation of a Gravsearch Query","text":"<p>A Gravsearch query submitted by the client is parsed by <code>GravsearchParser</code> and preprocessed by <code>GravsearchTypeInspector</code> to get type information about the elements used in the query (resources, values, properties etc.) and do some basic sanity checks.</p> <p>In <code>SearchResponderV2</code>, two queries are generated from a given Gravsearch query: a prequery and a main query.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#query-transformers","title":"Query Transformers","text":"<p>The Gravsearch query is passed to <code>QueryTraverser</code> along with a query transformer. Query transformers are classes that implement traits supported by <code>QueryTraverser</code>:</p> <ul> <li><code>WhereTransformer</code>: instructions how to convert statements in the WHERE clause of a SPARQL query    (to generate the prequery's Where clause).</li> </ul> <p>To improve query performance, this trait defines the method <code>optimiseQueryPatterns</code> whose implementation can call  private methods to optimise the generated SPARQL. For example, before transformation of statements in WHERE clause, query  pattern orders must be optimised by moving <code>LuceneQueryPatterns</code> to the beginning and <code>isDeleted</code> statement patterns to the end of the WHERE clause. </p> <ul> <li><code>AbstractPrequeryGenerator</code> (extends <code>WhereTransformer</code>): converts a Gravsearch query into a prequery;    this one has two implementations for regular search queries and for count queries.</li> <li><code>SelectTransformer</code> (extends <code>WhereTransformer</code>): transforms a Select query into a Select query with simulated RDF inference.</li> <li><code>ConstructTransformer</code>: transforms a Construct query into a Construct query with simulated RDF inference.</li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#prequery","title":"Prequery","text":"<p>The purpose of the prequery is to get an ordered collection of results representing only the IRIs of one page of matching resources and values. Sort criteria can be submitted by the user, but the result is always deterministic also without sort criteria. This is necessary to support paging. A prequery is a SPARQL SELECT query.</p> <p>The classes involved in generating prequeries can be found in <code>org.knora.webapi.messages.util.search.gravsearch.prequery</code>.</p> <p>If the client submits a count query, the prequery returns the overall number of hits, but not the results themselves.</p> <p>In a first step, before transforming the WHERE clause, query patterns must be further optimised by removing the <code>rdfs:type</code> statement for entities whose type could be inferred from their use with a property IRI, since there would be no need  for explicit <code>rdfs:type</code> statements for them (unless the property IRI from which the type of an entity must be inferred from  is wrapped in an <code>OPTIONAL</code> block). This optimisation takes the Gravsearch query as input (rather than the generated SPARQL), because it uses type information that refers to entities in the Gravsearch query, and the generated SPARQL might have different entities.</p> <p>Next, the Gravsearch query's WHERE clause is transformed and the prequery (SELECT and WHERE clause) is generated from this result. The transformation of the Gravsearch query's WHERE clause relies on the implementation of the abstract class <code>AbstractPrequeryGenerator</code>.</p> <p><code>AbstractPrequeryGenerator</code> contains members whose state is changed during the iteration over the statements of the input query. They can then be used to create the converted query.</p> <ul> <li><code>mainResourceVariable: Option[QueryVariable]</code>:    SPARQL variable representing the main resource of the input query.    Present in the prequery's SELECT clause.</li> <li><code>dependentResourceVariables: mutable.Set[QueryVariable]</code>:    a set of SPARQL variables representing dependent resources in the input query.    Used in an aggregation function in the prequery's SELECT clause (see below).</li> <li><code>dependentResourceVariablesGroupConcat: Set[QueryVariable]</code>:    a set of SPARQL variables representing an aggregation of dependent resources.    Present in the prequery's SELECT clause.</li> <li><code>valueObjectVariables: mutable.Set[QueryVariable]</code>:    a set of SPARQL variables representing value objects.    Used in an aggregation function in the prequery's SELECT clause (see below).</li> <li><code>valueObjectVarsGroupConcat: Set[QueryVariable]</code>:    a set of SPARQL variables representing an aggregation of value objects.    Present in the prequery's SELECT clause.</li> </ul> <p>The variables mentioned above are present in the prequery's result rows because they are part of the prequery's SELECT clause.</p> <p>The following example illustrates the handling of variables. The following Gravsearch query looks for pages with a sequence number of 10 that are part of a book:</p> <pre><code>PREFIX incunabula: &lt;http://0.0.0.0:3333/ontology/0803/incunabula/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\n    CONSTRUCT {\n        ?page knora-api:isMainResource true .\n\n        ?page knora-api:isPartOf ?book .\n\n        ?page incunabula:seqnum ?seqnum .\n    } WHERE {\n\n        ?page a incunabula:page .\n\n        ?page knora-api:isPartOf ?book .\n\n        ?book a incunabula:book .\n\n        ?page incunabula:seqnum ?seqnum .\n\n        FILTER(?seqnum = 10)\n\n    }\n</code></pre> <p>The prequery's SELECT clause is built by <code>NonTriplestoreSpecificGravsearchToPrequeryTransformer.getSelectColumns</code>, based on the variables used in the input query's <code>CONSTRUCT</code> clause. The resulting SELECT clause looks as follows:</p> <pre><code>SELECT DISTINCT\n    ?page\n    (GROUP_CONCAT(DISTINCT(IF(BOUND(?book), STR(?book), \"\")); SEPARATOR='') AS ?book__Concat)\n    (GROUP_CONCAT(DISTINCT(IF(BOUND(?seqnum), STR(?seqnum), \"\")); SEPARATOR='') AS ?seqnum__Concat)\n    (GROUP_CONCAT(DISTINCT(IF(BOUND(?book__LinkValue), STR(?book__LinkValue), \"\")); SEPARATOR='') AS ?book__LinkValue__Concat)\n    WHERE {...}\n    GROUP BY ?page\n    ORDER BY ASC(?page)\n    LIMIT 25\n</code></pre> <p><code>?page</code> represents the main resource. When accessing the prequery's result rows, <code>?page</code> contains the IRI of the main resource. The prequery's results are grouped by the main resource so that there is exactly one result row per matching main resource. <code>?page</code> is also used as a sort criterion although none has been defined in the input query. This is necessary to make paging work: results always have to be returned in the same order (the prequery is always deterministic). Like this, results can be fetched page by page using LIMIT and OFFSET.</p> <p>Grouping by main resource requires other results to be aggregated using the function <code>GROUP_CONCAT</code>. <code>?book</code> is used as an argument of the aggregation function. The aggregation's result is accessible in the prequery's result rows as <code>?book__Concat</code>. The variable <code>?book</code> is bound to an IRI. Since more than one IRI could be bound to a variable representing a dependent resource, the results have to be aggregated. <code>GROUP_CONCAT</code> takes two arguments: a collection of strings (IRIs in our use case) and a separator (we use the non-printing Unicode character <code>INFORMATION SEPARATOR ONE</code>). When accessing <code>?book__Concat</code> in the prequery's results containing the IRIs of dependent resources,  the string has to be split with the separator used in the aggregation function. The result is a collection of IRIs representing dependent resources. The same logic applies to value objects.</p> <p>Each <code>GROUP_CONCAT</code> checks whether the concatenated variable is bound in each result in the group; if a variable is unbound, we concatenate an empty string. This is necessary because, in Apache Jena (and perhaps other triplestores), \"If <code>GROUP_CONCAT</code> has an unbound value in the list of values to concat, the overall result is 'error'\" (see this Jena issue).</p> <p>If the input query contains a <code>UNION</code>, and a variable is bound in one branch of the <code>UNION</code> and not in another branch, it is possible that the prequery will return more than one row per main resource. To deal with this situation, <code>SearchResponderV2</code> merges rows that contain the same main resource IRI.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#main-query","title":"Main Query","text":"<p>The purpose of the main query is to get all requested information  about the main resource, dependent resources, and value objects. The IRIs of those resources and value objects were returned by the prequery. Since the prequery only returns resources and value objects matching the input query's criteria, the main query can specifically ask for more detailed information on these resources and values  without having to reconsider these criteria.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#generating-the-main-query","title":"Generating the Main Query","text":"<p>The main query is a SPARQL CONSTRUCT query. Its generation is handled by the method <code>GravsearchMainQueryGenerator.createMainQuery</code>. It takes three arguments: <code>mainResourceIris: Set[IriRef], dependentResourceIris: Set[IriRef], valueObjectIris: Set[IRI]</code>.</p> <p>These sets are constructed based on information about variables representing dependent resources and value objects in the prequery, which is provided by <code>NonTriplestoreSpecificGravsearchToPrequeryTransformer</code>:</p> <ul> <li><code>dependentResourceVariablesGroupConcat</code>: <code>Set(QueryVariable(book__Concat))</code></li> <li><code>valueObjectVariablesGroupConcat</code>: <code>Set(QueryVariable(seqnum__Concat), QueryVariable(book__LinkValue__Concat))</code></li> </ul> <p>From the given Iris, statements are generated that ask for complete information on exactly these resources and values. For any given resource Iri, only the values present in <code>valueObjectIris</code> are to be queried. This is achieved by using SPARQL's <code>VALUES</code> expression for the main resource and dependent resources as well as for values.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#processing-the-main-querys-results","title":"Processing the Main Query's results","text":"<p>To do the permission checking, the results of the main query are passed to <code>ConstructResponseUtilV2.splitMainResourcesAndValueRdfData</code>, which transforms a <code>SparqlConstructResponse</code> (a set of RDF triples) into a structure organized by main resource Iris. In this structure, dependent resources and values are nested and can be accessed via their main resource, and resources and values that the user does not have permission to see are filtered out. As a result, a page of results may contain fewer than the maximum allowed number of results per page, even if more pages of results are available.</p> <p><code>MainQueryResultProcessor.getRequestedValuesFromResultsWithFullGraphPattern</code> then filters out values that the user did not explicitly ask for in the input query.</p> <p>Finally, <code>ConstructResponseUtilV2.createApiResponse</code> transforms the query results into an API response (a <code>ReadResourcesSequenceV2</code>). If the number of main resources found (even if filtered out because of permissions) is equal to the maximum allowed page size, the predicate <code>knora-api:mayHaveMoreResults: true</code> is included in the response.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#inference","title":"Inference","text":"<p>Gravsearch queries support a subset of RDFS reasoning  (see Inference in the API documentation on Gravsearch).  This is implemented as follows:</p> <p>To simulate RDF inference, the API expands all <code>rdfs:subClassOf</code> and <code>rdfs:subPropertyOf</code> statements  using <code>UNION</code> statements for all subclasses and subproperties from the ontologies  (equivalent to <code>rdfs:subClassOf*</code> and <code>rdfs:subPropertyOf*</code>).  Similarly, the API replaces <code>knora-api:standoffTagHasStartAncestor</code> with <code>knora-base:standoffTagHasStartParent*</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#optimisation-of-generated-sparql","title":"Optimisation of generated SPARQL","text":"<p>The triplestore-specific transformers in <code>SparqlTransformer.scala</code> can run optimisations on the generated SPARQL, in the method <code>optimiseQueryPatterns</code> inherited from <code>WhereTransformer</code>. For example, <code>moveLuceneToBeginning</code> moves Lucene queries to the beginning of the block in which they occur.</p>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#query-optimization-by-topological-sorting-of-statements","title":"Query Optimization by Topological Sorting of Statements","text":"<p>In Jena Fuseki, the performance of a query highly depends on the order of the query statements.  For example, a query such as the one below:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n  ?letter knora-api:isMainResource true .\n  ?letter ?linkingProp1  ?person1 .\n  ?letter ?linkingProp2  ?person2 .\n  ?letter beol:creationDate ?date .\n} WHERE {\n  ?letter beol:creationDate ?date .\n\n  ?letter ?linkingProp1 ?person1 .\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient )\n\n  ?letter ?linkingProp2 ?person2 .\n  FILTER(?linkingProp2 = beol:hasAuthor || ?linkingProp2 = beol:hasRecipient )\n\n  ?person1 beol:hasIAFIdentifier ?gnd1 .\n  ?gnd1 knora-api:valueAsString \"(DE-588)118531379\" .\n\n  ?person2 beol:hasIAFIdentifier ?gnd2 .\n  ?gnd2 knora-api:valueAsString \"(DE-588)118696149\" .\n} ORDER BY ?date\n</code></pre> <p>takes a very long time with Fuseki. The performance of this query can be improved by moving up the statements with literal objects that are not dependent on any other statement:</p> <pre><code>  ?gnd1 knora-api:valueAsString \"(DE-588)118531379\" .\n  ?gnd2 knora-api:valueAsString \"(DE-588)118696149\" .\n</code></pre> <p>The rest of the query then reads:</p> <pre><code>  ?person1 beol:hasIAFIdentifier ?gnd1 .\n  ?person2 beol:hasIAFIdentifier ?gnd2 .\n  ?letter ?linkingProp1 ?person1 .\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient )\n\n  ?letter ?linkingProp2 ?person2 .\n  FILTER(?linkingProp2 = beol:hasAuthor || ?linkingProp2 = beol:hasRecipient )\n ?letter beol:creationDate ?date .\n</code></pre> <p>Since users cannot be expected to know about performance of triplestores in order to write efficient queries,  an optimization method to automatically rearrange the statements of the given queries has been implemented.  Upon receiving the Gravsearch query, the algorithm converts the query to a graph. For each statement pattern, the subject of the statement is the origin node, the predicate is a directed edge, and the object  is the target node. For the query above, this conversion would result in the following graph:</p> <p></p> <p>The Graph for Scala library is used to construct the graph and sort it using Kahn's  topological sorting algorithm.</p> <p>The algorithm returns the nodes of the graph ordered in several layers, where the  root element <code>?letter</code> is in layer 0, <code>[?date, ?person1, ?person2]</code> are in layer 1, <code>[?gnd1, ?gnd2]</code> in layer 2, and the  leaf nodes <code>[(DE-588)118531379, (DE-588)118696149]</code> are given in the last layer (i.e. layer 3).  According to Kahn's algorithm, there are multiple valid permutations of the topological order. The graph in the example above has 24 valid permutations of topological order. Here are two of them (nodes are ordered from left to right with the  highest order to the lowest):</p> <ul> <li><code>(?letter, ?date, ?person2, ?person1, ?gnd2, ?gnd1, (DE-588)118696149, (DE-588)118531379)</code> </li> <li><code>(?letter, ?date, ?person1, ?person2, ?gnd1, ?gnd2, (DE-588)118531379, (DE-588)118696149)</code>.   </li> </ul> <p>From all valid topological orders, one is chosen based on certain criteria; for example, the leaf node should not  belong to a statement that has predicate <code>rdf:type</code>, since that could match all resources of the specified type. Once the best order is chosen, it is used to re-arrange the query statements. Starting from the last leaf node, i.e.  <code>(DE-588)118696149</code>, the method finds the statement pattern which has this node as its object, and brings this statement  to the top of the query. This rearrangement continues so that the statements with the fewest dependencies on other  statements are all brought to the top of the query. The resulting query is as follows:</p> <pre><code>PREFIX beol: &lt;http://0.0.0.0:3333/ontology/0801/beol/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/v2#&gt;\n\nCONSTRUCT {\n  ?letter knora-api:isMainResource true .\n  ?letter ?linkingProp1  ?person1 .\n  ?letter ?linkingProp2  ?person2 .\n  ?letter beol:creationDate ?date .\n} WHERE {\n  ?gnd2 knora-api:valueAsString \"(DE-588)118696149\" .\n  ?gnd1 knora-api:valueAsString \"(DE-588)118531379\" .\n  ?person2 beol:hasIAFIdentifier ?gnd2 .\n  ?person1 beol:hasIAFIdentifier ?gnd1 .\n  ?letter ?linkingProp2 ?person2 .\n  ?letter ?linkingProp1 ?person1 .\n  ?letter beol:creationDate ?date .\n  FILTER(?linkingProp1 = beol:hasAuthor || ?linkingProp1 = beol:hasRecipient )\n  FILTER(?linkingProp2 = beol:hasAuthor || ?linkingProp2 = beol:hasRecipient )\n} ORDER BY ?date\n</code></pre> <p>Note that position of the FILTER statements does not play a significant role in the optimization. </p> <p>If a Gravsearch query contains statements in <code>UNION</code>, <code>OPTIONAL</code>, <code>MINUS</code>, or <code>FILTER NOT EXISTS</code>, they are reordered  by defining a graph per block. For example, consider the following query with <code>UNION</code>:</p> <pre><code>{\n    ?thing anything:hasRichtext ?richtext .\n    FILTER knora-api:matchText(?richtext, \"test\")\n    ?thing anything:hasInteger ?int .\n    ?int knora-api:intValueAsInt 1 .\n}\nUNION\n{\n    ?thing anything:hasText ?text .\n    FILTER knora-api:matchText(?text, \"test\")\n    ?thing anything:hasInteger ?int .\n    ?int knora-api:intValueAsInt 3 .\n}\n</code></pre> <p>This would result in one graph per block of the <code>UNION</code>. Each graph is then sorted, and the statements of its  block are rearranged according to the topological order of graph. This is the result:</p> <pre><code>{\n   ?int knora-api:intValueAsInt 1 .\n    ?thing anything:hasRichtext ?richtext .\n    ?thing anything:hasInteger ?int .\n    FILTER(knora-api:matchText(?richtext, \"test\"))\n} UNION {\n    ?int knora-api:intValueAsInt 3 .\n    ?thing anything:hasText ?text .\n    ?thing anything:hasInteger ?int .\n    FILTER(knora-api:matchText(?text, \"test\"))\n}\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/gravsearch/#cyclic-graphs","title":"Cyclic Graphs","text":"<p>The topological sorting algorithm can only be used for DAGs (directed acyclic graphs). However, a Gravsearch query can contains statements that result in a cyclic graph, e.g.:</p> <pre><code>PREFIX anything: &lt;http://0.0.0.0:3333/ontology/0001/anything/simple/v2#&gt;\nPREFIX knora-api: &lt;http://api.knora.org/ontology/knora-api/simple/v2#&gt;\n\nCONSTRUCT {\n    ?thing knora-api:isMainResource true .\n} WHERE {\n  ?thing anything:hasOtherThing ?thing1 .\n  ?thing1 anything:hasOtherThing ?thing2 .\n  ?thing2 anything:hasOtherThing ?thing . \n}\n</code></pre> <p>In this case, the algorithm tries to break the cycles in order to sort the graph. If this is not possible, the query statements are not reordered.</p>"},{"location":"DSP-API/05-internals/design/api-v2/json-ld/","title":"JSON-LD","text":""},{"location":"DSP-API/05-internals/design/api-v2/json-ld/#returning-a-json-ld-response","title":"Returning a JSON-LD Response","text":"<p>Each API response is represented by a message class that extends <code>KnoraJsonLDResponseV2</code>, which has a method <code>toJsonLDDocument</code> that specifies the target ontology schema. The implementation of this method constructs a <code>JsonLDDocument</code>, in which all object keys are full IRIs (no prefixes are used), but in which the JSON-LD context also specifies the prefixes that will be used when the document is returned to the client. The function <code>JsonLDUtil.makeContext</code> is a convenient way to construct the JSON-LD context.</p> <p>Since <code>toJsonLDDocument</code> has to return an object that uses the specified ontology schema, the recommended design is to separate schema conversion as much as possible from JSON-LD generation. As a first step, schema conversion (or at the very least, the conversion of Knora type IRIs to the target schema) can be done via an implementation of <code>KnoraReadV2</code>:</p> <pre><code>/**\n  * A trait for read wrappers that can convert themselves to external schemas.\n  *\n  * @tparam C the type of the read wrapper that extends this trait.\n  */\ntrait KnoraReadV2[C &lt;: KnoraReadV2[C]] {\n    this: C =&gt;\n    def toOntologySchema(targetSchema: ApiV2Schema): C\n}\n</code></pre> <p>This means that the response message class has the method <code>toOntologySchema</code>, which returns a copy of the same message, with Knora type IRIs (and perhaps other content) adjusted for the target schema. (See Smart IRIs on how to convert Knora type IRIs to the target schema.)</p> <p>The response message class could then have a private method called <code>generateJsonLD</code>, which generates a <code>JsonLDDocument</code> that has the correct structure for the target schema, like this:</p> <pre><code>private def generateJsonLD(targetSchema: ApiV2Schema, settings: KnoraSettingsImpl, schemaOptions: Set[SchemaOption]): JsonLDDocument\n</code></pre> <p>This way, the implementation of <code>toJsonLDDocument</code> can call <code>toOntologySchema</code>, then construct a <code>JsonLDDocument</code> from the resulting object. For example:</p> <pre><code>    override def toJsonLDDocument(targetSchema: ApiV2Schema, settings: KnoraSettingsImpl, schemaOptions: Set[SchemaOption] = Set.empty): JsonLDDocument = {\n        toOntologySchema(targetSchema).generateJsonLD(\n            targetSchema = targetSchema,\n            settings = settings,\n            schemaOptions = schemaOptions\n        )\n    }\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/json-ld/#selecting-the-response-schema","title":"Selecting the Response Schema","text":"<p>Most routes complete by calling <code>RouteUtilV2.runRdfRouteWithFuture</code>, which calls the response message's <code>toJsonLDDocument</code> method. The <code>runRdfRouteWithFuture</code> function has a parameter that enables the route to select the schema that should be used in the response. It is up to each route to determine what the appropriate response schema should be. Some routes support only one response schema. Others allow the client to choose. To use the schema requested by the client, the route can call <code>RouteUtilV2.getOntologySchema</code>:</p> <pre><code>RouteUtilV2.runRdfRouteWithFuture(\n    requestMessageF = requestMessageFuture,\n    requestContext = requestContext,\n    settings = settings,\n    responderManager = responderManager,\n    log = log,\n    targetSchema = targetSchema,\n    schemaOptions = schemaOptions\n)\n</code></pre> <p>If the route only supports one schema, it can specify the schema directly instead:</p> <pre><code>RouteUtilV2.runRdfRouteWithFuture(\n    requestMessageF = requestMessageFuture,\n    requestContext = requestContext,\n    settings = settings,\n    responderManager = responderManager,\n    log = log,\n    targetSchema = ApiV2Complex,\n    schemaOptions = RouteUtilV2.getSchemaOptions(requestContext)\n)\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/json-ld/#generating-other-rdf-formats","title":"Generating Other RDF Formats","text":"<p><code>RouteUtilV2.runRdfRouteWithFuture</code> implements HTTP content negotiation. After determining the client's preferred format, it asks the <code>KnoraResponseV2</code> to convert itself into that format. <code>KnoraResponseV2</code> has an abstract <code>format</code> method, whose implementations select the most efficient conversion between the response message's internal representation (which could be JSON-LD or Turtle) and the requested format.</p>"},{"location":"DSP-API/05-internals/design/api-v2/ontology-management/","title":"Ontology Management","text":"<p>The core of Knora's ontology management logic is <code>OntologyResponderV2</code>. It is responsible for:</p> <ul> <li>Loading ontologies from the triplestore when Knora starts.</li> <li>Maintaining an ontology cache to improve performance.</li> <li>Returning requested ontology entities from the cache. Requests for ontology   information never access the triplestore.</li> <li>Creating and updating ontologies in response to API requests.</li> <li>Ensuring that all user-created ontologies are consistent and conform to knora-base.</li> </ul> <p>When Knora starts it will load all ontologies from the triplestore into the ontology cache:</p> <ol> <li>Loads all ontologies found in the triplestore into suitable Scala data structures,    which include indexes of relations between entities (e.g. <code>rdfs:subClassOf</code> relations),    to facilitate validity checks.</li> <li>Checks user-created ontologies for consistency and conformance to <code>knora-base</code>,    according to the rules described in    Summary of Restrictions on User-Created Ontologies.</li> <li>Caches all the loaded ontologies using <code>CacheUtil</code>.</li> </ol> <p>The ontology responder assumes that nothing except itself modifies ontologies in the triplestore while Knora is running. Therefore, the ontology cache is updated only when the ontology responder processes a request to update an ontology.</p> <p>By design, the ontology responder can update only one ontology entity per request, to simplify the necessary validity checks. This requires the client to construct an ontology by submitting a sequence of requests in a certain order, as explained in Ontology Updates.</p> <p>The ontology responder mainly works with ontologies in the internal schema. However, it knows that some entities in built-in ontologies have hard-coded definitions in external schemas, and it checks the relevant transformation rules and returns those entities directly when they are requested (see Generation of Ontologies in External Schemas).</p>"},{"location":"DSP-API/05-internals/design/api-v2/ontology-schemas/","title":"Ontology Schemas","text":""},{"location":"DSP-API/05-internals/design/api-v2/ontology-schemas/#ontologyschema-type","title":"OntologySchema Type","text":"<p>As explained in API Schema, Knora can represent the same RDF data in different forms: an \"internal schema\" for use in the triplestore, and different \"external schemas\" for use in Knora API v2. Different schemas use different IRIs, as explained in Knora IRIs. Internally, Knora uses a SmartIri class to convert IRIs between schemas.</p> <p>The data type representing a schema itself is <code>OntologySchema</code>, which uses the sealed trait pattern:</p> <pre><code>package org.knora.webapi\n\n/**\n  * Indicates the schema that a Knora ontology or ontology entity conforms to.\n  */\nsealed trait OntologySchema\n\n/**\n  * The schema of DSP ontologies and entities that are used in the triplestore.\n  */\ncase object InternalSchema extends OntologySchema\n\n/**\n  * The schema of DSP ontologies and entities that are used in API v2.\n  */\nsealed trait ApiV2Schema extends OntologySchema\n\n/**\n  * The simple schema for representing DSP ontologies and entities. This schema represents values as literals\n  * when possible.\n  */\ncase object ApiV2Simple extends ApiV2Schema\n\n/**\n  * The default (or complex) schema for representing DSP ontologies and entities. This\n  * schema always represents values as objects.\n  */\ncase object ApiV2Complex extends ApiV2Schema\n\n/**\n  * A trait representing options that can be submitted to configure an ontology schema.\n  */\nsealed trait SchemaOption\n\n/**\n  * A trait representing options that affect the rendering of markup when text values are returned.\n  */\nsealed trait MarkupRendering extends SchemaOption\n\n/**\n  * Indicates that markup should be rendered as XML when text values are returned.\n  */\ncase object MarkupAsXml extends MarkupRendering\n\n/**\n  * Indicates that markup should not be returned with text values, because it will be requested\n  * separately as standoff.\n  */\ncase object MarkupAsStandoff extends MarkupRendering\n\n/**\n  * Indicates that no markup should be returned with text values. Used only internally.\n  */\ncase object NoMarkup extends MarkupRendering\n\n/**\n  * Utility functions for working with schema options.\n  */\nobject SchemaOptions {\n    /**\n      * A set of schema options for querying all standoff markup along with text values.\n      */\n    val ForStandoffWithTextValues: Set[SchemaOption] = Set(MarkupAsXml)\n\n    /**\n      * A set of schema options for querying standoff markup separately from text values.\n      */\n    val ForStandoffSeparateFromTextValues: Set[SchemaOption] = Set(MarkupAsStandoff)\n\n    /**\n      * Determines whether standoff should be queried when a text value is queried.\n      *\n      * @param targetSchema the target API schema.\n      * @param schemaOptions the schema options submitted with the request.\n      * @return `true` if standoff should be queried.\n      */\n    def queryStandoffWithTextValues(targetSchema: ApiV2Schema, schemaOptions: Set[SchemaOption]): Boolean = {\n        targetSchema == ApiV2Complex &amp;&amp; !schemaOptions.contains(MarkupAsStandoff)\n    }\n\n    /**\n      * Determines whether markup should be rendered as XML.\n      *\n      * @param targetSchema the target API schema.\n      * @param schemaOptions the schema options submitted with the request.\n      * @return `true` if markup should be rendered as XML.\n      */\n    def renderMarkupAsXml(targetSchema: ApiV2Schema, schemaOptions: Set[SchemaOption]): Boolean = {\n        targetSchema == ApiV2Complex &amp;&amp; !schemaOptions.contains(MarkupAsStandoff)\n    }\n\n    /**\n      * Determines whether markup should be rendered as standoff, separately from text values.\n      *\n      * @param targetSchema the target API schema.\n      * @param schemaOptions the schema options submitted with the request.\n      * @return `true` if markup should be rendered as standoff.\n      */\n    def renderMarkupAsStandoff(targetSchema: ApiV2Schema, schemaOptions: Set[SchemaOption]): Boolean = {\n        targetSchema == ApiV2Complex &amp;&amp; schemaOptions.contains(MarkupAsStandoff)\n    }\n}\n</code></pre> <p>This class hierarchy allows method declarations to restrict the schemas they accept. A method that can accept any schema can take a parameter of type <code>OntologySchema</code>, while a method that accepts only external schemas can take a parameter of type <code>ApiV2Schema</code>. For examples, see Content Wrappers.</p>"},{"location":"DSP-API/05-internals/design/api-v2/ontology-schemas/#generation-of-ontologies-in-external-schemas","title":"Generation of Ontologies in External Schemas","text":"<p>Ontologies are stored only in the internal schema, and are converted on the fly to external schemas. For each external schema, there is a Scala object in <code>org.knora.webapi.messages.v2.responder.ontologymessages</code> that provides rules for this conversion:</p> <ul> <li><code>KnoraApiV2SimpleTransformationRules</code> for the API v2 simple schema</li> <li><code>KnoraApiV2WithValueObjectsTransformationRules</code> for the API v2 complex schema</li> </ul> <p>Since these are Scala objects rather than classes, they are initialised before the Akka <code>ActorSystem</code> starts, and therefore need a special instance of Knora's <code>StringFormatter</code> class (see Smart IRIs).</p> <p>Each of these rule objects implements this trait:</p> <pre><code>/**\n  * A trait for objects that provide rules for converting an ontology from the internal schema to an external schema.\n  * * See also [[OntologyConstants.CorrespondingIris]].\n  */\ntrait OntologyTransformationRules {\n    /**\n      * The metadata to be used for the transformed ontology.\n      */\n    val ontologyMetadata: OntologyMetadataV2\n\n    /**\n      * Properties to remove from the ontology before converting it to the target schema.\n      * See also [[OntologyConstants.CorrespondingIris]].\n      */\n    val internalPropertiesToRemove: Set[SmartIri]\n\n    /**\n      * Classes to remove from the ontology before converting it to the target schema.\n      */\n    val internalClassesToRemove: Set[SmartIri]\n\n    /**\n      * After the ontology has been converted to the target schema, these cardinalities must be\n      * added to the specified classes.\n      */\n    val externalCardinalitiesToAdd: Map[SmartIri, Map[SmartIri, KnoraCardinalityInfo]]\n\n    /**\n      * Classes that need to be added to the ontology after converting it to the target schema.\n      */\n    val externalClassesToAdd: Map[SmartIri, ReadClassInfoV2]\n\n    /**\n      * Properties that need to be added to the ontology after converting it to the target schema.\n      * See also [[OntologyConstants.CorrespondingIris]].\n      */\n    val externalPropertiesToAdd: Map[SmartIri, ReadPropertyInfoV2]\n}\n</code></pre> <p>These rules are applied to <code>knora-base</code> as well as to user-created ontologies. For example, <code>knora-base:Resource</code> has different cardinalities depending on its schema (<code>knora-api:Resource</code> has an additional cardinality on <code>knora-api:hasIncomingLink</code>), and this is therefore also true of its user-created subclasses. The transformation is implemented:</p> <ul> <li>In the implementations of the <code>toOntologySchema</code> method in classes defined in   <code>OntologyMessagesV2.scala</code>: <code>ReadOntologyV2</code>, <code>ReadClassInfoV2</code>, <code>ClassInfoContentV2</code>,   <code>PropertyInfoContentV2</code>, and <code>OntologyMetadataV2</code>.</li> <li>In <code>OntologyResponderV2.getEntityInfoResponseV2</code>, which handles requests for   specific ontology entities. If the requested entity is hard-coded in a transformation   rule, this method returns the hard-coded external entity, otherwise it returns the relevant   internal entity.</li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/overview/","title":"API v2 Design Overview","text":""},{"location":"DSP-API/05-internals/design/api-v2/overview/#general-principles","title":"General Principles","text":"<ul> <li>DSP-API v2 requests and responses are RDF documents. Any API v2   response can be returned as JSON-LD,   Turtle,   or RDF/XML.</li> <li>Each class or property used in a request or response has a definition in an ontology, which Knora can serve.</li> <li>Response formats are reused for different requests whenever   possible, to minimise the number of different response formats a   client has to handle. For example, any request for one or more   resources (such as a search result, or a request for one specific   resource) returns a response in the same format.</li> <li>Response size is limited by design. Large amounts of data must be   retrieved by requesting small pages of data, one after the other.</li> <li>Responses that provide data are distinct from responses that provide   definitions (i.e. ontology entities). Data responses indicate which   types are used, and the client can request information about these   types separately.</li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#api-schemas","title":"API Schemas","text":"<p>The types used in the triplestore are not exposed directly in the API. Instead, they are mapped onto API 'schemas'. Two schemas are currently provided.</p> <ul> <li>A complex schema, which is suitable both for reading and for editing   data. The complex schema represents values primarily as complex objects.</li> <li>A simple schema, which is suitable for reading data but not for   editing it. The simple schema facilitates interoperability between   DSP ontologies and non-DSP ontologies, since it represents   values primarily as literals.</li> </ul> <p>Each schema has its own type IRIs, which are derived from the ones used in the triplestore. For details of these different IRI formats, see Knora IRIs.</p>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#implementation","title":"Implementation","text":""},{"location":"DSP-API/05-internals/design/api-v2/overview/#json-ld-parsing-and-formatting","title":"JSON-LD Parsing and Formatting","text":"<p>Each API response is represented by a class that extends <code>KnoraResponseV2</code>, which has a method <code>toJsonLDDocument</code> that specifies the target schema. It is currently up to each route to determine what the appropriate response schema should be. Some routes will support only one response schema. Others will allow the client to choose, and there will be one or more standard ways for the client to specify the desired response schema.</p> <p>A route calls <code>RouteUtilV2.runRdfRoute</code>, passing a request message and a response schema. When <code>RouteUtilV2</code> gets the response message from the responder, it calls <code>toJsonLDDocument</code> on it, specifying that schema. The response message returns a <code>JsonLDDocument</code>, which is a simple data structure that is then converted to Java objects and passed to the JSON-LD Java library for formatting. In general, <code>toJsonLDDocument</code> is implemented in two stages: first the object converts itself to the target schema, and then the resulting object is converted to a <code>JsonLDDocument</code>.</p> <p>A route that receives JSON-LD requests should use <code>JsonLDUtil.parseJsonLD</code> to convert each request to a <code>JsonLDDocument</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#generation-of-other-rdf-formats","title":"Generation of Other RDF Formats","text":"<p><code>RouteUtilV2.runRdfRoute</code> implements HTTP content negotiation, and converts JSON-LD responses into Turtle or RDF/XML as appropriate.</p>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#operation-wrappers","title":"Operation Wrappers","text":"<p>Whenever possible, the same data structures are used for input and output. Often more data is available in output than in input. For example, when a value is read from the triplestore, its IRI is available, but when it is being created, it does not yet have an IRI. In such cases, there is a class like <code>ValueContentV2</code>, which represents the data that is used both for input and for output. When a value is read, a <code>ValueContentV2</code> is wrapped in a <code>ReadValueV2</code>, which additionally contains the value's IRI. When a value is created, it is wrapped in a <code>CreateValueV2</code>, which has the resource IRI and the property IRI, but not the value IRI.</p> <p>A <code>Read*</code> wrapper can be wrapped in another <code>Read*</code> wrapper; for example, a <code>ReadResourceV2</code> contains <code>ReadValueV2</code> objects.</p> <p>Each <code>*Content*</code> class should extend <code>KnoraContentV2</code> and thus have a <code>toOntologySchema</code> method or converting itself between internal and external schemas, in either direction.</p> <p>Each <code>Read*</code> wrapper class should have a method for converting itself to JSON-LD in a particular external schema. If the <code>Read*</code> wrapper is a <code>KnoraResponseV2</code>, this method is <code>toJsonLDDocument</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#smart-iris","title":"Smart IRIs","text":""},{"location":"DSP-API/05-internals/design/api-v2/overview/#usage","title":"Usage","text":"<p>The <code>SmartIri</code> trait can be used to parse and validate IRIs, and in particular for converting Knora type IRIs between internal and external schemas. It validates each IRI it parses. To use it, import the following:</p> <pre><code>import org.knora.webapi.messages.{SmartIri, StringFormatter}\nimport org.knora.webapi.messages.IriConversions.*\n</code></pre> <p>Ensure that an implicit instance of <code>StringFormatter</code> is in scope:</p> <pre><code>implicit val stringFormatter: StringFormatter = StringFormatter.getGeneralInstance\n</code></pre> <p>Then, if <code>iriStr</code> is a string representing an IRI, you can can convert it to a <code>SmartIri</code> like this:</p> <pre><code>val iri: SmartIri = iriStr.toSmartIri\n</code></pre> <p>If the IRI came from a request, use this method to throw a specific exception if the IRI is invalid:</p> <pre><code>val iri: SmartIri = iriStr.toSmartIriWithErr(\n    () =&gt; throw BadRequestException(s\"Invalid IRI: $iriStr\")\n)\n</code></pre> <p>You can then use methods such as <code>SmartIri.isKnoraApiV2EntityIri</code> and <code>SmartIri.getProjectCode</code> to obtain information about the IRI. To convert it to another schema, call <code>SmartIri.toOntologySchema</code>. Converting a non-Knora IRI returns the same IRI.</p> <p>If the IRI represents a Knora internal value class such as <code>knora-base:TextValue</code>, converting it to the <code>ApiV2Simple</code> schema will return the corresponding simplified type, such as <code>xsd:string</code>. But this conversion is not performed in the other direction (external to internal), since this would require knowledge of the context in which the IRI is being used.</p> <p>The performance penalty for using a <code>SmartIri</code> instead of a string is very small. Instances are automatically cached once they are constructed. Parsing and caching a <code>SmartIri</code> instance takes about 10-20 \u00b5s, and retrieving a cached <code>SmartIri</code> takes about 1 \u00b5s.</p> <p>There is no advantage to using <code>SmartIri</code> for data IRIs, since they are not schema-specific (and are not cached). If a data IRI has been received from a client request, it is better just to validate it using <code>StringFormatter.validateAndEscapeIri</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/overview/#smart-iri-implementation","title":"Smart IRI Implementation","text":"<p>The smart IRI implementation, <code>SmartIriImpl</code>, is nested in the <code>StringFormatter</code> class, because it uses Knora's hostname, which isn't available until the Akka ActorSystem has started. However, this means that the type of a <code>SmartIriImpl</code> instance is dependent on the instance of <code>StringFormatter</code> that constructed it. Therefore, instances of <code>SmartIriImpl</code> created by different instances of <code>StringFormatter</code> can't be compared directly.</p> <p>There are in fact two instances of <code>StringFormatter</code>:</p> <ul> <li>one returned by <code>StringFormatter.getGeneralInstance</code> which is   available after Akka has started and has the API server's hostname   (and can therefore provide <code>SmartIri</code> instances capable of parsing   IRIs containing that hostname). This instance is used throughout the   DSP-API server.</li> <li>one returned by <code>StringFormatter.getInstanceForConstantOntologies</code>,   which is available before Akka has started, and is used only by the   hard-coded constant <code>knora-api</code> ontologies.</li> </ul> <p>This is the reason for the existence of the <code>SmartIri</code> trait, which is a top-level definition and has its own <code>equals</code> and <code>hashCode</code> methods. Instances of <code>SmartIri</code> can thus be compared (e.g. to use them as unique keys in collections), regardless of which instance of <code>StringFormatter</code> created them.</p>"},{"location":"DSP-API/05-internals/design/api-v2/query-design/","title":"SPARQL Query Design","text":""},{"location":"DSP-API/05-internals/design/api-v2/query-design/#inference","title":"Inference","text":"<p>DSP-API does not require the triplestore to perform inference,  as different triplestores implement inference quite differently,  so that taking advantage of inference would require triplestore specific code, which is not well maintainable.  Instead, the API simulates inference for each Gravsearch query, so that the expected results are returned.</p> <p>Gravsearch queries currently need to do the following:</p> <ul> <li>Given a base property, find triples using a subproperty as predicate, and   return the subproperty used in each case.</li> <li>Given a base class, find triples using an instance of subclass as subject or   object, and return the subclass used in each case.</li> </ul> <p>Without inference, this can be done using property path syntax.</p> <pre><code>CONSTRUCT {\n  ?resource a ?resourceClass .\n  ?resource ?resourceValueProperty ?valueObject.\nWHERE {\n  ?resource a ?resourceClass .\n  ?resourceType rdfs:subClassOf* knora-base:Resource .\n  ?resource ?resourceValueProperty ?valueObject .\n  ?resourceValueProperty rdfs:subPropertyOf* knora-base:hasValue .\n</code></pre> <p>This query:</p> <ul> <li> <p>Checks that the queried resource belongs to a subclass of <code>knora-base:Resource</code>.</p> </li> <li> <p>Returns the class that the resource explicitly belongs to.</p> </li> <li> <p>Finds the Knora values attached to the resource, and returns each value along with   the property that explicitly attaches it to the resource.</p> </li> </ul> <p>However, such a query is very inefficient.  Instead, the API does inference on the query, so that the relevant information can be found in a timely manner.</p> <p>For this, the query is analyzed to check which project ontologies are relevant to the query.  If an ontology is not relevant to a query,  then all class and property definitions of this ontology are disregarded for inference.</p> <p>Then, each statement that requires inference (i.e. that could be phrased with property path syntax, as described above)  is cross-referenced with the relevant ontologies,  to see which property/class definitions would fit the statement according to the rules of RDF inference.  And each of those definitions is added to the query as a separate <code>UNION</code> statement.</p> <p>E.g.: Given the resource class <code>B</code> is a subclass of <code>A</code> and the property <code>hasY</code> is a subproperty of <code>hasX</code>,  then the following query</p> <pre><code>SELECT {\n  ?res ?prop .\n} WHERE {\n  ?res a &lt;A&gt; .\n  ?res &lt;hasX&gt; ?prop .\n}\n</code></pre> <p>can be rewritten as</p> <pre><code>SELECT {\n  ?res ?prop .\n} WHERE {\n  {?res a &lt;A&gt;} UNION {?res a &lt;B&gt;} .\n  {?res &lt;hasX&gt; ?prop} UNION {?res &lt;hasY&gt; ?prop} .\n}\n</code></pre>"},{"location":"DSP-API/05-internals/design/api-v2/query-design/#querying-past-value-versions","title":"Querying Past Value Versions","text":"<p>Value versions are a linked list, starting with the current version. Each value points to the previous version via <code>knora-base:previousValue</code>. The resource points only to the current version.</p> <p>Past value versions are queried in <code>getResourcePropertiesAndValues.scala.txt</code>, which can take a timestamp argument. Given the current value version, we must find the most recent past version that existed at the target date.</p> <p>First, we get the set of previous values that were created on or before the target date:</p> <pre><code>?currentValue knora-base:previousValue* ?valueObject .\n?valueObject knora-base:valueCreationDate ?valueObjectCreationDate .\nFILTER(?valueObjectCreationDate &lt;= \"@versionDate\"^^xsd:dateTime)\n</code></pre> <p>The resulting versions are now possible values of <code>?valueObject</code>. Next, out of this set of versions, we exclude all versions except for the most recent one. We do this by checking, for each <code>?valueObject</code>, whether there is another version, <code>?otherValueObject</code>, that is more recent and was also created before the target date. If such a version exists, we exclude the one we are looking at.</p> <pre><code>FILTER NOT EXISTS {\n    ?currentValue knora-base:previousValue* ?otherValueObject .\n    ?otherValueObject knora-base:valueCreationDate ?otherValueObjectCreationDate .\n\n    FILTER(\n        (?otherValueObjectCreationDate &lt;= \"@versionDate\"^^xsd:dateTime) &amp;&amp;\n        (?otherValueObjectCreationDate &gt; ?valueObjectCreationDate)\n    )\n}\n</code></pre> <p>This excludes all past versions except the one we are interested in.</p>"},{"location":"DSP-API/05-internals/design/api-v2/sipi/","title":"DSP-API and Sipi","text":""},{"location":"DSP-API/05-internals/design/api-v2/sipi/#configuration","title":"Configuration","text":"<p>The DSP-API specific configuration and scripts for Sipi are in the <code>sipi</code> subdirectory of the DSP-API source tree. See the <code>README.md</code> for instructions on how to start Sipi with DSP-API.</p>"},{"location":"DSP-API/05-internals/design/api-v2/sipi/#lua-scripts","title":"Lua Scripts","text":"<p>DSP-API v2 uses custom Lua scripts to control Sipi. These scripts can be found in <code>sipi/scripts</code> in the DSP-API source tree.</p> <p>Each of these scripts expects a JSON Web Token in the URL parameter <code>token</code>. In all cases, the token must be signed by DSP-API, it must have an expiration date and not have expired, its issuer must equal the hostname and port of the API, and its audience must include <code>Sipi</code>. The other contents of the expected tokens are described below.</p>"},{"location":"DSP-API/05-internals/design/api-v2/sipi/#sipiconnector","title":"SipiConnector","text":"<p>In DSP-API, the <code>org.knora.webapi.iiif.SipiConnector</code> handles all communication with Sipi. It blocks while processing each request, to ensure that the number of concurrent requests to Sipi is not greater than <code>akka.actor.deployment./storeManager/iiifManager/sipiConnector.nr-of-instances</code>. If it encounters an error, it returns <code>SipiException</code>.</p>"},{"location":"DSP-API/05-internals/design/api-v2/smart-iris/","title":"Smart IRIs","text":""},{"location":"DSP-API/05-internals/design/api-v2/smart-iris/#usage","title":"Usage","text":"<p>The <code>SmartIri</code> trait can be used to parse and validate IRIs, and in particular for converting Knora type IRIs between internal and external schemas. It validates each IRI it parses. To use it, import the following:</p> <pre><code>import org.knora.webapi.messages.SmartIri\nimport org.knora.webapi.messages.IriConversions._\n</code></pre> <p>Ensure that an implicit instance of <code>StringFormatter</code> is in scope:</p> <pre><code>import org.knora.webapi.messages.StringFormatter\nimplicit val stringFormatter: StringFormatter = StringFormatter.getGeneralInstance\n</code></pre> <p>Then, if you have a string representing an IRI, you can can convert it to a <code>SmartIri</code> like this:</p> <pre><code>val propertyIri: SmartIri = \"http://0.0.0.0:3333/ontology/0001/anything/v2#hasInteger\".toSmartIri\n````\n\nIf the IRI came from a request, use this method to throw a specific\nexception if the IRI is invalid:\n\n```scala\nval propertyIri: SmartIri = propertyIriStr.toSmartIriWithErr(throw BadRequestException(s\"Invalid property IRI: &lt;$propertyIriStr&gt;\"))\n</code></pre> <p>You can then use methods such as <code>SmartIri.isKnoraApiV2EntityIri</code> and <code>SmartIri.getProjectCode</code> to obtain information about the IRI. To convert it to another schema, call <code>SmartIri.toOntologySchema</code>. Converting a non-Knora IRI returns the same IRI.</p> <p>If the IRI represents a Knora internal value class such as <code>knora-base:TextValue</code>, converting it to the <code>ApiV2Simple</code> schema will return the corresponding simplified type, such as <code>xsd:string</code>. But this conversion is not performed in the other direction (external to internal), since this would require knowledge of the context in which the IRI is being used.</p> <p>The performance penalty for using a <code>SmartIri</code> instead of a string is very small. Instances are automatically cached once they are constructed.</p> <p>There is no advantage to using <code>SmartIri</code> for data IRIs, since they are not schema-specific (and are not cached). If a data IRI has been received from a client request, it is better just to validate it using <code>StringFormatter.validateAndEscapeIri</code>, and represent it as an <code>org.knora.webapi.IRI</code> (an alias for <code>String</code>).</p>"},{"location":"DSP-API/05-internals/design/api-v2/smart-iris/#implementation","title":"Implementation","text":"<p>The smart IRI implementation, <code>SmartIriImpl</code>, is nested in the <code>StringFormatter</code> class, because it uses Knora's hostname, which isn't available until the Akka <code>ActorSystem</code> has started. However, this means that the Scala type of a <code>SmartIriImpl</code> instance is dependent on the instance of <code>StringFormatter</code> that constructed it. Therefore, instances of <code>SmartIriImpl</code> created by different instances of <code>StringFormatter</code> can't be compared directly.</p> <p>There are in fact two instances of <code>StringFormatter</code>:</p> <ul> <li>one returned by <code>StringFormatter.getGeneralInstance</code>, which is   available after Akka has started and has the API server's hostname   (and can therefore provide <code>SmartIri</code> instances capable of parsing   IRIs containing that hostname). This instance is used throughout the   DSP-API server.</li> <li>one returned by <code>StringFormatter.getInstanceForConstantOntologies</code>,   which is available before Akka has started, and is used only by the   hard-coded constant <code>knora-api</code> ontologies (see   Generation of Ontologies in External Schemas).</li> </ul> <p>This is the reason for the existence of the <code>SmartIri</code> trait, which is a top-level definition and has its own <code>equals</code> and <code>hashCode</code> methods. Instances of <code>SmartIri</code> can thus be compared (e.g. to use them as unique keys in collections), regardless of which instance of <code>StringFormatter</code> created them.</p>"},{"location":"DSP-API/05-internals/design/api-v2/standoff/","title":"Standoff Markup","text":""},{"location":"DSP-API/05-internals/design/api-v2/standoff/#requirements","title":"Requirements","text":"<p>In Knora, text with markup is stored using standoff markup, i.e. markup that is stored separately from the content it applies to.</p> <p>Knora's standoff design is based on these requirements:</p> <ul> <li> <p>Overlapping markup should be supported.</p> </li> <li> <p>Markup should be stored as RDF, so it can be searched and analysed using the same tools that are used   with other data managed by Knora.</p> </li> <li> <p>In particular, Gravsearch queries should be able   to specify search criteria that refer to the markup tags attached to a text, together with   any other search criteria relating to the resource that contains the text.</p> </li> <li> <p>It should be possible to import any XML document into Knora, store the markup as standoff, and   at any time export the document as an equivalent XML document.</p> </li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/standoff/#rdf-design","title":"RDF Design","text":"<p>See Text with Standoff Markup.</p>"},{"location":"DSP-API/05-internals/design/api-v2/standoff/#querying-standoff","title":"Querying Standoff","text":"<p>Since the number of standoff tags that can be attached to a text value is unlimited, standoff is queried in pages of a limited size, to avoid requesting huge SPARQL query results from the triplestore.</p> <p>When <code>ResourcesResponderV2</code> or <code>SearchResponderV2</code> need to return a text value with all its markup, they first query the text value with at most one page of standoff. If the text value has more than one page of standoff, <code>ConstructResponseUtilV2.makeTextValueContentV2</code> then sends a <code>GetRemainingStandoffFromTextValueRequestV2</code> message to <code>StandoffResponderV2</code>, which queries the rest of the standoff in the text value, one page at a time. The resulting standoff is concatenated together and returned.</p> <p>To optimise query performance:</p> <ul> <li> <p>Each text value with standoff has the predicate <code>knora-base:valueHasMaxStandoffStartIndex</code>, so that when Knora   queries a page of standoff, it knows whether it has reached the last page.</p> </li> <li> <p>The last path component of the IRI of a standoff tag is the integer object of its   <code>knora-base:standoffTagHasStartIndex</code> predicate. When querying standoff, it is necessary to convert   the IRI objects of <code>knora-base:standoffTagHasStartParent</code> and <code>knora-base:standoffTagHasEndParent</code> to   integer indexes (the start indexes of those tags). Including each tag's start index in its IRI makes it   unnecessary to query the parent tags to determine their start indexes.</p> </li> </ul>"},{"location":"DSP-API/05-internals/design/api-v2/standoff/#conversion-between-standoff-and-xml","title":"Conversion Between Standoff and XML","text":"<p><code>XMLToStandoffUtil</code> does the low-level conversion of documents between standoff and XML, using a simple data structure to represent standoff. This data structure knows nothing about RDF, and each standoff tag contains its XML element name and namespace and those of its attributes.</p> <p>In DSP-API, it is possible to define mappings to control how standoff/RDF is converted to XML and vice versa. Different mappings can be used to convert the same standoff/RDF to different sorts of XML documents. <code>StandoffTagUtilV2</code> converts between standoff/RDF and XML using mappings, delegating the lower-level work to <code>XMLToStandoffUtil</code>.</p>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/","title":"Class and Property Hierarchies","text":""},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#class-hierarchy","title":"Class Hierarchy","text":"<p>While <code>knora-admin</code> and <code>salsah-gui</code> have relatively flat class hierarchies,  in <code>knora-base</code> there are very complicated - yet highly relevant - inheritance structures.  The following class diagrams try to model these structures.  For the sake of comprehensibility, it was necessary to split the ontology into multiple diagrams, even though this obliterates the evident connections between those diagrams.</p> <p>Legend</p> <p>dotted lines: the boxes are copies from another diagram.</p>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#resources","title":"Resources","text":"<pre><code>classDiagram\n  %% Classes\n  class Resource {\n    string label\n    boolean isDeleted\n    Resource hasStandoffLinkTo\n    LinkValue hasStandoffLinkToValue\n    User attachedToUser\n    Project attachedToProject\n    string hasPermissions\n    date creationDate\n    date lastModificationDate\n    date deleteDate\n    User deletedBy\n    string deleteComment\n  }\n  class Annotation {\n    TextValue hasComment\n    Resource isAnnotationOf\n    LinkValue isAnnotationOfValue\n  }\n  class LinkObj{\n    TextValue hasComment\n    Resource hasLinkTo\n    LinkValue hasLinkToValue\n  }\n  class Representation {\n    FileValue hasFileValue\n  }\n  class ExternalResource {\n    ExternalResValue hasExternalResValue\n  }\n  class Region {\n    ColorValue hasColor\n    Representation isRegionOf\n    GeomValue hasGemoetry\n    LinkValue isRegionOfValue\n    TextValue hasComment\n  }\n  class ArchiveRepresentation {\n    ArchiveFileValue hasArchiveFileValue\n  }\n  class AudioRepresentation {\n    AudioFileValue hasAudioFileValue\n  }\n  class DDDRepresentation {\n    DDDFileValue hasDDDFileValue\n  }\n  class DocumentRepresentation {\n    DocumentFileValue hasDocumentFileValue\n  }\n  class MovingImageRepresentation {\n    MovingImageFileValue hasMovingImageFileValue\n  }\n  class StillImageRepresentation {\n    StillImageFileValue hasStillImageFileValue\n  }\n  class TextRepresentation {\n    TextFileValue hasTextFileValue\n  }\n\n  %% Relationships\n  Resource &lt;|-- Annotation\n  Resource &lt;|-- Representation\n  Resource &lt;|-- LinkObj\n  Resource &lt;|-- ExternalResource\n  Resource &lt;|-- DeletedResource\n  Resource &lt;|-- Region\n  Representation &lt;|-- ArchiveRepresentation\n  Representation &lt;|-- AudioRepresentation\n  Representation &lt;|-- DDDRepresentation\n  Representation &lt;|-- DocumentRepresentation\n  Representation &lt;|-- MovingImageRepresentation\n  Representation &lt;|-- StillImageRepresentation\n  Representation &lt;|-- TextRepresentation\n  TextRepresentation &lt;|-- XSLTransformation</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#values","title":"Values","text":"<pre><code>classDiagram\n  %% Classes\n  class Value {\n    date valueCreationDate\n    User attachedToUser\n    string hasPermissions\n    integer valueHasOrder\n    string valueHasComment\n    boolean isDeleted\n    date deleteDate\n    User deletedBy\n    string deleteComment\n    Value previousValue\n    string valueHasString\n    string valueHasUUID\n  }\n  class ColorBase {\n    string valueHasColor\n  }\n  class DateBase {\n    string valueHasCalendar\n    string valueHasEndPrecision\n    integer valueHasEndJDN\n    string valueHasStartPrecision\n    integer valueHasStartJDN\n  }\n  class IntBase {\n    integer valueHasInteger\n  }\n  class BooleanBase {\n    boolean valueHasBoolean\n  }\n  class DecimalBase {\n    decimal valueHasDecimal\n  }\n  class UriBase {\n    URI valueHasUri\n  }\n  class IntervalBase {\n    decimal valueHasIntervalStart\n    decimal valueHasIntervalEnd\n  }\n  class TimeBase {\n    date valueHasTimeStamp\n  }\n  class ListValue {\n    ListNode valueHasListNode\n  }\n  class TextValue {\n    StandoffTag valueHasStandoff\n    integer valueHasMaxStandoffStartIndex\n    string valueHasLanguage\n    XSLToStandoffMApping valueHasMapping\n  }\n  class LinkValue {\n    integer valueHasRefCount\n  }\n  class GeomValue {\n    string valueHasGeometry\n  }\n  class GeonameValue {\n    string valueHasGeonameCode\n  }\n  class ExternalResValue {\n    string extResId\n    string extResProvider\n    string extResAccessInfo\n  }\n  class FileValue {\n    string internalFileName\n    string internalMimeType\n    string originalFileName\n    string originalMimeType\n  }\n  class ArchiveFileValue {\n\n  }\n  class AudioFileValue {\n    decimal duration\n  }\n  class DDDFileValue\n  class DocumentFileValue {\n    integer pageCount\n    integer dimX\n    integer dimY\n  }\n  class MovingImageFileValue\n  class StillImageFileValue {\n    integer dimX\n    integer dimY\n  }\n  class StillImageExternalFileValue {\n    anyUri externalUrl\n  }\n  class TextFileValue\n\n\n  %% Relationships\n  ValueBase &lt;|-- Value\n  ValueBase &lt;|-- ColorBase\n  ValueBase &lt;|-- DateBase\n  ValueBase &lt;|-- IntBase\n  ValueBase &lt;|-- BooleanBase\n  ValueBase &lt;|-- DecimalBase\n  ValueBase &lt;|-- UriBase\n  ValueBase &lt;|-- IntervalBase\n  ValueBase &lt;|-- TimeBase\n  Value &lt;|-- ListValue\n  Value &lt;|-- TextValue\n  Value &lt;|-- LinkValue\n  Value &lt;|-- GeomValue\n  Value &lt;|-- GeonameValue\n  Value &lt;|-- ExternalResValue\n  Value &lt;|-- FileValue\n  Value &lt;|-- DeletedValue\n  Value &lt;|-- ColorValue\n  ColorBase &lt;|-- ColorValue\n  Value &lt;|-- DateValue\n  DateBase &lt;|-- DateValue\n  Value &lt;|-- IntValue\n  IntBase &lt;|-- IntValue\n  Value &lt;|-- BooleanValue\n  BooleanBase &lt;|-- BooleanValue\n  Value &lt;|-- DecimalValue\n  DecimalBase &lt;|-- DecimalValue\n  Value &lt;|-- UriValue\n  UriBase &lt;|-- UriValue\n  Value &lt;|-- IntervalValue\n  IntervalBase &lt;|-- IntervalValue\n  Value &lt;|-- TimeValue\n  TimeBase &lt;|-- TimeValue\n  FileValue &lt;|-- ArchiveFileValue\n  FileValue &lt;|-- AudioFileValue\n  FileValue &lt;|-- DDDFileValue\n  FileValue &lt;|-- DocumentFileValue\n  FileValue &lt;|-- MovingImageFileValue\n  FileValue &lt;|-- StillImageFileValue\n  FileValue &lt;|-- StillImageExternalFileValue\n  FileValue &lt;|-- TextFileValue\n  ValueBase .. StandoffInternalReferenceTag\n  ColorBase .. StandoffColorTag\n  DateBase .. StandoffDateTag\n  IntBase .. StandoffIntegerTag\n  BooleanBase .. StandoffBooleanTag\n  DecimalBase .. StandoffDecimalTag\n  UriBase .. StandoffUriTag\n  IntervalBase .. StandoffIntervalTag\n  TimeBase .. StandoffTimeTag</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#standoff-in-knora-base","title":"Standoff in knora-base","text":"<pre><code>classDiagram\n  %% Classes\n  class StandoffTag {\n    integer standoffHasStartTag\n    integer standoffHasEndTag\n    string standoffHasUUID\n    string standoffHasOriginalXMLID\n    integer standoffHasStartIndex\n    integer standoffHasEndIndex\n    StandoffTag standoffTagHasStartParent\n    StandoffTag standoffTagHasEndParent\n    ??? standoffParentClassConstraint\n  }\n  class StandoffInternalReferenceTag {\n    StandoffTag standoffHasInternalReference\n  }\n  class StandoffLinkTag {\n    Resource standoffHasLink\n  }\n\n\n  %% Relationships\n  StandoffTag &lt;|-- StandoffDataTypeTag\n  StandoffTag &lt;|-- StandoffLinkTag\n  StandoffDataTypeTag &lt;|-- StandoffColorTag\n  StandoffDataTypeTag &lt;|-- StandoffDateTag\n  StandoffDataTypeTag &lt;|-- StandoffIntegerTag\n  StandoffDataTypeTag &lt;|-- StandoffBooleanTag\n  StandoffDataTypeTag &lt;|-- StandoffDecimalTag\n  StandoffDataTypeTag &lt;|-- StandoffUriTag\n  StandoffDataTypeTag &lt;|-- StandoffIntervalTag\n  StandoffDataTypeTag &lt;|-- StandoffTimeTag\n  ValueBase .. ColorBase\n  ValueBase .. DateBase\n  ValueBase .. IntBase\n  ValueBase .. BooleanBase\n  ValueBase .. DecimalBase\n  ValueBase .. UriBase\n  ValueBase .. IntervalBase\n  ValueBase .. TimeBase\n  ValueBase .. StandoffInternalReferenceTag\n  ColorBase .. StandoffColorTag\n  DateBase .. StandoffDateTag\n  IntBase .. StandoffIntegerTag\n  BooleanBase .. StandoffBooleanTag\n  DecimalBase .. StandoffDecimalTag\n  UriBase .. StandoffUriTag\n  IntervalBase .. StandoffIntervalTag\n  TimeBase .. StandoffTimeTag</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#standoff-ontology","title":"Standoff Ontology","text":"<pre><code>flowchart BT\n  StandoffRootTag[\"StandoffRootTag \\n ----- \\n string standoffRootTagHasDocumentType\"]\n  StandoffHyperlinkTag[\"StandoffHyperlinkTag \\n ----- \\n string standoffHyperlinkTagHasTarget\"]\n  StandoffVisualTag -..-&gt; StandoffTag \n  StandoffRootTag -.-&gt; StandoffTag \n  StandoffHyperlinkTag -.-&gt; StandoffTag \n  StandoffStructuralTag -....-&gt; StandoffTag \n\n  StandoffItalicTag --&gt; StandoffVisualTag \n  StandoffBoldTag --&gt; StandoffVisualTag \n  StandoffCiteTag --&gt; StandoffVisualTag \n  StandoffUnderlineTag --&gt; StandoffVisualTag \n  StandoffStrikethroughTag --&gt; StandoffVisualTag \n  StandoffSuperscriptTag --&gt; StandoffVisualTag \n  StandoffSubscriptTag --&gt; StandoffVisualTag \n  StandoffLineTag --&gt; StandoffVisualTag \n  StandoffPreTag --&gt; StandoffVisualTag \n  StandoffBlockquoteTag --&gt; StandoffStructuralTag \n  StandoffCodeTag --&gt; StandoffStructuralTag \n  StandoffParagraphTag --&gt; StandoffStructuralTag \n  StandoffHeader_1_to_6_Tag --&gt; StandoffStructuralTag \n  StandoffOrderedListTag --&gt; StandoffStructuralTag \n  StandoffUnorderedListTag --&gt; StandoffStructuralTag \n  StandoffListElementTag --&gt; StandoffStructuralTag \n  StandoffTableBodyTag --&gt; StandoffStructuralTag \n  StandoffTableTag --&gt; StandoffStructuralTag \n  StandoffTableRowTag --&gt; StandoffStructuralTag \n  StandoffTableCellTag --&gt; StandoffStructuralTag \n  StandoffBrTag --&gt; StandoffStructuralTag </code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#property-hierarchy","title":"Property Hierarchy","text":""},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#properties-and-values","title":"Properties and Values","text":"<pre><code>flowchart BT\n  hasValue ---&gt; resourceProperty\n  hasLinkTo --&gt; resourceProperty\n\n  hasFileValue ----&gt; hasValue\n  hasColor ---&gt; hasValue\n  hasGeometry ---&gt; hasValue\n  hasComment ---&gt; hasValue\n  seqnum ---&gt; hasValue\n  hasExtResValue ---&gt; hasValue\n  hasLinkToValue ----&gt; hasValue \n\n  hasArchiveFileValue ---&gt; hasFileValue\n  hasDocumentFileValue ---&gt; hasFileValue\n  hasTextFileValue ---&gt; hasFileValue\n  hasStillImageFileValue ---&gt; hasFileValue\n  hasMovingImageFileValue ---&gt; hasFileValue\n  hasAudioFileValue ---&gt; hasFileValue\n  hasDDDFileValue ---&gt; hasFileValue\n\n  isPartOfValue ---&gt; hasLinkToValue\n  hasAnnotationOfValue ---&gt; hasLinkToValue\n  hasRepresentationValue ---&gt; hasLinkToValue\n  hasStandoffLinkToValue ---&gt; hasLinkToValue\n  isRegionOfValue ---&gt; hasLinkToValue\n\n  isPartOf ---&gt; hasLinkTo\n  isAnnotationOf ---&gt; hasLinkTo\n  hasRepresentation ---&gt; hasLinkTo\n  hasStandoffLinkTo ---&gt; hasLinkTo\n  isRegionOf ---&gt; hasLinkTo</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#resource-metadata","title":"Resource Metadata","text":"<pre><code>flowchart BT\n  creationDate ---&gt; objectCannotBeMarkedAsDeleted\n  deleteDate --&gt; objectCannotBeMarkedAsDeleted\n  isDeleted ---&gt; objectCannotBeMarkedAsDeleted\n  isRootNode ---&gt; objectCannotBeMarkedAsDeleted\n  hasRootNode ---&gt; objectCannotBeMarkedAsDeleted\n  lastModificationDate ---&gt; objectCannotBeMarkedAsDeleted\n  listNodePosition ---&gt; objectCannotBeMarkedAsDeleted\n  listNodeName ---&gt; objectCannotBeMarkedAsDeleted\n  deleteComment ---&gt; objectCannotBeMarkedAsDeleted\n  hasPermissions ---&gt; objectCannotBeMarkedAsDeleted\n  deletedBy --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasLink ---&gt; objectCannotBeMarkedAsDeleted \n  hasSubListNode --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasEnd ---&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasInternalReference --&gt; objectCannotBeMarkedAsDeleted \n  valueHas ----&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasStart --&gt; objectCannotBeMarkedAsDeleted \n  standoffTagHasStartIndex ---&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasEndIndex --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasUuid ---&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasEndParent --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasOriginalXMLID ---&gt; objectCannotBeMarkedAsDeleted\n  targetHasOriginalXMLID --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasStartAncestor ----&gt; objectCannotBeMarkedAsDeleted \n  standoffTagHasStartParent --&gt; objectCannotBeMarkedAsDeleted\n  standoffTagHasStartParent --&gt; standoffTagHasStartAncestor\n  hasMappingElement ---&gt; objectCannotBeMarkedAsDeleted\n  mappingHasXMLTagname --&gt; objectCannotBeMarkedAsDeleted\n  mappingHasXMLNamespace ---&gt; objectCannotBeMarkedAsDeleted\n  mappingHasXMLClass --&gt; objectCannotBeMarkedAsDeleted\n  mappingHasStandoffClass ---&gt; objectCannotBeMarkedAsDeleted\n  mappingHasXMLAttribute --&gt; objectCannotBeMarkedAsDeleted\n  mappingHasXMLAttributename ---&gt; objectCannotBeMarkedAsDeleted\n  mappingHasStandoffProperty --&gt; objectCannotBeMarkedAsDeleted\n  mappingHasStandoffDataTypeClass ---&gt; objectCannotBeMarkedAsDeleted\n  mappingElementRequiresSeparator --&gt; objectCannotBeMarkedAsDeleted\n  mappingHasDefaultXSLTransformation ---&gt; objectCannotBeMarkedAsDeleted\n\n  duration --&gt; valueHas\n  pageCount ---&gt; valueHas\n  dimY --&gt; valueHas\n  dimX ---&gt; valueHas\n  valueHasStandoff --&gt; valueHas\n  valueHasMaxStandoffStartIndex ---&gt; valueHas\n  previousValue --&gt; valueHas\n  ValueHasMapping ---&gt; valueHas\n  extResAccessInfo --&gt; valueHas\n  extResId ---&gt; valueHas\n  extResProvider --&gt; valueHas\n  fps ---&gt; valueHas\n  internalFilename --&gt; valueHas\n  internalMimeType ---&gt; valueHas\n  originalFilename ---&gt; valueHas\n  originalMimeType ---&gt; valueHas\n  valueHasComment ---&gt; valueHas\n  valueCreationDate ---&gt; valueHas\n  valueHasUUID ---&gt; valueHas\n  valueHasCalendar ---&gt; valueHas\n  valueHasColor ---&gt; valueHas\n  valueHasEndJDN ---&gt; valueHas\n  valueHasEndPrecision ---&gt; valueHas\n  valueHasDecimal ---&gt; valueHas\n  valueHasGeometry ---&gt; valueHas\n  valueHasGeonameCode ---&gt; valueHas\n  valueHasInteger ---&gt; valueHas\n  valueHasBoolean ---&gt; valueHas\n  valueHasUri ---&gt; valueHas\n  valueHasIntervalEnd ---&gt; valueHas\n  valueHasIntervalStart ---&gt; valueHas\n  valueHasTimeStamp ---&gt; valueHas\n  valueHasListNode ---&gt; valueHas\n  valueHasOrder ---&gt; valueHas\n  valueHasRefCount ---&gt; valueHas\n  valueHasStartJDN ---&gt; valueHas\n  valueHasStartPrecision ---&gt; valueHas\n  valueHasString ---&gt; valueHas\n\n  valueHasLanguage</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#property-triple-structure","title":"Property Triple Structure","text":""},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#text-related-triples","title":"Text Related Triples","text":"<pre><code>flowchart LR\n  %% Classes\n  MappingComponent(MappingComponent)\n  MappingElement(MappingElement)\n  MappingXMLAttribute(MappingXMLAttribute)\n  MappingStandoffDataTypeClass(MappingStandoffDataTypeClass)\n  TextValue(TextValue)\n  XMLToStandoffMapping(XMLToStandoffMapping)\n  XSLTransformation(XSLTransformation)\n  StandoffTag(StandoffTag)\n  StandoffInternalReferenceTag(StandoffInternalReferenceTag)\n  Resource(Resource)\n\n  %% Duplicates\n  _StandoffTag{{StandoffTag}}\n\n  %% Values\n  string1([xsd:string])\n  string2([xsd:string])\n  string3([xsd:string])\n  boolean1([xsd:boolean])\n  integer1([xsd:integer])\n\n  %% Relations\n  TextValue --&gt; valueHasMapping --&gt; XMLToStandoffMapping\n  XMLToStandoffMapping --&gt; hasMappingElement --&gt; MappingElement\n  XMLToStandoffMapping --&gt; mappingHasDefaultXSLTransformation --&gt; XSLTransformation\n  TextValue --&gt; valueHasStandoff --&gt; StandoffTag\n  subgraph standoffProperties\n    standoffTagHasEndIndex\n    standoffTagHasStartIndex\n    standoffTagHasEnd\n    standoffTagHasStart\n    standoffTagHasLink\n    standoffTagHasOriginalXMLID\n    targetHasOriginalXMLID\n    standoffTagHasUuid\n    standoffTagHasEndParent\n    standoffTagHasStartAncestor\n    standoffTagHasStartParent\n    standoffTagHasInternalReference\n  end\n  StandoffTag --&gt; standoffTagHasEndIndex --&gt; integer1\n  StandoffTag --&gt; standoffTagHasStartIndex --&gt; integer1\n  StandoffTag --&gt; standoffTagHasEnd --&gt; integer1\n  StandoffTag --&gt; standoffTagHasStart --&gt; integer1\n  StandoffTag --&gt; standoffTagHasLink --&gt; Resource\n  StandoffTag --&gt; standoffTagHasOriginalXMLID --&gt; string2\n  StandoffTag --&gt; targetHasOriginalXMLID --&gt; string2\n  StandoffTag --&gt; standoffTagHasUuid --&gt; string2\n  StandoffTag --&gt; standoffTagHasEndParent --&gt; _StandoffTag\n  StandoffTag --&gt; standoffTagHasStartAncestor --&gt; _StandoffTag\n  StandoffTag --&gt; standoffTagHasStartParent --&gt; _StandoffTag\n  StandoffInternalReferenceTag --&gt; standoffTagHasInternalReference --&gt; _StandoffTag\n  TextValue --&gt; valueHasLanguage --&gt; string3\n\n  MappingComponent --&gt; mappingHasXMLAttributename --&gt; string1\n  MappingComponent --&gt; mappingHasStandoffClass --&gt; string1\n  MappingComponent --&gt; mappingHasXMLNamespace --&gt; string1\n  MappingElement --&gt; mappingHasXMLClass --&gt; string1\n  MappingElement --&gt; mappingHasXMLTagname --&gt; string1\n  MappingElement --&gt; mappingHasXMLAttribute --&gt; MappingXMLAttribute --&gt; mappingHasStandoffProperty\n  MappingElement --&gt; mappingHasStandoffDataTypeClass --&gt; MappingStandoffDataTypeClass\n  MappingElement --&gt; mappingElementRequiresSeparator --&gt; boolean1</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#resource-triples-structure","title":"Resource Triples Structure","text":"<p>Legend</p> <ul> <li>round boxes: resources</li> <li>square boxes: properties</li> <li>hexagonal boxes: resoures that are duplicated for graphical reasons</li> <li>oval boxes: xsd values</li> <li>grey squares: thematic units</li> </ul> <pre><code>flowchart LR\n  LinkValue(LinkValue)\n  GeomValue(GeomValue)\n  ColorValue(ColorValue)\n  ExternalResValue(ExternalResValue)\n\n  date([xsd:dateTime])\n  string([xsd:string])\n  _Representation{{Representation}}\n  _Representation2{{Representation}}\n  _TextValue{{TextValue}}\n  _Value{{Value}}\n  _Resource{{Resource}}\n\n  subgraph Resources\n    Resource(Resource)\n    Annotation(Annotation)\n    Region(Region)\n    ExternalResource(ExternalResource)\n    Representation(Representation)\n    StillImageRepresentation(\"StillImageRepresentation etc.\")\n  end\n\n  subgraph Links\n    hasRepresentation\n    hasLinkTo\n    hasStandoffLinkTo\n    isPartOf\n  end\n\n  subgraph LinkValues\n    hasRepresentationValue\n    hasLinkToValue\n    hasStandoffLinkToValue\n    isPartOfValue\n  end\n\n  subgraph FileValues\n    direction LR\n    hasFileValue\n    FileValue(FileValue)\n    hasStillImageRepresentation[\"hasStillImageRepresentation etc.\"]\n    StillImageFileValue(\"StillImageFileValue etc.\")\n  end\n\n  Resource --&gt; creationDate --&gt; date\n  Resource --&gt; hasComment --&gt; _TextValue\n  Resource --&gt; hasValue --&gt; _Value\n\n  Resource --&gt; hasRepresentation --&gt; _Representation\n\n  Resource --&gt; hasLinkTo --&gt; _Resource\n  Resource --&gt; hasStandoffLinkTo --&gt; _Resource\n  Resource --&gt; isPartOf --&gt; _Resource\n\n  Resource --&gt; hasLinkToValue --&gt; LinkValue\n  Resource --&gt; hasStandoffLinkToValue --&gt; LinkValue\n  Resource --&gt; hasRepresentationValue --&gt; LinkValue\n  Resource --&gt; isPartOfValue --&gt; LinkValue\n\n  Annotation --&gt; isAnnotationOfValue --&gt; LinkValue\n  Annotation --&gt; isAnnotationOf --&gt; _Resource\n\n  Region --&gt; isRegionOfValue --&gt; LinkValue\n  Region --&gt; isRegionOf --&gt; _Representation2\n  Region --&gt; hasGeometry --&gt; GeomValue\n  Region --&gt; hasColorValue --&gt; ColorValue\n\n  ExternalResource --&gt; hasExtResValue --&gt; ExternalResValue\n  ExternalResValue --&gt; extResId --&gt; string\n  ExternalResValue --&gt; extResAccessInfo --&gt; string\n  ExternalResValue --&gt; extResProvider --&gt; string\n\n  Representation --&gt; hasFileValue --&gt; FileValue\n  StillImageRepresentation --&gt; hasStillImageRepresentation --&gt; StillImageFileValue</code></pre>"},{"location":"DSP-API/05-internals/design/domain/class-and-property-hierarchies/#properties-without-subject-class-constraint","title":"Properties without Subject Class Constraint","text":"<pre><code>flowchart LR\n  na[[no subject class constraint defined]]\n\n  %% Classes\n  User(admin:User)\n  IntValue(IntValue)\n  IntervalValue(IntervalValue)\n\n  %% Values\n  date([xsd:dateTime])\n  boolean([xsd:boolean])\n\n  %% Relations\n  na --&gt; deletedBy --&gt; User\n  na --&gt; seqnum --&gt; IntValue\n  na --&gt; deleteDate --&gt; date\n  na --&gt; isDeleted --&gt; boolean</code></pre>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/","title":"Domain Entities and Relations","text":"<p>In the context of DEV-1415: Domain Model we attempted to gain a clear overview over the DSP's domain, as implicitly modelled by the ontologies, code, validations and documentation of the DSP-API.</p> <p>The following document aims to give a higher level overview of said domain.</p> <p>Note</p> <ul> <li>As a high level overview, this document does not aim for exhaustivity.</li> <li>Naming is tried to be kept as simple as possible,    while trying to consolidate different naming schemes   (ontologies, code, API),   which in result means that no naming scheme is strictly followed.</li> <li>The split between V2 and Admin is arbitrary as those are intertwined within the system.   It merely serves the purpose of organizing the presented entities.</li> </ul>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/#domain-entities","title":"Domain Entities","text":"<p>The following Diagrams visualize the top level entities present in the DSP.  The attributes of these entities should be exhaustive. Cardinalities or validation constraints are normally not depicted.  The indicated relationships are of conceptual nature and are more complicated in the actual system.</p>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/#admin","title":"Admin","text":"<pre><code>erDiagram\n    %% entities\n    User {\n        IRI id\n        string userName \"unique\"\n        string email \"unique\"\n        string givenName\n        string familyName\n        string password\n        string language \"2 character ISO language code\"\n        boolean status\n        boolean systemAdmin\n    }\n    Project {\n        IRI id\n        string shortcode \"4 character hex\"\n        string shortname \"xsd:NCNAME\"\n        string longname \"optional\"\n        langstring description\n        string keywords\n        boolean status\n        boolean selfjoin\n        string logo \"optional\"\n        string restrictedViewSize\n        string restrictedViewWatermark\n    }\n    Group {\n        IRI id\n        string name\n        langstring description\n        boolean status\n        boolean selfjoin\n    }\n    ListNode {\n        IRI id\n        IRI projectIri \"only for root node\"\n        langstring labels\n        langstring comments\n        string name\n        boolean isRootNode\n        integer listNodePosition\n    }\n    DefaultObjectAccessPermission {\n        IRI id\n        string hasPermission \"the 'RV, V, M, D, CR' string\"\n    }\n    AdministrativePermission {\n        IRI id\n        string hasPermission \"a different string representation\"\n    }\n    Property {}\n    ResourceClass {}\n\n    %% relations\n    User }|--|{ Project: \"is member/admin of\"\n    User }o--|{ Group: \"is member of\"\n    Group }o--|| Project: \"belongs to\"\n    ListNode }o--|| Project: \"belongs to\"\n    ListNode }o--o{ ListNode: \"hasSubListNode\"\n    ListNode |o--o| ListNode: \"hasRootNode\"\n    AdministrativePermission |{--o| Project: \"points to\"\n    AdministrativePermission |{--|{ Group: \"points to\"\n\n    DefaultObjectAccessPermission |{--o{ Group: \"points to\"\n    DefaultObjectAccessPermission |{--|| Project: \"points to\"\n    DefaultObjectAccessPermission |{--o{ Property: \"points to\"\n    DefaultObjectAccessPermission |{--o{ ResourceClass: \"points to\"\n</code></pre>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/#overview-v2","title":"Overview V2","text":"<pre><code>erDiagram\n    Ontology ||--o{ ResourceClass: \"consists of\"\n    Ontology ||--o{ Property: \"consists of\"\n    ResourceClass o{--o{ Cardinality: defines\n    Cardinality ||--|| Property: on\n    ResourceClass ||--o{ Resource: \"can be instantiated as\"\n    Property ||--o{ Value: \"can be instantiated as\"\n    Resource ||--o{ Value: has\n    Value }o--|| ObjectAccessPermission: grants\n    Resource }o--|| ObjectAccessPermission: grants\n    Resource }o--|| User: \"attached to\"\n    Resource }o--|| Project: \"attached to\"</code></pre>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/#ontology","title":"Ontology","text":"<pre><code>erDiagram\n    Project {}\n    Ontology {\n        IRI id\n        string ontologyName\n        string label\n        string comment \"optional\"\n        boolean isShared\n        date lastModificationDate\n    }\n    ResourceClass {\n        IRI id\n        langstring label\n        langstring comment\n    }\n    Property {\n        IRI id\n        langstring label\n        langstring comment\n        string guiAttribute\n    }\n    GuiElement {}\n    Cardinality {\n        owl_cardinality cardinality \"1, 0-1, 0-n, 1-n\"\n        integer guiOrder\n    }\n    Ontology o{--|| Project: \"attached to\"\n    Ontology ||--o{ ResourceClass: \"consists of\"\n    Ontology ||--o{ Property: \"consists of\"\n    ResourceClass }o--o{ ResourceClass: subClassOf\n    ResourceClass ||--o{ Cardinality: defines\n    Cardinality ||--|| Property: specifies\n    Property }o--o{ Property: subPropertyOf\n    Property }o--o| ResourceClass: subjectType\n    Property }o--o| ResourceClass: objectType\n    Property }o--|| GuiElement: has\n    Cardinality ||--|| Property: specifies</code></pre>"},{"location":"DSP-API/05-internals/design/domain/domain-entities-and-relations/#data","title":"Data","text":"<pre><code>erDiagram\n    User {}\n    Project {}\n    Resource {\n        IRI id\n        string label\n        boolean isDeleted\n        string hasPermission\n        date creationDate\n        date lastModificationDate\n        date deleteDate\n        string deleteComment\n    }\n    Value {\n        IRI id\n        date valueCreationDate\n        string hasPermission\n        integer valueHasOrder\n        langstring valueHasComment\n        boolean isDeleted\n        date deleteDate\n        langstring deleteComment\n        string valueHasString\n        UUID valueHasUUID\n    }\n    Resource ||--o{ Value: contains\n    Resource o{--o{ Value: hasStandoffLinkTo\n    Resource o{--|| User: attachedToUser\n    Resource o{--o| User: deletedBy\n    Resource o{--|| Project: attachedToProject\n    Value ||--|| ValueLiteral: \"is represented by\"\n    Value }o--o{ Resource: \"links to\"\n    Value }o--o{ ListNode: \"links to\"\n    Value o{--|| User: attachedToUser\n    Value o{--o| User: deletedBy\n    Value o|--o| Value: previousValue</code></pre>"},{"location":"DSP-API/05-internals/design/domain/system-instances/","title":"System Instances","text":"<p>Apart from class and property definitions,  <code>knora-base</code> and <code>knora-admin</code> provide a small number of class instances  that should be present in any running DSP stack:</p>"},{"location":"DSP-API/05-internals/design/domain/system-instances/#built-in-user-groups","title":"Built-in User Groups","text":"<pre><code>classDiagram\n%% Classes\n  class UserGroup {\n\n  }\n  class UnknownUser {\n\n  }\n  class KnownUser {\n\n  }\n  class Creator {\n\n  }\n  class ProjectMember {\n\n  }\n  class ProjectAdmin {\n\n  }\n  class SystemAdmin {\n\n  }\n%% Relationships\n  UserGroup &lt;|-- UnknownUser\n  UserGroup &lt;|-- KnownUser\n  UserGroup &lt;|-- Creator\n  UserGroup &lt;|-- ProjectMember\n  UserGroup &lt;|-- ProjectAdmin\n  UserGroup &lt;|-- SystemAdmin</code></pre>"},{"location":"DSP-API/05-internals/design/domain/system-instances/#built-in-users","title":"Built-in Users","text":"<pre><code>classDiagram\n%% Classes\n  class User {\n\n  }\n  class AnonymousUser {\n\n  }\n  class SystemUser {\n\n  }\n%% Relationships\n  User &lt;|-- AnonymousUser\n  User &lt;|-- SystemUser</code></pre>"},{"location":"DSP-API/05-internals/design/domain/system-instances/#built-in-projects","title":"Built-in Projects","text":"<pre><code>classDiagram\n%% Classes\n  class Project {\n\n  }\n  class SystemProject {\n\n  }\n  class DefaultSharedOntologiesProject {\n\n  }\n%% Relationships\n  Project &lt;|-- SystemProject\n  Project &lt;|-- DefaultSharedOntologiesProject</code></pre>"},{"location":"DSP-API/05-internals/design/principles/authentication/","title":"Authentication in Knora","text":""},{"location":"DSP-API/05-internals/design/principles/authentication/#scope","title":"Scope","text":"<p>Authentication is the process of making sure that if someone is accessing something then this someone is actually also the person they pretend to be. The process of making sure that someone is authorized, (i.e. has the permission to access something, is handled as described in Authorisation).</p>"},{"location":"DSP-API/05-internals/design/principles/authentication/#implementation","title":"Implementation","text":"<p>The authentication in Knora is based on Basic Auth HTTP basic authentication, URL parameters or JSON Web Token.  This means that on every request (to any of the routes), credentials need to be sent either via authorization header.</p> <p>All routes are always accessible and if there are no credentials provided, a default user is assumed. If credentials are sent and they are not correct (e.g., wrong username, password incorrect, token expired), then the request will end in an error message.</p>"},{"location":"DSP-API/05-internals/design/principles/authentication/#skipping-authentication","title":"Skipping Authentication","text":"<p>There is the possibility to turn skipping authentication on and use a hardcoded user (Test User). In application.conf set the <code>skip-authentication = true</code> and Test User will be always assumed.</p>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/","title":"Consistency Checking","text":"<p>Attention! GraphDB is not supported anymore, therefore parts related  to it in this document are redundant.</p>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/#requirements","title":"Requirements","text":"<p>Knora is designed to prevent inconsistencies in RDF data, as far as is practical, in a triplestore-independent way (see Triplestore Updates). However, it is also useful to enforce consistency constraints in the triplestore itself, for two reasons:</p> <ol> <li>To prevent inconsistencies resulting from bugs in the DSP-API server.</li> <li>To prevent users from inserting inconsistent data directly into the triplestore, bypassing Knora.</li> </ol> <p>The design of the <code>knora-base</code> ontology supports two ways of specifying constraints on data (see knora-base: Consistency Checking for details):</p> <ol> <li>A property definition should specify the types that are allowed as   subjects and objects of the property, using   <code>knora-base:subjectClassConstraint</code> and (if it is an object   property) <code>knora-base:objectClassConstraint</code>. Every subproperty of   <code>knora-base:hasValue</code> or a <code>knora-base:hasLinkTo</code> (i.e. every   property of a resource that points to a <code>knora-base:Value</code> or to   another resource) is required have this constraint, because the   DSP-API server relies on it to know what type of object to expect   for the property. Use of <code>knora-base:subjectClassConstraint</code> is   recommended but not required.</li> <li>A class definition should use OWL cardinalities    (see OWL 2 Quick Reference Guide)   to indicate the properties that instances of the class are allowed to   have, and to constrain the number of objects that each property can   have. Subclasses of <code>knora-base:Resource</code> are required to have a   cardinality for each subproperty of <code>knora-base:hasValue</code> or a   <code>knora-base:hasLinkTo</code> that resources of that class can have.</li> </ol> <p>Specifically, consistency checking should prevent the following:</p> <ul> <li>An object property or datatype property has a subject of the wrong   class, or an object property has an object of the wrong class   (GraphDB's consistency checke cannot check the types of literals).</li> <li>An object property has an object that does not exist (i.e. the   object is an IRI that is not used as the subject of any statements   in the repository). This can be treated as if the object is of the   wrong type (i.e. it can cause a violation of   <code>knora-base:objectClassConstraint</code>, because there is no compatible   <code>rdf:type</code> statement for the object).</li> <li>A class has <code>owl:cardinality 1</code> or <code>owl:minCardinality 1</code> on an   object property or datatype property, and an instance of the class   does not have that property.</li> <li>A class has <code>owl:cardinality 1</code> or <code>owl:maxCardinality 1</code> on an   object property or datatype property, and an instance of the class   has more than one object for that property.</li> <li>An instance of <code>knora-base:Resource</code> has an object property pointing   to a <code>knora-base:Value</code> or to another <code>Resource</code>, and its class has   no cardinality for that property.</li> <li>An instance of <code>knora-base:Value</code> has a subproperty of   <code>knora-base:valueHas</code>, and its class has no cardinality for that   property.</li> <li>A datatype property has an empty string as an object.</li> </ul> <p>Cardinalities in base classes are inherited by derived classes. Derived classes can override inherited cardinalities by making them more restrictive, i.e. by specifying a subproperty of the one specified in the original cardinality.</p> <p>Instances of <code>Resource</code> and <code>Value</code> can be marked as deleted, using the property <code>isDeleted</code>. This must be taken into account as follows:</p> <ul> <li>With <code>owl:cardinality 1</code> or <code>owl:maxCardinality 1</code>, if the object of   the property can be marked as deleted, the property must not have   more than one object that has not been marked as deleted. In other   words, it's OK if there is more than one object, as long only one of   them has <code>knora-base:isDeleted false</code>.</li> <li>With <code>owl:cardinality 1</code> or <code>owl:minCardinality 1</code>, the property   must have an object, but it's OK if the property's only object is   marked as deleted. We allow this because the subject and object may   have different owners, and it may not be feasible for them to   coordinate their work. The owner of the object should always be able   to mark it as deleted. (It could be useful to notify the owner of   the subject when this happens, but that is beyond the scope of   consistency checking.)</li> </ul>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/#design","title":"Design","text":"<p>Ontotext GraphDB provides a mechanism for checking the consistency of data in a repository each time an update transaction is committed. Knora provides GraphDB-specific consistency rules that take advantage of this feature to provide an extra layer of consistency checks, in addition to the checks that are implemented in Knora.</p> <p>When a repository is created in GraphDB, a set of consistency rules can be provided, and GraphDB's consistency checker can be turned on to ensure that each update transaction respects these rules, as described in the section Reasoning of the GraphDB documentation. Like custom inference rules, consistency rules are defined in files with the <code>.pie</code> filename extension, in a GraphDB-specific syntax.</p> <p>We have added rules to the standard RDFS inference rules file <code>builtin_RdfsRules.pie</code>, to create the file <code>KnoraRules.pie</code>. The <code>.ttl</code> configuration file that is used to create the repository must contain these settings:</p> <pre><code>owlim:ruleset \"/path/to/KnoraRules.pie\" ;\nowlim:check-for-inconsistencies \"true\" ;\n</code></pre> <p>The path to <code>KnoraRules.pie</code> must be an absolute path. The scripts provided with Knora to create test repositories set this path automatically.</p> <p>Consistency checking in GraphDB relies on reasoning. GraphDB's reasoning is Forward-chaining, which means that reasoning is applied to the contents of each update, before the update transaction is committed, and the inferred statements are added to the repository.</p> <p>A GraphDB rules file can contain two types of rules: inference rules and consistency rules. Before committing an update transaction, GraphDB applies inference rules, then consistency rules. If any of the consistency rules are violated, the transaction is rolled back.</p> <p>An inference rule has this form:</p> <pre><code>Id: &lt;rule_name&gt;\n    &lt;premises&gt; &lt;optional_constraints&gt;\n    -------------------------------\n    &lt;consequences&gt; &lt;optional_constraints&gt;\n</code></pre> <p>The premises are a pattern that tries to match statements found in the data. Optional constraints, which are enclosed in square brackets, make it possible to specify the premises more precisely, or to specify a named graph (see examples below). Consequences are the statements that will be inferred if the premises match. A line of hyphens separates premises from consequences.</p> <p>A GraphDB consistency rule has a similar form:</p> <pre><code>Consistency: &lt;rule_name&gt;\n    &lt;premises&gt; &lt;optional_constraints&gt;\n    -------------------------------\n    &lt;consequences&gt; &lt;optional_constraints&gt;\n</code></pre> <p>The differences between inference rules and consistency rules are:</p> <ul> <li>A consistency rule begins with <code>Consistency</code> instead of <code>Id</code>.</li> <li>In a consistency rule, the consequences are optional. Instead of   representing statements to be inferred, they represent statements   that must exist if the premises are satisfied. In other words, if   the premises are satisfied and the consequences are not found, the   rule is violated.</li> <li>If a consistency rule doesn't specify any consequences, and the   premises are satisfied, the rule is violated.</li> </ul> <p>Rules use variable names for subjects, predicates, and objects, and they can use actual property names.</p>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/#empty-string-as-object","title":"Empty string as object","text":"<p>If subject <code>i</code> has a predicate <code>p</code> whose object is an empty string, the constraint is violated:</p> <pre><code>Consistency: empty_string\n    i p \"\"\n    ------------------------------------\n</code></pre>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/#subject-and-object-class-constraints","title":"Subject and object class constraints","text":"<p>If subject <code>i</code> has a predicate <code>p</code> that requires a subject of type <code>t</code>, and <code>i</code> is not a <code>t</code>, the constraint is violated:</p> <pre><code>Consistency: subject_class_constraint\n    p &lt;knora-base:subjectClassConstraint&gt; t\n    i p j\n    ------------------------------------\n    i &lt;rdf:type&gt; t\n</code></pre> <p>If subject <code>i</code> has a predicate <code>p</code> that requires an object of type <code>t</code>, and the object of <code>p</code> is not a <code>t</code>, the constraint is violated:</p> <pre><code>Consistency: object_class_constraint\n    p &lt;knora-base:objectClassConstraint&gt; t\n    i p j\n    ------------------------------------\n    j &lt;rdf:type&gt; t\n</code></pre>"},{"location":"DSP-API/05-internals/design/principles/consistency-checking/#cardinality-constraints","title":"Cardinality constraints","text":"<p>A simple implementation of a consistency rule to check <code>owl:maxCardinality 1</code>, for objects that can be marked as deleted, could look like this:</p> <pre><code>Consistency: max_cardinality_1_with_deletion_flag\n    i &lt;rdf:type&gt; r\n    r &lt;owl:maxCardinality&gt; \"1\"^^xsd:nonNegativeInteger\n    r &lt;owl:onProperty&gt; p\n    i p j\n    i p k [Constraint j != k]\n    j &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    k &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    ------------------------------------\n</code></pre> <p>This means: if resource <code>i</code> is a subclass of an <code>owl:Restriction</code> <code>r</code> with <code>owl:maxCardinality 1</code> on property <code>p</code>, and the resource has two different objects for that property, neither of which is marked as deleted, the rule is violated. Note that this takes advantage of the fact that <code>Resource</code> and <code>Value</code> have <code>owl:cardinality 1</code> on <code>isDeleted</code> (<code>isDeleted</code> must be present even if false), so we do not need to check whether <code>i</code> is actually something that can be marked as deleted.</p> <p>However, this implementation would be much too slow. We therefore use two optimisations suggested by Ontotext:</p> <ol> <li>Add custom inference rules to make tables (i.e. named graphs) of    pre-calculated information about the cardinalities on properties of    subjects, and use those tables to simplify the consistency rules.</li> <li>Use the <code>[Cut]</code> constraint to avoid generating certain redundant    compiled rules (see Entailment    rules).</li> </ol> <p>For example, to construct a table of subjects belonging to classes that have <code>owl:maxCardinality 1</code> on some property <code>p</code>, we use the following custom inference rule:</p> <pre><code>Id: maxCardinality_1_table\n    i &lt;rdf:type&gt; r\n    r &lt;owl:maxCardinality&gt; \"1\"^^xsd:nonNegativeInteger\n    r &lt;owl:onProperty&gt; p\n    ------------------------------------\n    i p r [Context &lt;onto:_maxCardinality_1_table&gt;]\n</code></pre> <p>The constraint <code>[Context &lt;onto:_maxCardinality_1_table&gt;]</code> means that the inferred triples are added to the context (i.e. the named graph) <code>http://www.ontotext.com/_maxCardinality_1_table</code>. (Note that we have defined the prefix <code>onto</code> as <code>http://www.ontotext.com/</code> in the <code>Prefices</code> section of the rules file.) As the GraphDB documentation on Rules explains:</p> <p>If the context is provided, the statements produced as rule consequences are not \u2018visible\u2019 during normal query answering. Instead, they can only be used as input to this or other rules and only when the rule premise explicitly uses the given context.</p> <p>Now, to find out whether a subject belongs to a class with that cardinality on a given property, we only need to match one triple. The revised implementation of the rule <code>max_cardinality_1_with_deletion_flag</code> is as follows:</p> <pre><code>Consistency: max_cardinality_1_with_deletion_flag\n    i p r [Context &lt;onto:_maxCardinality_1_table&gt;]\n    i p j [Constraint j != k]\n    i p k [Cut]\n    j &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    k &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    ------------------------------------\n</code></pre> <p>The constraint <code>[Constraint j != k]</code> means that the premises will be satisfied only if the variables <code>j</code> and <code>k</code> do not refer to the same thing.</p> <p>With these optimisations, the rule is faster by several orders of magnitude.</p> <p>Since properties whose objects can be marked as deleted must be handled differently to properties whose objects cannot be marked as deleted, the <code>knora-base</code> ontology provides a property called <code>objectCannotBeMarkedAsDeleted</code>. All properties in <code>knora-base</code> whose objects cannot take the <code>isDeleted</code> flag (including datatype properties) should be derived from this property. This is how it is used to check <code>owl:maxCardinality 1</code> for objects that cannot be marked as deleted:</p> <pre><code>Consistency: max_cardinality_1_without_deletion_flag\n    i p r [Context &lt;onto:_maxCardinality_1_table&gt;]\n    p &lt;rdfs:subPropertyOf&gt; &lt;knora-base:objectCannotBeMarkedAsDeleted&gt;\n    i p j [Constraint j != k]\n    i p k [Cut]\n    ------------------------------------\n</code></pre> <p>To check <code>owl:minCardinality 1</code>, we do not care whether the object can be marked as deleted, so we can use this simple rule:</p> <pre><code>Consistency: min_cardinality_1_any_object\n    i p r [Context &lt;onto:_minCardinality_1_table&gt;]\n    ------------------------------------\n    i p j\n</code></pre> <p>This means: if a subject <code>i</code> belongs to a class that has <code>owl:minCardinality 1</code> on property <code>p</code>, and <code>i</code> has no object for <code>p</code>, the rule is violated.</p> <p>To check <code>owl:cardinality 1</code>, we need two rules: one that checks whether there are too few objects, and one that checks whether there are too many. To check whether there are too few objects, we don't care whether the objects can be marked as deleted, so the rule is the same as <code>min_cardinality_1_any_object</code>, except for the cardinality:</p> <pre><code>Consistency: cardinality_1_not_less_any_object\n    i p r [Context &lt;onto:_cardinality_1_table&gt;]\n    ------------------------------------\n    i p j\n</code></pre> <p>To check whether there are too many objects, we need to know whether the objects can be marked as deleted or not. In the case where the objects can be marked as deleted, the rule is the same as <code>max_cardinality_1_with_deletion_flag</code>, except for the cardinality:</p> <pre><code>Consistency: cardinality_1_not_greater_with_deletion_flag\n    i p r [Context &lt;onto:_cardinality_1_table&gt;]\n    i p j [Constraint j != k]\n    i p k [Cut]\n    j &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    k &lt;knora-base:isDeleted&gt; \"false\"^^xsd:boolean\n    ------------------------------------\n</code></pre> <p>In the case where the objects cannot be marked as deleted, the rule is the same as <code>max_cardinality_1_without_deletion_flag</code>, except for the cardinality:</p> <pre><code>Consistency: cardinality_1_not_less_any_object\n    i p r [Context &lt;onto:_cardinality_1_table&gt;]\n    ------------------------------------\n    i p j\n</code></pre> <p>Knora allows a subproperty of <code>knora-base:hasValue</code> or <code>knora-base:hasLinkTo</code> to be a predicate of a resource only if the resource's class has some cardinality for the property. For convenience, <code>knora-base:hasValue</code> and <code>knora-base:hasLinkTo</code> are subproperties of <code>knora-base:resourceProperty</code>, which is used to check this constraint in the following rule:</p> <pre><code>Consistency: resource_prop_cardinality_any\n    i &lt;knora-base:resourceProperty&gt; j\n    ------------------------------------\n    i p j\n    i &lt;rdf:type&gt; r\n    r &lt;owl:onProperty&gt; p\n</code></pre> <p>If resource <code>i</code> has a subproperty of <code>knora-base:resourceProperty</code>, and <code>i</code> is not a member of a subclass of an <code>owl:Restriction</code> <code>r</code> with a cardinality on that property (or on one of its base properties), the rule is violated.</p> <p>A similar rule, <code>value_prop_cardinality_any</code>, ensures that if a value has a subproperty of <code>knora-base:valueHas</code>, the value's class has some cardinality for that property.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/","title":"DSP-API Server Design Overview","text":""},{"location":"DSP-API/05-internals/design/principles/design-overview/#introduction","title":"Introduction","text":"<p>DSP-API's responsibilites are:</p> <ul> <li>Querying, creating, updating, and deleting data</li> <li>Creating, updating and deleting data models (ontologies)</li> <li>Managing projects and users</li> <li>Authentication of clients</li> <li>Authorisation of clients' requests</li> </ul> <p>DSP-API is developed with Scala and uses the Akka framework for message-based concurrency. It is designed to work with the Apache Jena Fuseki triplestore which is compliant to the SPARQL 1.1 Protocol. For file storage, it uses Sipi.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/#dsp-api-versions","title":"DSP-API Versions","text":"<ul> <li>DSP-API v2: the latest DSP-API that should be used.</li> <li>DSP-API v1: has been removed after a long period of deprecation.</li> </ul> <p>There is also an Admin API for administrating DSP projects.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/#error-handling","title":"Error Handling","text":"<p>The error-handling design has these aims:</p> <ol> <li>Simplify the error-handling code in actors as much as possible.</li> <li>Produce error messages that clearly indicate the context in which    the error occurred (i.e. what the application was trying to do).</li> <li>Ensure that clients receive an appropriate error message when an    error occurs.</li> <li>Ensure that <code>ask</code> requests are properly terminated with an    <code>akka.actor.Status.Failure</code> message in the event of an error,    without which they will simply time out (see    Ask: Send and Receive Future).</li> <li>When a actor encounters an error that isn't the client's fault (e.g.    a triplestore failure), log it, but don't do this with errors caused    by bad input.</li> <li>When logging errors, include the full JVM stack trace.</li> </ol> <p>A hierarchy of exception classes is defined in <code>Exceptions.scala</code>, representing different sorts of errors that could occur. The hierarchy has two main branches:</p> <ul> <li><code>RequestRejectedException</code>, an abstract class for errors that are   the client's fault. These errors are not logged.</li> <li><code>InternalServerException</code>, an abstract class for errors that are not   the client's fault. These errors are logged.</li> </ul> <p>Exception classes in this hierarchy can be defined to include a wrapped <code>cause</code> exception. When an exception is logged, its stack trace will be logged along with the stack trace of its <code>cause</code>. It is therefore recommended that low-level code should catch low-level exceptions, and wrap them in one of our higher-level exceptions, in order to clarify the context in which the error occurred.</p> <p>To simplify error-handling in responders, a utility method called <code>future2Message</code> is provided in <code>ActorUtils</code>. It is intended to be used in an actor's <code>receive</code> method to respond to messages in the <code>ask</code> pattern. If the responder's computation is successful, it is sent to the requesting actor as a response to the <code>ask</code>. If the computation fails, the exception representing the failure is wrapped in a <code>Status.Failure</code>, which is sent as a response to the <code>ask</code>. If the error is a subclass of <code>RequestRejectedException</code>, only the sender is notified of the error; otherwise, the error is also logged and rethrown (so that the <code>KnoraExceptionHandler</code> can handle the exception).</p> <p>In many cases, we transform data from the triplestore into a <code>Map</code> object. To simplify checking for required values in these collections, the class <code>ErrorHandlingMap</code> is provided. You can wrap any <code>Map</code> in an <code>ErrorHandlingMap</code>. You must provide a function that will generate an error message when a required value is missing, and optionally a function that throws a particular exception. Rows of SPARQL query results are already returned in <code>ErrorHandlingMap</code> objects.</p> <p>If you want to add a new exception class, see the comments in <code>Exceptions.scala</code> for instructions.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/#transformation-of-exception-to-client-responses","title":"Transformation of Exception to Client Responses","text":"<p>The <code>org.knora.webapi.KnoraExceptionHandler</code> is brought implicitly into scope of <code>pekko-http</code>, and by doing so registered and used to handle the transformation of all <code>KnoraExceptions</code> into <code>HttpResponses</code>. This handler handles only exceptions thrown inside the route and not the actors. However, the design of reply message passing from actors (by using <code>future2Message</code>), makes sure that any exceptions thrown inside actors, will reach the route, where they will be handled.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/#api-routing","title":"API Routing","text":"<p>The API routes in the <code>routing</code> package are defined using the DSL provided by the pekko-http library. A routing function has to do the following:</p> <ol> <li>Authenticate the client.</li> <li>Figure out what the client is asking for.</li> <li>Construct an appropriate request message and send it to the appropriate responder.</li> <li>Return a result to the client.</li> </ol> <p>To simplify the coding of routing functions, they are contained in objects that extend <code>org.knora.webapi.routing.Authenticator</code>. Each routing function performs the following operations:</p> <ol> <li><code>Authenticator.getUserADM</code> is called to authenticate the user.</li> <li>The request parameters are interpreted and validated, and a request    message is constructed to send to the responder. If the request is    invalid, <code>BadRequestException</code> is thrown. If the request message is    requesting an update operation, it must include a UUID generated by    <code>UUID.randomUUID</code>, so the responder can obtain a write lock on the    resource being updated.</li> </ol> <p>The routing function then passes the message to a function in an API-specific routing utility: <code>RouteUtilV2</code> or <code>RouteUtilADM</code>. This utility function sends the message to <code>ResponderManager</code> (which forwards it to the relevant responder), returns a response to the client in the appropriate format, and handles any errors.</p>"},{"location":"DSP-API/05-internals/design/principles/design-overview/#logging","title":"Logging","text":"<p>Logging in DSP-API is configurable through <code>logback.xml</code>, allowing fine grain configuration of what classes / objects should be logged from which level.</p> <p>The Akka Actors use Akka Logging while logging inside plain Scala Objects and Classes is done through Scala Logging.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/","title":"RDF Processing API","text":"<p>DSP provides an API for parsing and formatting RDF data and for working with RDF graphs. This allows DSP developers to use a single, idiomatic Scala API as a fa\u00e7ade for a Java RDF library.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/#overview","title":"Overview","text":"<p>The API is in the package <code>org.knora.webapi.messages.util.rdf</code>. It includes:</p> <ul> <li> <p><code>RdfModel</code>, which represents a set of RDF graphs (a default graph and/or one or more named graphs).   A model can be constructed from scratch, modified, and searched.</p> </li> <li> <p><code>RdfNode</code> and its subclasses, which represent RDF nodes (IRIs, blank nodes, and literals).</p> </li> <li> <p><code>Statement</code>, which represents a triple or quad.</p> </li> <li> <p><code>RdfNodeFactory</code>, which creates nodes and statements.</p> </li> <li> <p><code>RdfModelFactory</code>, which creates empty RDF models.</p> </li> <li> <p><code>RdfFormatUtil</code>, which parses and formats RDF models.</p> </li> <li> <p><code>JsonLDUtil</code>, which provides specialised functionality for working   with RDF in JSON-LD format, and for converting between RDF models   and JSON-LD documents. <code>RdfFormatUtil</code> uses <code>JsonLDUtil</code> when appropriate.</p> </li> <li> <p><code>ShaclValidator</code>, which validates RDF models using SHACL shapes.</p> </li> </ul> <p>To work with RDF models, start with <code>RdfFeatureFactory</code>, which returns instances of <code>RdfNodeFactory</code>, <code>RdfModelFactory</code>, <code>RdfFormatUtil</code>, and <code>ShaclValidator</code>.  <code>JsonLDUtil</code> does not need a feature factory.</p> <p>To iterate efficiently over the statements in an <code>RdfModel</code>, use its <code>iterator</code> method. An <code>RdfModel</code> cannot be modified while you are iterating over it. If you are iterating to look for statements to modify, you can collect a <code>Set</code> of statements to remove and a <code>Set</code> of statements to add, and perform these update operations after you have finished the iteration.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/#rdf-stream-processing","title":"RDF stream processing","text":"<p>To read or write a large amount of RDF data without generating a large string object, you can use the stream processing methods in <code>RdfFormatUtil</code>.</p> <p>To parse an <code>InputStream</code> to an <code>RdfModel</code>, use <code>inputStreamToRdfModel</code>. To format an <code>RdfModel</code> to an <code>OutputStream</code>, use <code>rdfModelToOutputStream</code>.</p> <p>To parse RDF data from an <code>InputStream</code> and process it one statement at a time, you can write a class that implements the <code>RdfStreamProcessor</code> trait, and use it with the <code>RdfFormatUtil.parseWithStreamProcessor</code> method. Your <code>RdfStreamProcessor</code> can also send one statement at a time to a formatting stream processor, which knows how to write RDF to an <code>OutputStream</code> in a particular format. Use <code>RdfFormatUtil.makeFormattingStreamProcessor</code> to construct one of these.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/#sparql-queries","title":"SPARQL queries","text":"<p>In tests, it can be useful to run SPARQL queries to check the content of an <code>RdfModel</code>. To do this, use the <code>RdfModel.asRepository</code> method, which returns an <code>RdfRepository</code> that can run <code>SELECT</code> queries.</p> <p>The configuration of the default graph depends on which underlying RDF library is used. If you are querying data in named graphs, use <code>FROM</code> or quad patterns rather than the default graph.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/#shacl-validation","title":"SHACL validation","text":"<p>On startup, graphs of SHACL shapes are loaded from Turtle files in a directory specified by <code>app.shacl.shapes-dir</code> in <code>application.conf</code>, and in subdirectories of that directory. To validate the default graph of an <code>RdfModel</code> using a graph of SHACL shapes, call <code>ShaclValidator.validate</code>, specifying the relative path of the Turtle file containing the graph of shapes.</p>"},{"location":"DSP-API/05-internals/design/principles/rdf-api/#implementations","title":"Implementations","text":"<ul> <li> <p>The Jena-based implementation, in package <code>org.knora.webapi.messages.util.rdf.jenaimpl</code>.</p> </li> <li> <p>The RDF4J-based implementation, in package <code>org.knora.webapi.messages.util.rdf.rdf4jimpl</code>.</p> </li> </ul>"},{"location":"DSP-API/05-internals/design/principles/store-module/","title":"Store Module","text":""},{"location":"DSP-API/05-internals/design/principles/store-module/#overview","title":"Overview","text":"<p>The store module houses the different types of data stores supported by Knora. At the moment, only triplestores and IIIF servers (Sipi) are supported. The triplestore support is implemented in the <code>org.knora.webapi.store.triplestore</code> package and the IIIF server support in <code>org.knora.webapi.store.iiif</code> package.</p>"},{"location":"DSP-API/05-internals/design/principles/store-module/#lifecycle","title":"Lifecycle","text":"<p>At the top level, the store package houses the <code>StoreManager</code>-Actor which is started when Knora starts. The <code>StoreManager</code> then starts the <code>TriplestoreManager</code> and <code>IIIFManager</code>, which each in turn starts their correct actor implementation.</p>"},{"location":"DSP-API/05-internals/design/principles/store-module/#triplestores","title":"Triplestores","text":"<p>Currently, the only supported triplestore is Apache Jena Fuseki, a HTTP-based triplestore.</p> <p>HTTP-based triplestore support is implemented in the <code>org.knora.webapi.triplestore.http</code> package.</p> <p>An HTTP-based triplestore is one that is accessed remotely over the HTTP protocol. <code>HttpTriplestoreConnector</code> supports the open source triplestore Apache Jena Fuseki.</p>"},{"location":"DSP-API/05-internals/design/principles/store-module/#iiif-servers","title":"IIIF Servers","text":"<p>Currently, only support for SIPI is implemented in <code>org.knora.webapi.store.iiifSipiConnector</code>.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/","title":"Triplestore Updates","text":""},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#requirements","title":"Requirements","text":""},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#general","title":"General","text":"<p>The supported update operations are:</p> <ul> <li>Create a new resource with its initial values.</li> <li>Add a new value.</li> <li>Change a value.</li> <li>Delete a value (i.e. mark it as deleted).</li> <li>Delete a resource (i.e. mark it as deleted).</li> </ul> <p>Users must be able to edit the same data concurrently.</p> <p>Each update must be atomic and leave the database in a consistent, meaningful state, respecting ontology constraints and permissions.</p> <p>The application must not use any sort of long-lived locks, because they tend to hinder concurrent edits, and it is difficult to ensure that they are released when they are no longer needed. Instead, if a user requests an update based on outdated information (because another user has just changed something, and the first user has not found out yet), the update must be not performed, and the application must notify the user who requested it, suggesting that the user should check the relevant data and try again if necessary. (We may eventually provide functionality to help users merge edits in such a situation. The application can also encourage users to coordinate with one another when they are working on the same data, and may eventually provide functionality to facilitate this coordination.)</p> <p>We can assume that each SPARQL update operation will run in its own database transaction with an isolation level of 'read committed'. We cannot assume that it is possible to run more than one SPARQL update in a single database transaction. The SPARQL 1.1 Protocol does not provide a way to do this, and currently it can be done only by embedding the triplestore in the application and using a vendor-specific API, but we cannot require this in Knora.)</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#permissions","title":"Permissions","text":"<p>To create a new value (as opposed to a new version of an existing value), the user must have permission to modify the containing resource.</p> <p>To create a new version of an existing value, the user needs only to have permission to modify the current version of the value; no permissions on the resource are needed.</p> <p>Since changing a link requires deleting the old link and creating a new one (as described in Linking), a user wishing to change a link must have modify permission on both the containing resource and the <code>knora-base:LinkValue</code> for the existing link.</p> <p>When a new resource or value is created, it can be given default permissions specified the project's admin data, or (only in API v2) custom permissions can be specified.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#ontology-constraints","title":"Ontology Constraints","text":"<p>Knora must not allow an update that would violate an ontology constraint.</p> <p>When creating a new value (as opposed to adding a new version of an existing value), Knora must not allow the update if the containing resource's OWL class does not contain a cardinality restriction for the submitted property, or if the new value would violate the cardinality restriction.</p> <p>It must also not allow the update if the type of the submitted value does not match the <code>knora-base:objectClassConstraint</code> of the property, or if the property has no <code>knora-base:objectClassConstraint</code>. In the case of a property that points to a resource, Knora must ensure that the target resource belongs to the OWL class specified in the property's <code>knora-base:objectClassConstraint</code>, or to a subclass of that class.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#versioning","title":"Versioning","text":"<p>Each Knora value (i.e. something belonging to an OWL class derived from <code>knora-base:Value</code>) is versioned. This means that once created, a value is never modified. Instead, 'changing' a value means creating a new version of the value --- actually a new value --- that points to the previous version using <code>knora-base:previousValue</code>. The versions of a value are a singly-linked list, pointing backwards into the past. When a new version of a value is made, the triple that points from the resource to the old version (using a subproperty of <code>knora-base:hasValue</code>) is removed, and a triple is added to point from the resource to the new version. Thus the resource always points only to the current version of the value, and the older versions are available only via the current version's <code>knora-base:previousValue</code> predicate.</p> <p>Unlike values, resources (members of OWL classes derived from <code>knora-base:Resource</code>) are not versioned. The data that is attached to a resource, other than its values, can be modified.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#deleting","title":"Deleting","text":"<p>Knora does not actually delete resources or values; it only marks them as deleted. Deleted data is normally hidden. All resources and values must have the predicate <code>knora- base:isDeleted</code>, whose object is a boolean. If a resource or value has been marked as deleted, it has <code>knora-base:isDeleted true</code> and has a <code>knora-base:deleteDate</code>. An optional <code>knora-base:deleteComment</code> may be added to explain why the resource or value has been marked as deleted.</p> <p>Normally, a value is marked as deleted without creating a new version of it. However, link values must be treated as a special case. Before a <code>LinkValue</code> can be marked as deleted, its reference count must be decremented to 0. Therefore, a new version of the <code>LinkValue</code> is made, with a reference count of 0, and it is this new version that is marked as deleted.</p> <p>Since it is necessary to be able to find out when a resource was deleted, it is not possible to undelete a resource. Moreover, to simplify the checking of cardinality constraints, and for consistency with resources, it is not possible to undelete a value, and no new versions of a deleted value can be made. Instead, if desired, a new resource or value can be created by copying data from a deleted resource or value.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#linking","title":"Linking","text":"<p>Links must be treated differently to other types of values. Knora needs to maintain information about the link, including permissions and a version history. Since the link does not have a unique IRI of its own, Knora uses RDF reifications for this purpose. Each link between two resources has exactly one (non-deleted) <code>knora-base:LinkValue</code>. The resource itself has a predicate that points to the <code>LinkValue</code>, using a naming convention in which the word <code>Value</code> is appended to the name of the link predicate to produce the link value predicate. For example, if a resource representing a book has a predicate called <code>hasAuthor</code> that points to another resource, it must also have a predicate called <code>hasAuthorValue</code> that points to the <code>LinkValue</code> in which information about the link is stored. To find a particular <code>LinkValue</code>, one can query it either by using its IRI (if known), or by using its <code>rdf:subject</code>, <code>rdf:predicate</code>, and <code>rdf:object</code> (and excluding link values that are marked as deleted).</p> <p>Like other values, link values are versioned. The link value predicate always points from the resource to the current version of the link value, and previous versions are available only via the current version's <code>knora-base:previousValue</code> predicate. Deleting a link means deleting the triple that links the two resources, and making a new version of the link value, marked with <code>knora-base:isDeleted</code>. A triple then points from the resource to this new, deleted version (using the link value property).</p> <p>The API allows a link to be 'changed' so that it points to a different target resource. This is implemented as follows: the existing triple connecting the two resources is removed, and a new triple is added using the same link property and pointing to the new target resource. A new version of the old link's <code>LinkValue</code> is made, marked with <code>knora-base:isDeleted</code>. A new <code>LinkValue</code> is made for the new link. The new <code>LinkValue</code> has no connection to the old one.</p> <p>When a resource contains <code>knora-base:TextValue</code> with Standoff markup that includes a reference to another resource, this reference is materialised as a direct link between the two resources, to make it easier to query. A special link property, <code>knora-base:hasStandoffLinkTo</code>, is used for this purpose. The corresponding link value property, <code>knora-base:hasStandoffLinkToValue</code>, points to a <code>LinkValue</code>. This <code>LinkValue</code> contains a reference count, indicated by <code>knora-base:valueHasRefCount</code>, that represents the number of text values in the containing resource that include one or more Standoff references to the specified target resource. Each time this number changes, a new version of this <code>LinkValue</code> is made. When the reference count reaches zero, the triple with <code>knora-base:hasStandoffLinkTo</code> is removed, and a new version of the <code>LinkValue</code> is made and marked with <code>knora-base:isDeleted</code>. If the same resource reference later appears again in a text value, a new triple is added using <code>knora-base:hasStandoffLinkTo</code>, and a new <code>LinkValue</code> is made, with no connection to the old one.</p> <p>For consistency, every <code>LinkValue</code> contains a reference count. If the link property is not <code>knora-base:hasStandoffLinkTo</code>, the reference count will always be either 1 (if the link exists) or 0 (if it has been deleted, in which case the link value will also be marked with <code>knora-base:isDeleted</code>).</p> <p>When a <code>LinkValue</code> is created for a standoff resource reference, it is given the same permissions as the text value containing the reference.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#design","title":"Design","text":""},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#responsibilities-of-responders","title":"Responsibilities of Responders","text":"<p>The resources responder (<code>ResourcesResponderV2</code>) has sole responsibility for generating SPARQL to create and updating resources, and the values responder (<code>ValuesResponderV2</code>) has sole responsibility for generating SPARQL to create and update values. When a new resource is created with its values, the values responder generates SPARQL statements that can be included in the <code>INSERT</code> clause of a SPARQL update to create the values, and the resources responder adds these statements to the SPARQL update that creates the resource. This ensures that the resource and its values are created in a single SPARQL update operation, and hence in a single triplestore transaction.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#application-level-locking","title":"Application-level Locking","text":"<p>The 'read committed' isolation level cannot prevent a scenario where two users want to add the same data at the same time. It is possible that both requests would do pre-update checks and simultaneously find that it is OK to add the data, and that both updates would then succeed, inserting redundant data and possibly violating ontology constraints. Therefore, Knora uses short-lived, application-level write locks on resources, to ensure that only one request at a time can update a given resource. Before each update, the application acquires a lock on a resource. To prevent deadlocks, Knora locks only one resource per API operation. It then does the pre-update checks and the update, then releases the lock. The lock implementation (in <code>IriLocker</code>) requires each API request message to include a random UUID, which is generated in the API Routing package. Using application-level locks allows us to do pre-update checks in their own transactions, and finally to do the SPARQL update in its own transaction.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#ensuring-data-consistency","title":"Ensuring Data Consistency","text":"<p>Knora enforces consistency constraints using three redundant mechanisms:</p> <ol> <li>By doing pre-update checks using SPARQL SELECT queries and cached    ontology data.</li> <li>By doing checks in the <code>WHERE</code> clauses of SPARQL updates.</li> </ol> <p>We take the view that redundant consistency checks are a good thing.</p> <p>Pre-update checks are SPARQL <code>SELECT</code> queries that are executed while holding an application-level lock on the resource to be updated. These checks should work with any triplestore, and can return helpful, Knora-specific error messages to the client if the request would violate a consistency constraint.</p> <p>However, the SPARQL update itself is our only chance to do pre-update checks in the same transaction that will perform the update. The design of the SPARQL 1.1 Update standard makes it possible to ensure that if certain conditions are not met, the update will not be performed. In our SPARQL update code, each update contains a <code>WHERE</code> clause, possibly a <code>DELETE</code> clause, and an <code>INSERT</code> clause. The <code>WHERE</code> clause is executed first. It performs consistency checks and provides values for variables that are used in the <code>DELETE</code> and/or <code>INSERT</code> clauses. In our updates, if the expectations of the <code>WHERE</code> clause are not met (e.g. because the data to be updated does not exist), the <code>WHERE</code> clause should return no results; as a result, the update will not be performed.</p> <p>Regardless of whether the update changes the contents of the triplestore, it returns nothing. If the update did nothing because the conditions of the WHERE clause were not met, the only way to find out is to do a <code>SELECT</code> afterwards. Moreover, in this case, there is no straightforward way to find out which conditions was not met. This is one reason why Knora does pre-update checks using separate <code>SELECT</code> queries and/or cached ontology data, before performing the update. This makes it possible to return specific error messages to the user to indicate why an update cannot be performed.</p> <p>Moreover, while some checks are easy to do in a SPARQL update, others are difficult, impractical, or impossible. Easy checks include checking whether a resource or value exists or is deleted, and checking that the <code>knora-base:objectClassConstraint</code> of a predicate matches the <code>rdf:type</code> of its intended object. Cardinality checks are not very difficult, but they perform poorly on Jena. Knora does not do permission checks in SPARQL, because its permission-checking algorithm is too complex to be implemented in SPARQL. For this reason, Knora's check for duplicate values cannot be done in SPARQL update code, because it relies on permission checks.</p> <p>In a bulk import operation, which can create a large number of resources in a single SPARQL update, a <code>WHERE</code> clause can become very expensive for the triplestore, in terms of memory as well as execution time. Moreover, RDF4J (and hence GraphDB) uses a recursive algorithm to parse SPARQL queries with <code>WHERE</code> clauses, so the size of a <code>WHERE</code> clause is limited by the stack space available to the Java Virtual Machine. Therefore, in bulk import operations, Knora uses <code>INSERT DATA</code>, which does not involve a <code>WHERE</code> clause. Bulk imports thus rely on checks (1) and (3) above.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#sparql-update-examples","title":"SPARQL Update Examples","text":"<p>The following sample SPARQL update code is simpler than what Knora actually does. It is included here to illustrate the way Knora's SPARQL updates are structured and how concurrent updates are handled.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#finding-a-value-iri-in-a-values-version-history","title":"Finding a value IRI in a value's version history","text":"<p>We will need this query below. If a value is present in a resource property's version history, the query returns everything known about the value, or nothing otherwise:</p> <pre><code>prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nprefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;\nprefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt;\n\nSELECT ?p ?o\nWHERE {\n    BIND(IRI(\"http://rdfh.ch/c5058f3a\") as ?resource)\n    BIND(IRI(\"http://www.knora.org/ontology/0803/incunabula#book_comment\") as ?property)\n    BIND(IRI(\"http://rdfh.ch/c5058f3a/values/testComment002\") as ?searchValue)\n\n    ?resource ?property ?currentValue .\n    ?currentValue knora-base:previousValue* ?searchValue .\n    ?searchValue ?p ?o .\n}\n</code></pre>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#creating-the-initial-version-of-a-value","title":"Creating the initial version of a value","text":"<pre><code>prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nprefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;\nprefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt;\n\nWITH &lt;http://www.knora.org/ontology/0803/incunabula&gt;\nINSERT {\n    ?newValue rdf:type ?valueType ;\n              knora-base:valueHasString \"\"\"Comment 1\"\"\" ;\n              knora-base:attachedToUser &lt;http://rdfh.ch/users/91e19f1e01&gt; ;\n              knora-base:attachedToProject &lt;http://rdfh.ch/projects/77275339&gt; ;\n              knora-base:hasPermissions \"V knora-admin:KnownUser,knora-admin:UnknownUser|M knora-admin:ProjectMember\"  ;\n              knora-base:valueTimestamp ?currentTime .\n\n    ?resource ?property ?newValue .\n} WHERE {\n    BIND(IRI(\"http://rdfh.ch/c5058f3a\") as ?resource)\n    BIND(IRI(\"http://www.knora.org/ontology/0803/incunabula#book_comment\") as ?property)\n    BIND(IRI(\"http://rdfh.ch/c5058f3a/values/testComment001\") AS ?newValue)\n    BIND(IRI(\"http://www.knora.org/ontology/knora-base#TextValue\") AS ?valueType)\n    BIND(NOW() AS ?currentTime)\n\n    # Do nothing if the resource doesn't exist.\n    ?resource rdf:type ?resourceClass .\n\n    # Do nothing if the submitted value has the wrong type.\n    ?property knora-base:objectClassConstraint ?valueType .\n}\n</code></pre> <p>To find out whether the insert succeeded, the application can use the query in Finding a value IRI in a value's version history to look for the new IRI in the property's version history.</p>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#adding-a-new-version-of-a-value","title":"Adding a new version of a value","text":"<pre><code>prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nprefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;\nprefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt;\n\nWITH &lt;http://www.knora.org/ontology/0803/incunabula&gt;\nDELETE {\n    ?resource ?property ?currentValue .\n} INSERT {\n    ?newValue rdf:type ?valueType ;\n              knora-base:valueHasString \"\"\"Comment 2\"\"\" ;\n              knora-base:previousValue ?currentValue ;\n              knora-base:attachedToUser &lt;http://rdfh.ch/users/91e19f1e01&gt; ;\n              knora-base:attachedToProject &lt;http://rdfh.ch/projects/77275339&gt; ;\n              knora-base:hasPermissions \"V knora-admin:KnownUser,knora-admin:UnknownUser|M knora-admin:ProjectMember\"  ;\n              knora-base:valueTimestamp ?currentTime .\n\n    ?resource ?property ?newValue .\n} WHERE {\n    BIND(IRI(\"http://rdfh.ch/c5058f3a\") as ?resource)\n    BIND(IRI(\"http://rdfh.ch/c5058f3a/values/testComment001\") AS ?currentValue)\n    BIND(IRI(\"http://rdfh.ch/c5058f3a/values/testComment002\") AS ?newValue)\n    BIND(IRI(\"http://www.knora.org/ontology/knora-base#TextValue\") AS ?valueType)\n    BIND(NOW() AS ?currentTime)\n\n    ?resource ?property ?currentValue .\n    ?property knora-base:objectClassConstraint ?valueType .\n}\n</code></pre> <p>The update request must contain the IRI of the most recent version of the value (<code>http://rdfh.ch/c5058f3a/values/c3295339</code>). If this is not in fact the most recent version (because someone else has done an update), this operation will do nothing (because the <code>WHERE</code> clause will return no rows). To find out whether the update succeeded, the application will then need to do a SELECT query using the query in Finding a value IRI in a value's version history. In the case of concurrent updates, there are two possibilities:</p> <ol> <li>Users A and B are looking at version 1. User A submits an update and    it succeeds, creating version 2, which user A verifies using a    SELECT. User B then submits an update to version 1 but it fails,    because version 1 is no longer the latest version. User B's SELECT    will find that user B's new value IRI is absent from the value's    version history.</li> <li>Users A and B are looking at version 1. User A submits an update and    it succeeds, creating version 2. Before User A has time to do a    SELECT, user B reads the new value and updates it again. Both users    then do a SELECT, and find that both their new value IRIs are    present in the value's version history.</li> </ol>"},{"location":"DSP-API/05-internals/design/principles/triplestore-updates/#getting-all-versions-of-a-value","title":"Getting all versions of a value","text":"<pre><code>prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;\nprefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;\nprefix knora-base: &lt;http://www.knora.org/ontology/knora-base#&gt;\n\nSELECT ?value ?valueTimestamp ?previousValue\nWHERE {\n    BIND(IRI(\"http://rdfh.ch/c5058f3a\") as ?resource)\n    BIND(IRI(\"http://www.knora.org/ontology/0803/incunabula#book_comment\") as ?property)\n    BIND(IRI(\"http://rdfh.ch/c5058f3a/values/testComment002\") AS ?currentValue)\n\n    ?resource ?property ?currentValue .\n    ?currentValue knora-base:previousValue* ?value .\n\n    OPTIONAL {\n        ?value knora-base:valueTimestamp ?valueTimestamp .\n    }\n\n    OPTIONAL {\n        ?value knora-base:previousValue ?previousValue .\n    }\n}\n</code></pre> <p>This assumes that we know the current version of the value. If the version we have is not actually the current version, this query will return no rows.</p>"},{"location":"DSP-API/05-internals/development/building-and-running/","title":"Building and Running","text":""},{"location":"DSP-API/05-internals/development/building-and-running/#setting-up-docker","title":"Setting up Docker","text":"<ol> <li>Install Docker</li> <li>Go to Docker preferences and increase the memory allocation.        The stack's memory usage is limited to ~20GB, though it should only use that much during heavy workloads. You should    be good to go in any case if you allocate 22GB or more.</li> </ol>"},{"location":"DSP-API/05-internals/development/building-and-running/#running-the-stack","title":"Running the stack","text":"<p>With Docker installed and configured,</p> <ol> <li>Run the following:</li> </ol> <pre><code>make init-db-test\n</code></pre> <p>to initialize Fuseki's dsp-repo dataset with loading some test data into the triplestore </p> <ol> <li>Start the entire knora-stack (fuseki (db), sipi, api, salsah1) with the following command:</li> </ol> <pre><code>make stack-up\n</code></pre> <p>Note: To delete the existing containers and for a clean start, before creating the knora-test repository explained in the first step above, run the following:</p> <pre><code>make stack-down-delete-volumes\n</code></pre> <p>This stops the knora-stack and deletes any created volumes (deletes the database!).</p> <p>To only shut down the Knora-Stack without deleting the containers:</p> <pre><code>make stack-down\n</code></pre> <p>To restart the knora-api use the following command:</p> <pre><code>make stack-restart-api\n</code></pre> <p>If a change is made to knora-api code, only its image needs to be rebuilt. In that case, use</p> <pre><code>make stack-up-fast\n</code></pre> <p>which starts the knora-stack by skipping rebuilding most of the images (only api image is rebuilt).</p> <p>To work on Metadata, use</p> <pre><code>make stack-up-with-metadata\n</code></pre> <p>which will put three example metadata sets to the projects <code>anything</code>, <code>images</code> and <code>dokubib</code>. This data can then be consumed from <code>localhost:3333/v2/metadata/http%3A%2F%2Frdfh.ch%2Fprojects%2F0001</code>, <code>localhost:3333/v2/metadata/http%3A%2F%2Frdfh.ch%2Fprojects%2F00FF</code> and <code>localhost:3333/v2/metadata/http%3A%2F%2Frdfh.ch%2Fprojects%2F0804</code>.</p>"},{"location":"DSP-API/05-internals/development/building-and-running/#managing-containers-in-docker-dashboard","title":"Managing Containers in Docker Dashboard","text":"<p>The Docker Desktop is installed on your computer during the installation of docker, it enables easy management of docker containers and access to Docker Hub. To manage your docker containers, docker desktop provides a dashbord.</p> <p></p> <p>In docker dashboard, you can see all the running containers, stop, start, restart, or completely delete them. For example, when you start the knora-stack as explained above, in the docker dashboard you will see following:</p> <p></p>"},{"location":"DSP-API/05-internals/development/building-and-running/#access-the-logs","title":"Access the logs","text":"<p>To read information logged out of any container (db, api, etc.), click on the container in the dashboard and choose <code>logs</code>. The example, below shows the logs of the database (db) container that includes the last SPARQL query sent to the triplestore.</p> <p></p> <p>Note that, you can also print out the log information directly from the command line. For example, the same logs of the database container can be printed out using the following command:</p> <pre><code>make stack-logs-db\n</code></pre> <p>Similarly, the logs of the other containers can be printed out by running make with <code>stack-logs-api</code> or <code>stack-logs-sipi</code>. These commands print out and follow the logs, to only print the logs out without following, use <code>-no-follow</code> version of the commands for example:</p> <pre><code>make stack-logs-db-no-follow\n</code></pre> <p>Lastly, to print out the entire logs of the running knora-stack, use</p> <pre><code>make stack-logs\n</code></pre> <p>With the Docker plugin installed, you can attach a terminal to the docker container within VS Code. This will stream the docker logs to the terminal window of the editor.</p> <p></p> <p>The docker plugin also allows for a number of other useful features, like inspecting the container's file system or attaching a shell to the container.</p>"},{"location":"DSP-API/05-internals/development/building-and-running/#running-the-automated-tests","title":"Running the automated tests","text":"<p>To run all test targets, use the following in the command line:</p> <pre><code>make test-all\n</code></pre> <p>To run a single test from the command line, for example <code>SearchV2R2RSpec</code>, run the following:</p> <pre><code>sbt \" webapi / testOnly *SearchV2R2RSpec* \"\n</code></pre> <p>Note: to run tests, the api container must be stopped first!</p>"},{"location":"DSP-API/05-internals/development/building-and-running/#build-and-publish-documentation","title":"Build and Publish Documentation","text":"<p>First, you need to install the requirements through:</p> <pre><code>make docs-install-requirements\n</code></pre> <p>Then, to build docs into the local <code>site</code> folder, run the following command:</p> <pre><code>make docs-build\n</code></pre> <p>At this point, you can serve the docs to view them locally using</p> <pre><code>make docs-serve\n</code></pre> <p>Lastly, to build and publish docs to Github Pages, use</p> <pre><code>make docs-publish\n</code></pre>"},{"location":"DSP-API/05-internals/development/building-and-running/#build-and-publish-docker-images","title":"Build and Publish Docker Images","text":"<p>To build and publish all Docker images locally</p> <pre><code>make docker-build\n</code></pre> <p>To publish all Docker images to Dockerhub</p> <pre><code>make docker-publish\n</code></pre>"},{"location":"DSP-API/05-internals/development/building-and-running/#continuous-integration","title":"Continuous Integration","text":"<p>For continuous integration testing, we use Github CI Actions. Every commit pushed to the git repository or every pull request, triggers the build. Additionally, in Github there is a small checkmark beside every commit, signaling the status of the build (successful, unsuccessful, ongoing).</p> <p>The build that is executed on Github CI Actions is defined in the <code>.github/workflows/*.yml</code> files.</p>"},{"location":"DSP-API/05-internals/development/building-and-running/#webapi-server-startup-flags","title":"Webapi Server Startup-Flags","text":"<p>The Webapi-Server can be started with a number of flags.</p>"},{"location":"DSP-API/05-internals/development/building-and-running/#loaddemodata-flag","title":"<code>loadDemoData</code> - Flag","text":"<p>When the webapi-server is started with the <code>loadDemoData</code> flag, then at startup, the data which is configured in <code>application.conf</code> under the <code>app.triplestore.rdf-data</code> key is loaded into the triplestore, and any data in the triplestore is removed beforehand.</p>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/","title":"Docker Cheat Sheet","text":"<p>A complete cheat sheet can be found on GitHub.</p>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/#lifecycle","title":"Lifecycle","text":"<ul> <li>docker create   creates a container but does not start it.</li> <li>docker run   creates and starts a container in one operation.</li> <li>docker rename   allows the container to be renamed.</li> <li>docker rm   deletes a container.</li> <li>docker update   updates a container's resource limits.</li> </ul> <p>If you want a transient container, <code>docker run --rm</code> will remove the container after it stops.</p> <p>If you want to map a directory on the host to a docker container, <code>docker run -v $HOSTDIR:$DOCKERDIR</code>.</p>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/#starting-and-stopping","title":"Starting and Stopping","text":"<ul> <li>docker start   starts a container so it is running.</li> <li>docker stop stops a   running container.</li> <li>docker restart   stops and starts a container.</li> <li>docker pause   pauses a running container, \"freezing\" it in place.</li> <li>docker attach   will connect to a running container.</li> </ul>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/#info","title":"Info","text":"<ul> <li>docker ps   shows running containers.</li> <li>docker logs gets   logs from container. (You can use a custom log driver, but logs is   only available for json-file and journald in 1.10)</li> <li>docker inspect   looks at all the info on a container (including IP address).</li> <li>docker events   gets events from container.</li> <li>docker port shows   public facing port of container.</li> <li>docker top   shows running processes in container.</li> <li>docker stats shows   containers' resource usage statistics.</li> <li>docker diff shows   changed files in the container's FS.</li> </ul> <p><code>docker ps -a</code> shows running and stopped containers.</p> <p><code>docker stats --all</code> shows a running list of containers.</p>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/#executing-commands","title":"Executing Commands","text":"<ul> <li>docker exec to   execute a command in container.</li> </ul> <p>To enter a running container, attach a new shell process to a running container called foo, use: <code>docker exec -it foo /bin/bash</code>.</p>"},{"location":"DSP-API/05-internals/development/docker-cheat-sheet/#images","title":"Images","text":"<ul> <li>docker images shows all images.</li> <li>docker build creates image from Dockerfile.</li> </ul>"},{"location":"DSP-API/05-internals/development/docker-compose/","title":"Starting the Knora Stack inside Docker Container","text":"<p>To run Knora locally, we provide <code>docker-compose.yml</code> which can be used to start Fuseki, Sipi, Webapi running each in its own Docker container.</p> <p>To run the whole stack:</p> <pre><code>make stack-up\n</code></pre> <p>For additional information please see the Docker Compose documentation</p>"},{"location":"DSP-API/05-internals/development/overview/","title":"Overview","text":"<p>Developing for DSP-API requires a complete local installation of Knora. The different parts are:</p> <ol> <li>The cloned DSP-API Github    repository</li> <li>Fuseki - supplied triplestore in the DSP-API Github repository.</li> <li>Sipi by building from     source or using the docker     image</li> </ol>"},{"location":"DSP-API/05-internals/development/overview/#knora-github-repository","title":"Knora Github Repository","text":"<pre><code>git clone https://github.com/dasch-swiss/dsp-api\n</code></pre>"},{"location":"DSP-API/05-internals/development/overview/#triplestore","title":"Triplestore","text":"<p>A number of triplestore implementations are available, including free software as well as proprietary options. DSP-API is designed to work with any standards-compliant triplestore. It is primarily tested with Apache Jena Fuseki.</p>"},{"location":"DSP-API/05-internals/development/overview/#sipi","title":"Sipi","text":""},{"location":"DSP-API/05-internals/development/overview/#build-sipi-docker-image","title":"Build Sipi Docker Image","text":"<p>The Sipi docker image needs to be build by hand, as it requires the Kakadu distribution.</p> <p>To build the image, and push it to the docker hub, follow the following steps:</p> <pre><code>$ git clone https://github.com/dhlab-basel/docker-sipi\n(copy the Kakadu distribution ``v7_8-01382N.zip`` to the ``docker-sipi`` directory)\n$ docker build -t daschswiss/sipi\n$ docker run --name sipi --rm -it -p 1024:1024 daschswiss/sipi\n(Ctrl-c out of terminal will stop and delete container)\n$ docker push daschswiss/sipi\n</code></pre> <p>Pushing the image to the docker hub requires prior authentication with <code>$ docker login</code>. The user needs to be registered on <code>hub.docker.com</code>. Also, the user needs to be allowed to push to the <code>dblabbasel</code> organisation.</p>"},{"location":"DSP-API/05-internals/development/overview/#running-sipi","title":"Running Sipi","text":"<p>To use the docker image stored locally or on the docker hub repository type:</p> <pre><code>docker run --name sipi -d -p 1024:1024 daschswiss/sipi\n</code></pre> <p>This will create and start a docker container with the <code>daschswiss/sipi</code> image in the background. The default behaviour is to start Sipi by calling the following command:</p> <pre><code>/sipi/local/bin/sipi -config /sipi/config/sipi.test-config.lua\n</code></pre> <p>To override this default behaviour, start the container by supplying another config file:</p> <pre><code>docker run --name sipi \\\n             -d \\\n             -p 1024:1024 \\\n             daschswiss/sipi \\\n             /sipi/local/bin/sipi -config /sipi/config/sipi.config.lua\n</code></pre> <p>You can also mount a directory (the local directory in this example), and use a config file that is outside of the docker container:</p> <pre><code>docker run --name sipi \\\n             -d \\\n             -p 1024:1024 \\\n             -v $PWD:/localdir \\\n             daschswiss/sipi \\\n             /sipi/local/bin/sipi -config /localdir/sipi.test-config.lua\n</code></pre>"},{"location":"DSP-API/05-internals/development/testing/","title":"Testing","text":""},{"location":"DSP-API/05-internals/development/testing/#how-to-write-and-run-unit-tests","title":"How to Write and Run Unit Tests","text":"<p>A test is not a unit test if:</p> <ul> <li>It talks to the database</li> <li>It communicates across the network</li> <li>It touches the file system</li> <li>It can\u2019t run at the same time as any of your other unit tests</li> <li>You have to do special things to your environment (such as editing config files) to run it</li> </ul> <p>Unit tests live in the <code>src/test</code> folder of our sbt projects.</p> <p>Run all unit tests from terminal:</p> <pre><code>sbt test\n</code></pre>"},{"location":"DSP-API/05-internals/development/testing/#how-to-write-and-run-integration-tests","title":"How to Write and Run Integration Tests","text":"<p>Mostly you should consider writing unit tests.  These can be executed fast and help developers more in their daily work.</p> <p>You might need to create an integration test because:</p> <ul> <li>The test needs to talk to a database</li> <li>It requires network</li> <li>It is slow and cannot run in parallel with other tests</li> <li>You have to do special things to the environment in order to run it</li> </ul> <p>In this case create it in the <code>modules/test-it/src/test/scala/</code> directory.</p> <p>Run all integration tests from the terminal.</p> <pre><code>make test-it\n</code></pre> <p>Run all end-to-end HTTP API tests from the terminal.</p> <pre><code>make test-e2e\n</code></pre>"},{"location":"DSP-API/05-internals/development/testing/#sipi-image-versioning","title":"Sipi Image Versioning","text":"<p>Integration tests use different Sipi image versions based on environment:</p> <ul> <li>Local development: Uses <code>daschswiss/knora-sipi:latest</code> (default)</li> <li>CI environment: Uses exact git version (e.g., <code>v31.20.0-6-gfa52f5f</code>)</li> </ul> <p>You can override this behavior with environment variables:</p> <ul> <li><code>SIPI_VERSION=&lt;version&gt;</code> - Use specific version</li> <li><code>SIPI_USE_EXACT_VERSION=true</code> - Force exact git version locally</li> </ul> <p>If the required image doesn't exist locally, build it with:</p> <pre><code>make docker-build-sipi-image\n</code></pre>"},{"location":"DSP-API/05-internals/development/testing/#debugging","title":"Debugging","text":"<p>You can debug unit tests directly in your IDE. </p> <p>For debugging integration tests locally with <code>sbt</code> or your IDE, tests will use the <code>latest</code> Sipi image by default. If you need a specific version, use the environment variables described above.</p>"},{"location":"DSP-API/05-internals/development/third-party/","title":"Third-Party Dependencies","text":"<p>Third party libraries are managed by SBT.</p>"},{"location":"DSP-API/05-internals/development/third-party/#defining-dependencies-in-dependenciesscala","title":"Defining Dependencies in <code>Dependencies.scala</code>","text":"<p>Within the <code>build.sbt</code> file, the <code>Dependencies</code> package is referenced, which is located in <code>project/Dependencies.scala</code>. All third party dependencies need to be declared there.</p>"},{"location":"DSP-API/05-internals/development/third-party/#referencing-a-third-party-library","title":"Referencing a third party library","text":"<p>There is an object <code>Dependencies</code> where each library should be declared in a <code>val</code>.</p> <pre><code>val akkaHttpCors = \"ch.megard\" %% \"pekko-http-cors\" % \"1.0.0\"\n</code></pre> <p>The first string corresponds to the group/organization in the library's maven artefact, the second string corresponds to the artefact ID and the third string defines the version.</p> <p>The strings are combined with <code>%</code> or <code>%%</code> operators, the latter fixing the dependency to the specified scala-version.</p> <p>It is also possible to use variables in these definitions, e.g. if multiple dependencies share a version number:</p> <pre><code>val ZioVersion = \"2.0.0-RC2\"\nval zio = \"dev.zio\" %% \"zio\" % ZioVersion\nval zioTest = \"dev.zio\" %% \"zio-test\" % ZioVersion\n</code></pre>"},{"location":"DSP-API/05-internals/development/third-party/#assigning-the-dependencies-to-a-specific-subproject","title":"Assigning the dependencies to a specific subproject","text":"<p>For each SBT project, there is one <code>Seq</code> in the <code>Dependencies</code> object. In order to make use of the declared dependencies, they must be referred to in the <code>Seq</code> of the respective subproject.</p> <pre><code>val webapiLibraryDependencies = Seq(\n    akkaActor,\n    akkaHttp,\n    akkaSlf4j % Runtime,\n    akkaHttpTestkit % Test,\n    ...\n)\n</code></pre> <p>By default, the dependencies will be scoped to compile time. But it's possible to override this to <code>Runtime</code> or <code>Test</code>.</p>"},{"location":"DSP-API/05-internals/development/third-party/#docker-image-versions","title":"Docker Image Versions","text":"<p>The required Docker image versions of <code>Sipi</code> and <code>Fuseki</code> are also defined in the <code>Dependencies.scala</code> file.</p>"},{"location":"DSP-API/05-internals/development/updating-repositories/","title":"Updating Repositories","text":""},{"location":"DSP-API/05-internals/development/updating-repositories/#requirements","title":"Requirements","text":"<ul> <li> <p>When a new version of Knora requires an existing repository to be updated,   do this automatically when Knora starts, if possible.</p> </li> <li> <p>Make the update process as fast as possible, with some indication of progress   as it runs.</p> </li> </ul>"},{"location":"DSP-API/05-internals/development/updating-repositories/#design","title":"Design","text":"<p>As explained in Knora Ontology Versions, the <code>knora-base</code> ontology contains a version string to ensure compatibility between a repository and a given version of Knora. The same version string is therefore hard-coded in the Knora source code, in the string constant <code>org.knora.webapi.KnoraBaseVersion</code>. For new pull requests, the format of this string is <code>knora-base vN</code>, where <code>N</code> is an integer that is incremented for each version.</p> <p>During Knora's startup process, <code>ApplicationActor</code> sends an <code>UpdateRepositoryRequest</code> message to the <code>StoreManager</code>, which forwards it to <code>TriplestoreManager</code>, which delegates it to <code>org.knora.webapi.store.triplestore.upgrade.RepositoryUpdater</code>.</p> <p><code>RepositoryUpdater</code> does the following procedure:</p> <ol> <li> <p>Check the <code>knora-base</code> version string in the repository.</p> </li> <li> <p>Consult <code>org.knora.webapi.store.triplestore.upgrade.RepositoryUpdatePlan</code> to see which    transformations are needed.</p> </li> <li> <p>Download the entire repository from the triplestore into an N-Quads file.</p> </li> <li> <p>Read the N-Quads file into an <code>RdfModel</code>.</p> </li> <li> <p>Update the <code>RdfModel</code> by running the necessary transformations, and replacing the    built-in DSP ontologies with the current ones.</p> </li> <li> <p>Save the <code>RdfModel</code> to a new N-Quads file.</p> </li> <li> <p>Empty the repository in the triplestore.</p> </li> <li> <p>Upload the transformed repository file to the triplestore.</p> </li> </ol> <p>To update the <code>RdfModel</code>, <code>RepositoryUpdater</code> runs a sequence of upgrade plugins, each of which is a class in <code>org.knora.webapi.store.triplestore.upgrade.plugins</code> and is registered in <code>RepositoryUpdatePlan</code>.</p>"},{"location":"DSP-API/05-internals/development/updating-repositories/#design-rationale","title":"Design Rationale","text":"<p>We tried and rejected several other designs:</p> <ul> <li> <p>Running SPARQL updates in the triplestore: too slow, and no way to report   progress during the update.</p> </li> <li> <p>Downloading the repository and transforming it in Python using   rdflib: too slow.</p> </li> <li> <p>Downloading the repository and transforming it in C++ using   Redland: also too slow.</p> </li> </ul> <p>The Scala implementation is the fastest by far.</p> <p>The whole repository is uploaded in a single transaction, rather than uploading one named graph at a time, because GraphDB's consistency checker can enforce dependencies between named graphs.</p>"},{"location":"DSP-API/05-internals/development/updating-repositories/#adding-an-upgrade-plugin","title":"Adding an Upgrade Plugin","text":"<p>Each time a pull request introduces changes that are not compatible with existing data, the following must happen:</p> <ul> <li> <p>The <code>knora-base</code> version number must be incremented in <code>knora-base.ttl</code> and   in the string constant <code>org.knora.webapi.KnoraBaseVersion</code>.</p> </li> <li> <p>A plugin must be added in the package <code>org.knora.webapi.store.triplestore.upgrade.plugins</code>,   to transform existing repositories so that they are compatible with the code changes   introduced in the pull request. Each new plugin must be registered   by adding it to the sequence returned by <code>RepositoryUpdatePlan.makePluginsForVersions</code>.</p> </li> </ul> <p>The order of version numbers (and the plugins) must correspond to the order in which the pull requests are merged.</p> <p>An upgrade plugin is a Scala class that extends <code>UpgradePlugin</code>. The name of the plugin class should refer to the pull request that made the transformation necessary, using the format <code>UpgradePluginPRNNNN</code>, where <code>NNNN</code> is the number of the pull request.</p> <p>A plugin's <code>transform</code> method takes an <code>RdfModel</code> (a mutable object representing the repository) and modifies it as needed.</p> <p>Before transforming the data, a plugin can check whether a required manual transformation has been carried out. If the requirement is not met, the plugin can throw <code>InconsistentRepositoryDataException</code> to abort the upgrade process.</p>"},{"location":"DSP-API/05-internals/development/updating-repositories/#testing-update-plugins","title":"Testing Update Plugins","text":"<p>Each plugin should have a unit test that extends <code>UpgradePluginSpec</code>. A typical test loads a file containing RDF test data into a <code>RdfModel</code>, runs the plugin, makes an <code>RdfRepository</code> containing the transformed <code>RdfModel</code>, and uses SPARQL to check the result.</p>"},{"location":"DSP-API/05-internals/development/vscode-config/","title":"Setup Visual Studio Code for development of DSP-API","text":"<p>To have full functionality, the Scala Metals plugin should be installed.</p> <p>Additionally, a number of plugins can be installed for convenience, but are not required.  Those include but are by no means limited to:</p> <ul> <li>Docker - to attach to running docker containers</li> <li>Stardog RDF grammar - TTL syntax highlighting</li> <li>Lua</li> <li>REST client</li> <li>...</li> </ul>"},{"location":"DSP-API/05-internals/development/vscode-config/#formatter","title":"Formatter","text":"<p>As a formatter, we use Scalafmt. Metals automatically recognizes the formatting configuration in the <code>.scalafmt.conf</code> file in the root directory. VSCode should be configured so that it austomatically formats (e.g. on file saved).</p>"},{"location":"DSP-API/05-internals/development/vscode-config/#running-tests","title":"Running Tests","text":"<p>The tests can be run through make commands or through SBT. The most convenient way to run the tests is through VSCode. Metals recognizes scalatest suits and lets you run them in the text explorer:</p> <p></p> <p>Or with the setting <code>\"metals.testUserInterface\": \"Code Lenses\"</code> directly in the text:</p> <p></p>"},{"location":"DSP-API/05-internals/development/vscode-config/#debugger","title":"Debugger","text":"<p>It is currently not possible to start the stack in debug mode.</p> <p>Tests can be run in debug mode by running them as described above but choosing <code>debug test</code> instead of <code>test</code>.</p>"},{"location":"DSP-API/06-sipi/","title":"The Sipi Media Server","text":"<p>Sipi is a high-performance media server written in C++, for serving and converting binary media files such as images and video. Sipi can efficiently convert between many different formats on demand, preserving embedded metadata, and implements the International Image Interoperability Framework (IIIF). DSP-API is designed to use Sipi for converting and serving media files.</p> <ul> <li>Interaction Between Sipi and DSP-API</li> </ul>"},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/","title":"Interaction Between Sipi and DSP-API","text":""},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/#general-remarks","title":"General Remarks","text":"<p>DSP-API and Sipi (Simple Image Presentation Interface) are two complementary software projects. Whereas DSP-API deals with data that is written to and read from a triplestore (metadata and annotations), Sipi takes care of storing, converting and serving image files as well as other types of files such as audio, video, or documents (binary files it just stores and serves).</p> <p>DSP-API and Sipi stick to a clear division of responsibility regarding files: DSP-API knows about the names of files that are attached to resources as well as some metadata and is capable of creating the URLs for the client to request them from Sipi, but the whole handling of files (storing, naming, organization of the internal directory structure, format conversions, and serving) is taken care of by Sipi.</p>"},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/#adding-files-to-dsp","title":"Adding Files to DSP","text":"<p>A file is first uploaded to Sipi, then its metadata is submitted to DSP. The implementation of this procedure is described in DSP-API and Sipi. Instructions for the client are given in Creating File Values.</p>"},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/#retrieving-files-from-sipi","title":"Retrieving Files from Sipi","text":""},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/#file-urls-in-api-v2","title":"File URLs in API v2","text":"<p>In DSP-API v2, image file URLs are provided in IIIF format. In the simple ontology schema, a file value is simply a IIIF URL that can be used to retrieve the file from Sipi. In the complex schema, it is a <code>StillImageFileValue</code> with additional properties that the client can use to construct different IIIF URLs, e.g. at different resolutions. See the <code>knora-api</code> ontology for details.</p>"},{"location":"DSP-API/06-sipi/sipi-and-dsp-api/#authentication-of-users-with-sipi","title":"Authentication of Users with Sipi","text":"<p>File access is restricted to users who have the permission to view the resource that the file is attached to. In order to check whether a user has the permission to view a resource, Sipi needs to know the user's identity. The identity is provided by DSP-API in the form of a JWT token. The token must be provided in the <code>Authorization</code> header of the request as a <code>Bearer</code> type token.</p> <p>Any other method of authentication is deprecated.</p>"},{"location":"DSP-API/07-lucene/lucene-query-parser-syntax/","title":"Lucene","text":"<p>The Lucene full-text index provided by the triplestore is used to perform full-text searches in DSP.</p>"},{"location":"DSP-API/07-lucene/lucene-query-parser-syntax/#lucene-query-parser-syntax","title":"Lucene Query Parser Syntax","text":"<p>Full-text searches in DSP are based on Lucene.  Therefore, full-text searches support the  Lucene Query Parser Syntax.</p> <p>A full-text search consists of a single word in the simplest case, but could also be composed of several words combined with  Boolean operators. By default, Lucene combines two or more terms separated by space with a logical OR.</p> <p>For examples, see  Lucene Query Parser Syntax.</p>"},{"location":"DSP-API/08-faq/","title":"Frequently Asked Questions","text":""},{"location":"DSP-API/08-faq/#file-formats","title":"File Formats","text":""},{"location":"DSP-API/08-faq/#what-file-formats-does-knora-store","title":"What file formats does Knora store?","text":"<p>See File Formats in Knora.</p>"},{"location":"DSP-API/08-faq/#does-knora-store-xml-files","title":"Does Knora store XML files?","text":"<p>XML files do not lend themselves to searching and linking. Knora's RDF storage is better suited to its goal of facilitating data reuse.</p> <p>If your XML files represent text with markup (e.g. TEI/XML), the recommended approach is to allow Knora to store it as Standoff/RDF. This will allow both text and markup to be searched using Gravsearch. Knora can also regenerate, at any time, an XML document that is equivalent to the original one.</p> <p>If you have XML that simply represents structured data (rather than text documents), we recommend converting it to Knora resources, which are stored as RDF.</p>"},{"location":"DSP-API/08-faq/#triplestores","title":"Triplestores","text":""},{"location":"DSP-API/08-faq/#which-triplestores-can-be-used-with-dsp-api","title":"Which triplestores can be used with DSP-API?","text":"<p>DSP-API is tested with Apache Jena Fuseki.</p>"},{"location":"DSP-API/08-faq/#dsp-ontologies","title":"DSP Ontologies","text":""},{"location":"DSP-API/08-faq/#can-a-project-use-classes-or-properties-defined-in-another-projects-ontology","title":"Can a project use classes or properties defined in another project's ontology?","text":"<p>DSP-API does not allow this to be done with project-specific ontologies. Each project must be free to change its own ontologies, but this is not possible if they have been used in ontologies or data created by other projects.</p> <p>However, an ontology can be defined as shared, meaning that it can be used by multiple projects, and that its creators promise not to change it in ways that could affect other ontologies or data that are based on it. See Shared Ontologies for details.</p>"},{"location":"DSP-API/08-faq/#why-doesnt-dsp-api-use-rdfsdomain-and-rdfsrange-for-consistency-checking","title":"Why doesn't DSP-API use <code>rdfs:domain</code> and <code>rdfs:range</code> for consistency checking?","text":"<p>DSP-API's consistency checking uses specific properties, which are called <code>knora-base:subjectClassConstraint</code> and <code>knora-base:objectClassConstraint</code> in the <code>knora-base</code> ontology, and <code>knora-api:subjectType</code> and <code>knora-api:objectType</code> in the <code>knora-api</code> ontologies. These properties express restrictions on the possible subjects and objects of a property. If a property's subject or object does not conform to the specified restrictions, DSP-API considers it an error.</p> <p>In contrast, the RDF Schema specification says that <code>rdfs:domain</code> and <code>rdfs:range</code> can be used to \"infer additional information\" about the subjects and objects of properties, rather than to enforce restrictions. This is, in fact, what RDFS reasoners do in practice. For example, consider these statements:</p> <pre><code>example:hasAuthor rdfs:range example:Person .\ndata:book1 example:hasAuthor data:oxygen .\n</code></pre> <p>To an RDFS reasoner, the first statement means: if something is used as the object of <code>example:hasAuthor</code>, we can infer that it's an <code>example:Person</code>.</p> <p>The second statement is a mistake; oxygen is not a person. But an RDFS reasoner would infer that <code>data:oxygen</code> is actually an <code>example:Person</code>, since it is used as the object of <code>example:hasAuthor</code>. Queries looking for persons would then get <code>data:oxygen</code> in their results, which would be incorrect.</p> <p>Therefore, <code>rdfs:domain</code> and <code>rdfs:range</code> are not suitable for consistency checking.</p> <p>DSP-API therefore uses its own properties, along with OWL cardinalities, which it interprets according to a \"closed world\" assumption. DSP-API performs its own consistency checks to enforce these restrictions. DSP-API repositories can also take advantage of triplestore-specific consistency checking mechanisms.</p> <p>The constraint language SHACL may someday provide a standard, triplestore-independent way to implement consistency checks, if the obstacles to its adoption can be overcome (see Diverging views of SHACL). For further discussion of these issues, see SHACL and OWL Compared.</p>"},{"location":"DSP-API/08-faq/#can-a-user-created-property-be-an-owltransitiveproperty","title":"Can a user-created property be an <code>owl:TransitiveProperty</code>?","text":"<p>No, because in DSP-API, a resource controls its properties. This basic assumption is what allows DSP-API to enforce permissions and transaction integrity. The concept of a transitive property would break this assumption.</p> <p>Consider a link property <code>hasLinkToFoo</code> that is defined as an <code>owl:TransitiveProperty</code>, and is used to link resource <code>Foo1</code> to resource <code>Foo2</code>:</p> <p></p> <p>Suppose that <code>Foo1</code> and <code>Foo2</code> are owned by different users, and that the owner of <code>Foo2</code> does not have permission to change <code>Foo1</code>. Now suppose that the owner of <code>Foo2</code> adds a link from <code>Foo2</code> to <code>Foo3</code>, using the transitive property:</p> <p></p> <p>Since the property is transitive, a link from <code>Foo1</code> to <code>Foo3</code> is now inferred. But this should not be allowed, because the owner of <code>Foo2</code> does not have permission to add a link to <code>Foo1</code>.</p> <p>Moreover, even if the owner of <code>Foo2</code> did have that permission, the inferred link would not have a <code>knora-base:LinkValue</code> (a reification), which every link must have. The <code>LinkValue</code> is what stores metadata about the creator of the link, its creation date, its permissions, and so on (see LinkValue).</p> <p>Finally, if an update to a resource could modify another resource, this would violate DSP-API's model of transaction integrity, in which each transaction can modify only one resource (see Application-level Locking). DSP-API would then be unable to ensure that concurrent transactions do not interfere with each other.</p>"},{"location":"DSP-API/09-release-notes/","title":"Changelog","text":""},{"location":"DSP-API/09-release-notes/#3410-2026-01-05","title":"34.1.0 (2026-01-05)","text":""},{"location":"DSP-API/09-release-notes/#maintenances","title":"Maintenances","text":"<ul> <li>Migrate getListNodeQuery, getListNodeWithChildren and getParentNodeQuery to rdf4j (DEV-5744) (#3914) (c2b7338)</li> <li>Migrate queries to rdf4j (DEV-5742) (#3912) (f83738f)</li> <li>Remove queries and replace with using service (#3916) (77e3876)</li> <li>Replace createAdministrativePermissions query with using service (DEV-5752) (#3915) (f2567e6)</li> <li>Tracing (DEV-5672) (#3907) (b686b38)</li> <li>Update license header to 2026 and update claude settings (#3918) (ae2dcb0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements","title":"Enhancements","text":"<ul> <li>Restore cookie authentication support (partial revert of PR #3869) (#3919) (dae6212)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3400-2025-12-15","title":"34.0.0 (2025-12-15)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>dsp-api: Remove /shacl endpoint (#3904)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenances_1","title":"Maintenances","text":"<ul> <li>Dependency updates (#3911) (6800921)</li> <li>Major dependency updates (#3910) (5162c43)</li> <li>Move more api components to correct api package (#3905) (10beee3)</li> <li>Move more components into slice.api subpackages (#3901) (9b7e653)</li> <li>Move some api related components to slice.api packages (#3900) (ec72c9e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_1","title":"Enhancements","text":"<ul> <li>dsp-api: Remove /shacl endpoint (#3904) (96cb6a3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>ExportService: more precision in handling columns with links and multiple values (#3906) (ee2e0f9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3320-2025-12-06","title":"33.2.0 (2025-12-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_2","title":"Maintenances","text":"<ul> <li>Migrate canDeleteList query to rdf4j (DEV-5651) (#3878) (0d55646)</li> <li>Migrate changeParentNode query to rdf4j (DEV-5661) (#3887) (8cd69f0)</li> <li>Migrate check ListNode exists queries to rdf4j (DEV-5666) (#3890) (5437868)</li> <li>Migrate DeletePropertyComment &amp; DeleteClassCommentsQuery queries to rdf4j (#3898) (a7bf62e)</li> <li>Migrate DeletePropertyQuery to rdf4j (#3897) (b97edd8)</li> <li>Migrate getAllOntologyMetadata to rdf4j (DEV-5668) (#3891) (aced342)</li> <li>Migrate GetOntologyGraphQuery and DeleteOntologyQuery to rdf4j (DEV-5673) (#3894) (bfb840c)</li> <li>Migrate isPropertyUsed query to rdf4j (DEV-5658) (#3886) (3039ed2)</li> <li>Migrate updateNodePosition query to rdf4j (DEV-5670) (#3893) (04d9ddb)</li> <li>Remove Sentry dependencies (DEV-5672) (#3895) (2dd5357)</li> <li>Turn root spans into normal spans (#3896) (4eeee75)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation","title":"Documentation","text":"<ul> <li>Add permissions of endpoints to OpenAPI Swagger docs (DEV-5663) (#3888) (3869cc9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_2","title":"Enhancements","text":"<ul> <li>ExportService: fixes to enable exporting EKWS resource classes (DEV-5650) (#3884) (d99289b)</li> <li>Propagate trace id from http request OpenTelemetry (DEV-5672) (#3889) (a7753d2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>CSV export skipping columns fix (DEV-5671) (#3899) (30fd3c8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3311-2025-12-01","title":"33.1.1 (2025-12-01)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li>Prevent an exception when no comment is given when creating a child node (#3882) (3c5df3b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3310-2025-12-01","title":"33.1.0 (2025-12-01)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_3","title":"Maintenances","text":"<ul> <li>Dependency updates (#3881) (7338aac)</li> <li>Minor dependency updates (#3880) (737faa1)</li> <li>Patch dependency updates (#3879) (b0f2104)</li> <li>Remove manual sparql encoding list properties (DEV-5645) (#3871) (63ca5bc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_3","title":"Enhancements","text":"<ul> <li>CSV export backend improvements (DEV-5630) (#3868) (c825f29)</li> <li>ExportService: load vocabularies (DEV-3630) (#3876) (126a181)</li> <li>Improve OpenAPI documentation and refine enum types v3 (#3875) (762ae7f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_3","title":"Bug Fixes","text":"<ul> <li>Allow to limit to class and project searchbylabel (DEV-5580) (#3877) (db3e78b)</li> <li>Do not die if ReadResourceV2 cannot be transformed to single Resource but fail with a RequestRejectedException (#3872) (eb4eb18)</li> <li>Remove custom permission logic in Sipi (DEV-5484) (#3874) (b173593)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3300-2025-11-21","title":"33.0.0 (2025-11-21)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_1","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>dsp-api: Remove support for cookie authentication (DEV-5601) (#3869)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenances_4","title":"Maintenances","text":"<ul> <li>Dependency updates (#3863) (6d4f0a7)</li> <li>dsp-api: Migrate change resource metadata query to rdf4j (#3860) (4a89cf6)</li> <li>dsp-api: Migrate changeClassLabelsOrComments.scala.txt to rdf4j (DEV-5613) (#3853) (4b2d00c)</li> <li>dsp-api: Migrate changeOntologyMetadata.scala.txt to rdf4j (#3855) (d1099f9)</li> <li>dsp-api: Migrate changePropertyLabelsOrComments.scala.txt to rdf4j (DEV-5614) (#3854) (1c2dd24)</li> <li>dsp-api: Migrate checkIriExists.scala.txt to rdf4j (DEV-5612) (#3852) (0205539)</li> <li>dsp-api: Split StringLiteralV2 into sealed trait with/without language (#3856) (2ac6efc)</li> <li>Extract ReadResources (DEV-5467) (#3845) (d9d5e94)</li> <li>Minor dependency updates (#3862) (a027898)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_1","title":"Documentation","text":"<ul> <li>make authorization descriptions more user-friendly (#3859) (803d5b3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_4","title":"Enhancements","text":"<ul> <li>dsp-api: Add GET /v3/:projectIri/resourcesPerOntology endpoint (DEV-5581) (#3844) (2726f23)</li> <li>dsp-api: Remove support for cookie authentication (DEV-5601) (#3869) (f8914fc)</li> <li>Replace representationClassIri with an enum and count only non deleted resources (DEV-5581) (#3850) (e0abdce)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_4","title":"Bug Fixes","text":"<ul> <li>ConstructResponseUtilV2: nestResources recursion limit + guarding detail (DEV-5619) (#3864) (4593ada)</li> <li>Do correct escaping in SPARQL query when creating a class to allow for hyphens in string literals (DEV-5579) (#3849) (1090597)</li> <li>Do correct escaping in SPARQL query when creating a property to allow for hyphens in string literals (DEV-5579) (#3846) (feb0ccd)</li> <li>Ensure the StringLiteralV2 JsonCodec de- and encodes without discriminator (DEV-5620) (#3866) (3d7a58a)</li> <li>Export resources, many changes (DEV-5467) (#3857) (3f74313)</li> <li>Remove more quoting for ValueAsString and TextValueHasLanguage (#3809) (2136faa)</li> <li>Temporarily fix compilation in IntelliJ by duplicating GoldenTest (#3847) (a54d23e)</li> <li>Updated CODEOWNERS (#3865) (42f8caf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3270-2025-11-06","title":"32.7.0 (2025-11-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_5","title":"Maintenances","text":"<ul> <li>Dependency updates (#3837) (d89cf2a)</li> <li>Minor dependency updates (#3836) (647d956)</li> <li>Move Pagination to org.knora.slice.api package (#3842) (f0e713f)</li> <li>Update sbt-scalafmt to 2.5.6 (#3840) (ad0cf5c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_2","title":"Documentation","text":"<ul> <li>Align username specification with code  (#3838) (8e0bac0)</li> <li>dsp-api: Add V3 basic ADR (#3841) (c2d6e61)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_5","title":"Enhancements","text":"<ul> <li>/v3/export/resources with CSV output (DEV-5467) (#3834) (c68cb83)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3260-2025-10-28","title":"32.6.0 (2025-10-28)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_6","title":"Enhancements","text":"<ul> <li>Add additional license statement (DEV-5544) (#3832) (c1cac07)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3250-2025-10-27","title":"32.5.0 (2025-10-27)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_6","title":"Maintenances","text":"<ul> <li>Add otel java agent and grafana pyroscope otel extension to the webapi docker image (#3827) (e90a62d)</li> <li>Improve error message when cardinality creation fails (#3829) (6e4047d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_7","title":"Enhancements","text":"<ul> <li>Middleware traceId annotation, dump gravsearch queries into a span (#3831) (62b3445)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3241-2025-10-16","title":"32.4.1 (2025-10-16)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_7","title":"Maintenances","text":"<ul> <li>Dependency updates (#3822) (03ed8cf)</li> <li>Dump all gravsearch queries (#3818) (e80eb58)</li> <li>Major dependency updates (#3821) (8600723)</li> <li>Minor dependency updates (#3820) (a04dc49)</li> <li>Patch dependency updates (#3819) (1eb663e)</li> <li>Slightly improve Gravsearch query traversal logic (#3815) (4886a5e)</li> <li>Use server endpoints for swagger UI and OpenAPI yaml (#3812) (322c125)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_3","title":"Documentation","text":"<ul> <li>Fix typo in OpenAPI specification (#3826) (326431c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_5","title":"Bug Fixes","text":"<ul> <li>Use correct version for OpenAPI yaml and Swagger UI (#3825) (0217ee4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests","title":"Tests","text":"<ul> <li>Possibly fix issues with hanging tests (#3824) (c7f8c92)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3240-2025-10-14","title":"32.4.0 (2025-10-14)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_8","title":"Maintenances","text":"<ul> <li>dsp-api: Replace Pekko HTTP server with zio-http (DEV-4870) (#3798) (63bc41a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_8","title":"Enhancements","text":"<ul> <li>Prepare v3 api base definitions in own package (#3813) (57ba713)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3233-2025-10-13","title":"32.3.3 (2025-10-13)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_9","title":"Maintenances","text":"<ul> <li>Remove docs generators for ingest and api (#3807) (6fc5d05)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_6","title":"Bug Fixes","text":"<ul> <li>Gravsearch limiting to project wrongly excludes knora-api entities (#3797) (92c565b)</li> <li>OpenAPI treat Email as string (DEV-5457) (#3808) (f7a573d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3232-2025-10-06","title":"32.3.2 (2025-10-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_10","title":"Maintenances","text":"<ul> <li>Dependency updates (#3806) (dc69f65)</li> <li>Major dependency updates (#3805) (86b9b47)</li> <li>Minor dependency updates (#3804) (a8d19d4)</li> <li>Patch dependency updates (#3803) (8bfb042)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_7","title":"Bug Fixes","text":"<ul> <li>Footnote contents get double encoded with SPARQL-safe encoding, but decoded only once (DEV-4880, DEV-4796, DEV-5274) (#3737) (a5820eb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_1","title":"Tests","text":"<ul> <li>dsp-api: Reuse test layers across all e2e and it tests (#3800) (a083591)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3231-2025-09-23","title":"32.3.1 (2025-09-23)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_11","title":"Maintenances","text":"<ul> <li>dsp-api: Align RestService method signature and simplify Handlers (#3793) (e3adf23)</li> <li>dsp-api: Align RestService method signature and simplify Handlers (pt.2) (#3796) (94a299a)</li> <li>Remove unnecessary requirements installation from gh action (#3794) (0be3061)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_4","title":"Documentation","text":"<ul> <li>Add ADR for RFC-018 (#3792) (c8ef244)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3230-2025-09-22","title":"32.3.0 (2025-09-22)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_12","title":"Maintenances","text":"<ul> <li>Align IriLocker.runWithIriLock method signatures (#3784) (eb10c45)</li> <li>dsp-api: Migrate CORSSupportE2ESpec to zio and cleanup (DEV-5309) (#3786) (0b7b658)</li> <li>dsp-api: Migrate OntologiesEndpointsE2ESpec to zio (DEV-5314) (#3782) (01ba167)</li> <li>dsp-api: Remove duplication for LanguageCode (#3780) (eda56ad)</li> <li>dsp-api: Remove scalaTest and unused pekko test kit Dependencies (#3790) (4dadcc2)</li> <li>dsp-api: Replace spray json with zio-json (DEV-5426) (#3787) (0c8512e)</li> <li>Migrate OntologyResponderV2Spec to zio (DEV-5313) (#3767) (da7d7fc)</li> <li>Remove dedicated zio-http dependency from Test and use tapir's version (#3788) (c84bfe6)</li> <li>Remove unused files (testkit main resources) (#3779) (81b6492)</li> <li>Replace scala logging with zio logging (#3789) (743edb0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_5","title":"Documentation","text":"<ul> <li>ingest: Remove leftovers of the mkdocs-rendered openapi docs of ingest (DEV-5417) (#3783) (845b3d6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_9","title":"Enhancements","text":"<ul> <li>dsp-api: Prevent cross project resource linking (DEV-5419) (#3781) (03f78ed)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_8","title":"Bug Fixes","text":"<ul> <li>dsp-api: Properly escape special characters for search by label Lucene query (DEV-5421) (#3785) (70364a7)</li> <li>Repair and extend just recipes for testing ingest and api (#3776) (952303e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3220-2025-09-15","title":"32.2.0 (2025-09-15)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_13","title":"Maintenances","text":"<ul> <li>Dependency updates (#3773) (d5c46f6)</li> <li>dsp-api: Migrate ValuesResponderV2Spec (DEV-5377) (#3762) (7ee4134)</li> <li>Migrate ResourcesResponderV2Spec (DEV-5308) (#3765) (3f5c5f0)</li> <li>Minor dependency updates (#3772) (860c2eb)</li> <li>Patch dependency updates (#3771) (56c608d)</li> <li>Remove debugging printlns from tests (bfa2f67)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_6","title":"Documentation","text":"<ul> <li>ingest: Fix openapi paths (#3769) (57d3d48)</li> <li>ingest: Remove the mkdocs-rendered openapi docs of ingest (use swagger page instead) (DEV-5417) (#3770) (8b6aaa4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_10","title":"Enhancements","text":"<ul> <li>Convert /v2/resources/candelete to GET (#3766) (8a0d798)</li> <li>Expose /v2/resources/candelete (DEV-5267) (#3758) (187d1be)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_9","title":"Bug Fixes","text":"<ul> <li>Send queries to Fuseki as form data not as URL parameters (#3768) (829d543)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3210-2025-09-02","title":"32.1.0 (2025-09-02)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_14","title":"Maintenances","text":"<ul> <li>Merge with dsp ingest (#3743) (d1dd094)</li> <li>Migrate ValuesRouteV2E2ESpec to zio (DEV-5377) (#3757) (4e1d3b7)</li> <li>Migrate ValuesRouteV2E2ESpec to zio pt. 2 (DEV-5312) (#3759) (72892cf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_11","title":"Enhancements","text":"<ul> <li>dsp-ingest: Remove keyframe extraction from moving images during ingest (DEV-5296) (#3761) (73f76e9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3200-2025-09-01","title":"32.0.0 (2025-09-01)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_2","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>Update Fuseki to 5.5.0-1 // Removes automatically creating Fuseki dataset during dsp-api startup (DEV-5298) (#3744)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenances_15","title":"Maintenances","text":"<ul> <li>Migrate GravsearchInspectorSpec to zio (DEV-5310) (#3754) (27c74e6)</li> <li>Migrate SearchResponderV2Spec from pekko/scalaTest to zio (DEV 5311) (#3751) (55626cd)</li> <li>Minor dependency updates (#3756) (87860ea)</li> <li>Patch dependency updates (#3755) (e283e78)</li> <li>Split SearchEndpointE2ESpec further (DEV-5299) (#3746) (0cc0a88)</li> <li>Split SearchEndpointsE2ESpec further (DEV-5299) (#3749) (bc63887)</li> <li>Update Fuseki to 5.5.0-1 // Removes automatically creating Fuseki dataset during dsp-api startup (DEV-5298) (#3744) (c75ed24)</li> <li>Update Sipi base image (DEV-5258) (#3747) (145c1b0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_10","title":"Bug Fixes","text":"<ul> <li>Fix double encoding of comments when creating a resource (DEV-5356) (#3753) (138c067)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31212-2025-08-25","title":"31.21.2 (2025-08-25)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_16","title":"Maintenances","text":"<ul> <li>Migrate ResourcesRouteV2E2ESpec to zio test (#3735) (a4e0772)</li> <li>Split ResourcesEndpointsE2ESpec, extract GET /v2/resources tests (#3739) (6550dc0)</li> <li>Split SearchEndpointE2ESpec (#3740) (18042a1)</li> <li>Split SearchEndpointE2ESpec further (#3742) (ce677f1)</li> <li>Split SearchEndpointsE2ESpec pt 2 (#3741) (df0db7f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_11","title":"Bug Fixes","text":"<ul> <li>Erase value from deleted resource (#3736) (6ea54ce)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31211-2025-08-18","title":"31.21.1 (2025-08-18)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_17","title":"Maintenances","text":"<ul> <li>Migrate CardinalitiesV2E2ESpec to zio-test (#3722) (4c7f685)</li> <li>Migrate instance checker spec to zio (#3724) (82b3eff)</li> <li>Migrate KnoraSipiIntegrationV2ITSpec to zio test (#3729) (c1309a2)</li> <li>Migrate OntologyFormatsE2ESpec to zio-test (#3723) (d609f67)</li> <li>Migrate StandoffEndpointsE2ESpec to zio-test (#3719) (ebce5ea)</li> <li>Migrate StandoffResponderV2Spec to zio-test (#3730) (a4e7cae)</li> <li>Minor dependency updates (#3728) (e1a7a55)</li> <li>Patch dependency updates (#3727) (a066724)</li> <li>Replace pekko http client with TestApiClient in ResourcesRouteV2E2ESpec (#3731) (dd0ecbd)</li> <li>Replace spray json with zio-json in ResourcesRouteV2E2ESpec (#3734) (8411587)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_12","title":"Bug Fixes","text":"<ul> <li>Let erase values, if minCardinality = 1 and it's only history (DEV-) (#3733) (562d637)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_2","title":"Tests","text":"<ul> <li>Remove spray json serialization test TriplestoreMessagesSpec (#3725) (b5aae91)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31210-2025-08-11","title":"31.21.0 (2025-08-11)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_18","title":"Maintenances","text":"<ul> <li>CI: Remove the 'on push' trigger (#3718) (6c11cb6)</li> <li>CI: Simplify build-and-test github action (#3716) (5bab5ad)</li> <li>Extract method for readability (#3713) (c4f1cbb)</li> <li>Git-ignore claud tmp files (#3701) (231dc6c)</li> <li>Improve logging so that DEBUG log level gets viable (#3705) (fa52f5f)</li> <li>Improve ZIO layer creation (#3702) (78fe523)</li> <li>Minor dependency updates (#3704) (3b90959)</li> <li>Patch dependency updates (#3703) (7d87d0f)</li> <li>Remove unused code and dependency (#3712) (80404b4)</li> <li>Separate e2e and it tests (#3715) (06205d2)</li> <li>Use latest tag for app in local development (#3698) (3b4c0f3)</li> <li>Use more reasonable log level (#3707) (fd53532)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_7","title":"Documentation","text":"<ul> <li>Add AGENTS.md (#3711) (36c2630)</li> <li>Document the new test modules structure (#3717) (65e9d20)</li> <li>Remove OpenAPI documentation from docs (#3709) (7286d22)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_12","title":"Enhancements","text":"<ul> <li>Sort annotations by label (DEV-5220) (#3708) (9b204d8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_13","title":"Bug Fixes","text":"<ul> <li>Erase a deleted resource (#3710) (8e3e888)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_3","title":"Tests","text":"<ul> <li>Change test setup to not require building Sipi first (#3706) (24b0713)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31200-2025-07-25","title":"31.20.0 (2025-07-25)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_19","title":"Maintenances","text":"<ul> <li>Dependency updates (#3692) (5ce86b1)</li> <li>Minor dependency updates (#3691) (a8e23d3)</li> <li>Patch dependency updates (#3690) (a71ed63)</li> <li>Update sipi to 3.16.1 (#3695) (66b2e05)</li> <li>Update sipi to 3.16.2 (#3697) (bd696a0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_13","title":"Enhancements","text":"<ul> <li>Optimise permission updates to avoid value version creation (#3694) (16b0fcb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31192-2025-07-11","title":"31.19.2 (2025-07-11)","text":""},{"location":"DSP-API/09-release-notes/#documentation_8","title":"Documentation","text":"<ul> <li>Clarify legal information cardinalities per file value (#3687) (d9faac9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_14","title":"Bug Fixes","text":"<ul> <li>Value creation fails if a link tag in standoff does not have a protocol (DEV-5142) (#3689) (7ba1ea9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31191-2025-07-04","title":"31.19.1 (2025-07-04)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_20","title":"Maintenances","text":"<ul> <li>Major dependency updates (#3670) (3b5ca22)</li> <li>Minor dependency updates (#3669) (4a33a35)</li> <li>Patch dependency updates (#3668) (131ff19)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_4","title":"Tests","text":"<ul> <li>Migrate AdminGroupsEndpointsE2ESpec from pekko/scalatest to TestApiClient/zio-test (#3665) (02b1ac9)</li> <li>Migrate AdminProjectsEndpointsE2ESpec from pekko/scalatest to TestApiClient/zio-test (#3663) (7ca2ef7)</li> <li>Migrate AdminUsersEndpointsE2ESpec to zio (#3662) (9bc4287)</li> <li>Migrate AssetPermissionsResponderSpec from scalaTest to zio-test (#3666) (fba3245)</li> <li>Migrate ConstructResponseUtilV2Spec to zio-test (#3685) (9f903dd)</li> <li>Migrate CreateListsEndpointsE2ESpec to zio-test/TestApiClient (#3676) (215445f)</li> <li>Migrate DeleteListsEndpointsE2ESpec to zio-test/TestApiClient (#3675) (f31e16d)</li> <li>Migrate Gravsearch*TransformerSpecs to zio-test (#3684) (91537d4)</li> <li>Migrate GroupRestServiceSpec from scalaTest to zio-test (#3671) (d772197)</li> <li>Migrate ListResponderE2ESpec to zio-test (#3678) (eeaede7)</li> <li>Migrate ListsEndpointsE2ESpec to zio-test/TestApiClient (#3674) (6b24aff)</li> <li>Migrate OntologyHelpersSpec to zio-test (#3680) (9ebcc95)</li> <li>Migrate PermissionRestServiceE2ESpec to zio-test (#3667) (6f4e6b2)</li> <li>Migrate ProjectRestServiceSpec to zio test (#3672) (2168d21)</li> <li>Migrate SparqlTransformerSpec to zio-test (#3683) (bf9a9bf)</li> <li>Migrate StandoffTagUtilV2Spec to zio-test (#3682) (04dc987)</li> <li>Migrate TriplestoreServiceLiveSpec to zio-test (#3681) (7b3fa8a)</li> <li>Migrate UpdateListEndpointsE2ESpec to zio-test/TestApiClient (#3677) (114ea75)</li> <li>Migrate UserRestServiceSpec to zio-test (#3673) (91cc8e6)</li> <li>Replace spray json with zio json and start using TestApiClient (#3686) (2b3868f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31190-2025-06-30","title":"31.19.0 (2025-06-30)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_21","title":"Maintenances","text":"<ul> <li>Inline ResourceUtilV2 trait (#3650) (0e58f0e)</li> <li>Merge resourceinfo package into resources package (#3651) (b24d769)</li> <li>Move InternalIri from resourceinfo.domain to common.domain (#3653) (45dafd4)</li> <li>Patch dependency updates (#3634) (f1baa79)</li> <li>Remove unused clean_temp_dir Sipi endpoint (DEV-5090) (#3659) (5f557d2)</li> <li>Update CLAUDE.md (#3654) (0b421d8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_14","title":"Enhancements","text":"<ul> <li>Add new mimetypes to configuration (DEV-5085) (#3655) (d46d861)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_15","title":"Bug Fixes","text":"<ul> <li>Resolve intermittent logger initialization timeout on startup (DEV-5093) (#3660) (ae807b1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_5","title":"Tests","text":"<ul> <li>Convert ScalaTest integration tests to ZIO Test (#3645) (47ad3dd)</li> <li>Migrate LoadOntologiesSpec from ScalaTest to ZIO Test (#3657) (c82036f)</li> <li>Migrate specs to zio-test (#3661) (e1c1351)</li> <li>Remove redundant ValuesV2R2RSpec test (#3656) (f835bcf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31180-2025-06-23","title":"31.18.0 (2025-06-23)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_22","title":"Maintenances","text":"<ul> <li>Remove feature switch ENABLE_FULL_LICENSE_CHECK (#3640) (68fd883)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_15","title":"Enhancements","text":"<ul> <li>Add get project license by iri endpoint (#3641) (3ef2767)</li> <li>Add HTML and epub to the documented list of supported file formats (DEV-5080) (#3649) (27205ec)</li> <li>Enable full license check on creating a FileValue (DEV-4956) (#3639) (c076819)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_16","title":"Bug Fixes","text":"<ul> <li>Correctly return deleted values and resources (DEV-4848) (#3643) (f3b57e5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_6","title":"Tests","text":"<ul> <li>Add simple e2e test for MetadataEndpoint (#3637) (c65ee52)</li> <li>Cleanup E2ESpec (#3642) (b1647c0)</li> <li>Replace appActor calls with direct service calls in test specs (#3648) (19f2eaf)</li> <li>Replace appActor calls with direct service calls in ValuesResponderV2Spec (#3647) (83bba69)</li> <li>Turn E2E specs into simple scala test (#3644) (ba1ca99)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31170-2025-06-16","title":"31.17.0 (2025-06-16)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_23","title":"Maintenances","text":"<ul> <li>Dependency updates (#3636) (1f6607d)</li> <li>Merge all base spec into E2ESpec (#3624) (bf402a7)</li> <li>Minor dependency updates (#3599) (443758f)</li> <li>Minor dependency updates (#3635) (6c2851c)</li> <li>Patch dependency updates (#3617) (7cd7bcd)</li> <li>Remove SliceModule trait (#3621) (031b094)</li> <li>Replace AppServer with database init ZIO workflow (#3623) (a7d7653)</li> <li>Update sttp client to 4.0.8 (#3630) (9801a60)</li> <li>Update zio from 2.1.17 to 2.1.19 (#3629) (110524e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_16","title":"Enhancements","text":"<ul> <li>Add environment to OpenTelemetry and improve setup (DEV-4994) (#3615) (a2d685f)</li> <li>Allow hard-deleting soft-deleted values (DEV-4701) (#3622) (97d4381)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_17","title":"Bug Fixes","text":"<ul> <li>Remove deprecation warnings, add back -Xfatal-warnings (#3619) (d40866f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_7","title":"Tests","text":"<ul> <li>Migrate AuthenticationEndpointsV2E2ESpec to zio test (#3631) (65d180a)</li> <li>Remove LayersTestMock (#3625) (1e2efab)</li> <li>Turn ListsMessagesADMSpec into simple scala test (#3628) (9cce043)</li> <li>Use api client in tests (#3633) (d5efa33)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31160-2025-06-02","title":"31.16.0 (2025-06-02)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_24","title":"Maintenances","text":"<ul> <li>Dependency updates (#3618) (edba976)</li> <li>Patch dependency updates (#3579) (72d99b1)</li> <li>Remove unused application.conf entries (#3614) (f05806c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_9","title":"Documentation","text":"<ul> <li>Add missing route for adding list child nodes to OpenAPI documentation (DEV-4975) (#3616) (eb3a76c)</li> <li>Fix some dead links in documentation (#3608) (af8015d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_17","title":"Enhancements","text":"<ul> <li>Add ark url with timestamp to resource metadata export (DEV-4950) (#3611) (8811856)</li> <li>Add default CopyrightHolder and Licenses to projects without (DEV-4957) (#3612) (ac0faff)</li> <li>Add default CopyrightHolders when creating a new project (DEV-4929) (#3604) (4b880d9)</li> <li>Add experimental resource metadata endpoint (#3605) (44e0c17)</li> <li>Allow public read access to project licenses (DEV-4913) (#3603) (5783409)</li> <li>Raise timeout for resource metadata query (DEV-4946) (#3610) (582c574)</li> <li>Support CSV, TSV and JSON and class filtering for metadata resources (DEV-4946) (#3609) (ba02a1c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#performance-improvements","title":"Performance Improvements","text":"<ul> <li>Add attributes to searchIncomingLinks span (#3613) (60d608d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_8","title":"Tests","text":"<ul> <li>Add e2e assertion for providing custom enabled licenses during project creation (#3607) (7b2477b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31150-2025-05-19","title":"31.15.0 (2025-05-19)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_25","title":"Maintenances","text":"<ul> <li>Dependency updates (#3600) (1d411c0)</li> <li>Remove pekko dependenices pt. 2 (DEV-4870) (#3591) (5f20ffb)</li> <li>Remove StringFormatter from TriplestoreServiceLive (#3595) (fbf4c9a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_18","title":"Enhancements","text":"<ul> <li>Value Erasing, except standoff with links (DEV-4701) (#3583) (92a0565)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_18","title":"Bug Fixes","text":"<ul> <li>Allow empty strings as results from the database (DEV-4887) (#3597) (8e0915f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_9","title":"Tests","text":"<ul> <li>Migrate Pekko R2R tests to E2E test and remove R2RSpec (#3602) (341c2cb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31140-2025-05-13","title":"31.14.0 (2025-05-13)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_26","title":"Maintenances","text":"<ul> <li>Clean up some Pekko usages (#3587) (653aebc)</li> <li>Combine PagedResponse schemas into a single given (#3590) (a63f2c3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_19","title":"Enhancements","text":"<ul> <li>Add dedicated endpoints for getting StillImageRepresentations (DEV-4836) (#3573) (d01ed62)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_19","title":"Bug Fixes","text":"<ul> <li>Do not allow empty comment when creating an ontology (DEV-4881) (#3593) (052b3f6)</li> <li>Do not allow empty comment when updating an ontology (DEV-4881) (#3594) (c9bac49)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31130-2025-05-12","title":"31.13.0 (2025-05-12)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_27","title":"Maintenances","text":"<ul> <li>Align dsp-app app version with prod (#3571) (69e10c9)</li> <li>Dependency updates (#3581) (eaf7e69)</li> <li>Minor dependency updates (#3580) (a40d68f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_10","title":"Documentation","text":"<ul> <li>Fix broken links in documentation (#3575) (cd23ebe)</li> <li>Update documentation for allowing duplicate Values (DEV-4861) (#3586) (8b234e2)</li> <li>Update documentations on licenses (#3589) (fd43bdc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_20","title":"Enhancements","text":"<ul> <li>Add allowing to enable licenses on projects (DEV-4851) (#3574) (07d5252)</li> <li>Add feature flag for full license check during asset creation (#3588) (be689bb)</li> <li>Allow duplicate Values (DEV-4861) (#3585) (7edb0d2)</li> <li>Migrate standoffmapping route to Tapir (DEV-4825) (#3584) (1b63885)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_20","title":"Bug Fixes","text":"<ul> <li>Align constraints for adding user to admin group for all service methods (#3570) (8033b03)</li> <li>Allow to delete or erase a kb:Resource only if no other non-deleted kb:Resource in the same project points to it (#3577) (5df7c10)</li> <li>Do not eagerly evaluate the filename when it is not needed when creating a FileValue (#3582) (c9a24ca)</li> <li>Do not remove values from other <code>kb:Resource</code>s when erasing another <code>kb:Resource</code> (#3578) (cc4f378)</li> <li>When an EditConflictException is returned it is rendered as 400 (#3576) (2db19df)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31120-2025-04-28","title":"31.12.0 (2025-04-28)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_28","title":"Maintenances","text":"<ul> <li>Enable telemetry on incoming links endpoint (DEV-4757) (#3554) (a7e089a)</li> <li>Minor dependency updates (#3562) (77fa860)</li> <li>Patch dependency updates (#3561) (c01e261)</li> <li>Update app version in docker-compose.yml (#3558) (633c952)</li> <li>Update app version to v11.29.2 in docker-compose.yml (#3560) (6ec5d24)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_21","title":"Enhancements","text":"<ul> <li>Add searchIncomingRegions endpoint (DEV-4824) (#3567) (1526725)</li> <li>Migrate GET v2/ontologies/canreplacecardinalities/:classIri to Tapir (#3563) (fdbdd43)</li> <li>Migrate more ontology api endpoinst to Tapir (DEV-4657) (#3565) (5d22488)</li> <li>Migrate ontology dereferencing to Tapir (DEV-4657) (#3566) (be70de6)</li> <li>Migrate some ontologies routes to Tapir, adds OpenAPI docs(DEV-4657) (#3564) (7176dcd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_21","title":"Bug Fixes","text":"<ul> <li>Remove password from user responses (DEV-4820) (#3568) (72e70e6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31110-2025-04-09","title":"31.11.0 (2025-04-09)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_29","title":"Maintenances","text":"<ul> <li>Patch dependency updates (#3552) (5399015)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_22","title":"Enhancements","text":"<ul> <li>Limit Gravsearch to a single project by query parameter (#3557) (2140a0e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_22","title":"Bug Fixes","text":"<ul> <li>Align erasing and deleting Resources, prevent deletion of a resource if it is in use (DEV-4767) (#3556) (935a8c7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#31100-2025-03-28","title":"31.10.0 (2025-03-28)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_30","title":"Maintenances","text":"<ul> <li>Bump sipi to v3.16.0 (#3548) (cea1faa)</li> <li>Update DSP-APP to v11.27.0 (#3551) (10cc2df)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_11","title":"Documentation","text":"<ul> <li>Copyright comments break markdownlint -&gt; broken docs not detected (DEV-4727) (#3550) (2c672d1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_23","title":"Enhancements","text":"<ul> <li>Add new route for incoming links (DEV-4722) (#3547) (a73d132)</li> <li>Unify resource annotations wording (DEV-4393) (#3546) (71ad321)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3191-2025-03-21","title":"31.9.1 (2025-03-21)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_31","title":"Maintenances","text":"<ul> <li>Bump sipi to v3.15.2 (#3545) (199777a)</li> <li>Dependency updates (#3538) (db8ae37)</li> <li>Migrate ontology endpoints to tapir pt. 3 (DEV-4657) (#3539) (fce26ea)</li> <li>Minor dependency updates (#3537) (d492ba3)</li> <li>Patch dependency updates (#3536) (851d587)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_23","title":"Bug Fixes","text":"<ul> <li>Make data of our PagedResponses required in OpenAPI yaml (#3543) (e87c696)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3190-2025-03-17","title":"31.9.0 (2025-03-17)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_32","title":"Maintenances","text":"<ul> <li>Add context to error failed to connect to Fuseki (#3529) (ec1e96c)</li> <li>Introduce CoreModule (DEV-4686) (#3527) (94b5974)</li> <li>Migrate resources routes to Tapir (DEV-4656) (#3521) (e19ed17)</li> <li>Migrate some v2/ontologies endpoints to Tapir pt. 2 (DEV-4657) (#3532) (e6ae9bc)</li> <li>Migrate v2/ontologies routes to Tapir endpoints (#3531) (7a56634)</li> <li>Migrate v2/values to Tapir (DEV-4634) (#3520) (9805e5d)</li> <li>Replace SmartIri with ProjectIri in OntologyMetadataV2 (#3530) (116ded5)</li> <li>Simplify delete value pre-checks (#3524) (0672f98)</li> <li>Update Sipi to 3.15.1 (#3541) (bf60ee3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_24","title":"Enhancements","text":"<ul> <li>Rename LicenseDto label-en to labelEn (#3535) (8ddcd2d)</li> <li>Use camel case in Pagination responses for json keys (#3540) (2af2c36)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_24","title":"Bug Fixes","text":"<ul> <li>Ensure that legal info String value objects are rendered as String in OpenApi yml (DEV-4695) (#3533) (deb09b9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3180-2025-03-03","title":"31.8.0 (2025-03-03)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_33","title":"Maintenances","text":"<ul> <li>Inline ConstructResponseUtilV2 trait with a single implementation (#3517) (aa44b2a)</li> <li>Minor dependency updates (#3523) (a73083b)</li> <li>Patch dependency updates (#3522) (277ee73)</li> <li>Remove AppRouter and RoutingActor, replace with MessageRelayActorRef (#3519) (edaf9fb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_25","title":"Enhancements","text":"<ul> <li>Support JSON-LD for standoff endpoints (DEV-4345) (#3516) (03d76c6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3170-2025-02-24","title":"31.7.0 (2025-02-24)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_26","title":"Enhancements","text":"<ul> <li>Add admin api for legal info (DEV-4502) (#3511) (4199c2a)</li> <li>Add checking valid legal info when creating/updating resources and values with assets (DEV-4502) (#3512) (4789287)</li> <li>Add legal info documentation (DEV-4502) (#3513) (c41886b)</li> <li>Add LegalInfo (authorship, copyright holder, license) to FileValue (#3459) (74b42b3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_25","title":"Bug Fixes","text":"<ul> <li>Erase the project before the import and refresh the ontology cache after import (DEV-4584) (#3515) (647e33e)</li> <li>Return 401 when basic auth credentials are invalid instead of failing with Internal Server Error (DEV-4585) (#3514) (eb22b2e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3160-2025-02-17","title":"31.6.0 (2025-02-17)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_34","title":"Maintenances","text":"<ul> <li>Cleanup unused code and move code to integration test source set (DEV-4344) (#3506) (49c3c32)</li> <li>Dependency updates (#3509) (be2768f)</li> <li>Make Project.id typed <code>ProjectIri</code> (#3501) (2bcb875)</li> <li>Minor dependency updates (#3508) (86edd21)</li> <li>Patch dependency updates (#3507) (ad79473)</li> <li>Remove unused code (#3502) (7dbc946)</li> <li>Update app version in docker-compose (#3503) (71ec0e0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_27","title":"Enhancements","text":"<ul> <li>Add JSON-LD support for create property and changing gui element (DEV-4344) (#3505) (3da4d29)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3150-2025-02-10","title":"31.5.0 (2025-02-10)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_35","title":"Maintenances","text":"<ul> <li>Make Project.selfjoin typed (#3497) (a159f32)</li> <li>Make Project.status typed (#3499) (ec29048)</li> <li>Minor dependency updates (#3489) (06347d1)</li> <li>Remove unused code (#3496) (2d22b98)</li> <li>Replace method with boolean flag with multiple methods (#3485) (89600f4)</li> <li>Simplify PR template (#3494) (6daced6)</li> <li>Use OntologyIri in ontology requests (#3481) (cebb1ae)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_12","title":"Documentation","text":"<ul> <li>Update documentation on footnotes in richtext (DEV-4567) (#3495) (3ed58b6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_28","title":"Enhancements","text":"<ul> <li>Add json ld support to change label or comment for class (DEV-4344) (#3493) (8ee061c)</li> <li>Add more support for JSON-LD on ontology endpoints (#3498) (bb9f5d1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_10","title":"Tests","text":"<ul> <li>Allow external IRI for subClassOf when creating a new Class (DEV-4554) (#3487) (f254573)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3140-2025-02-03","title":"31.4.0 (2025-02-03)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_36","title":"Maintenances","text":"<ul> <li>Dependency updates (#3491) (1ab1b96)</li> <li>Major dependency updates (#3490) (1553d0b)</li> <li>Make Project.logo typed (#3477) (324319a)</li> <li>Move creating OntologyIri code to OntologyIri (#3479) (30052c2)</li> <li>Patch dependency updates (#3488) (d54cad2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_29","title":"Enhancements","text":"<ul> <li>Clarify error message when creating an ontology with an invalid name (#3476) (7c16110)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_26","title":"Bug Fixes","text":"<ul> <li>Allow external iri for subclasses (DEV-4553) (#3484) (7fd7f46)</li> <li>Allow non api complex V2 IRI as subclass IRI during creation of a class (#3483) (12874d1)</li> <li>Allow StringLiterals with language tag for properties when creating a class (DEV-4555) (#3486) (8df9737)</li> <li>When changing the ontologies refresh the cache completely (DEV-4362) (#3468) (6be8422)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3130-2025-01-27","title":"31.3.0 (2025-01-27)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_37","title":"Maintenances","text":"<ul> <li>Make Project.longname typed (#3473) (a1ccc26)</li> <li>Make Project.shortcode typed (#3471) (513848a)</li> <li>Make Project.shortname typed (#3469) (b58e89b)</li> <li>Update sipi to 3.15.0 (#3475) (b584531)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_30","title":"Enhancements","text":"<ul> <li>Support json ld ontology api (Create class) (DEV-4344) (#3467) (1d69a9b)</li> <li>Support jsonld for create ontology requests (DEV-4344) (#3472) (f3c03ed)</li> </ul>"},{"location":"DSP-API/09-release-notes/#deprecated","title":"Deprecated","text":"<ul> <li>Move deprecation warnings to deprecation section in docs (#3474) (48e4885)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3121-2025-01-20","title":"31.2.1 (2025-01-20)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_38","title":"Maintenances","text":"<ul> <li>Add missing sbt setup (DEV-4494) (#3463) (e73b358)</li> <li>Dependency updates (#3458) (f96d579)</li> <li>Extract TestDspIngestClient (#3462) (05c58a7)</li> <li>Minor dependency updates (#3457) (cf84f2d)</li> <li>Patch dependency updates (#3456) (2340dc1)</li> <li>Remove unused twirl templates (#3465) (ba04c8b)</li> <li>Replace query twirl template 'getProjectAdminData' with SparqlQueryBuilder (#3466) (10ebd2f)</li> <li>Update dsp-app to v11.22.5 (#3453) (c984b8c)</li> <li>Update scalafix to 0.14.0 and enable remove unused imports (DEFV-4296) (#3464) (f7cf483)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_27","title":"Bug Fixes","text":"<ul> <li>Add rdfs:label to knora-base resources to ensure this is present for  isSegmentOfValue properties (DEV-4505) (#3455) (bc06166)</li> <li>Find the right doap when looking for by ForWhat (#3460) (265cb99)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3120-2025-01-08","title":"31.2.0 (2025-01-08)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_39","title":"Maintenances","text":"<ul> <li>Minor dependency updates (#3438) (d31a55f)</li> <li>Remove unused user argument from reloading ontology cache command (#3447) (54033bd)</li> <li>Update copyright (#3450) (23c3c6e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_13","title":"Documentation","text":"<ul> <li>Remove outdated statement on TEI in Standoff support (#3452) (76f9077)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_31","title":"Enhancements","text":"<ul> <li>Add StandoffFootnoteTag (DEV-4306, DEV-4491) (#3443) (ed78393)</li> <li>Remove license and copyright from Project (DEV-4479) (#3445) (c87233b)</li> <li>Support JSON-LD ontology v2 change requests (#3451) (a8b4bab)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_11","title":"Tests","text":"<ul> <li>Migrate InputOntologyV2Spec to become a simple unit zio-test in the test source set (#3449) (63aed0f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3110-2024-12-16","title":"31.1.0 (2024-12-16)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_40","title":"Maintenances","text":"<ul> <li>Patch dependency updates (#3444) (a29e9dd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_32","title":"Enhancements","text":"<ul> <li>Split license into licenseText and licenseUri (DEV-4398) (#3436) (76d2db2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_28","title":"Bug Fixes","text":"<ul> <li>Dummy filenames may not contain a file extension, remove it only if it exists (DEV-4227) (#3442) (a6c8f2b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_12","title":"Tests","text":"<ul> <li>Add test data to anything project (#3441) (3660ae6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3100-2024-12-02","title":"31.0.0 (2024-12-02)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_3","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>Remove legacy Sipi upload mechanism (DEV-4260) (#3414)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenances_41","title":"Maintenances","text":"<ul> <li>Dependency updates (#3439) (43fe16a)</li> <li>Patch dependency updates (#3437) (40f37ed)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_33","title":"Enhancements","text":"<ul> <li>Add license and copyright attribution fallback (DEV-4352) (#3433) (0a726e9)</li> <li>Remove legacy Sipi upload mechanism (DEV-4260) (#3414) (b74a33c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30220-2024-11-20","title":"30.22.0 (2024-11-20)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_42","title":"Maintenances","text":"<ul> <li>Dependency updates (#3427) (3330dbf)</li> <li>Introduce ValueResource and merge RootResource with RootUriResource (#3424) (d2b74f6)</li> <li>Patch dependency updates (#3426) (69e24fa)</li> <li>Update scala-graph dependency to 2.0.2 (#3432) (e1ba77a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_14","title":"Documentation","text":"<ul> <li>DOAP routes operate with external IRIs (#3419) (0e45091)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_34","title":"Enhancements","text":"<ul> <li>Add copyright attribution and license to FileValues and expose on v2 api (DEV-4351) (#3431) (f9dcd98)</li> <li>Add license and copyright attribution to ontologies (DEV-4347) (#3428) (2d62dcb)</li> <li>Add license and copyright attribution to project (DEV-4347) (#3429) (e51af72)</li> <li>Allow external iris for property and resource class when updating doap (DEV-4341) (#3425) (6ecc9ee)</li> <li>Fully support json-ld for delete value and update, delete or erase resource  (#3422) (e79a2f9)</li> <li>Support json ld for create resource (#3420) (419c74d)</li> <li>Support propert json-ld for update value endpoint (DEV-4325) (#3418) (039dcb6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_29","title":"Bug Fixes","text":"<ul> <li>Verify property is present and allow ApiV2Complex iris for creating a DOAP (#3416) (87efadd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30210-2024-11-07","title":"30.21.0 (2024-11-07)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_43","title":"Maintenances","text":"<ul> <li>Dependency updates (#3412) (2d9ec5b)</li> <li>Introduce PredicateInfoV2Builder &amp; ReadPropertyInfoV2Builder and simplify api transformation rule (#3385) (9bc08fa)</li> <li>Make precedence of daop for creating new Value/Resources obvious  (#3380) (0b879af)</li> <li>Minor dependency updates (#3390) (791a1d7)</li> <li>Patch dependency updates (#3389) (97f85b2)</li> <li>Remove <code>KnoraApiCreateValueModel</code> and move code to service which is directly assembling the <code>CreateValueV2</code> (DEV-4305)  (#3413) (34be717)</li> <li>Remove user auth from ontology endpoints ignoring the user anyway (DEV-4292) (#3408) (2071909)</li> <li>Start replacing Json-LD parsing with using an RDF model (#3401) (79e7194)</li> <li>Update fuseki and app in docker-compose (#3395) (c5b0c45)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_15","title":"Documentation","text":"<ul> <li>Apply corporate design to repo-specific standalone docs (#3415) (f398bf8)</li> <li>Fix docs publish CI failing on main (#3411) (263e6a4)</li> <li>Publish API docs to github pages (#3407) (4dd46c7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_35","title":"Enhancements","text":"<ul> <li>Allow uploading JSON text files (DEV-4222) (#3386) (3a3c305)</li> <li>Convert watermark to RGB workspace (DEV-3299) (#3387) (0459c60)</li> <li>Disable rdfs inferencing in shacl validator and deactivate validateShapes as default (DEV-4261) (#3396) (a281fd8)</li> <li>Enable rdfs inferencing in shacl validator (DEV-4220) (#3388) (a248973)</li> <li>Make create value endpoint fully support JSON-LD (DEV-4305) (#3410) (cc42d41)</li> <li>Raise the max content-lenght to 512 MB (DEV-4218) (#3399) (2a2b322)</li> <li>Remove DOAP configuration on SystemProject and KnownUser group (DEV-4138) (#3383) (a9b45ad)</li> <li>Watermark with alpha with the new Sipi release (DEV-3299) (#3382) (c8f5a71)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_30","title":"Bug Fixes","text":"<ul> <li>Allow creation of unformatted TextValues with language tags (DEV-4234) (#3394) (3b9a42e)</li> <li>Attempt to optimize OntologyInferencer (DEV-4063) (#3402) (5e0f976)</li> <li>Clarify error message when create file resources and asset is not available (#3392) (fc86f5b)</li> <li>Fix precedence of endpoints so that /v2/resources/info is routed to the ResourceInfoEndpointHandler (#3409) (af0388e)</li> <li>Fix reset triplestore content endpoint (DEV-2380) (#3391) (65197cd)</li> <li>Take language into account when checking for duplicate TextValues (DEV-4264) (#3397) (7eeb9a2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_13","title":"Tests","text":"<ul> <li>Migrate JsonLDUtilSpec to zio-test and move to webapi.test (#3400) (13a101d)</li> <li>Use Authorization header instead of url parms in TestClientService (#3398) (22d433e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30200-2024-10-04","title":"30.20.0 (2024-10-04)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_44","title":"Maintenances","text":"<ul> <li>Dependency updates (#3362) (2544029)</li> <li>Minor dependency updates (#3361) (dc42704)</li> <li>Patch dependency updates (#3360) (19c7533)</li> <li>Patch dependency updates (#3373) (1d1c395)</li> <li>Remove unused PermissionsMessages and related unused code (#3377) (49b8259)</li> <li>Replace deprecated Client.request with equivalent Client.batched (#3370) (07ca968)</li> <li>Replace ZioHelper.sequence with ZIO.foreach (#3375) (da7db7f)</li> <li>Simplify Value create code and use ProjectIri instead of String (#3378) (382826f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_36","title":"Enhancements","text":"<ul> <li>Add /shacl/validate endpoint (DEV-4149) (#3371) (e9f592e)</li> <li>Add shortcode query param for <code>GET /admin/lists</code> (#3369) (56733d2)</li> <li>Allow anyURI for fileValueHasExternalUrl (DEV-4108) (#3367) (87c4381)</li> <li>Enable compaction after project erasure, with feature flag (DEV-4162) (#3379) (4718cc8)</li> <li>Refuse to accept IIIF urls from dasch.swiss host (DEV-4106) (#3363) (814b7ca)</li> <li>Support <code>stillImageFileValueHasExternalUrl</code> for create and update, deprecate <code>fileValueHasExternalUrl</code> (DEV-4073) (#3366) (ebc3eb8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_31","title":"Bug Fixes","text":"<ul> <li>Fix deadlock when streaming out the shacl validation report (#3372) (88b278e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_14","title":"Tests","text":"<ul> <li>Fix testcontainer startup (#3368) (1925752)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30190-2024-09-12","title":"30.19.0 (2024-09-12)","text":""},{"location":"DSP-API/09-release-notes/#maintenances_45","title":"Maintenances","text":"<ul> <li>Dependency updates (#3350) (dfe2ed0)</li> <li>Improve Release Please prefixes and CHANGELOG sections (#3353) (4db76aa)</li> <li>Minor dependency updates (#3349) (7b25174)</li> <li>Patch dependency updates (#3348) (60c6959)</li> <li>Remove unused imports from TWIRL templates and silence false positives (#3351) (34f6ce8)</li> <li>Replace <code>appActor ! CreateResourceRequestV2</code> with method call on responder (#3356) (3ba1d84)</li> <li>Update apache-jena-fuseki to 5.1.0 (#3343) (12d5250)</li> <li>Update APP version in local dev setup (#3352) (04427f5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_37","title":"Enhancements","text":"<ul> <li>Add text value type when creating resources (DEV-3721) (#3327) (008fa98)</li> <li>Provide DSP_API_URL to ingest in docker-compose.yml (DEV-3832) (#3359) (e1d7fee)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_32","title":"Bug Fixes","text":"<ul> <li>Create link *Value property if it is not present on current class (DEV-4025) (#3345) (61e65b8)</li> <li>During resource creation verify required cardinalities based on the provided values (DEV-4017) (#3347) (eacf14c)</li> <li>During resource creation verify required cardinalities based on the provided values (DEV-4017) (#3347)\" (#3355) (04a6203)</li> </ul>"},{"location":"DSP-API/09-release-notes/#tests_15","title":"Tests","text":"<ul> <li>Add test checking (link) properties for subclasses are created correctly (DEV-4025) (#3358) (270b99e)</li> <li>Add test for providing an empty list as values for a required property (DEV-4017) (#3357) (e95ffb2)</li> <li>Remove CreatePropertyRequestV2 from OntologyResponderSpecV2 (#3354) (2743cce)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30184-2024-08-27","title":"30.18.4 (2024-08-27)","text":""},{"location":"DSP-API/09-release-notes/#maintenance","title":"Maintenance","text":"<ul> <li>Change default DOAPs according to the defined requirements (DEV-4042) (#3341) (0adfeee)</li> <li>Dependency updates (#3337) (fe6dae1)</li> <li>Minor dependency updates (#3336) (396baa8)</li> <li>Patch dependency updates (#3335) (b40c44d)</li> <li>Update dsp-api docker base image to Ubuntu 24.04 LTS (DEV-3956) (#3333) (8f7172d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_33","title":"Bug Fixes","text":"<ul> <li>Do not log on error level when invalid credentials are provided (DEV-3975) (#3340) (c7e9451)</li> <li>Fix escaping issues in labels, add fuzz testing to make sure (DEV-3976) (#3339) (ae8f44a)</li> <li>Respond with internal error instead of bad credentials when triplestore is down during authentication (DEV-4019) (#3342) (cb3f69a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30183-2024-08-08","title":"30.18.3 (2024-08-08)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_1","title":"Maintenance","text":"<ul> <li>Bump Sipi to v3.13.0 (#3334) (58a91ce)</li> <li>Minor dependency updates (#3331) (6d3a53f)</li> <li>Patch dependency updates (#3330) (894af57)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30182-2024-07-29","title":"30.18.2 (2024-07-29)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_2","title":"Maintenance","text":"<ul> <li>Add just target for starting stack without API (#3325) (4708dcc)</li> <li>Build queries with query builder (#3276) (56846ff)</li> <li>Make json ld comparison robust to json formatting changes (#3320) (e1280d5)</li> <li>Merge Vocabularies (#3326) (7030ca1)</li> <li>Update Sipi (DEV-3474) (#3328) (106c8ea)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_34","title":"Bug Fixes","text":"<ul> <li>Decimals without decimal point lead to inconsistent data (DEV-3927) (#3329) (3eb5973)</li> <li>Prevent creating classes/properties without proper label/comment and language (DEV-3878) (#3324) (e5fffb0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30181-2024-07-15","title":"30.18.1 (2024-07-15)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_35","title":"Bug Fixes","text":"<ul> <li>Do not fail when updating class with external ontologies (DEV-3879) (#3321) (752a7fe)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30180-2024-07-15","title":"30.18.0 (2024-07-15)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_3","title":"Maintenance","text":"<ul> <li>Add e2e test for v2 lists endpoints (#3315) (17d7441)</li> <li>Add sqlite to localdev setup (#3304) (e5650a7)</li> <li>Dependency updates (#3319) (44eee9b)</li> <li>Determine the year automatically for copyright headers (#3316) (e25456c)</li> <li>Major dependency updates (#3300) (63b202d)</li> <li>Migrate ListRouteV2 to tapir (DEV-3852) (#3307) (9b3d6c7)</li> <li>Migrate to  <code>AuthenticationRouteV2</code> tapir (#3310) (c62f460)</li> <li>Minor dependency updates (#3299) (34afc96)</li> <li>Minor dependency updates (#3318) (1d5fd19)</li> <li>Patch dependency updates (#3298) (ae22613)</li> <li>Patch dependency updates (#3317) (26dba9a)</li> <li>Small refactoring (#3311) (6822d16)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_16","title":"Documentation","text":"<ul> <li>Update documentation (#3308) (d2f2120)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_38","title":"Enhancements","text":"<ul> <li>Add feature flag to disable lastModificationDate check (DEV-3870) (#3313) (9c1a2c5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_36","title":"Bug Fixes","text":"<ul> <li>Add missing /v2/[lists|node]/:listIri to ApiRoutes (#3314) (da1d61d)</li> <li>Do not ignore the cardinality check result when updating the cardinalties (DEV-3841) (#3306) (1f0d221)</li> <li>Fix query tracking tags (== is faulty), set previous bucket sizes (DEV-3776) (#3305) (04b2a05)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30171-2024-07-01","title":"30.17.1 (2024-07-01)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_37","title":"Bug Fixes","text":"<ul> <li>The GroupIri should allow \"knora-admin:\" prefixed iris and expand it (#3301) (9a91759)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30170-2024-06-28","title":"30.17.0 (2024-06-28)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_4","title":"Maintenance","text":"<ul> <li>Add IRI to error message when a Group IRI is invalid. (#3296) (923a7b0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_39","title":"Enhancements","text":"<ul> <li>Add 'keepAssets' query param to erase project endpoint (#3294) (23292ff)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_38","title":"Bug Fixes","text":"<ul> <li>Smaller granularity for Grafana fuseki durations (DEV-3776) (#3297) (a53fe34)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30162-2024-06-24","title":"30.16.2 (2024-06-24)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_39","title":"Bug Fixes","text":"<ul> <li>Allow shorter usernames (DEV-3797) (#3292) (6f31133)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30161-2024-06-24","title":"30.16.1 (2024-06-24)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_5","title":"Maintenance","text":"<ul> <li>Add integration tests for erasing a project (DEV-3681) (#3283) (44e592f)</li> <li>Add integration tests for project erasure (DEV-3681) (#3289) (bc07d66)</li> <li>Fix/Align error messages in KnoraUserService (#3278) (645aabc)</li> <li>Introduce model for SliceModules (#3288) (2687412)</li> <li>Major dependency updates (#3286) (f15eb4e)</li> <li>Minor dependency updates (#3285) (844bfa0)</li> <li>Patch dependency updates (#3284) (1ed1506)</li> <li>Replace reused datastructures with specific ones for createNewResource.scala.txt template (#3277) (43b342e)</li> <li>Update apache-jena-fuseki to 5.0.0-3 (#3282) (8b74e1a)</li> <li>Update dsp-app to v11.11.0 (#3279) (d1fe63a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_40","title":"Bug Fixes","text":"<ul> <li>Add prefix handling to admin permission repo (#3290) (88e6b72)</li> <li>Allow for longer user IRIs (DEV-3759) (#3291) (b2ef441)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30160-2024-06-14","title":"30.16.0 (2024-06-14)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_6","title":"Maintenance","text":"<ul> <li>Add missing labels and comment to relatesToValue (#3273) (02debbc)</li> <li>Add ontology constants for text value types (#3266) (854a6c8)</li> <li>Create resources repo (#3269) (351b3e0)</li> <li>Dependency updates (#3263) (1cdf380)</li> <li>Introduce InfrastructureModule (#3274) (2a35586)</li> <li>Minor dependency updates (#3262) (6c39954)</li> <li>Move JwtService to infrastructure package and remove project service dependency from it (#3275) (0484780)</li> <li>Patch dependency updates (#3261) (d7fe791)</li> <li>Remove LOCAL_HOME from docker compose (#3264) (b9b5760)</li> <li>Remove MessageRelay from Value Responder (#3268) (11e38a8)</li> <li>Remove nested template calls (#3271) (affee1f)</li> <li>Remove Spray Json from files refactored during DEV-1627 (#3259) (08c4633)</li> <li>Separate ontology helpers accessing cache and triplestore (#3270) (f2edd6f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_40","title":"Enhancements","text":"<ul> <li>Add endpoint to erase projects (DEV-3681) (#3272) (488788a)</li> <li>Compaction endpoint, guarded (DEV-3703) (#3265) (d5576b5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30150-2024-05-29","title":"30.15.0 (2024-05-29)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_7","title":"Maintenance","text":"<ul> <li>Introduce OntologyService and refactor resource creation (#3255) (21b82bf)</li> <li>Move actor message constructor exceptions, remove the message (#3249) (5f840c0)</li> <li>Remove repo upgrade test and unused scripts and data (#3253) (d7d7db7)</li> <li>SipiServiceLive: Sttp instead of Apache HTTP (DEV-1627) (#3257) (211caa2)</li> <li>TestClientService: STTP instead of Apache HTTP (DEV-1627) (#3256) (ecb6f8e)</li> <li>TriplestoreServiceLive: use Sttp with ZIO instead of Apache HTTP (DEV-1627) (#3251) (0488add)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_17","title":"Documentation","text":"<ul> <li>Render OpenAPI content into md document, remove generated ymls from git (DEV-3443) (#3254) (7f7c0b6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_41","title":"Enhancements","text":"<ul> <li>Add model to knora-base to allow for explicitly stating text value types in ontology and data (#3252) (95cda7a)</li> <li>sipi: Allow read all images for users with write:project:XXXX scope (DEV-2628) (#3250) (9489ecd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_41","title":"Bug Fixes","text":"<ul> <li>Fix comment on list values (DEV-3647) (#3247) (cb933b7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30140-2024-05-15","title":"30.14.0 (2024-05-15)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_8","title":"Maintenance","text":"<ul> <li>Dependency updates (#3246) (070e653)</li> <li>Fix apache-jena-fuseki update (#3234) (c8b1628)</li> <li>Introduce accessors for SPARQL SELECT results (#3238) (fafe48a)</li> <li>Introduce SparqlTimeOut, preparation to allow different timeouts for maintenance queries (#3239) (bee3b08)</li> <li>KnoraSipiIntegrationV2ITSpec simplifications (DEV-3504) (#3235) (1d33541)</li> <li>Minor dependency updates (#3245) (2bacf50)</li> <li>Patch dependency updates (#3244) (7424aa9)</li> <li>Port to Scala 3 (DEV-3543) (#3231) (82dc1c8)</li> <li>Remove .env file requirement from setup (#3240) (171719b)</li> <li>Remove MessageRelay from ResourceUtilV2 (#3243) (698b07a)</li> <li>Set scalafix Scala 3 target dialect (DEV-3543) (#3236) (1dcf47b)</li> <li>Simplify shift code (#3230) (a9f0840)</li> <li>Split list handlers and rest service (#3242) (a190544)</li> <li>Update dsp-app to v11.9.1 (#3232) (ae2e7dd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_18","title":"Documentation","text":"<ul> <li>Improve documentation on segments (#3241) (82534ab)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_42","title":"Enhancements","text":"<ul> <li>X-Asset-Ingested: skip Sipi temp move for updates (DEV-3504) (#3219) (8cf4e9d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_42","title":"Bug Fixes","text":"<ul> <li>Improve labels in ontology for display in App (DEV-3535) (#3208) (dbb166b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30130-2024-05-02","title":"30.13.0 (2024-05-02)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_9","title":"Maintenance","text":"<ul> <li>Add caching to KnoraGroupRepo (DEV-3311) (#3204) (57a3a06)</li> <li>Dependency updates (#3225) (e3e0d75)</li> <li>Minor dependency updates (#3224) (03db054)</li> <li>Move caching into KnoraUser and KnoraProjectRepo and update ehcache to v3 (#3201) (91a8ff2)</li> <li>Move components to AdminModule (#3227) (507888a)</li> <li>Move getting group members from responder to services (DEV-3297) (#3205) (414100b)</li> <li>Patch dependency updates (#3223) (be9241c)</li> <li>Refine scaffolding for maintenance actions (DEV-3532) (#3206) (946de4e)</li> <li>Remove client test data creation (DEV-3568) (#3228) (7800cd3)</li> <li>Remove deprecated version in docker compose file (#3209) (81da180)</li> <li>Remove GroupsResponderADM (DEV-3292) (#3213) (8d2b5ba)</li> <li>Remove ProjectIdentifier sealed trait (#3221) (dfc8925)</li> <li>Remove startup dependency on Sipi, remove checking iiif server available on startup (#3218) (f1c99d2)</li> <li>Remove test data generation for system and admin (groups, project, users) (DEV-3523) (#3203) (fc85b24)</li> <li>Remove unused code from RouteUtilADM and inline remaining code to KnoraResponseRenderer (#3222) (09ba912)</li> <li>Remove unused non-unit return type compiler warnings (Scala3 preparation) (#3211) (d75c9b5)</li> <li>Remove unused trait IOValueV2 (#3212) (6ddb6c7)</li> <li>Remove UserResponder (DEV-3291) (#3217) (f2f08b3)</li> <li>Replace spray json with zio json for list endpoints (#3226) (1ba3473)</li> <li>Replace spray with zio-json in admin endpoints (#3220) (e38e3a7)</li> <li>Update Apache-Jena-Fuseki container to v5.0.0-2 (#3214) (b1b4220)</li> <li>Update dsp-app to v11.9.0 (#3199) (f68e133)</li> <li>Update GitHub actions to support Node.js 20 instead of 16 (#3207) (92a6fc3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_43","title":"Enhancements","text":"<ul> <li>Add dsp-ingest as audience to user issued jwt (#3180) (68fefca)</li> <li>Support table headers in formatted text (DEV-3473) (#3210) (c17e7f8)</li> <li>Upgrade built-in graphs automatically (DEV-3552) (#3216) (f46d658)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_43","title":"Bug Fixes","text":"<ul> <li>Add missing upgrade plugin after knora-base update (#3215) (8e57ada)</li> <li>Return 400 instead of 500 in /admin/lists endpoint (DEV-3556) (#3229) (60029b7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30120-2024-04-19","title":"30.12.0 (2024-04-19)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_10","title":"Maintenance","text":"<ul> <li>Align rest services naming &amp; make layers more readable (#3179) (5a3374a)</li> <li>Build docs in strict mode, so that mistakes are detected (DEV-3481) (#3186) (a806f39)</li> <li>Bump jena to 5.0.0 (DEV-3426) (#3170) (a622e4f)</li> <li>Bump Sipi to v3.12.2 (#3173) (266537f)</li> <li>Dependency updates (#3189) (3188b2b)</li> <li>Fix checks order in Group update method (DEV-3292) (#3198) (bc22ade)</li> <li>Introduce administrative permission service (#3172) (80ca581)</li> <li>Migrate repositories to use AbstractEntityRepo with builtIn entities and remove constants (#3163) (1dd0314)</li> <li>Minor dependency updates (#3188) (146f10c)</li> <li>Move creation Group from responder to services (#3185) (a21a34f)</li> <li>Move Group update from responder to services (DEV-3292)  (#3194) (682f5b6)</li> <li>Move GroupStatus update from responder to services (DEV-3292) (#3195) (3e08df7)</li> <li>Patch dependency updates (#3187) (d4c8c02)</li> <li>Remove @accessible (Scala3 preparation) (#3183) (993538d)</li> <li>Remove @accessible macro from some places (#3181) (28a085b)</li> <li>Remove unused dependency from KnoraGroupService (#3192) (26e62f8)</li> <li>Scala3 preparation (introduce at least one parameter list without implicits) (#3184) (a79812f)</li> <li>Update apache-jena-fuseki to v5.0.0-1 (#3176) (68de1c6)</li> <li>Update dsp-app to v11.8.0 (#3175) (752e350)</li> <li>Update sbt-buildinfo to v0.12.0 (#3174) (5e97a25)</li> <li>Use buildjet instead of actuated (#3182) (93fd50f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_19","title":"Documentation","text":"<ul> <li>Add documentation for additional properties on Segment (#3196) (d5f2294)</li> <li>Add markdownlint check to CI (#3191) (7a1ae2c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_44","title":"Enhancements","text":"<ul> <li>Add scopes to tokens issued by JwtService (DEV-3451) (#3178) (73fc75f)</li> <li>Extend the model of <code>Segment</code> with additional properties (DEV-3505) (#3193) (54a439c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_44","title":"Bug Fixes","text":"<ul> <li>translation: Update some French translations (DEV-3431) (#3190) (c82749f)</li> <li>Use shortname for project export (DEV-3430) (#3169) (f25cfa9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30110-2024-04-04","title":"30.11.0 (2024-04-04)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_11","title":"Maintenance","text":"<ul> <li>Add <code>Deprecated</code> as a category in our release notes (#3160) (937480c)</li> <li>Dependency updates (#3159) (680e764)</li> <li>Extract ObjectAccess and Administrative permissions into Permission model in admin slice (#3152) (e8f6060)</li> <li>GroupsResponderADM cleanup (DEV-3292) (#3139) (772b160)</li> <li>Improve E2EZSpec (#3153) (eb72704)</li> <li>Introduce AdministrativePermissionRepo and AbstractEntityRepo (#3167) (aaa8ffc)</li> <li>Minor dependency updates (#3157) (79dc239)</li> <li>Patch dependency updates (#3156) (1f949a0)</li> <li>Remove unused constants (#3164) (0cf9e43)</li> <li>Spring cleaning the code base (#3155) (802ed0c)</li> <li>Switch JWT library to use ZIO-JSON instead of Spray JSON (#3154) (a209acf)</li> <li>Use env variable for root log level (DEV-3410) (#3165) (d616d68)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_45","title":"Enhancements","text":"<ul> <li>Remove isSequenceOf and instead add Segment to DSP-API (DEV-3326) (1beb192)</li> <li>Support external IIIF URLs in resource creation and update (DEV-3341) (#3131) (45863c9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_45","title":"Bug Fixes","text":"<ul> <li>Temporarily bring back support for <code>isSequenceOf</code> while it exists in data (#3162) (d22adfd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#deprecated_1","title":"Deprecated","text":"<ul> <li>Mark <code>isSequenceOf</code> as deprecated and document <code>Segment</code> as alternative (DEV-3455) (#3161) (e45b41a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30101-2024-03-27","title":"30.10.1 (2024-03-27)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_12","title":"Maintenance","text":"<ul> <li>Bump Sipi to 3.10.0 (#3141) (e9bf316)</li> <li>Bump sipi to 3.10.1 (#3150) (97b8b82)</li> <li>Remove methods from ProjectResponderADM (#3140) (26796b1)</li> <li>Remove ProjectsResponder (#3143) (fcd2f13)</li> <li>Set up plumbing for ZIO Test based E2E-Tests (#3148) (a9a7993)</li> <li>Simplify OntologyFormatsE2ESpec (#3146) (6770b25)</li> <li>Try to skip checks for release branch (#3149) (6e88812)</li> <li>Update dsp-app to v11.7.4 (#3145) (c6e231e)</li> <li>Use explicit label for actuated (#3147) (72476e3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_46","title":"Bug Fixes","text":"<ul> <li>Error message does not interpolate invalid property IRI (#3144) (b87f6c1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#30100-2024-03-22","title":"30.10.0 (2024-03-22)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_13","title":"Maintenance","text":"<ul> <li>Dependency updates (#3122) (e9cb379)</li> <li>Fix never-ending jobs in release PRs (#3114) (f2f1fc9)</li> <li>Fix typo in Makefile (#3108) (de31c94)</li> <li>Improve test for serving ontologies in different formats (#3115) (a010275)</li> <li>knora-admin: Remove unused Institution class and its properties (DEV-3365) (#3109) (7e3664d)</li> <li>Major dependency updates (#3121) (e2e57c1)</li> <li>Merge StringLiteralV2 classes (#3133) (70cced2)</li> <li>Migrate GET /version and /health to tapir (DEV-3286, DEV-3287) (#3110) (c7d69aa)</li> <li>Minor dependency updates (#3120) (564bdcf)</li> <li>Modularize layers  (#3132) (9ef26c9)</li> <li>Move test for serving ontologies in different formats to separate file (#3127) (9a48e23)</li> <li>Patch dependency updates (#3119) (3a5194f)</li> <li>Remove accessible makro (Scala3 perparation) (#3135) (30e4f06)</li> <li>Remove methods from projects responder, clean up ProjectIri (#3137) (b4eec85)</li> <li>Remove zio.accessible makro (Scala3 migration) (#3126) (d753fcc)</li> <li>Rename ProjectADM and service to Project (#3130) (fc1dc53)</li> <li>Revert the import style to Scala 2 (#3138) (96ee921)</li> <li>Simplify ActorSystem layer (#3123) (292f7eb)</li> <li>Split CreateResourcesV2Handler from ResourcesResponderV2 (D\u2026 (#3118) (24b691a)</li> <li>Start release PRs as drafts (#3111) (b76e538)</li> <li>Successfully skip <code>check-formatting</code> job on release PRs (#3113) (1d35cad)</li> <li>Update dsp-app to v11.7.1 (#3105) (9851405)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_20","title":"Documentation","text":"<ul> <li>Add Examples to /admin/groups endpoints (#3107) (bbb0e65)</li> <li>Integrate OpenApi generated documentation for admin api (DEV-3381) (#3104) (241ea9b)</li> <li>Lint with markdownlint (#3128) (2b7d239)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_46","title":"Enhancements","text":"<ul> <li>Add additional project export route that awaits the process (#3136) (70e0172)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_47","title":"Bug Fixes","text":"<ul> <li>Disable broken upgrade plugins (#3117) (6714898)</li> <li>Enable upgrade plugins with custom graphs (#3124) (4186b5f)</li> <li>Ensure all project's restricted view settings are correctly persisted (#3125) (51cde02)</li> <li>In Sipi use size fallback only when api failed to return a setting (DEV-3409) (#3112) (172041a)</li> <li>Remove invalid watermark triples (DEV-3418) (#3116) (e563ab9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3090-2024-03-07","title":"30.9.0 (2024-03-07)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_14","title":"Maintenance","text":"<ul> <li>Add clear cache to KnoraProjectRepoLive (#3091) (eb98c53)</li> <li>Add CODEOWNERS (DEV-3378) (#3102) (914fe86)</li> <li>Add DSP-INGEST to docker network (#3086) (b248cd0)</li> <li>Add save to KnoraProjectRepo and use for setting the RestrictedView (#3082) (fcd483f)</li> <li>Bump Sipi to 3.9.0 (#3097) (4b6e638)</li> <li>Cleanup CacheService, and split KnoraUserService and UserService (#3074) (3a21838)</li> <li>formatting: Add trailing commas (#3084) (b0b5e25)</li> <li>KnoraUserGroup and KnoraUserGroupRepo (DEV-3288) (#3059) (8a79e93)</li> <li>Migrate DELETE /admin/groups/&lt;groupIri&gt; to Tapir (DEV-1588) (#3081) (2715aa1)</li> <li>Migrate POST /admin/group to Tapir (DEV-1588) (#3057) (29b1ce6)</li> <li>Migrate PUT /admin/group/&lt;groupIri&gt; to Tapir (DEV-1588) (#3071) (8df7033)</li> <li>Migrate PUT /admin/groups/&lt;groupIri&gt;/status to Tapir (DEV-1588) (#3075) (2ca95ed)</li> <li>Minor dependency updates (#3078) (f60d937)</li> <li>Move caching from UserResponder to UserService (#3064) (0484717)</li> <li>Move code from UsersResponder to UserService and UserRestService (#3067) (5345350)</li> <li>Move code from UsersResponder to UserService and UserRestService (#3069) (e78a106)</li> <li>Move remaining methods from UsersResponder to UserService and UserRestService (#3072) (320a4a8)</li> <li>Patch dependency updates (#3077) (3decf23)</li> <li>Prevent illegal updates with <code>KnoraUserService</code> (#3098) (4111312)</li> <li>Refactor Group value objects (#3058) (f7ab488)</li> <li>Remove Codecov annotations (#3070) (e9e3d5c)</li> <li>Remove invalid test data (#3088) (22a7333)</li> <li>Remove ontology from KnoraProject entity (#3063) (376f536)</li> <li>Remove unused <code>RejectingRoute</code> (DEV-3289) (#3079) (fc8e7d0)</li> <li>Remove unused code from standoff responder (DEV-3264) (#3085) (56815a3)</li> <li>Rename GroupADM and move to domain model package (DEV-3292) (#3094) (2202bd9)</li> <li>Rename test data folder to align with PermissionsResponderADMSpec (#3092) (b56580d)</li> <li>Replace default watermark for Sipi with new version (#3066) (19caebd)</li> <li>Replace Spray JSON with ZIO-JSON in some projects endpoints (DEV-3375) (#3095) (70ea9ba)</li> <li>Update dsp-app to v11.6.4 (#3061) (97db659)</li> <li>Use RDF model in all methods of project repo (#3032) (689bbbf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_21","title":"Documentation","text":"<ul> <li>Fix dead links in docs (#3076) (068ec84)</li> <li>Update documentation on restricted view settings (#3101) (12db892)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_47","title":"Enhancements","text":"<ul> <li>Allow project admins to create users which are not a system admin (DEV-3266) (#3099) (79e1963)</li> <li>Make GET /admin/users faster by caching projects (DEV-3311) (#3062) (793f118)</li> <li>The restricted view must be either restricted with a watermark or by a particular size (DEV-3356) (#3080) (75f5363)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_48","title":"Bug Fixes","text":"<ul> <li>docs: DSP-API docs root route gives a 404 error (DEV-3345) (#3073) (0370e13)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3082-2024-02-22","title":"30.8.2 (2024-02-22)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_15","title":"Maintenance","text":"<ul> <li>Add -Xfatal-warnings (#3042) (8e51a94)</li> <li>Add option to make warnings non-fatal locally. (#3044) (0d2367e)</li> <li>Bump Sipi to 3.8.12 (#3051) (cbddd97)</li> <li>Dependency updates (#3049) (bf60688)</li> <li>Enable Default Union Graph in TriplestoreServiceInMemory (DEV-3295) (#3052) (8b59d54)</li> <li>Introduce repository and service for user and write queries with rdf4j's <code>SparqlBuilder</code> (DEV-3273) (#3038) (f3df298)</li> <li>Migrate user group endpoints to Tapir and remove UserRouteADM (#3046) (52c798d)</li> <li>Migrate users endpoints to tapir (BasicInformation, Status, Password)  (#3043) (6e16782)</li> <li>Minor dependency updates (#3048) (aa9b718)</li> <li>Patch dependency updates (#3047) (5949e85)</li> <li>Remove <code>knora-ontologies</code> symlink (DEV-3236) (#3035) (df28afc)</li> <li>Remove token property from user which is always None (#3041) (1b7f88b)</li> <li>Remove TriplestoreService dependency from UsersResponder (#3054) (61f04e0)</li> <li>Replace watermark (DEV-3297) (#3056) (60c804f)</li> <li>Update APP to v11.5.1 (#3039) (8290921)</li> <li>Use UserService to update a user (#3053) (25ef280)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_49","title":"Bug Fixes","text":"<ul> <li>Allow hyphens in usernames (DEV-3306) (#3055) (9398d21)</li> <li>OWL property type of knora-api:valueAsString (#3036) (686c8fb)</li> <li>Remove UUID version check from IRI value objects (DEV-3310) (#3033) (6de0374)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3081-2024-02-08","title":"30.8.1 (2024-02-08)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_16","title":"Maintenance","text":"<ul> <li>Change RDF handling for querying Projects from DB (DEV-3175) (#2989) (884e3a8)</li> <li>CI: Run integration tests on actuated again (#3027) (ca8319c)</li> <li>Migrate <code>GET /admin/users/&amp;lt;iri|email|name&amp;gt;</code> to Tapir (#3020) (4b25387)</li> <li>Migrate <code>GET /admin/users/iri/&amp;lt;userIri&amp;gt;/*memberships</code> and <code>POST /admin/users</code> to tapir (#3021) (cafbc16)</li> <li>Remove chill, scallop dependency (DEV-3263) (DEV-3262) (#3029) (a1e5db1)</li> <li>Remove jodd dependency (DEV-3069) (#3024) (35ff4ed)</li> <li>Remove jodd dependency leftovers (#3028) (21a4c83)</li> <li>Remove kamon (DEV-3261) (#3030) (f27f118)</li> <li>Update dsp-app image in docker-compose.yml to v11.4.1 (#3034) (71677a2)</li> <li>Update fuseki to latest release 2.1.5 (#3023) (6acbe4b)</li> <li>Update scala-graph to 2.0.1 (DEV-3072) (#3031) (9b04b8f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_50","title":"Bug Fixes","text":"<ul> <li>Remove cardinality restriction for comments on regions (DEV-3179) (#3026) (9ea8d6e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3080-2024-02-05","title":"30.8.0 (2024-02-05)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_17","title":"Maintenance","text":"<ul> <li>Admin groups cleanup (#3011) (34fd51a)</li> <li>Bump sipi to 3.8.10 (#3007) (be8ce70)</li> <li>Bump Sipi to 3.8.11 (#3014) (67e6762)</li> <li>Dependency updates (#3017) (4918f5c)</li> <li>Migrate <code>GET /admin/lists?projectIri</code> route to tapir (#3006) (a931357)</li> <li>Migrate <code>POST /admin/lists</code> and <code>POST /admin/lists/&amp;lt;parentListIri&amp;gt;</code> to Tapir (DEV-1589) (#3018) (63fe560)</li> <li>Migrate GET /admin/users/iri/&lt;userIri&gt; to tapir (#3010) (34d2d7a)</li> <li>Migrate some <code>GET /admin/lists/*</code> endpoints to Tapir (#3012) (785b573)</li> <li>Migrate update and delete of lists to Tapir (#3013) (dafaffb)</li> <li>Minor dependency updates (#3016) (d59246f)</li> <li>Patch dependency updates (#3015) (b46f8f7)</li> <li>readme: Update installation instruction (#2999) (296815c)</li> <li>readme: Use just targets instead of make targets (#3000) (71e6119)</li> <li>Remove needless <code>ProjectsResponderRequestADM</code> classes (#3008) (1468d2c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_48","title":"Enhancements","text":"<ul> <li>Enable <code>UpgradePlugin</code>s to restrict to a specific graph and update the knora base version to 26 (#3005) (e54aa0b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_51","title":"Bug Fixes","text":"<ul> <li>Less information in auth error messages (DEV-3260) (#3019) (569a6c1)</li> <li>Only allow System Administrators to create users (#3022) (5ab6e35)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3070-2024-01-25","title":"30.7.0 (2024-01-25)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_18","title":"Maintenance","text":"<ul> <li>Add just targets for simple stack handling (#2985) (f5f135e)</li> <li>admin/projects: Add missing internal to external response formatting (#2993) (f0312dc)</li> <li>Bump Sipi to 3.8.8 (#2972) (9a00c3f)</li> <li>Dependency updates (#2967) (95ad2f9)</li> <li>Introduce <code>Value[A]</code> and extract tapir and zio-json codecs (#2996) (9744f7b)</li> <li>Major dependency updates (#2977) (6ee0111)</li> <li>Migrate /admin/files to tapir (DEV-3189) (#2995) (78ff954)</li> <li>Migrate <code>admin/permissions</code> endpoints to tapir (DEV-1590) (#2975) (cf2c6fb)</li> <li>Migrate get all users route to tapir (DEV-3142) (#2971) (3684b91)</li> <li>Migrate getAllGroups route to tapir (DEV-1588) (#2984) (e5285ea)</li> <li>Migrate getGroup and getGroupMembers to tapir (DEV-1588) (#2987) (98820b0)</li> <li>Migrate to Java 21 and remove usage of Java 17 (DEV-3146) (#2974) (779fddb)</li> <li>Minor dependency updates (#2966) (0cc64d1)</li> <li>Move and rename UserADM (#2978) (56c1feb)</li> <li>Patch dependency updates (#2965) (d0d252d)</li> <li>Patch dependency updates (#2976) (b150911)</li> <li>Patch dependency updates (#2992) (9b57f16)</li> <li>Rename staging servers to stage in Makefile (#2961) (bad8bbe)</li> <li>Set Sipi max_post_size = '2G' in all configuration (#2962) (9fc109c)</li> <li>Streamline user identifier objects (DEV-3155) (#2991) (0d07b6f)</li> <li>Unify user value objects and validation (DEV-3155) (#2980) (83f777d)</li> <li>Update license header to 2024 (#2981) (560dec4)</li> <li>Update years in the copyright header (#2982) (700f3c5)</li> <li>Use RestrictedViewSize in ProjectSetRestrictedViewSizeRequest (#3001) (239c4fc)</li> <li>Use sttpbackend and reuse access token if not expired (#2968) (eac470a)</li> <li>Use the same custom scalac option for webapi and integration (#2990) (b8a45ad)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_22","title":"Documentation","text":"<ul> <li>Add documentation on creating FileValue resources together with ingest (DEV -3134) (#2969) (eac5751)</li> <li>Remove remaining API V1 documentation (DEV-3073) (#2970) (2d3d4c4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_49","title":"Enhancements","text":"<ul> <li>Add dsp ingest asset info resolution (DEV-3147) (#2973) (c081ba8)</li> <li>Add generating OpenApi yamls for the admin api (#2983) (503b742)</li> <li>Add support to load knora-ontologies in the docker-compose stack (#3002) (32bf7cc)</li> <li>Add watermark support (DEV-2993) (DEV-2991) (#3003) (7637cb3)</li> <li>Make Sipi handling optional during FileValue creation (Dev-2945) (#2960) (82ebce4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_52","title":"Bug Fixes","text":"<ul> <li>Allow all mime types in API that are returned by Ingest (DEV-3163) (#2994) (1ea69a4)</li> <li>Fix UserIri and allow existing values (DEV-3194) (#2997) (ecf9c0a)</li> <li>Let DspIngestClientLive get a fresh jwt for each request (#2988) (31df947)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3060-2023-12-06","title":"30.6.0 (2023-12-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_19","title":"Maintenance","text":"<ul> <li>Bump Sipi version to 3.8.7 (#2951) (5b3436b)</li> <li>Dependency updates (#2956) (1e14a88)</li> <li>Minor dependency updates (#2955) (8c2afcd)</li> <li>Patch dependency updates (#2954) (1c37768)</li> <li>Simplify RDF handling (#2952) (25099ef)</li> <li>Update apache-jena-fuseki to v2.1.4 (#2959) (a8a7c61)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_23","title":"Documentation","text":"<ul> <li>Clarify setting of restricted view of images (DEV-2961) (#2950) (e4ca484)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_50","title":"Enhancements","text":"<ul> <li>Add http metrics for gravsearch endpoints (DEV-2936) (#2946) (7ca5946)</li> <li>Add http metrics to all search endpoints by migrating to tapir DEV-2936 (#2958) (20f8d5c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3052-2023-11-22","title":"30.5.2 (2023-11-22)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_20","title":"Maintenance","text":"<ul> <li>Bump Sipi version to 3.8.5 (#2942) (8f35d81)</li> <li>Bump Sipi version to 3.8.6 (#2947) (34b74bf)</li> <li>docker-compose: Bump app version to 11.1.0 (#2926) (b39e9f3)</li> <li>Inline some UuidUtil functions and reduce deprecation warnings (#2934) (52d1efa)</li> <li>knora-sipi: Remove cron and custom entrypoint (#2940) (ef714c1)</li> <li>Major dependency updates (#2932) (0624380)</li> <li>Minor dependency updates (#2931) (86c926a)</li> <li>Move project related value objects to admin.domain.model package and cleanup code (#2923) (57c6ac2)</li> <li>Move ProjectIri to KnoraProject (#2944) (af95516)</li> <li>Patch dependency updates (#2930) (d8e13b7)</li> <li>Prepare Scala 3 compatibility by adding -Xsource:3 compiler flag (#2924) (ff9df5f)</li> <li>Remove @deprecation annotations (#2937) (224eb3d)</li> <li>Remove duplicate 'gravsearch' metrics (#2936) (f11dfef)</li> <li>Remove MessageHandler from SearchResponder and call responder directly (#2943) (ee8d09d)</li> <li>Remove redundancies in search by label queries (#2933) (a333e34)</li> <li>Replace spray json with zio-json for FileMetadataSipiResponse (#2941) (20090dc)</li> <li>Replace StringFormatter.validateProjectShortcode methods wi\u2026 (#2935) (80561af)</li> <li>Simplify and rename SipiService (#2929) (0835301)</li> <li>Use KnoraRepo instead of MessageRelay in ResourcesResponderV2 (#2927) (2358f23)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_24","title":"Documentation","text":"<ul> <li>Adjust Gravsearch documentation according to current state of code (DEV-2153) (#2938) (6aa1990)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_53","title":"Bug Fixes","text":"<ul> <li>BEOL timeouts (#2945) (f4a781b)</li> <li>Invalidate cached project information when adding an ontology to the project (DEV-2926) (#2949) (d0700a2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3051-2023-11-09","title":"30.5.1 (2023-11-09)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_21","title":"Maintenance","text":"<ul> <li>Bump sipi version (#2913) (303ca0f)</li> <li>Bump Sipi version to 3.8.3 (#2917) (e4c587a)</li> <li>Group dependency updates (#2906) (8b08c74)</li> <li>Load ontologies when querying for KnoraProjects (#2916) (21550ce)</li> <li>Patch updates (#2910) (3e95d71)</li> <li>PRs: Add 'perf' as allowed prefix for PR titles (#2915) (8d08e35)</li> <li>release-please: Add missing PR title prefixes to the workflow (#2918) (142fee0)</li> <li>Remove GravsearchQueryOptimisationFeature and simplify (#2909) (a91f6f6)</li> <li>Replace MessageRelay with KnoraProjectRepo in OntologyResponderV2 (#2920) (b093357)</li> <li>scala-steward: Improve dependency grouping (#2919) (dbda1cc)</li> <li>Update icu4j to v74.1 (#2912) (77e144b)</li> <li>Update sbt-javaagent to v0.1.8 (#2911) (e17cda2)</li> <li>Update tapir to v1.8.4 (#2922) (354662c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_54","title":"Bug Fixes","text":"<ul> <li>Fix project name, description and keywords value objects (2892) (#2908) (d1388bc)</li> <li>performance: Reverse order of topological sorting in Gravsearch queries (#2914) (d81a88e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3050-2023-10-27","title":"30.5.0 (2023-10-27)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_51","title":"Enhancements","text":"<ul> <li>Gravsearch: Enable ORDER BY external link (DEV-2704) (#2902) (1b7e02a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_55","title":"Bug Fixes","text":"<ul> <li>Startup and keep instrumentation server running (#2901) (a11af40)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_22","title":"Maintenance","text":"<ul> <li>Remove GitHub action which tests zio-http routes  (#2903) (1999b22)</li> <li>Remove/Fix some compiler warnings (#2899) (cb5dec6)</li> <li>Update dependencies (#2905) (855eb02)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3042-2023-10-23","title":"30.4.2 (2023-10-23)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_23","title":"Maintenance","text":"<ul> <li>Add missing component to release please GitHub action (#2896) (8751d52)</li> <li>Update PR title template (#2897) (3c3c45f)</li> <li>Update tapir-refined from 1.2.10 to 1.2.13 (#2886) (05d519a)</li> <li>Use correct syntax in release please configuration (#2895) (e8eced4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3041-2023-10-17","title":"30.4.1 (2023-10-17)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_24","title":"Maintenance","text":"<ul> <li>docker: Set container memory limits in local stack (DEV-2718) (#2874) (783d4fd)</li> <li>Improve PR title check (#2882) (6f4b962)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_25","title":"Documentation","text":"<ul> <li>Remove invalid ProjectAdminOntologyAllPermission (DEV-2814) (#2881) (1796d52)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3040-2023-10-12","title":"30.4.0 (2023-10-12)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_52","title":"Enhancements","text":"<ul> <li>add default value of projectRestrictedViewSize (DEV-2626) (#2873) (ff4d3a1)</li> <li>Add maintenance service for fixing top-left dimension values DEV-2803 (#2876) (82b715a)</li> <li>Add route that sets projectRestrictedViewSetting size (DEV-2304) (#2794) (738ab1c)</li> <li>Introduce /admin/maintenance and expose fix top left maintenance action DEV-2805 (#2877) (a6b8c2f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_56","title":"Bug Fixes","text":"<ul> <li>Improve performance for Gravsearch queries (#2857) (86cc4f2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_25","title":"Maintenance","text":"<ul> <li>Configure Scala Steward to produce PR with compatible title (#2867) (fbbe5ec)</li> <li>Do not log warn message for 405 and 404 status code responses (#2854) (d9fd81c)</li> <li>Introduce tapir on Pekko (#2870) (08accab)</li> <li>Migrate secure admin/projects endpoints to Tapir (#2872) (9f98f7e)</li> <li>Update dependencies DEV-2742 (#2868) (8ba3bb5)</li> <li>Update dependencies fuseki and app (#2856) (8123dbd)</li> <li>Update Fuseki DEV-2743 (#2869) (14f1911)</li> <li>update PR template (#2878) (6c04101)</li> <li>Update spring-security-core to 6.1.4 (#2865) (b75edaf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_26","title":"Documentation","text":"<ul> <li>remove inexisting pages from navigation bar (#2871) (dd2dfe6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3030-2023-09-28","title":"30.3.0 (2023-09-28)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_53","title":"Enhancements","text":"<ul> <li>update Shortname value object (#2851) (35187ca)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_26","title":"Maintenance","text":"<ul> <li>add GH action that checks PR title (#2849) (e6c4b90)</li> <li>Replace Akka with Pekko (#2848) (d343d8e)</li> <li>Update and rename check-pr-title workflow (#2852) (fde1faf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3021-2023-09-15","title":"30.2.1 (2023-09-15)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_27","title":"Maintenance","text":"<ul> <li>update dependencies (#2836) (6642192)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3020-2023-09-14","title":"30.2.0 (2023-09-14)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_54","title":"Enhancements","text":"<ul> <li>SystemAdmins receive a token which is valid on the dps-ingest api (#2835) (469f228)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_28","title":"Maintenance","text":"<ul> <li>Remove deprecated methods on JsonLDObject (#2832) (c8cf990)</li> <li>Update db image in docker-compose and Dependencies (#2833) (b0d48d0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3012-2023-09-08","title":"30.1.2 (2023-09-08)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_29","title":"Maintenance","text":"<ul> <li>Remove compiler warning stemming from -Wvalue-discard (#2831) (9071204)</li> <li>Remove type annotations which produce compiler warnings (#2829) (c754042)</li> <li>Remove unused or dead code (#2827) (36b835e)</li> <li>Update 'fuseki_request_duration' histogram bucket boundaries (#2830) (b7bef4e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3011-2023-09-06","title":"30.1.1 (2023-09-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_30","title":"Maintenance","text":"<ul> <li>Remove -HEAD from published docker tag when building a git tag (#2825) (108c480)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3010-2023-09-06","title":"30.1.0 (2023-09-06)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_55","title":"Enhancements","text":"<ul> <li>Add metrics to TriplestoreService SparqlQuery execution DEV-2627 (#2823) (8ce554b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_31","title":"Maintenance","text":"<ul> <li>Filter \"HEAD\" as branch name when building a release on a chec\u2026 (#2817) (818fb41)</li> <li>Introduce typed queries Ask, Select, Construct, Update and remove TriplestoreMessageHandler (#2816) (96c330d)</li> <li>Speedup /projects endpoint (#2824) (22d5146)</li> <li>Update app in docker-compose (#2821) (f124f85)</li> <li>Update Dependencies (#2822) (198d570)</li> </ul>"},{"location":"DSP-API/09-release-notes/#3000-2023-08-31","title":"30.0.0 (2023-08-31)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_4","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>remove experimental standoff route (DEV-2549) (#2795)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_57","title":"Bug Fixes","text":"<ul> <li>allow ordering by label in Gravsearch (DEV-2546) (#2798) (ca4553e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_32","title":"Maintenance","text":"<ul> <li>Cleanup TriplestoreService code (#2804) (6278fba)</li> <li>Derive version from git tag DEV-2575 (#2800) (5f612a8)</li> <li>remove experimental standoff route (DEV-2549) (#2795) (246f1da)</li> <li>Remove throws from OntologyResponderV2 DEV-2579  (#2801) (b0694ad)</li> <li>Remove throws from ResourceResponderV2 DEV-2580 (#2802) (55d362d)</li> <li>remove throws from values responder DEV-2568 (#2799) (42ee838)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2913-2023-08-16","title":"29.1.3 (2023-08-16)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_58","title":"Bug Fixes","text":"<ul> <li>query-patterns-should-not-be-separated DEV-2473 (#2786) (0aae817)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_33","title":"Maintenance","text":"<ul> <li>improve compiler warnings (DEV-1611) (#2784) (00379ce)</li> <li>improve file path resolving logic for generated test data files (#2783) (c2d6451)</li> <li>move integration tests to separate SBT project (#2772) (321e2dc)</li> <li>ProjectImportService: improve logging (#2781) (35ce421)</li> <li>Remove ValueUpdateRequestV2 and DeleteValueRequestV2 NO-TICKET (#2779) (577e4ec)</li> <li>Speed up value creation and update DEV-2473 (#2778) (5e5a3ea)</li> <li>update dependencies (#2793) (eb85ba5)</li> <li>Use sttp client for dsp-ingest download (#2777) (c431ccf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_27","title":"Documentation","text":"<ul> <li>minor Gravsearch docs fixes (#2782) (35c87f4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2912-2023-08-02","title":"29.1.2 (2023-08-02)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_34","title":"Maintenance","text":"<ul> <li>update dependencies (#2770) (6e3857e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2911-2023-07-24","title":"29.1.1 (2023-07-24)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_35","title":"Maintenance","text":"<ul> <li>add some OCI docker image labels to DSP-API for DataDog source code linking (INFRA-328) (#2750) (b3296dc)</li> <li>bump Jena Fuseki version to 4.9.0 (#2761) (92b3ca3)</li> <li>fix expired token in SIPI test (#2755) (fd1ce2b)</li> <li>reorganize test data (#2757) (9b68d1c)</li> <li>Simplify GroupStatus model (#2741) (0b6d102)</li> <li>simplify test data in repository (#2753) (a2a7fb7)</li> <li>tidy up scripts (#2754) (8bb261f)</li> <li>Use JwtService to generate a jwt in SipiIT (#2756) (70037b0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2910-2023-07-06","title":"29.1.0 (2023-07-06)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_59","title":"Bug Fixes","text":"<ul> <li>Align path variable for export and import routes to use Shortcode (#2734) (8cc2c62)</li> <li>Remove file path from temporaryUrl in upload response of Sipi (#2737) (00e3b39)</li> <li>Update dsp-ingest endpoint that moved to <code>projects</code> in DspIngestClient (#2735) (592bfc8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_56","title":"Enhancements","text":"<ul> <li>Dsp-ingest integration for import/export of projects DEV-2297 (#2722) (12402f3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_36","title":"Maintenance","text":"<ul> <li>Add docker compose configuration for api accessing ingest (#2736) (6ef3d17)</li> <li>Introduce JwtConfig and expose as layer (#2719) (5737e18)</li> <li>optimize isEntityInUse queries, use ASK (#2739) (0cfa3d4)</li> <li>Remove ontology responsibility from AppRouter (#2740) (69f0d67)</li> <li>Rename Shortcode everywhere and use its type in KnoraProject property (NO-TICKET) (#2724) (f01c319)</li> <li>standarise shortname naming (NO-TICKET) (#2733) (990030d)</li> <li>TriplestoreServiceLive: minor improvements (#2721) (d31ba01)</li> <li>update dependencies (#2717) (ff712bf)</li> <li>Use Duration type for AppConfig properties (NO-TICKET) (#2720) (2b2b551)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2901-2023-06-22","title":"29.0.1 (2023-06-22)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_60","title":"Bug Fixes","text":"<ul> <li>Make Sipi handle multiple <code>KnoraAuthentication*</code> cookies correctly (DEV-2271) (#2713) (1330d2b)</li> <li>Multiple cookies are separated by <code>;</code> not by <code>,</code> (#2715) (c317efc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_37","title":"Maintenance","text":"<ul> <li>Add dsp-ingest to docker-compose.yml  (#2712) (64e72be)</li> <li>Add sipi auth tests for knora.json (NO-Ticket) (#2711) (85a30a5)</li> <li>fix invalid links in CHANGELOG (DEV-2251) (#2699) (2419f58)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2900-2023-06-08","title":"29.0.0 (2023-06-08)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_5","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>deactivate API V1 routes (DEV-2223) (#2685)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_61","title":"Bug Fixes","text":"<ul> <li>gravsearch and count queries include deleted resources for some queries with negation patterns (DEV-2189) (#2682) (668a734)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_38","title":"Maintenance","text":"<ul> <li>bump fuseki version to 4.8.0 (#2696) (135da99)</li> <li>merge or move UUID related methods (DEV-2192) (#2697) (93f7088)</li> <li>remove remove SIPI file migration route (DEV-2180) (#2683) (b2f0dff)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_57","title":"Enhancements","text":"<ul> <li>add export of assets (DEV-2106) (#2668) (0be6991)</li> <li>add import of trig file of export (DEV-2249) (#2680) (6fb0e8c)</li> <li>deactivate API V1 routes (DEV-2223) (#2685) (ee3cddc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2830-2023-05-25","title":"28.3.0 (2023-05-25)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_62","title":"Bug Fixes","text":"<ul> <li>add integration Test for Sipi and fix broken responses (NO-TICKET) (#2675) (f8c3aa0)</li> <li>Fix Sipi get file response if dsp-api responds with Not Found during permission check (NO-TICKET) (#2677) (4e1c6c2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_58","title":"Enhancements","text":"<ul> <li>Align authorization for all endpoints of knora-sipi (DEV-2175) (#2669) (ff59664)</li> <li>sipi: add clean temp dir cronjob (DEV-2090) (#2656) (7af1c27)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_39","title":"Maintenance","text":"<ul> <li>add more gravsearch metrics (#2666) (873eb46)</li> <li>add more tests for Sipi responses (NO-TICKET) (#2679) (74f49ca)</li> <li>Create license headers for all it files (NO-TICKET) (#2676) (a97ec6b)</li> <li>improve lucene handling in gravsearch (DEV-2148) (#2667) (bf5d4be)</li> <li>merge duplicated StringFormatter and value objects methods part 1 (DEV-2046) (#2672) (655590a)</li> <li>remove deprecated StringFormatter methods (#2658) (62eb63c)</li> <li>Remove GroupShortADM (NO-TICKET) (#2674) (3676fbf)</li> <li>Resolve compiler warning toObjsWithLang (NO-TICKET) (#2671) (dc7e2c2)</li> <li>sipi: increase healthcheck timeout and retries (#2670) (5dd994d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2820-2023-05-15","title":"28.2.0 (2023-05-15)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_63","title":"Bug Fixes","text":"<ul> <li>Fix bad substitution in export-moving-image-frames.sh (#2659) (9ee412c)</li> <li>Use copy instead of move for Sipi file migration (#2655) (1b8ffff)</li> <li>Use move for Sipi's file migration (#2657) (da0a9b8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_59","title":"Enhancements","text":"<ul> <li>add dedicated export route and zip trig file DEV-2129 (#2650) (12379aa)</li> <li>Add new route to migrate files (DEV-1721) (#2647) (971136f)</li> <li>Add support for new file structure within Sipi folders and move Sipi tmp directory cleanup to separate route (DEV-1715) (#2621) (13e2a6f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_40","title":"Maintenance","text":"<ul> <li>add basic metrics to gravsearch routes (DEV-2150) (#2661) (0a3cc8b)</li> <li>Add integration test for upload_without_processing route (#2651) (24910a4)</li> <li>ci: add actuated (#2652) (ab023bb)</li> <li>decouple ConstructToConstructTransformer from WhereTransformer (#2632) (e351592)</li> <li>extract rest and permission code from ProjectsResponderADM DEV-2106 (#2644) (1ba0007)</li> <li>Improve KnoraProject model  NO-TICKET (#2648) (8d08abd)</li> <li>Increase max post size (DEV-2125) (#2649) (bc6ffea)</li> <li>make construct transformer a service and move transformers to right package (#2645) (4129856)</li> <li>organize packages, cleanup and minor code improvements  DEV-2124 (#2646) (a5b030f)</li> <li>remove throws from ADM routes (DEV-2137) (#2654) (7e24663)</li> <li>remove throws from ListsResponderV1 &amp; OntologyResponderV1 &amp; ProjectsResponderV1 (DEV-1908) (#2627) (5eaf212)</li> <li>remove throws from ResourcesResponderV1 (DEV-2101) (#2635) (5e72661)</li> <li>streamline db initialization make commands (#2660) (82e53ee)</li> <li>update dependencies (#2642) (f4a1809)</li> <li>ziofy UsersRouteADM DEV-2105 (#2633) (4bb1770)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2812-2023-04-28","title":"28.1.2 (2023-04-28)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_64","title":"Bug Fixes","text":"<ul> <li>querying all projects don't return system projects (#2607) (68e88d9)</li> <li>search by label produces timeouts if too many resources match (DEV-2043) (#2591) (78479d3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_28","title":"Documentation","text":"<ul> <li>Add subproperty documentation to the cardinalities check (DEV-2039) (#2603) (e39cc85)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_41","title":"Maintenance","text":"<ul> <li>Add make command to init db from dev server (DEV-1989) (#2574) (ab6dcce)</li> <li>Extract methods from UpdateResourceMetadataRequestV2#fromJsonLD (NO-TICKET) (#2626) (11fc9db)</li> <li>Extract standoff related functions from StringFormatter (NO-TICKET) (#2609) (dbfb86e)</li> <li>improve export-moving-images-frames (#2615) (680f286)</li> <li>move Gravsearch SPARQL transformers to separate package (#2614) (3846c38)</li> <li>remove dsp-shared project (DEV-2045) (#2619) (772e77c)</li> <li>remove errorFun from IRI related methods (DEV-1996) (#2585) (12670fb)</li> <li>remove intermediate interfaces from query transformers (DEV-2077) (#2610) (954677b)</li> <li>remove knora explicit graph (#2623) (95c55e7)</li> <li>remove more intermediate interfaces (DEV-2078) (#2612) (2f33878)</li> <li>remove throws from health route and route utils (#2584) (fba1b2f)</li> <li>remove throws from UsersResponderV1 (DEV-2102) (#2629) (e31f846)</li> <li>remove upload_for_processing route (#2616) (4562a4a)</li> <li>Remove warnings by using non deprecated zio.logging functions (#2606) (04ad6bb)</li> <li>rename gravsearch related variables (#2618) (b975d01)</li> <li>rename gravsearch utils (DEV-2074) (#2608) (99acc8c)</li> <li>rework removing of type annotations (DEV-2079) (#2611) (461b0b6)</li> <li>streamline gravsearch type inspection (#2605) (f6e9eda)</li> <li>streamline SPARQL transformation (#2624) (c616581)</li> <li>update dependencies (#2602) (474b23c)</li> <li>ziofy AuthenticationRouteV2 * ListsRouteV2 * StandoffRouteV2 (DEV-2050) (#2589) (cc4b7ba)</li> <li>ziofy JsonLDObject accessor methods (DEV-2084) (#2613) (666ddcf)</li> <li>ziofy OntologiesRouteV2 (DEV-2052) (#2593) (c472ff7)</li> <li>ziofy ProjectRouteADM (DEV-2104) (#2630) (edfb127)</li> <li>ziofy ResourcesRouteV1 (DEV-2035) (#2587) (e36605d)</li> <li>ziofy ResourcesRouteV2 (DEV-2091) (#2625) (7285b3c)</li> <li>ziofy RouteUtilV1 and change deprecated code (DEV-2079) (#2628) (3dacbf4)</li> <li>ziofy SearchRouteV2 DEV-2088 (#2622) (3105996)</li> <li>ziofy ValuesRouteV2 (DEV-2051) (#2604) (b3f15db)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2811-2023-04-13","title":"28.1.1 (2023-04-13)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_65","title":"Bug Fixes","text":"<ul> <li>cardinality issues on subclasses after adding cardinalities to superclass (DEV-2026) (#2572) (20a243b)</li> <li>Gravsearch wrongly finds no results, if a query can be optimized down to only negations (DEV-1980) (#2576) (0612b9a)</li> <li>use 400 instead of 500 for invalid input in fulltext search (DEV-1829) (#2557) (51acceb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_42","title":"Maintenance","text":"<ul> <li>add webhook trigger for DEV deployment to workflow (INFRA-240) (#2577) (58304f6)</li> <li>distribute V2 value functions to proper objects (#2582) (fb6cbbc)</li> <li>fix docker-publish workflow output step failing (#2590) (7e29290)</li> <li>fix string returned by docker-image-tag containing special control characters (#2592) (ebee7d6)</li> <li>pulish sipi images on each commit on main (DEV-1997) (#2588) (727911d)</li> <li>remove CORS restriction from ZIO-HTTP routes (DEV-2015) (#2570) (f94bb82)</li> <li>remove errorFun from value conversion and extract to ValuesValidator (DEV-1993) (#2558) (6cd58e4)</li> <li>remove throwing from V1 Routes Assets, Authentication, Ckan (#2580) (7cb0d33)</li> <li>remove throwing in V1 Lists Route (DEV-2033) (#2579) (c64a41f)</li> <li>remove throwing in V1 Projects Route (DEV-2037) (#2581) (6b8bfc0)</li> <li>remove throws from V1 Search Responder(DEV-2038) (#2583) (2e6361f)</li> <li>Return BadRequest in v1 values API if an expected parameter\u2026 (#2561) (4a5a838)</li> <li>update dependencies (#2569) (644e085)</li> <li>upgrade Sipi base image to 2.8.1 DEV-2019 (#2586) (8d88659)</li> <li>ziofy ResourceTypesRouteV1 (DEV-2034) (#2578) (31a8206)</li> <li>ziofy StandoffRouteV1 (DEV-2031) (#2575) (d739dfe)</li> <li>ziofy UserRouteV1 (DEV-2028) (#2573) (222f757)</li> <li>ziofy ValuesRouteV1 (DEV-2012) (#2559) (0798fef)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2810-2023-03-29","title":"28.1.0 (2023-03-29)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_66","title":"Bug Fixes","text":"<ul> <li>Allow setting a cardinality in a three tier class hierarchy (DEV-1927) (#2542) (0dc76f0)</li> <li>Apply correct DAOP after changeing them (remove its caching) DEV-1965 (#2551) (72e5f92)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_60","title":"Enhancements","text":"<ul> <li>add separate route for local processing of files through sipi (#2519) (042f806)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_29","title":"Documentation","text":"<ul> <li>update Project IRI documentation (DEV-1786) (#2539) (230fca5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_43","title":"Maintenance","text":"<ul> <li>add a make target for parametrised database dump and upload (#2541) (94c38f2)</li> <li>add docker container healthcheck for dsp-api (INFRA-93) (#2549) (8bdc160)</li> <li>CI: pull all tags when checking out (#2532) (fc3a891)</li> <li>Publish a docker container for webapi and sipi on each commit t\u2026 (#2553) (b6f2590)</li> <li>Remove dead ZIOs from ProjectResponderADM and introduce project services (DEV-1998) (#2534) (b5619c2)</li> <li>remove deprecated fuseki config (#2552) (f6826fb)</li> <li>Remove publishing sipi docker image because this build is broken (DEV-1848) (#2556) (71f75fa)</li> <li>Remove unused code related to ziofied Responders (DEV-1958) (#2543) (f40d6cb)</li> <li>run integration tests against akka and zio routes (DEV-1585) (#2545) (e730ba4)</li> <li>StringFormatter: move values related methods to separate file removing errorFun (DEV-1905) (#2550) (ddcf912)</li> <li>ziofy Authenticator (DEV-1926) (#2540) (9878529)</li> <li>ziofy ResourceUtilV1 (DEV-1967) (#2546) (c6e0805)</li> <li>ziofy ResourceUtilV2 (DEV-1963) (#2544) (89eb033)</li> <li>ziofy RouteUtilADM (DEV-1968) (#2547) (00b7070)</li> <li>ziofy SearchResponderV2 and Gravsearch (DEV-1755) (#2538) (e708fc3)</li> <li>ziofy ValuesResponderV2 (DEV-1757) (#2536) (ca6f97a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2800-2023-03-17","title":"28.0.0 (2023-03-17)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_6","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>Allow special characters in full-text search (DEV-1712) (#2441)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_67","title":"Bug Fixes","text":"<ul> <li>Allow special characters in full-text search (DEV-1712) (#2441) (b3148a0)</li> <li>deleted properties in cardinalities should be included in the count query (DEV-1878) (#2530) (9ae80fd)</li> <li>doSipiPostUpdate to evaluate provided task only once (NO-TICKET) (#2521) (a3639c1)</li> <li>Invalidate the cache when changing the password (DEV-1814) (#2511) (1cf4727)</li> <li>Replace invalid character in usernames (#2510) (031c744)</li> <li>Slow Gravsearch Queries are not being logged (DEV-1838) (#2522) (fb254ad)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_30","title":"Documentation","text":"<ul> <li>minor improvements to permissions documentation (#2520) (e434f2c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_61","title":"Enhancements","text":"<ul> <li>Add all instances which violate the new cardinality to response (DEV-1861) (#2523) (5f22100)</li> <li>Add new upload route to Sipi without processing (DEV-1700) (#2457) (3cacc76)</li> <li>sipi: add support for ODD and RNG file formats (DEV-1271) (#2197) (4441035)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_44","title":"Maintenance","text":"<ul> <li>add JSON logging (DEV-931) (#2506) (f3bbce3)</li> <li>add logger name to text logging (DEV-1826) (#2514) (bcf83d2)</li> <li>bump SIPI version (DEV-1797) (#2507) (7e2dcd3)</li> <li>cleanup StringFormatter (NO-TICKET) (#2517) (ca418aa)</li> <li>CORS fails if allowed origins contain upper case letter (#2505) (de7337a)</li> <li>remove dsp-main (NO-TICKET) (#2513) (d7f2f19)</li> <li>Remove needless logging of all requests to /admin/projects (NO-TICKET) (#2529) (3a01d87)</li> <li>remove unused subprojects (NO-TICKET) (#2531) (45b7632)</li> <li>remove zio die from triplestore (NO-TICKET) (#2509) (d5e0076)</li> <li>Replace CacheServiceManager (DEV-1798) (#2503) (843d31d)</li> <li>Replace IIIFServiceManager (DEV-1799) (#2502) (22e456b)</li> <li>Replace TriplestoreServiceManager (DEV-1800) (#2501) (211b601)</li> <li>ziofy Cache (DEV-1824) (#2512) (1daeb55)</li> <li>ziofy CardinalityHandler and OntologyHelpers (NO-TICKET) (#2500) (d6fa2c0)</li> <li>ziofy ontology responder v2 (DEV-1753) (#2515) (3ac2379)</li> <li>ziofy ResourcesResponderV1 (DEV-1747) (#2486) (00ddc62)</li> <li>ziofy ResourcesResponderV2 (DEV-1754) (#2518) (e25284d)</li> <li>ziofy StandoffResponderV2 (DEV-1756) (#2498) (402ea3f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2710-2023-03-03","title":"27.1.0 (2023-03-03)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_68","title":"Bug Fixes","text":"<ul> <li>Filter out deleted subjects and objects when counting for cardinalities (DEV-1795) (#2499) (60e1833)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_31","title":"Documentation","text":"<ul> <li>add high level overview of the current domain entities to the documentation (DEV-1416) (#2431) (02db5ce)</li> <li>add missing documentation (DEV-1422) (#2482) (9667f7a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_62","title":"Enhancements","text":"<ul> <li>Add context for can set cardinalities failed responses (DEV-1768) (#2471) (16c137e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_45","title":"Maintenance","text":"<ul> <li>Add MessageRelay as a preparation for enabling us to migrate responders to ZIO DEV-1728 (#2453) (c61368a)</li> <li>add missing github-actions workflow (#2463) (8983c95)</li> <li>improve finding all graphs (#2470) (6de3c5d)</li> <li>Integrate zio-fied project responder in zio route DEV-1728 (#2460) (1ed0175)</li> <li>log request and user ID as log annotations (DEV-1233) (#2466) (bec6fe6)</li> <li>Move key frames extraction from store.lua to upload.lua (DEV-1716) (#2454) (34924e2)</li> <li>update dependencies (#2497) (d20b9ff)</li> <li>update SIPI version and adjust Lua scripts (DEV-1727) (#2462) (9884539)</li> <li>ziofy CkanResponderV1  DEV-1743 (#2473) (5a2d16c)</li> <li>ziofy CkanResponderV1 &amp; ListsResponderV1 (DEV-1743 DEV-1744) (#2474) (34c2d95)</li> <li>ziofy GroupsResponderADM DEV-1737 (#2461) (44c5d46)</li> <li>ziofy ListsResponderADM (DEV-1738) (#2467) (b5bd82b)</li> <li>ziofy ListsResponderV2 (DEV-1752) (#2479) (28d5b48)</li> <li>ziofy OntologyResponderV1 (DEV-1745) (#2475) (f8344ff)</li> <li>ziofy PermissionsResponderADM  DEV-1739 (#2468) (ba85b94)</li> <li>Ziofy ProjectsResponderADM DEV-1728 (#2459) (69c0640)</li> <li>ziofy ProjectsResponderV1 (DEV-1746) (#2476) (715c117)</li> <li>ziofy ResourceUtilV2 &amp; PermissionUtilADM (NO-TICKET) (#2485) (e2dcd43)</li> <li>ziofy SearchResponderV1 (DEV-1748) (#2480) (7711a47)</li> <li>ziofy SipiResponderADM DEV-1740 (#2469) (fcfdc39)</li> <li>ziofy StandoffResponderV1 (DEV-1749) (#2495) (6a13eb0)</li> <li>ziofy StandoffTagUtilV2 (NO-TICKET) (#2481) (1daf98b)</li> <li>ziofy StoresResponderADM DEV-1741 (#2472) (991d5b9)</li> <li>ziofy UsersResponderADM DEV-1742 (#2465) (208087e)</li> <li>ziofy UsersResponderV1 (DEV-1750) (#2478) (e8112f8)</li> <li>ziofy ValuesResponderV1 (DEV-1751) (#2496) (9b68e89)</li> <li>ziofy ValueUtilV1 (NO-TICKET) (#2484) (4f38ac2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2700-2023-02-16","title":"27.0.0 (2023-02-16)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_7","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>return empty list instead of an error on GET /admin/groups route (DEV-1599) (#2439)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_69","title":"Bug Fixes","text":"<ul> <li>CORS: explicitly assign allowed CORS methods (#2443) (99fe6fa)</li> <li>fix JVM metrics and logging DEV-1639 (#2426) (97eb0fc)</li> <li>return empty list instead of an error on GET /admin/groups route (DEV-1599) (#2439) (f966f7c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_63","title":"Enhancements","text":"<ul> <li>expose GET /admin/projects/[ iri | shortname | shortcode ]/{iri | shortname | shortcode }/admin-members as ZIO HTTP route (DEV-1587) (#2423) (d7c2cd6)</li> <li>expose GET /admin/projects/[ iri | shortname | shortcode ]/{iri | shortname |\u00a0shortcode }/members as ZIO HTTP route (DEV-1587)  (#2422) (b5300b5)</li> <li>expose GET /admin/projects/[iri | shortname | shortcode]/{projectIri | shortname | shortcode}/RestrictedViewSettings as ZIO HTTP route (DEV-1587)  (#2428) (8080951)</li> <li>expose GET /admin/projects/iri/{projectIri}/Keywords as ZIO HTTP route (DEV-1587)  (#2425) (3b86834)</li> <li>expose GET /admin/projects/Keywords as ZIO HTTP route (DEV-1587)  (#2424) (39607a2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_32","title":"Documentation","text":"<ul> <li>fix broken links in docs and remove unused files (#2433) (34df59d)</li> <li>replace/canset cardinality documentation (DEV-1564 &amp; DEV-1563) (#2420) (adf1a34)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_46","title":"Maintenance","text":"<ul> <li>add 0.0.0.0 to allowed origins in config (#2430) (9afd7a0)</li> <li>add complete in-memory triple store implementation (DEV-628) (#2432) (708c217)</li> <li>Add more tests for the ZIO HTTP routes (DEV-1695) (#2419) (84e2ead)</li> <li>Clean-up ZIO HTTP routes and related code (#2429) (1684718)</li> <li>cleanup remove unused shacl and redundant StringFormatter setup (#2438) (293f6a3)</li> <li>instrumentation: expose ZIO-HTTP metrics (DEV-1714) (#2452) (a76b6f9)</li> <li>Rename ITTestDataFactory (#2440) (dc8b4b5)</li> <li>update PR template and GH release action (#2427) (65180ef)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2620-2023-02-02","title":"26.2.0 (2023-02-02)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_70","title":"Bug Fixes","text":"<ul> <li>Search by label returns an Error when searching with a slash (DEV-1656) (#2406) (bb02464)</li> <li>Test file issue (#2418) (78612e0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_47","title":"Maintenance","text":"<ul> <li>cleanup Cache class, ie. scaladoc, renaming, code improvements (#2411) (5efa7ac)</li> <li>deps: change schedule of dependency updates check (#2414) (a5c7a38)</li> <li>deps: update scalafmt-core, kamon-core, kamon-scala-future (#2412) (a02408a)</li> <li>enable publishing docker image in both arm64 and amd64 architectures (DEV-1684) (#2410) (f224b24)</li> <li>rename ReplaceCardinalitiesRequestV2, remove old code, simplify and extract methods in OntologyResponder (#2389) (5a4f4b6)</li> <li>Replace Cardinality isStricterThan with isIncludedIn (#2405) (229b362)</li> <li>update Scala to 2.13.10 (#2415) (d501f59)</li> <li>upgrade dependencies (#2404) (0d78030)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_64","title":"Enhancements","text":"<ul> <li>add CORS to ZIO-HTTP routes (DEV-1619) (#2390) (8dad4b2)</li> <li>allow setting a cardinality given the count in the persisted data is compatible  DEV-1563 (#2416) (789bdd1)</li> <li>Allow setting new Cardinalities if they are more restrictive than the respective Cardinalities of a possibly existing super class (#2397) (dbde740)</li> <li>expose GET /admin/projects/iri/{project_iri}/allData as ZIO HTTP route (DEV-1587)  (#2413) (eefaf62)</li> <li>expose PUT /admin/projects/iri/{project_iri} as ZIO HTTP route (DEV-1587) (#2394) (a832868)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2610-2023-01-19","title":"26.1.0 (2023-01-19)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_71","title":"Bug Fixes","text":"<ul> <li>API starts up and reports healthy despite failing to load ontologies (#2363) (1696f7d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_65","title":"Enhancements","text":"<ul> <li>Add check for can a cardinality be set for specific class and property (#2382) (17e7064)</li> <li>Add mimetype image/jpx as accepted (#2378) (d590e38)</li> <li>expose DELETE /admin/projects as ZIO HTTP route (DEV-1587)  (#2386) (6059012)</li> <li>expose POST /admin/projects as ZIO HTTP route (DEV-1587) (#2376) (983bec7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_33","title":"Documentation","text":"<ul> <li>clean up ADRs and add new one for ZIO HTTP (#2380) (3a03733)</li> <li>Fix broken links in docs (#2392) (85d25e3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_48","title":"Maintenance","text":"<ul> <li>add authentication middleware (#2370) (73a18ff)</li> <li>Add tests for ZIO HTTP project routes (#2377) (88e067b)</li> <li>Cleanup and remove unused code (#2383) (6aaf1bf)</li> <li>Expose the zio-http port in docker-compose.yml for the frontend (DEV-1482) (#2381) (b11d493)</li> <li>fix manual release form branch (DEV-1519) (#2393) (97d7399)</li> <li>Remove deprecated Cardinality model (#2387) (3c13e3a)</li> <li>Suppress compiler warnings (#2368) (62e1193)</li> <li>switch zio http implementation from d11 to dev.zio (#2395) (0ef6d2f)</li> <li>update create-release.yml (#2371) (f97f1bd)</li> <li>update year in the copyright header (#2391) (d3740f8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2600-2023-01-05","title":"26.0.0 (2023-01-05)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_8","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>return external representation of ontology IRIs in admin routes (#2330)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_72","title":"Bug Fixes","text":"<ul> <li>return external representation of ontology IRIs in admin routes (#2330) (b58828a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_34","title":"Documentation","text":"<ul> <li>update admin documentation (#2328) (cedb603)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_49","title":"Maintenance","text":"<ul> <li>Add BEOL exception to UUID validation (DEV-1570) (#2349) (ed34df1)</li> <li>add docker healthcheck to SIPI image (INFRA-130) (#2359) (8554e3b)</li> <li>Add dorny/test-reporter for webapi test results DEV-1544 (#2322) (5c76338)</li> <li>add metrics endpoint (DEV-1555) (#2331) (b06f5b4)</li> <li>Add sbt-header plugin to webapi project and add missing headers (#2317) (afec4a7)</li> <li>add stack-without-app target (#2324) (5ec3223)</li> <li>Add test report generation for integration tests (DEV-1544) (#2325) (a61f227)</li> <li>Extract common code from responders into EntityAndClassIriS\u2026 (#2348) (238ed71)</li> <li>make it possible to debug integration tests with sbt or IDE (#2327) (3a222bb)</li> <li>refactor project route for ZIO HTTP (#2338) (e5be1db)</li> <li>remove methods that gets project and members by UUID (#2346) (2c8da6c)</li> <li>remove PR2255 plugin and revert project IRIs (DEV-1571) (#2350) (86a19ab)</li> <li>remove Redis cache implementation leftovers (DEV-1503) (#2290) (a678dc5)</li> <li>Remove unused dependency to gatling (#2361) (baca8a8)</li> <li>remove unused route GET /admin/stores (#2329) (1e11655)</li> <li>replace Spray-JSON with ZIO-JSON in health route (#2360) (1b8e74b)</li> <li>simplify health route setup (#2337) (26e9596)</li> <li>Simplify layer setup for integration-tests and reduce to two layers (#2339) (94836e8)</li> <li>Split long running integration tests and fast unit tests (DEV-1537) (#2315) (5b4d601)</li> <li>update dependencies (#2347) (560b84f)</li> <li>update dependencies (#2358) (6007266)</li> <li>upgrade Apache Jena Fuseki docker image to v2.0.11 (DEV-1299) (#2362) (c91d284)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_66","title":"Enhancements","text":"<ul> <li>Add resources/info endpoint (DEV-792) (#2309) (c3f96a9)</li> <li>expose GET /admin/projects as ZIO HTTP route (#2366) (b19f81c)</li> <li>expose GET /admin/projects/[shortname | shortcode]/{shortname | shortcode} as ZIO HTTP routes (#2365) (9907cdf)</li> <li>Expose GET /admin/projects/iri/{iriUrlEncoded} as zio-http route (#2355) (2f42906)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2500-2022-12-02","title":"25.0.0 (2022-12-02)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_9","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>partOf and sequenceOf properties are not marked as isEditable (#2268)</li> <li>change all project IRIs to contain UUID instead of shortcode (DEV-1400) (#2255)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_73","title":"Bug Fixes","text":"<ul> <li>Allow warn logging for requests/responses which are failures (#2273) (92531ce)</li> <li>Ask timeouts with GetUserADM (DEV-1443) (#2267) (3f77b6e)</li> <li>Deprecation warnings for SCryptPasswordEncoder (#2308) (86dc389)</li> <li>Don't log hashes (DEV-1442) (#2265) (adaf4b0)</li> <li>Exclude characters with special meaning in Lucene Query Parser syntax from searchbylabel search (DEV-1446) (#2269) (b359916)</li> <li>fix RepositoryUpdater that is not timing out during repository upgrade (DEV-1534) (#2313) (213a5f0)</li> <li>Increase timeout when emptying repository (DEV-1506) (#2289) (39771ed)</li> <li>key frame extraction (DEV-1513) (#2300) (729f071)</li> <li>partOf and sequenceOf properties are not marked as isEditable (#2268) (68f19c3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_67","title":"Enhancements","text":"<ul> <li>projectsADM: add possibility to get project and members by UUID (DEV-1408) (#2272) (4b66682)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_35","title":"Documentation","text":"<ul> <li>improve permissions documentation (#2314) (f4004b2)</li> <li>publish architectural decision records (#2301) (be6bcd0)</li> <li>Remove warning which considers v2 as not production ready (#2282) (0246522)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_50","title":"Maintenance","text":"<ul> <li>add GH workflow to publish manually from branches (#2316) (6f5020e)</li> <li>change all project IRIs to contain UUID instead of shortcode (DEV-1400) (#2255) (f2b2584)</li> <li>Decrease timeout for emptying repository (DEV-1518) (#2310) (a83000b)</li> <li>Introduce ZIO HTTP (DEV-1425) (#2256) (7ae6d24)</li> <li>make possible to run Publish GH Action manually (DEV-1519) (#2297) (bfe578a)</li> <li>SIPI: add timestamp to some SIPI Lua logs (#2311) (8f3f19f)</li> <li>slight improvements to PR template (#2312) (ca3a8d0)</li> <li>update dependencies (#2264) (41d5315)</li> <li>update dependencies (#2281) (725bc0f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2408-2022-10-18","title":"24.0.8 (2022-10-18)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_74","title":"Bug Fixes","text":"<ul> <li>User can be project admin without being project member (DEV-1383) (#2248) (c1aa8f0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_51","title":"Maintenance","text":"<ul> <li>automatically clean sipi image files (DEV-1395) (#2237) (eddb34d)</li> <li>fix project name (#2239) (5af65eb)</li> <li>update dependencies (#2247) (2eefcbc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2407-2022-10-07","title":"24.0.7 (2022-10-07)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_75","title":"Bug Fixes","text":"<ul> <li>DSP-API project IRI validation fails for BEOL project IRI (#2240) (4b63a72)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2406-2022-10-06","title":"24.0.6 (2022-10-06)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_76","title":"Bug Fixes","text":"<ul> <li>Ask timeouts when requesting projects (DEV-1386) (#2235) (1820367)</li> <li>User can't be edited by project admin (DEV-1373) (#2232) (e0b1433)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2405-2022-10-05","title":"24.0.5 (2022-10-05)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_77","title":"Bug Fixes","text":"<ul> <li>Timeout for multiple Gravsearch queries (DEV-1379) (#2234) (c63567b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_52","title":"Maintenance","text":"<ul> <li>app actor cleanup (#2230) (a67c98f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2404-2022-09-29","title":"24.0.4 (2022-09-29)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_78","title":"Bug Fixes","text":"<ul> <li>API returns invalid file URLs, due to including the port (#2223) (1a0b09c)</li> <li>Value update or deletion doesn't work for properties of other ontology (DEV-1367) (#2222) (472b375)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2403-2022-09-21","title":"24.0.3 (2022-09-21)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_53","title":"Maintenance","text":"<ul> <li>application actor (DEV-956) (#2166) (4852425)</li> <li>remove swagger route and docs annotations (DEV-1335) (#2203) (bec5b8a)</li> <li>Replace Settings with AppConfig (DEV-1312) (#2202) (9b76417)</li> <li>update dependencies (#2214) (3706acd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2402-2022-09-08","title":"24.0.2 (2022-09-08)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_79","title":"Bug Fixes","text":"<ul> <li>sipi: remove support for audio/mp4 file format (DEV-1300) (#2195) (122bf52)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_54","title":"Maintenance","text":"<ul> <li>Adjust GitHub template (DEV-1313) (#2183) (5782494)</li> <li>bump dependencies (#2196) (2fbf664)</li> <li>Ignore push on certain branches from tests (DEV-1112) (#2187) (e0a0fbb)</li> <li>Improve GitHub actions (DEV-1112) (#2182) (71c772f)</li> <li>Skip tests with success (DEV-1112) (#2188) (82703d7)</li> <li>v3: add project slice (DEV-1009) (#2076) (bd2d31e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2401-2022-08-26","title":"24.0.1 (2022-08-26)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_80","title":"Bug Fixes","text":"<ul> <li>cardinality: Check cardinality with multiple inherited classes (DEV-1189) (#2164) (f183d7d)</li> <li>Fuseki doesn't stop after client's timeout (DEV-1190) (#2175) (90f86b5)</li> <li>v2 test: fix test data collection (#2174) (468df8f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_36","title":"Documentation","text":"<ul> <li>update file formats (DEV-1185) (#2158) (4fab193)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_55","title":"Maintenance","text":"<ul> <li>add codacy coverage reporter (#2177) (c30390f)</li> <li>add code coverage (#2135) (1a02f49)</li> <li>add code coverage (#2163) (b026442)</li> <li>add coverage upload to codecov (#2179) (5d4e57e)</li> <li>feature-toggles: remove remnants of feature toggles (DEV-217) (#2176) (ed1cbd0)</li> <li>remove github action for deploying docs (DEV-824) (#2155) (a55eef4)</li> <li>update dependencies (#2173) (79b88d2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2400-2022-08-08","title":"24.0.0 (2022-08-08)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_10","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>add isSequenceOf to knora-base ontology (DEV-745) (#2061)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_81","title":"Bug Fixes","text":"<ul> <li>sipi: SIPI returns 404 instead of images if cookie is invalid (DEV-1135) (#2142) (eb797f0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_68","title":"Enhancements","text":"<ul> <li>add isSequenceOf to knora-base ontology (DEV-745) (#2061) (74366d4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_56","title":"Maintenance","text":"<ul> <li>dependencies: bulk upgrade dependencies (#2144) (4602150)</li> <li>update dependencies (4cd9812)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2303-2022-08-02","title":"23.0.3 (2022-08-02)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_82","title":"Bug Fixes","text":"<ul> <li>triplestore-connector: stack crashes on invalid search (DEV-1154) (#2140) (e5426dc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_57","title":"Maintenance","text":"<ul> <li>dependencies: update akka-http-cors to 1.1.3 (#2103) (5d0d522)</li> <li>dependencies: update jwt-spray-json to 9.0.2 (#2111) (6e54443)</li> <li>dependencies: update Saxon-HE to 11.4 (#2137) (08c9f68)</li> <li>dependencies: update scalatest to 3.2.13 (#2138) (a345079)</li> <li>dependencies: update spring-security-core to 5.6.6 (#2130) (c83645d)</li> <li>dependencies: update spring-security-core to 5.7.2 (#2139) (3a12562)</li> <li>dependencies: update titanium-json-ld to 1.3.1 (#2104) (4850525)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2302-2022-07-29","title":"23.0.2 (2022-07-29)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_83","title":"Bug Fixes","text":"<ul> <li>ontology: link value property is still not editable after updating the property metadata (DEV-1116) (#2133) (d5b48db)</li> <li>sipi: cookie parsing can cause an error which leads to 404 for images (DEV-1135) (#2134) (bd023a5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_58","title":"Maintenance","text":"<ul> <li>add dependency checking (#2100) (8017b1f)</li> <li>add dependency checking (#2102) (856277b)</li> <li>Improve validation of GUI elements and GUI attributes (DEV-1082) (#2098) (5cec8ba)</li> <li>v3: add role slice (DEV-1010) (#2099) (6920716)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2301-2022-07-19","title":"23.0.1 (2022-07-19)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_84","title":"Bug Fixes","text":"<ul> <li>ontology: Don't accept list values without gui attribute (DEV-775) (#2089) (74a14e1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2300-2022-07-14","title":"23.0.0 (2022-07-14)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_11","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>transform valueHasUri values from node to string type (DEV-1047) (#2094)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_85","title":"Bug Fixes","text":"<ul> <li>authentication: make cookie name unique between environments (#2095) (7d420a4)</li> <li>ontology: existing cardinalities get duplicated in the triplestore when adding a new cardinality to a class (DEV-937) (#2092) (9fa26db)</li> <li>transform valueHasUri values from node to string type (DEV-1047) (#2094) (e1d8d95)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2201-2022-07-08","title":"22.0.1 (2022-07-08)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_86","title":"Bug Fixes","text":"<ul> <li>authentication: make cookie name unique between environments (#2091) (680021e)</li> <li>value: make impossible to set list root node as a value (DEV-973) (#2088) (94d2b46)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_59","title":"Maintenance","text":"<ul> <li>triplestore: ZIO-fying triplestore service (DSP-904) (#2059) (9e038ec)</li> <li>v3: finish user slice (DEV-671) (#2078) (48592ad)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2200-2022-06-30","title":"22.0.0 (2022-06-30)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_12","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>add upgrade plugin that fixes invalid date serialisations (#2081)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_87","title":"Bug Fixes","text":"<ul> <li>add upgrade plugin that fixes invalid date serialisations (#2081) (3a0902e)</li> <li>ontology: link value property is not editable after editing the property metadata (DEV-1037) (#2084) (09688f5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_60","title":"Maintenance","text":"<ul> <li>temporarily ignore KnoraSipiIntegrationV2ITSpec (#2085) (59f93b3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2101-2022-06-23","title":"21.0.1 (2022-06-23)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_88","title":"Bug Fixes","text":"<ul> <li>fix RepositoryUpdater by removing old way of adding plugins (#2082) (6599b68)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2100-2022-06-23","title":"21.0.0 (2022-06-23)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_13","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>fix valueHasUri bad values and missing types (DEV-1036) (#2079)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_89","title":"Bug Fixes","text":"<ul> <li>fix valueHasUri bad values and missing types (DEV-1036) (#2079) (de1e5a4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2041-2022-06-16","title":"20.4.1 (2022-06-16)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_90","title":"Bug Fixes","text":"<ul> <li>admin: return list labels and comments sorted by language (#2074) (f3a66cb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_61","title":"Maintenance","text":"<ul> <li>add missing client test data (DEV-979) (#2072) (54446bc)</li> <li>audio: remove not required properties (#2070) (96362f4)</li> <li>exceptions: Create sbt project \"shared\" and move exceptions (DEV-990) (#2075) (c09392d)</li> <li>move value objects to separate project (DEV-615) (#2069) (b55eb12)</li> <li>responder manager as plain case class (#2073) (7f55697)</li> <li>user: add user project (DEV-586) (#2063) (0c5ec03)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2040-2022-05-25","title":"20.4.0 (2022-05-25)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_91","title":"Bug Fixes","text":"<ul> <li>cache: cache does not update correctly when an ontology is modified (DEV-939) (#2068) (8541519)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_69","title":"Enhancements","text":"<ul> <li>admin: add list child node deletion route (DEV-729) (#2064) (179ad19)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2031-2022-05-12","title":"20.3.1 (2022-05-12)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_92","title":"Bug Fixes","text":"<ul> <li>authentication: Add bouncyCastle dependency (DEV-922) (#2065) (4ac799d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2030-2022-05-12","title":"20.3.0 (2022-05-12)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_93","title":"Bug Fixes","text":"<ul> <li>Problem with updating cache after deleting comments (DEV-508) (#2060) (a9fda7e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_62","title":"Maintenance","text":"<ul> <li>check that the expected Fuseki version is present (DEV-331) (#2057) (2a695ec)</li> <li>deps: bump ZIO version (DEV-893) (#2056) (933f91e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_70","title":"Enhancements","text":"<ul> <li>add Romansh as supported language (DEV-557) (#2053) (58971c8)</li> <li>gravsearch: improve gravsearch performance by using unions in prequery (DEV-492) (#2045) (40354a7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2021-2022-05-05","title":"20.2.1 (2022-05-05)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_94","title":"Bug Fixes","text":"<ul> <li>projectsADM: fix cache issue in getSingleProjectADM (#2054) (77bfadc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_63","title":"Maintenance","text":"<ul> <li>IIIFService: zio-fying iiif service (DEV-801) (#2044) (224b664)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2020-2022-04-28","title":"20.2.0 (2022-04-28)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_95","title":"Bug Fixes","text":"<ul> <li>Cleaning sipi tmp folder results in an error when there are lots of files (DEV-316) (#2052) (33e6896)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_71","title":"Enhancements","text":"<ul> <li>error-handling: return status 504 instead of 500 for triplestore timeout exception (DEV-749) (#2046) (a47096e)</li> <li>ontology: allow deleting comments of classes (DEV-804) (#2048) (eca9206)</li> <li>ontology: allow deleting comments of properties (DEV-696) (#2042) (985c5fd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_64","title":"Maintenance","text":"<ul> <li>formatting-logging: reformat scala code and change logging policy (DEV-839) (#2051) (5e4e914)</li> <li>formatting: reformat turtle files (DEV-430) (#2050) (0389e52)</li> <li>triplestore: remove embedded-jena-tdb related code (#2043) (a5ea62e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2011-2022-04-14","title":"20.1.1 (2022-04-14)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_96","title":"Bug Fixes","text":"<ul> <li>sipi: extract frames from video even without aspect ratio (DEV-802) (#2041) (57d40f7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_37","title":"Documentation","text":"<ul> <li>ingest: Add accepted file formats to documentation (DEV-677) (#2038) (f72e7a0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_65","title":"Maintenance","text":"<ul> <li>cacheservice: use ZIO (DEV-546) (#2022) (521150f)</li> <li>triplestore: remove graphDB support (#2037) (bf17bca)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2010-2022-04-07","title":"20.1.0 (2022-04-07)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_97","title":"Bug Fixes","text":"<ul> <li>docs/requirements.txt to reduce vulnerabilities (#2034) (b07600d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_66","title":"Maintenance","text":"<ul> <li>distinguish between compile, runtime and test dependencies (#2028) (7cb326f)</li> <li>inventory and upgrade of dependencies (DEV-478) (#2033) (470b77f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_38","title":"Documentation","text":"<ul> <li>replace Bazel and Intellij documentation with SBT and VSCode (DEV-607) (#2035) (603efef)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_72","title":"Enhancements","text":"<ul> <li>ontology: Add support for additional ontologies (DEV-512) (#2029) (50e3186)</li> <li>sipi: upload video support (DEV-771 / DEV-207) (#1952) (47f2e28)</li> </ul>"},{"location":"DSP-API/09-release-notes/#2000-2022-03-31","title":"20.0.0 (2022-03-31)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_14","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>ontology: make knora-base:lastModificationDate required property (#2018)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_67","title":"Maintenance","text":"<ul> <li>fix docker containers timezone (#2027) (6bbb3fe)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_73","title":"Enhancements","text":"<ul> <li>ontology: make knora-base:lastModificationDate required property (#2018) (64cdce9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1900-2022-03-24","title":"19.0.0 (2022-03-24)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_15","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>authentication: add server specific issuer to JWT token (DEV-555) (#2024)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_98","title":"Bug Fixes","text":"<ul> <li>authentication: add server specific issuer to JWT token (DEV-555) (#2024) (4bd5b2f)</li> <li>version: fix displayed versions (#2026) (566285c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_68","title":"Maintenance","text":"<ul> <li>improve logging (DEV-634) (#2021) (85d1057)</li> <li>remove warnings (DEV-621) (#2015) (70630f1)</li> <li>test: get tests to run in vs code (DEV-601) (#2020) (747d13d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1800-2022-03-08","title":"18.0.0 (2022-03-08)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_16","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>standoff: return XML alongside HTML for textValue with custom standoff mapping and default XSL transformation (DEV-201) (#1991)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_99","title":"Bug Fixes","text":"<ul> <li>Use correct docker image tag after publishing (DEV-614) (#2016) (7649515)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_69","title":"Maintenance","text":"<ul> <li>improve code structure (DEV-612) (#2012) (eac0049)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_74","title":"Enhancements","text":"<ul> <li>standoff: return XML alongside HTML for textValue with custom standoff mapping and default XSL transformation (DEV-201) (#1991) (2548b8f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1753-2022-03-04","title":"17.5.3 (2022-03-04)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_100","title":"Bug Fixes","text":"<ul> <li>RepositoryUpdater: make sure temp directories are deleted (#2010) (9c9a1bd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_39","title":"Documentation","text":"<ul> <li>fix permissions design documentation (DEV-495) (#1997) (5154adc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_70","title":"Maintenance","text":"<ul> <li>fix docker image name (DEV-574) (#2007) (7a186ba)</li> <li>remove fuseki image creation and change sipi image creation to sbt (DEV-544) (#2011) (eed2767)</li> <li>start on a functional domain design implementation for ontologies (DEV-227) (#2009) (54cee7a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1752-2022-02-23","title":"17.5.2 (2022-02-23)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_101","title":"Bug Fixes","text":"<ul> <li>permissions: Update default object access permissions (DEV-514) (#2004) (04a8d3d)</li> <li>timeout: Increase timeouts (DEV-536) (#2005) (f1f8005)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_71","title":"Maintenance","text":"<ul> <li>BAZEL to SBT migration (DEV-508) (#2002) (38faa9e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1751-2022-02-16","title":"17.5.1 (2022-02-16)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_72","title":"Maintenance","text":"<ul> <li>deps: upgrade Jena Fuseki docker image to v2.0.8 (#2001) (3e2eccc)</li> <li>deps: upgrate Jena API to v4.4.0 (#1999) (3eecc69)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_40","title":"Documentation","text":"<ul> <li>fix markdown issues in documentation (DEV-504) (#2003) (ff6b4cf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1750-2022-02-11","title":"17.5.0 (2022-02-11)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_75","title":"Enhancements","text":"<ul> <li>ontologies: make comments optional for property and class creation (DEV-342) (#1996) (a3c286c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1741-2022-02-07","title":"17.4.1 (2022-02-07)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_73","title":"Maintenance","text":"<ul> <li>deps: upgrade Jena to v4.3.2 (DEV-473) (#1995) (216dcb4)</li> <li>deps: upgrade titanium-json-ld to v1.2.0 &amp; jakarta-json to v2.0.1 (DEV-335) (#1993) (ad01bf9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1740-2022-02-04","title":"17.4.0 (2022-02-04)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_102","title":"Bug Fixes","text":"<ul> <li>version-upgrade: add upgrade plugin for ArchiveRepresentation and DeletedResource (DEV-467) (#1992) (e1566e9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_74","title":"Maintenance","text":"<ul> <li>add support for building native API and Fuseki Docker images on Apple M1 (DEV-435) (#1987) (ab80e72)</li> <li>refactor test models (DEV-264) (#1975) (65952f9)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_76","title":"Enhancements","text":"<ul> <li>resource: add ArchiveRepresentation to API V1 (DEV-393) (DEV-394) (#1984) (65b88a2)</li> <li>UUID: add IRI validation that allows only to create IRIs using UUID version 4 and 5 (DEV-402) (#1990) (74d4344)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1731-2022-01-28","title":"17.3.1 (2022-01-28)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_103","title":"Bug Fixes","text":"<ul> <li>ontology: Sub-properties of link values aren't created correctly (DEV-426) (#1985) (70a8b08)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_75","title":"Maintenance","text":"<ul> <li>deps: bump fuseki image to 2.0.7 (DEV-389) (#1983) (fcbfb1d)</li> <li>license: update the license (DEV-374) (#1981) (044fdc5)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1730-2022-01-17","title":"17.3.0 (2022-01-17)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_104","title":"Bug Fixes","text":"<ul> <li>ontology: DSP-API creates wrong partOfValue property (DEV-216) (#1978) (27b5c86)</li> <li>resource: return sensible CreationDate for DeletedResource (#1979) (1658103)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_77","title":"Enhancements","text":"<ul> <li>resource: add support for 7z files in ArchiveRepresentation (DEV-322) (#1977) (729689c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_76","title":"Maintenance","text":"<ul> <li>admin: refactor projects &amp; users value objects (DEV-240) (#1976) (563d252)</li> <li>CI: add disk cache and other cleanup (DEV-388) (#1982) (e590d12)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1720-2022-01-10","title":"17.2.0 (2022-01-10)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_105","title":"Bug Fixes","text":"<ul> <li>search: Return matching sub-nodes when searching for list label (DEV-158) (#1973) (7e8c759)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_78","title":"Enhancements","text":"<ul> <li>return a DeletedResource or DeletedValue instead of 404 if a deleted resource or value is requested (DEV-226) (#1960) (c78e252)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1710-2021-12-20","title":"17.1.0 (2021-12-20)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_79","title":"Enhancements","text":"<ul> <li>listsADM: add canDeleteList route (#1968) (c276625)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_77","title":"Maintenance","text":"<ul> <li>deps: bump log4j to 2.17.0 and Fuseki to 4.3.2 (DEV-334) (#1972) (afb6587)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1704-2021-12-17","title":"17.0.4 (2021-12-17)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_106","title":"Bug Fixes","text":"<ul> <li>authentication: delete cookie (in chrome) on logout (DEV-325) (#1970) (b2c9204)</li> <li>candeletecardinalities: return canDoResponse of false instead of throwing an exception for inherited cardinalities (DEV-314) (#1966) (55b5d4b)</li> <li>ontology: cardinality of one can be added to classes as long as not used in data (#1958) (2cebac7)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_78","title":"Maintenance","text":"<ul> <li>bump logging libraries (DEV-333) (#1969) (f680c4f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1703-2021-12-14","title":"17.0.3 (2021-12-14)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_79","title":"Maintenance","text":"<ul> <li>bump Fuseki (log4shell fix) (IT-4) (#1965) (86fa251)</li> <li>projectMetadataV2: remove projectMetadataV2 implementation (#1962) (7b95d66)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1702-2021-12-10","title":"17.0.2 (2021-12-10)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_80","title":"Maintenance","text":"<ul> <li>bump db version (add shiro.ini)(DEV-302)(#1961) (d147bf6)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1701-2021-12-06","title":"17.0.1 (2021-12-06)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_81","title":"Maintenance","text":"<ul> <li>fix issues with fuseki (DEV-277) (#1953) (4c1a5f1)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_41","title":"Documentation","text":"<ul> <li>Updated readme (#1956) (774b68d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1700-2021-11-25","title":"17.0.0 (2021-11-25)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_17","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>add archive representation to DSP-API (DEV-17) (#1926)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_82","title":"Maintenance","text":"<ul> <li>bump fuseki base container version (#1946) (cf8bdec)</li> <li>bump java and sipi version (only security updates) (DEV-263) (#1950) (fe6106f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_80","title":"Enhancements","text":"<ul> <li>add archive representation to DSP-API (DEV-17) (#1926) (0123a8f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1601-2021-11-22","title":"16.0.1 (2021-11-22)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_107","title":"Bug Fixes","text":"<ul> <li>canDeleteCardinalities: canDeleteCardinalities checks too eagerly (DEV-187) (#1941) (298ba47)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1600-2021-11-19","title":"16.0.0 (2021-11-19)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_18","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>listsADM: remove new lists implementation (DEV-160) (#1932) (24e34dd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_108","title":"Bug Fixes","text":"<ul> <li>projectsADM: clear cache after changing project (DEV-239) (#1943) (17c5c09)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_83","title":"Maintenance","text":"<ul> <li>groupsADM: improve value objects implementation (DEV-160) (#1932) (24e34dd)</li> <li>listsADM: remove new lists implementation (DEV-160) (#1932) (24e34dd)</li> <li>release v16.0.0 (8e5f494)</li> <li>release v16.0.0 (ba6923d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1513-2021-11-19","title":"15.1.3 (2021-11-19)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_19","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>listsADM: remove new lists implementation (DEV-160) (#1932) (24e34dd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_109","title":"Bug Fixes","text":"<ul> <li>projectsADM: clear cache after changing project (DEV-239) (#1943) (17c5c09)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_84","title":"Maintenance","text":"<ul> <li>groupsADM: improve value objects implementation (DEV-160) (#1932) (24e34dd)</li> <li>listsADM: remove new lists implementation (DEV-160) (#1932) (24e34dd)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1512-2021-11-12","title":"15.1.2 (2021-11-12)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_85","title":"Maintenance","text":"<ul> <li>bump bazel (#1938) (39417e6)</li> <li>improve validation handling (DEV-228) (#1937) (94d7d3f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1511-2021-11-09","title":"15.1.1 (2021-11-09)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_110","title":"Bug Fixes","text":"<ul> <li>list: add support for special characters in list update (DEV-200) (#1934) (3c2865c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_86","title":"Maintenance","text":"<ul> <li>init-db: init db test data from test server (DEV-198) (#1936) (1c24bea)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1510-2021-11-03","title":"15.1.0 (2021-11-03)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_111","title":"Bug Fixes","text":"<ul> <li>users: fix bug adding user to group or project (DEV-184) (#1925) (a24a320)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_81","title":"Enhancements","text":"<ul> <li>add value objects to list routes - old and new (DEV-65) (#1917) (7752a36)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_87","title":"Maintenance","text":"<ul> <li>bump sipi version (DEV-188) (#1931) (d302b5e)</li> <li>change license to Apache 2.0 (DEV-82) (#1924) (2d39a1f)</li> <li>deps: bump mkdocs from 1.1.2 to 1.2.3 in /docs (#1927) (cbbf1b6)</li> <li>fix warnings (DEV-80) (#1929) (1368769)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1503-2021-10-21","title":"15.0.3 (2021-10-21)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_112","title":"Bug Fixes","text":"<ul> <li>list: find list labels in full-text search (#1922) (cc3b06c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1502-2021-10-14","title":"15.0.2 (2021-10-14)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_113","title":"Bug Fixes","text":"<ul> <li>authenticator: improve performance (#1914) (d6a0d27)</li> <li>groups: update test data and documentation to use language specific group descriptions (DEV-123) (#1921) (0f45b51)</li> <li>removing cardinality of a link property (DEV-90) (#1919) (c79c194)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_88","title":"Maintenance","text":"<ul> <li>groups: refactor groups route using value objects (DEV-66) (#1913) (1cd98e6)</li> <li>knora-base: fix typo (#1918) (720aa65)</li> <li>projects: cleaner value objects usage in addProject route (DEV-119) (#1920) (32b9e49)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1501-2021-09-29","title":"15.0.1 (2021-09-29)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_114","title":"Bug Fixes","text":"<ul> <li>candeletecardinalities: return correct response on route negative case (DEV-36) (#1910) (652c747)</li> <li>escape-special-characters: escape special characters in user routes (DSP-1557) (#1902) (689d92a)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_89","title":"Maintenance","text":"<ul> <li>contributors: remove contributors file (DEV-77) (#1911) (7d925b6)</li> <li>projects: refactor projects route with value objects (DEV-64) (#1909) (172cf77)</li> <li>reformatting Scala files (DSP-1897) (#1908) (8df70a2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1500-2021-09-14","title":"15.0.0 (2021-09-14)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_20","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>ontology: use patch instead of delete for deleting cardinalities (DSP-1700) (#1903)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_42","title":"Documentation","text":"<ul> <li>add username to changeable attributes (DSP-1895) (#1904) (719cd0d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_90","title":"Maintenance","text":"<ul> <li>ontology: use patch instead of delete for deleting cardinalities (DSP-1700) (#1903) (91ef4ec)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1410-2021-08-19","title":"14.1.0 (2021-08-19)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_115","title":"Bug Fixes","text":"<ul> <li>ontology V2: use internal iri when updating a property (DSP-1868) (#1898) (a746f65)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_82","title":"Enhancements","text":"<ul> <li>v2-ontologies: add remove cardinalities from class if property not used in resources (DSP-1700) (#1869) (a30668b)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1401-2021-08-04","title":"14.0.1 (2021-08-04)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_116","title":"Bug Fixes","text":"<ul> <li>add-test-file: add response file for test case (DSP-1841) (#1894) (028e685)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1400-2021-08-02","title":"14.0.0 (2021-08-02)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_21","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>projects: Change shortname to xsd:NCName forma, Escape special character in payloads of projects endpoints (DSP-1555 ) (#1886)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_117","title":"Bug Fixes","text":"<ul> <li>api-v2, api-admin: ontology name and project name should be URL safe (DSP-1749) (#1889) (17601a7)</li> <li>permissions: reject malformed doap and ap create/update request (DSP-1328) (#1890) (3e3a3ce)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_83","title":"Enhancements","text":"<ul> <li>customIRIs: custom IRIs must contain a UUID (DSP-1763) (#1884) (593d9cb)</li> <li>projects: Change shortname to xsd:NCName forma, Escape special character in payloads of projects endpoints (DSP-1555 ) (#1886) (b3c2d5f)</li> <li>resource-metadata: return resource metadata after metadata update request (DSP-1828) (#1893) (a4e878a)</li> <li>video: add support for video/mp4 to both v1 and v2 (DSP-1204) (#1891) (83fb4b8)</li> </ul>"},{"location":"DSP-API/09-release-notes/#13120-2021-06-24","title":"13.12.0 (2021-06-24)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_84","title":"Enhancements","text":"<ul> <li>resourceHistoryEvents: route for resource history events (DSP-1749) (#1882) (f86de53)</li> </ul>"},{"location":"DSP-API/09-release-notes/#13110-2021-06-17","title":"13.11.0 (2021-06-17)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_85","title":"Enhancements","text":"<ul> <li>events: update resource last modification date event (#1877) (d5e70ba)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_91","title":"Maintenance","text":"<ul> <li>build: cleanup (#1880) (749e8ea)</li> <li>cache-service: add in-memory implementation (#1870) (61531ab)</li> <li>gh-ci: update docs deployment (DSP-1741) (#1878) (ff65323)</li> </ul>"},{"location":"DSP-API/09-release-notes/#13100-2021-06-09","title":"13.10.0 (2021-06-09)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_86","title":"Enhancements","text":"<ul> <li>gravsearch: use layer info for topological order permutations (DSP-1389) (#1872) (b49d5ba)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_43","title":"Documentation","text":"<ul> <li>prepare documentation for docs.dasch.swiss (DSP-1721) (#1873) (66751a0)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1392-2021-06-02","title":"13.9.2 (2021-06-02)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_92","title":"Maintenance","text":"<ul> <li>sipi: add comments (#1864) (06e8b0c)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_44","title":"Documentation","text":"<ul> <li>ontology: update term (#1865) (cd37580)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1391-2021-05-28","title":"13.9.1 (2021-05-28)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_93","title":"Maintenance","text":"<ul> <li>bazel: bump bazel version (#1866) (c754cbf)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1390-2021-05-25","title":"13.9.0 (2021-05-25)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_87","title":"Enhancements","text":"<ul> <li>api-v2: Add routes for checking whether ontology entities can be changed (DSP-1621) (#1861) (fdd098f)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1380-2021-05-19","title":"13.8.0 (2021-05-19)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_118","title":"Bug Fixes","text":"<ul> <li>api-v2: Update subclasses in ontology cache when base class changes (DSP-1643) (#1860) (beb951d)</li> <li>gravsearch: don't move the patterns with resource IRI after topological sorting (DSP-1620) (#1856) (6022c91)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_94","title":"Maintenance","text":"<ul> <li>documentation: bug fix in documentation deployment (DSP-1605) (bb852c9)</li> <li>documentation: bug fix in documentation deployment (DSP-1605) (#1854) (999a2bb)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_88","title":"Enhancements","text":"<ul> <li>api-v2: Change GUI element and attribute of a property (DSP-1600) (#1855) (ce9ba3a)</li> <li>api-v2: Generate IIIF manifest (DSP-50) (#1784) (74feb2c)</li> <li>conf: Rule to dump prod data and load locally (DSP-1485) (#1857) (161ea31)</li> <li>ontology: Allow adding new property to a resource class in use (DSP-1629) (#1859) (061875e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1370-2021-05-06","title":"13.7.0 (2021-05-06)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_119","title":"Bug Fixes","text":"<ul> <li>doc: correct remaining incorrect copyright dates (#1847) (d1473ed)</li> <li>gravsearch: Keep rdf:type knora-api:Resource when needed. (#1835) (e561d94)</li> <li>lists: Escape special characters in comment, label, and name of a list node (DSP-1529) (#1846) (f96c069)</li> <li>test-data: change webern shortcode in test data (DSP-1520) (#1843) (5f06a10)</li> <li>values v1 route: fix geoname case (DSP-1487) (#1839) (9d0e93e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_45","title":"Documentation","text":"<ul> <li>replace knora by dsp or dsp-api in documentation (DSP-1469) (#1836) (923abe8)</li> <li>v1: improve search docs (#1848) (5a81f73)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_89","title":"Enhancements","text":"<ul> <li>api-v2: Add route for changing GUI order of cardinalities (#1850) (d8dbb4f)</li> <li>api-v2: Return events describing version history of resources and values of a project ordered by data (DSP-1528) (#1844) (84f7c14)</li> <li>ext search v1: add support for URI values (DSP-1522) (#1842) (b119757)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_95","title":"Maintenance","text":"<ul> <li>bumb Bazel to version with apple silicon support (#1852) (286d289)</li> <li>bump scala to 2.13 (#1851) (5feb915)</li> <li>deps: bump versions (DSP-1569) (#1849) (f69f008)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1360-2021-03-16","title":"13.6.0 (2021-03-16)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_90","title":"Enhancements","text":"<ul> <li>api-v2: Improve error message when an XSLT transformation file is not found (DSP-1404) (#1831) (153a674)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1351-2021-03-11","title":"13.5.1 (2021-03-11)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_120","title":"Bug Fixes","text":"<ul> <li>OntologiesRouteV2: Reject internal ontology names in external schema (DSP-1394) (#1827) (e392bf1)</li> <li>OntologyResponderV2: Fix check when updating ontology label and comment (DSP-1390) (#1826) (26cce48)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1350-2021-03-08","title":"13.5.0 (2021-03-08)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_121","title":"Bug Fixes","text":"<ul> <li>replaceCardinalities.scala.txt: Fix blank node insertion. (#1829) (d24c5d2)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_96","title":"Maintenance","text":"<ul> <li>gh-ci: update release please configuration (DSP-1382) (#1825) (7ce4b65)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_91","title":"Enhancements","text":"<ul> <li>Add support for audio files (DSP-1343) (#1818) (7497023)</li> <li>gravsearch: Optimise Gravsearch queries using topological sort (DSP-1327) (#1813) (efbecee)</li> <li>store: Return 404 if the triplestore returns 404. (#1828) (5250f6d)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1340-2021-02-17","title":"13.4.0 (2021-02-17)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_122","title":"Bug Fixes","text":"<ul> <li>Lists: fix bug in shifting the second of two children after deletion of the first one. (#1820) (d92bb01)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_92","title":"Enhancements","text":"<ul> <li>projects: add default set of permissions when creating new project (DSP-1347) (#1822) (b7c71ca)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1331-2021-02-09","title":"13.3.1 (2021-02-09)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_123","title":"Bug Fixes","text":"<ul> <li>Lists: fix bug in deleting the single child of a node (DSP-1355) (#1816) (1d06572)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1330-2021-02-05","title":"13.3.0 (2021-02-05)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_93","title":"Enhancements","text":"<ul> <li>sipi: add storing of original and sidecar (DSP-1318) (#1808) (022ed7e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1320-2021-02-04","title":"13.2.0 (2021-02-04)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_124","title":"Bug Fixes","text":"<ul> <li>api-v1: Optimise SPARQL queries. (#1814) (4edc27c)</li> <li>Lists: Repositioning the node when new position equals length of new parent's children (DSP-1322) (#1811) (3fead13)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_94","title":"Enhancements","text":"<ul> <li>api-v1: Add support for PDF files (DSP-1267) (#1797) (c3b2e84)</li> <li>api-v2: Allow resubmitting existing class/property lablels/comments. (#1812) (6a13852)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_97","title":"Maintenance","text":"<ul> <li>make targets for adding metadata (DSP-1289) (#1810) (9c1a70a)</li> <li>salsah1: delete from repository (#1805)(DSP-1294) (3251a74)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1311-2021-01-30","title":"13.1.1 (2021-01-30)","text":""},{"location":"DSP-API/09-release-notes/#maintenance_98","title":"Maintenance","text":"<ul> <li>gh-ci: Bring back the client-test-data command to github actions (#1804) (e6b0fbf)</li> <li>revert release 13.1.0 (#1800) (565e5ac)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1310-2021-01-29","title":"13.1.0 (2021-01-29)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_125","title":"Bug Fixes","text":"<ul> <li>api-v1: Optimise link value queries for Fuseki (DSP-1243) (#1791) (b1e1b9e)</li> <li>api-v2: Don't allow an invalid cardinality on a boolean property (DSP-1236) (#1788) (3d5f802)</li> <li>gravsearch: Handle UNION scopes with FILTER correctly (DSP-1240) (#1790) (61d2e86)</li> <li>HttpTriplestoreConnector: Always parse triplestore responses as UTF-8. (#1789) (61d2e86)</li> <li>permissions: fix getting builtin groups while creating a permission (DSP-1296 ) (#1799) (d390014)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_99","title":"Maintenance","text":"<ul> <li>gh-ci: fix issue in the release process (#1782) (afe61b7)</li> <li>ghi-ci: google chat release notification (#1785) (4718cdc)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_95","title":"Enhancements","text":"<ul> <li>permissions: add delete permissions: (DSP-1169) (#1787) (3fe8c14)</li> <li>store: Return a clearer exception when a triplestore read timeout occurs. (#1795) (0eeb3b3)</li> </ul>"},{"location":"DSP-API/09-release-notes/#1300-2021-01-11","title":"13.0.0 (2021-01-11)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_22","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>New features and refactoring (#1779)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_126","title":"Bug Fixes","text":"<ul> <li>(dependencies) add the missing dependency (#1755) (0e37d21)</li> <li>api-v2: Change link value comment (#1582) (faa2e55)</li> <li>api-v2: Don't check file extensions of XSL files and Gravsearch templates (DSP-1005) (#1749) (905766f)</li> <li>api-v2: Fix custom datatypes in knora-api simple ontology (#1601) (e0cfd4e)</li> <li>api-v2: Fix generated SPARQL for updating property comment (#1693) (7b70339)</li> <li>api-v2: Fix ontology deletion (#1584) (70b0841)</li> <li>api-v2: Fix post-update check for resource with standoff link (DSP-841) (#1728) (35d449f)</li> <li>failing repository upgrade at startup (DSP-654) (#1712) (0d6b4ee)</li> <li>gravsearch: Prevent duplicate results (#1626) (9313b88)</li> <li>gravsearch: When link property compared in filter, don't compare link value property, too (#1699) (a3b1665)</li> <li>init db scripts (DSP-511) (#1681) (d4505ce)</li> <li>loading of data (DSP-445) (#1669) (3f8d406)</li> <li>OntologyResponderV2: Add a global ontology cache lock (#1637) (1853865)</li> <li>OntologyResponderV2: Fix ontology cache update when ontology metadata changed (#1709) (4f57977)</li> <li>server header (DSP-537) (#1691) (8d7bee8)</li> <li>sipi makefile (#1616) (73a0afe)</li> <li>sipi: Don't expect API v1 status code (DSP-1114) (#1763) (3236d25)</li> <li>sipi: Improve performance of file value query (#1697) (8214877)</li> <li>test: Fix typos in IRIs in anything-data.ttl. (#1625) (23d51ce)</li> <li>upgrade: Fix log output. (#1774) (b43fab0)</li> <li>webapi: unique username/email check on change user (#1561) (4f26e22)</li> <li>rdf-api: Use the Jena RDF API implementation by default (DSP-1153) (1772) (389feb4)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_46","title":"Documentation","text":"<ul> <li>api-v2: Document what happens when a resource has a link to a deleted resource (#1685) (1c88651)</li> <li>fix broken links (#1688) (9c0292c)</li> <li>fix make targets docker-build and docker-publish (#1694) (d06b6a6)</li> <li>Update README (DSP-1142) (#1771) (7ba7fc6)</li> <li>Update required mkdocs package (#1725) (27de65e)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_100","title":"Maintenance","text":"<ul> <li>api-v2: Delete obsolete files. (#1634) (e80bf52)</li> <li>api-v2: Switch from JSONLD-Java to Titanium (#1715) (9e28e5b)</li> <li>build: Bump testcontainers version. (#1723) (24ae1d3)</li> <li>build: Update ScalaTest (DSP-919) (#1745) (bbaeadd)</li> <li>build: Upgrade Sipi to 3.0.0-rc.8 (DSP-916) (#1743) (23395fc)</li> <li>bump sipi to rc.7 (DSP-733) (#1721) (b635495)</li> <li>gh-ci: Fix gren issue (#1666) (2dc5361)</li> <li>gh-ci: Publish on release only (#1662) (787dca8)</li> <li>rdf-api: Use the Jena RDF API implementation by default (DSP-1153) (#1772) (389feb4)</li> <li>Remove obsolete functions from StringFormatter. (#1640) (5fa6de4)</li> <li>Update ci workflow release notes (#1707) (d8e0b39)</li> <li>gh-ci CI is failing to test upgrade correctly (DSP-667) (#1073) (13cbdab)</li> <li>bazel Update Bazel maven rules to see if it fixes problems with macOS Big Sur (DSP-1099) (#1761) (a2c9941)</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_96","title":"Enhancements","text":"<ul> <li>Add an RDF processing fa\u00e7ade (2nd iteration) (DSP-1083) (#1759) (346873d)</li> <li>Add feature toggles (DSP-910) (#1742) (2e6db2e)</li> <li>Add time value type (#1403) (d925c85)</li> <li>api-v1: Change API v1 file uploads to work like API v2 (DSP-41, PR 3) (#1722) (a824bcc)</li> <li>api-v2: Accept custom new value IRI when updating value (#1698) (4d8f867)</li> <li>api-v2: Accept custom timestamps in update/delete requests (#1686) (0fbe5a8)</li> <li>api-v2: Add an RDF processing fa\u00e7ade (DSP-1020) (#1754) (9170419)</li> <li>api-v2: Add metadata routes (DSP-662) (#1734) (bf48968)</li> <li>api-v2: Add support for text file upload (DSP-44) (#1664) (a88d20d)</li> <li>api-v2: Add test data. (#1704) (de14ab1)</li> <li>api-v2: Allow querying for rdfs:label in Gravsearch (#1649) (d56004b)</li> <li>api-v2: Control JSON-LD nesting via an HTTP header (DSP-1084) (#1758) (b13eecf)</li> <li>api-v2: Make inference optional in Gravsearch (#1696) (166a260)</li> <li>api-v2: Optionally return file values in full-text search results (DSP-1191) (#1776) (01f59bd)</li> <li>api-v2: Remove client code generation (#1610) (6977ab3)</li> <li>api-v2: Remove ForbiddenResource (#1615) (992596e)</li> <li>api-v2: Return value UUID on value creation and update (#1602) (cbed601)</li> <li>api-v2: Specify custom IRIs when creating resources/values (#1646) (135b039)</li> <li>clientapi: Change method signature. (#1583) (c2a2559)</li> <li>gh-ci: Release please and update gh actions (DSP-1168) (#1777) (593ffab)</li> <li>gravsearch: Allow comparing variables representing resource IRIs (#1713) (f359c8e)</li> <li>gravsearch: Remove deprecated functions (#1660) (5d3af46)</li> <li>New features and refactoring (#1779) (9a5fb77)</li> <li>rdf-api: Add a general-purpose SHACL validation utility (DSP-930) (#1762) (bfd3192)</li> <li>sipi: Improve error message if XSL file not found (#1590) (bbb42f6)</li> <li>triplestores: Support Apache Jena Fuseki (#1375) (82f8a55)</li> <li>upgrade: Update repository on startup (#1643) (0127dca)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1300-rc25-08122020","title":"v13.0.0-rc.25 (08/12/2020)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_97","title":"Enhancements","text":"<ul> <li>#1768 | DSP-1106 Update Permission</li> <li>#1767 | enhancement(triplestore): Use N-Quads instead of TriG for repository upgrade (DSP-1129)</li> <li>#1764 | DSP-1033 Reposition List Nodes</li> <li>#1762 | feat(rdf-api): Add a general-purpose SHACL validation utility (DSP-930)</li> <li>#1759 | feat: Add an RDF processing fa\u00e7ade (2nd iteration) (DSP-1083)</li> <li>#1760 | (DSP-1031) Delete list items</li> <li>#1753 | Edit lists routes (DSP-597 )</li> <li>#1758 | feat(api-v2): Control JSON-LD nesting via an HTTP header (DSP-1084)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_127","title":"Bug fixes","text":"<ul> <li>#1763 | fix(sipi): Don't expect API v1 status code (DSP-1114)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_47","title":"Documentation","text":"<ul> <li>#1771 | docs: Update README (DSP-1142)</li> </ul>"},{"location":"DSP-API/09-release-notes/#maintenance_101","title":"Maintenance","text":"<ul> <li>#1770 | refactor: Use java.nio.file.Path instead of java.io.File (DSP-1124)</li> <li>#1765 | DSP-1094 Upgrade Swagger version</li> <li>#1766 | style: Add Scalafmt config file</li> <li>#1769 | style: Reformat code with Scalafmt (DSP-1137)</li> <li>#1754 | feat(api-v2): Add an RDF processing fa\u00e7ade (DSP-1020)</li> <li>#1757 | build: bazel workspace cleanup</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1300-rc24-13112020","title":"v13.0.0-rc.24 (13/11/2020)","text":"<ul> <li>#1756 | DSP-1052 : Migration task to replace empty strings with dummy \"FIXME\"</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1300-rc23-09112020","title":"v13.0.0-rc.23 (09/11/2020)","text":""},{"location":"DSP-API/09-release-notes/#bug-fixes_128","title":"Bug fixes","text":"<ul> <li>#1755 | DSP-1029: Add the missing dependency</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1300-rc22-09112020","title":"v13.0.0-rc.22 (09/11/2020)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_23","title":"Breaking changes","text":"<ul> <li>#1724 | test: Collect client test data from E2E tests (DSP-724)</li> <li>#1727 | DSP-740 Update List Name</li> <li>#1722 | feat(api-v1): Change API v1 file uploads to work like API v2 (DSP-41, PR 3)</li> <li>#1233 | feat(api-v1): Change API v1 file uploads to work like API v2</li> <li>#1708 | Get Project Permissions</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_98","title":"Enhancements","text":"<ul> <li>#1403 | feat: Add time value type</li> <li>#1537 | build: Add env var to set triplestore actor pool</li> <li>#1649 | feat(api-v2): Allow querying for rdfs:label in Gravsearch</li> <li>#1742 | feat: Add feature toggles (DSP-910)</li> <li>#1741 | DSP-804: create a child node with a custom IRI</li> <li>#1734 | feat(api-v2): Add metadata routes (DSP-662)</li> <li>#1739 | enhancement(api-v2): Optimise checking isDeleted (DSP-848)</li> <li>#1664 | feat(api-v2): Add support for text file upload (DSP-44)</li> <li>#1652 | DSP-377 Support Islamic calendar</li> <li>#1717 | enhancement(gravsearch): Optimise queries by moving up statements with resource IRIs</li> <li>#1713 | feat(gravsearch): Allow comparing variables representing resource IRIs</li> <li>#1710 | update ontology metadata with a comment</li> <li>#1704 | feat(api-v2): Add test data</li> <li>#1703 | Add comments to ontology metadata</li> <li>#1686 | feat(api-v2): Accept custom timestamps in update/delete requests</li> <li>#1692 | Create Permissions</li> <li>#1696 | feat(api-v2): Make inference optional in Gravsearch</li> <li>#1697 | fix(sipi): Improve performance of file value query</li> <li>#1698 | feat(api-v2): Accept custom new value IRI when updating value</li> <li>#1700 | hierarchically ordered Sequence of base classes</li> <li>#1689 | build: bump SIPI to v3.0.0-rc.5 (DSP-547)</li> <li>#1679 | Gravsearch optimisations</li> <li>#1663 | build: add support for SIPI v3.0.0-rc.3 (DSP-433)</li> <li>#1660 | feat(gravsearch): Remove deprecated functions</li> <li>#1653 | build:  dockerize fuseki (dsp-30)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_129","title":"Bug Fixes","text":"<ul> <li>#1626 | fix(gravsearch): Prevent duplicate results</li> <li>#1587 | fix (webapi): Add enforcing of restrictions for username and email</li> <li>#1576 | Add missing env var</li> <li>#1571 | fixed date string format</li> <li>#1564 | enable click on save button in case of recoverable error</li> <li>#1751 | DSP-1022 SIPI_EXTERNAL_HOSTNAME doesn't contain the external hostname</li> <li>#1749 | fix(api-v2): Don't check file extensions of XSL files and Gravsearch templates (DSP-1005)</li> <li>#1748 | DSP-756 Tests failing because Knora version header and route are incorrect</li> <li>#1746 | DSP-932: Don't allow missing StringLiteralV2 value if language tag given</li> <li>#1744 | DSP-917 Releases pushed to Dockerhub from DSP-API are \"dirty\"</li> <li>#1733 | DSP-470 Intermittent bind errors</li> <li>#1728 | fix(api-v2): Fix post-update check for resource with standoff link (DSP-841)</li> <li>#1723 | chore(build): Bump testcontainers version (DSP-755)</li> <li>#1706 | Fix of update of list node info and update of project info</li> <li>#1712 | fix: failing repository upgrade at startup (DSP-654)</li> <li>#1709 | fix(OntologyResponderV2): Fix ontology cache update when ontology metadata changed</li> <li>#1701 | reverse change of Permission JSONs</li> <li>#1693 | fix(api-v2): Fix generated SPARQL for updating property comment</li> <li>#1699 | fix(gravsearch): When link property compared in filter, don't compare link value property, too</li> <li>#1691 | fix: server header (DSP-537)</li> <li>#1681 | fix: init db scripts (DSP-511)</li> <li>#1669 | fix: loading of data (DSP-445)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_48","title":"Documentation","text":"<ul> <li>#1598 | doc: fix sipi docs link</li> <li>#1609 | fix complex schema url</li> <li>#1568 | fixed the URI for the query</li> <li>#1726 | PersmissionsDocs: remove the attribute</li> <li>#1725 | docs: Update required mkdocs package</li> <li>#1711 | update developer and create resource docs</li> <li>#1684 | developer guideline</li> <li>#1685 | docs(api-v2): Document what happens when a resource has a link to a deleted resource</li> <li>#1688 | docs: fix broken links</li> <li>#1694 | docs: fix publishing</li> <li>#1621 | fixing typos for list rendering</li> </ul>"},{"location":"DSP-API/09-release-notes/#other","title":"Other","text":"<ul> <li>#1750 | Update README.md</li> <li>#1747 | DSP-920 Renaming default github branch to \"main\" ;  Move to the same base branch</li> <li>#1740 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1738 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1736 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1730 | DSP-816: Generate client test data for health route</li> <li>#1719 | change possibly conflictual env var USERNAME (DSP-706)</li> <li>#1720 | DSP-620 Update release process</li> <li>#1714 | test: fix generation of test data (DSP-665)</li> <li>#1716 | bulid: fix sipi image version (DSP-677)</li> <li>#1718 | DSP-702 Add template for PRs</li> <li>#1715 | chore(api-v2): Switch from JSONLD-Java to Titanium</li> <li>#1707 | chore: Update ci workflow</li> <li>#1702 | Add PR labels (DSP-607)</li> <li>#1695 | refactor(gravsearch): Clarify optimisations</li> <li>#1678 | refactor: first steps towards more independent packages (DSP-513)</li> <li>#1680 | build: bump rules_docker and instructions for installing bazelisk</li> <li>#1674 | build: add mkdocs for documentation generation (DSP-460)</li> <li>#1480 | build: add bazel (DSP-437)</li> <li>#1666 | Fix gren issue in github actions workflow</li> <li>#1662 | Publish on release only</li> <li>#1661 | Automated release notes</li> </ul>"},{"location":"DSP-API/09-release-notes/#dependencies","title":"Dependencies","text":"<ul> <li>#1721 | chore: bump sipi to rc.7 (DSP-733)</li> <li>#1735 | DSP-496 Bump Apache Jena Fuseki and Apache Jena Libraries to 3.16</li> <li>#1737 | DSP-842 Bump used Bazel version to newly released 3.7.0</li> <li>#1743 | chore(build): Upgrade Sipi to 3.0.0-rc.8 (DSP-916)</li> <li>#1745 | chore(build): Update ScalaTest (DSP-919)</li> <li>#1752 | DSP-1017 Upgrade to Sipi v3.0.0-rc.9</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1300-rc21-09112020","title":"v13.0.0-rc.21 (09/11/2020)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_24","title":"Breaking changes","text":"<ul> <li>#1724 | test: Collect client test data from E2E tests (DSP-724)</li> <li>#1727 | DSP-740 Update List Name</li> <li>#1722 | feat(api-v1): Change API v1 file uploads to work like API v2 (DSP-41, PR 3)</li> <li>#1233 | feat(api-v1): Change API v1 file uploads to work like API v2</li> <li>#1708 | Get Project Permissions</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_99","title":"Enhancements","text":"<ul> <li>#1403 | feat: Add time value type</li> <li>#1649 | feat(api-v2): Allow querying for rdfs:label in Gravsearch</li> <li>#1742 | feat: Add feature toggles (DSP-910)</li> <li>#1741 | DSP-804: create a child node with a custom IRI</li> <li>#1734 | feat(api-v2): Add metadata routes (DSP-662)</li> <li>#1739 | enhancement(api-v2): Optimise checking isDeleted (DSP-848)</li> <li>#1664 | feat(api-v2): Add support for text file upload (DSP-44)</li> <li>#1652 | DSP-377 Support Islamic calendar</li> <li>#1717 | enhancement(gravsearch): Optimise queries by moving up statements with resource IRIs</li> <li>#1713 | feat(gravsearch): Allow comparing variables representing resource IRIs</li> <li>#1710 | update ontology metadata with a comment</li> <li>#1704 | feat(api-v2): Add test data</li> <li>#1703 | Add comments to ontology metadata</li> <li>#1686 | feat(api-v2): Accept custom timestamps in update/delete requests</li> <li>#1692 | Create Permissions</li> <li>#1696 | feat(api-v2): Make inference optional in Gravsearch</li> <li>#1697 | fix(sipi): Improve performance of file value query</li> <li>#1698 | feat(api-v2): Accept custom new value IRI when updating value</li> <li>#1700 | hierarchically ordered Sequence of base classes</li> <li>#1689 | build: bump SIPI to v3.0.0-rc.5 (DSP-547)</li> <li>#1679 | Gravsearch optimisations</li> <li>#1663 | build: add support for SIPI v3.0.0-rc.3 (DSP-433)</li> <li>#1660 | feat(gravsearch): Remove deprecated functions</li> <li>#1653 | build:  dockerize fuseki (dsp-30)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_130","title":"Bug Fixes","text":"<ul> <li>#1626 | fix(gravsearch): Prevent duplicate results</li> <li>#1587 | fix (webapi): Add enforcing of restrictions for username and email</li> <li>#1751 | DSP-1022 SIPI_EXTERNAL_HOSTNAME doesn't contain the external hostname</li> <li>#1749 | fix(api-v2): Don't check file extensions of XSL files and Gravsearch templates (DSP-1005)</li> <li>#1748 | DSP-756 Tests failing because Knora version header and route are incorrect</li> <li>#1746 | DSP-932: Don't allow missing StringLiteralV2 value if language tag given</li> <li>#1744 | DSP-917 Releases pushed to Dockerhub from DSP-API are \"dirty\"</li> <li>#1733 | DSP-470 Intermittent bind errors</li> <li>#1728 | fix(api-v2): Fix post-update check for resource with standoff link (DSP-841)</li> <li>#1723 | chore(build): Bump testcontainers version (DSP-755)</li> <li>#1706 | Fix of update of list node info and update of project info</li> <li>#1712 | fix: failing repository upgrade at startup (DSP-654)</li> <li>#1709 | fix(OntologyResponderV2): Fix ontology cache update when ontology metadata changed</li> <li>#1701 | reverse change of Permission JSONs</li> <li>#1693 | fix(api-v2): Fix generated SPARQL for updating property comment</li> <li>#1699 | fix(gravsearch): When link property compared in filter, don't compare link value property, too</li> <li>#1691 | fix: server header (DSP-537)</li> <li>#1681 | fix: init db scripts (DSP-511)</li> <li>#1669 | fix: loading of data (DSP-445)</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_49","title":"Documentation","text":"<ul> <li>#1598 | doc: fix sipi docs link</li> <li>#1609 | fix complex schema url</li> <li>#1568 | fixed the URI for the query</li> <li>#1726 | PersmissionsDocs: remove the attribute</li> <li>#1725 | docs: Update required mkdocs package</li> <li>#1711 | update developer and create resource docs</li> <li>#1684 | developer guideline</li> <li>#1685 | docs(api-v2): Document what happens when a resource has a link to a deleted resource</li> <li>#1688 | docs: fix broken links</li> <li>#1694 | docs: fix publishing</li> <li>#1621 | fixing typos for list rendering</li> </ul>"},{"location":"DSP-API/09-release-notes/#other_1","title":"Other","text":"<ul> <li>#1750 | Update README.md</li> <li>#1747 | DSP-920 Renaming default github branch to \"main\" ;  Move to the same base branch</li> <li>#1740 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1738 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1736 | DSP-877 Upload api-client-test-data to GitHub release</li> <li>#1730 | DSP-816: Generate client test data for health route</li> <li>#1719 | change possibly conflictual env var USERNAME (DSP-706)</li> <li>#1720 | DSP-620 Update release process</li> <li>#1714 | test: fix generation of test data (DSP-665)</li> <li>#1716 | bulid: fix sipi image version (DSP-677)</li> <li>#1718 | DSP-702 Add template for PRs</li> <li>#1715 | chore(api-v2): Switch from JSONLD-Java to Titanium</li> <li>#1707 | chore: Update ci workflow</li> <li>#1702 | Add PR labels (DSP-607)</li> <li>#1695 | refactor(gravsearch): Clarify optimisations</li> <li>#1678 | refactor: first steps towards more independent packages (DSP-513)</li> <li>#1680 | build: bump rules_docker and instructions for installing bazelisk</li> <li>#1674 | build: add mkdocs for documentation generation (DSP-460)</li> <li>#1480 | build: add bazel (DSP-437)</li> <li>#1666 | Fix gren issue in github actions workflow</li> <li>#1662 | Publish on release only</li> <li>#1661 | Automated release notes</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1200-27012020","title":"v12.0.0 (27/01/2020)","text":""},{"location":"DSP-API/09-release-notes/#breaking-api-changes","title":"Breaking API Changes","text":"<ul> <li>#1439 JSON-LD Serialization of an xsd:dateTimeStamp</li> </ul>"},{"location":"DSP-API/09-release-notes/#new-features-and-enhancements","title":"New Features and Enhancements","text":"<ul> <li>#1509 Support lists admin endpoint</li> <li>#1466 Optimise generated SPARQL</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_131","title":"Bug Fixes","text":"<ul> <li>#1569 broken ark</li> <li>#1559 Admin lists: createChildNode should send a httpPost request, not httpPut</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1100-16122019","title":"v11.0.0 (16/12/2019)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_25","title":"Breaking Changes","text":"<ul> <li>#1344 Gravsearch ForbiddenResource result and permissions of linked resources</li> <li>#1202 Implement upload of PDF and text files in API v2. Users with files in Sipi under <code>/server</code> must move them to <code>/images</code> when upgrading.</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_132","title":"Bug Fixes","text":"<ul> <li>#1531 Sipi's mimetype_consistency fails with .bin file</li> <li>#1430 Creating the first resource with an image inside a project fails with Sipi not finding the project folder</li> <li>#924 Get dependent resources Iris</li> </ul>"},{"location":"DSP-API/09-release-notes/#v1011-27112019","title":"v10.1.1 (27/11/2019)","text":""},{"location":"DSP-API/09-release-notes/#v1010-27112019","title":"v10.1.0 (27/11/2019)","text":""},{"location":"DSP-API/09-release-notes/#v1000-22102019","title":"v10.0.0 (22/10/2019)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_26","title":"Breaking Changes","text":"<ul> <li>#1346 Richtext/HTML in page anchor link</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_100","title":"Enhancements","text":"<ul> <li>#1457 Upgrade sipi to 2.0.1</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_133","title":"Bug Fixes","text":"<ul> <li>#1460 Build banner in README is broken</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_50","title":"Documentation","text":"<ul> <li>#1481 build badge in README has broken link</li> </ul>"},{"location":"DSP-API/09-release-notes/#other_2","title":"Other","text":"<ul> <li>#1449 Add Makefile-based task execution</li> <li>#1401 Enable testing docs generation in Travis</li> </ul>"},{"location":"DSP-API/09-release-notes/#v910-26092019","title":"v9.1.0 (26/09/2019)","text":""},{"location":"DSP-API/09-release-notes/#enhancements_101","title":"Enhancements","text":"<ul> <li>#1421 Physically deleting a resource</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_51","title":"Documentation","text":"<ul> <li>#1407 Document ARK URLs for projects</li> </ul>"},{"location":"DSP-API/09-release-notes/#v900-29082019","title":"v9.0.0 (29/08/2019)","text":""},{"location":"DSP-API/09-release-notes/#breaking-changes_27","title":"Breaking Changes","text":"<ul> <li>#1411 Moved <code>/admin/groups/members/GROUP_IRI</code> to <code>/admin/groups/GROUP_IRI/members</code></li> <li>#1231 Change value permissions</li> <li>#763 refactor splitMainResourcesAndValueRdfData so it uses SparqlExtendedConstructResponse</li> </ul>"},{"location":"DSP-API/09-release-notes/#enhancements_102","title":"Enhancements","text":"<ul> <li>#1373 The startup ends in a thrown exception if the triplestore is not up-to-date</li> <li>#1364 Add support for Redis cache</li> <li>#1360 Build and publish Knora version specific docker images for GraphDB Free and SE</li> <li>#1358 Add admin route to dump project data</li> </ul>"},{"location":"DSP-API/09-release-notes/#bug-fixes_134","title":"Bug Fixes","text":"<ul> <li>#1394 Using dockerComposeUp to start the stack, fails to find Redis at startup</li> </ul>"},{"location":"DSP-API/09-release-notes/#documentation_52","title":"Documentation","text":"<ul> <li>#1386 Add lists admin API documentation</li> </ul>"},{"location":"DSP-API/09-release-notes/#other_3","title":"Other","text":"<ul> <li>#1412 Change release notes to be based on issues</li> </ul>"},{"location":"DSP-API/09-release-notes/#v800-14062019","title":"v8.0.0 (14/06/2019)","text":"<ul> <li>feature(webapi): Add GraphDB-Free startup support (#1351) - @subotic</li> <li>feature(webapi): Add returning of fixed public user information (#1348) - @subotic</li> <li>feat(api-v2): No custom permissions higher than defaults (#1337) - @benjamingeer</li> <li>feat(upgrade): Improve upgrade framework (#1345) - @benjamingeer</li> <li>test(webapi): Add new user authentication (#1201) - @subotic</li> <li>chore(webapi): Add request duration logging (#1347) - @subotic</li> <li>feat(api-v2): Make values citable (#1322) - @benjamingeer</li> <li>Leibniz ontology  (#1326) - @SepidehAlassi</li> <li>feature(webapi): add CORS allow header (#1340) - @subotic</li> <li>fix(sipi): Return permissions for a previous version of a file value. (#1339) - @benjamingeer</li> <li>fix(scripts): add admin ontology data to correct graph (#1333) - @subotic</li> <li>fix(sipi): Don't try to read a file value in a deleted resource. (#1329) - @benjamingeer</li> <li>docs(api-v2): Fix sample responses. (#1327) - @benjamingeer</li> <li>fix(api-v2): Fix typo. (#1325) - @benjamingeer</li> <li>Handle List Nodes in Response (#1321) - @tobiasschweizer</li> <li>feat(api-v2): Return standoff markup separately from text values (#1307) - @benjamingeer</li> <li>BEOL: Import comments for Meditationes (#1281) - @tobiasschweizer</li> <li>feat(triplestore): Log SPARQL query if triplestore doesn't respond. (#1292) - @benjamingeer</li> <li>Support list nodes in Gravsearch (#1314) - @tobiasschweizer</li> </ul>"},{"location":"DSP-API/09-release-notes/#v700-03052019","title":"v7.0.0 (03/05/2019)","text":"<ul> <li>fix(api-v2): Cache base class IRIs correctly when creating/updating class (#1311) - @benjamingeer</li> <li>chore(standoff): Use Base64-encoded UUIDs in standoff tags. (#1301) - @benjamingeer</li> <li>feat(api-v2): Allow a resource to be created as a specified user (#1306) - @benjamingeer</li> <li>feat(admin): Give the admin ontology an external schema (#1291) - @benjamingeer</li> <li>fix(api-v2): Remove INFORMATION SEPARATOR TWO from text in the simple schema. (#1299) - @benjamingeer</li> <li>test: Compare Knora response with its class definition (#1297) - @benjamingeer</li> <li>docs(api-admin): fix description of the change password payload (#1285) - @loicjaouen</li> <li>fix(api-v1): Fix double escaping of newline. (#1296) - @benjamingeer</li> <li>fix (tei beol): fix problems in XSLT (#1260) - @tobiasschweizer</li> <li>refactor(ontology): Make knora-admin a separate ontology (#1263) - @benjamingeer</li> <li>a handfull of changes in documentation and error messages (#1278) - @loicjaouen</li> <li>docs: fix missing username (#1269) - @loicjaouen</li> <li>feat(api-v2): Get resources in a particular class from a project (#1251) - @benjamingeer</li> <li>fix(sipi): Improve error checking of Sipi's knora.json response. (#1279) - @benjamingeer</li> <li>feat(api-v2): Return user's permission on resources and values (#1257) - @benjamingeer</li> <li>fix(api-v1): Escape rdfs:label in bulk import. (#1276) - @benjamingeer</li> <li>chore(webapi): Remove persistent map code (#1254) - @benjamingeer</li> <li>docs (api-v2): Update outdated ARK documentation. (#1252) - @benjamingeer</li> <li>Update build.properties (#1265) - @subotic</li> </ul>"},{"location":"DSP-API/09-release-notes/#v601-22032019","title":"v6.0.1 (22/03/2019)","text":"<ul> <li>chore: releasing-v6.0.1 (#1270) - @subotic</li> <li>chore(webapi): Add script for loading of a minimal set of data (#1267) - @subotic</li> <li>fix (beolPersonLabel) typo in label of hasBirthPlace (#1248) - @SepidehAlassi</li> <li>fix (webapi): message typo (#1244) - @subotic</li> <li>Unescape standoff string attributes when verifying text value update (#1242) - @benjamingeer</li> <li>docs: fix user admin api (#1237) - @subotic</li> </ul>"},{"location":"DSP-API/09-release-notes/#v600-28022019","title":"v6.0.0 (28/02/2019)","text":""},{"location":"DSP-API/09-release-notes/#release-notes","title":"Release Notes","text":"<ul> <li> <p>MAJOR: Use HTTP POST to mark resources and values as deleted (#1203)</p> </li> <li> <p>MAJOR: Reorganize user and project routes (#1209)</p> </li> <li> <p>FEATURE: Secure routes returning user information (#961)</p> </li> <li> <p>MAJOR: Change all <code>xsd:dateTimeStamp</code> to <code>xsd:dateTime</code> in the triplestore (#1211).   Existing data must be updated; see <code>upgrade/1211-datetime</code> for instructions.</p> </li> <li> <p>FIX: Ignore order of attributes when comparing standoff (#1224).</p> </li> <li> <p>FEATURE: Query version history (#1214)</p> </li> <li> <p>FIX: Don't allow conflicting cardinalities (#1229)</p> </li> <li> <p>MAJOR: Remove preview file values (#1230). Existing data must be updated;   see <code>upgrade/1230-delete-previews</code> for instructions.</p> </li> </ul>"},{"location":"DSP-API/09-release-notes/#v500-05022019","title":"v5.0.0 (05/02/2019)","text":""},{"location":"DSP-API/09-release-notes/#release-notes_1","title":"Release Notes","text":"<ul> <li>MAJOR: Fix property names for incoming links (#1144))</li> <li>MAJOR: Generate and resolve ARK URLs for resources (#1161). Projects   that have resource IRIs that do not conform to the format specified in   https://docs.knora.org/paradox/03-endpoints/api-v2/knora-iris.html#iris-for-data   must update them.</li> <li> <p>MAJOR: Use project shortcode in IIIF URLs (#1191). If you have file value IRIs containing the substring <code>/reps/</code>, you must replace <code>/reps/</code> with <code>/values/</code>.</p> </li> <li> <p>FEATURE: Update resource metadata in API v2 (#1131)</p> </li> <li>FEATURE: Allow setting resource creation date in bulk import #1151)</li> <li>FEATURE: The <code>v2/authentication</code> route now also initiates cookie creation (the same as <code>v1/authentication</code>) (#1159)</li> <li> <p>FEATURE: Allow to specify restricted view settings for a project which Sipi will adhere to (#690).</p> </li> <li> <p>FIX: Triplestore connection error when using dockerComposeUp (#1122)</p> </li> <li>FIX: Reject link value properties in Gravsearch queries in the simple schema (#1145)</li> <li>FIX: Fix error-checking when updating cardinalities in ontology API (#1142)</li> <li>FIX: Allow hasRepresentation in an ontology used in a bulk import (#1171)</li> <li>FIX: Set cookie domain to the value specified in <code>application.conf</code> with the setting <code>cookie-domain</code> (#1169)</li> <li>FIX: Fix processing of shared property in bulk import (#1182)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v400-12122018","title":"v4.0.0 (12/12/2018)","text":""},{"location":"DSP-API/09-release-notes/#v400-release-notes","title":"v4.0.0 Release Notes","text":"<ul> <li>MAJOR CHANGE: mapping creation request and response formats have changed (#1094)</li> <li>MINOR CHANGE: Update technical user docs (#1085)</li> <li>BUGFIX CHANGE: Fix permission checking in API v2 resource creation (#1104)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v300-30112018","title":"v3.0.0 (30/11/2018)","text":""},{"location":"DSP-API/09-release-notes/#v300-release-notes","title":"v3.0.0 Release Notes","text":"<ul> <li>[BREAKING ONTOLOGY CHANGE] The property <code>knora-base:username</code> was added and is required for <code>knora-base:User</code>. (#1047)</li> <li>[BREAKING API CHANGE] The <code>/admin/user</code> API has changed due to adding the <code>username</code> property. (#1047)</li> <li>[FIX] Incorrect standoff to XML conversion if empty tag has empty child tag (#1054)</li> <li>[FEATURE] Add default permission caching (#1062)</li> <li>[FIX] Fix unescaping in update check and reading standoff URL (#1074)</li> <li>[FIX] Incorrect standoff to XML conversion if empty tag has empty child tag (#1054)</li> <li>[FEATURE] Create image file values in API v2 (#1011). Requires Sipi with tagged commit <code>v1.4.1-SNAPSHOT</code> or later.</li> </ul>"},{"location":"DSP-API/09-release-notes/#v210-02112018","title":"v2.1.0 (02/11/2018)","text":""},{"location":"DSP-API/09-release-notes/#new-features","title":"New features","text":"<ul> <li>Implement graph query in API v2 (#1009)</li> <li>Expose additional <code>webapi</code> settings as environment variables. Please see the Configuration section in the documentation for more information (#1025)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes","title":"Bugfixes","text":"<ul> <li>sipi container config / sipi not able to talk to knora (#994)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v210-snapshot-22102018","title":"v2.1.0-snapshot (22/10/2018)","text":""},{"location":"DSP-API/09-release-notes/#v200-13092018","title":"v2.0.0 (13/09/2018)","text":"<p>This is the first release with the new version numbering convention. From now on, if any changes to the existing data are necessary for a release, then this release will have its major number increased. Please see the Release Versioning Convention description.</p>"},{"location":"DSP-API/09-release-notes/#required-changes-to-existing-data","title":"Required changes to existing data","text":"<ul> <li>a <code>knora-base:ListNode</code> must have at least one <code>rdfs:label</code>. (#991)</li> </ul>"},{"location":"DSP-API/09-release-notes/#new-features_1","title":"New features","text":"<ul> <li>add developer-centric docker-compose.yml for starting the Knora / GraphDB / Sipi / Salsah1 (#979)</li> <li>configure <code>webapi</code> and <code>salsah1</code> thorough environment variables (#979)</li> <li>update for Java 10 (#979)</li> <li>comment out the generation of fat jars from <code>KnoraBuild.sbt</code> (for now) (#979)</li> <li>update ehcache (#979)</li> <li>update sbt to 1.2.1 (#979)</li> <li>remove Kamon monitoring (for now) since we don't see anything meaningful there. We probably will have to instrument Knora by hand and then use Kamon for access. (#979)</li> <li>update Dockerfiles for <code>webapi</code> and <code>salsah1</code> (#979)</li> <li>follow subClassOf when including ontologies in XML import schemas (#991)</li> <li>add support for adding list child nodes (#991)</li> <li>add support for shared ontologies (#987)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes_1","title":"Bugfixes","text":"<ul> <li>trouble with xml-checker and/or consistency-checker during bulk import (#978)</li> <li>ontology API error with link values (#988)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v171-29082018","title":"v1.7.1 (29/08/2018)","text":""},{"location":"DSP-API/09-release-notes/#knora-stack-compatible-versions","title":"Knora-Stack compatible versions","text":"<p>Knora v1.7.1 - Salsah v2.1.2 - Sipi v1.4.0 - GraphDB v8.5.0</p> <ul> <li>doc (webapi): add yourkit acknowledgment (#983)</li> <li>Don't allow class with cardinalities on P and on a subproperty of P (#982)</li> <li>doc (webapi): add LHTT project shortcode (#981)</li> <li>feature (webapi): not return or allow changing of built-in users (#975)</li> <li>fix (webapi): startup check does not detect running triplestore (#969)</li> <li>Fix bulk import parsing bug and limit concurrent client connections (#973)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v170-16082018","title":"v1.7.0 (16/08/2018)","text":"<p>See the closed tickets on the v1.7.0 milestone.</p>"},{"location":"DSP-API/09-release-notes/#knora-stack-compatible-versions_1","title":"Knora-Stack compatible versions","text":"<p>Knora v1.7.0 - Salsah v2.1.0 - Sipi v1.4.0 - GraphDB v8.5.0</p>"},{"location":"DSP-API/09-release-notes/#required-changes-to-existing-data_1","title":"Required changes to existing data","text":"<ul> <li>To use the inferred Gravsearch predicate <code>knora-api:standoffTagHasStartAncestor</code>,   you must recreate your repository with the updated <code>KnoraRules.pie</code>.</li> </ul>"},{"location":"DSP-API/09-release-notes/#new-features_2","title":"New features","text":"<ul> <li>Gravsearch queries can now match standoff markup (#910).</li> <li>Add Graphdb-Free initialization scripts for local and docker installation (#955).</li> <li>Create temp dirs at startup (#951)</li> <li>Update versions of monitoring tools (#951)</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes_2","title":"Bugfixes","text":"<ul> <li>timeout or java.lang.OutOfMemoryError when using /v1/resources/xmlimportschemas/ for some ontologies (#944)</li> <li>Timeout cleanup (#951)</li> <li>Add separate dispatchers (#945)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v160-29062018","title":"v1.6.0 (29/06/2018)","text":""},{"location":"DSP-API/09-release-notes/#v160-release-notes","title":"v1.6.0 Release Notes","text":"<p>See the release and closed tickets on the v1.6.0 milestone on Github.</p>"},{"location":"DSP-API/09-release-notes/#required-changes-to-existing-data_2","title":"Required changes to existing data","text":"<ul> <li>A project is now required to have at least one description, so potentially a description will need   to be added to those projects that don't have one.</li> </ul>"},{"location":"DSP-API/09-release-notes/#new-features_3","title":"New features","text":"<p>General:</p> <ul> <li>Added a <code>/health</code> endpoint</li> <li>KnoraService waits on startup for a triplestore before trying to load the ontologies</li> </ul> <p>Gravsearch enhancements:</p> <ul> <li>Accept queries in POST requests (#650).</li> <li>Allow a Gravsearch query to specify the IRI of the main resource (#871) (by allowing <code>BIND</code>).</li> <li>Allow <code>lang</code> to be used with <code>!=</code>.</li> <li>A <code>UNION</code> or <code>OPTIONAL</code> can now be nested in an <code>OPTIONAL</code> (#882).</li> <li>Gravsearch now does type inference (#884).</li> <li>The Knora API v2 complex schema can now be used in Gravsearch, making it possible to search   for list nodes (#899).</li> </ul> <p>Admin API:</p> <ul> <li>Make project description required (#875).</li> </ul> <p>Conversion to TEI:</p> <ul> <li>Conversion of standard standoff entities to TEI</li> <li>Custom conversion of project specific standoff entities and metadata to TEI</li> </ul> <p>Sipi integration:</p> <ul> <li>The Knora specific Sipi configuration and scripts can now be found under the <code>sipi/</code> directory (#404).</li> <li>Documentation on how Sipi can be started changed (#404).</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes_3","title":"Bugfixes","text":"<ul> <li>Allow a class or property definition to have more than one object for <code>rdf:type</code> (#885).</li> <li>Exclude list values from v2 fulltext search (#906).</li> </ul> <p>Gravsearch fixes:</p> <ul> <li>Allow the <code>lang</code> function to be used in a comparison inside AND/OR (#846).</li> <li>Fix the processing of resources with multiple incoming links that use the same property (#878).</li> <li>Fix the parsing of a FILTER inside an OPTIONAL (#879).</li> <li>Require the <code>match</code> function to be the top-level expression in a <code>FILTER</code>.</li> </ul>"},{"location":"DSP-API/09-release-notes/#v150-31052018","title":"v1.5.0 (31/05/2018)","text":"<p>See v1.5.0 milestone for a full list of closed tickets.</p>"},{"location":"DSP-API/09-release-notes/#new-features_4","title":"New features","text":"<ul> <li>Resources can be returned in the simple ontology schema (#833).</li> <li>Text values can specify the language of the text (#819).</li> <li>Responses can be returned in Turtle and RDF/XML (#851).</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes_4","title":"Bugfixes","text":"<ul> <li>Incorrect representation of IRI object values in JSON-LD (#835)</li> <li>GenerateContributorsFile broken (#797)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v140-30042018","title":"v1.4.0 (30/04/2018)","text":""},{"location":"DSP-API/09-release-notes/#required-changes-to-existing-data_3","title":"Required changes to existing data","text":"<ul> <li> <p>Every ontology must now have the property <code>knora-base:attachedToProject</code>, which points to the IRI of the project that is responsible for the ontology. This must be added to each project-specific ontology in existing repositories. All built-in ontologies have been updated to have this property, and must, therefore, be reloaded into existing repositories. The property <code>knora-base:projectOntology</code> has been removed, and must be removed from project definitions in existing repositories.</p> </li> <li> <p>Every project now needs to have the property <code>knora-base:projectShortcode</code> set.</p> </li> </ul>"},{"location":"DSP-API/09-release-notes/#new-features_5","title":"New features","text":"<ul> <li>Added OpenAPI / Swagger API documentation route</li> <li>The Knora API server now checks the validity of ontologies on startup.</li> <li>The property <code>knora-base:projectShortcode</code> is now a required property (was optional).</li> </ul>"},{"location":"DSP-API/09-release-notes/#bugfixes_5","title":"Bugfixes","text":"<ul> <li>API v1 extended search was not properly handling multiple conditions     on list values (issue #800)</li> <li>Fix image orientation in SALSAH 1 (issue #726)</li> </ul>"},{"location":"DSP-API/09-release-notes/#v131-06042018","title":"v1.3.1 (06/04/2018)","text":""},{"location":"DSP-API/09-release-notes/#v130-28032018","title":"v1.3.0 (28/03/2018)","text":""},{"location":"DSP-API/09-release-notes/#required-changes-to-existing-data_4","title":"Required changes to existing data","text":""},{"location":"DSP-API/09-release-notes/#1-replace-salsah-gui-ontology","title":"1. Replace salsah-gui ontology","text":"<p>You must replace the <code>salsah-gui</code> ontology that you have in the triplestore with the one in <code>salsah-gui.ttl</code>.</p>"},{"location":"DSP-API/09-release-notes/#new-features_6","title":"New features","text":"<ul> <li>More support for salsah-gui elements and attributes in ontologies</li> <li>Serve the <code>salsah-gui</code> ontology in API v2 in the default schema.</li> <li>Show <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> when serving ontologies in API v2 in the default schema.</li> <li>Allow <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> to be included in new property definitions created via API v2.</li> <li>Change <code>salsah-gui</code> so that GraphDB's consistency checker can check the use of <code>guiElement</code> and <code>guiAttribute</code>.</li> <li>Changes to <code>application.conf</code>. The <code>sipi</code> and <code>web-api</code> sections have received a big update, adding separate settings  for internal and external host settings:</li> </ul> <pre><code>    app {\n        knora-api {\n            // relevant for direct communication inside the knora stack\n            internal-host = \"0.0.0.0\"\n            internal-port = 3333\n\n            // relevant for the client, i.e. browser\n            external-protocol = \"http\" // optional ssl termination needs to be done by the proxy\n            external-host = \"0.0.0.0\"\n            external-port = 3333\n        }\n\n        sipi {\n            // relevant for direct communication inside the knora stack\n            internal-protocol = \"http\"\n            internal-host = \"localhost\"\n            internal-port = 1024\n\n            // relevant for the client, i.e. browser\n            external-protocol = \"http\"\n            external-host = \"localhost\"\n            external-port = 1024\n\n            prefix = \"knora\"\n            file-server-path = \"server\"\n            path-conversion-route = \"convert_from_binaries\"\n            file-conversion-route = \"convert_from_file\"\n            image-mime-types = [\"image/tiff\", \"image/jpeg\", \"image/png\", \"image/jp2\"]\n            movie-mime-types = []\n            sound-mime-types = []\n        }\n\n        salsah1 {\n            base-url = \"http://localhost:3335/\"\n            project-icons-basepath = \"project-icons/\"\n        }\n    }\n</code></pre>"},{"location":"DSP-API/09-release-notes/#bugfixes_6","title":"Bugfixes","text":"<ul> <li>When API v2 served <code>knora-api</code> (default schema), <code>salsah-gui:guiElement</code> and <code>salsah-gui:guiAttribute</code> were not shown in properties in that ontology.</li> <li>The predicate <code>salsah-gui:guiOrder</code> was not accepted when creating a property via API v2.</li> </ul>"},{"location":"DSP-API/10-migration-guides/","title":"Overview","text":"<p>Generally, DSP-API is designed to be backward compatible. Whenever a new major version of DSP-API is released, the existing data is migrated to the new version automatically. The public Rest API is also stable and should remain backward compatible.</p> <p>However, when a feature appears not to be used, or if there are urgent technical reasons to change the API, we may decide to release breaking changes. In these instances, we try to provide a migration guide, in case some project or application is affected by the change.</p> <p>If you experience any issues with the migration, please contact us via the DaSCH Help Center.</p>"},{"location":"DSP-API/10-migration-guides/#migration-guides","title":"Migration Guides","text":""},{"location":"DSP-API/10-migration-guides/#planned-removal-of-knora-baseissequenceof-and-knora-basehassequencebounds","title":"Planned: Removal of <code>knora-base:isSequenceOf</code> and <code>knora-base:hasSequenceBounds</code>","text":"<p>If you have used <code>knora-base:isSequenceOf</code> and <code>knora-base:hasSequenceBounds</code> in your data, this should be replaced by <code>knora-base:isAudioSegmentOf</code> or <code>knora-base:isVideoSegmentOf</code> respectively, and <code>knora-base:hasSegmentBounds</code>.</p> <p>The issue with that is that these properties are only allowed on resources of type <code>knora-base:AudioSegment</code> and <code>knora-base:VideoSegment</code>, whereas previously <code>knora-base:isSequenceOf</code> could be added to any <code>knora-base:Resource</code>. This means that you will have to change the type of the resources that you have been using to be of type <code>knora-base:AudioSegment</code> or <code>knora-base:VideoSegment</code>.</p>"},{"location":"DSP-API/10-migration-guides/#deprecation-warnings","title":"Deprecation Warnings","text":""},{"location":"DSP-API/10-migration-guides/#issequenceof-and-hassequencebounds","title":"<code>isSequenceOf</code> and <code>hasSequenceBounds</code>","text":"<p>With the introduction of the new <code>Segment</code> concept in DSP-API v30.11.0, the previously existing properties <code>knora-base:isSequenceOf</code> and <code>knora-base:hasSequenceBounds</code> have been deprecated and will be removed in a future version.</p> <p>If you are creating a new ontology, please do not use these properties anymore. Instead, use the newly introduced Segment type.</p> <p>More information on Segments can be found in the knora-base ontology documentation.</p>"},{"location":"DSP-API/10-migration-guides/#updating-doaps","title":"Updating DOAPs","text":"<p>For updating DOAPs, using the general-purpose route <code>/admin/permissions/{permissionIri}/group|hasPermissions</code> is deprecated and will be removed in a future version.</p> <p>Insteads use <code>/admin/permissions/doap/{permissionIri}</code> as described in the permission documentation.</p>"},{"location":"DSP-API/10-migration-guides/#retrieving-list-information","title":"Retrieving List Information","text":"<p>For retrieving list infos, the routes <code>/admin/lists/infos/{listIri}</code> and <code>/admin/lists/nodes/{listIri}</code> are deprecated and will be removed in a future version. Instead, use <code>/admin/lists/{listIri}/info</code>  as described in the lists api documentation. </p>"},{"location":"DSP-API/10-migration-guides/#authentication","title":"Authentication","text":"<p>All authentication methods other than the bearer token are deprecated. This includes DSP-API and Sipi. For more information, see the Authentication page and the SIPI documentation.</p>"},{"location":"DSP-API/10-migration-guides/#cardinality-replacement-check","title":"Cardinality Replacement Check","text":"<p>The unparametrised check if it is possible to replace a cardinality of a property on a resource class is deprecated. Instead of <code>/v2/ontologies/canreplacecardinalities/{classIRI}</code>, use <code>/v2/ontologies/canreplacecardinalities/{classIRI}?propertyIri={propertyIRI}&amp;newCardinality=[0-1|1|1-n|0-n]</code>.</p> <p>For more information, see the api documentation.</p>"},{"location":"DSP-API/10-migration-guides/#filevaluehasexternalurl","title":"<code>fileValueHasExternalUrl</code>","text":"<p>For still image file values, the property <code>knora-base:fileValueHasExternalUrl</code> is deprecated. Instead, use <code>knora-base:stillImageFileValueExternalFileValue</code>. Additionally, this property should no longer be typed as a string literal, but as a <code>xsd:anyURI</code> instead.</p> <p>For more information, see the api documentation.</p>"},{"location":"DSP-API/architecture/","title":"C4 Model and ADRs","text":""},{"location":"DSP-API/architecture/#installation","title":"Installation","text":"<pre><code>brew install adr-tools\n</code></pre>"},{"location":"DSP-API/architecture/#usage","title":"Usage","text":"<p>Run the following command from the root directory to start the C4 model browser:</p> <pre><code>make structurizer\n</code></pre>"},{"location":"DSP-API/architecture/docs/http-request-flow-with-events/","title":"Http request flow with events","text":""},{"location":"DSP-API/architecture/docs/http-request-flow-with-events/#example-for-an-http-request-flow-with-events","title":"Example for an HTTP Request Flow with Events","text":""},{"location":"DSP-API/architecture/docs/http-request-flow-with-events/#create-a-user","title":"Create a User","text":"<pre><code>sequenceDiagram\n    autonumber\n    user                    -&gt;&gt; userRoute:               \"sends HTTP request\"\n    userRoute               -&gt;&gt; userRoute:               \"validates input (payload) and creates value objects\"\n    userRoute               -&gt;&gt; userHandler:             \"sends value objects\"\n    userHandler             -&gt;&gt; userRepo:                \"reserves username\"\n    userRepo                -&gt;&gt; eventStoreService:       \"reserves username\"\n    eventStoreService       -&gt;&gt; eventStoreService:       \"checks if username exists\"\n    eventStoreService       -&gt;&gt; eventStoreService:       \"reserves username\"\n    userHandler             -&gt;&gt; userDomain:              \"calls User.make() with value objects\"\n    userDomain              -&gt;&gt; userDomain:              \"creates userDomainEntity + userCreatedEvent(who, what)\"\n    userDomain              -&gt;&gt; userHandler:             \"returns (userDomainEntity + userCreatedEvent)\"\n    userHandler             -&gt;&gt; userRepo:                \"storeUser(userDomainEntity + userCreatedEvent)\"\n    userRepo                -&gt;&gt; eventStoreService:       \"storeUser(userDomainEntity + userCreatedEvent)\"\n    eventStoreService       -&gt;&gt; eventStoreService:       \"store event(s), userCreatedEvent(who, what, when(!))\"\n    eventStoreService       -&gt;&gt; eventListener:           \"publishEvent(userCreatedEvent)\"\n    eventListener           -&gt;&gt; triplestoreService:      \"writeToTsService(E)\"\n    triplestoreService      -&gt;&gt; triplestoreService:      \"SPARQL update - write user to triplestore\"\n    eventListener           -&gt;&gt; arkService:              \"writeToArkService(E)\"\n    arkService              -&gt;&gt; arkService:              \"create ARK(URL)\"\n    eventListener           -&gt;&gt; elasticSearchService:    \"writeToEsService(E)\"\n    elasticSearchService    -&gt;&gt; elasticSearchService:    \"write\"</code></pre>"},{"location":"DSP-API/architecture/docs/http-request-flow/","title":"Http request flow","text":""},{"location":"DSP-API/architecture/docs/http-request-flow/#http-request-flow-v2-vs-v3","title":"HTTP Request Flow V2 vs. V3","text":"<p>V2 / admin:</p> <pre><code>sequenceDiagram\n    autonumber\n    client              -&gt;&gt; route: send http request\n    route               -&gt;&gt; authenticator: authenticate user\n    authenticator       -&gt;&gt; route: user authenticated\n    route               -&gt;&gt; application actor: send message\n    application actor   -&gt;&gt; responder manager: forward message\n    responder manager   -&gt;&gt; responder: forward message\n    responder           -&gt;&gt; responder manager: return result\n    responder manager   -&gt;&gt; application actor: forward result\n    application actor   -&gt;&gt; route: forward result\n    route               -&gt;&gt; client: send http response</code></pre>"},{"location":"DSP-APP/","title":"Introduction","text":"<p>Looking for the User Guide? Visit the Knowledge Hub at dasch.swiss for end-user documentation.</p>"},{"location":"DSP-APP/#dasch-applications-and-libraries-monorepo","title":"DaSCH Applications and Libraries Monorepo","text":"<p>This monorepo hosts various libraries of the DaSCH Service Platform and it is built on:</p> <ul> <li>Nx - See package.json for current version</li> <li>Angular - See package.json for current version</li> <li>Node.js - Version managed via .nvmrc file</li> </ul>"},{"location":"DSP-APP/#install-libraries","title":"Install libraries","text":"<p>To install all libraries and external dependencies just run <code>npm install</code>.</p>"},{"location":"DSP-APP/#quick-commands","title":"Quick Commands","text":"<p>Most common operations for daily development:</p> Task Command Install dependencies <code>npm install</code> Start local development <code>npm run start-local</code> Start with observability <code>npm run start-local-with-observability</code> Run tests <code>npm run test-local</code> Run all tests (CI mode) <code>npm run test-ci-all</code> Lint all libs w/o auto-fix <code>npm run lint-all</code> Lint all libs with auto-fix <code>npm run lint-fix-all</code> Open E2E tests UI <code>npm run e2e-local</code> Run E2E tests (headless) <code>npm run e2e-ci</code> Build for development <code>npm run build</code> Build for production <code>npm run build-prod</code> Generate test coverage <code>npm run unit-test-coverage</code> <p>For all available commands, see package.json.</p>"},{"location":"DSP-APP/#dasch-swiss-librairies","title":"@dasch-swiss librairies","text":"<p>For more information about available libraries, see the VRE libraries under <code>libs/vre/</code> and the library path aliases in tsconfig.base.json.</p>"},{"location":"DSP-APP/#dsp-app-generic-user-interface-of-dasch-service-platform","title":"DSP-APP \u2014 generic user interface of DaSCH Service Platform","text":"<p>DSP (DaSCH Service Platform) is a software framework for storing, sharing, and working with primary resources and data in the humanities.</p> <p>DSP-APP is a simple user interface for the research data repository of the Swiss National Data and Service Center for the Humanities (DaSCH), which uses the DSP-API server application in the backend. It's a system for annotation and linkage of resources in arts and humanities.</p> <p>DSP-APP implements DSP-JS to connect with DSP-API.</p> <p>DSP-APP is free software, released under GNU Affero General Public license.</p>"},{"location":"DSP-APP/#user-quickstart","title":"User Quickstart","text":"<p>To try DSP-APP out the DSP-API backend should be started first:</p> <p>In terminal go to DSP-API repository and start the API by running following commands:</p> <pre><code>$ make init-db-test\n$ make stack-without-app\n</code></pre> <p>Once backend is up and running, in the second terminal instance start DSP-APP by running:</p> <pre><code># come back to this repository and start the DSP-APP\n$ npx nx run dsp-app:serve\n</code></pre>"},{"location":"DSP-APP/#developer-quickstart","title":"Developer Quickstart","text":"<p>It is recommended to use <code>Node.js</code> version which is supported by installed Angular version.</p> <p>The monorepo is implemented using NX.</p> <p>NOTE: to run <code>nx</code> commands install it globally <code>npm install -g nx</code> or instead use <code>npx</code>.</p>"},{"location":"DSP-APP/#working-with-individual-libraries","title":"Working with Individual Libraries","text":"<p>The monorepo contains multiple libraries that can be developed independently. To work with specific libraries:</p> <pre><code># Test a specific library\nnx run [library-name]:test\n\n# Build a specific library\nnx run [library-name]:build\n\n# Lint a specific library\nnx run [library-name]:lint\n\n# Example: Test the date-picker library\nnx run vre-ui-date-picker:test\n</code></pre> <p>Available libraries: - See tsconfig.base.json for all library path aliases under the <code>paths</code> configuration - Main VRE libraries are under <code>@dasch-swiss/vre/*</code> namespace</p>"},{"location":"DSP-APP/#openapi-client-generation","title":"OpenAPI Client Generation","text":"<p>For API client generation and maintenance: - OpenAPI Client Generation - Auto-generated TypeScript client for DSP-API</p>"},{"location":"DSP-APP/#ide-plugins","title":"IDE plugins","text":"<ul> <li>https://plugins.jetbrains.com/plugin/15101-nx-console-idea</li> <li>https://marketplace.visualstudio.com/items?itemName=nrwl.angular-console</li> </ul>"},{"location":"DSP-APP/#local-observability","title":"Local Observability","text":"<p>For local development, you can run a Grafana observability stack to view Faro telemetry data (logs, traces, Web Vitals):</p> <pre><code>$ npm run start-local-with-observability\n</code></pre> <p>This starts both the observability stack and the app. Access Grafana at http://localhost:3001 (credentials: <code>admin</code>/<code>admin</code>). The stack includes Loki for logs, Tempo for traces, and Mimir for metrics. To stop: <code>docker compose -f docker-compose.observability.yml down</code></p> <p>For detailed configuration and troubleshooting, see the inline documentation in <code>docker-compose.observability.yml</code> and <code>apps/dsp-app/src/config/config.dev.json</code>.</p>"},{"location":"DSP-APP/#further-documentation","title":"Further Documentation","text":""},{"location":"DSP-APP/#developer-docs","title":"Developer docs","text":"<p>\u27a1 for developers</p>"},{"location":"DSP-APP/#contribution","title":"Contribution","text":"<p>If you would like to contribute to the development of the DSP-APP alongside us, please follow the general DSP contribution guidelines.</p>"},{"location":"DSP-APP/#documentation","title":"Documentation","text":"<p>We built the developer documentation with MkDocs. More information can be found in the specific README.</p>"},{"location":"DSP-APP/contribution/","title":"Development Documentation","text":"<p>This documentation is intended for the internal DaSCH development team.</p>"},{"location":"DSP-APP/contribution/#for-users-and-researchers","title":"For Users and Researchers","text":"<p>If you need support or have questions about using the DSP platform:</p> <ul> <li>Contact us at: support@dasch.swiss</li> <li>Visit our website: https://dasch.swiss</li> </ul>"},{"location":"DSP-APP/contribution/#source-code","title":"Source Code","text":"<p>The DSP-APP is open source software available on GitHub under the Apache 2.0 license.</p>"},{"location":"DSP-APP/contribution/docs-documentation/","title":"DSP-APP Documentation","text":"<p>This is the DSP-APP documentation, based on MkDocs and published under https://docs.dasch.swiss/latest/DSP-APP/.</p> <p>Images like screenshots and so on have to be stored in <code>assets/images</code>.</p> <p>The <code>mkdocs.yml</code> file is present in the top-level directory of the repo and the source files are in the <code>docs/</code> folder.</p> <p>Plugins have to be defined in <code>requirements.txt</code> and in the github actions workflow <code>deploy-docs</code> step under <code>EXTRA_PACKAGES</code>.</p>"},{"location":"DSP-APP/contribution/docs-documentation/#getting-started","title":"Getting Started","text":"<p>To run the documentation locally you'll need Python installed, as well as the Python package manager pip. You can check if you already have these installed by running the following commands from the command line:</p> <pre><code>$ python --version\nPython 3.8.2\n$ pip --version\npip 20.0.2 from /usr/local/lib/python3.8/site-packages/pip (python 3.8)\n</code></pre> <p>MkDocs supports Python versions 3.5, 3.6, 3.7, 3.8, and pypy3.</p>"},{"location":"DSP-APP/contribution/docs-documentation/#installing-dependencies","title":"Installing dependencies","text":"<p>Install the required packages by running the following command:</p> <pre><code>make docs-install-requirements\n</code></pre>"},{"location":"DSP-APP/contribution/docs-documentation/#running-the-documentation-locally","title":"Running the documentation locally","text":"<p>MkDocs comes with a built-in dev-server that lets you preview your documentation as you work on it. Make sure you're in the same directory as the <code>mkdocs.yml</code> (repository's root folder) configuration file, and then start the server by running the following command:</p> <pre><code>$ make docs-serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\n[I 160402 15:50:43 server:271] Serving on http://127.0.0.1:8000\n[I 160402 15:50:43 handlers:58] Start watching changes\n[I 160402 15:50:43 handlers:60] Start detecting changes\n</code></pre> <p>Open up http://127.0.0.1:8000/ in your browser, and you'll see the documentation start page being.</p> <p>In case you need to clean the project directory, run:</p> <pre><code>make docs-clean\n</code></pre> <p>To get some help about the <code>make</code> commands, run:</p> <pre><code>make help\n</code></pre>"},{"location":"DSP-APP/contribution/docs-documentation/#building-the-documentation","title":"Building the documentation","text":"<p>To build the documentation, run:</p> <pre><code>make docs-build\n</code></pre>"},{"location":"DSP-APP/contribution/docs-documentation/#deploying-github-page","title":"Deploying GitHub page","text":"<p>On each release of DSP-APP, the documentation is generated by the dsp-docs GitHub repository. Behind the scenes, MkDocs builds the documentation and uses the mkdocs-deploy-gh-pages actions script to deploy them to the gh-pages. That's it!</p>"},{"location":"DSP-APP/contribution/release-notes/","title":"Changelog","text":""},{"location":"DSP-APP/contribution/release-notes/#1241-2025-12-18","title":"12.4.1 (2025-12-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>new image for alice in daschland project (#2757) (211e201)</li> <li>translation issue in video player (#2758) (625a844)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances","title":"Maintenances","text":"<ul> <li>fix npm error code 135 (#2765) (6fd3ad2)</li> <li>remove unused code (#2766) (231751e)</li> <li>skip unnecessary jobs in release PRs (#2763) (f020fed)</li> <li>update dsp-api to v34.0.0-4-gf2567e6 (#2764) (8aa51a1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests","title":"Tests","text":"<ul> <li>fix randomly failing e2e test (#2759) (5551b44)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1240-2025-12-15","title":"12.4.0 (2025-12-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements","title":"Enhancements","text":"<ul> <li>add download button for data export (#2705) (dca56c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>add dynamic resize for PDF viewer in multiple view (#2739) (127f5f4)</li> <li>cancel button and select all are working in download dialog (#2745) (8c7690e)</li> <li>handle license checkboxes correctly (#2733) (da65de1)</li> <li>improve tooltip on erase button when not possible (#2751) (23c1a72)</li> <li>make rich text editor window responsive but fixed width (#2730) (14d678d)</li> <li>the header titles are now links (#2750) (277a042)</li> <li>update cookie policy style button (#2735) (81c449d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_1","title":"Maintenances","text":"<ul> <li>CommonModule cleanup (#2747) (4f50a9e)</li> <li>deps-dev: bump prettier from 3.7.3 to 3.7.4 in the prettier-deps group (#2726) (cf53e27)</li> <li>deps-dev: bump ts-jest from 29.4.5 to 29.4.6 in the jest-deps group (#2727) (f321602)</li> <li>deps: bump @sentry/angular from 10.27.0 to 10.29.0 in the sentry-deps group (#2728) (c73bdc5)</li> <li>make resource editor lib standalone (#2731) (3647504)</li> <li>migrate data browser lib to standalone (#2736) (3e88f97)</li> <li>migrate ngx-translate to standalone (#2746) (36f77c9)</li> <li>migrate ontology and list lib to standalone (#2741) (9b6fa3f)</li> <li>migrate project library to standalone (#2740) (655ffea)</li> <li>remove standalone in the rest of the app (#2743) (2662b5e)</li> <li>update maximum budget bundle to 9mb (#2738) (8411bd4)</li> <li>update openapi (#2737) (e5e3811)</li> <li>update OpenApi spec to v33.2.0-2-g96cb6a3 (#2734) (bd85006)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation","title":"Documentation","text":"<ul> <li>remove user guide (#2749) (df31c61)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1230-2025-12-08","title":"12.3.0 (2025-12-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_1","title":"Enhancements","text":"<ul> <li>add images for project 0802, 0854 (#2729) (0f2d98d)</li> <li>improve tooltip message on resource deletion (#2711) (b19d9c7)</li> <li>update js lib version from 10.9.0 to 10.9.1 (DEV-5409) (#2714) (e966f4b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li>add translations for geoname placeholders (#2710) (08eb3f3)</li> <li>Link Object: use limitToProject instead on-site filtering (#2718) (825f077)</li> <li>rename property and class Comment to Description (#2719) (ae88ad8)</li> <li>resource links use routerLink for navigation (#2723) (356351d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_2","title":"Maintenances","text":"<ul> <li>deps-dev: bump prettier from 3.6.2 to 3.7.3 in the prettier-deps group (#2707) (2f9e41a)</li> <li>deps: bump core-js from 3.46.0 to 3.47.0 (#2709) (2d51869)</li> <li>deps: bump express (#2712) (75c3514)</li> <li>deps: bump node-forge from 1.3.1 to 1.3.2 (#2698) (90e00b2)</li> <li>improve constructor dependency injections (#2717) (251e256)</li> <li>Make linting a separate action (#2720) (349ef43)</li> <li>merge resource editor libs together (#2721) (67ec897)</li> <li>remove Pendo Analytics Service (#2724) (28150f0)</li> <li>remove redundant GH action (#2722) (418f309)</li> <li>rewrite JDN calendar libs  (#2716) (1dc3c86)</li> <li>update grafana faro to v2 (#2706) (aeafd67)</li> <li>update openapi spec to v33.1.1-3-g3039ed2 (#2715) (fbe2d31)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1223-2025-12-01","title":"12.2.3 (2025-12-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_3","title":"Bug Fixes","text":"<ul> <li>ckEditor selection works again (#2701) (8988e4e)</li> <li>clean autocomplete properly while adding user to the project (#2694) (c32539a)</li> <li>disable delete button when item is required (#2693) (66f1b68)</li> <li>improve the copyright label visibility in all languages (#2697) (2ee879d)</li> <li>project members and admin can create link object in search (#2695) (b22f567)</li> <li>request restricted PDF documents correctly (#2704) (c1a31d3)</li> <li>Resource Viewer: display default page for classes w/o resources (#2703) (c07c812)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_3","title":"Maintenances","text":"<ul> <li>deps-dev: bump @swc/core from 1.15.1 to 1.15.2 in the swc-deps group (#2672) (006d9f8)</li> <li>deps-dev: bump autoprefixer from 10.4.21 to 10.4.22 (#2674) (2bfce09)</li> <li>deps: bump actions/checkout from 5 to 6 (#2691) (0e7571c)</li> <li>deps: bump glob and @openapitools/openapi-generator-cli (#2678) (51d0606)</li> <li>deps: bump the sentry-deps group with 2 updates (#2673) (7063fbd)</li> <li>deps: bump vite and @angular-devkit/build-angular (#2645) (7220965)</li> <li>disable NX console (#2686) (4c47191)</li> <li>move user-settings, system, common-to-move libs to standalone (#2699) (36f3602)</li> <li>rewrite Claude Code Operating Rules (#2696) (95c2263)</li> <li>update dsp-api_spec.yaml (#2702) (06b23f5)</li> <li>update openApi (#2700) (bb1ba4f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_1","title":"Tests","text":"<ul> <li>improve testing and testing coverage setup (#2682) (ab75119)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1222-2025-11-24","title":"12.2.2 (2025-11-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_4","title":"Bug Fixes","text":"<ul> <li>add type guards for language-tagged string literals (#2671) (b0520fa)</li> <li>ckEditor: fix project cross-linking validation  (#2668) (c113445)</li> <li>not matching password and its confirmation make the form fail (#2653) (ea35814)</li> <li>Project Settings: prevent project admin to edit user or change password (#2685) (0bfff35)</li> <li>search results take the full screen height (#2659) (ae4b6db)</li> <li>the save button value updates visibility on control state change (#2664) (9b84418)</li> <li>unsubscribe and not request inexisting ontologies (#2680) (7f444e1)</li> <li>Video Viewer: align annotation icon (#2689) (2022ec6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_4","title":"Maintenances","text":"<ul> <li>improve login flow (#2670) (8d48adb)</li> <li>Improve translations (DEV-4899) (#2683) (1d11b53)</li> <li>update openApi spec (#2688) (9b1cb90)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1221-2025-11-17","title":"12.2.1 (2025-11-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_5","title":"Bug Fixes","text":"<ul> <li>adapt to new StringLiteralV2 typing (#2675) (42b80de)</li> <li>add missing translation in resource editor (#2656) (bfeae68)</li> <li>change detection issues (DEV-5448) (#2660) (ce570d9)</li> <li>do not display create copyright holder dialog unexpectedly  (#2661) (b93a787)</li> <li>pass project param for limiting to project (#2658) (a4eb488)</li> <li>property value action buttons has a fixed value (#2665) (8f320c0)</li> <li>route to nav (DEV-5595) (#2657) (e237332)</li> <li>standoff links resource viewer opens with the right resource (#2662) (374002a)</li> <li>user project counts is fixed in system admin (#2663) (94ee272)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_5","title":"Maintenances","text":"<ul> <li>Claude Code: update testing instructions (#2667) (d5dc6d1)</li> <li>deps-dev: bump @swc/core from 1.14.0 to 1.15.1 in the swc-deps group (#2649) (2d9ca8e)</li> <li>deps: bump the sentry-deps group with 2 updates (#2650) (669e8f0)</li> <li>do not comment about squash in claude reviews (#2654) (dad4345)</li> <li>make ui/string-literals lib standalone (#2640) (3fcce8d)</li> <li>remove unused blank lines (#2655) (a406ea5)</li> <li>update dsp api spec to v32.7.0-5-ge0abdce (#2666) (82f84f4)</li> <li>update openApi spec (#2676) (1d805ea)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_2","title":"Tests","text":"<ul> <li>improve testing resource editing (#2651) (9a5c68e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1220-2025-11-10","title":"12.2.0 (2025-11-10)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_2","title":"Enhancements","text":"<ul> <li>add project image for 0108 (#2630) (750e26c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_6","title":"Bug Fixes","text":"<ul> <li>add missing translations (#2631) (a6c008b)</li> <li>Cross-Linking Projects: fix disabled button appearance (#2639) (675ae89)</li> <li>disable Faro tracking in configuration files (#2622) (31b7692)</li> <li>erase button is not shown if user is not project admin (#2647) (ad020d8)</li> <li>prevent cross-linking in rich text editor (#2629) (24f9197)</li> <li>trace header cors urls are now regexp (#2632) (cdcb2fc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_6","title":"Maintenances","text":"<ul> <li>add a project guard in project view (#2637) (7b79f92)</li> <li>add faro tracing cors urls whitelist (#2628) (1e900e7)</li> <li>deps: bump actions/checkout from 3 to 5 (#2626) (8c4f147)</li> <li>deps: bump actions/upload-artifact from 4 to 5 (#2627) (269cbf4)</li> <li>deps: bump github/codeql-action from 3 to 4 (#2625) (ca1beb6)</li> <li>Improve review instructions in claude.yml (#2646) (780ae89)</li> <li>migrate help page components to standalone (#2642) (bd93cc5)</li> <li>migrate ui/date-picker components to standalone (#2641) (d00669d)</li> <li>migrate ui/progress-indicators to standalone (#2621) (44a44c8)</li> <li>post-upgrade release-please fix (#2624) (6e761f0)</li> <li>remove copyright header (#2634) (8c23908)</li> <li>split resource-toolbar into multiple comprehensive components (#2644) (bdf063e)</li> <li>update Claude Code instructions (#2635) (cfa5f10)</li> <li>update dsp-api routes to v32.6.0-7-gc68cb83 (#2638) (8477082)</li> <li>update openAPI spec (#2648) (ad301ff)</li> <li>update README (#2636) (ffcffb7)</li> <li>upgrade Release Please to v4 (#2619) (af3b78c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1213-2025-11-03","title":"12.1.3 (2025-11-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_7","title":"Bug Fixes","text":"<ul> <li>setup pendo again (#2620) (1ab353b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_7","title":"Maintenances","text":"<ul> <li>deps-dev: bump @swc/core from 1.13.5 to 1.14.0 in the swc-deps group (#2618) (bf6620b)</li> <li>deps-dev: bump ng-mocks from 14.13.5 to 14.14.0 (#2597) (7c1684c)</li> <li>deps: bump actions/setup-node from 3 to 6 (#2616) (39b06ff)</li> <li>deps: bump actions/setup-python from 4 to 6 (#2615) (2bb14ec)</li> <li>deps: bump docker/login-action from 2 to 3 (#2614) (17c07e5)</li> <li>deps: bump docker/setup-buildx-action from 2 to 3 (#2617) (5546a1e)</li> <li>deps: bump the sentry-deps group with 2 updates (#2595) (b6e307e)</li> <li>disable automatic Claude Code reviews (#2609) (4b154da)</li> <li>improve Dependabot rules (#2611) (82de198)</li> <li>improve login and auto login process (#2604) (b189b8a)</li> <li>make UI lib standalone (#2612) (c4e2309)</li> <li>observability: Set up Grafana Faro (#2588) (f614399)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1212-2025-10-29","title":"12.1.2 (2025-10-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_8","title":"Bug Fixes","text":"<ul> <li>add missing translations (#2607) (152689f)</li> <li>disable hint in authorship (#2606) (2489812)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1211-2025-10-28","title":"12.1.1 (2025-10-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_9","title":"Bug Fixes","text":"<ul> <li>add missing translations (#2601) (eadfc53)</li> <li>FulltextSearch: disallow linking resources from different projects (#2598) (0610242)</li> <li>LinkValue: limit to searching for only current project resources (#2602) (f9878f1)</li> <li>translate resource class name (#2600) (646206e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_8","title":"Maintenances","text":"<ul> <li>add Claude Code GitHub Workflow (#2603) (4ae40c9)</li> <li>remove unused console log (#2605) (a130e72)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1210-2025-10-27","title":"12.1.0 (2025-10-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_3","title":"Enhancements","text":"<ul> <li>translate the whole website (#2590) (fd0696a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_10","title":"Bug Fixes","text":"<ul> <li>a project member can create link objects (#2591) (1ae59a7)</li> <li>remove unused communication service (#2589) (90fa9cb)</li> <li>resource class description is translated (#2592) (30e9eb8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_9","title":"Maintenances","text":"<ul> <li>deps-dev: bump @cypress/code-coverage from 3.14.6 to 3.14.7 in the test-coverage-deps group (#2574) (342ef3c)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.24.0 to 2.25.0 (#2586) (a1d7d5b)</li> <li>deps-dev: bump @types/node from 22.18.8 to 22.18.10 in the types-deps group (#2573) (afaa60d)</li> <li>deps-dev: bump the jest-jasmine-deps group across 1 directory with 2 updates (#2585) (eb1dce7)</li> <li>deps: bump core-js from 3.45.1 to 3.46.0 (#2576) (2c4f25e)</li> <li>deps: bump the sentry-deps group with 2 updates (#2572) (8f4b330)</li> <li>enable unit test coverage (#2587) (84448da)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1201-2025-10-20","title":"12.0.1 (2025-10-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_11","title":"Bug Fixes","text":"<ul> <li>Advanced Search: fix search after navigating through the header (DEV-5519) (#2583) (aea6d91)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_10","title":"Maintenances","text":"<ul> <li>bump mkdocs to v1.6.1 and mkdocs-include-markdown-plugin to v7\u2026 (#2578) (d88600b)</li> <li>update OpenApi specification to v32.4.0-9-g0217ee4 (#2582) (8115908)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_1","title":"Documentation","text":"<ul> <li>remove contribution (#2579) (84d5e2a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1200-2025-10-13","title":"12.0.0 (2025-10-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>implement new design with tabs and better navigation (#2536)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_4","title":"Enhancements","text":"<ul> <li>add a resource explorer dialog (#2549) (b995913)</li> <li>implement new design with tabs and better navigation (#2536) (dd8dc43)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_12","title":"Bug Fixes","text":"<ul> <li>add missing margins to some dialogs (#2567) (f1673bb)</li> <li>color picker is clipped by parents (DEV-5464) (#2554) (f0e22ff)</li> <li>resource tabs do not display a Y-axis scrollbar (#2569) (561998f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_11","title":"Maintenances","text":"<ul> <li>deps-dev: bump @swc-node/register from 1.9.2 to 1.11.1 (#2559) (7fd9c68)</li> <li>deps-dev: bump @swc/core from 1.13.3 to 1.13.5 (#2558) (bbc551e)</li> <li>deps-dev: bump ng-packagr from 20.2.0 to 20.3.0 (#2560) (b483e3f)</li> <li>deps: bump @sentry/angular from 10.17.0 to 10.18.0 in the sentry-deps group (#2556) (40364ea)</li> <li>fix vulnerable dependencies (#2565) (7f0d461)</li> <li>make all the DI parameters in constructor readonly and prefix private with _ (#2568) (07ada8c)</li> <li>post Angular upgrades cleanup (DEV-5459) (#2547) (2e2ea1a)</li> <li>remove Karma completely (DEV-5472) (#2561) (06915d9)</li> <li>remove nx-cloud (DEV-5485) (#2562) (6f27247)</li> <li>skip e2e tests that should be run manually (#2577) (ddd6f64)</li> <li>update API v2.1.21 spec (#2566) (1aede73)</li> <li>upgrade OpenApi routes v2.1.21 (#2571) (e885d24)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11472-2025-10-07","title":"11.47.2 (2025-10-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_13","title":"Bug Fixes","text":"<ul> <li>display menu when user can edit (DEV-5468) (#2552) (488768a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11471-2025-10-07","title":"11.47.1 (2025-10-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_14","title":"Bug Fixes","text":"<ul> <li>do not subscribe to currentproject$ (DEV-5432) (#2548) (78fde00)</li> <li>reintroduce edit label for pages (DEV-5468) (#2550) (d2fc4d2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11470-2025-10-06","title":"11.47.0 (2025-10-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_5","title":"Enhancements","text":"<ul> <li>persist user preference for showing all comments (#2546) (e26a77b)</li> <li>show all properties it should remember the choice of user (#2544) (6136e47)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_15","title":"Bug Fixes","text":"<ul> <li>reintroduce edit toolbar and remove duplicated header (DEV-5453) (#2545) (9f69542)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_12","title":"Maintenances","text":"<ul> <li>Angular: Upgrade NX to v21.5.1 and Angular to v20.2.4 (#2541) (b976abd)</li> <li>disable Nx Cloud (#2542) (e52775b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11460-2025-09-29","title":"11.46.0 (2025-09-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_6","title":"Enhancements","text":"<ul> <li>reintroduce backdrop color (DEV-5431) (#2531) (90f0709)</li> <li>switch to v2-resources-candelete route (DEV-5410) (#2532) (0cba603)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_16","title":"Bug Fixes","text":"<ul> <li>remove async validation for username and email in user form (#2537) (5273685)</li> <li>set whole sub toolbar conditionally (DEV-5430) (#2530) (3a7771e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_13","title":"Maintenances","text":"<ul> <li>Angular: Upgrade NX to v20.5.0 and Angular to v19.2.9 (DEV-5439) (#2533) (2f4f8dd)</li> <li>Saas Dart: Migrate imports and global built-in functions (DEV-5445) (#2539) (23a1e53)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11451-2025-09-24","title":"11.45.1 (2025-09-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_17","title":"Bug Fixes","text":"<ul> <li>improve project data handling in CreateResourceDialogComponent (#2534) (64956ce)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11450-2025-09-23","title":"11.45.0 (2025-09-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_7","title":"Enhancements","text":"<ul> <li>remove licenced info (DEV-5304) (#2525) (6a896ac)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_18","title":"Bug Fixes","text":"<ul> <li>can edit a resource class info in data model editor (#2526) (5acfcbf)</li> <li>dont resend create request in subscription (DEV-5433) (#2529) (667dbc9)</li> <li>use open api (DEV-5435) (#2528) (bfec3fe)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_14","title":"Maintenances","text":"<ul> <li>ESLint: Enable prefer-control-flow rule (#2523) (cf68766)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11440-2025-09-22","title":"11.44.0 (2025-09-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_8","title":"Enhancements","text":"<ul> <li>enhance performance of region loading (DEV-5278) (#2472) (e3a8d48)</li> <li>warning unsupported property in ontology editor (DEV-5264) (#2517) (c15fa98)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_19","title":"Bug Fixes","text":"<ul> <li>add no results page to advanced search page (#2521) (b2c97c1)</li> <li>boolean value is correctly displayed (#2520) (45a92b2)</li> <li>compare normalised (#2513) (6fb011d)</li> <li>track by unique (DEV-5420) (#2518) (f81d38e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_15","title":"Maintenances","text":"<ul> <li>NGXS leftovers cleanup (#2522) (f99dcd3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11430-2025-09-15","title":"11.43.0 (2025-09-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_9","title":"Enhancements","text":"<ul> <li>improve account page design, update user password dialog (#2503) (6f15aa7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_20","title":"Bug Fixes","text":"<ul> <li>correct template structure in resources-list component (#2507) (a59756e)</li> <li>ensure keyword search is case-insensitive in resource list item component (#2509) (6abbe56)</li> <li>insert and move child list node is relative to parent and not ro\u2026 (#2512) (32741c3)</li> <li>remove unnecessary URL encoding in header component (#2511) (e00a686)</li> <li>resource editor: load resource logic(DEV-4895) (#2468) (294f7e4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_16","title":"Maintenances","text":"<ul> <li>Angular: Control Flow syntax migration (#2505) (609b3fe)</li> <li>NGXS: proper dependency removal (44c2b6b)</li> <li>OpenAPI: update DSP-API specification to version 2.1.20 (#2508) (1eef65d)</li> <li>set preserveWhitespace to default (false) (#2506) (ac69514)</li> <li>update open api spec yaml (#2510) (d8bf2b5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_3","title":"Tests","text":"<ul> <li>k6: add store regression tests (DEV-5378) (#2496) (d92ca79)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11421-2025-09-04","title":"11.42.1 (2025-09-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_21","title":"Bug Fixes","text":"<ul> <li>easy typing issues (#2498) (deb4341)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_17","title":"Maintenances","text":"<ul> <li>remove typing issues and move DaschLanguage type to config (#2499) (1e478fc)</li> <li>remove unused video preview and av timeline component (#2502) (9c47904)</li> <li>replace userState by userService and remove ngxs (#2497) (630f3f6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11420-2025-09-01","title":"11.42.0 (2025-09-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_10","title":"Enhancements","text":"<ul> <li>improve the project view with better selection (#2479) (d18f525)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_22","title":"Bug Fixes","text":"<ul> <li>advanced search select property without resource class (DEV-5259) (#2489) (b4eba90)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11411-2025-08-26","title":"11.41.1 (2025-08-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_23","title":"Bug Fixes","text":"<ul> <li>add line break to paragraph viewer (#2492) (dba0e33)</li> <li>html values are displayed correctly (#2493) (d9e8781)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_18","title":"Maintenances","text":"<ul> <li>CI: update Node.js to v20.11.1 (#2494) (af72c6c)</li> <li>remove CODEOWNERS (#2490) (f31e0f0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11410-2025-08-25","title":"11.41.0 (2025-08-25)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_11","title":"Enhancements","text":"<ul> <li>add license caption mapping and subtitle image for project 0810 (#2486) (9709d17)</li> <li>adjust resource-form size to contain action buttons (#2487) (c440428)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_24","title":"Bug Fixes","text":"<ul> <li>display multiline comments correctly in resource editor (#2484) (ee8b0d0)</li> <li>remove hover background color on incoming and standoff links pro\u2026 (#2483) (c12501b)</li> <li>set min-size for preventing shift (DEV-5327) (#2469) (fd7bc8e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_19","title":"Maintenances","text":"<ul> <li>add DSP-API openAPI specification check (#2408) (e42fdce)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.21.0 to 2.22.0 (#2473) (8af70d4)</li> <li>deps-dev: bump @swc/core from 1.12.14 to 1.13.3 (#2457) (1c3110e)</li> <li>deps-dev: bump @types/node from 20.19.8 to 20.19.9 in the types-deps group (#2422) (6a5f191)</li> <li>deps-dev: bump the eslint-deps group with 2 updates (#2424) (2621953)</li> <li>deps: bump @sentry/cli from 2.47.1 to 2.52.0 in the sentry-deps group across 1 directory (#2475) (f40970f)</li> <li>fix mdc-button__label color (#2481) (e26cf4d)</li> <li>OpenAPI: remove generated files and add to gitignore (#2471) (5ed6db2)</li> <li>remove angular cache in postinstall script (#2474) (37d3e4a)</li> <li>upgrade Angular to v18.2.9 &amp; NX to v19.8.9 (DEV-4922) (#2411) (9482c45)</li> <li>upgrade node version and docs (#2480) (821badf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11400-2025-08-07","title":"11.40.0 (2025-08-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_12","title":"Enhancements","text":"<ul> <li>add cover image for project 085E (#2467) (94ca0c8)</li> <li>add delete icon to delete a value if cardinality is n (#2464) (cbeb2b8)</li> <li>add new property placeholders (#2460) (5e7af21)</li> <li>add spinner when loading geoname values (#2465) (0c707ac)</li> <li>adjust tooltips according to canResourceBeDeleted (DEV-5236,  DEV-5240) (#2461) (54f7da5)</li> <li>footnotes are a bit smaller (#2466) (2f228be)</li> <li>ontology editor add backdrop to progress indicator (DEV-5223) (#2458) (764111b)</li> <li>ontology editor: introduce validation (DEV-5222) (#2453) (7c862a1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_25","title":"Bug Fixes","text":"<ul> <li>footnote numbering is correct again (#2462) (c87aaef)</li> <li>make comment behaviour in resource editor consistent with resource creator (#2463) (9720430)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_20","title":"Maintenances","text":"<ul> <li>type strictly (DEV-5232) (#2459) (fff941c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11390-2025-08-04","title":"11.39.0 (2025-08-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_13","title":"Enhancements","text":"<ul> <li>add cover image for project 0860 (#2452) (ed8276b)</li> <li>disable multiple checkbox for boolean object type (DEV-5221) (#2450) (6200fb3)</li> <li>ontology editor: dont highlight properties in view mode (DEV-5215) (#2446) (39cd218)</li> <li>Replace file upload spinner with progress bar (#2442) (a798cd4)</li> <li>translate ontology editor (DEV-5202) (#2441) (db90f2e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_26","title":"Bug Fixes","text":"<ul> <li>include all paginated annotations in result (#2451) (52fd8f2)</li> <li>set empty list node to not required (DEV-5104) (#2445) (02843eb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_21","title":"Maintenances","text":"<ul> <li>cleanup, remove unused, remove unnecessary (DEV-5191) (#2443) (4dd906f)</li> <li>split resource creator and editor business logic (#2378) (293ca65)</li> <li>truncate acc. to min width (#2449) (8cbbc3b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11380-2025-07-28","title":"11.38.0 (2025-07-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_14","title":"Enhancements","text":"<ul> <li>Add legal settings translations(DEV-4632) (#2440) (6795ff9)</li> <li>Add missing translations for resource metadata export (#2431) (980e562)</li> <li>ontology editor property comments no longer visible (DEV-5152) (#2420) (b8989f1)</li> <li>rename license labels (#2435) (d6127d8)</li> <li>translate lists label (DEV-5151) (#2436) (11a941f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_27","title":"Bug Fixes","text":"<ul> <li>a user can be created and added to the project (#2439) (6f10bf5)</li> <li>create region: Create comment as stringvalueAsXml (#2414) (e9d5946)</li> <li>introduce canBeDeleted check (DEV-5015) (#2416) (438f22d)</li> <li>ontology editor linked external ontologies not displayed (DEV-5188) (#2432) (6b8a065)</li> <li>react on changes to filter unused properties (DEV-5150) (#2433) (001ab14)</li> <li>the project members list is updated when adding / removing a pro\u2026 (#2438) (064bb43)</li> <li>undefined property for property value (#2437) (b766c13)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_22","title":"Maintenances","text":"<ul> <li>Publish Docker <code>latest</code> tag (#2444) (5d83197)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_4","title":"Tests","text":"<ul> <li>add tests for data model and list editing (DEV-5190) (#2429) (e731f37)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11370-2025-07-22","title":"11.37.0 (2025-07-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_15","title":"Enhancements","text":"<ul> <li>add teaser image 0861 (#2418) (3bfbc3d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_28","title":"Bug Fixes","text":"<ul> <li>change selector (#2427) (3cad677)</li> <li>reduce project 0861 image size (#2428) (77a6d1d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_23","title":"Maintenances","text":"<ul> <li>Add .nvmrc file for Node.js version specification (#2415) (7e2158a)</li> <li>rewrite user project management and user management (#2413) (5989d62)</li> <li>use new double-chip component where it's possible (#2405) (1aa5195)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_5","title":"Tests","text":"<ul> <li>avoid faker for label (5185) (#2417) (20a622e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11361-2025-07-21","title":"11.36.1 (2025-07-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_29","title":"Bug Fixes","text":"<ul> <li>routing to \"edit description\" page works again (#2409) (12adbf7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_24","title":"Maintenances","text":"<ul> <li>deps-dev: bump @swc/core from 1.12.11 to 1.12.14 (#2404) (09544ae)</li> <li>deps-dev: bump @types/node from 20.19.6 to 20.19.7 in the types-deps group (#2403) (50a3f09)</li> <li>deps-dev: bump chai from 5.2.0 to 5.2.1 (#2401) (64d3ad7)</li> <li>deps: bump on-headers and compression (#2412) (e7d977e)</li> <li>deps: bump the grafana-deps group with 2 updates (#2402) (e0f802d)</li> <li>deps: bump zod from 3.25.75 to 3.25.76 (#2400) (1702af1)</li> <li>update CODEOWNERS (#2407) (2daf005)</li> <li>upgrade NGXS to 18.1.0 (DEV-5114) (#2395) (37ed820)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_6","title":"Tests","text":"<ul> <li>add testing of the class type created (DEV-5149) (#2394) (1a67cbf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11360-2025-07-14","title":"11.36.0 (2025-07-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_16","title":"Enhancements","text":"<ul> <li>add new cover images for projects (#2398) (96c1338)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_30","title":"Bug Fixes","text":"<ul> <li>can add a resource class of different types (#2392) (7ba952c)</li> <li>make first of the ontologies lists expanded by default (DEV-5147) (#2397) (1abadb0)</li> <li>update condition on displaying that a resource is deleted (#2365) (d7bce87)</li> <li>users list (#2391) (aaae800)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_25","title":"Maintenances","text":"<ul> <li>alignment in copyright holder (#2396) (827ae80)</li> <li>deps-dev: bump @swc/core from 1.11.31 to 1.12.11 (#2389) (7e0015d)</li> <li>deps-dev: bump @types/node from 20.19.2 to 20.19.4 in the types-deps group (#2381) (9ec7972)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.34.0 to 8.36.0 (#2390) (78a5907)</li> <li>deps: bump @sentry/cli from 2.46.0 to 2.47.0 in the sentry-deps group (#2388) (6a17e7e)</li> <li>deps: bump core-js from 3.43.0 to 3.44.0 (#2382) (c4f1e41)</li> <li>deps: bump zod from 3.25.67 to 3.25.75 (#2384) (bb9d269)</li> <li>refactor ontology (DEV-4581) (#2105) (50b8c19)</li> <li>split project members and system admin users list (#2399) (75a9872)</li> <li>update CODEOWNERS (#2393) (6bc3695)</li> <li>upgrade RxJS to v7.8.0 &amp; dsp-js to v10.8.1 (DEV-5113) (#2387) (40ffd6a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11351-2025-07-07","title":"11.35.1 (2025-07-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_31","title":"Bug Fixes","text":"<ul> <li>legal routes with pagination are expanded till all data is fetched (#2373) (a93bad8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_26","title":"Maintenances","text":"<ul> <li>deps-dev: bump @cypress/code-coverage from 3.14.4 to 3.14.5 in the test-coverage-deps group (#2371) (090da40)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.20.2 to 2.21.0 (#2375) (92b52b2)</li> <li>deps-dev: bump @types/node from 20.19.1 to 20.19.2 in the types-deps group (#2368) (cef2f73)</li> <li>deps-dev: bump the eslint-deps group with 2 updates (#2374) (8c63e53)</li> <li>fix eslint deps grouping (#2372) (c5a747e)</li> <li>migrate Angular to self-closing tags (DEV-5119) (#2377) (5856634)</li> <li>refactor SystemComponent, UsersComponents and UsersListComponents (DEV-4931) (#2354) (9e369dc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11350-2025-06-30","title":"11.35.0 (2025-06-30)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_17","title":"Enhancements","text":"<ul> <li>resource editor removes version if resource displayed is on current version (#2344) (24f512b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_32","title":"Bug Fixes","text":"<ul> <li>Do not preset the time field (DEV-5004) (#2359) (e42d2f1)</li> <li>racing condition by implementing facade with population on demand (DEV-5088) (#2362) (094c47d)</li> <li>resource toolbars: Erase toolbar button only available to project admins (DEV-5012) (#2357) (50b7248)</li> <li>set app language according to user or browser language (DEV-4858) (#2360) (de696e3)</li> <li>unsupported link to Representation subclasses is displayed as link property; disable editing of uneditable fields (DEV-5086) (#2361) (6a6d6df)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_27","title":"Maintenances","text":"<ul> <li>deps-dev: bump @types/node from 20.19.0 to 20.19.1 in the types-deps group (#2346) (d5343e1)</li> <li>deps-dev: bump brace-expansion from 1.1.11 to 1.1.12 (#2340) (dc20950)</li> <li>deps-dev: bump postcss from 8.5.4 to 8.5.6 in the postcss-deps group (#2345) (774711c)</li> <li>deps-dev: bump ts-jest from 29.3.4 to 29.4.0 in the jest-deps group (#2347) (5aa97a0)</li> <li>deps: bump zod from 3.25.56 to 3.25.67 (#2356) (d7bf013)</li> <li>Initilaize Claude Code (#2364) (8ce8ba3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11340-2025-06-23","title":"11.34.0 (2025-06-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_18","title":"Enhancements","text":"<ul> <li>add EPUB, HTM abd HTML filetypes support (DEV-5081) (#2355) (d38d320)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_33","title":"Bug Fixes","text":"<ul> <li>does not display default authorhships if they are already used  (#2350) (a1fd798)</li> <li>link to licenses is correct (#2349) (8478a09)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_28","title":"Maintenances","text":"<ul> <li>unit tests are working again in the CI (#2352) (235e6f2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11330-2025-06-16","title":"11.33.0 (2025-06-16)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_19","title":"Enhancements","text":"<ul> <li>Add Project Resources Metadata export feature (DEV-4938) (#2312) (6366ffa)</li> <li>default values are added in the copyright legal settings (#2321) (0f6a27e)</li> <li>make metadata export user friendly and improve the code (DEV-4938) (#2331) (1b82296)</li> <li>ontology editor: translate classes for linkToClass (DEV-4891) (#2296) (5ead1eb)</li> <li>remove temporarily external links in list values (#2339) (762bf18)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_34","title":"Bug Fixes","text":"<ul> <li>add missing licenses images (#2343) (1094fa9)</li> <li>do not show user projects for a system admin user (#2320) (84af8ab)</li> <li>fix incoming links pager labels (4990) (#2337) (eb372dd)</li> <li>Prevent JWT tokens from being sent to Pendo analytics (DEV-5006) (#2329) (41a7dec)</li> <li>replace LicenseDto with ProjectLicenseDto (DEV-5018) (#2328) (6c94f3c)</li> <li>resource-legal handles getFileValue is null case (#2338) (345ae6a)</li> <li>show link selected resources button according to unique project \u2026 (#2294) (a9a3ce6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_29","title":"Maintenances","text":"<ul> <li>deps-dev: bump @cypress/code-coverage from 3.14.3 to 3.14.4 in the test-coverage-deps group (#2325) (cb5b4c7)</li> <li>deps-dev: bump @swc/core from 1.11.29 to 1.11.31 (#2333) (d43c148)</li> <li>deps-dev: bump @types/node from 20.17.50 to 20.17.57 in the types-deps group (#2326) (8d7dfb3)</li> <li>deps-dev: bump @types/node from 20.17.57 to 20.19.0 in the types-deps group (#2334) (5a7d4bc)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.32.1 to 8.33.1 (#2335) (807f10c)</li> <li>deps-dev: bump eslint-plugin-prettier from 5.4.0 to 5.4.1 (#2324) (ad06434)</li> <li>deps-dev: bump postcss from 8.5.3 to 8.5.4 in the postcss-deps group (#2327) (d9491cc)</li> <li>deps: bump @sentry/cli from 2.45.0 to 2.46.0 in the sentry-deps group (#2323) (ea7c18c)</li> <li>deps: bump core-js from 3.42.0 to 3.43.0 (#2336) (5bc97ef)</li> <li>deps: bump zod from 3.25.14 to 3.25.56 (#2332) (2edcb12)</li> <li>use DialogDrawerConfig to manage dialog size (#2293) (8150493)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_2","title":"Documentation","text":"<ul> <li>add export resource metadata (#2342) (c68abc3)</li> <li>update legal settings (#2341) (3814080)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11320-2025-05-28","title":"11.32.0 (2025-05-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_20","title":"Enhancements","text":"<ul> <li>add new licenses logo for CC0 and CC PDM 1.0 (#2305) (703e7bb)</li> <li>redesign landing page (DEV-4854) (#2279) (8d385ed)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_35","title":"Bug Fixes","text":"<ul> <li>add copyright legals to compound viewer (#2302) (498601c)</li> <li>advanced search, use previous search functionality (DEV-4923) (#2310) (2f4de98)</li> <li>image cover background styling (#2313) (6b25769)</li> <li>resource editor displays a message when resource access is unauthorized (#2306) (0b122cd)</li> <li>restored rm language (DEV-4883) (#2311) (7800794)</li> <li>the grid does not overlap on card hover (#2316) (b4101e0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_30","title":"Maintenances","text":"<ul> <li>add tsc errors script in missing libs (#2308) (245bde0)</li> <li>deps-dev: bump @cypress/code-coverage from 3.14.2 to 3.14.3 in the test-coverage-deps group (#2318) (661bf07)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.20.0 to 2.20.2 (#2300) (25920d9)</li> <li>deps-dev: bump @swc/core from 1.11.24 to 1.11.29 (#2319) (b8eb4ff)</li> <li>deps-dev: bump @types/node from 20.17.46 to 20.17.48 in the types-deps group (#2298) (cb00688)</li> <li>deps-dev: bump @types/node from 20.17.48 to 20.17.50 in the types-deps group (#2314) (a49b48a)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.32.0 to 8.32.1 (#2299) (5d7d0c9)</li> <li>deps-dev: bump ng-mocks from 14.13.4 to 14.13.5 (#2315) (f6ed51f)</li> <li>deps-dev: bump ts-jest from 29.3.2 to 29.3.4 in the jest-deps group (#2297) (56e52e7)</li> <li>deps: bump the grafana-deps group with 2 updates (#2317) (daf08eb)</li> <li>deps: bump zod from 3.24.3 to 3.25.1 (#2301) (03ec278)</li> <li>OnPush cd strategy for UI components (DEV-4955) (#2322) (8e7d66f)</li> <li>OnPush for search components (DEV-4914) (#2307) (d2397aa)</li> <li>refactor Membership, Projects, EraseProjectDialog, SortButton Components (DEV-4931) (#2304) (e76d3be)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11312-2025-05-14","title":"11.31.2 (2025-05-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_36","title":"Bug Fixes","text":"<ul> <li>advanced search property dropdown list (DEV-4776) (#2288) (fbd67e5)</li> <li>name and family name of the resource author is displayed as a priority (DEV-4837) (#2277) (5aa5aed)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_31","title":"Maintenances","text":"<ul> <li>deps-dev: bump eslint-plugin-prettier from 5.2.6 to 5.4.0 (#2285) (353a0f5)</li> <li>deps: bump @sentry/cli from 2.44.0 to 2.45.0 in the sentry-deps group (#2286) (6a645e0)</li> <li>replace getStillImageRepresentationsForCompoundResource with dedicated endpoints (DEV-4836)  (#2292) (8585f31)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11311-2025-05-13","title":"11.31.1 (2025-05-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_37","title":"Bug Fixes","text":"<ul> <li>edit resource warning validator (#2290) (361abbc)</li> <li>use project shortcode instead of iri in link value links (#2289) (a0517b5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_32","title":"Maintenances","text":"<ul> <li>deps-dev: bump @cypress/code-coverage from 3.14.0 to 3.14.1 in the test-coverage-deps group (#2283) (ae84e70)</li> <li>deps-dev: bump @types/node from 20.17.32 to 20.17.46 in the types-deps group (#2282) (050e626)</li> <li>deps: bump the grafana-deps group with 2 updates (#2284) (4bfcf82)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11310-2025-05-12","title":"11.31.0 (2025-05-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_21","title":"Enhancements","text":"<ul> <li>add copyright holders, licenses and authorship to file values (#2253) (ab0ec0c)</li> <li>break texts (#2256) (559f10f)</li> <li>improve still image controls (#2278) (7fb0556)</li> <li>licenses without logos don't have external links (#2281) (cfb2a0c)</li> <li>the user can search for lists in the list view of resource editor (#2228) (8f4f13a)</li> <li>unrestrict the use of linkTo properties by removing the subject\u2026 (#2266) (a8592e0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_38","title":"Bug Fixes","text":"<ul> <li>advanced search properties list (DEV-4776)  (#2271) (c1fbdb9)</li> <li>any dialog is visible in the resource tab (#2255) (1e9fc72)</li> <li>label sorting (DEV-4786) (#2265) (bb411be)</li> <li>no results css (DEV-4802) (#2267) (2551e25)</li> <li>reload search results after query change (DEV-4772) (#2257) (d3a8742)</li> <li>resource-editor property title does not overlap with buttons (#2268) (5949139)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_33","title":"Maintenances","text":"<ul> <li>add docker healthcheck (INFRA-776) (#2182) (2c32c8f)</li> <li>align items vertically (#2280) (0bf5172)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.19.1 to 2.20.0 (#2261) (096397f)</li> <li>deps-dev: bump @swc/core from 1.11.21 to 1.11.24 (#2275) (38eb77e)</li> <li>deps-dev: bump @types/node from 20.17.30 to 20.17.32 in the types-deps group (#2260) (3068ee4)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.31.0 to 8.31.1 (#2274) (3241fa7)</li> <li>deps: bump @sentry/cli from 2.43.0 to 2.43.1 in the sentry-deps group (#2262) (e20f87e)</li> <li>deps: bump @sentry/cli from 2.43.1 to 2.44.0 in the sentry-deps group (#2270) (cb3c4a2)</li> <li>deps: bump core-js from 3.41.0 to 3.42.0 (#2272) (369c385)</li> <li>deps: bump the grafana-deps group with 2 updates (#2259) (a874b70)</li> <li>deps: bump the grafana-deps group with 2 updates (#2273) (edbd8a8)</li> <li>deps: bump vite from 5.4.18 to 5.4.19 (#2276) (5fa92db)</li> <li>remove file representation interface and complex usage (#2269) (46730ee)</li> <li>replace getIncomingRegions with dedicated endpoint (DEV-4824)  (#2264) (8240d83)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11300-2025-04-28","title":"11.30.0 (2025-04-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_22","title":"Enhancements","text":"<ul> <li>a user can see a resource with previous versionning (#2248) (8bdb7da)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_39","title":"Bug Fixes","text":"<ul> <li>a loaded resource is only fetched once (#2239) (663c533)</li> <li>bool expression (DEV-4826) (#2254) (c9f771d)</li> <li>ontology class sorting (DEV-4786) (#2242) (368a708)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_34","title":"Maintenances","text":"<ul> <li>deps-dev: bump @typescript-eslint/utils from 8.26.1 to 8.29.1 (#2236) (f7c8fc8)</li> <li>deps-dev: bump ts-jest from 29.3.1 to 29.3.2 in the jest-deps group (#2235) (556d3f7)</li> <li>deps: bump core-js from 3.40.0 to 3.41.0 (#2237) (17082bc)</li> <li>deps: bump the grafana-deps group with 2 updates (#2234) (ff0f3df)</li> <li>deps: bump the grafana-deps group with 2 updates (#2244) (1860fb7)</li> <li>remove unused api services (#2240) (4ec7737)</li> <li>translation labels (DEV-4735) (#2216) (45bf3a1)</li> <li>update openapi generated code (#2241) (f8979e7)</li> <li>update swc and types/jwc-decode dependencies (#2250) (f2900f8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_3","title":"Documentation","text":"<ul> <li>update translations README (#2251) (9c5ea0a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11292-2025-04-14","title":"11.29.2 (2025-04-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenances_35","title":"Maintenances","text":"<ul> <li>update the rule when PRs should be triggered (#2232) (a780476)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11291-2025-04-08","title":"11.29.1 (2025-04-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_40","title":"Bug Fixes","text":"<ul> <li>side nav css (DEV-4725) (#2220) (c12bb8f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_36","title":"Maintenances","text":"<ul> <li>deps-dev: bump chai from 5.1.2 to 5.2.0 (#2227) (4324382)</li> <li>deps-dev: bump prettier from 3.5.1 to 3.5.3 (#2224) (ddc4e47)</li> <li>deps: bump json2typescript from 1.5.1 to 1.6.1 (#2226) (3be4f8b)</li> <li>deps: bump the grafana-deps group with 2 updates (#2223) (973c7c4)</li> <li>improve resource fetcher logic (#2202) (dfedd05)</li> <li>use ReadResource when it's possible rather than DspResource. (#2222) (2109943)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11290-2025-04-04","title":"11.29.0 (2025-04-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_23","title":"Enhancements","text":"<ul> <li>only display active project tiles (#2209) (5fae9b9)</li> <li>only show annotations tab when there is an annotation to show (#2208) (36337a4)</li> <li>use dedicated  endpoint for querying incoming links instead of Gravsearch (DEV-4729) (#2204) (13c514f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_41","title":"Bug Fixes","text":"<ul> <li>align footnotes (#2217) (d1b97e1)</li> <li>footnotes display works again (#2215) (f1e2488)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_37","title":"Maintenances","text":"<ul> <li>deps-dev: bump @types/node from 20.17.24 to 20.17.28 in the types-deps group (#2213) (0f660c9)</li> <li>deps-dev: bump ts-jest from 29.2.6 to 29.3.0 in the jest-deps group (#2211) (7dadd23)</li> <li>deps: bump @sentry/cli from 2.42.3 to 2.43.0 in the sentry-deps group (#2212) (4bf48d1)</li> <li>deps: bump axios and @openapitools/openapi-generator-cli (#2206) (8e8b863)</li> <li>move mathjax lib files (#2219) (2470fd0)</li> <li>updating the file is done in replace-file-dialog. (#2210) (6287663)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11280-2025-03-31","title":"11.28.0 (2025-03-31)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_24","title":"Enhancements","text":"<ul> <li>Unify resource annotations wording (DEV-4393) (#2188) (bc05517)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_42","title":"Bug Fixes","text":"<ul> <li>adds sorting to project selectors (DEV-4626) (#2170) (6a71b66)</li> <li>align buttons and icons (DEV-4384) (#1929) (909d01a)</li> <li>change not system admin language (DEV-4707) (#2197) (c3a01d3)</li> <li>class list item style (DEV-4629) (#2164) (f5c887b)</li> <li>hide/show button depending on the parent resources editing right\u2026 (#2196) (875ba94)</li> <li>open segment form as side dialog (#2198) (b8f3c60)</li> <li>prevents from creating linked resource with multiple attached projects (DEV-4557) (#2126) (de16d6c)</li> <li>register custom icon (#2205) (eae4abe)</li> <li>suspend user action (DEV-4603) (#2171) (d4b6e44)</li> <li>translations (DEV-4726) (#2203) (1b44368)</li> <li>video cinema mode (DEV-4668) (#2199) (af5dd1e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_38","title":"Maintenances","text":"<ul> <li>create new resource-editor/properties-display lib (#2200) (110bd15)</li> <li>improve row styling of resource editor (#2201) (d63c108)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11270-2025-03-24","title":"11.27.0 (2025-03-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_25","title":"Enhancements","text":"<ul> <li>add missing translations for EN, DE, FR and IT languages (DEV-4647) (#2163) (2e43da7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_43","title":"Bug Fixes","text":"<ul> <li>adds autocomplete control for property list value in advanced search (DEV-4694) (#2191) (513e02a)</li> <li>fix resource permissions label translation (DEV-4708) (#2185) (1fe197e)</li> <li>footnotes are displayed even wrapped (bold, italic, ..) (#2189) (205b7f4)</li> <li>selected ontology in advanced search (DEV-4696) (#2180) (9ef0459)</li> <li>updates resources count on resource deletion (#2186) (006c01b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_39","title":"Maintenances","text":"<ul> <li>adapt to js lib new typing (#2150) (b02753c)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.26.0 to 8.26.1 (#2184) (fee5133)</li> <li>deps: bump @sentry/cli from 2.42.2 to 2.42.3 in the sentry-deps group (#2183) (2228ed5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_4","title":"Documentation","text":"<ul> <li>Add content about footnotes (#2190) (2f44e89)</li> <li>Add content about segment support (#2175) (fb1778c)</li> <li>add legal settings (#2192) (4621223)</li> <li>Add missing documentation about IIIF images (#2174) (e373022)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11263-2025-03-17","title":"11.26.3 (2025-03-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_44","title":"Bug Fixes","text":"<ul> <li>allows resource linking for project admin (DEV-4551) (#2116) (9aa2f1a)</li> <li>bring back, fix and improve some translations (DEV-4676) (#2161) (68ebf71)</li> <li>displays property list child  items in advanced search (DEV-4694) (#2173) (298106e)</li> <li>encode url (#2158) (83fd37a)</li> <li>incoming links not working properly when creating a new one (#2176) (64788d9)</li> <li>load ontology action (DEV-4608) (#2162) (5dcd0e0)</li> <li>ontology editor: create page number as seqnum subproperty (#2157) (3edce46)</li> <li>pass viewContainerRef (DEV-4671) (#2154) (a0a0717)</li> <li>pendo only receives data from 'prod' (#2160) (6fc9812)</li> <li>properties style alignment (#2153) (9c495d2)</li> <li>remove unused translations (DEV-4598) (#2148) (3542562)</li> <li>set loading status (#2155) (98ac9b3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_40","title":"Maintenances","text":"<ul> <li>add entries to Dependabot file (#2141) (41640b6)</li> <li>change align-items values from start to flex-start (#2156) (6e1bbba)</li> <li>deps-dev: bump @cypress/code-coverage from 3.13.11 to 3.13.12 in the test-coverage-deps group (#2166) (86c4575)</li> <li>deps-dev: bump @types/node from 20.17.19 to 20.17.23 in the types-deps group (#2147) (b025f59)</li> <li>deps-dev: bump @types/node from 20.17.23 to 20.17.24 in the types-deps group (#2165) (b9e8910)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.24.0 to 8.26.0 (#2169) (e0da061)</li> <li>deps-dev: bump autoprefixer from 10.4.20 to 10.4.21 (#2168) (c2cbb88)</li> <li>deps-dev: bump ng-mocks from 14.13.2 to 14.13.3 (#2167) (11b0ec3)</li> <li>deps-dev: bump postcss from 8.5.2 to 8.5.3 in the postcss-deps group (#2144) (95fdf7b)</li> <li>deps-dev: bump ts-jest from 29.2.5 to 29.2.6 in the jest-deps group (#2143) (f3de978)</li> <li>deps: bump @sentry/cli from 2.41.1 to 2.42.2 in the sentry-deps group (#2145) (199aa1e)</li> <li>deps: bump the grafana-deps group with 2 updates (#2142) (a07b14a)</li> <li>fix some tsc issues in resource editor (#2132) (7866c88)</li> <li>move some user components to the right lib (#2149) (2d09530)</li> <li>remove unused code (#2151) (96d9dfb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11262-2025-03-03","title":"11.26.2 (2025-03-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_45","title":"Bug Fixes","text":"<ul> <li>compoundService reset on change of resource (#2135) (768f687)</li> <li>highlights value from route and redesign the properties in the resource editor (#2134) (ac6186d)</li> <li>navigate after deletion (#2125) (08ca25b)</li> <li>resource editor manages its own resource deletion (#2138) (097b620)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_41","title":"Maintenances","text":"<ul> <li>e2e tests can have code coverage option (#2127) (9930f7a)</li> <li>remove unused code (#2137) (6c9d1b0)</li> <li>remove unused route (#2139) (593c19d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11261-2025-02-24","title":"11.26.1 (2025-02-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_46","title":"Bug Fixes","text":"<ul> <li>can navigate to internal links (#2133) (9574905)</li> <li>incoming links update properly (#2130) (d1731d8)</li> <li>loading is happening inside the incoming links property row (#2128) (c2e7020)</li> <li>select search (DEV-4498) (#2129) (fe8e6b7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_42","title":"Maintenances","text":"<ul> <li>deps-dev: bump @types/jasmine from 4.6.4 to 4.6.5 in the jasmine-karma-deps group (#2118) (61e1356)</li> <li>deps-dev: bump @types/node from 20.17.17 to 20.17.19 in the types-deps group (#2120) (db6a742)</li> <li>deps-dev: bump postcss from 8.5.1 to 8.5.2 in the postcss-deps group (#2119) (88b6f8a)</li> <li>deps-dev: bump prettier from 3.5.0 to 3.5.1 (#2121) (3975ec5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11260-2025-02-17","title":"11.26.0 (2025-02-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_26","title":"Enhancements","text":"<ul> <li>adds mat autocomplete control to the advanced search (DEV-4498) (#2101) (81f7f78)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_47","title":"Bug Fixes","text":"<ul> <li>does not display empty rows (#2122) (f042d0f)</li> <li>json parsing issue in en.json (#2117) (5e5d22a)</li> <li>link value style is consistent with the other select areas (#2113) (3e654b6)</li> <li>paging of incoming links works again (#2108) (3e26477)</li> <li>show delete resource value bubble icon permissions (DEV-4564) (#2090) (6ca8378)</li> <li>split area container (DEV-4577) (#2107) (2247444)</li> <li>update footnote plugin (ckeditor5) to 2.1.5 (#2096) (28e249f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_43","title":"Maintenances","text":"<ul> <li>add CODEOWNERS file (#2095) (03a4747)</li> <li>add environments list excluded from tracking by Sentry (#2102) (8632ff3)</li> <li>add tsc command to nx projects (#2097) (672009d)</li> <li>deps-dev: bump @types/node from 20.17.16 to 20.17.17 in the types-deps group (#2092) (bebc116)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.22.0 to 8.24.0 (#2099) (cae2ffa)</li> <li>deps-dev: bump prettier from 3.4.2 to 3.5.0 (#2094) (8e44e92)</li> <li>deps: bump the grafana-deps group across 1 directory with 2 updates (#2100) (6a8d407)</li> <li>path to generate openapi was broken (#2114) (9ebf9ec)</li> <li>remove settings nx library and move files to project library (#2106) (204eb32)</li> <li>remove unused code (#2112) (79a3812)</li> <li>update openApi generated code to 2.1.15 (#2115) (5670459)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_7","title":"Tests","text":"<ul> <li>remove not reliable footnote test (#2109) (c12b8ea)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11251-2025-02-10","title":"11.25.1 (2025-02-10)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_48","title":"Bug Fixes","text":"<ul> <li>footnotes escape html only once (#2088) (cc85f14)</li> <li>internal links and external work with ckeditor footnotes  (#2084) (58676b9)</li> <li>selected region click only fires when a region iri is found (#2089) (5bdb9fc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_44","title":"Maintenances","text":"<ul> <li>deps: bump the grafana-deps group across 1 directory with 2 updates (#2080) (27165aa)</li> <li>remove unused variables (#2086) (8c72abc)</li> <li>replace internal links with pipe rather than directive  (#2082) (80d5c0b)</li> <li>update github/codeql-action to v3 (#2087) (4af3800)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11250-2025-02-04","title":"11.25.0 (2025-02-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_27","title":"Enhancements","text":"<ul> <li>reimplement a progress indicator (DEV-4544) (#2076) (2d27657)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_49","title":"Bug Fixes","text":"<ul> <li>rollback ckeditor5 version to 2.0.0 (#2079) (e3d582a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_45","title":"Maintenances","text":"<ul> <li>remove useless errors (#2075) (bc69443)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_8","title":"Tests","text":"<ul> <li>skip footnote test (#2081) (dea09c0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11240-2025-02-03","title":"11.24.0 (2025-02-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_28","title":"Enhancements","text":"<ul> <li>add footnotes functionnality to richtext (#2071) (d8b71d7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_50","title":"Bug Fixes","text":"<ul> <li>detect changes in Archive Component (#2066) (82b3045)</li> <li>jumps to selected annotation region (DEV-4542) (#2074) (d7f48a6)</li> <li>remove side gap from main content (DEV-3756) (#2068) (acdcbc9)</li> <li>rollback ckeditor version to not include footnotes plugin (#2073) (e0f721b)</li> <li>standoff links work again (#2072) (1ce0477)</li> <li>update paginator style (#2069) (057f16c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_46","title":"Maintenances","text":"<ul> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.15.3 to 2.16.3 (#2064) (8039d66)</li> <li>deps-dev: bump @types/node from 20.17.14 to 20.17.16 in the types-deps group (#2063) (8fb321c)</li> <li>selectors all start with app- instead of dasch-swiss (#2060) (3dc5364)</li> <li>selectors are one liner when possible (#2062) (7ebac68)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_9","title":"Tests","text":"<ul> <li>remove user from a project (DEV-2328) (#2067) (07a8dc4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11230-2025-01-27","title":"11.23.0 (2025-01-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_29","title":"Enhancements","text":"<ul> <li>improve paging of search results (DEV-2468) (#1995) (8c9d77c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_51","title":"Bug Fixes","text":"<ul> <li>cardinalities change in resource class info component (DEV-4514) (#2052) (bca5922)</li> <li>remove problematic and unused property (DEV-4513) (#2044) (b35f9fe)</li> <li>still image: drawing a region does not break mouse nav on canvas (DEV-4445) (#2024) (c7fb551)</li> <li>use getters (DEV-4507) (#2050) (44fbbe4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_47","title":"Maintenances","text":"<ul> <li>add more specific rule for @angular-devkit (#2055) (ab7b6d9)</li> <li>deps-dev: bump @types/node from 20.17.12 to 20.17.14 in the types-deps group (#2048) (ac7d616)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.20.0 to 8.21.0 (#2057) (df2f899)</li> <li>deps-dev: bump eslint-plugin-prettier from 5.2.1 to 5.2.3 (#2058) (8d961bf)</li> <li>deps-dev: bump undici from 5.28.4 to 5.28.5 (#2053) (29d440e)</li> <li>deps: bump @sentry/cli from 2.40.0 to 2.41.0 in the sentry-deps group (#2047) (7a3e55d)</li> <li>deps: bump @sentry/cli from 2.41.0 to 2.41.1 in the sentry-deps group (#2056) (6a34e40)</li> <li>deps: bump the grafana-deps group with 2 updates (#2046) (85bf73a)</li> <li>group nx libs (#2041) (1cbcd39)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_5","title":"Documentation","text":"<ul> <li>add all class types to user guide (#2042) (81b19db)</li> <li>add explanation for classes and subclasses (#2043) (b310318)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_10","title":"Tests","text":"<ul> <li>resource project admin e2e tests with populated data (DEV-4438) (#2027) (a192978)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11226-2025-01-15","title":"11.22.6 (2025-01-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_52","title":"Bug Fixes","text":"<ul> <li>advanced search mat select controls (DEV-4498) (#2035) (9702e36)</li> <li>each haslinktoclass property is displayed as linked resource (#2038) (bb9d254)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_48","title":"Maintenances","text":"<ul> <li>deps-dev: bump @typescript-eslint/utils from 8.19.1 to 8.20.0 (#2040) (87f3f6f)</li> <li>deps-dev: bump ng-mocks from 14.13.1 to 14.13.2 (#2034) (c83af92)</li> <li>deps-dev: bump postcss from 8.4.49 to 8.5.1 in the postcss-deps group (#2039) (01681c4)</li> <li>deps: bump @sentry/angular-ivy from 7.120.2 to 7.120.3 in the sentry-deps group (#2033) (4b477ca)</li> <li>fix angular-eslint versions and bump node.js on the CLI to v20.9.0 (#2037) (8dcdb52)</li> <li>move api, open-api, analytics, string literal nx libs (#2025) (5600339)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11225-2025-01-10","title":"11.22.5 (2025-01-10)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_53","title":"Bug Fixes","text":"<ul> <li>CORS for external resources in OSD viewer (dev-4482) (#2022) (1ec12e1)</li> <li>make ontology class list numbers smaller (DEV -4444) (#2031) (1df4483)</li> <li>update Google Maps pin to properly show new location (DEV-4483) (#2029) (081ec22)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_49","title":"Maintenances","text":"<ul> <li>decrease Dependabot PRs number and interval (#2030) (8126503)</li> <li>deps-dev: bump @types/node from 20.17.10 to 20.17.11 in the types-deps group (#2020) (672beca)</li> <li>deps-dev: bump @types/node from 20.17.11 to 20.17.12 in the types-deps group (#2023) (ced7ead)</li> <li>deps-dev: bump @types/node from 20.17.9 to 20.17.10 (#2005) (2688f85)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.17.0 to 8.19.0 (#2019) (3443738)</li> <li>deps-dev: bump @typescript-eslint/utils from 8.19.0 to 8.19.1 (#2026) (3090641)</li> <li>deps-dev: bump cypress from 13.16.1 to 13.17.0 (#2017) (3b6a31e)</li> <li>deps-dev: bump karma-chrome-launcher from 3.1.1 to 3.2.0 in the jasmine-karma-deps group (#2016) (a7aed40)</li> <li>deps: bump @sentry/angular-ivy from 7.120.1 to 7.120.2 (#2009) (d5bade4)</li> <li>deps: bump @sentry/cli from 2.39.1 to 2.40.0 in the sentry-deps group (#2021) (c375c21)</li> <li>deps: bump core-js from 3.39.0 to 3.40.0 (#2028) (0c5e980)</li> <li>deps: bump zod from 3.23.8 to 3.24.1 (#2002) (6743623)</li> <li>divide packages into Dependabot groups (#2007) (3d75fab)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11224-2024-12-17","title":"11.22.4 (2024-12-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_54","title":"Bug Fixes","text":"<ul> <li>file name decoding from response headers (DEV-4401) (#1996) (07b003f)</li> <li>project linting (DEV-4446) (#1973) (9b2cbb5)</li> <li>save and replace external IIIF image (DEV-4227) (#2013) (e844083)</li> <li>update annotations tab when switching to a compound without page (DEV-4171) (#1997) (1f1b80a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_50","title":"Maintenances","text":"<ul> <li>improve Dependabot rules and grouping (#2003) (790f74b)</li> <li>update DaSCH address (DEV-4440) (#2008) (8428d77)</li> <li>update nx to v19.0.8 (#1983) (ffecefd)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11223-2024-12-09","title":"11.22.3 (2024-12-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_55","title":"Bug Fixes","text":"<ul> <li>advanced search results for specific project (DEV-4326) (#1902) (77365b9)</li> <li>allows to download original asset (DEV-4402) (#1953) (517bceb)</li> <li>close edit state of values on save and after resource changes (DEV-4372) (#1899) (d16ab47)</li> <li>create resource class default data (DEV-4377) (#1917) (a9e092f)</li> <li>display compound without incoming resources, i.e. a book without pages (DEV-4171) (#1928) (f5dc69a)</li> <li>get the template on changes (DEV-4228) (#1963) (8267306)</li> <li>linked property label (#DEV-4379) (#1904) (6533df3)</li> <li>prevents still image component from crashing when image is not p\u2026 (#1971) (6e4e035)</li> <li>removed withCredentials in representation service (#1965) (3b0feab)</li> <li>reset zoom (DEV-4376) (#1914) (6ef3507)</li> <li>reusable list item form validation (DEV-4374) (#1969) (70dfdc3)</li> <li>segment creation dialog is a side dialog (#1903) (9c1ebab)</li> <li>use correct class and translate the label (DEV-4373) (#1922) (b1ae8b0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_51","title":"Maintenances","text":"<ul> <li>add 409 error handling (#1923) (378ec69)</li> <li>add ckeditor5-custom-build to dependabot ignored list (#1930) (a554717)</li> <li>cleanup legacy and unused (DEV-4368) (#1891) (4da6a85)</li> <li>deps-dev: bump @angular-eslint/eslint-plugin from 17.2.1 to 17.5.3 (#1939) (6f19a6e)</li> <li>deps-dev: bump @angular-eslint/eslint-plugin-template from 16.0.2 to 16.3.1 (#1937) (dd4417c)</li> <li>deps-dev: bump @angular-eslint/template-parser from 16.0.2 to 16.3.1 (#1933) (8ef7604)</li> <li>deps-dev: bump @angular/cli from 16.1.4 to 16.2.16 (#1936) (51e4617)</li> <li>deps-dev: bump @nx/js from 16.5.3 to 16.10.0 (#1927) (d52786c)</li> <li>deps-dev: bump @nx/workspace from 16.5.3 to 16.10.0 (#1934) (b0900ec)</li> <li>deps-dev: bump @openapitools/openapi-generator-cli from 2.13.13 to 2.15.3 (#1957) (7c04fd7)</li> <li>deps-dev: bump @types/jasmine from 4.3.6 to 4.6.4 (#1943) (9600970)</li> <li>deps-dev: bump @types/jest from 29.5.13 to 29.5.14 (#1938) (300d75a)</li> <li>deps-dev: bump @types/node from 20.16.10 to 20.17.8 (#1924) (414c492)</li> <li>deps-dev: bump @types/node from 20.17.8 to 20.17.9 (#1955) (f6cf8d6)</li> <li>deps-dev: bump jest-preset-angular from 13.1.1 to 13.1.6 (#1949) (c2b4459)</li> <li>deps-dev: bump ng-mocks from 14.11.0 to 14.13.1 (#1920) (d3369da)</li> <li>deps-dev: bump ng-packagr from 16.1.0 to 16.2.3 (#1946) (49c851a)</li> <li>deps-dev: bump postcss from 8.4.47 to 8.4.49 (#1944) (23cc6f0)</li> <li>deps-dev: bump postcss-preset-env from 8.3.3 to 8.5.1 (#1921) (37f3565)</li> <li>deps-dev: bump prettier from 3.3.3 to 3.4.1 (#1932) (e0b462e)</li> <li>deps-dev: bump prettier from 3.4.1 to 3.4.2 (#1966) (df878be)</li> <li>deps-dev: bump ts-jest from 29.1.0 to 29.2.5 (#1918) (401d2d8)</li> <li>deps: bump @grafana/faro-web-sdk from 1.10.2 to 1.12.2 (#1945) (c9bc08b)</li> <li>deps: bump @grafana/faro-web-tracing from 1.10.2 to 1.12.2 (#1947) (8ad589e)</li> <li>deps: bump @nx/angular from 16.5.3 to 16.10.0 (#1941) (09c7019)</li> <li>deps: bump @nx/nx-darwin-arm64 from 16.5.3 to 16.10.0 (#1940) (b09e8c9)</li> <li>deps: bump @nx/nx-darwin-x64 from 16.5.3 to 16.10.0 (#1935) (ac7060a)</li> <li>deps: bump @nx/nx-win32-x64-msvc from 16.5.3 to 16.10.0 (#1926) (e1ce838)</li> <li>deps: bump @sentry/angular-ivy from 7.119.1 to 7.120.0 (#1948) (3985c4a)</li> <li>deps: bump @sentry/cli from 2.36.6 to 2.39.1 (#1931) (b0b8e6b)</li> <li>deps: bump core-js from 3.38.1 to 3.39.0 (#1919) (a6bcc8f)</li> <li>move styles to elements, remove usage of ngdeep (DEV-4378) (#1907) (6150bbd)</li> <li>regroup resource editor nx libs (#1916) (243da18)</li> <li>update eslint to v18.4.2 (#1950) (a1bddb0)</li> <li>update nx to v18.2.0 and angular to v17.3.0 (DEV-4406) (#1952) (1718fb0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11222-2024-11-25","title":"11.22.2 (2024-11-25)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenances_52","title":"Maintenances","text":"<ul> <li>dependabot: temporarily change updates interval and remove grouping (#1906) (748672b)</li> <li>deps-dev: bump @nx/linter from 16.5.3 to 16.10.0 (#1910) (9f010e6)</li> <li>deps: bump @nx/nx-linux-x64-gnu from 16.5.3 to 16.10.0 (#1913) (63a48ff)</li> <li>deps: bump cookie, engine.io and express (#1867) (3ce4f35)</li> <li>deps: bump cross-spawn from 7.0.3 to 7.0.6 (#1895) (9dc43ce)</li> <li>deps: bump http-proxy-middleware from 2.0.6 to 2.0.7 (#1870) (53a0faf)</li> <li>deps: bump openseadragon from 4.1.0 to 4.1.1 (#1911) (3e89b69)</li> <li>deps: bump pdfjs-dist and ng2-pdf-viewer (#1877) (2c2192d)</li> <li>deps: bump tslib from 2.7.0 to 2.8.1 (#1909) (613e750)</li> <li>deps: bump uuid from 9.0.0 to 9.0.1 (#1912) (d0dcc93)</li> <li>install updated deps (52e40c0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_11","title":"Tests","text":"<ul> <li>e2e: disable failing admin project resource tests (DEV-2380) (#1900) (75554ff)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11221-2024-11-19","title":"11.22.1 (2024-11-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_56","title":"Bug Fixes","text":"<ul> <li>detect changes after initial load (#1897) (963c070)</li> <li>image download (DEV-4321) (DEV-4318) (#1885) (4752285)</li> <li>open as side dialog (DEV-4226) (#1889) (6778ced)</li> <li>osd navigator 401 issue (DEV-4317) (#1886) (380a494)</li> <li>react on input changes (DEV-4370) (#1896) (6a0bac8)</li> <li>remove button width (#1881) (1c84022)</li> <li>updating multiple cardinalities in a row (DEV-4213) (#1859) (2e5a1e8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_53","title":"Maintenances","text":"<ul> <li>add cypress dependencies to project package.json (#1893) (3baff81)</li> <li>ngxs comments, removed current page state (#1888) (e6f58c7)</li> <li>resource editor (DEV-4339) (#1890) (39d176c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_12","title":"Tests","text":"<ul> <li>Added resource basic member tests, updated project admin tests (\u2026 (#1880) (4d6a3b0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11220-2024-11-06","title":"11.22.0 (2024-11-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_30","title":"Enhancements","text":"<ul> <li>Allow JSON files as text files (DEV-4222) (#1854) (b6f698f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_57","title":"Bug Fixes","text":"<ul> <li>collect classes of all ontologies using a property (DEV-4240) (#1860) (1bd0145)</li> <li>display class name (DEV-4214) (#1864) (042a18a)</li> <li>display form only for admins (DEV-4185) (#1863) (c2d04c6)</li> <li>open as side dialog (DEV-4226) (#1861) (bef3342)</li> <li>toolbar icons paddings are smaller (#1878) (883f6eb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_54","title":"Maintenances","text":"<ul> <li>bump js lib version (4269) (#1862) (c23d39c)</li> <li>property info component (DEV-4240) (#1869) (830504f)</li> <li>regions service (#1875) (a2afd80)</li> <li>resource editor and still image (#1872) (6346a08)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_13","title":"Tests","text":"<ul> <li>remove unreliable parts (DEV-4272) (#1866) (dfaf236)</li> <li>View an existing resource e2e tests (DEV-2380) (#1845) (a232efc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11210-2024-10-07","title":"11.21.0 (2024-10-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_31","title":"Enhancements","text":"<ul> <li>accept encoded segments for region, size and rotation (DEV-4140) (#1835) (0f25d13)</li> <li>implement download original functionality (DEV-4102) (#1803) (807fd70)</li> <li>order resource list by label (DEV-4164) (#1821) (f79eca8)</li> <li>prohibit use of internal images (DEV-4092) (#1774) (0202485)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_58","title":"Bug Fixes","text":"<ul> <li>initialise with empty function, call onChange also if invalid (#1848) (041d1d2)</li> <li>sets property form default language  (DEV-4182) (#1837) (bd8f5f0)</li> <li>shows 403 status error when incoming resource representation cannot be loaded due to lack of permissions (DEV-4146) (#1832) (8275019)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenances_55","title":"Maintenances","text":"<ul> <li>add a isolated manage project membership dialog (#1840) (e33c99e)</li> <li>add a isolated replace file dialog (#1844) (08157cd)</li> <li>add an isolated \"edit password\" dialog (#1817) (de77096)</li> <li>add an isolated add a region dialog (#1838) (9c225ba)</li> <li>add an isolated link resource component (#1849) (d12133a)</li> <li>add Google space notifications (#1829) (38724bd)</li> <li>add test section to changelog (#1836) (f1fe6e0)</li> <li>deps-dev: bump postcss from 8.4.32 to 8.4.47 (#1798) (a6d968b)</li> <li>deps: bump @sentry/browser and @sentry/angular-ivy (#1846) (d95ef43)</li> <li>deps: bump axios and @openapitools/openapi-generator-cli (#1841) (a6425c3)</li> <li>deps: bump ejs from 3.1.9 to 3.1.10 (#1842) (02b20b6)</li> <li>deps: bump micromatch from 4.0.5 to 4.0.8 (#1780) (860ade6)</li> <li>deps: bump rollup from 3.29.4 to 3.29.5 (#1820) (8fd37a7)</li> <li>deps: bump serve-static and express (#1781) (6912139)</li> <li>deps: bump webpack and @angular-devkit/build-angular (#1815) (d371092)</li> <li>deps: install updated deps &amp; reduce security issues (#1843) (414bf4b)</li> <li>update Dependabot rules (#1806) (306aa45)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#tests_14","title":"Tests","text":"<ul> <li>a logged out user cannot add a resource (#1839) (460226a)</li> <li>a non authorized user cannot access the data model class (#1834) (d26786e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11204-2024-09-27","title":"11.20.4 (2024-09-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_59","title":"Bug Fixes","text":"<ul> <li>add support for uppercase file extensions (DEV-4148) (#1827) (0fe1b1b)</li> <li>compound resource is refreshed on change (#1831) (4d6ed80)</li> <li>renamed usages of app-date-value-handler to dasch-swiss-date-val\u2026 (#1830) (6d03420)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11203-2024-09-26","title":"11.20.3 (2024-09-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_60","title":"Bug Fixes","text":"<ul> <li>annotations are reset on resource change (#1825) (08bb85f)</li> <li>restored image format change (DEV-4143) (#1822) (4d2f37c)</li> <li>updates parent resource after replacing resource file (DEV-4172) (#1824) (da81631)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11202-2024-09-24","title":"11.20.2 (2024-09-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_61","title":"Bug Fixes","text":"<ul> <li>can replace a file in representations (DEV-4118) (#1804) (c5a1d85)</li> <li>deletes current resource data from the state when resource fetch\u2026 (#1818) (a2e64b1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11201-2024-09-23","title":"11.20.1 (2024-09-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_62","title":"Bug Fixes","text":"<ul> <li>advanced search order by not list properties only (DEV-4096) (#1800) (4b650cf)</li> <li>can create a property with a link to another class (#1810) (6baafd9)</li> <li>disables download button, if resource is not loaded (DEV-4020) (#1811) (e13a364)</li> <li>display condition of outgoing standoff links  (DEV-4032) (#1813) (68267d4)</li> <li>encode filename properly during the file upload (DEV-4099) (#1801) (7cc2c42)</li> <li>prevents from throwing viewer exceptions (DEV-4083) (#1809) (c920bd3)</li> <li>resets link value control if linked value is not saved using dia\u2026 (#1802) (780d9d4)</li> <li>type error in link property (#1799) (d351f44)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11200-2024-09-16","title":"11.20.0 (2024-09-16)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_32","title":"Enhancements","text":"<ul> <li>added feature flags configurations, allowEraseProjects variable (DEV-4011) (#1766) (eca4222)</li> <li>implement editing of third party iiif images (DEV-3967) (#1770) (b5ba0ba)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_63","title":"Bug Fixes","text":"<ul> <li>all input fields have an asterisk when required (#1768) (1603e6c)</li> <li>allows sysadmin to create link object from search (DEV-4054) (#1771) (04a3d39)</li> <li>cache reloaded only when ontology is available (DEV-4089) (#1793) (8baa413)</li> <li>clears dsp-js cache before loading the resource (DEV-4059) (#1775) (6abfd72)</li> <li>geoname displayName exception (DEV-4105) (#1797) (cd96451)</li> <li>gravSearch does not equal operator for list value (DEV-4097) (#1794) (92db185)</li> <li>returns false if user is logging out and permissions is unavaila\u2026 (#1796) (6148a61)</li> <li>revert \"fix: sentry typeerror: cannot read properties of undefined re\u2026 (#1795) (96b10bf)</li> <li>sentry typeerror: cannot read properties of undefined reading (#1778) (073ebf7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance","title":"Maintenance","text":"<ul> <li>deps-dev: bump cypress to 13.14.2 (fixes compatability with Firefox 130) (#1779) (84a5d01)</li> <li>Fix nginx configuration to provide the right value for the Permission-Policy header (#1791) (e679186)</li> <li>move logic from app to nx libs (#1764) (1c09e2f)</li> <li>Remove Feature-Policy header (#1792) (645e19a)</li> <li>show tooltip on parent div, position on the cursor (DEV-4051) (#1772) (56c04f4)</li> <li>Use k6chaijs for assertions (#1773) (292e3ee)</li> <li>use local nx runner (#1777) (454eac6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11190-2024-09-05","title":"11.19.0 (2024-09-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_33","title":"Enhancements","text":"<ul> <li>iiif validation: fetch retry without HEAD (DEV-4075) (#1762) (dc06c81)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_64","title":"Bug Fixes","text":"<ul> <li>add missing brackets (DEV-4069) (#1763) (9bd2df5)</li> <li>DEV-4069 (#1765) (7af6eb8)</li> <li>iiif url validation: add support for V1 (DEV-4074) (#1761) (050e289)</li> <li>reloads resources when language is changed (DEV-4059) (#1756) (d8b057f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_1","title":"Maintenance","text":"<ul> <li>ontology edit dialog (DEV-3966) (#1750) (f610a6c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11182-2024-09-02","title":"11.18.2 (2024-09-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_65","title":"Bug Fixes","text":"<ul> <li>display asterisks for marking a field as required (DEV-4053) (#1759) (756cb2a)</li> <li>pass projectUuid via input (DEV-4055) (#1757) (d84fed5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11181-2024-08-29","title":"11.18.1 (2024-08-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_66","title":"Bug Fixes","text":"<ul> <li>refresh still image after replacing file (#1754) (bf5d54d)</li> <li>segments are displayed correctly when the video is changed (#1751) (ec7da29)</li> <li>updates class list labels on language change (DEV-4052) (#1755) (f482a73)</li> <li>use correct property(DEV-4056) (#1753) (680eae8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11180-2024-08-27","title":"11.18.0 (2024-08-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_34","title":"Enhancements","text":"<ul> <li>add mathjax to html value properties (#1732) (2e60d13)</li> <li>add segments to video and audio players (#1693) (07d8e2b)</li> <li>implement third party iiif image (#1722) (bfb1ebe)</li> <li>transparent status bar (#1744) (da5e8bd)</li> <li>use rich text comments in segment / annotation  creation and link object (#1747) (02c1c85)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_67","title":"Bug Fixes","text":"<ul> <li>a comment on a created region is of type: rich text (#1746) (5948719)</li> <li>highlights resource value if url parameter provided (DEV-4033) (#1748) (3756453)</li> <li>ontology editor: new link properties do not have a constraint (DEV-4029) (#1743) (d8dcb2d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11171-2024-08-19","title":"11.17.1 (2024-08-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_2","title":"Maintenance","text":"<ul> <li>fix publishing to Docker Hub (#1740) (4eb3ab1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11170-2024-08-19","title":"11.17.0 (2024-08-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_35","title":"Enhancements","text":"<ul> <li>nullable switch toggle (DEV-3954) (#1727) (fe1fae3)</li> <li>update dsp-js to 10.1.0 from npm registry (#1736) (9c3b9a9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_68","title":"Bug Fixes","text":"<ul> <li>add resource component: display label, remove whole unnecessary logic and simplify (#1730) (a7b0cfb)</li> <li>allows to add list item without comments (DEV-4016) (#1739) (0c347b2)</li> <li>cardinality toggles: disable if not project or sys admin (#1734) (d0a0205)</li> <li>create new property type (DEV-4008) (#1735) (32314f3)</li> <li>Remove redundant brace from Content-Type (#1731) (b9f5797)</li> <li>update group membership: trigger update after each change (DEV-3857) (#1741) (05ee687)</li> <li>update user membership (DEV-3857) (#1733) (2e5efee)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_6","title":"Documentation","text":"<ul> <li>improve README (#1738) (24e92d4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11164-2024-08-07","title":"11.16.4 (2024-08-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_69","title":"Bug Fixes","text":"<ul> <li>reimplement cardinality change (#1688) (9c8d94c)</li> <li>updated localization service, translations, language switching (DEV-3961) (#1726) (19cdf99)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_3","title":"Maintenance","text":"<ul> <li>separate display logic from business logic (#1723) (a5227eb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11163-2024-07-31","title":"11.16.3 (2024-07-31)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_70","title":"Bug Fixes","text":"<ul> <li>added check for invalidValueItems before creating a resource (DE\u2026 (#1718) (d7d3880)</li> <li>added linked resource autocomplete loading progress bar (DEV-3938) (#1717) (d3b1ccb)</li> <li>create resource with edited properties only (DEV-3937) (#1715) (c9f2644)</li> <li>list property: introduce an empty option for new values (#1719) (24926a5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11162-2024-07-29","title":"11.16.2 (2024-07-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_71","title":"Bug Fixes","text":"<ul> <li>create user as system administrator (DEV-3934) (#1713) (26853e9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11161-2024-07-29","title":"11.16.1 (2024-07-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_72","title":"Bug Fixes","text":"<ul> <li>allows resource property types to be added and used properly (DE\u2026 (#1711) (a23eeab)</li> <li>create resource issue (DEV-3913) (#1705) (79cd6de)</li> <li>creating resource issue (DEV-3915)  (#1708) (963d5fa)</li> <li>displays all data model properties when new resource is created \u2026 (#1710) (e2d88e4)</li> <li>prevents from saving empty property values (DEV-3919) (#1709) (dd30cff)</li> <li>removed decimal property default value (DEV-3923) (#1712) (53f85ce)</li> <li>side dialog position (DEV-3914) (#1707) (14a7e14)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11160-2024-07-23","title":"11.16.0 (2024-07-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_36","title":"Enhancements","text":"<ul> <li>recursive incoming links loading (DEV-3792) (#1699) (58072ad)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_73","title":"Bug Fixes","text":"<ul> <li>added localization service (#1702) (b2d3df3)</li> <li>adding new property boolean value (DEV-3833) (#1700) (281212d)</li> <li>compound object page reset when loading a new resource  (#1698) (8680542)</li> <li>in seach, reload the selected resource after editing (#1703) (3e92399)</li> <li>projectRestrictedViewSettings selector (DEV-3888) (#1696) (6ca419c)</li> <li>resource property create dialog, resource info bar project data \u2026 (#1701) (199e585)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_4","title":"Maintenance","text":"<ul> <li>remove unused (#1684) (b4932aa)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11150-2024-07-12","title":"11.15.0 (2024-07-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_37","title":"Enhancements","text":"<ul> <li>resource image format settings (DEV-3834) (#1687) (2a4175d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_74","title":"Bug Fixes","text":"<ul> <li>does not preserve image format on resource change (DEV-3834) (#1692) (ff35be7)</li> <li>opening Salsah links  (DEV-3830) (#1689) (c54a249)</li> <li>remove link value that is marked as deleted (#1685) (8b74f0a)</li> <li>Url encode ingest upload url in order to support special characters in filenames (DEV-3865) (#1691) (b6c1f4c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_5","title":"Maintenance","text":"<ul> <li>test: Use docker compose in justfile instead of deprecated docker-compose (#1690) (0536a23)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11140-2024-07-08","title":"11.14.0 (2024-07-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_38","title":"Enhancements","text":"<ul> <li>Add k6 brower performance test (#1666) (6fb4787)</li> <li>erase project confirmation dialog + translations (DEV-3734) (#1679) (e4b7ef0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_75","title":"Bug Fixes","text":"<ul> <li>cardinality change: include other properties, set the new cardinality (#1678) (3ce729e)</li> <li>editing a stillimage properties keep the same page active (#1677) (acfa48e)</li> <li>erase project short code validation (DEV-3734) (#1683) (ce13e25)</li> <li>remove closed bracket in href link (#1682) (aebd0ed)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_6","title":"Maintenance","text":"<ul> <li>add user form: remove validation and error msgs (#1675) (ada9505)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11130-2024-07-01","title":"11.13.0 (2024-07-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_39","title":"Enhancements","text":"<ul> <li>erase project + translations (DEV-3734) (#1674) (a439b78)</li> <li>incoming links paging and pager component (DEV-3792) (#1668) (aabb7c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_76","title":"Bug Fixes","text":"<ul> <li>add comment label in properties comment fields (#1667) (9348ba8)</li> <li>change notification error message (#1661) (8a3eb23)</li> <li>loader displayed on top when editing property values (#1669) (3ac1dd0)</li> <li>prevents from scrolling exception (DEV-3774) (#1673) (ba4e4dd)</li> <li>project selectors (DEV-3793) (#1670) (9e69670)</li> <li>properties: prevent toolbar buttons to trigger unnecessary requests (#1664) (823ae59)</li> <li>resource permissions: check resource permissions for replacing files (#1662) (ed18c35)</li> <li>slide toggle flickering issue (DEV-3752) (#1659) (4910aea)</li> <li>tab do not change when a resource is reloaded (#1672) (f25f513)</li> <li>TypeError: Cannot read properties of undefined (reading 'waterma\u2026 (#1671) (66de497)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_7","title":"Maintenance","text":"<ul> <li>result list: make list items more responsive (DEV-3771) (#1663) (f98b3c1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_7","title":"Documentation","text":"<ul> <li>Update documentation (#1645) (81c6240)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11121-2024-06-19","title":"11.12.1 (2024-06-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_77","title":"Bug Fixes","text":"<ul> <li>no duplicates in compound, no isRegionOf property for annotation (#1657) (b85f6a4)</li> <li>resource link form (DEV-3767) (#1656) (43d1edb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11120-2024-06-18","title":"11.12.0 (2024-06-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_40","title":"Enhancements","text":"<ul> <li>displays slide toggle for boolean property (DEV-3752) (#1648) (f4d5765)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_78","title":"Bug Fixes","text":"<ul> <li>dialog: set height to make dialog scroll (#1653) (fb6a9d6)</li> <li>display all properties in compound resource (#1654) (36184bb)</li> <li>display ontology labels in prefffered language (DEV-3739) (#1651) (2dfd44d)</li> <li>load ontologies (DEV-3758) (#1652) (9d55966)</li> <li>property value gap adjustment (DEV-3718) (#1655) (22b8471)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_8","title":"Maintenance","text":"<ul> <li>move list and dialog into nx libraries (#1649) (ad0cfb6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11110-2024-06-13","title":"11.11.0 (2024-06-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_41","title":"Enhancements","text":"<ul> <li>add labels to every input (#1644) (6e463ae)</li> <li>link value autocomplete, property values css adjustments (DEV-3718) (#1647) (fcea70c)</li> <li>property values row colour (DEV-3732) (#1640) (bd0f6e4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_79","title":"Bug Fixes","text":"<ul> <li>better display interval properties (#1641) (45d5edb)</li> <li>search autocomplete adjustments (DEV-3718) (#1642) (9c5559a)</li> <li>some dialogs are displayed as drawers (#1638) (1cd713e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_9","title":"Maintenance","text":"<ul> <li>split video component with its features (#1643) (6f6d1f8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11103-2024-06-06","title":"11.10.3 (2024-06-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_80","title":"Bug Fixes","text":"<ul> <li>allows resource related project member or admin to edit its properties (DEV-3723) (#1636) (a04bb41)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11102-2024-06-06","title":"11.10.2 (2024-06-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_81","title":"Bug Fixes","text":"<ul> <li>resource switching (#1634) (173aaa0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11101-2024-06-05","title":"11.10.1 (2024-06-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_82","title":"Bug Fixes","text":"<ul> <li>highlighting image region after creating new one (#DEV-3700)  (#1632) (ec9807c)</li> <li>highlights selected image region (#DEV-3700) (#1630) (b0b8feb)</li> <li>on resource change, display first tab (#1629) (bd31f3e)</li> <li>property value add button permissions (#DEV-3723) (#1633) (4119a07)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#11100-2024-05-30","title":"11.10.0 (2024-05-30)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_42","title":"Enhancements","text":"<ul> <li>assigns new project to the current user automatically, if creat\u2026(DEV-3658) (#1600) (823531c)</li> <li>landing page (DEV-3502) (#1615) (c8017bc)</li> <li>skeleton loader on landing page (#DEV-3569) (#1568) (39eee91)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_83","title":"Bug Fixes","text":"<ul> <li>add incoming and standoff links (#1583) (5f10868)</li> <li>add loader to link value and erase dialog form (#1597) (882f5ac)</li> <li>add loaders on edit label resource and file upload  (#1619) (0416259)</li> <li>add paragraph support for text value (#1574) (24b5763)</li> <li>add regions on image after it is loaded (#1623) (ec48b27)</li> <li>annotation list refresh (#DEV-3631) (#1578) (d4ea5fb)</li> <li>annotation tab is only displayed on image or compound object (#1624) (5253bc1)</li> <li>annotations are displayed after opening an image resource (#1626) (f44d67c)</li> <li>annotations: load the correct resource for annotations (#1588) (0f46425)</li> <li>avoir input loop in resource tabs (#1611) (d85dcc4)</li> <li>better display projects in searchbar (#1625) (2c25d06)</li> <li>bug when updating property value (#1593) (ae309bd)</li> <li>change how text values are handled (html) (#1579) (d806de6)</li> <li>cli commands (#1596) (264ba37)</li> <li>comparison viewer changes on different resources inputs (#1621) (0032af7)</li> <li>comparison viewer works again (#1613) (bed5e85)</li> <li>dates are correctly displayed (#1598) (145d73f)</li> <li>disable name field in data model class (#1584) (16dc008)</li> <li>display label on compound objects (#1622) (223fdf8)</li> <li>end full text search menu items with three dots instead of cropping (DEV-3648) (#1592) (23b75f8)</li> <li>erasing resource: reintroduce necessary comment (#1581) (f65fd44)</li> <li>Fix setting 'status' undefined error (#1605) (f8fa04a)</li> <li>include a comment when creating a new value (#1580) (09dc783)</li> <li>incoming and standoff links are ordered alphabetically (#1594) (aa66e31)</li> <li>incoming resources without permissions also skips incoming resou\u2026 (#1606) (1075dd6)</li> <li>loading state: use correct loading state (#1569) (ce81f99)</li> <li>menu: display only when an action is possible (#1582) (8666fd6)</li> <li>only use pendo in production (#1577) (cc24204)</li> <li>permissions in property values (#1595) (f3b9789)</li> <li>project link (DEV-3666) (#1603) (c600c2c)</li> <li>project members list: force reload project membership (#1571) (5a05e82)</li> <li>project settings (#1627) (948fd33)</li> <li>property info edit permission (#DEV-3601), property form controls ux improvement (#DEV-3595) (#1575) (595a958)</li> <li>refresh incoming resource (DEV-3676) (#1609) (999fb33)</li> <li>reloads user projects after update (#DEV-3653) (#1591) (4ea6647)</li> <li>replace resource image (DEV-3679) (#1614) (dab4e85)</li> <li>resource action permissions (DEV-3654) (#1599) (51841cb)</li> <li>resource class form bug (#1610) (74e9ad6)</li> <li>resource component: use getter (#1576) (9a24be0)</li> <li>resource initialisation (DEV-3656) (#1590) (381d4f2)</li> <li>resource is not reloaded after label update (#DEV-3607) (#1589) (3a8799d)</li> <li>resource list update (DEV-3691) (#1616) (eb521c2)</li> <li>resource metadata are loaded (#1618) (58f87bd)</li> <li>standoff links are clickable (#1585) (2494a60)</li> <li>title label update (DEV-3664) (#1601) (f3dea4d)</li> <li>Various add/edit resource property value bugs (DEV-3667) (#1604) (c784da1)</li> <li>video resource TimeRange exception (DEV-3677) (#1612) (770ab9f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_10","title":"Maintenance","text":"<ul> <li>ontologies / properties editor (#1564) (ebd3245)</li> <li>remove unused code (#1586) (0b4b554)</li> <li>remove unused service value operation event (#1617) (65c94c3)</li> <li>separate compound and region views business logic (#1607) (5a0d891)</li> <li>tidy up resource.component (#1587) (7a2a274)</li> <li>Use dsp-ingest for file upload (DEV-2628) (#1602) (e8ab798)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1191-2024-05-03","title":"11.9.1 (2024-05-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_84","title":"Bug Fixes","text":"<ul> <li>alerts user when a resource cannnot be erased (#1560) (9ebc9cf)</li> <li>allows project admin to add members to the project (#DEV-3414) (#1558) (6a8850c)</li> <li>resource label (#DEV-3550) (#1565) (9186424)</li> <li>system component: don't dispatch loading state for users; faster loading, prevent reloads on tab change  (#1562) (26bb3f4)</li> <li>user form: set form to required (DEV-3527) (#1559) (6c5ead8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_11","title":"Maintenance","text":"<ul> <li>update dsp-js to v9.1.18 (#1567) (6ac8de6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1190-2024-04-19","title":"11.9.0 (2024-04-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_43","title":"Enhancements","text":"<ul> <li>use mat label in mat-form-field (#1545) (2dd7f7d)</li> <li>ux-improvements (DEV-) (#1542) (2f45316)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_85","title":"Bug Fixes","text":"<ul> <li>color picker style (DEV-3476) (#1551) (aca8800)</li> <li>data-model-class e2e (DEV-) (#1547) (9287674)</li> <li>filters out \"has image file\" property (DEV-3477) (#1548) (2cd4f60)</li> <li>project member resource edit permissions (#DEV-3479) (#1554) (c0909cd)</li> <li>removed mergeTableCells functionality from CKEditor (#DEV-3473) (#1552) (b503cfc)</li> <li>resource tooltip fit content (#DEV-3383) (#1553) (63d9f17)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_12","title":"Maintenance","text":"<ul> <li>Update dsp-js to v9.1.17 (#1555) (cefdda0)</li> <li>user-form: Refactor user form and make proper use of dialog (#1503) (4375f44)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1180-2024-04-05","title":"11.8.0 (2024-04-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_44","title":"Enhancements","text":"<ul> <li>IIIf image edit component (#1534) (bc4c95c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_13","title":"Maintenance","text":"<ul> <li>update dsp-js to v9.1.15 (#1541) (85ebd69)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1175-2024-03-27","title":"11.7.5 (2024-03-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_86","title":"Bug Fixes","text":"<ul> <li>initialize pendo on app start (#1535) (76e5356)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1174-2024-03-22","title":"11.7.4 (2024-03-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_87","title":"Bug Fixes","text":"<ul> <li>add user by project admin (DEV-3414) (#1519) (bc7160d)</li> <li>resource attached project retrieving (#DEV-3424) (#1525) (f603c00)</li> <li>resource item list value (DEV-3248) (#1517) (a415410)</li> <li>resource item properties update (DEV-3393) (#1512) (da48b72)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_14","title":"Maintenance","text":"<ul> <li>update dsp-js to v9.1.14 (#1530) (7c8d761)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1173-2024-03-12","title":"11.7.3 (2024-03-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_88","title":"Bug Fixes","text":"<ul> <li>image settings restriction note (#1518) (c486dcb)</li> <li>incoming resource gravsearch query comment field set as optional (DEV-3315) (#1509) (4695b8b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1172-2024-03-08","title":"11.7.2 (2024-03-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_89","title":"Bug Fixes","text":"<ul> <li>remove sentry sourcemap on deploy (#1513) (8a753f8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1171-2024-03-08","title":"11.7.1 (2024-03-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_15","title":"Maintenance","text":"<ul> <li>Update dsp js to v9.1.13 (#1510) (2a11675)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1170-2024-03-07","title":"11.7.0 (2024-03-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_45","title":"Enhancements","text":"<ul> <li>resource state management (DEV-3358) (#1496) (48b06bc)</li> <li>watermark with radios and inputs (DEV-3313) (#1502) (99096da)</li> <li>watermark with radios and inputs (DEV-3313) (#1506) (6397d37)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_90","title":"Bug Fixes","text":"<ul> <li>docs: fix dead links in docs (#1492) (4558e34)</li> <li>hotfix for list is undefined (sentry JA-1) (#1508) (79301da)</li> <li>image region  comment field  validation removed(DEV-3315) (#1487) (985bcd0)</li> <li>refresh image viewer after new item was added (DEV-3277) (#1491) (7706ce7)</li> <li>removed absolute image size restriction, added sample image (DEV-3304) (#1484) (00021a8)</li> <li>resource class item autocomplete refresh and loading (DEV-3371) (#1504) (c87de3c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_16","title":"Maintenance","text":"<ul> <li>add sentry error tracker (#1507) (bbcd255)</li> <li>cypress cloud only runs after release-please PR is merged (#1499) (9920587)</li> <li>forms using multi language inputs should be typed (#1494) (17333d0)</li> <li>remove unused code in ontology component (#1472) (bae7609)</li> <li>remove unused unit tests (#1497) (5499904)</li> <li>run e2e tests after release please actions on cypress cloud  (#1498) (5cc4577)</li> <li>type chip list input component (#1501) (1c75ca5)</li> <li>type common input (#1500) (860a430)</li> <li>type multi language controls (#1489) (42d5112)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_8","title":"Documentation","text":"<ul> <li>comply to dsp-docs markdown requirements (#1490) (4e99390)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1165-2024-02-27","title":"11.6.5 (2024-02-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_91","title":"Bug Fixes","text":"<ul> <li>submit button on upload resource does not load indefinitely  (#1485) (e1a51b5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1164-2024-02-23","title":"11.6.4 (2024-02-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_92","title":"Bug Fixes","text":"<ul> <li>new list node field error is not displayed (#1481) (1ef0823)</li> <li>ontology initialisation (DEV-3317) (#1483) (be6ec9a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1163-2024-02-23","title":"11.6.3 (2024-02-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_93","title":"Bug Fixes","text":"<ul> <li>highlits section by clicked region in image viewer (DEV-3277) (#1468) (50a5db5)</li> <li>initiates new search when user is logged in sucessfully (DEV-3293) (#1469) (70f7f25)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_17","title":"Maintenance","text":"<ul> <li>update dsp-js to v.9.1.12 (#1478) (a99cfeb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1162-2024-02-14","title":"11.6.2 (2024-02-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_94","title":"Bug Fixes","text":"<ul> <li>link to edit a project (#1465) (0acda9e)</li> <li>slider is accessible (#1467) (0cd8f3d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1161-2024-02-13","title":"11.6.1 (2024-02-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_95","title":"Bug Fixes","text":"<ul> <li>improve multi language input touched behavior, add validators (#1463) (c70e1cf)</li> <li>search result list item style (DEV-3280) (#1464) (a36fee0)</li> <li>temporary remove image settings tab (#1461) (6cbec6b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1160-2024-02-13","title":"11.6.0 (2024-02-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_46","title":"Enhancements","text":"<ul> <li>dsp-app: image settings updates and fixes (DEV-2995) (#1451) (f67d528)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_96","title":"Bug Fixes","text":"<ul> <li>add instrumentation to faro sdk (#1455) (758ad8e)</li> <li>dsp-das: image viewer padding, arrows style. Resource list name css adjustments (DEV-3276) (#1456) (332f8d5)</li> <li>image settings updates (DEV-2995) (#1458) (6cc1ada)</li> <li>loads all projects when membership dialog is opened (DEV-3268) (#1450) (3abb8fd)</li> <li>remove old \"edit project\" page url (#1452) (3500c22)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_18","title":"Maintenance","text":"<ul> <li>image settings (#1460) (238b979)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1151-2024-02-09","title":"11.5.1 (2024-02-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_19","title":"Maintenance","text":"<ul> <li>update dsp-js to v9.1.11 (#1447) (eb4dfa5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1150-2024-02-09","title":"11.5.0 (2024-02-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_47","title":"Enhancements","text":"<ul> <li>dsp-das: image settings (DEV-2995) (#1440) (3609b52)</li> <li>dsp-das: project menu items highlighting (DEV-3103) (#1444) (c78ddf7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_97","title":"Bug Fixes","text":"<ul> <li>list item delete (DEV-3267) (#1446) (affd20f)</li> <li>styling issue in project membership (#1443) (7825d3d)</li> <li>user can create a project if no active project exists (#1441) (3cc36d9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1141-2024-02-07","title":"11.4.1 (2024-02-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_98","title":"Bug Fixes","text":"<ul> <li>authentication with email works (#1438) (cbcdf30)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1140-2024-02-06","title":"11.4.0 (2024-02-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_48","title":"Enhancements","text":"<ul> <li>add openApi generated code (#1431) (0bffe04)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_99","title":"Bug Fixes","text":"<ul> <li>list node gets updated (#1437) (6b8aa08)</li> <li>login works with specific api errors  (#1433) (bb60878)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_20","title":"Maintenance","text":"<ul> <li>flex slider in parent element (#1429) (e0279fd)</li> <li>update eslint packages (#1430) (64658ce)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1134-2024-02-01","title":"11.3.4 (2024-02-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_100","title":"Bug Fixes","text":"<ul> <li>dsp-das: Enables rich text saving when creating new text value f\u2026  d48bf85 \u2026or property. (DEV-3247) (#1427) (f8739ba)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1133-2024-02-01","title":"11.3.3 (2024-02-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_101","title":"Bug Fixes","text":"<ul> <li>add cookie auth for iiif resources (#1425) (dfeec97)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1132-2024-02-01","title":"11.3.2 (2024-02-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_102","title":"Bug Fixes","text":"<ul> <li>string instead of enum for environment config (#1423) (fc92eaa)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1131-2024-01-31","title":"11.3.1 (2024-01-31)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_103","title":"Bug Fixes","text":"<ul> <li>display resource permission warning message (#1414) (5a8d739)</li> <li>dsp-app: resource link permissions (DEV-3252) (#1419) (72132f0)</li> <li>dsp-das: Enables rich text saving when creating new text value f\u2026 (#1417) (f3c9204)</li> <li>no bearer auth on iiif images (#1410) (a5a00e9)</li> <li>no faro in dev (#1412) (22ce0eb)</li> <li>test pass instrumentation validation (#1421) (36fd44a)</li> <li>testing passes (#1422) (66fd88e)</li> <li>various errors (#1416) (534e96b)</li> <li>various fixes (#1418) (c2db7bf)</li> <li>various fixes (#1420) (d88aa17)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_21","title":"Maintenance","text":"<ul> <li>boolean-value: assign class to get the same height as other forms (#1415) (7768c2d)</li> <li>remove datadog (#1413) (bda4786)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1130-2024-01-30","title":"11.3.0 (2024-01-30)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_49","title":"Enhancements","text":"<ul> <li>add Grafana faro (#1407) (67534ab)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_104","title":"Bug Fixes","text":"<ul> <li>Add empty bearer token by default for JS LIB (#1406) (f424623)</li> <li>add faro instrumentaton (#1409) (25701c6)</li> <li>auth guard waits for autologin to happen (#1399) (20eb7cf)</li> <li>autologin logs in with iri from jwt (#1397) (d8314ea)</li> <li>display error on error handler (#1401) (d0d0ac4)</li> <li>dsp-app: fixes no search results section (DEV-3240) (#1398) (60def06)</li> <li>dsp-app: Moved reusable form validators to single place. (#DEV-3222) (#1381) (1d0f53b)</li> <li>dsp-app: performs gravsearch count from advanced search (#1404) (07a9686)</li> <li>error handler display errors (#1403) (e7f0ddd)</li> <li>language input bug for list item (#1405) (79f6bd8)</li> <li>list item language can be changed (#1402) (98d56bd)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_22","title":"Maintenance","text":"<ul> <li>authentication flow improved, watch localStorage for changes (#1393) (edf4dfa)</li> <li>new AppErrorHandler (#1396) (b679646)</li> <li>remove ngxs storage plugin package (#1395) (7e44b14)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1120-2024-01-26","title":"11.2.0 (2024-01-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_50","title":"Enhancements","text":"<ul> <li>create api routes for /admin (#1318) (da5f289)</li> <li>dsp-app: introduced ontology class item count from state (#1358) (f8984e4)</li> <li>project form: creating a new project with an existing short code (DEV-3204) (#1368) (d231c51)</li> <li>projects: caches projects loading, removed readProjects from state model. #DEV-2913 (#1341) (7ebd126)</li> <li>update @dasch-swiss/jdnconvertiblecalendar and @dasch-swiss/jdnconvertiblecalendardateadapter (#1362) (cf1cd76)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_105","title":"Bug Fixes","text":"<ul> <li>add icon to common input (#1333) (7d58e69)</li> <li>add min and max length to keywords validators (#1379) (2c4852b)</li> <li>add tooltip on non accessible list (#1345) (a96f40b)</li> <li>adding new value for optional resource #DEV-3031 (#1360) (420a564)</li> <li>advanced search number of results bug (#1388) (2ad2be0)</li> <li>api url loaded from environment (#1332) (568f078)</li> <li>audio slider moves on time change (#1376) (0abdfc6)</li> <li>cancel button in project form goes back to previous page (#1385) (604b2f0)</li> <li>class instance adding and preview.  (#1317) (3c1e684)</li> <li>close dialog after update (#1352) (41d3bb0)</li> <li>delete failing e2e test (3dbca58)</li> <li>dsp-app: handles project edit errors (#DEV-3205) (#1369) (27f58b3)</li> <li>dsp-app: manage user membership (#DEV-3218) (#1373) (1c0ba4a)</li> <li>dsp-app: new projects have 20 characters shortcode (#1279) (cd3be0d)</li> <li>dsp-app: ontology loading, ontology clases refresh, reloads proj\u2026 (#1346) (9e4fcd3)</li> <li>dsp-app: reloads resource list when resource is changed, separates projects and membership loading.. (#1343) (b4bd34b)</li> <li>dsp-app: Resolves DEV-2687 (#1336) (d6211f9)</li> <li>dsp-app: resource class form validation (#DEV-3132) (#1370) (94e7a48)</li> <li>dsp-app: resource link form (#DEV-3203) (#1377) (a0f9afb)</li> <li>fixed loading coumpound resources #DEV-3096 (#1326) (490513e)</li> <li>flickering button (#1371) (ec0a850)</li> <li>geoname property lookup (#1334) (a491062)</li> <li>keywords chip inputs cannot be duplicated (#1382) (ac5298a)</li> <li>links to incunabula project (#1311) (31a6458)</li> <li>list item comment get updated (#1386) (1bb85a7)</li> <li>list-view: correct display logic (#1378) (b68f8db)</li> <li>loaders, refactored project component getters (#1361) (f87c96b)</li> <li>merge conflict (#1308) (818dcd6)</li> <li>more readable error message (#1383) (c426d92)</li> <li>multi language forms first selection bug (#1344) (47a161c)</li> <li>multi-language form default language (#1353) (e5fb2fe)</li> <li>no retry in edit user form (#1367) (1f03e7d)</li> <li>ontology resource create and display (#1322) (adfc304)</li> <li>Project initialisation from url (#1306) (6d8e1a3)</li> <li>Project Member cannot add instances of resources #DEV-3121 (#1327) (e0f57fe)</li> <li>projects list: deactivating-a-project-not-possible (DEV-3206) (#1366) (ad76437)</li> <li>property value refresh #DEV-3106 (#1329) (f41b375)</li> <li>redirection to home issue when session is not valid (#1359) (45e0625)</li> <li>remove unused validator on project form (#1339) (0b9ad0c)</li> <li>removeFromProjectMembership API http method, project membership \u2026 (#1330) (c1ab00c)</li> <li>send gravsearch and search-count request simultaniously (#1380) (89b91ec)</li> <li>shortcode issue gravsearch (#1315) (814fb98)</li> <li>shortcode issue in gravsearch (#1314) (1b69de4)</li> <li>still image: User without permission can draw a region (#1372) (7da5827)</li> <li>various bugs (#1312) (9f55ce1)</li> <li>various bugs (#1313) (1d90cf7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#dev-3111-dev-3108-dev-3118-project-initialisation-from-url-1316-4e5c19a","title":"DEV-3111, #DEV-3108, #DEV-3118 project initialisation from url (#1316) (4e5c19a)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_23","title":"Maintenance","text":"<ul> <li>add confirm dialog service (#1335) (3bc2b6c)</li> <li>add prettier basic configuration (#1309) (99276a6)</li> <li>add prettier general style (#1310) (8567eda)</li> <li>add recommended linting rules again (#1323) (2fb7c3f)</li> <li>add rule nx enforce-module-boundaries (#1325) (1b1fd77)</li> <li>confirm dialog, multi language input, project-form, resource-form, list-info-form (#1328) (4c520cd)</li> <li>dsp-api: created api-entity-helper (#1337) (3befc8e)</li> <li>linter: use standard angular linter (#1276) (e7251d1)</li> <li>make list forms files clearer (#1338) (c5ac901)</li> <li>reinforce linter (#1320) (5e60532)</li> <li>remove dateAdapter app (#1324) (28e8ee4)</li> <li>remove unused external-link-directive (#1340) (bf9aecc)</li> <li>run prettier linter on apps and libs folders (#1319) (786753d)</li> <li>set max line length to 120 characters (#1321) (fa379d0)</li> <li>Update dsp-js to v9.1.10 (#1389) (f1489d6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1117-2023-12-08","title":"11.1.7 (2023-12-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_106","title":"Bug Fixes","text":"<ul> <li>add GH packages access for docker publish (#1304) (bef179d)</li> <li>removing/adding users from/to project, project activation/deactivation. (#1302) (a084369)</li> <li>resource loading issue (#1303) (c9dc099)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_24","title":"Maintenance","text":"<ul> <li>Update dsp-js to v9.1.9 (#1305) (494d026)</li> <li>use github packages in dsp-pp (#1291) (6ceb41a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1116-2023-12-05","title":"11.1.6 (2023-12-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_107","title":"Bug Fixes","text":"<ul> <li>dsp-app: prevent x overflow in dialog (#1283) (ed43e09)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_25","title":"Maintenance","text":"<ul> <li>created isFalsy pipe to handle no-negated-async linting rule (#1299) (41f6f7f)</li> <li>session-service: add reactivity (#1165) (d518fa8)</li> <li>update package-lock (#1297) (b62b072)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1115-2023-11-23","title":"11.1.5 (2023-11-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_108","title":"Bug Fixes","text":"<ul> <li>app/properties: remove number of incoming links in pagination (DEV-2474) (#1270) (021cf29)</li> <li>dsp-app: loading variable (#1271) (7bef1a9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1114-2023-11-23","title":"11.1.4 (2023-11-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_26","title":"Maintenance","text":"<ul> <li>update dsp-js to v9.0.3 (#1273) (24f3611)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1113-2023-11-16","title":"11.1.3 (2023-11-16)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_109","title":"Bug Fixes","text":"<ul> <li>date-picker: date-picker doesn't show in advanced search (#1267) (3d2778f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1112-2023-11-15","title":"11.1.2 (2023-11-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_110","title":"Bug Fixes","text":"<ul> <li>advanced-search: undefined error leads to blank page (#1264) (a176ce0)</li> <li>results: go back to search form button fix (#1266) (b2b18fe)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1111-2023-11-14","title":"11.1.1 (2023-11-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_111","title":"Bug Fixes","text":"<ul> <li>activate/deactivate project: subscribe to the observable (#1261) (92431d4)</li> <li>results: user unable to execute second fulltext search (#1262) (baba2f4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1110-2023-11-10","title":"11.1.0 (2023-11-10)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_51","title":"Enhancements","text":"<ul> <li>advanced-search: allow ordering by URI value (#1248) (e5cfebe)</li> <li>expert search: implement default gravsearch as placeholder (#1247) (5132f4d)</li> <li>list-value: make list menu resemble a dropdrown (#1256) (f7a7a8c)</li> <li>project description: order project descriptions by language (#1250) (f2c5dc9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_112","title":"Bug Fixes","text":"<ul> <li>app/help: fix links to releases (#1253) (e2ddcdd)</li> <li>app/resource: removed developer feature that created annotation bug (#1254) (7b908b0)</li> <li>type errors: fix type errors (#1255) (389eccb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_27","title":"Maintenance","text":"<ul> <li>date picker: implement date picker as standalone component (#1251) (e89dba8)</li> <li>ontology-class-item: change how long labels are handled (#1257) (f6d42dc)</li> <li>update dsp-js to v9.0.2 (#1258) (cb86ebf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1100-2023-10-27","title":"11.0.0 (2023-10-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_1","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>deps: bump js-lib to 9.0.0 (#1241)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_52","title":"Enhancements","text":"<ul> <li>advanced-search: make list menu resemble a dropdown (#1243) (96eab7f)</li> <li>restore previous advanced search that user executed (#1226) (8c5eec9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_113","title":"Bug Fixes","text":"<ul> <li>advanced search link: Add route constant (#1238) (db3e22a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_28","title":"Maintenance","text":"<ul> <li>cleanup routes and unused components (#1239) (2ce9065)</li> <li>deps: bump js-lib to 9.0.0 (#1241) (94b7f26)</li> <li>deps: bump js-lib to 9.0.1 (#1244) (4fc6a40)</li> <li>routing: apply route constants (#1227) (0b0dff5)</li> <li>routing: cleanup unused routes (#1240) (caa1819)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10242-2023-10-20","title":"10.24.2 (2023-10-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_114","title":"Bug Fixes","text":"<ul> <li>date-picker: fix YYYY-MM-dd formatting (#1235) (f641ccb)</li> <li>gravsearch-service: incorrect gravsearch generated when searching for a linked property (#1232) (200bbc0)</li> <li>project: host listener triggers when user types in an input or textarea (#1233) (9f2a790)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_29","title":"Maintenance","text":"<ul> <li>Reconfigure all \"zio\" endpoints to use the original address (#1222) (eaaefc9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10241-2023-10-17","title":"10.24.1 (2023-10-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_115","title":"Bug Fixes","text":"<ul> <li>advanced-search: generate correct gravsearch for linked resources with property values (#1229) (2caa0a2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_30","title":"Maintenance","text":"<ul> <li>string literal component: move app string literal component into shared lib (#1209) (3f2a562)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10240-2023-10-13","title":"10.24.0 (2023-10-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_53","title":"Enhancements","text":"<ul> <li>advanced-search: advanced search library (#1131) (7e0a550)</li> <li>dev-2557-update-the-documentation-1 (#1221) (e1c741d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_31","title":"Maintenance","text":"<ul> <li>update dsp-js to v8.3.6 (#1224) (543c0d8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10237-2023-10-04","title":"10.23.7 (2023-10-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_116","title":"Bug Fixes","text":"<ul> <li>resource: resources do not load from url (#1214) (689acbe)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10236-2023-10-03","title":"10.23.6 (2023-10-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_117","title":"Bug Fixes","text":"<ul> <li>ontology form: remove the input decorator (#1212) (64100e7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10235-2023-09-29","title":"10.23.5 (2023-09-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_118","title":"Bug Fixes","text":"<ul> <li>app: sort incoming links for more than 25 (#1203) (7a17d7c)</li> <li>link to controlled vocabulary: Link to correct route (#1207) (51bae4b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_32","title":"Maintenance","text":"<ul> <li>app-global, app-routing-module: Replaces string literals with constants (#1210) (a70388c)</li> <li>deps: bump js-lib version to 8.3.5 (#1211) (a6682e9)</li> <li>progress indicator: move app progress indicator into shared lib (#1204) (95d843d)</li> <li>project edit dialog: remove dialog and replace in component (#1202) (7a42167)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10234-2023-09-15","title":"10.23.4 (2023-09-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_33","title":"Maintenance","text":"<ul> <li>CI: add PR title check (#1205) (3acf5be)</li> <li>deps-dev: bump @types/node from 18.15.9 to 20.5.9 (#1200) (81c666e)</li> <li>update dsp-js to v8.3.4 (#1206) (2ce2fe1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10233-2023-09-01","title":"10.23.3 (2023-09-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_119","title":"Bug Fixes","text":"<ul> <li>sorting: sorts incoming links by res class then res label (#1197) (85f1af6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_34","title":"Maintenance","text":"<ul> <li>update dsp-js-lib to v8.3.3 (#1199) (a0717c2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10232-2023-08-18","title":"10.23.2 (2023-08-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_120","title":"Bug Fixes","text":"<ul> <li>regions: reload the resource after deletion of regions (#1185) (c5a14e6)</li> <li>runtime errors: fix errors thrown (#1178) (55f56cd)</li> <li>session service: destroy session and return of false if an error\u2026 (#1183) (3ead94d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_35","title":"Maintenance","text":"<ul> <li>deps: bump js-lib to 8.3.2 (#1187) (d5ba644)</li> <li>msg text: Change notification message text for 404 not found (#1184) (20d5d0b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_9","title":"Documentation","text":"<ul> <li>fix expert search docs (#1180) (2b786a6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10231-2023-08-04","title":"10.23.1 (2023-08-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_36","title":"Maintenance","text":"<ul> <li>move date-picker out into a library (#1172) (ab847bd)</li> <li>update js-lib to v8.3.1 (#1175) (63c9105)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10230-2023-07-26","title":"10.23.0 (2023-07-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_54","title":"Enhancements","text":"<ul> <li>remove property menu: add skeleton to mat menu until content loaded (#1148) (659f0f4)</li> <li>upload image: add snackbar message if upload to sipi temp failed (#1166) (6df61e9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_121","title":"Bug Fixes","text":"<ul> <li>action bubble position: reposition the action bubble (#1147) (cc5b66c)</li> <li>add-value: paragraph not showing as textarea (#1155) (83a0854)</li> <li>app/ontology: stop ontology service from spamming errors (#1144) (fecf296)</li> <li>delete value button: evaluate users permissions to enable/disable delete button (#1138) (6736942)</li> <li>geonames search results: filter out properties instead of error (#1164) (7c478d6)</li> <li>ontology: Ontology cache is not updated when adding property to resource class (#1156) (162b52e)</li> <li>pdf viewer: menubar is broken (#1160) (22e99e5)</li> <li>project list items: users project list items display elements correctly (#1141) (f7eca25)</li> <li>resource-list: remove erroneous text before each label (#1154) (2177437)</li> <li>runtime errors: fix forms error, ExpressionChangedAfterItHasBeenChecked and properties of undefined (#1168) (3f6a253)</li> <li>text values: open all non internal links in a new tab (#1167) (ea6ccff)</li> <li>type error: check existence of internal context (#1136) (c32f8b8)</li> <li>type error: check existence of ReadOntology instances (#1140) (c8d8024)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_37","title":"Maintenance","text":"<ul> <li>add pendo analytics (#1157) (15f7a33)</li> <li>deps: bump semver from 5.7.1 to 5.7.2 (#1143) (46351b0)</li> <li>deps: bump word-wrap from 1.2.3 to 1.2.5 (#1158) (884d6c3)</li> <li>empty comment: Keep empty comments placeholder unstyled (#1169) (a96215c)</li> <li>error logging: do not throw error on failed login attempt (#1142) (e548344)</li> <li>mdc-migration: migrate material formfield, input, select, autocomplete (#1122) (41dd432)</li> <li>representation components: set the text color of the menu items (#1162) (b1f510e)</li> <li>resource list: prevent shift/overlap of checkboxes (#1149) (e2d1582)</li> <li>test console output: Mock components to avoid spamming (#1152) (fd3ff9e)</li> <li>upgrade angular to 16 (#1153) (08c17fa)</li> <li>user membership: Clip long project names with overflow ellipsis (#1150) (f219e84)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10220-2023-07-07","title":"10.22.0 (2023-07-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_122","title":"Bug Fixes","text":"<ul> <li>app: navigate to home after logout (#1125) (bfdd7ce)</li> <li>image navigation: remove flickering, remove in between load images (#1127) (d7b0922)</li> <li>password-form: add better error handling (#1128) (e131a39)</li> <li>visibility of menu entries: Utilise proper editing permissions for enabling/disabling editing menu items (#1129) (a59e85e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_55","title":"Enhancements","text":"<ul> <li>app/migration: migrate snackbar (#1116) (76f495b)</li> <li>error-handler: move error-handler and all its dependencies into library (#1126) (e720bb2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_38","title":"Maintenance","text":"<ul> <li>angular mdc migration slider (#1119) (27c7d86)</li> <li>app-state-service: move Application State Service to a library (#1120) (fe5718f)</li> <li>deps: bump socket.io-parser from 4.2.2 to 4.2.4 (#1078) (3fb0647)</li> <li>mat-menu: apply black background to representation menu (#1118) (f367394)</li> <li>update js-lib to v8.2.7 (#1133) (52340c4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10210-2023-06-23","title":"10.21.0 (2023-06-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_123","title":"Bug Fixes","text":"<ul> <li>freeze: Remove/replace freezing request (#1110) (6a9e259)</li> <li>freezing: app freeze if sipi does not respond (DEV-1562) (#1099) (aaaa887)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_56","title":"Enhancements","text":"<ul> <li>add skeleton loading to onto class items (#1107) (e3d7a79)</li> <li>dsp-app: fixed wrong error-messages in update forms (#1106) (c9e5d3f)</li> <li>video component: enhance video component (#1108) (0236a5e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_39","title":"Maintenance","text":"<ul> <li>allow access to app locally on host 0.0.0.0 (#1111) (e193e78)</li> <li>angular mdc migration list (#1109) (9a59633)</li> <li>angular mdc migration menu (#1082) (e6097bd)</li> <li>angular mdc migration paginator (#1097) (f873d24)</li> <li>angular mdc migration progress bar (#1098) (5465070)</li> <li>angular mdc migration slide toggle (#1089) (a06d06f)</li> <li>angular mdc migration tabs (#1094) (237291d)</li> <li>app: delete unused MatProgressSpinnerModule (#1084) (09d3256)</li> <li>deps: bump JS-LIB to 8.2.6 (#1112) (2082da1)</li> <li>move session service to a lib (#1101) (152ca06)</li> <li>refactor cache service (#1073) (1e8f67d)</li> <li>remove unused components (#1100) (6d9f1c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10203-2023-06-09","title":"10.20.3 (2023-06-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_40","title":"Maintenance","text":"<ul> <li>improve logging (#1093) (7fb9dc2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10202-2023-06-09","title":"10.20.2 (2023-06-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_124","title":"Bug Fixes","text":"<ul> <li>app-config: add type safety checks (#1072) (a4d451c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_41","title":"Maintenance","text":"<ul> <li>angular mdc migration tooltip (#1085) (65159ae)</li> <li>app-config: improve type-safety of parsed configuration (#1074) (01662fd)</li> <li>app-config: move out into a library (#1068) (62d68d1)</li> <li>app-logs: add datadog application logging (#1080) (e5046d4)</li> <li>app: delete unused MatTable module (#1083) (0df731f)</li> <li>app: delete unused module (#1077) (70d8bdc)</li> <li>CI: fix configuration (fca6722)</li> <li>CI: fix configuration (1dfaf6c)</li> <li>fix ci (#1087) (626be72)</li> <li>improve logging (895e3fa)</li> <li>improve logging (3e2d884)</li> <li>improve logging (#1081) (da08b54)</li> <li>improve logging (#1086) (d6b9ad0)</li> <li>improve logging (#1088) (27111c2)</li> <li>update dsp-js to v8.3.5 (#1090) (cc1ed2b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10201-2023-05-31","title":"10.20.1 (2023-05-31)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_42","title":"Maintenance","text":"<ul> <li>bump NX version (#1064) (d321060)</li> <li>deploy: rename admin to app (INFRA-285) (#1063) (bb4dc48)</li> <li>deps: bump JS-LIB to 8.2.4 (#1069) (dcb9683)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10200-2023-05-23","title":"10.20.0 (2023-05-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_125","title":"Bug Fixes","text":"<ul> <li>add-user: resize and center cancel button (DEV-2073) (#1050) (7ef68f0)</li> <li>app: button activated for date search (#1051) (42fe1d1)</li> <li>app: Full text search shows next 25 results (#1047) (b3f60c6)</li> <li>boolean property comment: Comment field is always enabled (#1053) (e3ab3e1)</li> <li>resource-list: set a fix width within mat-list-item (#1057) (b6b3672)</li> <li>standoff html links: every mouse button opens the resource (DEV-2092) (#1042) (2f63340)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_57","title":"Enhancements","text":"<ul> <li>boolean icon: change checkbox into toggle in read mode (DEV-2178) (#1052) (55b276b)</li> <li>boolean properties: change checkboxes into toggles (#1049) (80c0305)</li> <li>boolean values: implement removal of boolean values (#1034) (da423be)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_43","title":"Maintenance","text":"<ul> <li>angular mdc migration - dialog (#1004) (5e0204f)</li> <li>deps-dev: bump @nrwl/eslint-plugin-nx from 15.8.9 to 16.2.1 (#1055) (5c6d2d5)</li> <li>deps-dev: bump @nrwl/nx-cloud from 15.3.2 to 16.0.5 (#1030) (162a1bb)</li> <li>deps-dev: bump @types/jasmine from 3.8.2 to 4.3.1 (#1006) (9ea23e5)</li> <li>deps-dev: bump postcss-preset-env from 7.5.0 to 8.3.2 (#1010) (97fefa7)</li> <li>deps: bump engine.io from 6.4.1 to 6.4.2 (#1035) (72fb3ce)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10192-2023-05-15","title":"10.19.2 (2023-05-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_126","title":"Bug Fixes","text":"<ul> <li>app/resource: show region on first load (#1040) (a7e1975)</li> <li>app: top-level-domain with 63 chars (#1045) (19dc886)</li> <li>date-picker: don't display error message without input (#1038) (0be2229)</li> <li>pdf-viewer: pdf viewer not sending cookie (dev-2136) (#1039) (f51479b)</li> <li>pdf-viewer: pdf viewer not sending cookie (dev-2136) (#1039) (5f884f4)</li> <li>pdf-viewer: pdf viewer not sending cookie (Dev-2136) (#1039) (c990c4f)</li> <li>pdf-viewer: pdf viewer not sending cookie (Dev-2136) (#1039) (6e3453d)</li> <li>resource viewer: images flickering or not loading (#1033) (6fdb14b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_44","title":"Maintenance","text":"<ul> <li>app/footer: update link and center content (#1041) (1f4c16e)</li> <li>eliminate eslint unused vars (#1037) (0076d1d)</li> <li>overview and project tile refactor (#1031) (1fabbd0)</li> <li>unused lifecycle hooks: remove unused lifecycle hooks (#1043) (1c79877)</li> <li>update dsp-js-lib to 8.2.3 (#1046) (508cf48)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10191-2023-04-28","title":"10.19.1 (2023-04-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_127","title":"Bug Fixes","text":"<ul> <li>gravsearch incoming links filtering out isPartOf (#1026) (4571c31)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_45","title":"Maintenance","text":"<ul> <li>update js-lib to 8.2.2 (#1029) (18b9663)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10190-2023-04-25","title":"10.19.0 (2023-04-25)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_128","title":"Bug Fixes","text":"<ul> <li>app breaks when on /account route (#1014) (2dca23b)</li> <li>app/resource-instance-form: fix same value for property bug (#1012) (a8b0f71)</li> <li>CD: get tag before changes happen (INFRA-241) (#1003) (d8fec4b)</li> <li>CD: use correct service string (INFRA-241) (#1002) (b8f31ee)</li> <li>list-view: next page of results not showing (#1017) (52b6d95)</li> <li>padding on both sides (#1011) (edc4d2d)</li> <li>sidenav: set background color for selected list-item (#998) (218f64c)</li> <li>unauthorized users can access the create resource form (#1016) (679a95d)</li> <li>Update dsp release version to 2023.04.02 (DEV-2044) (#1001) (441ff4a)</li> <li>user menu: bypass cache; get user from the api and set in cache (DEV-2024) (#997) (a8190d1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_58","title":"Enhancements","text":"<ul> <li>CD: deploy to DEV after every commit (INFRA-241) (#999) (df4793a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_46","title":"Maintenance","text":"<ul> <li>adjust linter rules for dsp-app (#1022) (771c534)</li> <li>deps-dev: bump @angular-devkit/core from 15.2.4 to 15.2.6 (#1009) (80f373e)</li> <li>deps-dev: bump @angular-devkit/schematics from 15.2.4 to 15.2.6 (#1007) (abbcd25)</li> <li>deps-dev: bump eslint from 8.36.0 to 8.38.0 (#1019) (d4d7130)</li> <li>deps-dev: bump postcss from 8.4.21 to 8.4.22 (#1008) (b7c51c4)</li> <li>deps: bump rxjs from 6.5.5 to 6.6.7 (#1020) (d95c826)</li> <li>fix buttons on start page (more or less) (#1021) (824e025)</li> <li>fulltext-search: filter out deactivated projects and system projects (#1015) (13895f7)</li> <li>progress indicator spinner (#1023) (218ee42)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10180-2023-04-14","title":"10.18.0 (2023-04-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_129","title":"Bug Fixes","text":"<ul> <li>dsp-app/upload: File upload fix to allow same input after error (#983) (a9bf4e3)</li> <li>handle 400 error during fulltext search (#984) (2aefc9d)</li> <li>no autocomplete for username (#991) (7a132e2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_59","title":"Enhancements","text":"<ul> <li>activate not-exists for link prop (#992) (25be262)</li> <li>editing properties: user feedback (DEV-1616) (#973) (1b905e4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_47","title":"Maintenance","text":"<ul> <li>angular mdc migration -  chips (#993) (367f853)</li> <li>angular mdc migration - button (#989) (dac96bc)</li> <li>angular mdc migration - card (#994) (f5b7fce)</li> <li>angular mdc migration - checkbox (#995) (5cba244)</li> <li>header: adjust logo (#985) (879c26f)</li> <li>make eslint throw errors on ignored tests (#986) (a1c9ec6)</li> <li>overview component bottom padding (#982) (11518d3)</li> <li>update js-lib to 8.2.1 (#996) (252ceff)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10170-2023-03-31","title":"10.17.0 (2023-03-31)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_130","title":"Bug Fixes","text":"<ul> <li>login button remains after sys admin login (#975) (5034931)</li> <li>store CookieBanner in LocalStorage (DEV-1953) (#970) (d2d25da)</li> <li>user guide for cardinalities (DEV-1568) (#978) (f762546)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_60","title":"Enhancements","text":"<ul> <li>introduction of not-exists operator (DEV-1845) (#969) (63c5136)</li> <li>submit cardinnalities: disable double click (#972) (864a656)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_10","title":"Documentation","text":"<ul> <li>Add the operator \"not exists\" (#974) (b1c2062)</li> <li>Update documentation to include the data browser (#971) (eb8e6c2)</li> <li>Update the user guide regarding the full-text search section (#951) (e0f5061)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_48","title":"Maintenance","text":"<ul> <li>add default background color to release badge (DEV-1918) (#958) (17c94d7)</li> <li>add JDNConvertibleCalendarDateAdapter and JDNConvertibleCalendar to monorepo (#968) (07b9694)</li> <li>build docker image by first building app outside (0946246)</li> <li>bump js-lib to 8.2.0 (#979) (74c14c1)</li> <li>bump nginx-server version (#964) (934c6e4)</li> <li>convert dsp-app into monorepo using nx (DEV-1888) (#961) (0614a77)</li> <li>fix overview page bottom padding (#977) (a1e7cc6)</li> <li>rename all occurrences of list to controlled vocabulary (#976) (53b027d)</li> <li>upgrade Angular to 15 (#953) (e521db4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10160-2023-03-17","title":"10.16.0 (2023-03-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_131","title":"Bug Fixes","text":"<ul> <li>cardinalities: dealing with 409 errors (DEV-1793) (#949) (7430d68)</li> <li>cardinalities: enable the required toggle programmatically (DEV-1790) (#942) (860cae2)</li> <li>cardinalities: wrong user feedback before correct one (DEV-1971) (#941) (e7d23a9)</li> <li>document: fix PDF viewer zoom out issue (DEV-1855) (#947) (b8e9a73)</li> <li>forms: hide form after submit (DEV-1476) (#940) (64315fb)</li> <li>lists: error messages only appear after focus (DEV-1692) (#937) (82793a2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_61","title":"Enhancements","text":"<ul> <li>allow upload ODD and RNG file types (DEV-1271) (#945) (c66954e)</li> <li>linked: help text for linked resources (DEV-1480) (#939) (3149060)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_49","title":"Maintenance","text":"<ul> <li>bump js-lip to 8.1.1 (#956) (8bf7450)</li> <li>document: fix pdf viewer css (DEV-1821) (#946) (c370f68)</li> <li>material: update material icons (DEV-1778) (#932) (8936427)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10150-2023-03-03","title":"10.15.0 (2023-03-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_62","title":"Enhancements","text":"<ul> <li>cardinalities: incorporate new routes in dsp app (DEV-1710) (#929) (d4ee7c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_50","title":"Maintenance","text":"<ul> <li>deps: update js-lib to version 8.1.0 (#936) (f2f4111)</li> <li>fix typo on publish make target (#925) (e4d09ac)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10140-2023-02-17","title":"10.14.0 (2023-02-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_63","title":"Enhancements","text":"<ul> <li>cardinalities: implement cardinalities user workflow (Dev-1615 ) (#917) (4f0347a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_11","title":"Documentation","text":"<ul> <li>Fix broken links (#921) (ad368aa)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_51","title":"Maintenance","text":"<ul> <li>bump js-lib to 8.0.0 (#923) (f7c4847)</li> <li>deps: fix breaking changes from js-lib v8.0.0 (#918) (f2d14be)</li> <li>enable publishing docker image arm64 and amd64 architectures (DEV-1701) (#915) (65d3120)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10130-2023-02-03","title":"10.13.0 (2023-02-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_132","title":"Bug Fixes","text":"<ul> <li>adapt link to search doc (#907) (dc294af)</li> <li>fix disappeared buttons colors (DEV-1686) (#906) (9594a6e)</li> <li>project: disable closing sidenav with esc key (DEV-1687) (#909) (1dea40f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_52","title":"Maintenance","text":"<ul> <li>fix test logs (DEV-1610) (#893) (681fc7a)</li> <li>make possible to publish manually to DockerHub using GH Actions (#911) (5f72fa9)</li> <li>ontology editor: restyle ontology editor for cardinalities (DEV-1614) (#900) (57b41d9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_64","title":"Enhancements","text":"<ul> <li>zio: add support for new zio routes (DEV-1636) (#898) (d4e2a94)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10121-2023-01-23","title":"10.12.1 (2023-01-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_133","title":"Bug Fixes","text":"<ul> <li>create-link-resource: fix issue when creating a new linked resource (DEV-1637) (#899) (cf9008a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10120-2023-01-20","title":"10.12.0 (2023-01-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_134","title":"Bug Fixes","text":"<ul> <li>firefox audio representation (DEV 1553) (#884) (420d54f)</li> <li>fulltext-search: don't allow search queries of less than 3 characters (DEV-1602) (#890) (5b6a131)</li> <li>ontology: fix old view ontology editor not appearing (DEV-1603) (#891) (00ad45e)</li> <li>project: Prevent adding new data model for deactivated projects (DEV-1582) (#892) (c5fcc30)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_65","title":"Enhancements","text":"<ul> <li>releasenotes: Integrate releasenotes (DEV-1600) (#895) (64ef14b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_53","title":"Maintenance","text":"<ul> <li>bump JS-LIB to v7.4.10 (#896) (775b012)</li> <li>deps: bump engine.io from 6.2.0 to 6.2.1 (#872) (3e208a5)</li> <li>deps: bump json5 from 1.0.1 to 1.0.2 (#886) (6064d42)</li> <li>deps: bump loader-utils from 2.0.2 to 2.0.4 (#866) (2dfaa61)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10112-2023-01-09","title":"10.11.2 (2023-01-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_135","title":"Bug Fixes","text":"<ul> <li>fix gravsearch results infinite loading (DEV-1541) (#887) (3c8e1a9)</li> <li>ontology: Displaying ontology on click (DEV-1545) (#882) (479c1e8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_54","title":"Maintenance","text":"<ul> <li>bump JS-LIB to v7.4.9 (#888) (4b958e2)</li> <li>header: Logo &amp; favicon (DEV-1574) (#885) (384d8ef)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10111-2022-12-07","title":"10.11.1 (2022-12-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_136","title":"Bug Fixes","text":"<ul> <li>properties: fixing incoming links bug in compound view (DEV-1493) (#873) (d606cf0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_55","title":"Maintenance","text":"<ul> <li>bump js-lib to v7.4.8 (#880) (c412dfd)</li> <li>project IRI refactor (DEV-1468) (#862) (d898109)</li> <li>representations: move repeated code to a shared service (DEV-1488) (#869) (c2dcb17)</li> <li>text-value-as-string: no longer account for richText gui attribute (DEV-1471) (#874) (21f7c6c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10110-2022-11-02","title":"10.11.0 (2022-11-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_137","title":"Bug Fixes","text":"<ul> <li>css: adjust css of form error message (DEV-1458) (#861) (54e15d0)</li> <li>ontology: list of class properties sometimes not loading correctly (DEV-1435) (#857) (302d83b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_66","title":"Enhancements","text":"<ul> <li>link-value, search-link-value: add debouncing to search requests (DEV-1463) (#860) (a49af8e)</li> <li>result list: Internal links open resource in new window (DEV-1405) (#855) (3396701)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10102-2022-10-21","title":"10.10.2 (2022-10-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_138","title":"Bug Fixes","text":"<ul> <li>edit-list-item: only send delete comment request if necessary (DEV-1406) (#850) (a2bddfc)</li> <li>list-value: fix payload for API request to update a link value (DEV-1420) (#854) (e350d21)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_56","title":"Maintenance","text":"<ul> <li>deps: bump JS-LIB to 7.4.7 (#856) (d10f9c4)</li> <li>project workspace: Remove grid view from the project workspace (DEV-1318) (#849) (1083512)</li> <li>replace substr with substring (DEV-1409) (#853) (5b94d3b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10101-2022-10-07","title":"10.10.1 (2022-10-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_139","title":"Bug Fixes","text":"<ul> <li>list-info-form: fix project iri generation (DEV-1387) (#845) (79c4791)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_57","title":"Maintenance","text":"<ul> <li>deps: bump JS-LIB to 7.4.6 (#847) (17d3af1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#10100-2022-10-06","title":"10.10.0 (2022-10-06)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_140","title":"Bug Fixes","text":"<ul> <li>sidenav: sort data models (DEV-1359) (#841) (75087b5)</li> <li>upload: convert file extensions to lowercase before checking for validity (DEV-1391) (#844) (61005c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_58","title":"Maintenance","text":"<ul> <li>maintain dependencies (DEV-1358) (#839) (e8c5140)</li> <li>update release-please-action to v3 (#837) (9b1e7e1)</li> <li>upgrade Angular and Material to v14 (DEV-1322) (#830) (a46609f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_67","title":"Enhancements","text":"<ul> <li>add support for Romansh language (DEV-557) (#840) (1ec8cff)</li> <li>forms: Comments are disabled or highlighted to be not saved if there is a invalid or an empty property value (DEV-1124) (#836) (f5b7abd)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1091-2022-09-26","title":"10.9.1 (2022-09-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_141","title":"Bug Fixes","text":"<ul> <li>project: fix route to lists (#834) (1d32a03)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1090-2022-09-26","title":"10.9.0 (2022-09-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_142","title":"Bug Fixes","text":"<ul> <li>list-view: refresh list view after a resource is deleted or erased (DEV-1353) (#828) (c15d87b)</li> <li>Onto editor 404 error (DEV-1355) (#831) (e7836a9)</li> <li>Ontologies displayed twice (DEV-1325) (#832) (ba35d6f)</li> <li>property-form: set the cache after the ontology changes with the new lastModificationDate to prevent 409 http errors (#824) (0304943)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_68","title":"Enhancements","text":"<ul> <li>lists: read mode project member (DEV-1343) (#825) (b818288)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_59","title":"Maintenance","text":"<ul> <li>update js-lib to v7.4.5 (#833) (6d14ca7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1081-2022-09-14","title":"10.8.1 (2022-09-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_143","title":"Bug Fixes","text":"<ul> <li>make deactivated projects invisible for all except sysadmin (DEV-1261) (#821) (88a2cbd)</li> <li>properties: resolve 409 conflict (#822) (bf0ed83)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1080-2022-09-09","title":"10.8.0 (2022-09-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_144","title":"Bug Fixes","text":"<ul> <li>audio: download audio file with original filename (#810) (8001fab)</li> <li>int-value: fix int-value validation (DEV-1277) (#815) (d86dc7b)</li> <li>ontology: don't show 403 error is user is a system admin or project admin and not a project member (#816) (ffe00c0)</li> <li>resource: fix properties sorting (DEV-1204) (#818) (fbee603)</li> <li>resource: reinit representationsToDisplay array to fix undefined issue in template (#813) (375166a)</li> <li>rollbar fixes (DEV-1324) (#817) (e79eee5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_69","title":"Enhancements","text":"<ul> <li>document: document viewer for non-pdf documents (DEV-1303) (#812) (36008c6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_60","title":"Maintenance","text":"<ul> <li>deps: bump js-lib to 7.4.4 (#820) (57e3ccf)</li> <li>deps: bump js-lib version to 7.4.3 (#814) (c97c569)</li> <li>upload: use file extensions for valid file types instead of MIME types (DEV-1203) (#808) (448e783)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_12","title":"Documentation","text":"<ul> <li>Add documentation about the different file types and their functionalities (#804) (8c64276)</li> <li>Reorganise the main menu and the data menu (#807) (f8ef81d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1070-2022-08-24","title":"10.7.0 (2022-08-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_70","title":"Enhancements","text":"<ul> <li>list-value: show hierarchy of list node (DEV-1092) (#805) (26e88c3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1060-2022-08-19","title":"10.6.0 (2022-08-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_145","title":"Bug Fixes","text":"<ul> <li>list: hide title (#801) (19fcaba)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_13","title":"Documentation","text":"<ul> <li>Update the section Linkage and annotation (#802) (5f4d52f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_71","title":"Enhancements","text":"<ul> <li>ontology: ontology editor read mode (DEV-1183) (#799) (02b5a48)</li> <li>video: add download button and overlay to video player (DEV-1151) (#798) (ac06f6b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_61","title":"Maintenance","text":"<ul> <li>file-representation: add credentials to all file download requests (#803) (b247f85)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1050-2022-08-15","title":"10.5.0 (2022-08-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_146","title":"Bug Fixes","text":"<ul> <li>login-form: keep user on same page after login (DEV-1158) (#788) (9ec6870)</li> <li>notification: fix snackbar notification only appearing for a split second (#794) (110039d)</li> <li>resource view: dsp app the resource viewer does not reload properly after deselecting a resource from the comparison viewer(Dev-1123) (#793) (f690a37)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_72","title":"Enhancements","text":"<ul> <li>archive: new archive representation view (DEV-1084) (#785) (db40310)</li> <li>audio: Make changes to audio component (DEV-1148) (#796) (0cabfe3)</li> <li>document: changes to pdf viewer (DEV-1149) (#789) (d39ed14)</li> <li>document: make changes to text component (DEV-1147) (#791) (e8adde9)</li> <li>projects: changes to nav bar (DEV-1101) (#790) (d9570b9)</li> <li>still-image: new still-image viewer (DEV-1150) (#792) (2eccd8a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_62","title":"Maintenance","text":"<ul> <li>file-representations: adjust styling of file representation components (#797) (18aa134)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1043-2022-07-29","title":"10.4.3 (2022-07-29)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_147","title":"Bug Fixes","text":"<ul> <li>property-form: only send API request to change the guiElement for TextValue object types (#783) (109ca05)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1042-2022-07-28","title":"10.4.2 (2022-07-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_148","title":"Bug Fixes","text":"<ul> <li>package.json &amp; package-lock.json to reduce vulnerabilities (#775) (064a7dc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_63","title":"Maintenance","text":"<ul> <li>deps: bump moment from 2.29.2 to 2.29.4 (#774) (2831255)</li> <li>login-form: don't redirect user if they are a member of only one project AND they are a sysAdmin (#782) (1a103ba)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1041-2022-07-28","title":"10.4.1 (2022-07-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_64","title":"Maintenance","text":"<ul> <li>routing: home button should direct to overview page (DEV-1152) (#779) (d3011ae)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1040-2022-07-27","title":"10.4.0 (2022-07-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_73","title":"Enhancements","text":"<ul> <li>overview: add overview and project tile components (DEV-984) (#777) (a64359b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1033-2022-07-19","title":"10.3.3 (2022-07-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#documentation_14","title":"Documentation","text":"<ul> <li>Update the user guide (DEV-1049) (#769) (12d0edc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1032-2022-06-30","title":"10.3.2 (2022-06-30)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_149","title":"Bug Fixes","text":"<ul> <li>date-value-handler: add some null checks to ensure component has everything it needs before trying to use a property (#771) (4076f3e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_65","title":"Maintenance","text":"<ul> <li>deps: bump version of js-lib (#773) (9a5252d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1031-2022-06-23","title":"10.3.1 (2022-06-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_150","title":"Bug Fixes","text":"<ul> <li>link-value: add onto iri to api request (#770) (d16e5b5)</li> <li>update broken links of the main README file (#767) (a3408f6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1030-2022-06-16","title":"10.3.0 (2022-06-16)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_151","title":"Bug Fixes","text":"<ul> <li>docs: resolve dead links to documentation (#764) (9c83b7e)</li> <li>link-value: loop through all ontologies of a project to create list of resource classes (#766) (7c824bf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_66","title":"Maintenance","text":"<ul> <li>change codeowner before I leave (#762) (5884f51)</li> <li>link-value: recursively loop through all of a superclass's subclasses (#763) (5efed72)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_74","title":"Enhancements","text":"<ul> <li>project: proof of new project workflow concept (DEV-1001) (#765) (fb29253)</li> <li>project: proof of new project workflow concept (DEV-985) (#760) (2391f2a)</li> <li>resource: create new resource instance directly from ontology's class (DEV-959) (#755) (5f30719)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1020-2022-06-02","title":"10.2.0 (2022-06-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_152","title":"Bug Fixes","text":"<ul> <li>ontology: check if value exists without refreshing the page (DEV-923) (#756) (3c2409a)</li> <li>user: bring back password field and resolve loading issue (DEV-967) (#753) (694cb06)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_67","title":"Maintenance","text":"<ul> <li>form: replace matAutosize by cdkAutosize (DEV-968) (#754) (449493b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_75","title":"Enhancements","text":"<ul> <li>list: add support for deleting child node comments (DEV-965) (#758) (50c2d17)</li> <li>text-file: add support for text file representations (DEV-920) (#751) (84975d7)</li> <li>value: improve list value (DEV-951) (#757) (4d9b747)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1010-2022-05-23","title":"10.1.0 (2022-05-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_153","title":"Bug Fixes","text":"<ul> <li>representation: resolve timeline issue when resizing window (DEV-819) (#741) (da985fc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_68","title":"Maintenance","text":"<ul> <li>classes: sort resource classes by label (DEV-952) (#748) (e060cce)</li> <li>resource: display incoming links the same way as prop values (DEV-567) (#747) (7d2f6f3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_76","title":"Enhancements","text":"<ul> <li>resource: open annotation (region) the correct way (DEV-785) (#749) (3983f9b)</li> <li>resource: open resource instances from ontology class (DEV-950) (#746) (e937b5f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#1000-2022-05-18","title":"10.0.0 (2022-05-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_2","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>representation: new navigation in still-image viewer (DEV-895) (#742)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_154","title":"Bug Fixes","text":"<ul> <li>error: resolve error handler issues (DEV-938) (#744) (ceebf7b)</li> <li>ontology: unsupported property type was displayed wrong (DEV-936) (#740) (87124e9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_69","title":"Maintenance","text":"<ul> <li>message: use only one static error component (DEV-900) (#727) (404f1f6)</li> <li>project: resolve issues in lists and with status 204 (#738) (52f904b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_77","title":"Enhancements","text":"<ul> <li>error: add file representation error message (DEV-791) (#729) (462771e)</li> <li>error: handle 504 timeout error with snackbar (DEV-751) (#739) (8f6c409)</li> <li>hint: display hint about fulltext search (DEV-901) (#734) (f54dafc)</li> <li>link-value: UI now shows that there are no search results (#736) (88b81bf)</li> <li>ontology: select link class from all ontologies (DEV-688) (#737) (8dcdd8f)</li> <li>representation: new navigation in still-image viewer (DEV-895) (#742) (dbc75ff)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#981-2022-05-09","title":"9.8.1 (2022-05-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_155","title":"Bug Fixes","text":"<ul> <li>representation: disable progress indicator correctly (DEV-905) (#730) (92efbeb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#980-2022-05-05","title":"9.8.0 (2022-05-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_156","title":"Bug Fixes","text":"<ul> <li>ontology-editor: bring back the gui-attr for pulldown (DEV-856) (#719) (0c2a43d)</li> <li>resource: show progress indicator until whole resource is loaded (DEV-638) (#725) (946af20)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_70","title":"Maintenance","text":"<ul> <li>clean up jsDocs and delete deprecated methods (DEV-741) (#722) (8457119)</li> <li>ontology: crop loooong ontology labels (DEV-493) (#723) (1b7384f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_78","title":"Enhancements","text":"<ul> <li>ontology: add properties to a class from other ontologies (DEV-689 / DEV-880) (#721) (b90fc70)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#970-2022-04-22","title":"9.7.0 (2022-04-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_157","title":"Bug Fixes","text":"<ul> <li>package.json &amp; package-lock.json to reduce vulnerabilities (#714) (0e90296)</li> <li>text-value-as-string: links in text values (DEV-797) (#718) (af3cdc2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_71","title":"Maintenance","text":"<ul> <li>deps: bump async from 2.6.3 to 2.6.4 (#716) (c77c208)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_79","title":"Enhancements","text":"<ul> <li>representation: implement video player incl. preview (DEV-701) (#698) (86fc2a7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#960-2022-04-13","title":"9.6.0 (2022-04-13)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_158","title":"Bug Fixes","text":"<ul> <li>create-link-value: bring back functionality to create a new link resource instance when adding a new value to a linked resource class property (#709) (c6fe803)</li> <li>link-value: re-validate form when cancel button is clicked (#711) (7768fb9)</li> <li>ontology: display all classes in a property (DEV-564) (#701) (f90aedc)</li> <li>package.json &amp; package-lock.json to reduce vulnerabilities (#704) (5d4bb7c)</li> <li>region: highlight info of clicked region (DEV-724) (#703) (2d98369)</li> <li>resource-instance-form: disable \"next\" button when form is not valid (DEV-803) (#713) (124b953)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_80","title":"Enhancements","text":"<ul> <li>link-value: add progress indicator (DEV-605) (#708) (5efd981)</li> <li>link-value: enter newly created value automatically (#710) (5ccd18d)</li> <li>resource: upload video (DEV-204) (#577) (29201d4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_72","title":"Maintenance","text":"<ul> <li>gh-ci: add style to the release notes (#706) (8e9e143)</li> <li>help: update support links (DEV-779) (#700) (d97113f)</li> <li>resource: display class label of incoming link (DEV-568) (#702) (aad1c5a)</li> <li>use constants from js-lib directly (DEV-799) (#712) (374b5a8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#950-2022-04-04","title":"9.5.0 (2022-04-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_159","title":"Bug Fixes","text":"<ul> <li>mkdocs: update version of mkdocs (#696) (e154fa3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_81","title":"Enhancements","text":"<ul> <li>replace-file: Replace Uploaded Files (DEV-684) (#695) (df9de8c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#940-2022-03-23","title":"9.4.0 (2022-03-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_160","title":"Bug Fixes","text":"<ul> <li>help: refactor version number and fix dead link (DEV-678) (#693) (e255ac9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_82","title":"Enhancements","text":"<ul> <li>resource-instance: add subclass creation support (DEV-553) (#686) (d0a260d)</li> <li>still-image: IIIF URL copy button (DEV-524) (#690) (b0d72a6)</li> <li>still-image: new draw region icon (DEV-569) (#689) (bee5caf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_73","title":"Maintenance","text":"<ul> <li>clean up code, tests and packages (#694) (1ad0879)</li> <li>deps: bump node-forge from 1.2.1 to 1.3.0 (#692) (cf58030)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#930-2022-03-21","title":"9.3.0 (2022-03-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_161","title":"Bug Fixes","text":"<ul> <li>error: display 500 server error when the api is not healthy (DEV-475) (#673) (b374a3b)</li> <li>gravsearch: cleanse gravsearch date query (#681) (a0f34ce)</li> <li>gravsearch: fix list value restriction (DEV-486) (#682) (1eccfc0)</li> <li>permission-info: close permission info on scrolling (DEV-552) (#671) (8ac1d25)</li> <li>value: do not use linkify in text value as html (DEV-563) (#683) (3b159b5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_83","title":"Enhancements","text":"<ul> <li>advanced-search: support subclasses in cross-resource query (#685) (fde5d99)</li> <li>archive-value: Download archive files with original filename (DEV-295) (#677) (a87dfae)</li> <li>ontology: adjust tooltip text when property is inherited (DEV-323) (#674) (d3a1e49)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_74","title":"Maintenance","text":"<ul> <li>deps-dev: bump karma from 6.3.14 to 6.3.16 (#678) (df0ef65)</li> <li>deps: bump angular to version 13 (DEV-631) (#679) (a7d2098)</li> <li>deps: bump js-lib to latest (DEV-669) (#687) (b4836b8)</li> <li>deps: bump url-parse from 1.5.7 to 1.5.10 (#676) (150e8ae)</li> <li>dockerfile: add dependabot config to keep base image up-to-date (INFRA-13) (#670) (485a57e)</li> <li>error: use error handler everywhere (DEV-475) (#688) (eabfa64)</li> <li>value: remove old date value components (DEV-633) (#684) (76233ea)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#921-2022-02-21","title":"9.2.1 (2022-02-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_162","title":"Bug Fixes","text":"<ul> <li>permission-info: better permission string handling (DEV-537) (#667) (8be1efe)</li> <li>resource: resource viewer is broken if fileRepresentation has restricted view (DEV-455) (#666) (6a360ac)</li> <li>still-image: fix image displayed as black square (DEV-525) (#668) (33833f6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_75","title":"Maintenance","text":"<ul> <li>deps: bump url-parse from 1.5.4 to 1.5.7 (#664) (54a348f)</li> <li>rollbar: add environment to the config (#669) (8a587b9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#920-2022-02-17","title":"9.2.0 (2022-02-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_163","title":"Bug Fixes","text":"<ul> <li>ontology-editor: display sub-properties the correct way (DEV-530) (#661) (a2cf6e0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_84","title":"Enhancements","text":"<ul> <li>resource: display permissions (DEV-454) (#660) (13a3a49)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#910-2022-02-15","title":"9.1.0 (2022-02-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_85","title":"Enhancements","text":"<ul> <li>add-link-resource-button: Add Link Resource Button (DEV-404) (#645) (f762c3c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_76","title":"Maintenance","text":"<ul> <li>deps-dev: bump karma from 6.3.13 to 6.3.14 (#653) (1794e47)</li> <li>deps: bump follow-redirects from 1.14.7 to 1.14.8 (#656) (8554764)</li> <li>google fonts: switches back to self hosting google fonts (#654) (938721b)</li> <li>open-sea-dragon: updates package to v3.0.0 (#658) (42bffa6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#901-2022-02-09","title":"9.0.1 (2022-02-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_164","title":"Bug Fixes","text":"<ul> <li>main: bug fix in configuration file in case of prod mode (DEV-491) (#651) (a6c9e87)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#900-2022-02-02","title":"9.0.0 (2022-02-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_3","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>display dsp release number (DEV-420) (#644)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_165","title":"Bug Fixes","text":"<ul> <li>ontology: support subproperty in ontology editor (DEV-332) (#643) (c838043)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_86","title":"Enhancements","text":"<ul> <li>display dsp release number (DEV-420) (#644) (b6c9f1c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_77","title":"Maintenance","text":"<ul> <li>deps: bump log4js from 6.3.0 to 6.4.1 (#648) (dd2eebe)</li> <li>deps: bump nanoid from 3.1.30 to 3.2.0 (#647) (13c6f2a)</li> <li>deps: update packages (#650) (cc60b0b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#850-2022-01-19","title":"8.5.0 (2022-01-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_166","title":"Bug Fixes","text":"<ul> <li>project: better project form validation (DEV-336) (#641) (a7563a3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_78","title":"Maintenance","text":"<ul> <li>angular: optimize ng s in dev mode (#640) (9812b9c)</li> <li>deps: fix security vulnerability (#638) (f19434e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_87","title":"Enhancements","text":"<ul> <li>ontology: support partOf value to create book res class (DEV-180) (#634) (3051a67)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#840-2022-01-17","title":"8.4.0 (2022-01-17)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_167","title":"Bug Fixes","text":"<ul> <li>advanced search: update comparison operators in case of rich text (DEV-326) (#633) (cd01d87)</li> <li>archive representation: a resource with an archive representation now loads correctly again (#630) (299ecf9)</li> <li>date-value: do not submit in case of period button (DEV-373) (#635) (d7ac1b6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_79","title":"Maintenance","text":"<ul> <li>clean up after bump dsp-js (#628) (374fc78)</li> <li>ontology: clean up unused code (DEV-304) (#629) (3d029a1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_88","title":"Enhancements","text":"<ul> <li>resource: display deleted resource (DEV-299) (#632) (2c5fd80)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#833-2022-01-04","title":"8.3.3 (2022-01-04)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_168","title":"Bug Fixes","text":"<ul> <li>resource: bug fix in pdf viewer (DEV-338) (#626) (4b5d5d5)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#832-2021-12-16","title":"8.3.2 (2021-12-16)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_169","title":"Bug Fixes","text":"<ul> <li>authentication: set active datadog rum user (DEV-325) (#624) (69308e0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#831-2021-12-15","title":"8.3.1 (2021-12-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_170","title":"Bug Fixes","text":"<ul> <li>upload: fix thumbnail preview (DEV-268) (#619) (7cb8505)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_80","title":"Maintenance","text":"<ul> <li>authentication: new login / logout structure (DEV-325) (#622) (e8bec98)</li> <li>fonts: delete fonts and icons (DEV-327) (#623) (08e088b)</li> <li>google fonts: switch to using fonts hosted by google (#620) (daa4167)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#830-2021-12-09","title":"8.3.0 (2021-12-09)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_171","title":"Bug Fixes","text":"<ul> <li>resource: update lastModificationDate after editing label (DEV-315) (#616) (3b9d93b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_89","title":"Enhancements","text":"<ul> <li>still-image: display iiif url under the image caption (DEV-243) (#613) (109978f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_81","title":"Maintenance","text":"<ul> <li>metadata: remove \"old\" implementation of the project metadata (DEV-282) (#615) (29acf3a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#820-2021-12-08","title":"8.2.0 (2021-12-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_172","title":"Bug Fixes","text":"<ul> <li>ontology: bug fix in ontology form (DEV-280) (#603) (4c1bc24)</li> <li>resource: create resource iri from route only in certain cases (DEV-306) (#605) (a38abd0)</li> <li>value: fix linkify pipe (DEV-270) (#602) (f2c8d7a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_90","title":"Enhancements","text":"<ul> <li>representation: add support for uploading and viewing archive files (DEV-18) (#600) (9bb63d7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_82","title":"Maintenance","text":"<ul> <li>deps: update outdated angular packages (#604) (80b3f93)</li> <li>deps: use correct nginx-server (DEV-263) (#610) (ccae958)</li> <li>angular: fix budget in prod mode (#606) (5072948)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#812-2021-12-01","title":"8.1.2 (2021-12-01)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_83","title":"Maintenance","text":"<ul> <li>lists: adds changes required for lists to work due to the change in js-lib (#599) (ca83584)</li> <li>projects: don't use the cache when refreshing the projects list. Also renames some labels and methods to clarify that these things are for deactivating a project as opposed to deleting a project. (#597) (faebe3e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#811-2021-11-19","title":"8.1.1 (2021-11-19)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_173","title":"Bug Fixes","text":"<ul> <li>results: display xml a better way (DEV-96) (#593) (d968f2f)</li> <li>value: bug fix in text-value-as-string (DEV-242) (#595) (0fb95ee)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#810-2021-11-18","title":"8.1.0 (2021-11-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_174","title":"Bug Fixes","text":"<ul> <li>fulltext-search: updates the projects list when a new project is created (DEV-212) (#586) (43fcbfa)</li> <li>ontology: resolve gui order issue (DEV-222) (#590) (4ddbf7c)</li> <li>ontology: send modified label (DEV-221) (#589) (9d7ffea)</li> <li>text-value: resource-instance-form and display-edit components now correctly display a paragraph text with line breaks (DEV-211) (#584) (be9d6f4)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_84","title":"Maintenance","text":"<ul> <li>deps: update angular to v12 (#588) (37e65a8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_91","title":"Enhancements","text":"<ul> <li>properties: ckEditor Internal Links (DEV-118) (#591) (cac988b)</li> <li>update UI on region color change (DEV-215) (#583) (b497d0e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#800-2021-11-10","title":"8.0.0 (2021-11-10)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_4","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>resource: new resource route (DEV-196) (#581)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_85","title":"Maintenance","text":"<ul> <li>small code improvements (#579) (d19e353)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_92","title":"Enhancements","text":"<ul> <li>resource: add additional routing for an ark url of a value (DEV-196) (#575) (c1b0b94)</li> <li>resource: new resource route (DEV-196) (#581) (3fbd94c)</li> <li>still-image: uses the color of the color property for the line color if a color property for the region exists (#580) (7680353)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#701-2021-11-05","title":"7.0.1 (2021-11-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_175","title":"Bug Fixes","text":"<ul> <li>error: resolve error handler in case of server error (DEV-205) (#576) (ff9d097)</li> <li>ontology: class and property name has to be unique (DEV-183) (#569) (059dd2a)</li> <li>value: display ckEditor in case of rich-text property (DEV-182) (#571) (6bfe254)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_86","title":"Maintenance","text":"<ul> <li>annotations will now only be drawn when the user is on the annotations tab (#574) (bddc2f1)</li> <li>deps: use release of ckeditor custom build (DEV-189) (#570) (fb55fd7)</li> <li>main: use version route (DEV-124) (#565) (16f26ce)</li> <li>move datadog rum methods to service (DEV-190) (#572) (77191cb)</li> <li>refactors upload-file service to use the string generated in the iiif-config file and changes the public class members in app-init service to private with getters. (#573) (c39ca5b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#700-2021-10-28","title":"7.0.0 (2021-10-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_5","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>error logging: rollbar implementation (DEV-20) (#543)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_176","title":"Bug Fixes","text":"<ul> <li>ontology: use correct label (DEV-168) (#564) (70cc7d8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_87","title":"Maintenance","text":"<ul> <li>gh: update issue templates (#562) (6d510c7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_93","title":"Enhancements","text":"<ul> <li>error logging: rollbar implementation (DEV-20) (#543) (d0a9e3f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#650-2021-10-21","title":"6.5.0 (2021-10-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_94","title":"Enhancements","text":"<ul> <li>ontology: bring back the name input field (DEV-157) (#559) (51e539d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#641-2021-10-20","title":"6.4.1 (2021-10-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_177","title":"Bug Fixes","text":"<ul> <li>value: fix boolean value issue (#557) (4d35cd2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_88","title":"Maintenance","text":"<ul> <li>deps: bump mkdocs from 1.1.2 to 1.2.3 in /docs (#556) (5f8213c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#640-2021-10-20","title":"6.4.0 (2021-10-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_95","title":"Enhancements","text":"<ul> <li>ontology: delete property from resource class (DSP-1854 / DEV-28) (#499) (436c270)</li> <li>value: refactor boolean value (DEV-98) (#554) (7affa5e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#630-2021-10-15","title":"6.3.0 (2021-10-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_178","title":"Bug Fixes","text":"<ul> <li>disable edit/delete action in deactivated projects (DEV-52) (#550) (d7bec78)</li> <li>properties: do not submit res instance form by adding new value (DEV-150) (#553) (99a3022)</li> <li>value: fix broken time value component (DEV-147) (#552) (fb846f9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_96","title":"Enhancements","text":"<ul> <li>datadog RUM implementation (DEV-50) (#546) (ec59ee5)</li> <li>resource: new date picker (DEV-112) (#532) (04e4b32)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#620-2021-10-08","title":"6.2.0 (2021-10-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_179","title":"Bug Fixes","text":"<ul> <li>error: improve the current error handler in DSP-APP (DSP-1911) (#540) (0eb621b)</li> <li>gravsearch results now appear after page refresh (#542) (a88dd79)</li> <li>resource-instance-form: reloads cached resource to show changes made to the data model (#547) (37bb2a7)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_97","title":"Enhancements","text":"<ul> <li>ontology: display id / name in property and class (DEV-37) (#544) (0a2bcfb)</li> <li>search: add missing search resource component (DEV-95) (#548) (79abd10)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_89","title":"Maintenance","text":"<ul> <li>fulltext-search: persist fulltext search term in input field (DSP-1674) (#539) (67a52a3)</li> <li>resource: improve still image annotation form (DEV-53) (#549) (38bbe41)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#610-2021-09-20","title":"6.1.0 (2021-09-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_180","title":"Bug Fixes","text":"<ul> <li>annotations: empty annotations on upload of new region (#536) (075e6b1)</li> <li>links: trust the external links (DSP-1904) (#537) (303ac3d)</li> <li>resource-instance-form: resource class name now updates correctly in the event that the name was changed and the page was not refreshed (#531) (5783d27)</li> <li>resource: increase width of space between entries of incoming links (DSP-1908) (#538) (79b4d29)</li> <li>still-image-viewer: fix zoom buttons (DSP-1798) (#533) (b07ec63)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_98","title":"Enhancements","text":"<ul> <li>resource: draw regions (DSP-1845) (#524) (f08706b)</li> <li>textarea is now provided is the gui-element is a textarea (#529) (e80a4d2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_90","title":"Maintenance","text":"<ul> <li>modules: clean up imports and npm packages (#535) (4310ff7)</li> <li>openseadragon prod build fix (DSP-1779) (#534) (0a34eaa)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#600-2021-09-08","title":"6.0.0 (2021-09-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_6","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>config: update config file for better iiif support (DSP-1880) (#511)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_181","title":"Bug Fixes","text":"<ul> <li>audio: sanitize audio url (DSP-1819) (#513) (35871cd)</li> <li>deps: fix security vulnerability (#514) (d793fb8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_99","title":"Enhancements","text":"<ul> <li>config: update config file for better iiif support (DSP-1880) (#511) (b799600)</li> <li>resource: display incoming links (DSP-1846) (#507) (9c3abce)</li> <li>resource: optimize resource instance form (DSP-1256) (#518) (5151677)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_91","title":"Maintenance","text":"<ul> <li>action: migrate action module (DSP-1852) (#509) (725c45e)</li> <li>core: migrate core module from UI-lib (DSP-1853) (#505) (ea1cd55)</li> <li>deps: bump dsp-js to latest version (DSP-1883) (#521) (c956d4b)</li> <li>deps: bump dsp-ui to latest (#502) (5d79065)</li> <li>fix style in resource, search-panel and progress-indicator (DSP-1887) (#520) (854aff2)</li> <li>gh-ci: split workflow tasks (#515) (83d5874)</li> <li>login: add autocomplete to login form (DSP-1892) (#527) (dd6be15)</li> <li>project: handle mandatory keyword field (DSP-1829) (#503) (35f6e7b)</li> <li>remove CoreModule dependency (DSP-1884) (#519) (8549104)</li> <li>remove ViewerModule dependency (DSP-1890) (#525) (a99546e)</li> <li>removes ActionModule dependency (#523) (bd60f00)</li> <li>removes SearchModule dependency (#522) (269be23)</li> <li>resource: migrate viewer from UI-lib (DSP-1850) (#504) (b742a98)</li> <li>search: migrate search module (DSP-1851) (#510) (fc7ea5c)</li> <li>update imports step 1 (DSP-1882) (#516) (e7a2c4f)</li> <li>update remaining dsp-ui imports (DSP-1891) (#526) (43888a6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#530-2021-08-12","title":"5.3.0 (2021-08-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_92","title":"Maintenance","text":"<ul> <li>header: clean up code and use notification service after login (#498) (fb6c368)</li> <li>ontology: update create ontology tooltip for unique name (DSP-1139) (#500) (946d00f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_100","title":"Enhancements","text":"<ul> <li>resource: create link / collection resource (DSP-1835) (#501) (8060756)</li> <li>workspace: add intermediate view (DSP-1834) (#494) (d0e475a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#521-2021-08-03","title":"5.2.1 (2021-08-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_93","title":"Maintenance","text":"<ul> <li>deps: bump dsp-ui to latest version (DSP-1838) (#495) (4adc49a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#520-2021-08-02","title":"5.2.0 (2021-08-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_101","title":"Enhancements","text":"<ul> <li>resource: add comparison view (DSP-1796) (#490) (731ea04)</li> <li>resource: update resource's label (DSP-1801) (#492) (e2c9867)</li> <li>improve error handler and fix search results issue (DSP-1826 / DSP-1831) (#493) (fa2f4b0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#510-2021-07-26","title":"5.1.0 (2021-07-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_182","title":"Bug Fixes","text":"<ul> <li>ontology: fix regex pattern in ontology form (DSP-1139) (#483) (4d0703f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_15","title":"Documentation","text":"<ul> <li>user-guide: update user-guide about ontology (DSP-976) (#480) (e12f196)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_94","title":"Maintenance","text":"<ul> <li>ontology: better regex for onto name (DSP-1139) (#488) (ec881ef)</li> <li>resource: hide file value in properties (DSP-1261) (#484) (4ade17f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_102","title":"Enhancements","text":"<ul> <li>resource: add document viewer with download (DSP-1791) (#485) (ce51bce)</li> <li>resource: audio player (DSP-1805) (#487) (bf372dc)</li> <li>resource: delete and erase resource (DSP-1228) (#489) (8b1fdba)</li> <li>resource: upload audio (DSP-1799) (#486) (d865df5)</li> <li>resource: upload pdf document (DSP-1776) (#481) (d916b4b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#500-2021-07-05","title":"5.0.0 (2021-07-05)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_7","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>upload: add upload form for still images (DSP-1761) (#472)</li> <li>config: add geoname config (DSP-1672) (#473)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_16","title":"Documentation","text":"<ul> <li>ontology: update docs and show hint in ontology-form (DSP-1139) (#476) (927237d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_103","title":"Enhancements","text":"<ul> <li>config: add geoname config (DSP-1672) (#473) (d4222ba)</li> <li>ontology: add property to res class that is in use (DSP-1631) (#477) (b18e6ec)</li> <li>ontology: change gui element for text value properties (#478) (6af1f7e)</li> <li>ontology: display description for default and existing props (DSP-1154) (#475) (8be7e55)</li> <li>upload: add upload form for still images (DSP-1761) (#472) (2f314a2)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_95","title":"Maintenance","text":"<ul> <li>deps: bump jdnconvertiblecalendar to v0.0.7 (DSP-1770) (#479) (b2ec64a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#4111-2021-06-23","title":"4.11.1 (2021-06-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#documentation_17","title":"Documentation","text":"<ul> <li>search: add advanced search user guide (DSP-1662) (#470) (30edc96)</li> <li>user-guide: fix navigation links (#468) (49c68f8)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_96","title":"Maintenance","text":"<ul> <li>fix dead links to the documentation (#471) (d7ae022)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#4110-2021-06-22","title":"4.11.0 (2021-06-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_104","title":"Enhancements","text":"<ul> <li>ontology: check if an ontology, a class or a property can be deleted (DSP-1750) (#457) (fb0c275)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_97","title":"Maintenance","text":"<ul> <li>empty landing page instead login (DSP-1756) (#466) (32cd462)</li> <li>gh-ci: update docs deployment (DSP-1741) (#463) (6415152)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_18","title":"Documentation","text":"<ul> <li>refactor documentation and set correct links (#467) (cbeb274)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#4101-2021-06-15","title":"4.10.1 (2021-06-15)","text":""},{"location":"DSP-APP/contribution/release-notes/#documentation_19","title":"Documentation","text":"<ul> <li>fix dead links and replace screenshots in project (#460) (a13b8ba)</li> <li>prepare documentation for docs.dasch.swiss (DSP-1721) (#458) (09259f1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_98","title":"Maintenance","text":"<ul> <li>analytics: add fathom (#462) (f1e0244)</li> <li>cookie-policy: reactivate the cookie policy banner (DSP-1727) (#461) (ac99fbc)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#4100-2021-06-07","title":"4.10.0 (2021-06-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_105","title":"Enhancements","text":"<ul> <li>ontology: new cardinality workflow (DSP-1652) (#455) (f1d049c)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#491-2021-05-26","title":"4.9.1 (2021-05-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_99","title":"Maintenance","text":"<ul> <li>resource: improve list of properties in resource viewer (#453) (49d9b7f)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#490-2021-05-26","title":"4.9.0 (2021-05-26)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_183","title":"Bug Fixes","text":"<ul> <li>disable progress bar if search results are empty (DSP-1575) (#442) (8c67d60)</li> <li>resource: add if condition (DSP-1655) (#448) (656da04)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_20","title":"Documentation","text":"<ul> <li>update documentation about contribution (DSP-1657) (#449) (c25280d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_106","title":"Enhancements","text":"<ul> <li>resource: display region annotations in still images (DSP-1585) (#445) (86e75b9)</li> <li>search: specify linked resource in advanced search (DSP-1661) (#451) (3f0d6d9)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_100","title":"Maintenance","text":"<ul> <li>deps: update packages to resolve security issues (#450) (8e927f7)</li> <li>project: resolve regex term (DSP-1654) (#444) (739beba)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#480-2021-05-21","title":"4.8.0 (2021-05-21)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_101","title":"Maintenance","text":"<ul> <li>CD/CI: automatically detect common vulnerabilities and coding errors (#438) (af02332)</li> <li>compiler: enable strict template (DSP-1403) (#432) (583a338)</li> <li>environment: add test-server config (DSP-1650) (#443) (a56a45b)</li> <li>Replace favicon and term Knora by DSP (DSP-1181 / DSP-1342) (#441) (3b038b6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_107","title":"Enhancements","text":"<ul> <li>ontology: new method to change gui order (DSP-1567/DSP-1646) (#440) (dfd0ce0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#470-2021-05-07","title":"4.7.0 (2021-05-07)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_102","title":"Maintenance","text":"<ul> <li>search results: disable grid view (DSP-1597) (#435) (c4726fe)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_108","title":"Enhancements","text":"<ul> <li>DMP: own resource viewer (DSP-1586) (#434) (35bd7b3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#460-2021-04-27","title":"4.6.0 (2021-04-27)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_109","title":"Enhancements","text":"<ul> <li>DMP: bring back the workspace (#431) (e8b1c8e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#452-2021-04-22","title":"4.5.2 (2021-04-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_184","title":"Bug Fixes","text":"<ul> <li>list: list no longer displays after deletion if it was the only list among lists (#429) (b05484e)</li> <li>project: bug fix in project member management (DSP-1563) (#425) (ac820dd)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_103","title":"Maintenance","text":"<ul> <li>ontology: disable ontology graph view (DSP-1560) (#427) (0a567d2)</li> <li>ontology: disable rti image class (DSP-1559) (#430) (48c3c76)</li> <li>ontology: rename boolean prop type (DSP-1561) (#426) (4dd23d3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#451-2021-04-20","title":"4.5.1 (2021-04-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_185","title":"Bug Fixes","text":"<ul> <li>ontology: bug fix in create ontology process (DSP-1558) (#423) (bbd825b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#450-2021-04-20","title":"4.5.0 (2021-04-20)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_186","title":"Bug Fixes","text":"<ul> <li>users: update session the correct way (DSP-690) (#419) (3ec049e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_110","title":"Enhancements","text":"<ul> <li>project: better error handler in case a project does not exist (DSP-1401) (#421) (d7470a0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#443-2021-04-14","title":"4.4.3 (2021-04-14)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_187","title":"Bug Fixes","text":"<ul> <li>ontology: Bug fix in ontology form (#417) (96dc804)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#442-2021-04-12","title":"4.4.2 (2021-04-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_104","title":"Maintenance","text":"<ul> <li>migrate to angular11: changes (DSP-1471) (#415) (3271ece)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#441-2021-04-08","title":"4.4.1 (2021-04-08)","text":""},{"location":"DSP-APP/contribution/release-notes/#maintenance_105","title":"Maintenance","text":"<ul> <li>migrate to angular10: changes (DSP-1415) (#412) (cec564d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#440-2021-03-23","title":"4.4.0 (2021-03-23)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_188","title":"Bug Fixes","text":"<ul> <li>deps: package dependency build errors (DSP-1400) (#410) (17e0e1a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_106","title":"Maintenance","text":"<ul> <li>list-editor: new list form refactor (DSP-1392) (#403) (8824682)</li> <li>ontology: improve ontology editor design (DSP-1376) (#401) (6de83b8)</li> <li>project landing page: update metadata typings (DSP-1393) (#407) (b4f101b)</li> <li>project metadata page: enable error handler (#411) (a4004ed)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_111","title":"Enhancements","text":"<ul> <li>eslint: migrate tslint to eslint (DSP-1372) (#394) (6ffc3b6)</li> <li>ontology: edit data model info (DSP-1208) (#385) (86a5fb8)</li> <li>ontology: form to create and edit property (DSP-1210) (#406) (91ebb68)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#431-2021-03-03","title":"4.3.1 (2021-03-03)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_189","title":"Bug Fixes","text":"<ul> <li>project: disable error handler in metadata request (DSP-1395) (#404) (86ebfcf)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#430-2021-03-02","title":"4.3.0 (2021-03-02)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_190","title":"Bug Fixes","text":"<ul> <li>ontology: set the cache earlier in case of only one ontology (DSP-1374) (#397) (c23ae61)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_112","title":"Enhancements","text":"<ul> <li>list-editor: insert a child node at a specific position (DSP-1301) (#395) (5107200)</li> <li>ontology: separate list of ontology properties (DSP-1364) (#391) (0f94df6)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_107","title":"Maintenance","text":"<ul> <li>deps: bump three from 0.118.3 to 0.125.0 (#402) (5ab9c49)</li> <li>gh-ci: update release please configuration (DSP-1381) (#399) (040df19)</li> <li>project landing page: use metadata endpoint to get data from backend (DSP-1199) (#400) (5dde42f)</li> <li>tests: script to find ignored tests (#396) (9ca249d)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#421-2021-02-24","title":"4.2.1 (2021-02-24)","text":""},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_191","title":"Bug Fixes","text":"<ul> <li>ontology: bug fix in list property (DSP-1368) (#390) (2fb448e)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#420-2021-02-22","title":"4.2.0 (2021-02-22)","text":""},{"location":"DSP-APP/contribution/release-notes/#enhancements_113","title":"Enhancements","text":"<ul> <li>list-editor: add deletion functionality (DSP-1334) (#378) (34c74a6)</li> <li>list-editor: delete list root node (DSP-1356) (#386) (5d5eabf)</li> <li>list-editor: reposition a child node amongst its siblings (DSP-1340) (#388) (0a9be0e)</li> <li>ontology: default language for property label (#382) (97230d1)</li> <li>ontology: edit res class info (DSP-1209) (#380) (2debd03)</li> <li>ontology: refactor list of properties in resource class (DSP-1360) (#389) (aa565b3)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#410-2021-02-12","title":"4.1.0 (2021-02-12)","text":""},{"location":"DSP-APP/contribution/release-notes/#documentation_21","title":"Documentation","text":"<ul> <li>init mkdocs and move documentation from DSP-DOCS into DSP-APP repo (DSP-380) (#379) (07f5067)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_108","title":"Maintenance","text":"<ul> <li>bumps DSP-JS to 1.3.0 and DSP-UI to 1.2.1 (#374) (7b795ee)</li> <li>deps: bump socket.io from 2.3.0 to 2.4.1 (#367) (8133d87)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_114","title":"Enhancements","text":"<ul> <li>list editor: Adds support for editing lists (DSP-741) (#365) (5b6ee4b)</li> <li>ontology: update cardinality in resource class (DSP-1266) (#377) (5a766c1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#400-2021-01-28","title":"4.0.0 (2021-01-28)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_8","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>set up the login page as a starting page (DSP-1292) (#370)</li> <li>app+main: comment out the search and everything related to resources (DSP-1291) (#371)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_192","title":"Bug Fixes","text":"<ul> <li>dialog: Diaolog box height issue fixed (#358) (15d1182)</li> <li>routing: bring back the route handler in main component (DSP-1303) (#373) (8492c1a)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_109","title":"Maintenance","text":"<ul> <li>update pr template (DSP-1189) (#353) (f348e70)</li> <li>update the dsp-ui and dsp-js versions to the latest (#364) (66931f0)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_115","title":"Enhancements","text":"<ul> <li>display metadata on project landing page (DSP-1065) (#348) (3012ef5)</li> <li>error: Server error handler (DSP-710) (#355) (d5b77bf)</li> <li>new-resource-form: make visible the required prop fields (DSP-1115) (#342) (5885b04)</li> <li>project landing page: add copy to clipboard functionality (DSP-1248) (#368) (17bf71c)</li> <li>select-resource-class: allow accented character (DSP-1241) (#363) (8a2654b)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#refactor","title":"refactor","text":"<ul> <li>app+main: comment out the search and everything related to resources (DSP-1291) (#371) (50b1309)</li> <li>set up the login page as a starting page (DSP-1292) (#370) (46dfdbb)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#300-2020-12-18","title":"3.0.0 (2020-12-18)","text":""},{"location":"DSP-APP/contribution/release-notes/#breaking-changes_9","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>Prepare next big release (#350)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#bug-fixes_193","title":"Bug Fixes","text":"<ul> <li>header: Replace search-panel with fulltext-search (#313) (d234fa7)</li> <li>node_modules: Update dependencies (#318) (f85e4a2)</li> <li>project: Bug fix in project view when not logged-in (#339) (ce5acf1)</li> <li>workspace: Fix broken link (#306) (52b324d)</li> <li>Open external link in new tab (#297) (99f188e)</li> <li>Replaced reset buttons with cancel button (#284) (1481018)</li> <li>Update docker environment (#294) (db6d277)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#documentation_22","title":"Documentation","text":"<ul> <li>Update README (#292) (fa72ee1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#enhancements_116","title":"Enhancements","text":"<ul> <li>Prepare next big release (#350) (6a39180)</li> <li>header: display form link when the session is active (#332) (d609bd5)</li> <li>header+dialog: create button in the header + dialog box (#320) (5e4890d)</li> <li>PR: Add template for PRs (#305) (1468ee1)</li> </ul>"},{"location":"DSP-APP/contribution/release-notes/#maintenance_110","title":"Maintenance","text":"<ul> <li>ci: Update package-name in gh actions workflow (#352) (3d9bb13)</li> <li>Update js- and ui-lib version (#293) (5409d9b)</li> </ul>"},{"location":"DSP-META/","title":"DSP Metadata","text":"<p>The dsp-meta repository contains the code of the DSP Metadata Browser, as well all metadata from projects deposited on the DaSCH Service Platform (DSP).</p>"},{"location":"DSP-META/#metadata-in-dsp","title":"Metadata in DSP","text":"<p>Alongside primary data, DSP contains metadata that conceptually falls into three categories:</p> <ul> <li>Firstly, research projects can generate domain specific metadata themselves    within the bounds of the project's data model,    e.g. descriptions of images, editorial annotations, etc.</li> <li>Secondly, the DSP maintains a set of technical metadata,    which is generated by the system, but may be exposed to users to the extent that is useful.</li> <li>Thirdly, the DSP maintains a set of domain agnostic, descriptive metadata that is shared across all projects.    This metadata is always present and openly accessible - independent of the project's access rights -    to ensure findability and reusability of the data.</li> </ul> <p>It is this third category that is of interest here. </p>"},{"location":"DSP-META/#metadata-on-research-data","title":"Metadata on Research Data","text":"<p>This documentation provides an overview of the metadata model used by the DSP to manage and describe research data in the humanities. Our vision is to fully capture the provenance of research data\u2014detailing its origins, how it was created, and how it has been used over time.</p> <p>Humanities research projects are inherently diverse and often span multiple years or even decades. Many of these projects receive funding from various grants and different funders throughout their lifecycle. Additionally, the researchers involved in creating and reusing the data may change over time, reflecting the evolving nature of academic collaboration.</p> <p>Understanding the complex history of research data is crucial for transparency, reproducibility, and future scholarship. The DSP metadata model is designed to accommodate this complexity by meticulously recording the provenance of data. It tracks:</p> <ul> <li>Funding Sources: Documenting the multiple grants and funders that have supported the project over time.</li> <li>Research Personnel: Keeping a record of all researchers who have contributed to or utilized the data, acknowledging   the shifts in team composition.</li> <li>Data Lifecycle: Outlining how the data was created, modified, and reused, providing a comprehensive view of its   evolution.</li> </ul> <p>By capturing this rich contextual information, we aim to provide a robust framework that supports the integrity and longevity of humanities research data. Whether you are a researcher contributing new data or a scholar exploring existing datasets, this documentation will guide you through our metadata practices and help you understand the stories behind the data.</p>"},{"location":"DSP-META/#consuming-metadata","title":"Consuming Metadata","text":"<p>If you are interested in viewing the metadata in human-readable form, you can visit the DSP Metadata Browser.</p> <p>If you are interested in re-using our metadata, you can find extensive documentation here, and the work-in-progress documentation of our v2 data model here.</p> <p>The metadata itself can be found here or requested over the API as described here.</p>"},{"location":"DSP-META/#adding-metadata","title":"Adding Metadata","text":"<p>For adding metadata, please see here.</p>"},{"location":"DSP-META/#code-documentation","title":"Code Documentation","text":"<p>For documentation on the code of the DSP Metadata Browser, please see here.</p>"},{"location":"DSP-META/code/back-end/","title":"Back-End","text":"<p>The back-end of the DSP Metadata Browser is built with Rust using the Axum web framework.</p>"},{"location":"DSP-META/code/back-end/#architecture","title":"Architecture","text":""},{"location":"DSP-META/code/back-end/#core-components","title":"Core Components","text":"<ul> <li>HTTP Server (<code>src/main-server.rs</code>): Entry point using Axum framework with async Tokio runtime</li> <li>API Router (<code>src/api/router.rs</code>): HTTP routing, CORS, and tracing middleware</li> <li>Domain Layer (<code>src/domain/</code>): Business logic and data access<ul> <li><code>metadata_service.rs</code>: Service layer for metadata operations</li> <li><code>metadata_repository.rs</code>: Data access for JSON metadata files</li> <li><code>model/</code>: Domain models and validation</li> </ul> </li> <li>Handlers (<code>src/api/handler/</code>): HTTP request handlers organized by API version</li> </ul>"},{"location":"DSP-META/code/back-end/#technology-stack","title":"Technology Stack","text":"<ul> <li>Framework: Axum - Ergonomic web framework built on Tokio</li> <li>Runtime: Tokio - Asynchronous runtime</li> <li>Serialization: Serde - JSON serialization/deserialization</li> <li>Validation: Valico - JSON schema validation</li> <li>Tracing: tracing + OpenTelemetry - Observability</li> </ul>"},{"location":"DSP-META/code/back-end/#key-features","title":"Key Features","text":""},{"location":"DSP-META/code/back-end/#metadata-management","title":"Metadata Management","text":"<p>The backend serves project metadata stored as JSON files. Each project is identified by a unique shortcode and validated against JSON schemas defined in <code>resources/</code>.</p>"},{"location":"DSP-META/code/back-end/#api-endpoints","title":"API Endpoints","text":"<ul> <li><code>GET /api/v1/projects</code> - List projects with pagination and filtering</li> <li><code>GET /api/v1/projects/{shortcode}</code> - Get specific project by shortcode</li> <li><code>GET /health</code> - Health check endpoint</li> <li><code>GET /version.txt</code> - Current application version</li> </ul>"},{"location":"DSP-META/code/back-end/#configuration","title":"Configuration","text":"<p>The application is configured via environment variables with the <code>DSP_META_</code> prefix:</p> Variable Description Default <code>DSP_META_DATA_DIR</code> Path to metadata JSON files <code>/data</code> <code>DSP_META_PUBLIC_DIR</code> Path to static frontend files <code>/public</code> <code>DSP_META_BASE_URL</code> Base URL for the service <code>https://meta.dasch.swiss</code> <code>DSP_META_LOG_FILTER</code> Log level filter <code>info</code> <code>DSP_META_LOG_FMT</code> Log format (json/compact) <code>compact</code> <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> OpenTelemetry OTLP endpoint (standard env var) Not set"},{"location":"DSP-META/code/back-end/#observability","title":"Observability","text":"<p>The backend implements comprehensive distributed tracing using OpenTelemetry:</p> <ul> <li>Automatic span creation for HTTP requests and instrumented functions</li> <li>W3C TraceContext propagation from reverse proxies and upstream services</li> <li>Optional OTLP export to observability backends like Grafana Tempo</li> </ul> <p>See Observability &amp; Tracing for detailed documentation on testing and configuring distributed tracing.</p>"},{"location":"DSP-META/code/back-end/#development","title":"Development","text":""},{"location":"DSP-META/code/back-end/#building","title":"Building","text":"<pre><code>just build\n</code></pre>"},{"location":"DSP-META/code/back-end/#running-locally","title":"Running Locally","text":"<pre><code>just serve-dev\n</code></pre>"},{"location":"DSP-META/code/back-end/#testing","title":"Testing","text":"<pre><code>just test\n</code></pre>"},{"location":"DSP-META/code/back-end/#code-quality","title":"Code Quality","text":"<pre><code># Format code\njust fmt\n\n# Run linters\njust check\n</code></pre> <p>Info</p> <p>More documentation will be added progressively.</p>"},{"location":"DSP-META/code/front-end/","title":"Front-End","text":"<p>The front-end of the DSP Metadata Browser is built with Svelte.</p> <p>Info</p> <p>More documentation will be added progressively.</p>"},{"location":"DSP-META/code/observability/","title":"Observability and Tracing","text":"<p>DSP-META implements OpenTelemetry distributed tracing to enable monitoring and debugging of requests across the service infrastructure.</p>"},{"location":"DSP-META/code/observability/#overview","title":"Overview","text":"<p>The backend uses OpenTelemetry with the Rust tracing ecosystem to provide:</p> <ul> <li>Distributed Tracing: Continue traces from reverse proxies and upstream services</li> <li>Automatic Span Creation: HTTP requests and instrumented functions automatically create spans</li> <li>W3C TraceContext: Standard-compliant trace propagation via HTTP headers</li> <li>Flexible Export: Optional OTLP exporter for sending traces to observability backends</li> </ul>"},{"location":"DSP-META/code/observability/#architecture","title":"Architecture","text":"<pre><code>graph LR\n    A[Reverse Proxy] --&gt;|traceparent header| B[TraceLayer]\n    B --&gt; C[Handler Functions]\n    C --&gt; D[OTLP Exporter]\n    D --&gt; E[Tempo/Jaeger/etc]\n    E --&gt; F[Grafana]</code></pre> <p>The trace flow:</p> <ol> <li>TraceLayer (<code>src/api/router.rs</code>) extracts W3C TraceContext from HTTP headers and creates an    <code>http_request</code> span as a child of the extracted context</li> <li>Handler Functions with <code>#[instrument]</code> create child spans automatically</li> <li>OTLP Exporter (optional) sends spans to observability backends</li> <li>Grafana/Tempo visualize the distributed traces</li> </ol> <p>Automatic Fallback</p> <p>When no <code>traceparent</code> header is present (e.g., local development), new root spans are created automatically.</p>"},{"location":"DSP-META/code/observability/#configuration","title":"Configuration","text":""},{"location":"DSP-META/code/observability/#environment-variables","title":"Environment Variables","text":"Variable Description Default Example <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> OTLP endpoint URL for exporting traces (standard OpenTelemetry env var) Not set (local only) <code>http://localhost:4317</code> <code>DSP_META_LOG_FILTER</code> Log level filter <code>info</code> <code>debug</code> <code>DSP_META_LOG_FMT</code> Log output format <code>compact</code> <code>json</code>"},{"location":"DSP-META/code/observability/#local-development-no-export","title":"Local Development (No Export)","text":"<p>By default, traces are only logged locally:</p> <pre><code>just serve-dev\n</code></pre>"},{"location":"DSP-META/code/observability/#local-development-with-grafana","title":"Local Development with Grafana","text":"<p>Export traces to a local Grafana + Tempo stack:</p> <pre><code>OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317 just serve-dev\n</code></pre>"},{"location":"DSP-META/code/observability/#production","title":"Production","text":"<p>In production, configure the OTLP endpoint to send traces to your observability backend:</p> <pre><code>OTEL_EXPORTER_OTLP_ENDPOINT=https://tempo.yourcompany.com:4317\nDSP_META_LOG_FILTER=info\nDSP_META_LOG_FMT=json\n</code></pre>"},{"location":"DSP-META/code/observability/#testing-locally-with-grafana","title":"Testing Locally with Grafana","text":""},{"location":"DSP-META/code/observability/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose</li> <li>The DSP-META repository</li> </ul>"},{"location":"DSP-META/code/observability/#quick-start-recommended","title":"Quick Start (Recommended)","text":"<p>The easiest way to test with observability is using the dedicated <code>just</code> targets:</p> One CommandWith Hot ReloadManual Control <p>Start both the observability stack and the application:</p> <pre><code>just serve-with-observability\n</code></pre> <p>This will: 1. Start Grafana LGTM stack (all-in-one observability container) 2. Start dsp-meta with OTLP exporter enabled 3. Display URLs for accessing the services</p> <p>For development with automatic reloading on code changes:</p> <pre><code>just serve-dev-with-observability\n</code></pre> <p>Start services independently:</p> <pre><code># Start observability stack\njust observability-up\n\n# In another terminal, start your app\njust serve-dev\n\n# When done, stop observability stack\njust observability-down\n</code></pre> <p>After running any of these commands, the observability stack will be available:</p> <pre><code>Observability stack:\n  - Grafana: http://localhost:3001\n  - OTLP gRPC endpoint: http://localhost:4317\n  - OTLP HTTP endpoint: http://localhost:4318\n</code></pre>"},{"location":"DSP-META/code/observability/#manual-setup-alternative","title":"Manual Setup (Alternative)","text":"<p>If you prefer manual control:</p>"},{"location":"DSP-META/code/observability/#step-1-start-observability-stack","title":"Step 1: Start Observability Stack","text":"<p>Start the Grafana LGTM all-in-one observability stack:</p> <pre><code>docker-compose -f docker-compose.observability.yml up -d\n</code></pre> <p>This starts a single container with:</p> <ul> <li>Grafana on port 3001</li> <li>Tempo (traces backend)</li> <li>Loki (logs backend)</li> <li>Mimir/Prometheus (metrics backend)</li> <li>Pyroscope (profiling backend)</li> <li>OTLP gRPC endpoint on port 4317</li> <li>OTLP HTTP endpoint on port 4318</li> </ul>"},{"location":"DSP-META/code/observability/#step-2-start-application-with-exporter","title":"Step 2: Start Application with Exporter","text":"<p>Run the application with the OTLP endpoint configured:</p> Using justUsing cargo <pre><code>OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317 \\\nDSP_META_LOG_FILTER=info \\\njust serve-dev\n</code></pre> <pre><code>cargo build\nOTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317 \\\n./target/debug/dsp-meta\n</code></pre> <p>You should see the log message: <code>OTLP exporter configured successfully</code></p>"},{"location":"DSP-META/code/observability/#step-3-generate-traces","title":"Step 3: Generate Traces","text":"<p>Generate some traces by making HTTP requests:</p> New Root SpanContinue TraceMultiple Requests <p>Make a request without trace context (creates new root span):</p> <pre><code>curl http://localhost:3000/api/v1/projects/0001\n</code></pre> <p>Make a request with trace context (continues existing trace):</p> <pre><code>curl -H \"traceparent: 00-aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa-bbbbbbbbbbbbbbbb-01\" \\\n     http://localhost:3000/api/v1/projects/0001\n</code></pre> <p>Generate multiple traces:</p> <pre><code>for i in {1..10}; do\n  curl http://localhost:3000/api/v1/projects/0001\n  sleep 0.5\ndone\n</code></pre>"},{"location":"DSP-META/code/observability/#step-4-view-traces-in-grafana","title":"Step 4: View Traces in Grafana","text":"<ol> <li>Open Grafana at http://localhost:3001</li> <li>Click Explore (compass icon in the left sidebar)</li> <li>Select Tempo from the datasource dropdown</li> <li>Select Search query type</li> <li>Filter by Service Name: <code>dsp-meta</code></li> <li>Click Run query</li> <li>Click any trace to see the full span waterfall visualization</li> </ol>"},{"location":"DSP-META/code/observability/#what-youll-see","title":"What You'll See","text":"<p>In the Grafana trace view:</p> <ul> <li>Trace ID: Unique identifier for the distributed trace</li> <li>Root Span (<code>http_request</code>): Created by TraceLayer for each HTTP request</li> <li>Child Spans: Functions annotated with <code>#[instrument]</code></li> <li>Duration: Time taken by each span</li> <li>Attributes: HTTP method, URI, status code, latency, etc.</li> </ul> <p>Verifying Trace Propagation</p> <p>When you send a request with a <code>traceparent</code> header, the Trace ID in Grafana should match the ID you sent. This confirms that trace context propagation is working correctly.</p>"},{"location":"DSP-META/code/observability/#span-propagation","title":"Span Propagation","text":""},{"location":"DSP-META/code/observability/#w3c-tracecontext-format","title":"W3C TraceContext Format","text":"<p>The <code>traceparent</code> header follows the W3C TraceContext standard:</p> <pre><code>traceparent: 00-{trace-id}-{parent-span-id}-{trace-flags}\n</code></pre> <p>Example:</p> <pre><code>traceparent: 00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01\n</code></pre> <ul> <li><code>00</code>: Version</li> <li><code>0af7651916cd43dd8448eb211c80319c</code>: 32-character hex trace ID</li> <li><code>b7ad6b7169203331</code>: 16-character hex parent span ID</li> <li><code>01</code>: Trace flags (sampled)</li> </ul>"},{"location":"DSP-META/code/observability/#testing-propagation","title":"Testing Propagation","text":"<p>Test that your application correctly continues traces:</p> <pre><code># Generate unique trace and span IDs\nTRACE_ID=$(openssl rand -hex 16)\nSPAN_ID=$(openssl rand -hex 8)\n\n# Send request with that trace context\ncurl -v \\\n  -H \"traceparent: 00-${TRACE_ID}-${SPAN_ID}-01\" \\\n  http://localhost:3000/api/v1/projects/0001\n\n# Search for this trace ID in Grafana\necho \"Search Grafana for trace ID: ${TRACE_ID}\"\n</code></pre> <p>In Grafana, you should find a trace with that exact Trace ID, proving the application continued the distributed trace.</p>"},{"location":"DSP-META/code/observability/#adding-custom-span-attributes","title":"Adding Custom Span Attributes","text":"<p>You can enrich spans with custom attributes in your handler functions:</p> <pre><code>use tracing::{Span, instrument};\n\n#[instrument]\npub async fn my_handler() {\n    let span = Span::current();\n\n    // Add custom attributes\n    span.record(\"user_id\", \"12345\");\n    span.record(\"cache_hit\", true);\n    span.record(\"query_duration_ms\", 42);\n\n    // These attributes will appear in the trace view\n}\n</code></pre> <p>These custom attributes will be visible in Grafana and can be used for filtering and analysis.</p>"},{"location":"DSP-META/code/observability/#troubleshooting","title":"Troubleshooting","text":""},{"location":"DSP-META/code/observability/#no-traces-appearing-in-grafana","title":"No traces appearing in Grafana","text":"Check observability stack is running <pre><code>docker ps | grep otel-lgtm\n</code></pre> <p>You should see a container named <code>otel-lgtm</code> running.</p> Check application is exporting traces <p>Look for this log message when starting the application: <pre><code>Configuring OTLP exporter with endpoint: http://localhost:4317\n</code></pre></p> <p>If not present, verify the <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> environment variable is set.</p> Check LGTM container logs <pre><code>docker logs dsp-meta-otel-lgtm-1\n</code></pre> <p>Look for any errors receiving or processing spans.</p>"},{"location":"DSP-META/code/observability/#connection-errors-to-tempo","title":"Connection errors to Tempo","text":"<p>If you see connection errors, try using Docker's host networking:</p> <pre><code>OTEL_EXPORTER_OTLP_ENDPOINT=http://host.docker.internal:4317 just serve-dev\n</code></pre>"},{"location":"DSP-META/code/observability/#traces-appear-but-are-incomplete","title":"Traces appear but are incomplete","text":"<p>Ensure all handler functions use the <code>#[instrument]</code> attribute:</p> <pre><code>#[instrument(skip(state))]\npub async fn get_by_shortcode(\n    Path(shortcode): Path&lt;Shortcode&gt;,\n    State(state): State&lt;Arc&lt;AppState&gt;&gt;,\n) -&gt; Result&lt;Response, DspMetaError&gt; {\n    // handler code\n}\n</code></pre> <p>The <code>skip</code> parameter prevents large objects from being logged.</p>"},{"location":"DSP-META/code/observability/#production-considerations","title":"Production Considerations","text":""},{"location":"DSP-META/code/observability/#reverse-proxy-configuration","title":"Reverse Proxy Configuration","text":"<p>In production, your reverse proxy should inject trace context headers. Example nginx configuration:</p> <pre><code>location / {\n    # Generate trace context if not present\n    set $trace_id $request_id;\n    proxy_set_header traceparent \"00-$trace_id-0000000000000000-01\";\n\n    proxy_pass http://dsp-meta:3000;\n}\n</code></pre>"},{"location":"DSP-META/code/observability/#sampling","title":"Sampling","text":"<p>For high-traffic services, consider configuring sampling to reduce trace volume:</p> <pre><code>// In main-server.rs, configure sampler\nuse opentelemetry_sdk::trace::Sampler;\n\nlet tracer_provider = TracerProvider::builder()\n    .with_config(\n        Config::default()\n            .with_resource(resource)\n            .with_sampler(Sampler::TraceIdRatioBased(0.1)) // Sample 10% of traces\n    )\n    .build();\n</code></pre>"},{"location":"DSP-META/code/observability/#security","title":"Security","text":"<p>Endpoint Security</p> <p>Ensure the OTLP endpoint is secured with authentication when exposing to production networks. The current implementation sends traces without authentication.</p>"},{"location":"DSP-META/code/observability/#available-just-commands","title":"Available Just Commands","text":"<p>The following <code>just</code> commands are available for managing observability:</p> Command Description <code>just observability-up</code> Start Grafana LGTM observability stack <code>just observability-down</code> Stop observability stack <code>just observability-clean</code> Stop stack and remove volumes (deletes all stored data) <code>just serve-with-observability</code> Start observability stack and run dsp-meta <code>just serve-dev-with-observability</code> Start stack and run dsp-meta with hot reload"},{"location":"DSP-META/code/observability/#cleanup","title":"Cleanup","text":"<p>Stop and remove the observability stack:</p> Using justUsing docker-compose <pre><code># Stop containers\njust observability-down\n\n# Remove volumes (deletes stored traces)\njust observability-clean\n</code></pre> <pre><code># Stop containers\ndocker-compose -f docker-compose.observability.yml down\n\n# Remove volumes (deletes stored traces)\ndocker-compose -f docker-compose.observability.yml down -v\n</code></pre>"},{"location":"DSP-META/code/observability/#further-reading","title":"Further Reading","text":"<ul> <li>OpenTelemetry Documentation</li> <li>Rust Tracing Documentation</li> <li>W3C TraceContext Specification</li> <li>Grafana Tempo Documentation</li> </ul>"},{"location":"DSP-META/code/overview/","title":"Overview","text":"<p>The front-end of the DSP Metadata Browser is built with Svelte.</p> <p>The back-end is built with Rust.</p> <p>Info</p> <p>More documentation will be added progressively.</p>"},{"location":"DSP-META/data/adding-metadata/","title":"Adding Metadata","text":"<p>To add metadata to the DSP-META repository, simply add the metadata JSON file to the folder <code>data/json/</code> in the repository.</p> <p>The JSON file must conform to the schema of the metadata:</p> <ul> <li>If the project is marked as \"Ongoing\", use the draft schema, found in <code>resources/schema-metadata-draft.json</code>.   This schema is less strict and allows for incomplete metadata.</li> <li>If the project is marked as \"Finished\", use the final schema, found in <code>resources/schema-metadata-final.json</code>.   This schema is strict and requires all fields to be filled out.</li> </ul> <p>Once the data is added, open a pull request to the repository.  The PR name must conform to the conventional commit format, using the prefix <code>data</code>. E.g. <code>data: Add metadata for project XYZ</code>.</p> <p>To deploy the newly added metadata to the DSP Metadata Browser, a new release must be created and deployed to the server.</p>"},{"location":"DSP-META/data/api/","title":"API Documentation","text":"<p>The pubic API of the DSP Metadata Browser can be accessed under <code>https://meta.dasch.swiss/api</code>.</p>"},{"location":"DSP-META/data/api/#endpoints","title":"Endpoints","text":"<p>Get all projects with paging: <code>GET /v1/projects</code> The optional query params <code>_limit</code> (default value <code>100</code>) and <code>_page</code> (default value <code>1</code>) allow you to define the page. The response contains the <code>x-total-count</code> header with the total amount of projects.</p> <p>Get a project by ID: <code>GET /v1/projects/{shortcode}</code></p> <p>Info</p> <p>In the future, OpenAPI documentation may be provided.</p>"},{"location":"DSP-META/data/v1-datamodel/","title":"Data Model v1","text":"<p>All metadata are modelled according to the model as described in the following.</p> <p>There are two schemas for metadata: <code>draft</code> and <code>final</code>.  Final describes the metadata as they should be in the end,  draft has fewer constraints, in case the metadata is not yet complete.  Any metadata of a project that is marked as <code>Finished</code> must use the final schema, metadata of a projects that are marked as <code>Ongoing</code> may use the draft schema.</p> <p>The two schemas can be found here.</p> <p>The following description is based on the final schema.</p>"},{"location":"DSP-META/data/v1-datamodel/#top-level","title":"Top Level","text":"<p>A set of metadata consists of the following top-level elements:</p> <ul> <li>Project</li> <li>Dataset</li> <li>Person</li> <li>Organization</li> <li>Grant</li> </ul> <p>Each of these elements is an entity identified by a unique identifier.  Other elements can refer to these entities by their identifier.</p> <p>Any other metadata element may itself be a complex object, but it is always part of one of the top-level elements. Such elements do not have an identifier,  but are identified by their position in the hierarchy.</p> Field Type Cardinality <code>$schema</code> string 0-1 <code>project</code> project 1 <code>datasets</code> dataset[] 1-n <code>persons</code> person[] 0-n <code>organizations</code> organization[] 0-n <code>grants</code> grant[] 0-n"},{"location":"DSP-META/data/v1-datamodel/#types","title":"Types","text":""},{"location":"DSP-META/data/v1-datamodel/#entity-types","title":"Entity Types","text":""},{"location":"DSP-META/data/v1-datamodel/#project","title":"Project","text":"Field Type Cardinality Restrictions <code>__type</code> string 1 Literal \"Project\" <code>shortcode</code> string 1 4 char hexadecimal <code>status</code> string 1 Literal \"Ongoing\" or \"Finished\" <code>name</code> string 1 <code>description</code> lang_string 1 <code>startDate</code> date 1 String of format \"YYYY-MM-DD\" <code>teaserText</code> string 1 <code>url</code> url 1 <code>howToCite</code> string 1 <code>datasets</code> id[] 1-n String containing the identifier of a dataset <code>keywords</code> lang_string[] 1-n <code>disciplines</code> lang_string|url[] 1-n <code>temporalCoverage</code> lang_string|url[] 1-n <code>spatialCoverage</code> url[] 1-n <code>funders</code> id[] 1-n String containing the identifier of a person or organization <code>endDate</code> date 0-1 String of format \"YYYY-MM-DD\" <code>secondaryURL</code> url 0-1 <code>dataManagementPlan</code> dmp 0-1 <code>contactPoint</code> id 0-1 String containing the identifier of a person or organization <code>publications</code> publication[] 0-n <code>grants</code> id[] 0-n String containing the identifier of a grant <code>alternativeNames</code> lang_string[] 0-n"},{"location":"DSP-META/data/v1-datamodel/#dataset","title":"Dataset","text":"Field Type Cardinality Restrictions <code>__id</code> string 1 <code>__type</code> string 1 Literal \"Dataset\" <code>title</code> string 1 <code>accessConditions</code> string 1 Literal \"open\", \"restricted\" or \"closed\" <code>howToCite</code> string 1 <code>status</code> string 1 Literal \"In Planning\", \"Ongoing\", \"On hold\", \"Finished\" <code>abstract</code> lang_string|url 1-n <code>typeOfData</code> string[] 1-n Literal \"XML\", \"Text\", \"Image\", \"Video\", \"Audio\" <code>licenses</code> license[] 1-n <code>languages</code> lang_string[] 1-n <code>attributions</code> attribution[] 1-n <code>datePublished</code> date 0-1 <code>dateCreated</code> date 0-1 <code>dateModified</code> date 0-1 <code>distribution</code> url 0-1 <code>alternativeTitles</code> lang_string[] 0-n <code>urls</code> url[] 0-n <code>additional</code> lang_string|url 0-n"},{"location":"DSP-META/data/v1-datamodel/#person","title":"Person","text":"Field Type Cardinality Restrictions <code>__id</code> string 1 <code>__type</code> string 1 Literal 'Person' <code>givenNames</code> string[] 1-n <code>familyNames</code> string[] 1-n <code>jobTitles</code> string[] 0-n <code>affiliations</code> id[] 0-n Organization IDs <code>address</code> address 0-1 <code>email</code> string 0-1 <code>secondaryEmail</code> string 0-1 <code>authorityRefs</code> url[] 0-n References to external authority files"},{"location":"DSP-META/data/v1-datamodel/#organization","title":"Organization","text":"Field Type Cardinality Restrictions <code>__id</code> string 1 <code>__type</code> string 1 Literal 'Organization' <code>name</code> string 1 <code>url</code> url 1 <code>address</code> address 0-1 <code>email</code> string 0-1 <code>alternativeName</code> lang_string 0-1 <code>authorityRefs</code> url[] 0-n References to external authority files"},{"location":"DSP-META/data/v1-datamodel/#grant","title":"Grant","text":"Field Type Cardinality Restrictions <code>__id</code> string 1 <code>__type</code> string 1 Literal 'Grant' <code>funders</code> id[] 1-n Person or Organization IDs <code>number</code> string 0-1 <code>name</code> string 0-1 <code>url</code> url 0-1"},{"location":"DSP-META/data/v1-datamodel/#value-types","title":"Value Types","text":""},{"location":"DSP-META/data/v1-datamodel/#string-with-language-tag-lang_string","title":"String with Language Tag (<code>lang_string</code>)","text":"<p>Object with an ISO language code as key and a string as value.</p> <pre><code>{\n    \"en\": \"Lorem ipsum in English.\",\n    \"de\": \"Lorem ipsum auf Deutsch.\"\n}\n</code></pre>"},{"location":"DSP-META/data/v1-datamodel/#date","title":"Date","text":"<p>String with the format <code>YYYY-MM-DD</code>.</p>"},{"location":"DSP-META/data/v1-datamodel/#url","title":"URL","text":"<p>An object representing a URL.  Depending on the <code>type</code> field, the URL may be a generic URL or a more specific link, like a PID or a reference to a resource in an external authority file.</p> Field Type Cardinality Restrictions <code>__type</code> string 1 Literal 'URL' <code>type</code> string 1 Literal 'URL', 'Geonames', 'Pleiades', 'Skos', 'Periodo', 'Chronontology', 'GND', 'VIAF', 'Grid', 'ORCID', 'Creative Commons', 'DOI', 'ARK' <code>url</code> string 1 <code>text</code> string 0-1"},{"location":"DSP-META/data/v1-datamodel/#data-management-plan-dmp","title":"Data Management Plan (<code>dmp</code>)","text":"Field Type Cardinality Restrictions <code>__type</code> string 1 Literal 'DataManagementPlan' `available boolean 0-1 <code>url</code> url 0-1"},{"location":"DSP-META/data/v1-datamodel/#publication","title":"Publication","text":"Field Type Cardinality Restrictions <code>text</code> string 1 <code>url</code> url 0-1"},{"location":"DSP-META/data/v1-datamodel/#address","title":"Address","text":"Field Type Cardinality Restrictions <code>__type</code> string 1 Literal 'Address' <code>street</code> string 1 <code>postalCode</code> string 1 <code>locality</code> string 1 <code>country</code> string 1 <code>canton</code> string 0-1 <code>additional</code> string 0-1"},{"location":"DSP-META/data/v1-datamodel/#license","title":"License","text":"Field Type Cardinality Restrictions <code>__type</code> string 1 Literal 'License' <code>license</code> url 1 <code>date</code> date 1 <code>details</code> string 0-1"},{"location":"DSP-META/data/v1-datamodel/#attribution","title":"Attribution","text":"Field Type Cardinality Restrictions <code>__type</code> string 1 Literal 'Attribution' <code>agent</code> string 1 <code>roles</code> string 1-n"},{"location":"DSP-META/data/v1-datamodel/#entity-relationship-diagram","title":"Entity-Relationship Diagram","text":"<pre><code>erDiagram\n    project ||--|{ dataset : datasets\n    project ||--|| person : contactPoint\n    project ||--|| organization : contactPoint\n    project ||--|{ person : funders\n    project ||--|{ organization : funders\n    project ||--|{ grant : grants\n    person ||--|{ organization : affiliations\n    grant ||--|{ organization : funders\n    grant ||--|{ person : funders\n\n    project {\n        string __type \"1; Literal 'Project'\"\n        string shortcode \"1\"\n        string status \"1; Literal 'Ongoing' or 'Finished'\"\n        string name \"1\"\n        lang_string description \"1\"\n        date startDate \"1\"\n        string teaserText \"1\"\n        url url \"1\"\n        string howToCite \"1\"\n        id[] datasets \"1-n; Dataset IDs\"\n        lang_string[] keywords \"1-n\"\n        lang_string_or_url[] disciplines \"1-n\"\n        lang_string_or_url[] temporalCoverage \"1-n\"\n        url[] spatialCoverage \"1-n\"\n        id[] funders \"1-n; Person or Organization IDs\"\n        date endDate \"0-1\"\n        url secondaryURL \"0-1\"\n        dmp dataManagementPlan \"0-1\"\n        id contactPoint \"0-1\"\n        publication[] publications \"0-n\"\n        id[] grants \"0-n\"\n        lang_string[] alternativeNames \"0-n\"\n    }\n\n    dataset {\n        string __id \"1\"\n        string __type \"1; Literal 'Dataset'\"\n        string title \"1\"\n        string accessConditions \"1; Literal 'open', 'restricted' or 'closed'\"\n        string howToCite \"1\"\n        string status \"1; Literal 'In Planning', 'Ongoing', 'On hold', 'Finished'\"\n        lang_string_or_url[] abstract \"1-n\"\n        string[] typeOfData \"1-n; Literal 'XML', 'Text', 'Image', 'Video', 'Audio'\"\n        license[] licenses \"1-n\"\n        lang_string[] languages \"1-n\"\n        attribution[] attributions \"1-n\"\n        date datePublished \"0-1\"\n        date dateCreated \"0-1\"\n        date dateModified \"0-1\"\n        url distribution \"0-1\"\n        lang_string[] alternativeTitles \"0-n\"\n        url[] urls \"0-n\"\n        lang_string_or_url[] additional \"0-n\"\n    }\n\n    person {\n        string __id \"1\"\n        string __type \"1; Literal 'Person'\"\n        string[] givenNames \"1-n\"\n        string[] familyNames \"1-n\"\n        string[] jobTitles \"0-n\"\n        id[] affiliations \"0-n; Organization IDs\"\n        address address \"0-1\"\n        string email \"0-1\"\n        string secondaryEmail \"0-1\"\n        url[] authorityRefs \"0-n\"\n    }\n\n    organization {\n        string __id \"1\"\n        string __type \"1; Literal 'Organization'\"\n        string name \"1\"\n        url url \"1\"\n        address address \"0-1\"\n        string email \"0-1\"\n        lang_string alternativeName \"0-1\"\n        url[] authorityRefs \"0-n\"\n    }\n\n    grant {\n        string __id \"1\"\n        string __type \"1; Literal 'Grant'\"\n        id[] funders \"1-n; Person or Organization IDs\"\n        string number \"0-1\"\n        string name \"0-1\"\n        url url \"0-1\"\n    }</code></pre>"},{"location":"DSP-META/data/v1-datamodel/#legacy-docs","title":"Legacy docs","text":"<p>The legacy documentation can be found here. This includes thoughts on mappings to external aggregators  and on RDF representation of the metadata.</p>"},{"location":"DSP-META/data/v2-datamodel/","title":"Data Model v2","text":"<p>Warning</p> <p>This document describes the v2 metadata model, which is not yet implemented. It is a working document for planned upcoming changes from v1 to v2.</p> <p>Note</p> <p>This model is an idealized version of the metadata model. With the current implementation that is entirely separate from the DSP, it is not feasible to implement metadata on the record level. Such a system will be implemented in the archive in the future, but for now, we will keep the metadata on the dataset level.</p> <p>The enhancements to the DSP metadata model are designed to better accommodate the inherent complexity of humanities projects, while still being flexible enough to support simpler project structures.</p> <p>One of the key improvements is the introduction of an additional hierarchical level above the research project, which we refer to as a project cluster. This allows for a more accurate representation of overarching initiatives that span multiple research projects over extended periods of time. Additionally, we have implemented collections to facilitate  more precise referencing and organization of different parts of the data, enabling projects  to retain and represent historical or otherwise relevant groupings of data. Collections  replace the previous dataset concept while providing more flexibility for cross-project  organization and nesting.</p> <p>By expanding our metadata model in this way, we aim to provide a more robust framework that supports the integrity and longevity of humanities research data. This evolution reflects our commitment to capturing the rich, nuanced histories of research projects with greater accuracy and detail.</p> <p>Note</p> <p>For each property, two cardinalities are given:</p> <ul> <li>The archival cardinality, referring to the cardinality of the property  once the entity is finished/finalized for archival.  </li> <li>The in-progress cardinality, referring to the cardinality of the property while the entity is still in progress.</li> </ul> <p>If only one cardinality is given, it applies to both stages.</p>"},{"location":"DSP-META/data/v2-datamodel/#licensing","title":"Licensing","text":"<p>We consider all metadata as public domain. By signing the deposit agreement, projects must consent to that. This is unlike the domain metadata which is part of the project's data and hence can be licensed as the project wishes.</p> <p>Whenever metadata is served to a client, it is served with legal information. Legal information on metadata, just as everywhere else, consists of the license, copyright holder and authorship. The license is always \"public domain\", the copyright holder is always \"DaSCH\"  and the authorship is always the project and DaSCH.</p> <p>Metadata is always publicly available, even if the corresponding project, collection or record is not. This is to ensure that the metadata is always findable and reusable, even if the data itself is not. The only exception to this is the status \"embargoed\", during which the metadata is only available on the project level.</p>"},{"location":"DSP-META/data/v2-datamodel/#model-overview","title":"Model Overview","text":"<p>The metadata model is a hierarchical structure of metadata elements.</p> <pre><code>\nflowchart TD\n    projectCluster[Project Cluster]\n    project[Research Project]\n    record[Record]\n    collection[Collection]\n\n    projectCluster --&gt;|0-n| project\n    projectCluster --&gt;|0-n| collection\n\n    project --&gt;|0-n| collection\n    project --&gt;|1-n| record\n    collection --&gt; |0-n| record\n    collection --&gt; |0-n| collection</code></pre> <ul> <li>A <code>Project Cluster</code> collects <code>Research Projects</code> or nested <code>Project Clusters</code>.   It is typically of institutional nature,   not directly tied to a specific funding grant,   and may be long-lived.   Examples are EKWS/CAS, BEOL or LHTT.</li> <li>A <code>Research Project</code> is the main entity of the metadata model.   It corresponds to a <code>project</code> in the DSP.   It is typically tied to a specific funding grant,   and hence has a limited lifetime of ~3-5 years;   multiple funding rounds and a longer lifetime are possible.   A <code>Research Project</code> is part of 0-n <code>Project Clusters</code> and contains both <code>Collections</code> and <code>Records</code>.   All records in the project must be listed in the project's records array, regardless of collection membership.</li> <li>A <code>Collection</code> is a flexible grouping of <code>Records</code>    that can span multiple projects or be nested within other collections.   Collections serve to enable cross-project data organization and support subsetting and specialized access patterns.   Collections may contain both individual records and other nested collections.</li> <li>A <code>Record</code> is a single entry within a project.   It represents the smallest unit that can meaningfully have an identifier.   It maps to a <code>knora-base:Resource</code> (DSP-API) or an <code>Asset</code> (SIPI/Ingest) in the DSP.   In the case of DSP Resources, the metadata of the record is the existence of the resource itself   as well as information such as the label, access rights, and provenance.   The core data of the resource are the values on that resource.   In the case of assets, the metadata is the existence of the asset itself, as well as access rights.   The core data is the binary information of the asset.   A <code>Record</code> is part of exactly 1 <code>Research Project</code> and may be part of 0-n <code>Collections</code>.</li> </ul> <p>Additionally, there are the entities <code>Person</code> and <code>Organization</code>: <code>Person</code> and <code>Organization</code> are entities that are independent of the <code>Research Project</code> hierarchy, and may be related to various entities within the hierarchy.</p>"},{"location":"DSP-META/data/v2-datamodel/#entity-types","title":"Entity Types","text":""},{"location":"DSP-META/data/v2-datamodel/#project-cluster","title":"Project Cluster","text":"Field Type Card. <code>id</code> internal_id 1 <code>pid</code> string 1 <code>name</code> string 1 <code>projects</code> internal_id[] 0-n <code>projectClusters</code> internal_id[] 0-n <code>collections</code> internal_id[] 0-n <code>description</code> lang_string 0-1 <code>url</code> url 0-1 <code>howToCite</code> string 0-1 <code>alternativeNames</code> lang_string[] 0-n <code>contactPoint</code> internal_id[] 0-n <code>documentationMaterial</code> url[] 0-n <ul> <li><code>id</code>: A unique identifier for the project cluster.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the project cluster.</li> <li><code>name</code>: The name of the project cluster.</li> <li><code>projects</code>: A list of project identifiers that are part of the project cluster.</li> <li><code>projectClusters</code>: A list of project cluster identifiers that are part of the project cluster,   in case of nested project clusters.</li> <li><code>description</code>: The description of the project cluster.</li> <li><code>url</code>: The URL to the web presence of the project cluster.</li> <li><code>howToCite</code>: How to cite the project cluster.   If not provided, we use the standard form <code>&lt;name&gt; (&lt;year&gt;). [Project Cluster]. DaSCH. &lt;ARK&gt;</code>.</li> <li><code>alternativeNames</code>: Alternative names of the project cluster.</li> <li><code>contactPoint</code>: A list of identifiers of persons or organizations responsible for the project cluster.</li> <li><code>documentationMaterial</code>: A list of URLs pointing to documentation material related to the project cluster.</li> </ul> <p>To make the model of this entity as flexible as possible, most of the fields are optional. There is no difference in cardinality between the archival and in-progress stages.</p>"},{"location":"DSP-META/data/v2-datamodel/#project","title":"Project","text":"Field Type Card. WIP Card. <code>id</code> internal_id 1 1 <code>pid</code> string 1 1 <code>shortcode</code> string 1 1 <code>officialName</code> string 1 1 <code>status</code> string 1 1 <code>name</code> string 1 1 <code>shortDescription</code> string 1 0-1 <code>description</code> lang_string 1 1 <code>startDate</code> date 1 0-1 <code>endDate</code> date 1 0-1 <code>dataPublicationYear</code> date 1 0-1 <code>url</code> url 1-2 0-2 <code>howToCite</code> string 1 1 <code>accessRights</code> accessRights 1 1 <code>legalInfo</code> legalInfo[] 1-n 0-n <code>dataManagementPlan</code> string / url 1 1 <code>typeOfData</code> string[] 1-n 0-n <code>dataLanguage</code> lang_string[] 1-n 0-n <code>collections</code> internal_id[] 0-n 0-n <code>records</code> internal_id[] 0-n 0-n <code>keywords</code> lang_string[] 1-n 0-n <code>disciplines</code> lang_string / authorityfileReference[] 1-n 0-n <code>temporalCoverage</code> lang_string / authorityfileReference[] 1-n 0-n <code>spatialCoverage</code> authorityfileReference[] 1-n 0-n <code>attributions</code> attribution[] 1-n 0-n <code>abstract</code> lang_string 0-1 0-1 <code>contactPoint</code> internal_id[] 0-n 0-n <code>publications</code> publication[] 0-n 0-n <code>funding</code> string / grant[] 1-n 0-n <code>alternativeNames</code> lang_string[] 0-n 0-n <code>documentationMaterial</code> url[] 0-n 0-n <code>provenance</code> string 0-1 0-1 <code>additionalMaterial</code> url[] 0-n 0-n <ul> <li><code>id</code>: A unique identifier for the project.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the project.</li> <li><code>shortcode</code>: The project's DSP short code, internal only.   4 characters hexadecimal, upper case.  </li> <li><code>status</code>: The status of the project.   Either \"Ongoing\" or \"Finished\".</li> <li><code>name</code>: The name of the project.</li> <li><code>shortDescription</code>: A short text to be displayed as a teaser.   Maximum length: 200 characters (all including).</li> <li><code>description</code>: The full description of the project.</li> <li><code>startDate</code>: The start date of the project.</li> <li><code>endData</code>: The end date of the project.</li> <li><code>dataPublicationYear</code>: The year when the data is published.   This is normally the year when the project is finished and the data is moved to the archive.   If the project is under embargo, this will be the year when the embargo is lifted.   For projects that were published while in the VRE, a specific publication year may be set.</li> <li><code>url</code>: The URL to the web presence of the project.   The first URL should point to where the data is available,   the second, optional URL may point to the project website.</li> <li><code>howToCite</code>: How to cite the project.   If not provided, we use the standard form <code>&lt;contributors&gt; (&lt;year&gt;). &lt;project name&gt; [Database]. DaSCH. &lt;ARK&gt;</code>.</li> <li><code>accessRights</code>: The access rights of the project.   Literal \"Full Open Access\", \"Open Access with Restrictions\", \"Embargoed Access\", \"Metadata only Access\".   If the project is embargoed, the metadata is only available on the project level.   Access rights define to what extent the project data is available to access in the DPE.</li> <li><code>legalInfo</code>: Legal information about the project.   Calculated from Records. Can not be specified explicitly on the project.</li> <li><code>dataManagementPlan</code>: A data management plan of the project.   String or URL, use \"not accessible\" if not available to us.</li> <li><code>typeOfData</code>: The type of data in the project.   Computed from the records if available and optionally added manually.   Literal \"XML\", \"Text\", \"Image\", \"Video\", \"Audio\".</li> <li><code>dataLanguage</code>: A list of languages contained in the project.   Computed from the records if available and optionally added manually.</li> <li><code>collections</code>: A list of collection identifiers that optionally group project data.</li> <li><code>records</code>: A list of record identifiers that make up the project data.   This is the canonical list of ALL records in the project.</li> <li><code>keywords</code>: A list of keywords describing the project.</li> <li><code>disciplines</code>: A list of disciplines the project is related to.</li> <li><code>temporalCoverage</code>: A list of epoches or time periods the project is related to.</li> <li><code>spatialCoverage</code>: A list of references to spatial entities (Places, Regions, etc.) the project is related to.</li> <li><code>attributions</code>: A list of attributions defining what roles people/organizations have in the project.   Manually entered, as there may be people who don't have authorship, like reviewers, organizers, etc.</li> <li><code>abstract</code>: An abstract of the project.</li> <li><code>contactPoint</code>: A list of identifiers of persons or organizations responsible for the project.</li> <li><code>publications</code>: A list of publications related to the project.</li> <li><code>funding</code>: Either a string (\"No funding\") or a list of grants received by the project.</li> <li><code>alternativeNames</code>: Alternative names of the project.</li> <li><code>documentationMaterial</code>: A list of URLs pointing to documentation material related to the project.</li> <li><code>provenance</code>: the history of the project, if applicable.</li> <li><code>additionalMaterial</code>: A list of URLs related to the project.</li> </ul> <p>Note</p> <p>In the metadata, the project has references to all its records in the <code>records</code> array. This is the canonical list - all records must be listed here, regardless of collection membership.</p>"},{"location":"DSP-META/data/v2-datamodel/#collection","title":"Collection","text":"Field Type Card. WIP-Card <code>id</code> internal_id 1 1 <code>pid</code> string 1 1 <code>name</code> string 1 1 <code>accessRights</code> accessRights 1 1 <code>legalInfo</code> legalInfo[] 1-n 1-n <code>howToCite</code> string 1 1 <code>description</code> lang_string 0-1 0-1 <code>typeOfData</code> string[] 1-n 0-n <code>dateCreated</code> date 1 0-1 <code>dateModified</code> date 0-1 0-1 <code>records</code> internal_id[] 0-n 0-n <code>collections</code> internal_id[] 0-n 0-n <code>languages</code> lang_string[] 1-n 0-n <code>additionalMaterial</code> url[] 0-n 0-n <code>provenance</code> string 0-1 0-1 <code>keywords</code> lang_string[] 0-n 0-n <code>documentationMaterial</code> url[] 0-n 0-n <ul> <li><code>id</code>: A unique identifier for the collection.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the collection.</li> <li><code>name</code>: The name of the collection.</li> <li><code>accessRights</code>: The access rights of the collection.   Literal \"Full Open Access\", \"Open Access with Restrictions\", \"Embargoed Access\", \"Metadata only Access\".   Access rights define to what extent the collection data is available to access in the DPE.</li> <li><code>legalInfo</code>: Legal information about the collection.   Calculated from records/sub-collections. May be added manually.</li> <li><code>howToCite</code>: How to cite the collection.   If not provided, we use the standard form <code>&lt;contributors&gt; (&lt;year&gt;). &lt;collection name&gt; [Collection]. DaSCH. &lt;ARK&gt;</code>.</li> <li><code>description</code>: The description of the collection.</li> <li><code>typeOfData</code>: The type of data in the collection.   Computed from the records if available and optionally added manually.   Literal \"XML\", \"Text\", \"Image\", \"Video\", \"Audio\".</li> <li><code>dateCreated</code>: The date when the collection was created.</li> <li><code>dateModified</code>: The date when the collection was last modified.</li> <li><code>records</code>: A list of record identifiers that make up the collection.</li> <li><code>collections</code>: A list of nested collection identifiers for hierarchical collections.</li> <li><code>languages</code>: A list of languages contained in the collection.   Computed from the records if available and optionally added manually.</li> <li><code>additionalMaterial</code>: A list of URLs related to the collection.</li> <li><code>provenance</code>: The history of the collection, if applicable.</li> <li><code>keywords</code>: Keywords for search purposes.</li> <li><code>documentationMaterial</code>: A list of URLs pointing to documentation material related to the collection.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#record","title":"Record","text":"Field Type Card. WIP-Card. <code>id</code> internal_id 1 1 <code>pid</code> string 1 1 <code>label</code> lang_string 1 1 <code>accessRights</code> string 1 1 <code>legalInfo</code> legalInfo 1 1 <code>howToCite</code> string 1 1 <code>publisher</code> string 1 1 <code>source</code> string 0-1 0-1 <code>description</code> lang_string 0-1 0-1 <code>dateCreated</code> date 0-1 0-1 <code>dateModified</code> date 0-1 0-1 <code>datePublished</code> date 0-1 0-1 <code>typeOfData</code> string 0-1 0-1 <code>size</code> string 0-1 0-1 <code>keywords</code> lang_string[] 0-n 0-n <ul> <li><code>id</code>: A unique identifier for the record.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the record.</li> <li><code>label</code>: The label of the record.   For assets, this may be the original file name.   For IIIF URLs, this may be good to have for the case when the URL is no longer available.   In the long run, we would want to have IIIF Manifests, not Image URLs, so that we can extract labels from there.</li> <li><code>accessRights</code>: The access rights of the record.   Literal \"Full Open Access\", \"Open Access with Restrictions\", \"Embargoed Access\", \"Metadata only Access\".   Access rights define to what extent the record data is available to access in the DPE.</li> <li><code>legalInfo</code>: Legal information about the record.</li> <li><code>howToCite</code>: How to cite the record.   If not provided, we use the standard form <code>&lt;label&gt; (&lt;creation year&gt;). [Data Record]. DaSCH. &lt;ARK&gt;</code>.</li> <li><code>publisher</code>: The publisher of the record.   Literal \"DaSCH\". Required for OpenAIRE compliance.</li> <li><code>source</code>: The provenance of the record.   Recommended for openAIRE:   Only use if the record is a digitization of a non-digital source,   in which case this property should identify the original source.</li> <li><code>description</code>: The description of the record.   If the project does not want descriptions to be public domain and always open, it must not use this property,   but instead create a custom property for it.</li> <li><code>dateCreated</code></li> <li><code>dateModified</code></li> <li><code>datePublished</code>: the date when the record was made publicly available.   This is normally the date when the record is moved to the archive.   If the record is under embargo, this will be the date when the embargo is lifted.</li> <li><code>typeOfData</code>: The type of data in the record.   Literal \"XML\", \"Text\", \"Image\", \"Video\", \"Audio\".</li> <li><code>size</code>: The size of the record. openAIRE Size</li> <li><code>keywords</code>: keywords for search purposes.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#person","title":"Person","text":"Field Type Card. <code>id</code> internal_id 1 <code>pid</code> string 1 <code>sameAs</code> authorityfileReference[] 0-n <code>givenNames</code> string[] 1-n <code>familyNames</code> string[] 1-n <code>honoraryPrefix</code> string[] 0-n <code>honorarySuffix</code> string[] 0-n <code>affiliations</code> internal_id[] 0-n <code>email</code> string 0-n <code>address</code> address 0-1 <p>Cardinality is the same for both stages.</p> <ul> <li><code>id</code>: A unique identifier for the person.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the person.</li> <li><code>sameAs</code>: References to external authority files. (ORCID, VIAF, GND\u2026)</li> <li><code>givenNames</code>: The given names of the person.</li> <li><code>familyNames</code>: The family names of the person.</li> <li><code>honoraryPrefix</code>: The honorary prefixes of the person, e.g. \"Prof. Dr.\".</li> <li><code>honorarySuffix</code>: The honorary suffixes of the person, e.g. \"PhD\", \"MA\".</li> <li><code>affiliations</code>: A list of identifiers referencing the affiliations of the person to organizations.</li> <li><code>email</code>: The email address of the person.</li> <li><code>address</code>: The post address of the person.   This should not be the personal address, but the specific address of the person at theyr organization.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#organization","title":"Organization","text":"Field Type Card. <code>id</code> internal_id 1 <code>pid</code> string 1 <code>sameAs</code> authorityfileReference[] 0-n <code>name</code> string 1 <code>url</code> url 1 <code>address</code> address 0-1 <code>email</code> string 0-1 <code>alternativeName</code> lang_string 0-1 <p>Cardinality is the same for both stages.</p> <ul> <li><code>id</code>: A unique identifier for the organization.   This is the internal ID, which is not exposed to the user and is not persistent.</li> <li><code>pid</code>: A unique persistent identifier (for now ARK URL) for the organization.</li> <li><code>sameAs</code>: References to external authority files. (ROR)</li> <li><code>name</code>: The name of the organization.</li> <li><code>url</code>: The URL of the organization.</li> <li><code>address</code>: The address of the organization.</li> <li><code>email</code>: The email address of the organization.</li> <li><code>alternativeName</code>: Alternative names of the organization.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#value-types","title":"Value Types","text":""},{"location":"DSP-META/data/v2-datamodel/#string-with-language-tag-lang_string","title":"String with Language Tag (<code>lang_string</code>)","text":"<p>Object with an ISO language code as key and a string as value.</p> <pre><code>{\n  \"en\": \"Lorem ipsum in English.\",\n  \"de\": \"Lorem ipsum auf Deutsch.\"\n}\n</code></pre> <p>This means that for a single lang_string value, there can be multiple translations.</p>"},{"location":"DSP-META/data/v2-datamodel/#authority-file-reference","title":"Authority File Reference","text":"<p>An object representing a reference to an external authority file.</p> Field Type Card. <code>type</code> string 1 <code>url</code> url 1 <code>text</code> string 0-1 <ul> <li><code>type</code>: The type of the Authority File Reference.   Literal 'Geonames', 'Pleiades', 'Skos', 'Periodo', 'Chronontology', 'GND', 'VIAF', 'Grid', 'ORCID',   'Creative Commons', 'COAR'   This is used to determine the semantics of the URL.</li> <li><code>url</code>: The URL itself.</li> <li><code>text</code>: A human-readable text for display.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#pid","title":"PID","text":"<p>A persistent identifier. May be an ARK or a DOI.</p> Field Type Card. <code>url</code> url 1 <code>text</code> string 0-1"},{"location":"DSP-META/data/v2-datamodel/#publication","title":"Publication","text":"Field Type Card. <code>text</code> string 1 <code>pid</code> pid 0-1 <ul> <li><code>text</code>: The text of the publication.</li> <li><code>pid</code>: A URL to the publication, if e.g. a DOI is available.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#address","title":"Address","text":"Field Type Card. <code>street</code> string 1 <code>postalCode</code> string 1 <code>locality</code> string 1 <code>country</code> string 1 <code>canton</code> string 0-1 <code>additional</code> string 0-1 <ul> <li><code>street</code>: The street of the address.</li> <li><code>postalCode</code>: The postal code of the address.</li> <li><code>locality</code>: The locality of the address.</li> <li><code>country</code>: The country of the address.</li> <li><code>canton</code>: The canton of the address.</li> <li><code>additional</code>: Additional information about the address, if needed.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#grant","title":"Grant","text":"Field Type Cardinality Restrictions <code>funders</code> internal_id[] 1-n Person or Organization IDs <code>number</code> string 0-1 <code>name</code> string 0-1 <code>url</code> url 0-1"},{"location":"DSP-META/data/v2-datamodel/#legal-info","title":"Legal Info","text":"Field Type Card. WIP Card. <code>license</code> license 1 1 <code>copyrightHolder</code> string 1 1 <code>authorship</code> string[] 1-n 1-n"},{"location":"DSP-META/data/v2-datamodel/#license","title":"License","text":"Field Type Card. WIP Card. <code>licenseIdentifier</code> string 1 1 <code>licenseDate</code> date 1 1 <code>licenseURI</code> url 1 1"},{"location":"DSP-META/data/v2-datamodel/#attribution","title":"Attribution","text":"<p>Modelled according to the OpenAIRE guidelines.</p> Field Type Card. <code>contributor</code> internal_id 1 <code>contributorType</code> string 1-n"},{"location":"DSP-META/data/v2-datamodel/#access-rights","title":"Access Rights","text":"Field Type Card. <code>accessRights</code> authorityfileReference::COAR 1 <code>embargoDate</code> date 0-1 <ul> <li><code>accessRights</code>: The access rights of the record.   Literal \"Full Open Access\", \"Open Access with Restrictions\", \"Embargoed Access\", \"Metadata only Access\".</li> <li><code>embargoDate</code>: The date when the embargo ends.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#internal-id","title":"Internal ID","text":"<p>An internal ID (<code>internal_id</code>) is a unique identifier for an entity within the system. It is not intentionally exposed to the user, and will be presented as a string.</p>"},{"location":"DSP-META/data/v2-datamodel/#openaire-mapping","title":"OpenAIRE Mapping","text":"<p>Our metadata model includes mappings to the OpenAIRE Guidelines for Data Archives,  which are based on the DataCite Metadata Schema. Currently, only Projects are exposed as OpenAIRE Datasets.</p>"},{"location":"DSP-META/data/v2-datamodel/#openaire-fields","title":"OpenAIRE Fields","text":"<p>The OpenAIRE Guidelines specify 18 fields with the following cardinalities:</p> <ul> <li>M = Mandatory</li> <li>R = Recommended  </li> <li>MA = Mandatory if Applicable</li> <li> <p>O = Optional</p> </li> <li> <p>Identifier (M)</p> </li> <li>Creator (M) </li> <li>Title (M)</li> <li>Publisher (M)</li> <li>PublicationYear (M)</li> <li>Subject (R)</li> <li>Contributor (MA/O)</li> <li>Date (M)</li> <li>Language (R)</li> <li>ResourceType (R)</li> <li>AlternateIdentifier (O)</li> <li>RelatedIdentifier (MA)</li> <li>Size (O)</li> <li>Format (O)</li> <li>Version (O)</li> <li>Rights (MA)</li> <li>Description (MA)</li> <li>GeoLocation (O)</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#project-openaire-dataset-mapping","title":"Project \u2192 OpenAIRE Dataset Mapping","text":"Project Field OpenAIRE Field Mapping Notes <code>pid</code> Identifier (M) Direct mapping <code>attributions</code> (TBD roles) Creator (M) Which roles count as creators? <code>name</code> Title (M) Direct mapping Fixed \"DaSCH\" Publisher (M) Static value TBD date field PublicationYear (M) startDate or endDate year? Project-specific <code>keywords</code> Subject (R) Direct mapping <code>attributions</code> (non-creator roles) Contributor (MA/O) Remaining attributions <code>startDate</code>, <code>endDate</code> Date (M) Multiple dates Computed from records Language (R) Aggregated from project records Fixed \"Dataset\" ResourceType (R) Static value for projects <code>shortcode</code> AlternateIdentifier (O) DSP shortcode as alternate ID <code>collections</code> refs RelatedIdentifier (MA) Collection relationships Computed from records Size (O) Aggregated from project records Computed from records Format (O) Aggregated typeOfData from records Not applicable Version (O) Projects don't have versions <code>legalInfo</code> Rights (MA) Direct mapping <code>description</code> Description (MA) Direct mapping <code>spatialCoverage</code> GeoLocation (O) Direct mapping"},{"location":"DSP-META/data/v2-datamodel/#open-questions","title":"Open Questions","text":"<ol> <li>PublicationYear mapping: Projects have startDate/endDate, but OpenAIRE expects PublicationYear.     This may differ project to project - needs case-by-case decision.</li> <li>Creator mapping: Which attribution roles should map to OpenAIRE Creator vs Contributor?     May be more than just \"author\" roles that count as creators.</li> <li>Future consideration: Should Collections also be exposed as OpenAIRE Datasets in addition to Projects?</li> <li>Of the properties we formerly had on Dataset, should we add the following to Project?</li> <li><code>typeOfData</code></li> <li><code>languages</code></li> <li><code>provenance</code></li> <li>something like publication date (which may not be the same as project start or end date)</li> </ol>"},{"location":"DSP-META/data/v2-datamodel/#later","title":"Later","text":"<ul> <li>Provenance:<ul> <li>https://www.w3.org/TR/vocab-dcat-3</li> <li>https://www.w3.org/TR/prov-o/</li> <li>track provenance of dataset etc. through time (even before entered)</li> <li>could also track version history in the archive (predecessor)</li> </ul> </li> <li>Model Person and Organization in a re-useable fashion. This should include making stuff like   affiliation time/project bound</li> <li>Alongside keywords, we could also have categories. Where keywords are free text, categories are from a controlled vocabulary.</li> <li>Model attribution in terms of DataCite contribution types.</li> <li>Model TypeOfData in terms of DataCite's resource types.</li> </ul>"},{"location":"DSP-META/data/v2-datamodel/#json-schema","title":"JSON Schema","text":"<p>a draft of the data model as JSON Schema is on github</p>"},{"location":"DSP-META/data/v2-datamodel/#examples","title":"Examples","text":""},{"location":"DSP-META/data/v2-datamodel/#project-cluster_1","title":"Project Cluster","text":"<pre><code>{\n  \"accessRights\": {\n    \"license\": {\n      \"licenseIdentifier\": \"public domain\",\n      \"licenseDate\": \"2023-01-01\",\n      \"licenseURI\": \"https://www.dasch.swiss/licenses/public-domain\"\n    },\n    \"copyrightHolder\": \"DaSCH\",\n    \"authorship\": [\n        \"DaSCH\",\n        \"Project Cluster XYZ\"\n      ]\n  },\n  \"metadata\": {\n    \"id\": \"cluster-0001\",\n    \"pid\": \"https://ark.dasch.swiss/ark:/72163/1/cluster-0001\",\n    \"name\": \"Project Cluster Name\",\n    \"projects\": [\"project-0001\", \"project-0002\"],\n    \"projectClusters\": [\"cluster-0002\"],\n    \"description\": {\n      \"en\": \"Project Cluster Description\",\n      \"de\": \"Projektcluster Beschreibung\"\n    },\n    \"url\": \"https://example.com/project-cluster\",\n    \"howToCite\": \"Project Cluster Name (2025). [Project Cluster]. DaSCH. https://ark.dasch.swiss/ark:/72163/1/cluster-0001\",\n    \"alternativeNames\": [\n      {\n        \"en\": \"Alternative Name\",\n        \"de\": \"Alternativer Name\"\n      }\n    ],\n    \"contactPoint\": [\"person-0001\", \"organization-0001\"],\n    \"documentationMaterial\": [\"https://example.com/documentation\"]\n  }\n}\n</code></pre>"},{"location":"DSP-META/data/v2-datamodel/#project_1","title":"Project","text":"<pre><code>{\n  \"accessRights\": {\n    \"license\": {\n      \"licenseIdentifier\": \"public domain\",\n      \"licenseDate\": \"2023-01-01\",\n      \"licenseURI\": \"https://www.dasch.swiss/licenses/public-domain\"\n    },\n    \"copyrightHolder\": \"DaSCH\",\n    \"authorship\": [\n        \"DaSCH\",\n        \"Project XYZ\"\n      ]\n  },\n  \"metadata\": {\n    \"id\": \"project-0001\",\n    \"pid\": \"https://ark.dasch.swiss/ark:/72163/1/project-0001\",\n    \"shortcode\": \"1234\",\n    \"officialName\": \"Project Official Name\",\n    \"status\": \"Ongoing\",\n    \"name\": \"Project Name\",\n    \"shortDescription\": \"Short description of the project.\",\n    \"description\": {\n      \"en\": \"Project Description\",\n      \"de\": \"Projektbeschreibung\"\n    },\n    \"startDate\": \"2023-01-01\",\n    \"endDate\": \"2028-01-01\",\n    \"url\": [\n      \"https://data.dasch.swiss/projects/project-0001\",\n      \"https://example.com/project-website\"\n    ],\n    \"howToCite\": \"Project Name (2025). [Project]. DaSCH. https://ark.dasch.swiss/ark:/72163/1/project-0001\",\n    \"accessRights\": \"Full Open Access\",\n    \"legalInfo\": [\n      {\n        \"license\": {\n          \"licenseIdentifier\": \"CC-BY-4.0\",\n          \"licenseDate\": \"2023-01-01\",\n          \"licenseURI\": \"https://creativecommons.org/licenses/by/4.0/\"\n        }\n      }\n    ],\n    \"dataManagementPlan\": \"https://example.com/dmp\",\n    \"collections\": [\"collection-0001\", \"collection-0002\"],\n    \"records\": [\"record-0001\", \"record-0002\"],\n    \"keywords\": [\n      {\n        \"en\": \"Keyword 1\",\n        \"de\": \"Stichwort 1\"\n      }\n    ],\n    \"disciplines\": [\n      {\n        \"en\": \"Discipline 1\",\n        \"de\": \"Disziplin 1\"\n      }\n    ],\n    \"temporalCoverage\": [\n      {\n        \"en\": \"Temporal Coverage 1\",\n        \"de\": \"Zeitliche Abdeckung 1\"\n      }\n    ],\n    \"spatialCoverage\": [\n      {\n        \"type\": \"Geonames\",\n        \"url\": \"https://www.geonames.org/1234567\",\n        \"text\": {\n          \"en\": \"Spatial Coverage 1\",\n          \"de\": \"R\u00e4umliche Abdeckung 1\"\n        }\n      }\n    ],\n    \"attributions\": [\n      {\n        \"contributor\": \"person-0001\",\n        \"contributorType\": [\"author\", \"editor\"]\n      }\n    ],\n    \"abstract\": {\n      \"en\": \"Project Abstract\",\n      \"de\": \"Projektzusammenfassung\"\n    },\n    \"contactPoint\": [\"person-0001\", \"organization-0001\"],\n    \"publications\": [\n      {\n        \"text\": \"Publication Title\",\n        \"pid\": \"https://doi.org/10.1234/5678\"\n      }\n    ],\n    \"funding\": [\n      {\n        \"funders\": [\"organization-0001\"],\n        \"number\": \"123456\",\n        \"name\": \"Grant Name\",\n        \"url\": \"https://example.com/grant\"\n      }\n    ],\n    \"alternativeNames\": [\n      {\n        \"en\": \"Alternative Name\",\n        \"de\": \"Alternativer Name\"\n      }\n    ],\n    \"documentationMaterial\": [\"https://example.com/documentation\"]\n  }\n}\n</code></pre>"},{"location":"DSP-META/data/v2-datamodel/#collection_1","title":"Collection","text":"<pre><code>{\n  \"accessRights\": {\n    \"license\": {\n      \"licenseIdentifier\": \"public domain\",\n      \"licenseDate\": \"2023-01-01\",\n      \"licenseURI\": \"https://www.dasch.swiss/licenses/public-domain\"\n    },\n    \"copyrightHolder\": \"DaSCH\",\n    \"authorship\": [\n        \"DaSCH\",\n        \"Project XYZ\"\n      ]\n  },\n  \"metadata\": {\n    \"id\": \"collection-0001\",\n    \"pid\": \"https://ark.dasch.swiss/ark:/72163/1/collection-0001\",\n    \"name\": \"Collection Name\",\n    \"accessRights\": \"Full Open Access\",\n    \"legalInfo\": [\n      {\n        \"license\": {\n          \"licenseIdentifier\": \"CC-BY-4.0\",\n          \"licenseDate\": \"2023-01-01\",\n          \"licenseURI\": \"https://creativecommons.org/licenses/by/4.0/\"\n        }\n      }\n    ],\n    \"howToCite\": \"Collection Name (2025). [Collection]. DaSCH. https://ark.dasch.swiss/ark:/72163/1/collection-0001\",\n    \"description\": {\n      \"en\": \"Collection Description\",\n      \"de\": \"Sammlungsbeschreibung\"\n    },\n    \"typeOfData\": [\"XML\", \"Text\"],\n    \"dateCreated\": \"2023-01-01\",\n    \"dateModified\": \"2023-01-02\",\n    \"records\": [\"record-0001\", \"record-0002\"],\n    \"collections\": [\"collection-0002\"],\n    \"languages\": [\n      {\n        \"en\": \"English\",\n        \"de\": \"Deutsch\"\n      }\n    ],\n    \"additionalMaterial\": [\"https://example.com/additional-material\"],\n    \"provenance\": \"Collection provenance information.\",\n    \"keywords\": [\n      {\n        \"en\": \"Keyword 1\",\n        \"de\": \"Stichwort 1\"\n      }\n    ],\n    \"documentationMaterial\": [\"https://example.com/documentation\"]\n  }\n}\n</code></pre>"},{"location":"DSP-TOOLS/","title":"Overview","text":""},{"location":"DSP-TOOLS/#dsp-tools-documentation","title":"DSP-TOOLS Documentation","text":""},{"location":"DSP-TOOLS/#installing-dsp-tools","title":"Installing <code>dsp-tools</code>","text":"<p>To install the latest version, run:</p> <pre><code>pip3 install dsp-tools\n</code></pre> <p>To update to the latest version run:</p> <pre><code>pip3 install --upgrade dsp-tools\n</code></pre> <p>\ud83d\udea8 If your Python version is older than ours, pip will silently install an outdated version of DSP-TOOLS. DSP-TOOLS requires one of these Python versions:   The most recent version of DSP-TOOLS is  </p> <p>The <code>dsp-tools</code> package provides you with functionalities in the command line  to interact with the DSP-API, both remote and locally. Additionally, it contains the <code>xmllib</code> which helps you construct the XML file required for a mass upload.</p>"},{"location":"DSP-TOOLS/#where-to-start","title":"Where To Start?","text":"<p><code>dsp-tools</code> provides you with the following core functionalities.</p> <ul> <li>Running a Local Stack: If you want to run your own DSP stack locally, take a look here.</li> <li>Data Modelling: There are several ways to create a data model with <code>dsp-tools</code><ul> <li>Take a look at the technical specification for the JSON file.</li> <li>Or take a look at our tool to convert Excel files into the JSON format.</li> <li>You can create a data model on the DSP-APP. To re-use that data model on another server    you can use the CLI command described here.</li> </ul> </li> <li>Data for Mass-Upload:<ul> <li>If you want to create the XML file required for a mass-upload onto DSP, take a look at the <code>xmllib</code>.</li> <li>You can find an in-depth explanation of our XML file format here.   Please note, that we recommend to use the <code>xmllib</code> library to create the file    as we will ensure interoperability between the DSP-API requirements and your input.</li> <li>If you want to validate and upload your XML file take a look here.   Please note, that only DaSCH employees are permitted to upload data on a production server.</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/changelog/","title":"Changelog","text":""},{"location":"DSP-TOOLS/changelog/#1850-2026-01-07","title":"18.5.0 (2026-01-07)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements","title":"Enhancements","text":"<ul> <li>validate-data: add check to warn against potential circle in data with mandatory properties (RDU-147) (#2123) (b2681d9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>xmllib: find_dates_in_string(): make checks consistent if start date &lt; end date (RDU-146) (#2120) (a845a48)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance","title":"Maintenance","text":"<ul> <li>create: change permissions parsing (#2111) (c1e90df)</li> <li>create: check for mandatory link cardinalities with knora-api as object constraints (DEV-5761) (#2134) (b535e7d)</li> <li>create: create CLAUDE.md (#2128) (ddd7b3a)</li> <li>create: remove redundant duplicate list node name check (#2130) (fd149c8)</li> <li>create: search for circular inheritance (DEV-5754) (#2135) (89b656a)</li> <li>create: use <code>ParsedCardinality</code> for circular checks (#2119) (6571cd3)</li> <li>create: use <code>ParsedOntology</code> to check if references exist (#2110) (db86ea9)</li> <li>create: use <code>ParsedProject</code> for further validation (#2118) (522bed6)</li> <li>create: validate if permissions overrule are correct (#2127) (8b250c1)</li> <li>deps: bump deps and move dotenv handling into function (#2116) (0384f95)</li> <li>ensure backwards-compatibility with Python 3.12 (RDU-148) (#2126) (31558b9)</li> <li>nightly python version check: run only essential linters (#2132) (7cf4cd6)</li> <li>python version testing needs secret (#2136) (e870b62)</li> <li>readme: describe Claude Code setup (RDU-143) (#2125) (2ec011d)</li> <li>start-stack: bump versions to 2026.01.01 (#2141) (b252c75)</li> <li>unpin python version (#2122) (f5fd6f3)</li> <li>update CLAUDE.md files (RDU-143) (#2124) (47b4470)</li> <li>validate-data: reorganise top-level validation code flow (#2131) (76571d2)</li> <li>xmlupload: collect all missing multimedia files before raising an error (#2115) (f4170ae)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation","title":"Documentation","text":"<ul> <li>fix outdated links in xmllib docstrings (#2129) (01e6897)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1840-2025-12-11","title":"18.4.0 (2025-12-11)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_1","title":"Enhancements","text":"<ul> <li>CLI: print dsp-tools verion info (DEV-5697) (#2112) (aec2c1e)</li> <li>create: add flag <code>--exit-if-exists</code> to gracefully stop <code>create</code> if the project exists (DEV-5696) (#2113) (cdad15a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_1","title":"Bug Fixes","text":"<ul> <li>set upper bound of 3.14.0 for python (RDU-144) (#2102) (9a06cab)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_1","title":"Maintenance","text":"<ul> <li>add standard logging to BulkIngestClient (#2093) (744c81a)</li> <li>create: aggregate identified problems instead of raising errors (#2104) (b5d925a)</li> <li>create: change parsing and validation code structure (#2107) (db50f78)</li> <li>create: change pattern to handle the result of the project parsing (#2108) (b5a19d4)</li> <li>create: modularise json validation functions (#2099) (5c9853e)</li> <li>create: remove union path or parsed option from functions (#2098) (51b3398)</li> <li>create: reorganise directory structure (#2092) (6207a05)</li> <li>create: use <code>ParsedOntology</code> for duplicate IRI check (#2109) (d48d1e6)</li> <li>deps: bump the all-dependencies group across 1 directory with 14 updates (#2103) (84af80d)</li> <li>deps: replace abandoned dotenv, specify version constraints for libraries &lt;1.0 (#2101) (e354551)</li> <li>move all RDF prefixes into constants file (#2096) (7105381)</li> <li>move vulture to other linters (#2106) (52ba272)</li> <li>start-stack: bump versions to 2025.12.02 (#2114) (3ed3728)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1830-2025-12-03","title":"18.3.0 (2025-12-03)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_2","title":"Enhancements","text":"<ul> <li>update legal info in XML to new format (DEV-4838) (#1680) (8c3ba81)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_2","title":"Maintenance","text":"<ul> <li>create: add code to create properties on server (#2072) (78b4115)</li> <li>create: add create new ontology route to client (#2085) (b6b5514)</li> <li>create: add post project route to client (#2088) (a2f59f9)</li> <li>create: create code to make project on server (#2089) (785ac50)</li> <li>create: create ontologies on server (#2086) (a04641e)</li> <li>create: integrate code to create project (DEV-5511) (#2090) (21637ba)</li> <li>create: integrate new classes route into command (#2080) (0dc0af5)</li> <li>create: integrate new property creation into command (#2073) (ec82cb1)</li> <li>create: integrate ontology creation into command (DEV-5509) (#2087) (d28dfac)</li> <li>create: make create classes on server (#2079) (eea7158)</li> <li>create: make create new classes route (#2078) (2261217)</li> <li>create: parse and serialise classes (#2074) (958e392)</li> <li>start-stack: bump versions to 2025-12-01 (#2091) (0ffad4f)</li> <li>xmlupload: inform user when SHACL validation starts (#2083) (bf4ebdd)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1821-2025-11-26","title":"18.2.1 (2025-11-26)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_3","title":"Maintenance","text":"<ul> <li>create: serialise property for request (#2069) (a5dcd89)</li> <li>start-stack: bump versions to 2025.11.03 (#2075) (fb4038d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1820-2025-11-21","title":"18.2.0 (2025-11-21)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_3","title":"Enhancements","text":"<ul> <li>xmlupload: disallow whitespaces in restype and property name in XSD schema (DEV-5589) (#2050) (f97b8b1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_2","title":"Bug Fixes","text":"<ul> <li>find <code>.env</code> file also when using <code>uv</code> (RDU-133) (#2066) (c7d35c1)</li> <li>start-stack: app doesn't load due to missing faro settings (#2044) (ed7fc1d)</li> <li>start-stack: handle <code>ConnectionError</code> during the CLI call (DEV-5608) (#2051) (2961978)</li> <li>xmllib: ensure that all empty values are removed before serialisation (DEV-5578) (#2046) (a64b142)</li> <li>xmlupload: add upper limit to IIIF-URI validation (DEV-5628) (#2065) (a08cd63)</li> <li>xmlupload: don't check docker in case of --skip-validation (DEV-5609) (#2053) (5094906)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_4","title":"Maintenance","text":"<ul> <li>clients: handle non-ok request status codes and exceptions consistently (#2034) (9055200)</li> <li>consolidate code paths in XSD validation (DEV-5593) (#2048) (f9b75d8)</li> <li>create: add code to create all users (#2057) (62f8c50)</li> <li>create: add create property route to <code>OntologyCreateClient</code> (#2063) (383aa2e)</li> <li>create: add groups client (#2045) (26af604)</li> <li>create: create <code>UserClient</code> (#2056) (b7e29e1)</li> <li>create: implement detailed parsing and serialisation of users and groups (#2043) (ef9b17c)</li> <li>create: integrate new code for user creation (DEV-5512) (#2058) (78b4e04)</li> <li>create: integrate new groups creation (DEV-5513) (#2054) (009a2e0)</li> <li>create: parse properties (#2061) (c3afc14)</li> <li>create: reorganise user problems (#2062) (6ee9755)</li> <li>deps: bump the all-dependencies group across 1 directory with 9 updates (#2047) (23c3d3d)</li> <li>start-stack: bump versions to 2025.11.02 (#2068) (be29843)</li> <li>use 401 vs 403 response codes correctly in all clients (DEV-5615) (#2059) (30c83b3)</li> <li>use support@dasch.swiss when printing errors (DEV-5590) (#2060) (be1209c)</li> <li>validate username in json schema (#2029) (3a50e8c)</li> <li>xmlupload: remove redundant <code>ProjectClient</code> (#2038) (c5cdbf8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_1","title":"Documentation","text":"<ul> <li>link to daschland-scripts instead of deprecated repos (RDU-136) (#2067) (3d74760)</li> <li>validate: adapt wording (DEV-5596) (#2052) (419686d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1810-2025-11-05","title":"18.1.0 (2025-11-05)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_4","title":"Enhancements","text":"<ul> <li>xmllib: add \"Rightsstatements: No Copyright - Non-Commercial Use Only\" License (DEV-5562) (#2036) (183c323)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_3","title":"Bug Fixes","text":"<ul> <li>xmllib: do not crash if resource id or type are <code>NaN</code> values (DEV-5569) (#2035) (acb684a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_5","title":"Maintenance","text":"<ul> <li>CLI: rename <code>--id2iri-file</code> flag (DEV-5497) (#2030) (c30d561)</li> <li>cli: use check_input_dependencies() consistently (#2028) (019f562)</li> <li>create: make request exception handling consistent (#2032) (b4609af)</li> <li>start-stack: bump versions to 2025.11.01 (#2037) (4902243)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1800-2025-10-30","title":"18.0.0 (2025-10-30)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>excel2json: remove gui-attributes that do not have an effect in the APP (DEV-5482) (#1985)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_5","title":"Enhancements","text":"<ul> <li>CLI: check if provided filepaths or directories exist before call (DEV-5536) (#2013) (b06ccfd)</li> <li>create: allow default user passwords through an .env file (DEV-5496) (#1995) (f42da0c)</li> <li>create: disallow properties that reference a class from another project (DEV-5449) (#1992) (125cd2c)</li> <li>excel2json: allow null values for user passwords (DEV-5495) (#1996) (3a3bbfc)</li> <li>excel2json: remove gui-attributes that do not have an effect in the APP (DEV-5482) (#1985) (dc69b79)</li> <li>improve error message when local stack is not running (DEV-5526) (#2001) (5457073)</li> <li>integrate id2iri replacement functionality in <code>xmlupload</code> and <code>validate-data</code> (DEV-5201) (#1982) (4dbee13)</li> <li>validate-data: create metadata client (DEV-5528) (#2009) (ac7b813)</li> <li>validate-data: handle IRI validation check based on successful metadata request (DEV-5529) (#2017) (26cf470)</li> <li>validate-data: resources in DB are included as checks for link targets (DEV-5527) (#2012) (47e96dc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_4","title":"Bug Fixes","text":"<ul> <li>create: better error message if default_permissions is missing in the JSON file (DEV-5479) (#1991) (d7866cb)</li> <li>create: cardinality check used <code>https</code> in ontology IRI should be <code>http</code> (DEV-5541) (#2016) (16242e3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_6","title":"Maintenance","text":"<ul> <li>CLI: clean up call actions (DEV-5527) (#2019) (f18c2a9)</li> <li>create: add api call to create cardinalities (#2003) (91792a9)</li> <li>create: check new <code>create</code> with <code>vulture</code> (#2023) (2475d95)</li> <li>create: extend parsing the list section from project json (#2021) (b65bea2)</li> <li>create: implement new list creation route in <code>create --lists-only</code> (DEV-5551) (#2022) (1ae9d4b)</li> <li>create: integrate new cardinality creation (DEV-5502) (#2004) (8017d30)</li> <li>create: integrate new create lists section into main code (DEV-5552) (#2025) (2dbb41e)</li> <li>create: make models for <code>ParsedProject</code> (DEV-5505) (#1999) (995c0a7)</li> <li>create: make print messages consistent (#2026) (206ef0a)</li> <li>create: refactor adding cardinalities (DEV-5502) (#1997) (83066fc)</li> <li>deps: bump all dependencies (#1993) (2b5c51c)</li> <li>deps: bump the all-dependencies group across 1 directory with 5 updates (#2011) (290c62a)</li> <li>deps: bump the all-dependencies group across 1 directory with 6 updates (#1984) (01a6ea5)</li> <li>start-stack: bump versions to 2025.10.02 and use HttpWaitStrategy in testcontainers instead of waiting for logs (#2027) (c25c0c0)</li> <li>validate-data: move API clients to general clients folder (#2018) (e5b82cc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_2","title":"Documentation","text":"<ul> <li>lint: markdown-link-validator: ignore w3.org (#2014) (13a739d)</li> <li>lint: markdownlint: unignore readme (#2015) (9d252e6)</li> <li>new architecural design of the <code>create</code> command (DEV-5506) (#1998) (ba16373)</li> <li>remove all possible CLI options from documentation to make it more readable (#2024) (d680b5f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1700-2025-10-08","title":"17.0.0 (2025-10-08)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_1","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>remove <code>rosetta</code> CLI command (DEV-5384) (#1978)</li> <li>exce2xml: remove <code>excel2xml</code> CLI command (DEV-5386) (#1975)</li> <li>xmllib: raise error when using <code>create_list_from_string</code> (DEV-5253) (#1973)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_6","title":"Enhancements","text":"<ul> <li>add functionality to replace ids with iris from mapping dynamically (DEV-5473) (#1980) (4aec235)</li> <li>exce2xml: remove <code>excel2xml</code> CLI command (DEV-5386) (#1975) (4dff27f)</li> <li>remove <code>rosetta</code> CLI command (DEV-5384) (#1978) (33274db)</li> <li>validate-data: prevent cross-project resource links (DEV-5450) (#1970) (a50dcbf)</li> <li>xmllib: raise error when using <code>create_list_from_string</code> (DEV-5253) (#1973) (68b8e7b)</li> <li>xmlupload: remove HTML 404 response text during IIIF-URI validation (DEV-5436) (#1972) (46a2492)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_7","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.10.01 (#1983) (d28dc7f)</li> <li>xmlupload: replace internal ids with iris in formatted text value (DEV-5469) (#1979) (353f778)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_3","title":"Documentation","text":"<ul> <li>remove gui-attributes that have no effect in the APP from the documentation (DEV-5476) (#1981) (c3d2a72)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#16122-2025-10-01","title":"16.12.2 (2025-10-01)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_8","title":"Maintenance","text":"<ul> <li>bump dependencies (#1968) (ac1a031)</li> <li>bump gh actions versions (#1967) (fe1e563)</li> <li>change build backend to native uv (DEV-5195) (#1964) (2742fc9)</li> <li>start-stack: bump versions to 2025.09.05 (#1969) (cf210e1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#16121-2025-09-26","title":"16.12.1 (2025-09-26)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_5","title":"Bug Fixes","text":"<ul> <li>excel2json: make list sorting consistent across OS (#1963) (a02d434)</li> <li>validate: handle absent key gracefully (DEV-5428) (#1960) (8e0c563)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_9","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.09.04 (#1962) (c11177c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#16120-2025-09-17","title":"16.12.0 (2025-09-17)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_7","title":"Enhancements","text":"<ul> <li>create: allow reusing props from another onto (DEV-5418) (#1956) (66aa897)</li> <li>remove <code>template</code> CLI command (DEV-5385) (#1958) (e31d07e)</li> <li>xmlupload: implement warning for large fuseki bloating on localhost (DEV-5402) (#1952) (00da0ef)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_6","title":"Bug Fixes","text":"<ul> <li>excel2json: enable references to other ontologies in resource cardinalities (DEV-5416) (#1954) (0d6de05)</li> <li>xmllib: add missing Umlaute to <code>xsd:ID</code> regex (DEV-5382) (#1957) (f21ddb3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_10","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.09.03 (#1959) (ae2aa31)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#16110-2025-09-10","title":"16.11.0 (2025-09-10)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_8","title":"Enhancements","text":"<ul> <li>get: support legacy permissions (DOAPs) (DEV-5346) (#1945) (7c2804d)</li> <li>validate-data: ensure that integers are within the range specified for <code>xsd:int</code> (DEV-5391) (#1951) (0512a01)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_7","title":"Bug Fixes","text":"<ul> <li>validate-data: implement <code>sh:DatatypeConstraintComponent</code> in validation (DEV-5387) (#1950) (e7d9e6c)</li> <li>xmllib: replace usage of the deprecated <code>create_list_from_string</code> with <code>create_list_from_input</code> (DEV-5397) (#1949) (de0dc8c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_11","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.09.02 (#1953) (a0790b8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#16100-2025-09-03","title":"16.10.0 (2025-09-03)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_9","title":"Enhancements","text":"<ul> <li>excel2json: guarantee sorting of labels/comments in output (DEV-5369) (#1942) (cda7db7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_8","title":"Bug Fixes","text":"<ul> <li>get: don't crash when no credentials are given (DEV-5347) (#1940) (272dc59)</li> <li>start-stack: asset download on localhost broken (DEV-5362) (#1939) (263de95)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_12","title":"Maintenance","text":"<ul> <li>start-stack: remove fuseki initialization and bump versions to 2025.09.01 (DEV-5297) (#1937) (6a06645)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_4","title":"Documentation","text":"<ul> <li>reorganisation documentation structure (DEV-5371) (#1946) (abb5407)</li> <li>xmllib: create overview of xmllib (DEV-5291) (#1930) (5a4391a)</li> <li>xmllib: fix links after renaming files and update CLAUDE.md (DEV-5370) (#1943) (309c418)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1690-2025-08-27","title":"16.9.0 (2025-08-27)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_10","title":"Enhancements","text":"<ul> <li>get: retrieve class-wise and property-wise DOAPs (DEV-5120) (#1919) (30d0a67)</li> <li>xmllib: create functions to explicitly add textareas to a resource (DEV-5305) (#1936) (6daf503)</li> <li>xmllib: improve message of deprecation warning (DEV-5300) (#1932) (81d76da)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_9","title":"Bug Fixes","text":"<ul> <li>empty log files written during long-lived debugging sessions (DEV-5281) (#1931) (3b19134)</li> <li>excel2json: put \"default_permissions_overrule\" at correct position (DEV-5345) (#1935) (7a94bbc)</li> <li>xmllib: consider permissions of values and files when evaluating which are referenced (DEV-5290) (#1927) (46942aa)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_13","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.08.04 (#1938) (4e89926)</li> <li>waypaver for DOAP-PR (#1928) (6ff1012)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_5","title":"Documentation","text":"<ul> <li>excel2json: better explanation of default_permissions_overrule (#1934) (6506fc5)</li> <li>xmllib: split up configuration options and improve grouping of sections (DEV-5302) (#1933) (8d51d6f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1680-2025-08-20","title":"16.8.0 (2025-08-20)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_11","title":"Enhancements","text":"<ul> <li>add docker health check to all CLI-commands if they are on localhost and require a stack (DEV-5227) (#1924) (c66a19a)</li> <li>excel2json: add support for overruling default permissions for classes/properties (DEV-5032) (#1915) (69a20ee)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_14","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.08.03 (#1926) (05c927b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_6","title":"Documentation","text":"<ul> <li>improve the wording for the text value in the ontology (DEV-5279) (#1920) (bd503c4)</li> <li>xmllib: add tips and links to helper functions (#1922) (16e4352)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1670-2025-08-13","title":"16.7.0 (2025-08-13)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_12","title":"Enhancements","text":"<ul> <li>change organisation of log files (DEV-5228) (#1895) (830836c)</li> <li>create: add support for classes/property specific default permissions (DOAPs) (DEV-5038) (#1900) (653498e)</li> <li>xmllib: add deprecation warning to <code>create_list_from_string</code> (DEV-5252) (#1909) (9df7b9d)</li> <li>xmllib: helper function create list if the input is non-empty (DEV-5249) (#1906) (6bc7aa4)</li> <li>xmllib: level of user info that is printed configurable in the <code>.env</code> (DEV-5254) (#1910) (b261276)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_10","title":"Bug Fixes","text":"<ul> <li>upload-files: enable extension \".json\" (was forgotten) (#1899) (86017ee)</li> <li>xmllib: don't crash if the listnode lookup does not find a label with the specified language (DEV-5247) (#1902) (583d273)</li> <li>xmllib: make the function <code>create_list_from_input</code> importable (DEV-5250) (#1908) (53ba941)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_15","title":"Maintenance","text":"<ul> <li>bump dependencies (#1912) (377555f)</li> <li>excel2json: add CLAUDE.md (#1914) (8fe0e85)</li> <li>start-stack: bump versions to 2025.08.02 (#1916) (2957bd1)</li> <li>xmlupload: generate CLAUDE.md file (DEV-5204) (#1893) (1b089b5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1661-2025-08-06","title":"16.6.1 (2025-08-06)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_16","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.08.01 (#1897) (24ab2d9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1660-2025-07-30","title":"16.6.0 (2025-07-30)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_13","title":"Enhancements","text":"<ul> <li>create: allow only subclasses of StillImageRepresentation in default_permissions_overrule.limited_view (DEV-5179) (#1881) (67d1b46)</li> <li>validate-data: add flag to ignore ontology validation (DEV-5200) (#1892) (1ee25c4)</li> <li>validate-data: include standoff links to IRIs in validation (DEV-4944) (#1888) (f6aba7c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_17","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.07.05 (#1896) (fcd7a6b)</li> <li>validate-data: separate queries and reformatting of validation results (#1894) (1feaf55)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_7","title":"Documentation","text":"<ul> <li>bulk ingest: remove \"experimental\" warning, add \"SystemAdmin\" warning (#1889) (323a27e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1650-2025-07-23","title":"16.5.0 (2025-07-23)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_14","title":"Enhancements","text":"<ul> <li>improve message if file path from user is not found (DEV-5171) (#1874) (3c6cfe5)</li> <li>validate-data: Create CLAUDE.md (DEV-5107) (#1829) (405c8ae)</li> <li>validate-data: ensure that the end date is equal or after the start date (DEV-5173) (#1879) (db32e38)</li> <li>validate-data: ensure that the end date is not <code>BCE</code> when the start date is <code>CE</code> (DEV-5176) (#1878) (6f9b136)</li> <li>validate-data: find dates that have an invalid month or year number (DEV-5175) (#1876) (66ec5ce)</li> <li>validate-data: improve user message if the file value is wrong (DEV-5122) (#1873) (758d323)</li> <li>validate-data: parse DateValue into xsd compatible date datatypes (DEV-5172) (#1875) (7f7f42e)</li> <li>validate-data: raise validation severity of duplicate files from <code>INFO</code> to <code>WARNING</code> (DEV-5167) (#1868) (e36893d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_11","title":"Bug Fixes","text":"<ul> <li>ingest-files: save latest mapping without timestamp (DEV-5163) (#1866) (66a78ba)</li> <li>start-stack: don't crash if <code>stop-stack</code> is called multiple times (#1884) (e638620)</li> <li>validate-data: turn all dates into full dates for validation to allow for comparison (DEV-5180) (#1880) (7c64869)</li> <li>xmlupload: use slightly shorter timeout than traefik's 10 min (#1883) (f78cc2f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_18","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.07.04 (#1887) (e0815a8)</li> <li>make dependabot functional again (#1855) (9dec12a)</li> <li>run e2e tests in parallel (#1882) (e81520c)</li> <li>validate-data: always check for duplicates with python logic (DEV-5158) (#1856) (3d33663)</li> <li>validate-data: delete unnecessary code to filter out multiple duplicate file warnings (DEV-5168) (#1872) (1abd25b)</li> <li>validate-data: remove unnecessary file duplicate reformatting (DEV-5159) (#1869) (72d8734)</li> <li>validate-data: remove unused turtle files for duplicate check (DEV-5164) (#1870) (5b26b7e)</li> <li>xmllib: create designated <code>xmllib</code> error classes (DEV-5098) (#1865) (5620780)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1640-2025-07-16","title":"16.4.0 (2025-07-16)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_15","title":"Enhancements","text":"<ul> <li>validate-data: consistently save or print validation results based on total number found (DEV-5135) (#1848) (ef37b87)</li> <li>validate-data: eable multiple parallel calls at the same time without conflicts (DEV-5137) (#1836) (26a4599)</li> <li>validate-data: prevent crash if too many duplicate files are in the data (DEV-5140) (#1841) (4bf4fa0)</li> <li>validate-data: use the SHACL CLI for all validation calls (DEV-5127) (#1831) (687adfe)</li> <li>xmlupload: always write id2iri to \".dsp-tools\" folder (DEV-5162) (#1862) (08b050b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_19","title":"Maintenance","text":"<ul> <li>align folder naming of ingest docker folders with naming on servers (#1849) (1f0cdd4)</li> <li>bump start-stack to 2025.07.03 (#1864) (71f1f28)</li> <li>reorganise GitHub workflow files (DEV-5154) (#1851) (8a3fa56)</li> <li>validate-data: allow <code>InputProblems</code> without resource ID and type (#1857) (10a462c)</li> <li>validate-data: create <code>validation</code> folder (#1843) (ae24254)</li> <li>validate-data: group files into categories (#1837) (00f6ade)</li> <li>validate-data: improve edge cases e2e tests (#1859) (d23e389)</li> <li>validate-data: improve generic violations e2e tests (#1860) (df78c39)</li> <li>validate-data: improve warnings and info e2e tests (#1861) (d8e80f1)</li> <li>validate-data: move check for unknown resources classes to own file (#1844) (1b15119)</li> <li>validate-data: move get ontology validation message to correct file (#1845) (bd1eb96)</li> <li>validate-data: move get validation report to own file (#1846) (7669828)</li> <li>validate-data: only use <code>pytest.fixtures</code> in e2e tests when needed (#1863) (77f924f)</li> <li>validate-data: read shacl-cli docker image from file (#1850) (4c4daf2)</li> <li>validate-data: remove unused parameter <code>asset_value</code> from <code>RdfLikeResource</code> (#1839) (a2dc2d4)</li> <li>validate-data: restructure function calls internally (#1840) (8a9847c)</li> <li>validate-data: separate printing of messages and creating the validation result (#1858) (a80596f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_8","title":"Documentation","text":"<ul> <li>validate-data: add validation logic diagram to developers' docs (#1847) (6cd508a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1630-2025-07-09","title":"16.3.0 (2025-07-09)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_16","title":"Enhancements","text":"<ul> <li>get: retrieve default permissions (DEV-5076) (#1825) (4414149)</li> <li>validate-data: run validation locally with a docker container (DEV-5062) (#1827) (343bfda)</li> <li>xmllib: prevent conversion of null values into strings (DEV-5117) (#1822) (877af93)</li> <li>xmllib: remove functionality to set default permissions on <code>write_file</code> (DEV-5105) (#1823) (c44fb5c)</li> <li>xmllib: rename permissions open/restricted/restricted view to public/private/limited_view (DEV-5079) (#1820) (569e2bf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_12","title":"Bug Fixes","text":"<ul> <li>allow hexadecimal letters in resource iri check (DEV-5118) (#1824) (2f90826)</li> <li>xmllib: remove duplicate warning if an empty value is added in Simpletext (DEV-5121) (#1826) (78c2618)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_20","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.07.02 (#1833) (b86ad3a)</li> <li>update CLAUDE.md (#1819) (23b1cf8)</li> <li>xmllib: add CLAUDE.md file for xmllib (DEV-5097) (#1815) (58eadeb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_9","title":"Documentation","text":"<ul> <li>create: add <code>default_permissions_overrule</code> to test data, docs, and JSON schema (DEV-5031) (#1828) (ebfaf60)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1620-2025-07-02","title":"16.2.0 (2025-07-02)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_17","title":"Enhancements","text":"<ul> <li>create: rename \"project_default_permissions\" to \"default_permissions\" (DEV-5091) (#1811) (32e4b2d)</li> <li>excel2json: set project default permissions in Excel (DEV-5036) (#1808) (ffcdf8e)</li> <li>remove default for project_default_permissions (DEV-5087) (#1806) (576b147)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_13","title":"Bug Fixes","text":"<ul> <li>remove dataclass decorator from enum class (DEV-5073) (#1818) (1768840)</li> <li>start-stack: prevent sipi data from filling up storage (DEV-5065) (#1810) (5bc0e80)</li> <li>validate-data: allow stand-off links for resources (DEV-5101) (#1816) (6ad6f0e)</li> <li>xmlupload: add more retries to account for 45 min and more fuseki compaction (DEV-5094) (#1812) (d716e08)</li> <li>xmlupload: retry during ca. 15min (DEV-5089) (#1809) (0dd91a2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_21","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.07.01 and remove api-config workaround (DEV-5106) (#1817) (a508526)</li> <li>start-stack: subpar bind mount in docker-compose.yml (DEV-5096) (#1813) (bb030ac)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_10","title":"Documentation","text":"<ul> <li>xmllib: fix some mistakes in documentation of helpers and converters (#1814) (8093557)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1610-2025-06-24","title":"16.1.0 (2025-06-24)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_18","title":"Enhancements","text":"<ul> <li>create: set project default permissions in JSON (DEV-5035, DEV-5037) (#1801) (16fc473)</li> <li>xmlupload: add support for HTML and EPUB files (DEV-5084) (#1805) (007f641)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_22","title":"Maintenance","text":"<ul> <li>apply new permissions terminology - everywhere except xmllib (DEV-5077) (#1804) (ff0e1fa)</li> <li>bump dependencies (#1799) (bb99e6d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_11","title":"Documentation","text":"<ul> <li>xmlupload: reflect the new project default permissions (DEV-5078) (#1803) (0bb0037)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1600-2025-06-18","title":"16.0.0 (2025-06-18)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_2","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>create: disallow creation of SystemAdmin (DEV-5009) (#1787)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_19","title":"Enhancements","text":"<ul> <li>allow that images are part of multiple compound objects (DEV-5070) (#1796) (70e6371)</li> <li>create: disallow creation of SystemAdmin (DEV-5009) (#1787) (08dac08)</li> <li>create: link existing users to project (DEV-5052) (#1793) (4ff19ae)</li> <li>reformat and write large xsd schema validation results into a file (DEV-4998) (#1775) (b3ada62)</li> <li>validate-data: add flag to ignore duplicate image warnings (DEV-5060) (#1791) (2d8a701)</li> <li>validate-data: don't shorten user input if it is a ListValue (DEV-5048) (#1782) (2bcd9d5)</li> <li>validate-data: print out longer user input in validation message and don't shorten if info if it is a link (DEV-5047) (#1781) (a4c94ef)</li> <li>xmllib: add function to reformat dates from a known format (DEV-5054) (#1786) (3e6e596)</li> <li>xmllib: check if the Resource ID is already used when adding a new one to the <code>XmlRoot</code> (DEV-4997) (#1785) (748cc18)</li> <li>xmllib: validate that the resource ids are correct (DEV-4996) (#1780) (c0e938e)</li> <li>xmlupload: add flag to skip SHACL validation (DEV-5058) (#1790) (a24cb0e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_14","title":"Bug Fixes","text":"<ul> <li>validate-data: prevent the same prefix to be used for different IRIs in the serialisation (DEV-5053) (#1784) (f21688a)</li> <li>validate-data: set higher timeouts for operations that could last long - 360s (DEV-5049) (#1788) (65edb79)</li> <li>validate-data: set higher timeouts for operations that could last long (DEV-5049) (#1783) (03a24cd)</li> <li>xmllib: don't warn if the list name is empty if the node is an absolute iri (DEV-5019) (#1774) (b5fb167)</li> <li>xmllib: remove duplicate warnings for empty input when creating a new <code>Resource</code> (DEV-5057) (#1789) (57e0431)</li> <li>xmlupload: allow more special characters (#1794) (f245f80)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_23","title":"Maintenance","text":"<ul> <li>add CLAUDE.md to fine-tune Claude Code instances (#1792) (cc4f9c7)</li> <li>bump start-stack to 2025.06.02 (#1795) (41b21d9)</li> <li>start-stack: add more logging (#1777) (4eacc50)</li> <li>start-stack: add more logging (DEV-5071) (#1797) (19c2092)</li> <li>start-stack: capture and log API logs in case of failure (DEV-5071) (#1798) (36dff9f)</li> <li>validate-data: remove erroneous logging statement (#1778) (dcc312c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1510-2025-06-04","title":"15.1.0 (2025-06-04)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_20","title":"Enhancements","text":"<ul> <li>create: enable licenses on a per-project base (DEV-4864) (#1744) (27004a6)</li> <li>migrate warning about angular brackets in simpletext from <code>xmplupload</code> to <code>xmllib</code> (DEV-4943) (#1750) (c48d041)</li> <li>validate-data: add more logging statements to find out slow process (DEV-4977) (#1763) (cad440c)</li> <li>validate-data: check that only enabled licenses are referenced in the xml (DEV-4951) (#1755) (dd42602)</li> <li>validate-data: don't shorten user input in print out if it is a file paht (DEV-5008) (#1769) (208b049)</li> <li>validate-data: ensure that only defined permissions are used (DEV-4939) (#1748) (8009778)</li> <li>validate-data: serialise the <code>rdflib</code> graphs into strings before concatenation with other graphs (DEV-5001) (#1768) (ea8ead7)</li> <li>validate-data: warn if bitstreams/iiif-uri are duplicated (DEV-4665) (#1752) (741223c)</li> <li>validate-data: warnings give a validation failure if it is on a prod server (DEV-4948) (#1754) (a8006fb)</li> <li>xmllib: accept Italian \"s\u00ec\" as boolean (RDU-94) (#1746) (322fa00)</li> <li>xmllib: don't print out warnings if they are saved into a csv (DEV-5011) (#1772) (bec6807)</li> <li>xmlupload: add dummy legal info when none provided and not on prod server (DEV-4926) (#1757) (17a7fd0)</li> <li>xmlupload: show progress bar on CLI when uploading stash (DEV-4935) (#1747) (7fd490c)</li> <li>xsd file should validate that a <code>&lt;resptr&gt;</code> only contains valid characters (DEV-4999) (#1771) (452c4bc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_15","title":"Bug Fixes","text":"<ul> <li>remove erroneous mandatory gui attribute of <code>Spinbox</code> (DEV-4679) (#1764) (fecfabf)</li> <li>validate-data: add missing API URLs to the list of production servers (DEV-4995) (#1767) (b3ebb95)</li> <li>validate-data: validate with list IRIs instead of names (DEV-4470) (#1741) (678164f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_24","title":"Maintenance","text":"<ul> <li>describe yamlfmt installation in readme and bump markdownlint version (#1753) (b3a712f)</li> <li>improve boolean arguments (#1765) (e97c0aa)</li> <li>start-stack: bump versions to 2025.06.01 (#1773) (6f1f38a)</li> <li>validate-data: change list node extraction (#1742) (83fdd6d)</li> <li>xmlupload: change processing of <code>ParsedFileValue</code> (#1758) (92c8abd)</li> <li>xmlupload: clean up RDF creation of legal info (DEV-4959) (#1766) (9d4fcb4)</li> <li>xmlupload: remove redundant check if link targets exist (DEV-4942) (#1751) (e7cee5b)</li> <li>xmlupload: remove unnecessary conversion checks (DEV-4934) (#1745) (cea1509)</li> <li>xmlupload: remove unnecessary permissions error handling (DEV-4940) (#1749) (0fabaf2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_12","title":"Documentation","text":"<ul> <li>add explanation of <code>TextValue</code> types (DEV-5013) (#1770) (1f830fa)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1500-2025-05-21","title":"15.0.0 (2025-05-21)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_3","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>rename find_date_in_string() to find_dates_in_string() (RDU-93) (#1738)</li> <li>find_date_in_string() returns list[str] instead of Optional[str] (DEV-4900) (#1733)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_21","title":"Enhancements","text":"<ul> <li>find_date_in_string() returns list[str] instead of Optional[str] (DEV-4900) (#1733) (53c7d75)</li> <li>rename find_date_in_string() to find_dates_in_string() (RDU-93) (#1738) (05c99b1)</li> <li>retrieve licenses of project and add authentication to validate-data (DEV-4906) (#1725) (fc17405)</li> <li>start-stack: add parameter for a custom host (DEV-4907) (#1675) (ea3a89e)</li> <li>validate-data: validate that only existing licenses are used (DEV-4862) (#1729) (930a92d)</li> <li>xmllib: add <code>None</code> as a default for legal info (DEV-4927) (#1737) (57e9de5)</li> <li>xmllib: add new LicenseOther licenses to find_license_in_string() (DEV-4876) (#1716) (e7db46f)</li> <li>xmllib: change .env variable name to save warnings file (RDU-91) (#1723) (4eb75e5)</li> <li>xmllib: enable sorting of resources and values during serialisation (RDU-89) (#1730) (fb386b3)</li> <li>xmlupload: add CLI args to configure which validation severity level should be printed out (DEV-4901) (#1732) (0282cdc)</li> <li>xmlupload: validate XML input with <code>validate-data</code> (DEV-4461) (#1722) (93c2345)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_16","title":"Bug Fixes","text":"<ul> <li>allow all licenses, not only the recommended ones (DEV-4903) (#1724) (82a3214)</li> <li>validate-data: allow values of the same property to have identical comments (DEV-4905) (#1727) (f35bd93)</li> <li>validate-data: reorganise user print messages and fix validation bool (DEV-4898) (#1718) (899f74b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_25","title":"Maintenance","text":"<ul> <li>start-stack: bump versions to 2025.05.02 (#1739) (5787d3a)</li> <li>valiate-data: extract get project info from api (#1740) (b88e59e)</li> <li>validate-data: add validate config (#1726) (98ac8d6)</li> <li>validate-data: extract parsing of resources from validation command (#1720) (b591d1e)</li> <li>validate-data: rename <code>AllProjectLists</code> to more generic name (#1728) (f338b26)</li> <li>waypaver for next PR (#1735) (b62b1fd)</li> <li>xmlupload: separate parsing of processing of resources (#1721) (54c9b08)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_13","title":"Documentation","text":"<ul> <li>validate-data: add all the flags and add explanation (DEV-4915) (#1731) (ab40324)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1400-2025-05-15","title":"14.0.0 (2025-05-15)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_4","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>remove old create label to list node name mapper function (DEV-4850) (#1690)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_22","title":"Enhancements","text":"<ul> <li>excel2json: create enabled license array in json with excel (DEV-4865) (#1697) (9e93009)</li> <li>include enabled licenses in json (DEV-4805) (#1696) (2fb7739)</li> <li>remove old create label to list node name mapper function (DEV-4850) (#1690) (c572e3c)</li> <li>validate-data: check that SimpleText gui elements do not contain linebreaks (DEV-4840) (#1681) (1eafc90)</li> <li>validate-data: downgrade the severity of missing legal information to warning (DEV-4897) (#1714) (2412948)</li> <li>validate-data: filter out violations when Links reference resources in DB (DEV-4819) (#1689) (6932358)</li> <li>validate-data: validate authorship string (DEV-4896) (#1713) (222f4f7)</li> <li>xmllib: add new license IRIs (DEV-4873) (#1707) (17b4672)</li> <li>xmllib: add the option to overwrite the <code>Permissions.PROJECT_SPECIFIC_PERMISSIONS</code> with a custom default permissions (DEV-4877) (#1710) (56e3e55)</li> <li>xmllib: enable to save warning messages in csv through an .env configuration (DEV-4853) (#1692) (99c65ba)</li> <li>xmllib: helper function to parse licenses (DEV-4800) (#1640) (35c4f3a)</li> <li>xmllib: support polars null values in is null checks (DEV-4841) (#1673) (8f0d416)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_17","title":"Bug Fixes","text":"<ul> <li>xmllib: prevent data loss in find_date_in_string() (DEV-4839) (#1684) (edd5740)</li> <li>xmllib: values of dsp in built resources should inherit permissions of the resource if it is not possible to specify them individually (DEV-4888) (#1711) (648879e)</li> <li>xmlupload: characters that are escaped in the XML should not be escaped in the string after parsing (DEV-4835) (#1671) (f1e1552)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_26","title":"Maintenance","text":"<ul> <li>autofix pyupgrade linting rules (#1679) (e236a73)</li> <li>deduplicate helpers from excel2xml and xmllib (#1683) (e464967)</li> <li>explain dmypy restart in readme (DEV-4833) (#1688) (e2f5618)</li> <li>resolve warnings in tests (#1709) (e693b77)</li> <li>some small fixes (#1685) (54bea5e)</li> <li>start-stack: bump versions to 2025.05.01 (#1715) (edc0fa0)</li> <li>validate-data: improve code structure of user message communication (#1695) (75b1907)</li> <li>validate-data: re-organise validation message for user (#1693) (dd314dd)</li> <li>xmllib: change order of warnings util functions (#1691) (05c5a9e)</li> <li>xmllib: create factory methods for <code>FileValues</code> (#1668) (4b8b347)</li> <li>xmllib: integrate warning utils (#1677) (919669e)</li> <li>xmllib: move internal code into separate folder (#1676) (b0b3dbc)</li> <li>xmllib: move raising of errors out of richtext serialisation (DEV-4832) (#1686) (7ee2605)</li> <li>xmllib: remove resource id from <code>Value</code> (#1672) (5b28a47)</li> <li>xmllib: reorganise and streamline internal util functions (#1678) (792880d)</li> <li>xmlupload: remove duplicate file type identification (DEV-4455) (#1717) (41a71ef)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_14","title":"Documentation","text":"<ul> <li>fix typo in documentation (#1694) (70c25cb)</li> <li>move incremental-xmlupload into folder special-workflows (#1687) (4359bea)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1310-2025-04-30","title":"13.1.0 (2025-04-30)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_23","title":"Enhancements","text":"<ul> <li>validate-data: ensure that properties that should only be single line do not contain line breaks (DEV-4808) (#1635) (21efebb)</li> <li>validate-data: remove whitespaces from <code>TextValues</code> to better detect duplicates (RDU-78) (#1651) (c099421)</li> <li>xmllib: create function to remove redundant whitespaces and newlines from string (DEV-4801) (#1633) (7167890)</li> <li>xmllib: search and warn potentially empty input string (DEV-4827) (#1662) (ed348bd)</li> <li>xmlupload: allow list IRIs to be referenced in the XML (DEV-4831) (#1664) (3497f9d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_18","title":"Bug Fixes","text":"<ul> <li>distinguish between strings/regexes in KNOWN_XML_TAGS (DEV-4781) (#1619) (0c7c5d7)</li> <li>id2iri: include segment resources for id replacement (DEV-4797) (#1630) (c6ba599)</li> <li>SyntaxWarning: invalid escape sequence '\\p' (#1618) (d279c92)</li> <li>xmllib: do not warn if comment on values are left empty (DEV-4834) (#1669) (f848d73)</li> <li>xmllib: new warnings: pair programming results (#1661) (ae70ba8)</li> <li>xmllib: replace namedentities package (DEV-4755) (#1611) (fbd8b44)</li> <li>xmlupload: convert HTTPS api url to HTTP url for ontology IRI construction (DEV-4803) (#1634) (a81888c)</li> <li>xmlupload: correctly communicate if text val contains invalid chars (#1650) (d5950e5)</li> <li>xmlupload: user friendly message for duplicate res IDs (DEV-4747) (#1643) (46d8015)</li> <li>xmlupload: validate link target IDs of Segment resources (DEV-4794) (#1625) (6cd2a27)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_27","title":"Maintenance","text":"<ul> <li>add deprecation warning to excel2xml.write_xml() (DEV-4783) (#1641) (3b4353b)</li> <li>bump dependencies (#1652) (51903a5)</li> <li>consolidate duplications of is_nonempty_value() and is_string_like() (DEV-4788) (#1621) (b501cd9)</li> <li>consolidate xml parsing and cleaning functions (#1632) (1b309c3)</li> <li>copy tests from excel2xml to xmllib (#1629) (8846c5b)</li> <li>implement vulture to find dead code (#1626) (bf53313)</li> <li>ingest-xmlupload: use <code>ParsedResource</code> instead of <code>XMLResource</code> (#1622) (4ab3fd8)</li> <li>refactor _handle_non_ok_responses() (#1646) (206a7f8)</li> <li>remove <code>XMLResource</code> (#1624) (1a7289d)</li> <li>remove get used IRIs from <code>get_parsed_resources</code> (#1645) (932d756)</li> <li>remove whitespaces when creating <code>ParsedResource</code> (#1623) (1d86782)</li> <li>rename get_data_deserialised file (#1627) (9d445d7)</li> <li>resolve warnings and bump dependencies (#1636) (f00aa31)</li> <li>resolve warnings in tests (#1647) (713a2b3)</li> <li>start-stack: bump versions to 2025.04.03 (#1670) (4c8c51e)</li> <li>validate-data: clean up and add logging statements (#1660) (e0cb871)</li> <li>validate-data: create <code>DataDeserialised</code> from <code>ParsedResource</code> (#1628) (ffc6192)</li> <li>validate-data: integrate get data deserialised from <code>ParsedResource</code> into code (#1631) (748bf92)</li> <li>validate-data: optimise check if only known resource classes are used in file (#1644) (ce01b6f)</li> <li>validate-data: rename <code>ResourceDeserialised</code> into <code>RdfLikeResource</code> (DEV-4817) (#1654) (a08b472)</li> <li>validate-data: reorganise parsing of XML file and data construction (#1642) (58d0f86)</li> <li>xmllib: change construction of warnings messages (DEV-4793) (#1656) (d70346b)</li> <li>xmllib: change find function trace (#1658) (01b0cd3)</li> <li>xmllib: change input type mismatch warning (#1659) (cadcb56)</li> <li>xmllib: change warning and error messages in helper functions (#1667) (f5d1e01)</li> <li>xmllib: create all values with factory method (#1666) (a9b45ce)</li> <li>xmllib: create factory method for <code>BooleanValue</code> (#1663) (f243e60)</li> <li>xmllib: create factory method for <code>Richtext</code> (#1665) (44d1278)</li> <li>xmllib: create separate warning classes (DEV-4819) (#1655) (ed40e78)</li> <li>xmllib: integrate warning utils into dsp base resources (DEV-4823) (#1657) (af6fb77)</li> <li>xmlupload: move create lookup functions into utils (#1638) (8f642f2)</li> <li>xmlupload: rename <code>IntermediaryResource</code> into <code>ProcessedResource</code> (DEV-4816) (#1653) (0f65f38)</li> <li>xmlupload: use <code>ParsedResource</code> instead of <code>XMLResource</code> (#1617) (f5f293a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1300-2025-04-09","title":"13.0.0 (2025-04-09)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_5","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>change structure of <code>PreDefinedLicenses</code> config in xmllib (DEV-4762) (#1605)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_24","title":"Enhancements","text":"<ul> <li>change structure of <code>PreDefinedLicenses</code> config in xmllib (DEV-4762) (#1605) (7319985)</li> <li>downgrade warning level if angular brackets were found in Simpletext (DEV-4746) (#1593) (16d875a)</li> <li>xmllib: create additional label to list name helper functions and lookups (DEV-4753) (#1598) (da67e9a)</li> <li>xmllib: support BCE dates in <code>find_date_in_string()</code> (RDU-83) (#1596) (5361bc6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_19","title":"Bug Fixes","text":"<ul> <li>correct rdflib import (DEV-4765) (#1612) (67d6770)</li> <li>xmllib: allow additional header tags that can be displayed in the app (DEV-4756) (#1599) (700ccbb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_28","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.04.02 (#1616) (486855f)</li> <li>consolidate code duplications (DEV-4780) (#1613) (432364d)</li> <li>create new classes to parse XML (#1591) (6b8fce1)</li> <li>parse XML into <code>ParsedResource</code> (#1594) (dfb4ff3)</li> <li>PR checks should be triggered on PRs from forks (#1608) (164b2f9)</li> <li>start-stack: switch <code>docker</code> command parts to match documentation (#1606) (bdb93c2)</li> <li>xmlupload: create functionality to transform resources from <code>ParsedResource</code> into <code>ResourceIntermediary</code> (#1601) (1cfdc8d)</li> <li>xmlupload: deserialise list-prop as tuple and not string (#1597) (22d7fcf)</li> <li>xmlupload: extract validation functions that use the root (#1614) (2df357f)</li> <li>xmlupload: move creation of intermediary lookup (#1610) (4b6d708)</li> <li>xmlupload: move transform rich- and simpletext values (#1603) (cb98c3c)</li> <li>xmlupload: rename transform into intermediary resources files (#1602) (f3394f7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_15","title":"Documentation","text":"<ul> <li>fix typo and display in architecture.md (#1600) (9ef3743)</li> <li>xmlupload: fix attribute of hasSegmentBounds (<code>&lt;video-segment&gt;</code> / <code>&lt;audio-segment&gt;</code>) (#1595) (472a0b9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1210-2025-04-02","title":"12.1.0 (2025-04-02)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_25","title":"Enhancements","text":"<ul> <li>xmllib: use UUID for authorship ID instead of number (DEV-4739) (#1584) (7b8fa4a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_20","title":"Bug Fixes","text":"<ul> <li>xmlupload: add comment on value to shashed links and texts (DEV-4730) (#1573) (3670754)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_29","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.04.01 (#1583) (794b842)</li> <li>delete dead code (#1577) (0205c59)</li> <li>move rdflib constants to one file (#1589) (78070eb)</li> <li>optimise <code>just clean</code> (#1570) (8347fe3)</li> <li>test: Use real iris in xmlupload integration tests (#1582) (634a8b4)</li> <li>xmlupload: add option to use own value IRI in graph (#1575) (cf1927b)</li> <li>xmlupload: change order of code (#1574) (5b7d657)</li> <li>xmlupload: create minimal XML parsing and validation function (#1590) (b0f51d6)</li> <li>xmlupload: extract json-ld serialisation (#1580) (b961d9c)</li> <li>xmlupload: integrate create upload order from <code>ResourceIntermediary</code> (#1550) (b279e68)</li> <li>xmlupload: move resolve ID to IRI outside of function when creating a <code>LinkValue</code> (#1581) (aed3ff2)</li> <li>xmlupload: remove old code and rename files (#1572) (cbd14de)</li> <li>xmlupload: remove redundant <code>JsonldContext</code> (#1586) (2827881)</li> <li>xmlupload: serialise <code>LinkValueStashItem</code> with rdflib (#1579) (041c6c3)</li> <li>xmlupload: serialise <code>StandoffStashItem</code> with rdflib (#1576) (53de9d4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_16","title":"Documentation","text":"<ul> <li>create architectural design record (#1587) (5546dcf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1200-2025-03-26","title":"12.0.0 (2025-03-26)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_6","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>rename old and new excel2json/excel2lists commands (RDU-80) (#1558)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_26","title":"Enhancements","text":"<ul> <li>rename old and new excel2json/excel2lists commands (RDU-80) (#1558) (5788aba)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_21","title":"Bug Fixes","text":"<ul> <li>delete warning.log if empty (DEV-3438) (#1559) (41ff3ed)</li> <li>xmlupload: disallow the combination of eras and Islamic calendar dates (RDU-77) (#1557) (36206ea)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_30","title":"Maintenance","text":"<ul> <li>add option to exclude request response text in logging (#1569) (624d1a2)</li> <li>bump dependencies (#1566) (34e7051)</li> <li>merge UserError and InputError classes (DEV-4698) (#1555) (52ba834)</li> <li>remove version restriction on \"testcontainers\" (#1567) (f2fb985)</li> <li>reorganise package structure (DEV-4721) (#1564) (e483b3b)</li> <li>reorganise utils (#1565) (ceac23c)</li> <li>run <code>uv sync</code> before <code>just lint</code>, to prevent parallelism issues (#1562) (cbe35e1)</li> <li>Update versions 2025.03.03 (#1563) (3c12484)</li> <li>upgrade pytest (DEV-3786) (#1568) (a99bd00)</li> <li>validate-data: PostFiles (#1554) (21f33e6)</li> <li>validate-data: remove ApiConnection, handle all network interaction in ListClient (DEV-4702) (#1546) (046da8b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_17","title":"Documentation","text":"<ul> <li>fix UI bug: admonition is not supported on pypi.org (DEV-4715) (#1556) (98bdc97)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1100-2025-03-19","title":"11.0.0 (2025-03-19)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_7","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>create: remove Excel folder reference from JSON project file (DEV-4687) (#1521)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_27","title":"Enhancements","text":"<ul> <li>create: remove Excel folder reference from JSON project file (DEV-4687) (#1521) (8185e12)</li> <li>validate-data: verify that the used license is allowed (DEV-4659) (#1492) (8701bf9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_22","title":"Bug Fixes","text":"<ul> <li>ci: trigger tests in release PR (DEV-4675) (#1502) (c2d0127)</li> <li>create: prevent duplicate list nodes (DEV-3531, DEV-3632) (#1507) (f60badb)</li> <li>ingest-xmlupload: handle pretty-printed bitstream paths (#1522) (254b2f6)</li> <li>validate-data: correct the way Values are targeted in the SHACL shapes (DEV-4672) (#1499) (3db100f)</li> <li>validate-data: recognise if <code>DateValue</code> is used instead of <code>SimpleText</code> (DEV-4681) (#1511) (192af3f)</li> <li>xmlupload: Better Error Message when API returns NotFoundException (DEV-4631) (#1506) (e100ce2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_31","title":"Maintenance","text":"<ul> <li>_handle_non_ok_responses() (#1505) (193d971)</li> <li>add some just linting commands (#1509) (1071e7f)</li> <li>auto-fix ruff violations in <code>just format</code> (#1553) (c48aca8)</li> <li>ci: trigger tests in release PR, the second (#1508) (8909f91)</li> <li>create: rename 1 directory and 1 file (#1543) (0071b3d)</li> <li>don't spam log file with stack traces (DEV-4607) (#1544) (6011562)</li> <li>remove unused markdownlint containers (#1526) (499c745)</li> <li>reorganise justfile (#1512) (3385226)</li> <li>speed up mypy with daemon (DEV-4684) (#1516) (d9bec53)</li> <li>Update versions 2025.03.02 (#1551) (4f8c372)</li> <li>validate-data: add property shapes to Values (#1513) (101313d)</li> <li>validate-data: change creation of cardinalities for file value property (#1536) (eb1d8fe)</li> <li>validate-data: change extraction of resource IRI and type (#1530) (764ed53)</li> <li>validate-data: change ID names in test data (#1510) (2a30bdc)</li> <li>validate-data: change resource IRI and type extraction during result queries (#1525) (2edb389)</li> <li>validate-data: change targeting of <code>knora-api:Values</code> (DEV-4690) (#1528) (77a9a54)</li> <li>validate-data: group property and nodeshapes better together (#1534) (3107c93)</li> <li>validate-data: harmonise file value shapes (#1494) (dad04de)</li> <li>validate-data: make name property shapes for ontology properties instead of blank nodes (#1537) (3452180)</li> <li>validate-data: make order of information in turtle files consistent (#1532) (146d217)</li> <li>validate-data: move <code>FileValue</code> cardinalities (#1535) (da4a933)</li> <li>validate-data: re-organise SHACL property shapes of dsp in-built resources (#1540) (d00bb3a)</li> <li>validate-data: remove duplication of file value errors (#1527) (a9fb0d1)</li> <li>validate-data: rename class parameter (#1523) (67be1b6)</li> <li>validate-data: validate metadata of values directly on the value (#1533) (5e56bc4)</li> <li>xmllib: don't manually interfere with xml serialisation (DEV-4230) (#1503) (50c4c67)</li> <li>xmlupload: reorganise functions to create the upload order (#1552) (4db08fe)</li> <li>xmlupload: take apart the function to create the upload state (#1549) (756e633)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_18","title":"Documentation","text":"<ul> <li>add deprecation notes with admonitions (#1514) (c95947d)</li> <li>communicate supported Python versions (DEV-4680) (#1515) (6f4ab31)</li> <li>xmlupload: describe how to add authorship data (#1542) (005bcb3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1060-2025-03-05","title":"10.6.0 (2025-03-05)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_28","title":"Enhancements","text":"<ul> <li>validate-data: validate if legal info exists for images (DEV-4655) (#1490) (4fdf287)</li> <li>validate-data: validate if legal info is there for files (DEV-4654) (#1487) (6ff6d3f)</li> <li>xmlupload: add <code>LegalInfoClient</code> to post copyright holders (DEV-4639) (#1478) (a4f9e6d)</li> <li>xmlupload: integrate create copyright holders into xmlupload (DEV-4650) (#1485) (7a3aba5)</li> <li>xmlupload: map authorship ids to actual values (DEV-4637) (#1476) (99cfaee)</li> <li>xmlupload: parse legal info for files from XML (DEV-4635) (#1473) (ef6df7f)</li> <li>xmlupload: Upload the legal info of the file values during the xmlupload (DEV-4638) (#1484) (29e59b5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_23","title":"Bug Fixes","text":"<ul> <li>validate-data: add problem message to csv (DEV-4663) (#1493) (63c587f)</li> <li>xmllib: allow pathlib.Path as input for Resource.add_file() (#1486) (63d5fd6)</li> <li>xmllib: disallow colon as range separator in find_date_in_string() (#1480) (a908714)</li> <li>xmllib: is_nonempty_value(\" \") should be false (#1474) (2550e80)</li> <li>xmlupload: communicate invalid filename (#1497) (1557894)</li> <li>xmlupload: text encoding check should handle onto prefix in text properties (DEV-4664) (#1495) (e218b3b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_32","title":"Maintenance","text":"<ul> <li>bump stack to 2025.03.01 (#1491) (64b87e0)</li> <li>fix typo (#1489) (e52c9bf)</li> <li>move generic and static logging functions out from <code>ConnectionLive</code> to separate file (#1479) (2dd238a)</li> <li>move logging of request out of <code>ConnectionLive</code> into generic file (#1482) (9250b01)</li> <li>use simpler loguru syntax (DEV-4615) (#1501) (9c7dbf8)</li> <li>validate-data: add legal info to the validation (#1488) (209a1d1)</li> <li>xmlupload: make error handling clearer/simpler (#1500) (6199201)</li> <li>xmlupload: make file value graph (#1483) (689c0c8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_19","title":"Documentation","text":"<ul> <li>xmllib: clarify that find_date_in_string() finds only 1 date (#1477) (b4210dc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1050-2025-02-26","title":"10.5.0 (2025-02-26)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_29","title":"Enhancements","text":"<ul> <li>allow legal info in XML (DEV-4599) (#1431) (c3f1b15)</li> <li>parse migration metadata in <code>DataDeserialised</code> (DEV-4612) (#1457) (412a747)</li> <li>xmllib: implement license and copyright (DEV-4354) (#1427) (f48b827)</li> <li>xmllib: support \"15 Jan 2025\" in find_date_in_string() (RDU-75) (#1461) (1b17163)</li> <li>xmllib: support german month names in find_date_in_string() (RDU-76) (#1462) (81aa0b9)</li> <li>xmlupload: change name of id2iri mapping file (DEV-4601) (#1438) (dd079ff)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_24","title":"Bug Fixes","text":"<ul> <li>excel2xml: filter out blanks-only strings from create_json_excel_list_mapping() (#1472) (8ba9a18)</li> <li>xmllib: don't spam user with dsp-tools internal logging/printing (DEV-4595) (#1430) (e7f6449)</li> <li>xmllib: don't spam user with dsp-tools internal logging/printing, the second (DEV-4595) (#1459) (9b0847a)</li> <li>xmllib: fix authorship block (#1460) (a32f0af)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_33","title":"Maintenance","text":"<ul> <li>add a UUID to the <code>ValueInformation</code> when parsing the XML (DEV-4617) (#1458) (b908d48)</li> <li>bump dependencies (#1432) (cd703e8)</li> <li>bump stack to DSP 2025.02.03 (#1440) (fb7ff98)</li> <li>bump versions of GitHub actions (#1433) (3eb0be9)</li> <li>create: change structure of parsed project (#1425) (1a360fb)</li> <li>create: move ontology creation to separate file (#1426) (3e4f23f)</li> <li>create: reorganise code (#1424) (decfa24)</li> <li>enable darglint only in <code>xmllib</code> (#1449) (dc91e54)</li> <li>fix too many blank lines for test-latest-be.yml (#1429) (28d36ec)</li> <li>move typing-extensions to dev-dependencies (#1436) (86f3415)</li> <li>move xml parsing and validation files (#1445) (7cd763f)</li> <li>release-please: update uv.lock automatically (DEV-4596) (#1435) (5adaf04)</li> <li>release-please: update uv.lock automatically, 2nd attempt (DEV-4596) (#1446) (4bdac59)</li> <li>release-please: update uv.lock automatically, 3rd attempt (DEV-4596) (#1453) (33842e4)</li> <li>remove copyright and license tags from xsd (#1423) (6bdf2c6)</li> <li>remove redundant text encoding check (#1452) (d504513)</li> <li>reorganise XML cleaning functions (#1456) (da07379)</li> <li>separate asset value from others in deserialise xml (DEV-4610) (#1448) (b7467d8)</li> <li>unpin dependencies (#1439) (4a88d10)</li> <li>Update uv.lock after version pinning is removed from pyproject.toml (#1441) (db5c1ee)</li> <li>Update uv.lock with new version number (#1421) (e049458)</li> <li>validate-data: move parsing files to utils (#1447) (a61d7b6)</li> <li>xmllib: move file value serialisation out of the classes (#1434) (51b0414)</li> <li>xmllib: move resource serialisation out of the class (#1437) (e52539e)</li> <li>xmlupload: create <code>Stash</code> from <code>IntermediaryResource</code> (#1467) (96afbc2)</li> <li>xmlupload: create info for graph from <code>DataDeserialised</code> (DEV-4622) (#1464) (568f526)</li> <li>xmlupload: extract information from graph from <code>IntermediaryResource</code> (#1468) (bb97e76)</li> <li>xmlupload: make listnode lookup congruent with <code>DataDeserialised</code> (#1471) (f3f784a)</li> <li>xmlupload: move resource transformation files (#1469) (c379a66)</li> <li>xmlupload: move transformed resource into the <code>UploadState</code> (#1444) (47577c2)</li> <li>xmlupload: re-organise circular reference files (#1463) (92a4465)</li> <li>xmlupload: remove creation of UUID from circular references models constructor (#1466) (9cc0d80)</li> <li>xmlupload: use <code>IntermediaryFileValue</code> for ingest upload (#1443) (c3c121e)</li> <li>xmlupload: wrap info for circular references in class (#1465) (258f871)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1040-2025-02-12","title":"10.4.0 (2025-02-12)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_30","title":"Enhancements","text":"<ul> <li>excel2json: allow list names to contain colons (DEV-4580) (#1418) (5007fb2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_34","title":"Maintenance","text":"<ul> <li>bump stack to 2025.02.02 (#1420) (0ebe609)</li> <li>optimise release process: deduce api commit hash from version tag (#1410) (ee1b39e)</li> <li>test: don't print user facing warnings during test runs (#1415) (55bff2e)</li> <li>Update uv.lock (#1404) (8e48113)</li> <li>validate-data: class structure of <code>InputProblem</code> (#1406) (7c6b6a6)</li> <li>validate-data: harmonise datatype of <code>ValidationResult</code> parameters (#1416) (1ff12ac)</li> <li>validate-data: make instance variable names uniform (#1407) (b02bd1e)</li> <li>validate-data: move mappers and constants to own file (#1409) (4057609)</li> <li>validate-data: simplify cardinality message construction (#1417) (29bccf7)</li> <li>validate-data: simplify mapping from violation to user facing problem (#1411) (06c0bc7)</li> <li>validate-data: simplify validation query class structure (#1408) (2319e6b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1030-2025-02-05","title":"10.3.0 (2025-02-05)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_31","title":"Enhancements","text":"<ul> <li>start-stack: remove special docker compose for validation (DEV-4548) (#1386) (a0f8116)</li> <li>validate-data: add <code>AudioSegment</code> and <code>VideoSegment</code> (DEV-4464) (#1384) (0106a35)</li> <li>validate-data: add permissions cardinalities (DEV-4528) (#1381) (2534792)</li> <li>validate-data: validate target of stand-off links (DEV-4443) (#1392) (b37d43c)</li> <li>xmllib: add footnotes helper functions (DEV-4561) (#1398) (c53aca8)</li> <li>xmllib: add helper function to create standoff link tags (DEV-4563) (#1401) (5714ba4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_25","title":"Bug Fixes","text":"<ul> <li>validate-data: add correct query parameter for requesting lists (DEV-4550) (#1388) (443a8da)</li> <li>validate-data: include LinkValueProperty in knora-subset and remove witespaces (DEV-4547) (#1385) (28699b6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_35","title":"Maintenance","text":"<ul> <li><code>just clean</code> removes also built documentation site (#1402) (9c9045d)</li> <li>bump dsp-ingest to v0.18.1 (#1403) (cd01da7)</li> <li>bump versions for 2025.02.01 (#1394) (dce7910)</li> <li>bump versions for 2025.02.01 #2 (#1397) (7719419)</li> <li>revert to previous version (#1395) (fd497ce)</li> <li>Update uv.lock after new release (#1382) (60a963c)</li> <li>xmllib: generalise escape reserved characters function (#1400) (2e57f4b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_20","title":"Documentation","text":"<ul> <li>validate-data: final notes of MVP (#1396) (4385d47)</li> <li>validate-data: write documentation (DEV-4532) (#1387) (30f822a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1020-2025-01-23","title":"10.2.0 (2025-01-23)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_32","title":"Enhancements","text":"<ul> <li>validate-data: <code>seqnum</code> and <code>isPartOf</code> (DEV-4242) (#1373) (832fc4f)</li> <li>validate-data: improve performance time for SHACL construction (DEV-4523) (#1378) (a9bdaac)</li> <li>validate-data: prevent erroneous ontology for <code>seqnum</code> and <code>isPartOf</code>(DEV-4517) (#1374) (070fef7)</li> <li>validate-data: validate <code>hasComment</code> on values (DEV-4472) (#1371) (33f6339)</li> <li>validate-data: validate <code>knora-api:Region</code> (DEV-4462) (#1380) (0b954d6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_36","title":"Maintenance","text":"<ul> <li>bump dependencies / fix new linter errors / format according to new formatter rules (#1368) (4d32cfb)</li> <li>bump versions for 2025.01.02 DSP release (#1379) (65f57e8)</li> <li>upgrade <code>rdflib</code> and fix typing (#1370) (adbe88c)</li> <li>validate-data: add logging (#1377) (92f36c7)</li> <li>validate-data: change SHACLValidator structure (#1375) (57df7eb)</li> <li>validate-data: improve user message (#1363) (77684f0)</li> <li>validate-data: simplify internal representation of file values (#1367) (c9665ca)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1011-2025-01-15","title":"10.1.1 (2025-01-15)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_37","title":"Maintenance","text":"<ul> <li>validate-data: simplify internal Python representation of values (#1362) (3058055)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_21","title":"Documentation","text":"<ul> <li>remove mermaid2 plugin (#1365) (c126b13)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1010-2025-01-15","title":"10.1.0 (2025-01-15)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_33","title":"Enhancements","text":"<ul> <li>xmllib: dsp-base resources: add checks and improve robustness of serialisation (DEV-4485) (#1354) (5b20bc0)</li> <li>xmllib: make checks for non-empty input consistent (DEV-4435) (#1353) (0acc6dd)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_38","title":"Maintenance","text":"<ul> <li>bump start-stack to 2025.01.01 (#1364) (35d0e8f)</li> <li>upgrade <code>rdflib</code> dependency (#1351) (58ff473)</li> <li>upload-files: stream big files (DEV-4469) (#1335) (201c515)</li> <li>validate-data: consolidate constants (#1358) (b60a40f)</li> <li>validate-data: make structure of deserialised dataclasses more generic (#1360) (5563ee0)</li> <li>xmllib: simplify serialisation of values (#1355) (895274b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_22","title":"Documentation","text":"<ul> <li>fix mermaid rendering (#1361) (d1eaed6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1000-2024-12-18","title":"10.0.0 (2024-12-18)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_8","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>remove support for knora-base:Annotation (DEV-4430) (#1314)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_34","title":"Enhancements","text":"<ul> <li>remove support for knora-base:Annotation (DEV-4430) (#1314) (469473a)</li> <li>validate-data: <code>knora-api:LinkObj</code> (DEV-4463) (#1342) (f9dee0f)</li> <li>validate-data: change message for files added to resources without representation (DEV-4453) (#1333) (738ad7f)</li> <li>validate-data: validate <code>DocumentRepresentation</code>, <code>ArchiveRepresentation</code>, <code>TextRepresentation</code> (DEV-4334) (#1331) (c3d69d2)</li> <li>validate-data: validate <code>StillImageRepresentation</code> (DEV-4336) (#1330) (15cdf26)</li> <li>validate-data: validate AudioFileValue (DEV-4332) (#1326) (e0988c6)</li> <li>xmllib: add examples to docstrings (DEV-4423) (#1316) (bfbc2ed)</li> <li>xmllib: ensure that non-empty lists are found during add multiple values (DEV-4421) (#1311) (44b1418)</li> <li>xmllib: expose lib through init and enable colored printing (RDU-39) (#1315) (c5f594d)</li> <li>xmllib: remove <code>add_comment</code> method from base resources if they are mandatory (DEV-4415) (#1307) (fc0f143)</li> <li>xmllib: simplify creation of geometry-prop with classes (RDU-55) (#1300) (b8fb42f)</li> <li>xmlupload: add license / copyright as optional attributes in <code>iiif-uri</code> and <code>bitstream</code> (DEV-4355) (#1293) (d401a49)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_26","title":"Bug Fixes","text":"<ul> <li>ingest-xmlupload: remove leading slash (#1321) (ca3b2aa)</li> <li>remove wrong min cardinality for <code>hasComment</code> in <code>LinkObj</code>(DEV-4465) (#1343) (0f0aa2e)</li> <li>start-stack: allow erasing project on localhost (DEV-4422) (#1338) (0783bde)</li> <li>validate-data: ensure turtle files are in the distribution (DEV-4423) (#1313) (37846cf)</li> <li>validate-data: message of LinkValue in SHACL (DEV-4471) (#1344) (b90f043)</li> <li>xmllib: allow single quotes and plus in URI (#1332) (8285bb3)</li> <li>xmllib: check if richtext input is string like before value conversion (DEV-4418) (#1308) (5d35058)</li> <li>xmllib: correct <code>LinkObj</code> cardinalities according to <code>knora-base</code> (DEV-4434) (#1317) (144d779)</li> <li>xmllib: don't crash if comment input is <code>nan</code> (DEV-4399) (#1297) (d16769f)</li> <li>xmllib: parse richtext correctly (DEV-4419) (#1309) (5a9d9e7)</li> <li>xmllib: remove outdated information in docstring (RDU-66) (#1347) (ac36864)</li> <li>xmlupload: inform user if resource transformation failed (DEV-4456) (#1336) (c797d78)</li> <li>xmlupload: stop complete crash if an error ocurrs during serialisation (DEV-4419) (#1310) (88b8350)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_39","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.12.01 (#1329) (502b9f9)</li> <li>just: <code>just clean</code>: ignore errors (#1334) (4c0df87)</li> <li>upgrade deps / fix new typing errors of types-lxml / resolve 1 warning (#1323) (7253422)</li> <li>validate-data: change deserialisation in preparation for dsp in-built resource validation (#1340) (fd92906)</li> <li>validate-data: change exclusion of properties from gui-order to <code>isEditable</code> (DEV-4281) (#1337) (d8867cd)</li> <li>validate-data: change graph creation (#1346) (c0435bd)</li> <li>validate-data: rename cardinality turtle file (#1341) (acfd1f1)</li> <li>xmllib: change boolean conversion (#1324) (363fbb6)</li> <li>xmlupload: adapt intermediary resource transformation (#1319) (087ac5e)</li> <li>xmlupload: allow pretty printing bitstream and iiif-uri (DEV-4404) (#1306) (0e46387)</li> <li>xmlupload: correct <code>isSegmentOf</code> into the correct property name when parsing the XML (#1305) (a8098e8)</li> <li>xmlupload: create intermediary class structure for data (#1304) (207a04f)</li> <li>xmlupload: create resource with rdflib (#1339) (f5d66a5)</li> <li>xmlupload: group file for the preparation of an upload (#1328) (78717d3)</li> <li>xmlupload: integrate intermediary class structure into upload (#1320) (9889219)</li> <li>xmlupload: serialise file values with rdflib (#1288) (e47d38c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_23","title":"Documentation","text":"<ul> <li>fix indentation and content of ingest-xmlupload (#1301) (d61d83f)</li> <li>xmllib: alphabetical ordering for non-classes (#1292) (09cda09)</li> <li>xmllib: fix small mistakes (#1312) (6f8f526)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#920-2024-11-25","title":"9.2.0 (2024-11-25)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_35","title":"Enhancements","text":"<ul> <li>allow uploading JSON files as assets (DEV-4327) (#1267) (8f6be06)</li> <li>rename CLI command <code>xml-validate</code> to <code>validate-data</code> (DEV-4219) (#1203) (8c10f83)</li> <li>start-stack: make api version necessary for validation accessible through a flag (DEV-4200) (#1194) (081a6f2)</li> <li>validate-data: add unique value constraint (DEV-4202) (#1236) (595bb11)</li> <li>validate-data: check file value cardinality (DEV-4338) (#1264) (cefc466)</li> <li>validate-data: ensure only known resources are used (DEV-4268) (#1263) (dbbaefe)</li> <li>validate-data: make content validation conform with <code>dash</code> syntax (DEV-4233) (#1211) (2af7a69)</li> <li>validate-data: validate <code>MovingImageRepresentation</code> (DEV-4333) (#1268) (4594ff9)</li> <li>validate-data: validate cardinality with <code>dash:closedByTypes</code> (DEV-4231) (#1209) (e883cbb)</li> <li>validate-data: validate generic content of values (DEV-4225) (#1208) (86042ff)</li> <li>validate-data: validate link value class type (DEV-4237) (#1215) (9e306c2)</li> <li>validate-data: validate list nodes (DEV-4131) (#1240) (332387a)</li> <li>validate-data: validate text value type (DEV-4209) (#1205) (cafca60)</li> <li>xmllib: add <code>create_label_to_name_list_node_mapping()</code> to lib (DEV-4293) (#1245) (c0cdbeb)</li> <li>xmllib: add english and german to boolean value converter (DEV-4311) (#1260) (9b70810)</li> <li>xmllib: add factory method to resources (DEV-4189) (#1185) (99c76ea)</li> <li>xmllib: add helpers from <code>excel2xml</code> to <code>xmllib</code> (DEV-4316) (#1261) (fb88558)</li> <li>xmllib: add migration metadata to resources (DEV-4194) (#1190) (1784065)</li> <li>xmllib: add optional value to dsp base resource (DEV-4289) (#1244) (ef309ba)</li> <li>xmllib: change order of parameters in add values (DEV-4255) (#1232) (44b3d44)</li> <li>xmllib: check tags of richtext values (RDU-58) (#1282) (289251a)</li> <li>xmllib: create permissions (DEV-4192) (#1191) (cfe95aa)</li> <li>xmllib: rename add multiple function (DEV-4249) (#1223) (df5f87f)</li> <li>xmllib: rename default permissions enum (DEV-4248) (#1222) (8b5f858)</li> <li>xmllib: replace newline with XML tag (DEV-4195) (#1189) (3419b34)</li> <li>xmlvalidate: add CLI command (DEV-4119) (#1193) (1db3135)</li> <li>xmlvalidate: add save graph flag to CLI (DEV-4206) (#1199) (aa55a2f)</li> <li>xmlvalidate: reformat validation results graph (DEV-4133) (#1187) (e655d98)</li> <li>xmlvalidate: save large number of errors as csv (DEV-4208) (#1200) (841975a)</li> <li>xmlvalidate: send validation request to API (DEV-4177) (#1186) (57099e4)</li> <li>xmlvalidate: value type checks (DEV-4122) (#1197) (bf509cd)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_27","title":"Bug Fixes","text":"<ul> <li>add missing dependency in xmllib (DEV-4254) (#1228) (26bd3dc)</li> <li>ci: pin the python version used in the CI (#1230) (ec75682)</li> <li>create: always respect admin status of user in JSON file (DEV-4239) (#1217) (0e3c654)</li> <li>ingest-xmlupload: correctly encode special chars / support absolute paths (DEV-4156, DEV-4166) (#1247) (435e283)</li> <li>ingest-xmlupload: strip leading <code>/</code> of absolute paths before sending to ingest (DEV-4300) (#1252) (695b189)</li> <li>ingest: escape slash in filepath / improve error communication (#1291) (b580f89)</li> <li>validate-data: don't crash if list nodes have special characters (DEV-4299) (#1251) (e7871fc)</li> <li>validate-data: enable usage of other ontologies besides the default ontology (DEV-4263) (#1235) (a2f7959)</li> <li>validate-data: extract richtext as string if it starts with a tag (DEV-4280) (#1250) (71eaa23)</li> <li>validate-data: fix inheritance cardinality violations in properties (DEV-4278) (#1241) (e745e2a)</li> <li>validate-data: prevent SimpleText Class shape to be used at the wrong place (DEV-4224) (#1206) (e0e686f)</li> <li>validate-data: revert to exclusion of properties through gui-order (DEV-4279) (#1242) (e78f4f8)</li> <li>xmllib: make permission serialisation into correct string (DEV-4256) (#1225) (1be649a)</li> <li>xmllib: resolve typing issues (RDU-57) (#1270) (172054c)</li> <li>xmllib: turn <code>Resource.new()</code> into <code>staticmethod</code> (DEV-4250) (#1220) (00a66d9)</li> <li>xmlupload: downgrade fuseki to prevent backend from crashing (#1201) (12ebe12)</li> <li>xmlvalidate: duplicate cardinalities of LinkValues (DEV-4203) (#1198) (a8a67ab)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_40","title":"Maintenance","text":"<ul> <li>bump dependencies (#1231) (bb10677)</li> <li>bump start-stack to 2024.11.01 (#1290) (4de93b8)</li> <li>change default permissions to new standard (RDU-48) (#1180) (8dedbe2)</li> <li>ci: delegate python installation to uv (#1218) (0d7f91c)</li> <li>ci: use uv publish instead of twine (#1219) (39f91d8)</li> <li>fix <code>just clean</code> recipe (#1269) (5ce8b6f)</li> <li>make info string of schema validation more precise (#1202) (59bd01a)</li> <li>Move authentication out of general purpose connection (DEV-3762) (#1238) (4456c56)</li> <li>remove obsolete python version definitions (#1221) (a34b45d)</li> <li>remove some pre-commit-hooks (DEV-4295) (#1243) (f1e7894)</li> <li>rename folder with test data (#1204) (e147d55)</li> <li>tidy up generated data after ingest e2e tests (#1275) (8599250)</li> <li>validate-data: change base info extraction from validation report (DEV-4258) (#1227) (c1f78a2)</li> <li>validate-data: change identification of FileValue cardinality violation (DEV-4342) (#1286) (bd85640)</li> <li>validate-data: change identification of property from guiOrder to isEditable (DEV-4241) (#1234) (ec57ba1)</li> <li>validate-data: extract requests to api from clients (DEV-4294) (#1246) (84df21c)</li> <li>validate-data: include onotlogy name in LinkValue violation message (DEV-4275) (#1262) (d42b363)</li> <li>validate-data: make abstract methods explicit (#1276) (cd2f940)</li> <li>validate-data: move prefix constants to separate file (#1210) (a4b08f7)</li> <li>validate-data: optimise queries for user results (DEV-4244) (#1224) (2e42602)</li> <li>validate-data: refactor <code>ShaclValidator</code> (DEV-4199) (#1239) (f0cb819)</li> <li>validate-data: separate cardinality and content validation (DEV-4217) (#1207) (c0b057e)</li> <li>xmllib: check and convert erroneous input datatypes (DEV-4190) (#1184) (8ea7914)</li> <li>xmllib: fix typing in XMLRoot (#1229) (2f60f0e)</li> <li>xmllib: improve decimal checks (#1195) (324e7ca)</li> <li>xmllib: remove \"title\" parameter from (Video|Audio)SegmentResource.create_new() (#1258) (99478f1)</li> <li>xmlupload: bundle resource serialisation scripts (#1289) (b3960a4)</li> <li>xmlupload: change serialisation of date value (#1277) (2b31398)</li> <li>xmlupload: change serialisation of file value (#1273) (a8b1b68)</li> <li>xmlupload: change serialisation of values (#1279) (f82383a)</li> <li>xmlupload: change serialisation of values with rdflib (#1274) (ec14df4)</li> <li>xmlupload: make value transformers (#1280) (f8466e2)</li> <li>xmlupload: move create resource out of <code>resource_create_client</code> (#1283) (7f66210)</li> <li>xmlupload: serialise all values with rdflib (#1287) (3728089)</li> <li>xmlupload: serialise color prop in class (#1271) (46ce0d1)</li> <li>xmlupload: serialise resource (#1278) (839bb2e)</li> <li>xmlupload: serialise values in classes (#1272) (0279615)</li> <li>xmlvalidate: ignore built-in dsp-properties (DEV-4191) (#1192) (3c01cfb)</li> <li>xmlvalidate: improve error message (DEV-4201) (#1196) (6b386e9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_24","title":"Documentation","text":"<ul> <li>fix documentation of <code>--no-iiif-uri-validation</code> (#1237) (755a8f0)</li> <li>start-stack: describe how to login in locally running DSP-APP (RDU-54) (#1266) (6ae63d1)</li> <li>xmllib: add minimal docstrings (DEV-4297) (#1257) (4c029f1)</li> <li>xmllib: make args consistent (DEV-4314) (#1259) (fb5f5a9)</li> <li>xmllib: serve docstrings on docs.dasch.swiss (DEV-4298) (#1256) (7db2f94)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#910-2024-10-01","title":"9.1.0 (2024-10-01)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_36","title":"Enhancements","text":"<ul> <li>validate: reformat input XML data (DEV-4124) (#1164) (45af782)</li> <li>validate: Write SHACL Shapes Turtle File (api-shapes) (DEV-4120) (#1163) (afb2a21)</li> <li>xmllib: new functionality (RDU-38) (#1129) (1dc09f8)</li> <li>xmlvalidate: add cardinalitiy restrictions to resource (DEV-4121) (#1178) (d2536c7)</li> <li>xmlvalidate: get ontologies from API (DEV-4150) (#1171) (2e599bd)</li> <li>xmlvalidate: SPARQL create resource SHACL (DEV-4123) (#1174) (ff550b3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_28","title":"Bug Fixes","text":"<ul> <li>excel2json: write newlines correctly into the \"description\" field of the JSON file (RDU-45) (#1170) (889d11f)</li> <li>ingest-xmlupload: only convert absolute path from mapping CSV to relative path if necessary (#1176) (72ee250)</li> <li>progress bar recovers after resizing the Terminal window (DEV-4110) (#1161) (7b4cc12)</li> <li>start-stack: <code>--latest</code> flag ships latest versions of all backend components, instead of only API (DEV-4100) (#1159) (6bbec2c)</li> <li>xmlupload: allow more URLs (#1177) (f9aa882)</li> <li>xmlupload: increase timeout for file uploads to 10 min (#1169) (a5766ee)</li> <li>xmlupload: subpar output of onto consistency check (DEV-3727) (#1143) (edb58a9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_41","title":"Maintenance","text":"<ul> <li>bump ruff (#1172) (e65c753)</li> <li>bump stack to 2024.09.01 (#1183) (28a9f1c)</li> <li>deps-dev: bump the all-dependencies group across 1 directory with 9 updates (#1148) (07910b6)</li> <li>migrate from poetry to uv (DEV-4040) (#1160) (6845b1a)</li> <li>Revert \"chore: Fix tests not being executed on release-please branch\" (#1158) (3af3d91)</li> <li>xmllib: make dsp built-in resources interface consistent (DEV-4186) (#1182) (1f10fb3)</li> <li>xmlupload: remove lineColor key from geometry value JSON object (DEV-4132) (#1166) (8169cce)</li> <li>xmlvalidate: change qname transformation (#1168) (9efe030)</li> <li>xmlvalidate: change structure of XML deserialisation (DEV-4125) (#1173) (50a35e3)</li> <li>xmlvalidate: rename test fixtures files (#1175) (b023c6d)</li> <li>xmlvalidate: replace value BN with IRI (DEV-4187) (#1181) (1a34288)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_25","title":"Documentation","text":"<ul> <li>fix syntax mistakes in ontology.md (#1162) (dba4770)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#902-2024-09-04","title":"9.0.2 (2024-09-04)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_42","title":"Maintenance","text":"<ul> <li>Add comment to CI so that this does not get broken again (#1156) (7e3c2ec)</li> <li>Attempt to fix release issues by bringing back the GH_TOKEN (#1153) (0853e25)</li> <li>Fix release issues by using DASCHBOT PAT (#1154) (4684c91)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#901-2024-09-04","title":"9.0.1 (2024-09-04)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_29","title":"Bug Fixes","text":"<ul> <li>bump stack to 2024.08.02 (#1149) (9190dbf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_43","title":"Maintenance","text":"<ul> <li>Fix releasing to PyPI (DEV-3972) (#1151) (b1ba08b)</li> <li>Fix tests not being executed on release-please branch (#1152) (325006b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#900-2024-09-03","title":"9.0.0 (2024-09-03)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_9","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>xmlupload: change representation of  and  in XML due to XSD schema validation problems (DEV-3964) (#1101)"},{"location":"DSP-TOOLS/changelog/#enhancements_37","title":"Enhancements","text":"<ul> <li>xmlupload: add resource type to error message when checking for encoding mistakes (RDU-25) (#1145) (7279b69)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_30","title":"Bug Fixes","text":"<ul> <li>excel2json-lists: remove erroneous warning if comments column exist (RDU-23) (#1141) (4ed0a7e)</li> <li>excel2json: don't crash if json_header.xlsx is present when using the default command (RDU-24) (#1144) (4c4738e)</li> <li>xmlupload: change representation of &lt;video-segment&gt; and  in XML due to XSD schema validation problems (DEV-3964) (#1101) (1476eca) <li>xmlupload: don't rely on requests.Response.json() in case of unsuccessful request (DEV-4035) (#1132) (ff0b1de)</li>"},{"location":"DSP-TOOLS/changelog/#maintenance_44","title":"Maintenance","text":"<ul> <li>bump stack to 2024.08.02 (#1147) (86e764b)</li> <li>don't ignore ARG001 in pre-commit hooks (#1136) (7ea83f7)</li> <li>remove codecov-integration (DEV-4043) (#1142) (042cf06)</li> <li>start-stack: change message for docker prune (DEV-4027) (#1126) (73c7823)</li> <li>surround angular brackets in docstrings by backticks (DEV-4014) (#1135) (7e746e2)</li> <li>turn XMLResource and XMLProperty into dataclasses (#1137) (6c4fe5d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_26","title":"Documentation","text":"<ul> <li>excel2xml: fix params of make_hasSegmentBounds_prop() (#1138) (95b7a84)</li> <li>mention fixed order of video/audio segments (#1139) (7ed7b93)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#850-2024-08-21","title":"8.5.0 (2024-08-21)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_38","title":"Enhancements","text":"<ul> <li>exce2xml-lib: make xsd compatible string without uuid (DEV-4026) (#1127) (50ef476)</li> <li>excel2json-lists: enable to add comments to list nodes (RDU-18) (#1111) (54ba206)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_31","title":"Bug Fixes","text":"<ul> <li>cli: resume-xmlupload --skip-first-resource now works (DEV-3744) (#1084) (7f99287)</li> <li>xmlupload: allow non-prefixed custom groups, and custom groups with dash (DEV-3979) (#1098) (e5a19eb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_45","title":"Maintenance","text":"<ul> <li>bump dependencies and fix new linter errors (#1122) (212e6e5)</li> <li>bump stack to 2024.08.01 (#1128) (400ddbe)</li> <li>excel2json-lists: access columns differently (#1109) (154f88f)</li> <li>excel2json-lists: add excel name to lists problem classes (#1089) (6112506)</li> <li>excel2json-lists: add filename to sheet class (#1090) (2f9e30e)</li> <li>excel2json-lists: change error message format (#1118) (f479aa4)</li> <li>excel2json-lists: change find missing translations (#1112) (ab54d96)</li> <li>excel2json-lists: change location of column info extraction (#1115) (bd163cf)</li> <li>excel2json-lists: change paramter to ExcelSheet in functions (#1091) (a4086c2)</li> <li>excel2json-lists: change sorting of columns (#1110) (4670085)</li> <li>excel2json-lists: remove dead check (#1120) (463c992)</li> <li>excel2json-lists: remove file hierarchy from code (#1094) (3b554a3)</li> <li>excel2json-lists: remove file hierarchy from Problem classes (#1093) (56bd84d)</li> <li>excel2json-lists: remove unnecessary checks (#1107) (71339f7)</li> <li>excel2json-lists: wrap file structure in classes (#1086) (e60002a)</li> <li>excel2json-new-lists: change order of functions (#1100) (0b9a429)</li> <li>excel2json-new-lists: extract fixtures for compliance tests (#1104) (f2b05ac)</li> <li>excel2json: lists delete duplicate tests (#1082) (90280c1)</li> <li>github-action: allow referencing RDU tickets in PR titles (RDU-13) (#1095) (c0f360c)</li> <li>new-lists: reorganise files (#1096) (866f6bd)</li> <li>preparation for new &lt;video-segment&gt; (#1125) (57dd646)</li> <li>send X-Asset-Ingested header only when needed (#1117) (a5279f1)</li> <li>small adaptions to docs + docstrings (#1121) (705c2f7)</li> <li>tidy up readme (#1106) (6663276)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_27","title":"Documentation","text":"<ul> <li>CLI: add flag for IIIF validation in xmlupload in documentation (#1103) (d00f1cf)</li> <li>excel2json: mention old and new at the top (#1123) (cc58c68)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#840-2024-08-07","title":"8.4.0 (2024-08-07)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_39","title":"Enhancements","text":"<ul> <li>excel2json: add option to create header with Excel file (DEV-3898) (#1065) (353d8e9)</li> <li>New workflow for big xmluploads: add commands <code>upload-files</code> and <code>ingest-files</code> (DEV-3905) (#1067) (b4c2912)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_32","title":"Bug Fixes","text":"<ul> <li>don't use copyrighted testdata any more (DEV-3906) (#1068) (1558408)</li> <li>ingest-xmlupload: allow uppercased file extensions (DEV-3963) (#1075) (51a4703)</li> <li>Urlencode filenames when uploading files to ingesta (DEV-3865) (#1045) (4edfbd3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_46","title":"Maintenance","text":"<ul> <li>add logging of requests made in DspIngestClientLive (DEV-3761) (#1064) (84c6101)</li> <li>bump start-stack to 2024.07.02 (#1078) (2a74978)</li> <li>deps: bump the all-dependencies group with 16 updates (#1071) (a893aca)</li> <li>excel2json: change serialisation json header (DEV-3877) (#1046) (f4c6088)</li> <li>excel2json: find duplicate excel sheet names (#1054) (83bb96a)</li> <li>excel2json: generalise InvalidContentInSheetProblem (#1051) (c55603c)</li> <li>excel2json: improve checks for classes sheet in resources.xlsx (#1061) (1839d98)</li> <li>excel2json: move list problems to separate file (#1049) (353c002)</li> <li>excel2json: properties collect problems before raising error (#1063) (5ba6fc1)</li> <li>excel2json: reorder the functions in resources.py (#1060) (6295b02)</li> <li>excel2json: replace ListExcelProblem with ExcelFileProblem (#1052) (b84a185)</li> <li>excel2json: restructure and rename find missing values function (DEV-3909) (#1070) (d42595e)</li> <li>excel2json: serialise property with dataclass (#1059) (0e33238)</li> <li>excel2json: serialise resources with dataclass (#1062) (df11148)</li> <li>excel2json: validate classes sheet in resources.xlsx (#1057) (96b38f7)</li> <li>ignore ARG001 (unused function argument) in .pre-commit-config.yaml (#1066) (06b41d9)</li> <li>performance: add initial k6 excel2json performance test (DEV-3885) (#1056) (3625c62)</li> <li>test: renaming (#1048) (a7f0bca)</li> <li>test: take apart assertions for test_project.py (#1055) (da31d19)</li> <li>upload-files: adapt timeout, so that big files don't fail  (#1077) (1f7b43b)</li> <li>xmlupload: video-segment and audio-segment: clarify docs / allow custom creation date (#1076) (1196afc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_28","title":"Documentation","text":"<ul> <li>add missing commands to docs/index.md (#1079) (231a6b7)</li> <li>tidy up dev docs (#1080) (eeaccc6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#830-2024-07-11","title":"8.3.0 (2024-07-11)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_40","title":"Enhancements","text":"<ul> <li>excel2json: creating classes without any cardinalities (DEV-3755) (#1029) (9e19aa1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_33","title":"Bug Fixes","text":"<ul> <li>excel2json-lists: assignment of wrong parent ID if the node names are identical (DEV-3844) (#1040) (51af556)</li> <li>harmonize supported file extensions in docs, test data, and prod code (DEV-3788) (#1028) (728b782)</li> <li>new-excel2json: don't crash when Excel files are upper-cased (DEV-3808) (#1032) (2a5cc31)</li> <li>xmlupload: allow angular brackets in SimpleText (DEV-3814) (#1033) (cf8e410)</li> <li>xmlupload: don't omit any stashed links (DEV-3827) (#1037) (20e7eac)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_47","title":"Maintenance","text":"<ul> <li>Add db configuration to ingest container (#1039) (48e39ea)</li> <li>bump ruff (#1035) (720d7e9)</li> <li>bump start-stack to 2024.07.01 (#1043) (af6ad29)</li> <li>create: inform user that project membership has to be assinged manually (DEV-3800) (#1030) (5494267)</li> <li>deps: bump certifi from 2024.6.2 to 2024.7.4 (#1041) (550b1cf)</li> <li>deps: bump the all-dependencies group with 12 updates (#1036) (797f351)</li> <li>don't crash when offline (#1034) (c39d610)</li> <li>downgrade pytest, until Assertion Rewriting is fixed (DEV-3786) (#1026) (d2c8ede)</li> <li>downgrade pytest, until Assertion Rewriting is fixed (DEV-3786) (#1038) (d8d8d72)</li> <li>Enable erasing projects locally (#1042) (807db71)</li> <li>improve error messages according to consulting with RDU  (#1031) (e9c9507)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#820-2024-06-19","title":"8.2.0 (2024-06-19)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_41","title":"Enhancements","text":"<ul> <li>add flag to suppress warning when using old dsp-tools version (DEV-3707) (#1001) (e28ba2e)</li> <li>display progress in xmlupload as progress bar (DEV-3708) (#1022) (4ccf628)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_34","title":"Bug Fixes","text":"<ul> <li>ci: bump release-please action (DEV-3526) (#992) (891a889)</li> <li>ci: fix flaky CI tests in rosetta repo (DEV-3733) (#990) (544923f)</li> <li>ci: fix release-please (DEV-3730) (#999) (4798d77)</li> <li>ci: move changelog (DEV-3730) (#1000) (0fae3e7)</li> <li>ci: use GITHUB_TOKEN instead of GH_TOKEN, move CHANGELOG.md back (DEV-3730) (#1002) (1f149de)</li> <li>excel2xml: support backslash in make_text_prop() (DEV-3377) (#991) (6e301d0)</li> <li>excel2xml: support named character references in make_text_prop() (DEV-3738) (#1007) (324c00a)</li> <li>remove GH_TOKEN from release workflows (DEV-3737) (#1006) (1c4f6f1)</li> <li>start-stack: fix display issue in DSP-APP on localhost (DEV-3745) (#1008) (b2d51ca)</li> <li>xmlupload: OntologyConstraintException should not interrupt an xmlupload (DEV-3724) (#995) (50ab6bf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_48","title":"Maintenance","text":"<ul> <li>add yamlfmt to pre-commit (#1009) (569c161)</li> <li>bump start-stack to 2024.06.01 (#1024) (991c6bc)</li> <li>ci: after every PR merge, upload test coverage report for main (DEV-3731) (#1010) (c76b787)</li> <li>ci: only post codecov comment if coverage changes (#1015) (8bee0ec)</li> <li>deps-dev: bump the all-dependencies group with 6 updates (#998) (99ef810)</li> <li>deps: bump the all-dependencies group with 4 updates (#1013) (5a1ac6e)</li> <li>deps: bump urllib3 from 2.2.1 to 2.2.2 (#1023) (bac6c69)</li> <li>fix some low-hanging linter warnings (#1019) (70beea3)</li> <li>fix typo (#1018) (df59932)</li> <li>replace deprecated PR title checker (DEV-3750) (#1016) (e4cd784)</li> <li>start-stack: don't print that stack is ready before it is ready (#997) (9317df2)</li> <li>test: add typing for test_ingest.py (#1020) (c959d31)</li> <li>use yamllint (#1011) (ddb47fd)</li> <li>xmlupload: serialise boolean value (DEV-3713) (#988) (92d3c64)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_29","title":"Documentation","text":"<ul> <li>fix hierarchy of headings in cli-commands (#1012) (210965d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#810-2024-06-04","title":"8.1.0 (2024-06-04)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_42","title":"Enhancements","text":"<ul> <li>add IIIF image support (DEV-3507) (#946) (aa3eabb)</li> <li>xmlupload: interrupt if a resource cannot be created due to server failure (DEV-3444) (#954) (debc0b3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_35","title":"Bug Fixes","text":"<ul> <li>xmlupload: improve ingest performance by reusing session (DEV-3714) (#986) (d818f5d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_49","title":"Maintenance","text":"<ul> <li>deps: bump the all-dependencies group with 9 updates (#984) (1611d65)</li> <li>fix <code>poetry exec clean</code> (#983) (1721b1c)</li> <li>start-stack: print useful error if Docker is not running (#980) (25c036c)</li> <li>start-stack: remove network from docker-compose.yml (#981) (ea6fa08)</li> <li>start-stack: remove unnecessary config from docker-compose.yml (#982) (549d053)</li> <li>update dependencies (#977) (9473a7e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_30","title":"Documentation","text":"<ul> <li>create: fix: descriptions are required in JSON  (#985) (00c8072)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#800-2024-05-22","title":"8.0.0 (2024-05-22)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_10","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>add support for video and audio segments, remove isSequenceOf and standalone interval value (DEV-3439) (#933)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_43","title":"Enhancements","text":"<ul> <li>add support for video and audio segments, remove isSequenceOf and standalone interval value (DEV-3439) (#933) (391da7f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_36","title":"Bug Fixes","text":"<ul> <li>excel2json: erroneous groupby in new-excel2json lists (DEV-3660) (#963) (46fbe95)</li> <li>excel2json: resources don't crash if optional columns are missing (DEV-3516) (#974) (db2df0a)</li> <li>mypy: prevent possibly unbound variables (DEV-3657) (#962) (1be2259)</li> <li>xmlupload: permission for uri value serialise (DEV-3630) (#958) (79a11bb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_50","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.05.02 (#975) (6c02a6a)</li> <li>deps: bump requests from 2.31.0 to 2.32.0 (#972) (092d4f7)</li> <li>do not use ingest client in bulk upload scenario (DEV-3665) (#966) (8614bbe)</li> <li>fix unbound variable error (#961) (7c41507)</li> <li>reduce number of arguments in some functions (#967) (f38f6b4)</li> <li>ruff: Update ruff to 0.4.4 (#951) (316a736)</li> <li>streamline shared logic between upload workflows (#969) (17750e0)</li> <li>Use dsp-ingest instead of sipi for upload of assets  (DEV-3620) (#959) (c797010)</li> <li>xmlupload: add serialise value for URI (DEV-3624) (#955) (0289294)</li> <li>xmlupload: disallow +/- in interval property (#952) (871f312)</li> <li>xmlupload: handle error wider above in the call stack (#960) (c7ba637)</li> <li>xmlupload: refactor resource creation (#917) (cdad095)</li> <li>xmlupload: reorganise models file (#953) (6d90b8f)</li> <li>xmlupload: serialise int value with rdflib (DEV-3626) (#957) (0150fd6)</li> <li>xmlupload: value models (#949) (c69c963)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#720-2024-05-08","title":"7.2.0 (2024-05-08)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_44","title":"Enhancements","text":"<ul> <li>excel2xml: if value is not valid, print warning instead of raising an error (only where it is possible) (DEV-3571) (#938) (3ae536d)</li> <li>new-excel2json: new lists section and excel (DEV-3462) (#916) (92cf58d)</li> <li>start-stack: make pre-loaded projects on localhost optional (DEV-3560) (#932) (d8ab847)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_37","title":"Bug Fixes","text":"<ul> <li>warning_config recursive calls (DEV-3542) (#929) (20b8517)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_51","title":"Maintenance","text":"<ul> <li>add DspToolsUserWarning class  (#936) (fd0871d)</li> <li>add ruff ignore to pre-commit hook (#940) (9b14121)</li> <li>bump start-stack to 2024.05.01 (DEV-3612) (#944) (b1e5a46)</li> <li>deps-dev: bump jinja2 from 3.1.3 to 3.1.4 (#942) (5499e3b)</li> <li>deps: bump the all-dependencies group with 15 updates (#934) (548b6b4)</li> <li>fix typo (#927) (e52a8ce)</li> <li>prepend warning message with category (#937) (e5bbb83)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#713-2024-04-24","title":"7.1.3 (2024-04-24)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_38","title":"Bug Fixes","text":"<ul> <li>allow slashes and semicola in query part of URL (DEV-3480) (#910) (af02895)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_52","title":"Maintenance","text":"<ul> <li>add \"Deprecated\" section in release notes (#918) (8b24372)</li> <li>bump start-stack to 2024.04.02 (#923) (daacd16)</li> <li>bump versions of pre-commit hooks (#914) (7102e94)</li> <li>ci: fix ruff format checking (#915) (270dc6f)</li> <li>deps: bump idna from 3.6 to 3.7 (#912) (4c7bc29)</li> <li>fix excel2xml testdata (#921) (1771f5f)</li> <li>small fixes in pyproject.toml (#913) (ffa6cf3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#deprecated","title":"Deprecated","text":"<ul> <li>deprecate isSequenceOf (DEV-3525) (#920) (b742ef8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#712-2024-04-10","title":"7.1.2 (2024-04-10)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_39","title":"Bug Fixes","text":"<ul> <li>excel2json: if gui_order is empty no warning is longer displayed (DEV-3469) (#908) (a278e3e)</li> <li>excel2properties no longer crashes if optional columns are missing (DEV-3468) (#907) (523d55b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_53","title":"Maintenance","text":"<ul> <li>add type annotations for pandas and networkx (#896) (bb0b3c6)</li> <li>bump start-stack to 2024.04.01 (#905) (04faeec)</li> <li>deps: bump the all-dependencies group with 10 updates (#894) (0e66199)</li> <li>remove .gitmodules file  (#897) (64e4fe3)</li> <li>set api log level in docker-compose.yml (#899) (2a8d574)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_31","title":"Documentation","text":"<ul> <li>precise resume-xmlupload (#900) (9611115)</li> <li>reformulate incremental xmlupload (#902) (e7063d0)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#711-2024-03-27","title":"7.1.1 (2024-03-27)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_54","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.03.02-hotfix (#892) (d4733c6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#710-2024-03-27","title":"7.1.0 (2024-03-27)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_45","title":"Enhancements","text":"<ul> <li>excel2xml: allow for single tags in XML text (DEV-3427) (#885) (c73b126)</li> <li>save warnings and errors in second file with loguru (DEV-3406) (#883) (7818325)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_40","title":"Bug Fixes","text":"<ul> <li>create: fix crash when no project is on the server new error (DEV-3420) (#882) (ca9a674)</li> <li>xmlupload: don't stop xmlupload when resource is wrong (DEV-3419) (#880) (86795ec)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_55","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.03.02 (#891) (ce8d6be)</li> <li>ci: make logging file available after e2e test (DEV-3436) (#887) (5825b3c)</li> <li>fix typo (#889) (be0ae62)</li> <li>remove timestamp from warnings.log (#888) (8fb0842)</li> <li>test: make tests smaller in test_excel2xml_cli.py (#884) (7418870)</li> <li>test: use regex.escape everywhere (#886) (d0061db)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_32","title":"Documentation","text":"<ul> <li>reformulate text-property and gui element (#890) (8d7bb79)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#700-2024-03-13","title":"7.0.0 (2024-03-13)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_11","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>remove --verbose flag from xmlupload (DEV-3389) (#869)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_46","title":"Enhancements","text":"<ul> <li>prompt before continuing when using an outdated version (DEV-3350) (#850) (38907fa)</li> <li>remove --verbose flag from xmlupload (DEV-3389) (#869) (1e2e170)</li> <li>resume an interrupted xmlupload (DEV-3323) (#853) (4acf841)</li> <li>resume-xmlupload: add option to skip the first resource (DEV-3412) (#878) (a53785f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_41","title":"Bug Fixes","text":"<ul> <li>add \"packaging\" as dependency (DEV-3368) (#856) (81508b0)</li> <li>create: fix crash when no project is on the server (DEV-3405) (#875) (9607799)</li> <li>don't retry on 404 project not found (DEV-3362) (#857) (5c19f60)</li> <li>don't retry on errors in the 400 range (DEV-3349) (#877) (c543274)</li> <li>ingest: ingest container must be part of knora-net (DEV-3370) (#858) (cd018ee)</li> <li>pypi: prevent that PR merged into PR is published to pypi (DEV-3394) (#871) (3d5e071)</li> <li>release-please: adapt version check (DEV-3363) (#854) (d04b731)</li> <li>resume-xmlupload: make it impossible to resume after all resources have been created (DEV-3398) (#865) (8aa5d30)</li> <li>resume-xmlupload: make resource counting more user friendly (DEV-3397) (#864) (2b5295d)</li> <li>xmlupload: don't crash if the project has more than 50 errors (DEV-3364) (#855) (a0be38e)</li> <li>xmlupload: don't loose elements when stashing standoff properties (DEV-3151) (#870) (c8e8966)</li> <li>xmlupload: exit with code 0 if xmlupload finishes with batch (DEV-3396) (#863) (8a15973)</li> <li>xmlupload: fix xmlupload text as xml when uploading stash (DEV-3361) (#851) (79a643a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_56","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.03.01 (#879) (b1c8262)</li> <li>connection: call specific error response codes (DEV-3339) (#832) (d8531bd)</li> <li>deps-dev: bump the all-dependencies group with 5 updates (#849) (4c8b942)</li> <li>excel2xml: better error message for invalid text values (#861) (914acd8)</li> <li>fix test_xml_validation_low_level.py (#837) (3e758c7)</li> <li>project create: add erroneously removed exc_info in logging (DEV-3294) (#866) (19d1f25)</li> <li>ruff reformatting (#867) (5ed62fc)</li> <li>ruff.lint.isort: force-single-line (#840) (fb3c1d9)</li> <li>test: make integration test excel2json (#841) (e5b0206)</li> <li>test: make integration test excel2xml (#842) (8b12f8b)</li> <li>test: make integration test general commands (#846) (0e61eef)</li> <li>test: make integration test ingest-xmlupload (#843) (fb58779)</li> <li>test: make integration test project (#844) (a7e0fc6)</li> <li>test: make integration test utils (#847) (089c41d)</li> <li>test: make integration test xmlupload (#845) (f80cc90)</li> <li>xmlupload (#852) (c8e6284)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_33","title":"Documentation","text":"<ul> <li>add guarantee note for resume-xmlupload (#868) (8747edd)</li> <li>excel2xml: code examples in docstrings: prepend function names with their namespace (#859) (7923a8c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#600-2024-02-28","title":"6.0.0 (2024-02-28)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_12","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>Remove fast-xmlupload command (DEV-3324) (#830)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_47","title":"Enhancements","text":"<ul> <li>Remove fast-xmlupload command (DEV-3324) (#830) (0c9d077)</li> <li>xmlupload: check if text encoding in data conforms to type specified in ontology (DEV-3279) (#821) (449f780)</li> <li>xmlupload: check if the encoding in the text-prop is consistent (DEV-3296) (#818) (4ae8469)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_42","title":"Bug Fixes","text":"<ul> <li>don't crash when dsp-tools is run offline (DEV-3338) (#833) (901b86d)</li> <li>excel2json: allow resources to have no cardinalities (DEV-3333) (#834) (b55224a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_57","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.02.02 (#836) (f83ce78)</li> <li>correct docs in regard to gui-element of hasComment (#816) (3f869d9)</li> <li>fix typo in check_consistency_with_ontology.py (#813) (bc01027)</li> <li>ontology_client: make retrieval of ontologies more flexible (DEV-3308) (#820) (327f61e)</li> <li>refactor validate xml in preparation for extension (#814) (652aa9f)</li> <li>remove docker as dependency (#835) (7f98945)</li> <li>renaming functions of ontology checks in xmlupload (#817) (e6b0e7d)</li> <li>test_xmlupload: separate tests (#824) (7333136)</li> <li>test: add pytest entrypoint (#823) (e31da78)</li> <li>test: test_shared.py turn into pytest (#826) (46e7743)</li> <li>test: test_upload_stashed_xml_texts.py turn into pytest (#825) (755323f)</li> <li>test: turn into pytest test_xmlupload.py (#827) (c0d1c97)</li> <li>test: turn xml_utils.py into pytest (#828) (e97084f)</li> <li>update data.xsd regarding TextValue encoding for hasComment (#811) (af86b94)</li> <li>xml_validation: turn into pytest (#815) (516a2de)</li> <li>xmlupload: improve parse xml function (#819) (9947607)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_34","title":"Documentation","text":"<ul> <li>DSP-API uses \"just\" instead of \"make\" (DEV-3212) (#753) (d5c8f97)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#581-2024-02-14","title":"5.8.1 (2024-02-14)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_58","title":"Maintenance","text":"<ul> <li>bump start-stack to 2024.02.01 (#806) (9080f47)</li> <li>models-project: remove all project update code (#802) (1aa39a1)</li> <li>models-user-project: delete dead code (#800) (12813bc)</li> <li>remove dead parameter in ontology client (#809) (8095ba3)</li> <li>remove sourcery (#805) (c3ccc36)</li> <li>rename value.py file into formatted_text_value.py (#807) (90af390)</li> <li>renaming functions in preparation for TextValue verification (#808) (9f06f3f)</li> <li>test-create-project: turn unittests into pytests (#804) (8c667a6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#580-2024-02-01","title":"5.8.0 (2024-02-01)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_48","title":"Enhancements","text":"<ul> <li>excel2json: add optional column \"subject\" to properties.xlsx (DEV-3253) (#777) (cf491e9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_43","title":"Bug Fixes","text":"<ul> <li>don't crash if pip is not found (DEV-3256) (#791) (15f6e31)</li> <li>xmlupload: don't retry on OntologyConstraintException (DEV-3255) (#783) (ef577ac)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_59","title":"Maintenance","text":"<ul> <li>bump start-stack to hotfixed 2024.01.01 (#801) (b721fdd)</li> <li>delete dead code fragments (#792) (c5b9872)</li> <li>deps: bump the all-dependencies group with 8 updates (#787) (0c1a5e2)</li> <li>excel2json-lists: fix two ruff PLW0603 (#778) (5f53c38)</li> <li>model-project: fix one ruff PLR0912 (#782) (25ad02d)</li> <li>models-group: delete unnecessary action object (#794) (24fdc9f)</li> <li>models-listnode: delete actions object (#795) (f7a2ec9)</li> <li>models-listnode: delete dead code (#797) (fea23fd)</li> <li>models-ontology: delete actions object (#796) (28299fa)</li> <li>models-project: delete dead code (#798) (dcdbaaf)</li> <li>models-propertyclass: fix PLR0912 (#784) (51d4265)</li> <li>models-resourceclass: fix ruff PLR0912 (#788) (ed10c27)</li> <li>models-user: fix three ruff PLR0912 (#780) (820fc25)</li> <li>project_client: delete dead code (#793) (b5963de)</li> <li>project_validate: fix one ruff PLR0912 (#781) (9ccd2a7)</li> <li>propertyclass-resourceclass: delete dead code (#799) (d17b656)</li> <li>remove dead code with vulture (#790) (aba9aef)</li> <li>remove ruff ignore PLR0912 (Too many branches) (#789) (e93b049)</li> <li>test_create_get_xmlupload: fix one ruff PLR0912 (#785) (c09c0c6)</li> <li>use pytest's tmp_path fixture (#786) (c01a08f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#570-2024-01-31","title":"5.7.0 (2024-01-31)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_49","title":"Enhancements","text":"<ul> <li>excel2xml: find_date_in_string(): allow time spans of 1 day (DEV-3154) (#720) (59b5d16)</li> <li>excel2xml: make_bitstream_prop(): make file existence check opt-in (DEV-3113) (#709) (1f68943)</li> <li>excel2xml: support 2-digit-years in find_date_in_string() (DEV-2633) (#711) (15d3493)</li> <li>ingest-upload: create new ingest xmlupload cli command (DEV-3019) (#670) (5745190)</li> <li>ingest-xmlupload: add support for dumping HTTP requests (DEV-3167) (#729) (a02dda5)</li> <li>option for custom headers in HTTP requests (DEV-3145) (#702) (0cbc78a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_44","title":"Bug Fixes","text":"<ul> <li>add termcolor as main dependency (DEV-3149) (#706) (4f6cd6d)</li> <li>don't retry login when credentials are invalid (DEV-3224) (#763) (41d8217)</li> <li>excel2xml, xmlupload: allow commas in URLs (DEV-3183) (#742) (1ee6e36)</li> <li>excel2xml: make_text_prop: allow &lt;, &gt;, &amp; in rich texts (DEV-3131) (#691) (228c79f)</li> <li>fix wrong resolution of merge conflict (DEV-3161) (#726) (c81c94d)</li> <li>fully mask passwords in logfile (DEV-3225) (#761) (87c03d4)</li> <li>include stack trace in log file (DEV-3157) (#723) (9046792)</li> <li>increase timeout to prevent doubled resources (DEV-3114) (#698) (930df8f)</li> <li>ingest-xmlupload: apply mapping.csv even if extension has wrong casing (DEV-3197) (#749) (bac7c79)</li> <li>ingest-xmlupload: file check: handle absolute vs. relative paths, save feedback file correctly (DEV-3162) (#727) (c6d2169)</li> <li>prevent crash when venv isn't activated correctly (DEV-3233) (#765) (6d339ed)</li> <li>properly log requests and their responses (DEV-3186) (#745) (8296254)</li> <li>restore authorization header after ConnectionError (DEV-3190) (#744) (d03be2a)</li> <li>retry mechanism again catches return codes in the 500 range (DEV-3177) (#740) (c927c21)</li> <li>xmlupload: retry on all non-OK response statuses (DEV-3214) (#754) (b85e806)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_60","title":"Maintenance","text":"<ul> <li>add PermanentConnectionError to make BaseError slimmer (DEV-3192) (#741) (ed60319)</li> <li>add permission to test data (#768) (a4d93fc)</li> <li>add ruff rule to prevent TODO comments (#738) (e897496)</li> <li>add User-Agent header to HTTP requests (#737) (85e363b)</li> <li>avoid mutable default values in class attributes (DEV-3234) (#764) (1d9e5de)</li> <li>bump all dependencies (#734) (d3e238b)</li> <li>bump GitHub actions that use a deprecated NodeJS version (#766) (84e8ec0)</li> <li>bump start-stack to 2024.01.01 (#771) (2997c05)</li> <li>ci: move setup into reusable workflow (#715) (a3799ce)</li> <li>ci: revert changes related to merge queue (#719) (ff0e4fe)</li> <li>ci: set up merge queue (#717) (1c13f5f)</li> <li>connection: content type doesn't have to be parametrized (#752) (2c0febb)</li> <li>create: in normal workflow, don't rely on failing request (DEV-3220) (#757) (f9b9677)</li> <li>define poetry exec targets for all tools (#695) (c04356b)</li> <li>delete dead code in project context (#770) (5159b8d)</li> <li>don't log errors multiple times (DEV-3195) (#769) (0025784)</li> <li>don't send chat notification on post releases / release only on \"feat\" or \"fix\" (DEV-3148) (#707) (fd9b148)</li> <li>excel2json-properties: reorganise file (#776) (4b8c060)</li> <li>fix pypi.org publishing (#708) (ea56066)</li> <li>fix ruff PLR5501 (#774) (1f88112)</li> <li>get rid of dead code (#751) (f67eac2)</li> <li>get rid of http_call_with_retry (#694) (70f6808)</li> <li>get rid of shared.login() function (#714) (28806a0)</li> <li>hide stack trace from user (DEV-3158) (#724) (808c01c)</li> <li>improve package structure of unittests/cli (#713) (111c6df)</li> <li>improve performance with requests.Session object (DEV-3174) (#739) (43caaf9)</li> <li>log all HTTP requests, get rid of --dump flag (DEV-3171) (#731) (e2b0598)</li> <li>log all requests, also during retry (DEV-3213) (#759) (fd05080)</li> <li>make dev-release to pypi.org on every commit to main (DEV-3130) (#699) (b05690b)</li> <li>make post releases instead of dev releases (DEV-3130) (#705) (94b289d)</li> <li>make XmlUploadError a subclass of BaseError (#746) (12e406f)</li> <li>move session renewal into own method (#755) (7adc837)</li> <li>move to Python 3.12 (#696) (60f64a2)</li> <li>project_validate: fix one ruff PLR0912 (#775) (d7060d6)</li> <li>project-create: clean up one ruff PLR0912 and one PLR0913 (#772) (7902840)</li> <li>project-get: fix ruff PLR0915 (#773) (71b9b2a)</li> <li>PyPI authentication via API token (DEV-3143) (#703) (dd16ef4)</li> <li>refactor test_find_date_in_string (#710) (630df2c)</li> <li>remove duplicated &amp; outdated docstrings from Connection protocol (#758) (2a04f5a)</li> <li>remove unused code (DEV-3152) (#712) (43cba62)</li> <li>replace bandit action by ruff's bandit ruleset (DEV-3026) (#722) (76203cf)</li> <li>resolve PLR0911 in call_requested_action() (#701) (855231e)</li> <li>split up models/helpers.py (#760) (f97cce8)</li> <li>tidy up connection class (#747) (eaa1158)</li> <li>tidy up Connection class (DEV-3191) (#748) (bd915ef)</li> <li>tidy up exceptions (#762) (03213ed)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#560-2023-12-19","title":"5.6.0 (2023-12-19)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_50","title":"Enhancements","text":"<ul> <li>excel2xml: support French BC dates in find_date_in_string() (DEV-3099) (#680) (610f064)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_45","title":"Bug Fixes","text":"<ul> <li>excel2json: support uppercase classes sheet in resources.xlsx (DEV-3109) (#683) (71205f8)</li> <li>excel2xml: find_date_in_string() must not return invalid date (DEV-3116) (#688) (71b754d)</li> <li>xmlupload: saving the csv file if there are more than 50 problems with the ontology names (DEV-3112) (#685) (a7d2e59)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_61","title":"Maintenance","text":"<ul> <li>add pytest-sugar (#692) (1d22716)</li> <li>downgrade start-stack to 2023.11.02 (#693) (09f50ff)</li> <li>move retry logic into the connection implementation (DEV-3110) (#686) (f1a7051)</li> <li>replace pylint, isort, black with ruff (DEV-2972) (#653) (2594d36)</li> <li>resolve Ruff warnings A003, B023, D103 and PLR0911 (#684) (b0f598c)</li> <li>start-stack: adapt docs of --max_file_size flag (DEV_3093) (#689) (af46da8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#550-2023-12-13","title":"5.5.0 (2023-12-13)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_51","title":"Enhancements","text":"<ul> <li>cli: change user output when handling errors (DEV-3067) (#672) (71a1737)</li> <li>excel2json: new error implementation for json validation (DEV-3047) (#664) (fdbc545)</li> <li>excel2json: new user error (InputError) implementation in properties section (DEV-3037) (#654) (b1703e1)</li> <li>xmlupload: improve error message if ontology is unknown (DEV-3024) (#674) (5319ff3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_46","title":"Bug Fixes","text":"<ul> <li>date validation forbids legal values (DEV-3059) (#668) (13131ff)</li> <li>excel2json: find hidden worksheets in excel (DEV-1483) (#679) (ffbf0c0)</li> <li>xmlupload: allow dots in filenames (DEV-3058) (#676) (ad0c37c)</li> <li>xmlupload: allow external link in text value (DEV-3054) (#666) (08f7b93)</li> <li>xmlupload: support uppercase file extensions (DEV-3095) (#678) (24cb320)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_62","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.12.01 (DEV-3105) (#681) (ddd0078)</li> <li>cli: modularise cli.py (DEV-3068) (#673) (f0da1ca)</li> <li>deps: bump the all-dependencies group with 8 updates (#662) (6e307c2)</li> <li>docs: fix outdated link (#669) (5b333c2)</li> <li>excel2json: modularise unittests (DEV-3040) (#659) (107b1b0)</li> <li>excel2json: new excel reader (DEV-3049) (#665) (a0d5776)</li> <li>pandas future warning in unittest (DEV-3060) (#671) (b3f75f4)</li> <li>process-files: diverse improvements (#656) (692ad40)</li> <li>remove tabs (DEV-3043) (#661) (286abf8)</li> <li>update poetry.lock (DEV-3081) (#675) (cd85836)</li> <li>xmlupload: clean up handle media information (DEV-3086) (#677) (93fb71f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#540-2023-11-29","title":"5.4.0 (2023-11-29)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_52","title":"Enhancements","text":"<ul> <li>xmlupload: check consistency with ontology on server (DEV-2921) (#630) (a563c07)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#530-2023-11-29","title":"5.3.0 (2023-11-29)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_53","title":"Enhancements","text":"<ul> <li>excel2xml: add support for 3-digit-years in find_date_in_string() (DEV-3005) (#652) (1afee03)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_47","title":"Bug Fixes","text":"<ul> <li>process-files: fix resource leak, try omitting restart of python (DEV-2986) (#651) (7347be7)</li> <li>upload-files: use a new ThreadPoolExecutor for every batch (DEV-2973) (#650) (431a755)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_63","title":"Maintenance","text":"<ul> <li>add sourcery workflow to CI checks (#646) (8b445f2)</li> <li>apply sourcery suggestions (#644) (96110a0)</li> <li>bump start-stack to 2023.11.02 (#657) (c399dee)</li> <li>excel2json: modularise functions (DEV-3025) (#655) (5486b15)</li> <li>more sourcery refactorings (#647) (300bfa0)</li> <li>refactor import-scripts (#649) (9272898)</li> <li>remove unnecessary pylint ignore comments (#645) (d314121)</li> <li>replace os.path and os.scandir with pathlib.Path (#648) (e325237)</li> <li>use iri util consistently (DEV-2951) (#642) (911cfa5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#520-2023-11-15","title":"5.2.0 (2023-11-15)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_54","title":"Enhancements","text":"<ul> <li>xmlupload: add check if links point to valid resource ID (DEV-2902) (#639) (803c9f6)</li> <li>xmlupload: id2iri mapping contains servername (DEV-1889) (#628) (19a3f29)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_48","title":"Bug Fixes","text":"<ul> <li>retain value permissions if a link gets stashed because of circular dependencies (DEV-1489) (#623) (3ccb75b)</li> <li>upload-files: handle JSONDecodeError (DEV-2907) (#621) (40000a8)</li> <li>upload-files: prevent crash (DEV-2918) (#626) (19d179e)</li> <li>xmlupload: fix non-initialized variable (DEV-2922) (#629) (afb16b1)</li> <li>xmlupload: print reason of failure if resource cannot be created (DEV-2925) (#637) (e3a194a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_64","title":"Maintenance","text":"<ul> <li>add clean script to remove unnecessary files (#631) (7f98045)</li> <li>add more logs and timestamps (#627) (21ed1d8)</li> <li>bump start-stack (apply DSP-APP fix) (#641) (f901399)</li> <li>bump start-stack to 2023.11.01 (#633) (81daf2a)</li> <li>excel2xml: suppress irrelevant warnings, turn non-fatal errors into warnings (DEV-2917) (#625) (b6943a2)</li> <li>remove unused code (DEV-2950) (#638) (fbbafec)</li> <li>reorganize excel2xml (#635) (6773513)</li> <li>reorganize excel2xml unit tests (#636) (d015f9f)</li> <li>replace resource instance factory (DEV-2876) (#594) (906a211)</li> <li>restructure repository (#632) (8a05b2c)</li> <li>restructure stash-related files (#640) (a49fa59)</li> <li>upload-files: thread-safe logging of bullet point lists (#619) (37040a6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_35","title":"Documentation","text":"<ul> <li>replace admin.dasch.swiss by app.dasch.swiss (#634) (ae06161)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#510-2023-11-01","title":"5.1.0 (2023-11-01)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_55","title":"Enhancements","text":"<ul> <li>xmlupload: reduce stash size of circular references (DEV-2848) (#599) (228b1f7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_49","title":"Bug Fixes","text":"<ul> <li>don't create logging handler multiple times (DEV-2891) (#609) (e6aa47c)</li> <li>ignore IRIs in stashing algorithm (DEV-2885) (#603) (635bc5c)</li> <li>IRI regex used in multiple places is incorrect (DEV-2888) (#606) (096f47e)</li> <li>prevent endless waiting for response, without creating resources multiple times (DEV-2860) (#586) (caa16b7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_65","title":"Maintenance","text":"<ul> <li>add a client for project related API requests (DEV-2890) (#610) (e100b26)</li> <li>add logging to stashing algorithm (DEV-2881) (#608) (736f02b)</li> <li>add specific model for bitstream information (DEV-2893) (#613) (8d0d61d)</li> <li>bump start-stack to 2023.10.03 (#616) (213c301)</li> <li>deps: bump the all-dependencies group with 8 updates (#617) (1a2fdd6)</li> <li>fix analyse_circles_in_data() (remove namespaces) (#598) (72f710c)</li> <li>fix logging statements (#611) (1f95f8d)</li> <li>further refactoring of graph analysing (#590) (d0779ac)</li> <li>improve logging for upload-files (#614) (f99e755)</li> <li>log dsp-tools version (#612) (ab9ffef)</li> <li>refactor graph analysing (#589) (14a6e83)</li> <li>split up test_rosetta.py into smaller functions (#601) (33c9fce)</li> <li>test_construct_and_analyze_graph: remove namespace, add semantic line breaks (#602) (b693a94)</li> <li>tidy up graph analyzing (#595) (f2d4488)</li> <li>tidy up KnoraStandoffXml class (#597) (c430b67)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_36","title":"Documentation","text":"<ul> <li>fix broken links (#604) (7c19894)</li> <li>fix typos in docs (#615) (a7ecd47)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#503-2023-10-20","title":"5.0.3 (2023-10-20)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_50","title":"Bug Fixes","text":"<ul> <li>xmlupload: misleading warning when uploading stashed XML texts (DEV-2793) (#559) (1e2c8f2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_66","title":"Maintenance","text":"<ul> <li>bump dependencies (#578) (6d9f082)</li> <li>bump start-stack to 2023.10.02 (#584) (37ca185)</li> <li>bump start-stack to 2023.10.02 (DEV-2823) (#571) (863c631)</li> <li>CI: split up test action into several jobs (#553) (cfb5042)</li> <li>clarify isort and pre-commit in readme (DEV-2781) (#549) (e58fec1)</li> <li>create composite setup action and allow more PR titles (#550) (2084999)</li> <li>create JSON-LD context without API request (DEV-2845) (#581) (dcc655d)</li> <li>create specific objects for stash information (DEV-2787) (#557) (b38c2d3)</li> <li>deps: bump urllib3 from 2.0.6 to 2.0.7 (#575) (a41b174)</li> <li>identify temporary text values with UUID instead of text hash (DEV-2790) (#558) (08624b2)</li> <li>integrate DSP-INGEST in start-stack (#566) (e8fb38b)</li> <li>introduce abstraction layer for connection (DEV-2820) (#570) (87c1e18)</li> <li>modularize xmlupload (DEV-2813) (#568) (8026fcb)</li> <li>modularize xmlupload method (DEV-2836) (#574) (b9588c3)</li> <li>remove leftovers of old --metrics flag (#583) (3234318)</li> <li>remove use of XMLResource in stash models (DEV-2843) (#577) (05dc486)</li> <li>start-stack: downgrade DSP-APP (#576) (8c109e4)</li> <li>use sets instead of lists for stashing circular references (DEV-2771) (#548) (68605bd)</li> <li>xmlupload: optimize stash links (DEV-2847) (#573) (1d20fad)</li> <li>xmlupload: split up get resources and permissions function (DEV-2796) (#560) (02eff6b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_37","title":"Documentation","text":"<ul> <li>xmlupload: day-precision dates should be written with end date (DEV-2802) (#564) (c69af60)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#502-2023-10-05","title":"5.0.2 (2023-10-05)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_51","title":"Bug Fixes","text":"<ul> <li>fast-xmlupload: CLI-command in documentation has outdated information (DEV-2779) (#545) (334ea49)</li> <li>ModuleNotFoundError when importing logging due to identical file name (DEV-2708) (#530) (d2c6ec8)</li> <li>xmlupload: fix performance slowdown during stash applying (DEV-2717) (#533) (add40b2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_67","title":"Maintenance","text":"<ul> <li>add isort check in pre-commit and GitHub CI (DEV-2707) (#529) (89ef086)</li> <li>add logging statements to \"create\" command (DEV-2776) (#544) (73183c4)</li> <li>bump start-stack to 2023.10.01 (DEV-2748) (#546) (3240d5d)</li> <li>deps: bump dependencies (#535) (bf93bc8)</li> <li>deps: bump dependencies (#537) (cbcd2f3)</li> <li>harmonize timestamps between terminal output and log file (DEV-2716) (#534) (9160eea)</li> <li>remove unnecessary PR template (DEV-2691) (#525) (e2c41ec)</li> <li>use faster black in pre-commit hook (DEV-2736) (#536) (ad00e4b)</li> <li>xmlupload: _upload_stashed_xml_texts (DEV-2710) (#532) (9d2dd35)</li> <li>xmlupload: create new directory and move scripts (DEV-2715) (#538) (6bad8d0)</li> <li>xmlupload: file upload_stashed_resptr_props.py (DEV-2774) (#542) (422bbb3)</li> <li>xmlupload: file xmlupload.py (DEV-2775) (#543) (16fefae)</li> <li>xmlupload: modularise individual functions in file read_validate_xml_file.py (DEV-2767) (#541) (dc5c5a7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_38","title":"Documentation","text":"<ul> <li>xmlupload: invalid example: properties must be unique (DEV-2711) (#531) (5f9060f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#501-2023-09-20","title":"5.0.1 (2023-09-20)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_52","title":"Bug Fixes","text":"<ul> <li>excel2json: correct row number in error message (DEV-2650) (#513) (03a59ee)</li> <li>excel2json: don't crash if optional columns are deleted in \"properties\" Excel file (DEV-2652) (#518) (09c3940)</li> <li>id2iri mapping is written with a question mark after the file extension (DEV-2670) #522 (3fc1bb9)</li> <li>no-op test that doesn't test anything (DEV-2655) (#517) (76f1db2)</li> <li>upload-files: close file handle before handling error (DEV-2666) #519 (439a139)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_68","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.09.02 (DEV-2690) (#524) (6f5b935)</li> <li>documenation cleaning (DEV-2602) (#503) (52485c0)</li> <li>excel2json: replace BaseError with UserError (DEV-2671) (#523) (eaf8dd6)</li> <li>excel2json: replace excel reader in excel2resources (DEV-2668) (#520) (f2f0d4e)</li> <li>fix gui_attributes notation (DEV-2651) (#514) (8c97cc3)</li> <li>improve PR title checking regex (DEV-2635) (#509) (c25f3b7)</li> <li>pandas deprecated .applymap (DEV-2617) (#510) (925b13d)</li> <li>pandas deprecates inplace parameter (DEV-2618) (#511) (8d6d3f7)</li> <li>small corrections (DEV-2653) #515 (99db5f1)</li> <li>xmlupload: split up _check_consistency_with_ontology() into smaller functions (DEV-2669) (#521) (79a50cf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#500-2023-09-06","title":"5.0.0 (2023-09-06)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_13","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>xmlupload: allow both IDs and IRIs, remove --incremental flag (DEV-1339) (#494)</li> <li>refactor id2iri: remove --outfile and --verbose flags (DEV-2576) (#488)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_56","title":"Enhancements","text":"<ul> <li>add --dump flag to \"xmlupload\" and \"get\" commands (DEV-2534) (#502) (d9aeba9)</li> <li>get project without credentials (DEV-841) (#504) (b5ea3e9)</li> <li>id2iri: add flag to remove created resources from XML (DEV-2571) (#491) (bf25cb7)</li> <li>id2iri: replace IDs also inside salsah-links, not only inside &lt;resptr&gt; tags (DEV-2578) (#490) (047ba15)</li> <li>xmlupload: allow both IDs and IRIs, remove --incremental flag (DEV-1339) (#494) (df1cf13)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_53","title":"Bug Fixes","text":"<ul> <li>process-files: default value of batchsize is too big (DEV-2573) #486 (b1775a9)</li> <li>process-files: remove docker container before starting / add user feedback (DEV-2601) (#505) (8e1b77c)</li> <li>process-files: the derivatives are created only at the end (DEV-2625) (#507) (1934403)</li> <li>xmlupload: provide a helpful error message if default-ontology in XML file doesn't exist (DEV-2577) #489 (7b20ad8)</li> <li>xmlupload: sanitize textvalues: remove whitespaces and newlines (DEV-2569) (#484) (d6c8110)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_69","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.09.01 (DEV-2630) (#508) (d28f2d8)</li> <li>deps: bump the all-dependencies group with 3 updates (#501) (f4f6ff8)</li> <li>excel2json (DEV-2547) (#487) (504a4ec)</li> <li>improve release-please YAML file (DEV-2599) #492 (82b3b82)</li> <li>mute warnings in tests / update gitignore (DEV-2609) #498 (03e19d7)</li> <li>refactor id2iri: remove --outfile and --verbose flags (DEV-2576) (#488) (f814667)</li> <li>refactor models/connection.py (DEV-2534) (#495) (a9caf98)</li> <li>refactor process-files (DEV-2623) (#506) (7595846)</li> <li>rename excel_to_json to excel2json (DEV-2604) #496 (5a31d5d)</li> <li>run unit tests earlier in GitHub CI (DEV-2600) #493 (00d5ed6)</li> <li>some small bug fixes and improvements (DEV-2564) (#483) (ecd09e9)</li> <li>use typing.TypeGuard for check_notna() (DEV-2608) #497 (2c4e2f8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#400-2023-08-22","title":"4.0.0 (2023-08-22)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_14","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>harmonize CLI flags, rename CLI entry point and add tests for the CLI (DEV-2525) (#463)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_54","title":"Bug Fixes","text":"<ul> <li>fix bandit workflow configuration (DEV-2536) #470 (4fd6a10)</li> <li>Make gui_attributes Mandatory for Spinbox in JSON Schema (DEV-2556) (#478) (671d846)</li> <li>process-files: in case of Docker API error, don't processes files a second time (DEV-2533) #468 (bace9aa)</li> <li>upload-files: handle server error, document how to circumvent resource leak (DEV-2528, DEV-2527) (#464) (7aa7106)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_70","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.08.02 (DEV-2561) #482 (84fb0a9)</li> <li>configure bandit security checks (DEV-2532) (#466) (28a4907)</li> <li>deps: bump dependencies #467 (a488161)</li> <li>deps: bump dependencies #473 (57aa687)</li> <li>diverse refactorings (DEV-2559) (#480) (e29299b)</li> <li>explain in readme that imagemagick and ffmpeg must be installed for local testing (DEV-2558) #479 (a000ab3)</li> <li>fix bandit: always exit with 0 (DEV-2536) #476 (c5351b4)</li> <li>harmonize CLI flags, rename CLI entry point and add tests for the CLI (DEV-2525) (#463) (c1218d6)</li> <li>lint XML models (DEV-2560) (#481) (f2e4c88)</li> <li>move to Python 3.11 (DEV-2524) #461 (74a93e5)</li> <li>refactor models.bitstream (DEV-2538) #472 (6e2deff)</li> <li>replace re by regex (DEV-2531) (#465) (8ac8c99)</li> <li>use darglint to check if the docstrings match the actual implementation (DEV-2530) (#453) (8183235)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_39","title":"Documentation","text":"<ul> <li>update outdated link (DEV-2537) #471 (9f5c468)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#300-2023-08-08","title":"3.0.0 (2023-08-08)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_57","title":"Enhancements","text":"<ul> <li>create: in property definitions of JSON files, accept references to list labels (DEV-2247) (#460) (1529330)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_55","title":"Bug Fixes","text":"<ul> <li>upload-files, fast-xmlupload: handle multiple pickle files (DEV-2500) (#451) (98f0b97)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#breaking-changes_15","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>replace gui_element Slider by Spinbox, remove gui_element SimpleText for intervals, et al. (DEV-2501) (#452) (5e668f0)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_71","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.08.01 (DEV-2514) #458 (65f2719)</li> <li>create: apply law of Demeter (DEV-2515) (#459) (46cdf19)</li> <li>deps-dev: bump the all-dependencies group with 2 updates (#454) (57527cd)</li> <li>deps: bump dependencies #456 (15096e7)</li> <li>handle timeout errors in API requests (DEV-2513) (#457) (4cdaf2a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#250-2023-07-28","title":"2.5.0 (2023-07-28)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_58","title":"Enhancements","text":"<ul> <li>guess subdomains based on conventions (DEV-1979) (#445) (d6c4ff4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#bug-fixes_56","title":"Bug Fixes","text":"<ul> <li>process-files: quit Python interpreter after every batch to prevent \"too many open files\" error (DEV-2268) (#402) (1cbf927)</li> <li>start-stack: fix outdated TTL paths, open config file correctly (DEV-2497) (#447) (98e0579)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_72","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.07.02 (DEV-2499) #450 (61af5da)</li> <li>deps: bump dependencies (#449) (8fd23d4)</li> <li>increase timeout from 5 to 10 seconds (DEV-2450) #438 (4f82d2e)</li> <li>run dependabot monthly, and group updates into 1 single PR (DEV-2498) #448 (e03d633)</li> <li>xmlupload: forbid empty strings in some tags of the XML, et al. (DEV-2439) (#433) (679654d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#240-2023-07-11","title":"2.4.0 (2023-07-11)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_57","title":"Bug Fixes","text":"<ul> <li>create: if the name of the ontology is used in a propertyname, it gets removed (DEV-2406) #429 (e6292f0)</li> <li>xmlupload: make sure resources aren't created multiple times after timeout error (DEV-2412) #432  (b109e3c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_59","title":"Enhancements","text":"<ul> <li>start-stack: add flag to start stack from main branch of DSP-API repository (DEV-2396) (#424) (6ff2c48)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_73","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.07.01 (DEV-2428) (#430) (8e11b95)</li> <li>deps-dev: bump black from 23.3.0 to 23.7.0 (#431) (1aeb778)</li> <li>deps-dev: bump mkdocs-material from 9.1.17 to 9.1.18 (#426) (7a54181)</li> <li>deps: bump jsonschema from 4.17.3 to 4.18.0 (#428) (4b1a9ff)</li> <li>deps: bump lxml from 4.9.2 to 4.9.3 (#427) (1e933b3)</li> <li>deps: bump pandas from 2.0.2 to 2.0.3 (#422) (70b38b0)</li> <li>refactor start-stack (DEV-2397) (#423) (679a267)</li> <li>refine/resolve ignore comments, resolve pylint issues (DEV-2398) (#425) (906c8a3)</li> <li>set up pre-commit hooks (DEV-2393) (#420) (9578181)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#234-2023-06-27","title":"2.3.4 (2023-06-27)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_58","title":"Bug Fixes","text":"<ul> <li>xmlupload: allow colon in URL (DEV-2318) (#419) (b79ab23)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_74","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.06.02 (DEV-2312) #418 (88a4bf3)</li> <li>deps-dev: bump mkdocs-material from 9.1.16 to 9.1.17 (#414) (313b923)</li> <li>deps-dev: bump mypy from 1.3.0 to 1.4.0 (#413) (919fd8e)</li> <li>deps-dev: bump mypy from 1.4.0 to 1.4.1 (#415) (2867a00)</li> <li>deps-dev: bump pytest from 7.3.2 to 7.4.0 (#416) (8d6b587)</li> <li>deps-dev: bump types-openpyxl from 3.1.0.12 to 3.1.0.13 (#417) (7b53622)</li> <li>lint \"models\", part two (DEV-2287) (#406) (466597c)</li> <li>onto create (DEV-2298) #412 (d8abe48)</li> <li>remove dependency inconsistency in pyproject.toml (DEV-2290) #410 (9da9ccf)</li> <li>remove unused code (DEV-2289) (#409) (809f4fe)</li> <li>xmlupload: improve error handling of Timeout Error (DEV-2299) (#411) (b9cf8eb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#233-2023-06-13","title":"2.3.3 (2023-06-13)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_59","title":"Bug Fixes","text":"<ul> <li>fast xmlupload: make process-files more robust (DEV-2235) (#395) (12d527b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_75","title":"Maintenance","text":"<ul> <li>add overview of code quality tools; format code with black (DEV-2224) (#391) (d7fb690)</li> <li>allow latest version of poetry again (DEV-2245) #398 (3d646ad)</li> <li>bump start-stack to 2023.06.01 (DEV-2272) #401 (d684c18)</li> <li>deps-dev: bump pytest from 7.3.1 to 7.3.2 (#403) (6dbcf6c)</li> <li>deps-dev: bump types-openpyxl from 3.1.0.8 to 3.1.0.9 (#405) (12a97d6)</li> <li>deps-dev: bump types-regex from 2023.5.5.0 to 2023.6.3.0 (#397) (067e265)</li> <li>deps: bump docker from 6.1.2 to 6.1.3 (#393) (2a79fe6)</li> <li>deps: bump regex from 2023.5.5 to 2023.6.3 (#396) (6ee38c9)</li> <li>lint \"models\", part one (DEV-2265) (#400) (27a32b1)</li> <li>loosen python requirement, add py.typed marker (DEV-2278) (#404) (17b22b3)</li> <li>reformat code (DEV-2263) (#399) (35af8c4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#232-2023-05-31","title":"2.3.2 (2023-05-31)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_76","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.05.03 (DEV-2222) #392 (80bdecb)</li> <li>deps-dev: bump mkdocs-material from 9.1.14 to 9.1.15 (#390) (18287c3)</li> <li>deps-dev: bump types-requests from 2.30.0.0 to 2.31.0.0 (#382) (74738fa)</li> <li>deps-dev: bump types-requests from 2.31.0.0 to 2.31.0.1 (#389) (1829fd5)</li> <li>deps: bump pandas from 2.0.1 to 2.0.2 (#388) (e23bb10)</li> <li>don't configure logging statically (DEV-2183) (#385) (7c82a59)</li> <li>move _derandomize_xsd_id (DEV-2186) #381 (e909384)</li> <li>refactor CLI part of excel2xml (DEV-2190) (#384) (cd9cbb7)</li> <li>remove autopep8 from dependencies (DEV-2213) #387 (993854b)</li> <li>speed up CI tests with caching (DEV-2165) (#369) (9283aa1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#231-2023-05-23","title":"2.3.1 (2023-05-23)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_60","title":"Bug Fixes","text":"<ul> <li>process-files: allow files with whitespaces in filename, allow files with uppercase extension (DEV-2182) (#379) (7f63743)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_77","title":"Maintenance","text":"<ul> <li>code formatting (DEV-2171) (#376) (96a4056)</li> <li>deps-dev: bump mkdocs-material from 9.1.11 to 9.1.14 (#377) (8095f6f)</li> <li>deps-dev: bump types-openpyxl from 3.1.0.7 to 3.1.0.8 (#374) (c536ebc)</li> <li>deps: bump requests from 2.30.0 to 2.31.0 (#378) (b932e03)</li> <li>enable automatic version updating by Dependabot (DEV-2170) #373 (bd1cfd2)</li> <li>lint e2e tests (DEV-2160) (#366) (e75eb27)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#230-2023-05-17","title":"2.3.0 (2023-05-17)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_61","title":"Bug Fixes","text":"<ul> <li>get: write proper tests for get command, fix multiple bugs (DEV-2123) (#356) (edd671d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_40","title":"Documentation","text":"<ul> <li>render nested lists correctly, adapt markdownlint rules, apply new rules everywhere (DEV-2134) (#358) (e899d5c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_60","title":"Enhancements","text":"<ul> <li>fast XML upload (DEV-1626) (#352) (c2f46ea)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_78","title":"Maintenance","text":"<ul> <li>bump dependencies, add docker, update readme, remove unused poetry exec script (DEV-2159) (#365) (69d65e7)</li> <li>bump start-stack to 2023.05.01 (DEV-2164) #368 (646586b)</li> <li>deps: bump pymdown-extensions from 9.11 to 10.0 (#370) (1764e81)</li> <li>excel2xml: minor improvements (DEV-2152) #360 (1d24848)</li> <li>log every CLI call to dsp-tools (DEV-2156) #362  (a93cb86)</li> <li>make all test files executable with pytest (DEV-2157) (1e4d427)</li> <li>prevent access to unset attribute of BaseError (DEV-2158) #364 (b0e089d)</li> <li>resolve CodeQL issues (DEV-2169) #371 (6822344)</li> <li>update mypy, resolve all mypy+pylint issues in \"unittests\", unignore \"unittests\" in CI pipline (DEV-2131) (#357) (b75e2c7)</li> <li>XML validation: resource's iri and ark must be unique, resource's label must not be empty (DEV-2154) (#361) (62ec04b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#222-2023-05-03","title":"2.2.2 (2023-05-03)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_62","title":"Bug Fixes","text":"<ul> <li>xmlupload: print reason of error if a resource cannot be created, remodel BaseError (DEV-1977) (#349) (7f60b1a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_79","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.04.03 (DEV-2117) (#355) (1abb081)</li> <li>resolve linting errors, make linting checks in CI more strict (DEV-2080) (#354) (e3daff3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#221-2023-04-18","title":"2.2.1 (2023-04-18)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_80","title":"Maintenance","text":"<ul> <li>bump dependencies (DEV-1960) #350 (5b999f5)</li> <li>bump start-stack to 2023.04.02 (DEV-1933) (#351) (163ac19)</li> <li>get: allow shortname to be uppercase (DEV-1972) #346 (e0ce7d4)</li> <li>inside a JSON or Excel file, resource &amp; property names must be unique (DEV-1971) (#345) (c6df889)</li> <li>refactor try_network_action() (DEV-1844) (#325) (896586f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#220-2023-03-21","title":"2.2.0 (2023-03-21)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_63","title":"Bug Fixes","text":"<ul> <li>allow Pulldown, Radio, and List as gui_elements for lists (DEV-1810) (#330) (5ff1aac)</li> <li>correct broken schema references in test data files (DEV-1832) #323 (512de36)</li> <li>create, get: handle comment to ontology (DEV-1852) #326 (5af3f19)</li> <li>create: allow identical onto names if they belong to different projects (DEV-1777) (#314) (7139f67)</li> <li>create: prevent infinite loop when super-resource is not existing (DEV-1886) (#338) (b176b7c)</li> <li>xmlupload: legitimate html-escapes in utf8-texts don't raise a validation error any more (DEV-1936) (#341) (cf90269)</li> <li>xmlupload: write metrics only when requested to do so (DEV-1883) #334 (5c1196f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_61","title":"Enhancements","text":"<ul> <li>check out rosetta and upload it on local stack (DEV-1842) (#332) (d067cc1)</li> <li>create: create a resource class without cardinalities (DEV-1853) #327 (2d1cee0)</li> <li>new command to generate template repo, move schema files (DEV-1839) (#333) (9ea3a4f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_41","title":"Documentation","text":"<ul> <li>replace outdated screenshot, use local copy of CSS of dsp-docs (DEV-1896) (#337) (c22c5e4)</li> <li>use single quotes around passwords to prevent problems with special characters (DEV-1825) #320 (ca2bf1a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_81","title":"Maintenance","text":"<ul> <li>adapt shortcode of import scripts (DEV-1925) (#340) (f440bda)</li> <li>bump start-stack to 2023.03.02 (DEV-1819) (#317) (54a4514)</li> <li>excel2json: improve error messages of excel2json (DEV-1789) (#315) (36a1209)</li> <li>implement logging system (DEV-132) (#335) (c92e943)</li> <li>merge dublette class into one class (DEV-1831) #322 (e5cddf5)</li> <li>minor improvements (DEV-1912) #336 (91664a9)</li> <li>new error handling strategy (DEV-1770) (#324) (f2aa4b0)</li> <li>remove pystrict dependency (DEV-1843) #329 (2111d21)</li> <li>save location for log files (DEV-1856) (#328) (30f914d)</li> <li>tidy up testdata folder (DEV-1822) (#319) (b5fe9fd)</li> <li>xmlupload: improve user feedback when shortcode or onto are inexistent (DEV-1827) (#321) (f21a64e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#211-2023-03-08","title":"2.1.1 (2023-03-08)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_64","title":"Bug Fixes","text":"<ul> <li>excel2json: add missing comments in the resources template (DEV-1765) #303 (b2532e4)</li> <li>excel2xml: make_xsd_id_compatible() does now replace all special characters (DEV-1792) (#313) (b87f903)</li> <li>excel2xml: proper handling of special characters in text properties, depending on the encoding (DEV-1719) (#296) (c8f1e7a)</li> <li>get: prevent invalid gui_element \"Pulldown\" (DEV-1781) #312 (c5d355e)</li> <li>invalid argument names in CLI entrypoint (DEV-1776) #310 (6e1a6fb)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_82","title":"Maintenance","text":"<ul> <li>allow input of xmlupload to be parsed (DEV-1780) (#311) (abc167f)</li> <li>beautify stack traces (DEV-1766) #305 (17b6f2f)</li> <li>bump start-stack to 2023.03.01 (DEV-1802) (#316) (3d3f476)</li> <li>harmonize CLI help texts with the CLI commands documentation (DEV-1767) (#306) (f9e4dca)</li> <li>new error handling strategy (DEV-1773) (#307) (4c02e18)</li> <li>refactor list creation (DEV-1775) (#309) (78a8488)</li> <li>refactor onto creation (DEV-1774) (#308) (f5a16e4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#210-2023-02-21","title":"2.1.0 (2023-02-21)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_65","title":"Bug Fixes","text":"<ul> <li>create: improve validation to prevent endless loop if properties are undefined (DEV-1720) (#297) (ee3e446)</li> <li>create: property from other ontology not found (DEV-1381) #299 (d1345ec)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_42","title":"Documentation","text":"<ul> <li>fix identical heading problem, assimilate mkdocs config to dsp-docs (DEV-1713) (#294) (c235ff3)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_62","title":"Enhancements","text":"<ul> <li>excel2json: add support for gui_order, make templates better understandable (DEV-1711) (#293) (3b5304f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_83","title":"Maintenance","text":"<ul> <li>bump start-stack to 2023.02.02 (DEV-1732) #302 (b97a696)</li> <li>enhanced xmlupload: add test onto (DEV-1760) #300 (ca32842)</li> <li>excel2xml: allow PathLike for bitstream-prop (DEV-1729) #298 (ab9386f)</li> <li>remove temporary workaround in GET groups (DEV-1733) #301 (7ead9de)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#203-2023-02-07","title":"2.0.3 (2023-02-07)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_43","title":"Documentation","text":"<ul> <li>restructure docs, add link-checking (DEV-1623) (#286) (d65ff53)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_84","title":"Maintenance","text":"<ul> <li>access data files correctly (DEV-1618) (#288) (7a64a27)</li> <li>bump start-stack to 2023.02.01 (DEV-1709) (#292) (5fd58d2)</li> <li>bump versions of start-stack to 2023.01.02 (DEV-1652) (#290) (2889a20)</li> <li>update links according to new structure of docs (DEV-1648) (#289) (16d9c12)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#202-2023-01-17","title":"2.0.2 (2023-01-17)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_66","title":"Bug Fixes","text":"<ul> <li>get command fails if no groups are on the server (DEV-1622) (#283) (d6bf458)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_44","title":"Documentation","text":"<ul> <li>fix broken links, make dsp-tools uppercase (DEV-1550) (#284) (aa66109)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#201-2023-01-17","title":"2.0.1 (2023-01-17)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_85","title":"Maintenance","text":"<ul> <li>bump versions of start-stack, use dynamic project IRI in get command (DEV-1613) (#282) (2ecf4f5)</li> <li>refactor project creation (DEV-1165) (#280) (5e662a6)</li> <li>use start-stack command for e2e tests, replace Makefile by poetry-exec-plugin (DEV-1597) (#279) (6b85d15)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#200-2023-01-09","title":"2.0.0 (2023-01-09)","text":""},{"location":"DSP-TOOLS/changelog/#breaking-changes_16","title":"\u26a0 BREAKING CHANGES","text":"<ul> <li>switch to src layout, use poetry, add developer docs (DEV-1523) (#276)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_86","title":"Maintenance","text":"<ul> <li>adapt schema URLs, adapt title of release-please PR (DEV-1596) (#278) (67f6475)</li> <li>switch to src layout, use poetry, add developer docs (DEV-1523) (#276) (6ae3b4f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1222-2022-12-21","title":"1.22.2 (2022-12-21)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_67","title":"Bug Fixes","text":"<ul> <li>start-stack: copy docker folder to user's home directory (DEV-1581) (#274) (b0ebfc5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1221-2022-12-20","title":"1.22.1 (2022-12-20)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_68","title":"Bug Fixes","text":"<ul> <li>start-stack: use TTL files from DSP-API v24.0.8 (DEV-1580) (#273) (3ad96ba)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_45","title":"Documentation","text":"<ul> <li>improve documentation of DSP permission system (DEV-1561) (#270) (33ab59d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1220-2022-12-19","title":"1.22.0 (2022-12-19)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_69","title":"Bug Fixes","text":"<ul> <li>excel2xml: better standard permissions (permissions definitions at top of XML file) (DEV-1560) (#268) (b0d30be)</li> <li>xmlupload: improve URL recognition (DEV-1557) (#266) (60f8fe5)</li> <li>xmlupload: prevent crash + improve error message when cardinalities are wrong (DEV-1559) #267 (7bfd82f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_46","title":"Documentation","text":"<ul> <li>excel2json: use rosetta as example data (DEV-1478) (#254) (af192cb)</li> <li>readme: explain handling of git submodules (DEV-1502) (#256) (1dc8483)</li> <li>text values: describe which combinations of gui_element and encoding are desirable (DEV-1521) (#259) (21967c6)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_63","title":"Enhancements","text":"<ul> <li>use docker commands for stack handling (DEV-1530) (#261) (c11edc5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_87","title":"Maintenance","text":"<ul> <li>bump versions of GitHub actions (DEV-1532) #263 (efc9f51)</li> <li>fix regex for PR title (DEV-1504) (#257) (d4feb68)</li> <li>start-api: adjust version numbers of DSP-API and DSP-APP according to 2022.11.01 (DEV-1579) #271 (10dcd2f)</li> <li>xmlupload: add metrics flag (DEV-1512) (#264) (f4822dc)</li> <li>xmlupload: handling of upload errors (DEV-1505) (#250) (1507b21)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1210-2022-11-11","title":"1.21.0 (2022-11-11)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_70","title":"Bug Fixes","text":"<ul> <li>bugs in json schema (DEV-1142) (#252) (92af830)</li> <li>excel2xml: prevent writing empty text-prop, make text-prop validation less restrictive (DEV-1440) #243 (ae777e4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_64","title":"Enhancements","text":"<ul> <li>add command excel2json to create JSON project file from folder with Excel files (DEV-960) (#248) (e8e05e4)</li> <li>startup API and APP with dsp-tools (DEV-126) (#246) (de182dc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_47","title":"Documentation","text":"<ul> <li>improve docs (DEV-1478) (#249) (7947dec)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1200-2022-10-18","title":"1.20.0 (2022-10-18)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_88","title":"Maintenance","text":"<ul> <li>xmlupload: improve error message when syntax for referencing ontos is wrong (DEV-1399) (#237) (df0bf33)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_48","title":"Documentation","text":"<ul> <li>user needs to be project member to become project admin (DEV-1383) (#241) (1a13c02)</li> <li>xmlupload: improve examples, add documentation of geometry-prop JSON format (#240) (7df1d86)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_65","title":"Enhancements","text":"<ul> <li>xmlupload: enable migration of resource creation date (DEV-1402) (#238) (83dd2de)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1190-2022-10-07","title":"1.19.0 (2022-10-07)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_71","title":"Bug Fixes","text":"<ul> <li>fix command <code>dsp-tools xmlupload --validate</code> (DEV-1360) (#230) (0b2bd40)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_66","title":"Enhancements","text":"<ul> <li>address feedback to <code>excel2xml</code>: remove param <code>values</code> in all <code>make_*_prop()</code> methods, and fix some bugs (DEV-1361) (#232) (a7e9d85)</li> <li>change input format of <code>excel</code> command: use 1 Excel file for all same-language lists, rename command to <code>excel2lists</code> (DEV-955) (#228) (21cc6bc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_49","title":"Documentation","text":"<ul> <li>improve docs and example data for excel2xml: create repo 0123-import-scripts (DEV-1370) (#233) (9c6827e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_89","title":"Maintenance","text":"<ul> <li>bump versions (DEV-1117) #235 (fc9c03c)</li> <li>fix release-please (DEV-1396) #234 (3bd92d8)</li> <li>reduce GitHub workflow frequency (DEV-1344) #227 (a0722d8)</li> <li>tests: enforce JKD 17 (DEV-1366) (#231) (1036acd)</li> <li>tidy up excel2lists, excel2resources, excel2properties (DEV-1352) (#229) (d2c2e08)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1180-2022-09-09","title":"1.18.0 (2022-09-09)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_67","title":"Enhancements","text":"<ul> <li>add module csv2xml to convert tabular data to DSP-XML (DEV-134) (#219) (19393aa)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_90","title":"Maintenance","text":"<ul> <li>tidy up makefile (DEV-1166) (#223) (dca0854)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_50","title":"Documentation","text":"<ul> <li>clarify docs of onto creation (DEV-1164) (#225) (f64d2cf)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1171-2022-08-22","title":"1.17.1 (2022-08-22)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_72","title":"Bug Fixes","text":"<ul> <li>bugs in xmlupload and resource.py (DEV-1140) #217 (5e402e4)</li> <li>PyPI deployment (DEV-1270) (#220) (dafaa7e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1170-2022-08-16","title":"1.17.0 (2022-08-16)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_73","title":"Bug Fixes","text":"<ul> <li>catch network interruptions during onto creation (DEV-1073) (#210) (ab0e3b2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_91","title":"Maintenance","text":"<ul> <li>stop serving docs to dasch-swiss.github.io (DEV-826) (#211) (f2d25f9)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_51","title":"Documentation","text":"<ul> <li>add links from usage subpage to other subpages (DEV-812) (#208) (92ac678)</li> <li>fix outdated links (DEV-1194) #215 (6849737)</li> <li>sort entries alphabetically (DEV-1184) (#212) (75c6ae5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_68","title":"Enhancements","text":"<ul> <li>add isSequenceOf (DEV-746) (#214) (991d424)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1160-2022-07-18","title":"1.16.0 (2022-07-18)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_69","title":"Enhancements","text":"<ul> <li>xmlupload: implement , , and  tags (DEV-855) (#204) (5044a9e)"},{"location":"DSP-TOOLS/changelog/#1151-2022-06-23","title":"1.15.1 (2022-06-23)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_74","title":"Bug Fixes","text":"<ul> <li>excel2resources, excel2properties: cover all cases (DEV-1040) (#201) (4c6ed19)</li> <li>xmlupload crashes without writing id2iri mapping (DEV-813) (#194) (7948e75)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_92","title":"Maintenance","text":"<ul> <li>unpin dependency versions (DEV-983) (#200) (5c56601)</li> <li>xmlupload: refactor xmlupload, add unittest (DEV-1043) (#203) (fcf8384)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1150-2022-06-02","title":"1.15.0 (2022-06-02)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_75","title":"Bug Fixes","text":"<ul> <li>onto validation: correctly identify circular dependencies (DEV-769) (#192) (ed35902)</li> <li>testdata: remove salsah-links from id2iri/test-id2iri-data.xml (DEV-975) (#199) (7548501)</li> <li>xmlupload: prevent crash with incremental option (DEV-811) (#197) (cccb5e8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_70","title":"Enhancements","text":"<ul> <li>add romansh (DEV-867) (#193) (86d3e6a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_52","title":"Documentation","text":"<ul> <li>xmlupload: better explanation of permissions (DEV-969) (#196) (d3efde8)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1140-2022-05-03","title":"1.14.0 (2022-05-03)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_71","title":"Enhancements","text":"<ul> <li>xmlupload: support Baseclass MovingImageRepresentation (#185) (7ebf588)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_53","title":"Documentation","text":"<ul> <li>fix typos in documentation (DEV-849) (#189) (f887edd)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_93","title":"Maintenance","text":"<ul> <li>json-schema: change JSON schema version to draft-07 (DEV-848) (#188) (8ca6f87)</li> <li>update lists.json (DEV-851) (#190) (e0254be)</li> <li>update schema-files (DEV-449) (#187) (9a5a50b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1130-2022-04-25","title":"1.13.0 (2022-04-25)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_76","title":"Bug Fixes","text":"<ul> <li>get: handle slash at end of server, improve docs (DEV-734) (17c0a40)</li> <li>groups: dsp-tools should not allow group creation if group name already in use (DEV-798) (#183) (8f168ca)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_72","title":"Enhancements","text":"<ul> <li>add support for external ontologies (dev-512) (#170) (ff36bc1)</li> <li>get: get more infos from user (DEV-641) (#181) (407f5c5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_94","title":"Maintenance","text":"<ul> <li>bump dependencies (DEV-815) (#184) (5d2d109)</li> <li>change to pipenv (DEV-764) (#177) (6c44688)</li> <li>improve XML and JSON Schemas (DEV-449) (#180) (2c17b9d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1122-2022-03-31","title":"1.12.2 (2022-03-31)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_77","title":"Bug Fixes","text":"<ul> <li>add missing dependency (DEV-763) (1cda29e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1121-2022-03-31","title":"1.12.1 (2022-03-31)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_95","title":"Maintenance","text":"<ul> <li>remove bazel (DEV-735) (#172) (e12e9dd)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1120-2022-03-25","title":"1.12.0 (2022-03-25)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_78","title":"Bug Fixes","text":"<ul> <li>onto creation: prevent sorting algorith from modifying original ontology (#169) (9a9e5f0)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_73","title":"Enhancements","text":"<ul> <li>onto creation: allow that resources and properties are not sorted by inheritance (DEV-626) (#167) (2ebece3)</li> <li>xmlupload: allow circular references (DEV-577) (#165) (75a444f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1110-2022-02-28","title":"1.11.0 (2022-02-28)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_74","title":"Enhancements","text":"<ul> <li>improve prefix handling in json ontos (DEV-572) (#164) (8610885)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1101-2022-02-23","title":"1.10.1 (2022-02-23)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_54","title":"Documentation","text":"<ul> <li>add explanation how an Excel file for list creation must be structured (DEV-533) (#159) (660d57b)</li> <li>explain the interval-prop more precisely (#162) (00c18dc)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#1100-2022-02-21","title":"1.10.0 (2022-02-21)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_55","title":"Documentation","text":"<ul> <li>add validate argparse info to xmlupload (#156) (08ddebd)</li> <li>improve docs (DEV-450) (#152) (be5b69f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_96","title":"Maintenance","text":"<ul> <li>excel to json list (DEV-431) (#155) (8a8c9d0)</li> <li>xml-upload: print XML validation errors when xmlupload fails due to validation (DEV-387) (#149) (03554c2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_75","title":"Enhancements","text":"<ul> <li>improve json schema validation error output (DEV-456) (#153) (9f92b66)</li> <li>make comments optional for new properties and resources (DEV-502) (#158) (9c30746)</li> <li>ontology: add Representation (DEV-551) (#160) (cba7be0)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#190-2022-01-27","title":"1.9.0 (2022-01-27)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_56","title":"Documentation","text":"<ul> <li>add isPartOf and seqnum properties to documentation (DEV-216) (#145) (09d42a4)</li> <li>dsp-tools-excel: mention the GUI order and other small improvements (DEV-99) (#148) (853068d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_76","title":"Enhancements","text":"<ul> <li>xmlupload: use custom IRIs created from salsah ARKs for XML upload (DEV-179) (#147) (873324a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#181-2022-01-11","title":"1.8.1 (2022-01-11)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_79","title":"Bug Fixes","text":"<ul> <li>problem with reference to list values (DEV-356) (#143) (3fce99a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_97","title":"Maintenance","text":"<ul> <li>deps: bump nltk from 3.6.5 to 3.6.6 (#142) (4f91098)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#180-2022-01-10","title":"1.8.0 (2022-01-10)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_80","title":"Bug Fixes","text":"<ul> <li>ontology: add default values for missing comments (DEV-337) (#141) (6f0094e)</li> <li>print only unresolvable resptrs (#139) (cbe1876)</li> <li>restrict the creation of classes without cardinalities (DEV-305) (#136) (5604a5b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_77","title":"Enhancements","text":"<ul> <li>excel-to-json: allow comments in class and property definitions (#111) (807959f)</li> <li>get: extend get command to get more information (DEV-139) (#137) (9ce6722)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_98","title":"Maintenance","text":"<ul> <li>improve ontology schema and extend tests (DEV-313) (#140) (656ccff)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#171-2021-12-14","title":"1.7.1 (2021-12-14)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_81","title":"Bug Fixes","text":"<ul> <li>groups: make groups optional (DEV-138) (#135) (6aa1aa7)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_99","title":"Maintenance","text":"<ul> <li>deps: bump lxml from 4.6.4 to 4.6.5 (#133) (605dc2f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#170-2021-12-07","title":"1.7.0 (2021-12-07)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_82","title":"Bug Fixes","text":"<ul> <li>boolean-values: allow 0 and 1 as boolean values (DEV-251) (#131) (fd58ad4)</li> <li>create-ontology: within an ontology, references to the ontology itself are not possible (DEV-135) (#130) (6a40fc6)</li> <li>permissions: use permissions in xml upload (DEV-178) (#127) (4dad0ce)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_57","title":"Documentation","text":"<ul> <li>update out-of-date example in docs (DEV-265) (#125) (0dc724c)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_78","title":"Enhancements","text":"<ul> <li>update DSP-Tools to support ArchiveRepresentation (DEV-259) (#128) (85a40c2)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#161-2021-11-25","title":"1.6.1 (2021-11-25)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_83","title":"Bug Fixes","text":"<ul> <li>inconsistencies in groups and projects (DEV-261) (#121) (f9a95ed)</li> <li>schema: list root node needs a comments object (DEV-61) (#122) (7bdc589)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#160-2021-11-22","title":"1.6.0 (2021-11-22)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_84","title":"Bug Fixes","text":"<ul> <li>comments: fix comments in ontology creation (DEV-250) (#119) (08effdf)</li> <li>update dsp-tools to work with API version 16.0.0 (#117) (af70e9b)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_58","title":"Documentation","text":"<ul> <li>add time value section (#116) (8ef0329)</li> <li>typo: correcting typos in documentation (#112) (08c1059)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_79","title":"Enhancements","text":"<ul> <li>id-to-iri: extend xmlupload to allow references to existing resources (DEV-60) (#108) (40b01db)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#152-2021-11-16","title":"1.5.2 (2021-11-16)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_100","title":"Maintenance","text":"<ul> <li>documentation: add missing documentation for excel2resources (DEV-144) (cde0db5)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#151-2021-10-13","title":"1.5.1 (2021-10-13)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_85","title":"Bug Fixes","text":"<ul> <li>schema-documentation: update schemas and documentation (DEV-61) (#105) (4d9c1e4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#150-2021-09-24","title":"1.5.0 (2021-09-24)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_80","title":"Enhancements","text":"<ul> <li>schema: add error codes for validation (DSP-1902) (#101) (0bc6149)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#142-2021-09-21","title":"1.4.2 (2021-09-21)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_86","title":"Bug Fixes","text":"<ul> <li>docs: fix example in documentation (DSP-1740) (#99) (11cdd72)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#141-2021-09-20","title":"1.4.1 (2021-09-20)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_101","title":"Maintenance","text":"<ul> <li>schemas: update schemas (DSP-1902) (#92) (16ba335)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#140-2021-09-16","title":"1.4.0 (2021-09-16)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_59","title":"Documentation","text":"<ul> <li>typo: correct typo in documentation (#85) (c689d7f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_81","title":"Enhancements","text":"<ul> <li>excel-to-properties: create properties from Excel (DSP-1577) (#89) (9f48e9a)</li> <li>excel-to-resources: create resources from excel (DSP-1576) (#88) (7b0302f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#133-2021-09-07","title":"1.3.3 (2021-09-07)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_87","title":"Bug Fixes","text":"<ul> <li>wrong values &amp;   property (#86) (7cf6405)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#132-2021-08-17","title":"1.3.2 (2021-08-17)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_88","title":"Bug Fixes","text":"<ul> <li>import: fix import error when starting script directly (   DSP-1869) (05b1eb1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#131-2021-08-11","title":"1.3.1 (2021-08-11)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_89","title":"Bug Fixes","text":"<ul> <li>manifest: fix documentation and missing files (   DSP-1580) (#80) (3345f2a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#130-2021-08-10","title":"1.3.0 (2021-08-10)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_82","title":"Enhancements","text":"<ul> <li>excel-lists: create multilanguage json lists from excel files (   DSP-1580) (#75) (06d071a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#121-2021-07-27","title":"1.2.1 (2021-07-27)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_90","title":"Bug Fixes","text":"<ul> <li>release: fix skipped release after pull request #74 (   DSP-1797) (#76) (c8e0a11)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#120-2021-07-26","title":"1.2.0 (2021-07-26)","text":""},{"location":"DSP-TOOLS/changelog/#enhancements_83","title":"Enhancements","text":"<ul> <li>verbose xml upload: use v option to print verbose output in XML upload (   DSP-1797) (#70) (b1f56a1)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#116-2021-07-22","title":"1.1.6 (2021-07-22)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_60","title":"Documentation","text":"<ul> <li>add   changelog (#71) (ce1feab)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#115-2021-07-14","title":"1.1.5 (2021-07-14)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_61","title":"Documentation","text":"<ul> <li>dsp-tools-xmlupload: Add Warning   section (#69) (05baf3d)</li> <li>dsp-tools-xmlupload: addition to incomplete paragraph (   DSP-1693) (#67) (318547f)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#114-2021-06-16","title":"1.1.4 (2021-06-16)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_62","title":"Documentation","text":"<ul> <li>add copyright information to docs (   DSP-1190) (#65) (0174c4a)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#113-2021-06-08","title":"1.1.3 (2021-06-08)","text":""},{"location":"DSP-TOOLS/changelog/#documentation_63","title":"Documentation","text":"<ul> <li>update readme after documentation update (   DSP-1693) (#63) (7b7dcca)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#112-2021-06-07","title":"1.1.2 (2021-06-07)","text":""},{"location":"DSP-TOOLS/changelog/#maintenance_102","title":"Maintenance","text":"<ul> <li>bump Bazel to version with M1   support (#60) (69772f4)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_64","title":"Documentation","text":"<ul> <li>improve documentation (   DSP-1693) (#62) (591b5ad)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#111-2021-04-20","title":"1.1.1 (2021-04-20)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_91","title":"Bug Fixes","text":"<ul> <li>fix import ontology from salsah-export (   DSP-1532) (#59) (6e3e7ca)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_103","title":"Maintenance","text":"<ul> <li>fix doc deployment (   DSP-1492) (#57) (a55849e)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#110-2021-04-09","title":"1.1.0 (2021-04-09)","text":""},{"location":"DSP-TOOLS/changelog/#bug-fixes_92","title":"Bug Fixes","text":"<ul> <li>add create_ontology command line   configuration (3ab7e6b)</li> <li>add folder   independence (2460937)</li> <li>add missing   dependencies (4d75128)</li> <li>add user (277121b)</li> <li>bulk-import of multiple resource link   values (6ef8908),   closes #9</li> <li>cleanup api logging (   DSP-1076) (#46) (d48e704)</li> <li>command line   scripts (732a0fa)</li> <li>Correctly set user   password (9db6445)</li> <li>Correctly set user   password (3583ea2)</li> <li>Do not send logout request if token is not   set (9cfd484)</li> <li>removed exception if keywords   missing (81f7d97)</li> <li>requirements (b5941f1)</li> <li>typo (3def59d)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#documentation_65","title":"Documentation","text":"<ul> <li>fix twine   upload (bcc87ca)</li> <li>update publishing   description (6deb0da)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#enhancements_84","title":"Enhancements","text":"<ul> <li>import lists from excel (   DSP-1341) (#48) (3628992)</li> </ul>"},{"location":"DSP-TOOLS/changelog/#maintenance_104","title":"Maintenance","text":"<ul> <li>add existing files into new   structure (84dc1d2)</li> <li>add publishing   setup (c18c6b9)</li> <li>add pypi   badge (3fc148c)</li> <li>add runing tests on   travis (2eeaeb8)</li> <li>add runing tests on   travis (cf4f9e4)</li> <li>add runing tests on   travis (b8f3bbc)</li> <li>add runing tests on   travis (dc4fa02)</li> <li>add runing tests on   travis (16844d8)</li> <li>add runing tests on   travis (593ac85)</li> <li>add testing (   ongoing) (c175a16)</li> <li>allow release PRs in PR title   check (#54) (0414948)</li> <li>automate release process (   DSP-1492) (#52) (6a96eee)</li> <li>bump version (49bc9d8)</li> <li>bump version (e7364c7)</li> <li>bump version to 1.1.0 (   DSP-1492) (#55) (3814ed2)</li> <li>configure dependencies and command   line (7f79530)</li> </ul>"},{"location":"DSP-TOOLS/local-stack/","title":"Running a Local Stack","text":""},{"location":"DSP-TOOLS/local-stack/#getting-started-with-a-local-stack","title":"Getting Started with a Local Stack","text":"<p>With the following commands can start and stop an entire DSP Stack locally with Docker Containers.</p>"},{"location":"DSP-TOOLS/local-stack/#start-stack","title":"<code>start-stack</code>","text":"<p>This command runs a local instance of DSP-API and DSP-APP.</p> <p>Login credentials for DSP-APP</p> <p>To gain system administration rights inside a locally running DSP-APP,    login with username <code>root@example.com</code> and password <code>test</code>.</p> <pre><code>dsp-tools start-stack\n</code></pre> <p>DSP-TOOLS will ask you for permission to clean Docker with a <code>docker system prune</code>. This will remove all unused containers, networks and images. If you don't know what that means, just type <code>y</code> (\"yes\") and then <code>Enter</code>.</p> <p>The most frequently used options are:</p> <ul> <li><code>--max_file_size=int</code> (optional, default: <code>2000</code>): max. multimedia file size allowed, in MB (max: 100'000)   If you attempt to upload a multimedia file bigger than <code>max_file_size</code>, it will be rejected.</li> <li><code>--prune</code> (optional): execute <code>docker system prune</code> without asking</li> <li><code>--no-prune</code> (optional): don't execute <code>docker system prune</code> (and don't ask)</li> </ul> <p>To see all possible options, type <code>dsp-tools start-stack --help</code>.</p> <p>More help for this command can be found here.</p>"},{"location":"DSP-TOOLS/local-stack/#stop-stack","title":"<code>stop-stack</code>","text":"<p>When your work is done, shut down DSP-API and DSP-APP with</p> <pre><code>dsp-tools stop-stack\n</code></pre> <p>To see all possible options, type <code>dsp-tools stop-stack --help</code>.</p> <p>This deletes all Docker volumes, and removes all data that was in the database.</p>"},{"location":"DSP-TOOLS/data-file/data-file-commands/","title":"CLI-Commands","text":""},{"location":"DSP-TOOLS/data-file/data-file-commands/#validating-and-uploading-data","title":"Validating and Uploading Data","text":"<p>CLI-Commands for validating and uploading your data.</p>"},{"location":"DSP-TOOLS/data-file/data-file-commands/#validate-data","title":"<code>validate-data</code>","text":"<p>This command validates an XML data file according to the data model previously uploaded on the server. </p> <pre><code>dsp-tools validate-data [options] xml_data_file.xml\n</code></pre> <p>The most frequently used options are:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS gets the data model from</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> </ul> <p>To see all possible options, type <code>dsp-tools validate-data --help</code>.</p> <p>Output:</p> <ul> <li>The result of the validation is printed out on the console.</li> <li>If there are more than 50 validation errors,    a csv called <code>[xml_data_file]_validation_[severity].csv</code> with the results is saved in the current directory.</li> <li>There are three severity levels:<ul> <li>Error: Will block an xmlupload.<ul> <li>Content that is wrong for various reasons.</li> <li>For example, invalid values, empty values, data that does not conform to the definition in the data model.</li> </ul> </li> <li>Warning: Will block an xmlupload on PROD and on RDU-stage<ul> <li>During RDU work on a test server the data may be incomplete.    To facilitate easy testing some errors are permissible on test servers but not on a production server. </li> <li>For example, legal information for assets is mandatory on a production server.    Since a project may need time to compile all the data we allow missing legal information on test servers.</li> </ul> </li> <li>Info: Will not block an xmlupload.<ul> <li>Content that may cause errors during an upload.</li> </ul> </li> </ul> </li> </ul> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools validate-data xml_data_file.xml\n</code></pre> <p>will validate the data defined in <code>xml_data_file.xml</code> on <code>localhost</code>.</p> <p>In order to validate the same data with the data model on a DSP server, it is necessary to specify the server and provide login credentials.</p> <pre><code>dsp-tools validate-data -s https://api.dasch.swiss -u 'your@email.com' -p 'password' xml_data_file.xml\n</code></pre>"},{"location":"DSP-TOOLS/data-file/data-file-commands/#xmlupload","title":"<code>xmlupload</code>","text":"<p>This command uploads data defined in an XML file to a DSP server. </p> <pre><code>dsp-tools xmlupload [options] xml_data_file.xml\n</code></pre> <p>The most frequently used options are:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS sends the data to</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> <li><code>-i</code> | <code>--imgdir</code> (optional, default: <code>.</code>): folder from where the paths in the <code>&lt;bitstream&gt;</code> tags are evaluated</li> </ul> <p>To see all possible options, type <code>dsp-tools xmlupload --help</code>.</p> <p>Output:</p> <ul> <li>A file named <code>id2iri_mapping_[timestamp].json</code> is written to the current working directory.   This file should be kept if a second data delivery is added at a later point of time    see here.</li> </ul> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools xmlupload xml_data_file.xml\n</code></pre> <p>will upload the data defined in <code>xml_data_file.xml</code> on <code>localhost</code> for local viewing.</p> <p>In order to upload the same data  to the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools xmlupload -s https://api.dasch.swiss -u 'your@email.com' -p 'password' xml_data_file.xml\n</code></pre> <p>The expected XML format is documented here.</p> <p>If an XML upload is interrupted before it finished (e.g. by hitting <code>Ctrl + C</code>),  it can be resumed with the <code>resume-xmlupload</code> command.  When an upload is interrupted,  the current state of the upload is saved in a pickle file,  which is stored in <code>~/.dsp-tools/xmluploads/[server]/resumable/latest.pkl</code>.  If the upload should be resumed later, this file must remain in place.</p>"},{"location":"DSP-TOOLS/data-file/data-file-commands/#resume-xmlupload","title":"<code>resume-xmlupload</code>","text":"<p>Warning</p> <p>We do not guarantee that the state of an xmlupload is cleanly saved after <code>Ctrl + C</code>. We only guarantee this for <code>dsp-tools xmlupload --interrupt-after</code>.</p> <p>This command resumes a previously interrupted <code>xmlupload</code> or <code>ingest-xmlupload</code>.</p> <pre><code>dsp-tools resume-xmlupload [options]\n</code></pre> <p>The following options are available:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS sends the data to</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> <li><code>--skip-first-resource</code> (optional): the <code>xmlupload</code> should skip the first saved resource.    This is not implemented for stashed links.</li> </ul> <p>For this command to work, the pickle file <code>~/.dsp-tools/xmluploads/[server]/resumable/latest.pkl</code> must exist.  Currently, only one interrupted upload can be resumed at a time per server.</p>"},{"location":"DSP-TOOLS/data-file/data-file-commands/#id2iri","title":"<code>id2iri</code>","text":"<p>This command replaces internal IDs of an XML file (<code>&lt;resptr&gt;</code> tags and salsah-links inside <code>&lt;text&gt;</code> tags) by IRIs provided in a mapping file.</p> <pre><code>dsp-tools id2iri xmlfile.xml mapping.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>-r</code> | <code>--remove-resources</code> (optional): remove resources if their ID is in the mapping </li> </ul> <p>The output file is written to <code>[original name]_replaced_[timestamp].xml</code>.</p> <p>If the flag <code>--remove-resources</code> is set, all resources of which the ID is in the mapping are removed from the XML file. This prevents doubled resources on the DSP server, because normally, the resources occurring in the mapping already exist on the DSP server.</p> <p>This command cannot be used isolated,  because it is part of a bigger procedure  that is documented here.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/","title":"Deprecated excel2xml","text":""},{"location":"DSP-TOOLS/data-file/excel2xml-module/#the-excel2xml-module","title":"The excel2xml Module","text":"<p>Warning</p> <p>The <code>excel2xml</code> module is deprecated in favor of the <code>xmllib</code> library.</p> <p>To demonstrate the usage of the <code>excel2xml</code> module,  there is a GitHub repository named <code>00A1-import-scripts</code>. It contains:</p> <ul> <li>a sample JSON project file</li> <li>sample data that fits the data model of the JSON project file</li> <li>a sample Python script that demonstrates how to use the module <code>excel2xml</code>.</li> </ul> <p>Navigate to https://github.com/dasch-swiss/00A1-import-scripts and follow the steps described there.  The README will teach you some basics that will be necessary to work with <code>excel2xml</code>.  Once you are familiar with the basics,  return to this page to learn how the sample Python script works. </p> <p>This is the simplified pattern how the Python script works:</p> <pre><code>1  main_df = pd.read_csv(\"excel2xml_sample_data.csv\", dtype=\"str\", sep=\",\")\n2  root = excel2xml.make_root(...)\n3  root = excel2xml.append_permissions(root)\n4  # if necessary: create list mappings, according to explanation below\n5  for index, row in main_df.iterrows():\n6      resource = excel2xml.make_resource(...)\n7      resource.append(excel2xml.make_text_prop(...))\n8      root.append(resource)\n9  excel2xml.write_xml(root, \"data.xml\")\n</code></pre> <pre><code>1 read in your data source with the pandas library (https://pandas.pydata.org/)  \n2 create the root element `&lt;knora&gt;`  \n3 append the permissions  \n4 if necessary: create list mappings (see below)  \n5 iterate through the rows of your data source:  \n6     create the `&lt;resource&gt;` tag  \n7     append properties to it  \n8     append the resource to the root tag `&lt;knora&gt;`  \n9 save the finished XML file  \n</code></pre> <p> These steps are now explained in-depth:</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#1-read-in-your-data-source","title":"1. Read in Your Data Source","text":"<p>In the first paragraph of the sample script, insert your ontology name, project shortcode, and the path to your data  source. If necessary, activate one of the lines that are commented out.  </p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#2-create-root-element-knora","title":"2. Create Root Element <code>&lt;knora&gt;</code>","text":"<p>Then, the root element is created, which represents the <code>&lt;knora&gt;</code> tag of the XML document. </p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#3-append-the-permissions","title":"3. Append the Permissions","text":"<p>As first children of <code>&lt;knora&gt;</code>, some standard permissions are added. At the end, please carefully check the permissions  of the finished XML file to ensure that they meet your requirements, and adapt them if necessary.  </p> <p>The standard permission is <code>public</code>  (read more about this here).  If you don't specify it otherwise, all resources and properties get this permission. </p> <p>With <code>excel2xml</code>, it is not possible to create resources/properties that don't have permissions, because they would be  invisible for all users except project members. Read more about permissions  here.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#4-create-list-mappings","title":"4. Create List Mappings","text":"<p>Let's assume that your data source has a column containing list values named after the \"label\" of the JSON project list,  instead of the \"name\" which is needed for the <code>dsp-tools xmlupload</code>.  You need a way to get the names from the labels. If your data source uses the labels correctly,  this is an easy task:  The function <code>create_json_list_mapping()</code> creates a dictionary that maps the labels to the names:  </p> <p>The list \"category\" in <code>00A1-import-scripts/import_project.json</code> looks as follows:</p> <pre><code>{\n  \"name\": \"category\",\n  \"labels\": {\"de\": \"Kategorie\", \"en\": \"Category\"},\n  \"comments\": {\"en\": \"A list containing categories\", \"de\": \"Eine Liste mit Kategorien\"},\n  \"nodes\": [\n    {\n      \"name\": \"artwork\",\n      \"labels\": {\"de\": \"Kunstwerk\", \"en\": \"Artwork\"}\n    },\n    {\n      \"name\": \"nature\",\n      \"labels\": {\"de\": \"Natur\", \"en\": \"Nature\"},\n      \"nodes\": [\n        {\n          \"name\": \"humans\",\n          \"labels\": {\"de\": \"Menschen\", \"en\": \"Humans\"}\n        },\n        {\"...\": \"...\"}\n      ]\n    }\n  ]\n}\n</code></pre> <p>If you pass this list to <code>create_json_list_mapping()</code>, it creates the following dictionary:</p> <pre><code>{\n    \"Kunstwerk\": \"artwork\",\n    \"kunstwerk\": \"artwork\",\n    \"Menschen\": \"humans\",\n    \"menschen\": \"humans\",\n    \"Natur\": \"nature\",\n    \"natur\": \"nature\",\n    \"...\": \"...\"\n}\n</code></pre> <p>If, however, your data source has spelling variants,  you need the more sophisticated approach of <code>create_json_excel_list_mapping()</code>:  This function creates a dictionary  that maps the list values in your data source  to their correct JSON project node name.  This happens based on string similarity.  Please carefully check the result if there are no false matches!</p> <p>The column \"Category\" in <code>00A1-import-scripts/data_raw.csv</code> has spelling mistakes: </p> <p>The dictionary that results if you call <code>create_json_excel_list_mapping()</code>:</p> <pre><code>{\n    \"Huumans\": \"humans\",\n    \"huumans\": \"humans\",\n    \"Artw\u00f6rk\": \"artwork\",\n    \"artw\u00f6rk\": \"artwork\"\n}\n</code></pre> <p>The sample Python scripts features an example how to call these two functions,  and how the resulting dictionaries can be used.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#5-iterate-through-the-rows-of-your-data-source","title":"5. Iterate Through the Rows of Your Data Source","text":"<p>With the help of Pandas, you can then iterate through the rows of your Excel/CSV, and create resources and properties.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#6-create-the-resource-tag","title":"6. Create the <code>&lt;resource&gt;</code> Tag","text":"<p>There are several kinds of resources that can be created: </p> restype tag function <code>Resource</code> <code>&lt;resource&gt;</code> <code>make_resource()</code> <code>Region</code> <code>&lt;region&gt;</code> <code>make_region()</code> <code>LinkObj</code> <code>&lt;link&gt;</code> <code>make_link()</code> <code>AudioSegment</code> <code>&lt;audio-segment&gt;</code> <code>make_audio_segment()</code> <code>VideoSegment</code> <code>&lt;video-segment&gt;</code> <code>make_video_segment()</code> <p><code>&lt;resource&gt;</code> is the most frequent of them. The others are explained  here. </p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#resource-id","title":"Resource ID","text":"<p>Special care is needed when the ID of a resource is created. Every resource must have an ID that is unique in the file, and it must meet the constraints of xsd:ID. You can simply achieve this if you use the function <code>make_xsd_id_compatible()</code>.</p> <p>If later, another resource would like to set a resptr-link to the resource that you are coding now, you must store the  ID in a dict, so that you can retrieve it later. The example script contains an example of such a dict. </p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#7-append-the-properties","title":"7. Append the Properties","text":"<p>For every property, there is a helper function that explains itself when you hover over it. So you don't need to worry  anymore how to construct a certain XML value for a certain property. </p> <p>Here's how the docstrings assist you:</p> <ul> <li>function signature: names of the parameters and accepted types</li> <li>short explanation how the function behaves</li> <li>usage examples</li> <li>link to the DSP-TOOLS documentation of this property</li> <li>a short description for every parameter</li> <li>short description of the returned object. <ul> <li>Note: <code>etree._Element</code> is a type annotation of an underlying library. You don't have to care about it, as long as    you proceed as described (append the returned object to the parent resource).</li> </ul> </li> </ul> <p></p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#fine-tuning-with-the-propertyelement","title":"Fine-Tuning With the <code>PropertyElement</code>","text":"<p>There are two possibilities how to create a property: The value can be passed as it is, or as a <code>PropertyElement</code>. If it is passed as it is, the <code>permissions</code> are assumed to be <code>public</code>, texts are assumed to be encoded as <code>utf8</code>, and  the value won't have a comment:</p> <pre><code>make_text_prop(\":testproperty\", \"first text\")\n</code></pre> <pre><code>    &lt;text-prop name=\":testproperty\"&gt;\n        &lt;text encoding=\"utf8\" permissions=\"public\"&gt;first text&lt;/text&gt;\n    &lt;/text-prop&gt;\n</code></pre> <p>If you want to change these defaults, you have to use a <code>PropertyElement</code> instead:</p> <pre><code>make_text_prop(\n    \":testproperty\", \n    PropertyElement(\n        value=\"first text\", \n        permissions=\"private\", \n        encoding=\"xml\",\n        comment=\"some comment\"\n    )\n)\n</code></pre> <pre><code>    &lt;text-prop name=\":testproperty\"&gt;\n        &lt;text encoding=\"xml\" permissions=\"private\" comment=\"some comment\"&gt;first text&lt;/text&gt;\n    &lt;/text-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#the-special-properties-of-video-segment-and-audio-segment","title":"The Special Properties of <code>&lt;video-segment&gt;</code> and <code>&lt;audio-segment&gt;</code>","text":"<p><code>&lt;video-segment&gt;</code> and <code>&lt;audio-segment&gt;</code> work differently than normal resources. Firstly, because they are knora-base resources that cannot be subclassed in the custom data model. So in your JSON file, you must not create a resource class for them.  Rather, you use them in your XML file directly.</p> <p>Secondly, because they have a dedicated tag (i.e., different from <code>&lt;resource&gt;</code>),  and their properties also have dedicated tags.</p> <p>Here's how you can create them in your Python script:</p> <pre><code>from dsp_tools import excel2xml\n\nsegment = excel2xml.make_video_segment(\"label of my video segment\", \"segment_1\")\nsegment.append(excel2xml.make_isSegmentOf_prop(\"video_resource_id\"))\nsegment.append(excel2xml.make_hasSegmentBounds_prop(segment_start=600, segment_end=1200))  # from 0h 10min to 0h 20min\nsegment.append(excel2xml.make_hasTitle_prop(\"title of the segment\"))\nsegment.append(excel2xml.make_hasComment_prop(\"&lt;strong&gt;1st&lt;/strong&gt; comment to the segment\"))\nsegment.append(excel2xml.make_hasComment_prop(\"&lt;strong&gt;2nd&lt;/strong&gt; comment to the segment\"))\nsegment.append(excel2xml.make_hasDescription_prop(\"&lt;strong&gt;1st&lt;/strong&gt; description of the segment\"))\nsegment.append(excel2xml.make_hasDescription_prop(\"&lt;strong&gt;2nd&lt;/strong&gt; description of the segment\"))\nsegment.append(excel2xml.make_hasKeyword_prop(\"keyword 1\"))\nsegment.append(excel2xml.make_hasKeyword_prop(\"keyword 2\"))\nsegment.append(excel2xml.make_relatesTo_prop(\"id_of_other_resource\"))\n</code></pre> <p>The audio segment works exactly the same, just with <code>audio</code> instead of <code>video</code>:</p> <pre><code>segment = excel2xml.make_audio_segment(\"label of my audio segment\", \"segment_1\")\nsegment.append(excel2xml.make_isSegmentOf_prop(\"audio_resource_id\"))\n</code></pre> <p>Please be aware that the properties have to be provided in exactly this order.  It is possible to leave out optional properties, but the present ones must fit the order.</p> <p>See also the documentation of the resulting XML format.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#supported-boolean-formats","title":"Supported Boolean Formats","text":"<p>For <code>make_boolean_prop(cell)</code>, the following formats are supported:</p> <ul> <li>true: True, \"true\", \"True\", \"1\", 1, \"yes\", \"Yes\"</li> <li>false: False, \"false\", \"False\", \"0\", 0, \"no\", \"No\"</li> </ul> <p>N/A-like values will raise an Error.  So if your cell is empty, this function will not count it as false,  but will raise an Error.  If you want N/A-like values to be counted as false,  you may use a construct like this:</p> <pre><code>if excel2xml.check_notna(cell):\n    # the cell contains usable content\n    excel2xml.make_boolean_prop(\":hasBoolean\", cell)\nelse:\n    # the cell is empty: you can decide to count this as \"False\"\n    excel2xml.make_boolean_prop(\":hasBoolean\", False)\n</code></pre>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#special-characters-in-text-properties","title":"Special Characters in Text Properties","text":"<p>Depending on the encoding of your text, special characters behave differently.  Please consult the systematic overview here  to fully understand the implications.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#8-append-the-resource-to-the-root","title":"8. Append the Resource to the Root","text":"<p>At the end of the for-loop, it is important not to forget to append the finished resource to the root. </p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#9-save-the-file","title":"9. Save the File","text":"<p>At the very end, save the file under a name that you can choose yourself.</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#other-helper-functions","title":"Other Helper Functions","text":""},{"location":"DSP-TOOLS/data-file/excel2xml-module/#check-if-a-cell-contains-a-usable-value","title":"Check if a Cell Contains a Usable Value","text":"<p>The function <code>check_notna(cell)</code> checks a value if it is usable in the context of data archiving. A value is considered  usable if it is</p> <ul> <li>a number (integer or float, but not <code>numpy.nan</code>)</li> <li>a boolean</li> <li>a string with at least one Unicode letter (matching the regex <code>\\\\p{L}</code>) or number, or at least one _, !, or ?   (The strings \"None\", \"&lt;NA&gt;\", \"N/A\", and \"-\" are considered invalid.)</li> <li>a PropertyElement whose \"value\" fulfills the above criteria</li> </ul> <p>Examples:</p> <pre><code>check_notna(0)      == True\ncheck_notna(False)  == True\ncheck_notna(\"\u0153\")    == True\ncheck_notna(\"0\")    == True\ncheck_notna(\"_\")    == True\ncheck_notna(\"!\")    == True\ncheck_notna(\"?\")    == True\ncheck_notna(None)   == False\ncheck_notna(\"None\") == False\ncheck_notna(&lt;NA&gt;)   == False\ncheck_notna(\"&lt;NA&gt;\") == False\ncheck_notna(\"-\")    == False\ncheck_notna(\" \")    == False\n</code></pre> <p>But why not just checking a cell by its boolean value? Like:</p> <pre><code>if cell:\n    resource.append(make_*_prop(cell))\n</code></pre> <p>There are many problems that can occur with this simple approach! Often, a cell won't evaluate to the boolean that you  might expect:</p> cell content return value of <code>bool(cell)</code> You might have expected... 0 False True, because 0 is a valid integer for your integer property \" \" True False, because an empty string is not usable for a text property <code>numpy.nan</code> True False, because N/A is not a usable value <code>pandas.NA</code> TypeError (*) False, because N/A is not a usable value \"&lt;NA&gt;\" True False, because this is the string representation of N/A \"-\" True False, because this is a placeholder in an empty text field <p>(*) TypeError: boolean value of NA is ambiguous</p> <p>In contrast, <code>check_notna(cell)</code> will return the expected value for all cases in the table!</p>"},{"location":"DSP-TOOLS/data-file/excel2xml-module/#calendar-date-parsing","title":"Calendar Date Parsing","text":"<p>The function <code>find_dates_in_string(string)</code> tries to find calendar dates in a string.  If successful, it returns the DSP-formatted date strings.</p> <p>This function is a redirection to <code>xmllib.find_dates_in_string()</code>. See there for more information.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/","title":"XML data file","text":""},{"location":"DSP-TOOLS/data-file/xml-data-file/#the-xml-file-format-for-importing-data","title":"The XML File Format for Importing Data","text":"<p>With the <code>xmlupload</code> command,  data can be imported into a DSP repository (on a DSP server) from an XML file.  The import file is a standard XML file as described on this page. After a successful upload of the data,  an output file is written (called <code>id2iri_mapping_[timestamp].json</code>) with the mapping from the internal IDs used inside the XML  to their corresponding IRIs which uniquely identify them inside DSP.  This file should be kept if a second data delivery is added at a later point of time  see here.</p> <p>The import file must start with the standard XML header:</p> <pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#the-root-element-knora","title":"The Root Element <code>&lt;knora&gt;</code>","text":"<p>The <code>&lt;knora&gt;</code> element describes all resources that should be imported. It has the following attributes:</p> <ul> <li><code>xmlns</code>: XML namespace identifier (required, always the same)</li> <li><code>xmlns:xsi</code>: URL to the XML Schema instance namespace of W3C (required, always the same)</li> <li><code>xsi:schemaLocation</code>: URL to the DSP XML schema, located in the DSP-TOOLS GitHub repository (required, always the same)</li> <li><code>shortcode</code>: project shortcode, e.g. \"0801\" (required, dependent on the project)</li> <li><code>default-ontology</code>: name of the ontology (required, dependent on the project)</li> </ul> <p>The <code>&lt;knora&gt;</code> element may look as follows:</p> <pre><code>&lt;knora\n    xmlns=\"https://dasch.swiss/schema\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"https://dasch.swiss/schema https://raw.githubusercontent.com/dasch-swiss/dsp-tools/main/src/dsp_tools/resources/schema/data.xsd\"\n    shortcode=\"0806\"\n    default-ontology=\"webern\"&gt;\n ...\n&lt;/knora&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#dsp-permissions","title":"DSP Permissions","text":"<p>The DSP server provides access control for every resource and every property.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#groups","title":"Groups","text":"<p>The user doesn't hold the permissions directly, but belongs to an arbitrary number of groups which hold the permissions. There are built-in groups and project specific groups:</p> <ul> <li>Built-in groups: Every user is automatically in at least one of the following built-in groups:<ul> <li><code>UnknownUser</code>: The user is not known to DSP (not logged in).</li> <li><code>KnownUser</code>: The user is logged in, but not a member of the project the data element belongs to.</li> <li><code>ProjectMember</code>: The user belongs to the same project as the data element.</li> <li><code>ProjectAdmin</code>: The user is project administrator in the project the data element belongs to.</li> <li><code>Creator</code>: The user is the owner of the element (created the element).</li> <li><code>SystemAdmin</code>: The user is a system administrator.</li> </ul> </li> <li>Project specific groups: <ul> <li>can be defined in the JSON project file</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#rights","title":"Rights","text":"<p>A group can have exactly one of these rights:</p> <ul> <li>(no right): If no permission is defined for a certain group of users, these users cannot view any resources/values.</li> <li><code>RV</code> restricted view permission: Same as <code>V</code>,    but if it is applied to an image, the image is shown with a reduced resolution or with a watermark overlay.</li> <li><code>V</code> view permission: The user can view a resource or a value, but cannot modify it.</li> <li><code>M</code> modify permission: The user can modify the element, but cannot mark it as deleted.    The original resource or value will be preserved.</li> <li><code>D</code> delete permission: The user is allowed to mark an element as deleted.    The original resource or value will be preserved.</li> <li><code>CR</code> change right permission: The user can change the permission of a resource or value.    The user is also allowed to permanently delete (erase) a resource.</li> </ul> <p>Every right of this row includes all previous rights.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#defining-permissions-with-the-permissions-element","title":"Defining Permissions With the <code>&lt;permissions&gt;</code> Element","text":"<p>The <code>&lt;permissions&gt;</code> element defines a permission ID that can subsequently be used in a  permissions attribute of a <code>&lt;resource&gt;</code> or <code>&lt;xyz-prop&gt;</code> tag.</p> <p>It is optional to define permission IDs in the XML.  If not defined, the project's default permissions are applied,  as defined in the JSON project file. </p> <p>If the resources/values in your XML should have permissions  that are different from the project's defaults, you have to use the <code>&lt;permissions&gt;</code> elements to define permission IDs.</p> <p>The <code>&lt;permissions&gt;</code> element defines which rights are given to which groups. The canonical standard that we recommend are these 3 permission IDs:</p> <pre><code>&lt;permissions id=\"public\"&gt;\n    &lt;allow group=\"UnknownUser\"&gt;V&lt;/allow&gt;\n    &lt;allow group=\"KnownUser\"&gt;V&lt;/allow&gt;\n    &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n    &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n&lt;permissions id=\"limited_view\"&gt;\n    &lt;allow group=\"UnknownUser\"&gt;RV&lt;/allow&gt;\n    &lt;allow group=\"KnownUser\"&gt;RV&lt;/allow&gt;\n    &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n    &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n&lt;permissions id=\"private\"&gt;\n    &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n    &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n</code></pre> <p>This means that if a resource/value is marked as <code>public</code>,</p> <ul> <li>users who are not logged in can view the resource/value</li> <li>users who are logged in, but not members of your project, can view the resource/value</li> <li>project members can modify and delete the resource/value</li> <li>project admins can modify, delete, and change the rights of the resource/value</li> </ul> <p>If you don't want a group to have access at all, leave it out: If a resource/value is marked as <code>private</code>,  users who are not members of the project have no rights at all, not even view rights.</p> <p>In addition to the DSP built-in groups,  project specific groups are supported as well. A project specific group name has the form <code>project-shortname:groupname</code>:</p> <pre><code>&lt;permissions id=\"discouraged-edge-case\"&gt;\n    &lt;allow group=\"systematic-tp:testgroupEditors\"&gt;M&lt;/allow&gt;\n&lt;/permissions&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#using-permissions-with-the-permissions-attribute","title":"Using Permissions With the <code>permissions</code> Attribute","text":"<p>Once defined, the permission IDs can be used as <code>permissions</code> attribute in the <code>&lt;resource&gt;</code> and <code>&lt;xyz-prop&gt;</code> tags. It is important to note that a resource doesn't inherit its permissions to its properties.  Each property must have its own permissions.  So, in the following example,  the bitstreams don't inherit the permissions from their resource:</p> <pre><code>&lt;permissions id=\"public\"&gt;\n  &lt;allow group=\"UnknownUser\"&gt;V&lt;/allow&gt;\n  &lt;allow group=\"KnownUser\"&gt;V&lt;/allow&gt;\n  &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n  &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n&lt;permissions id=\"limited_view\"&gt;\n  &lt;allow group=\"UnknownUser\"&gt;RV&lt;/allow&gt;\n  &lt;allow group=\"KnownUser\"&gt;RV&lt;/allow&gt;\n  &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n  &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n&lt;permissions id=\"private\"&gt;\n  &lt;allow group=\"ProjectMember\"&gt;D&lt;/allow&gt;\n  &lt;allow group=\"ProjectAdmin\"&gt;CR&lt;/allow&gt;\n&lt;/permissions&gt;\n&lt;resource ...&gt;\n    &lt;bitstream permissions=\"public\"&gt;images/tree.jpg&lt;/bitstream&gt;\n    &lt;!-- Logged-in non-project member: full resolution --&gt;\n&lt;/resource&gt;\n&lt;resource ...&gt;\n    &lt;bitstream permissions=\"limited_view\"&gt;images/tree.jpg&lt;/bitstream&gt;\n    &lt;!-- Logged-in non-project member: blurred --&gt;\n&lt;/resource&gt;\n&lt;resource ...&gt;\n    &lt;bitstream permissions=\"private\"&gt;images/tree.jpg&lt;/bitstream&gt;\n    &lt;!-- Logged-in non-project member: Cannot see the image --&gt;\n&lt;/resource&gt;\n&lt;resource ...&gt;\n    &lt;bitstream&gt;images/tree.jpg&lt;/bitstream&gt;\n    &lt;!-- Logged-in non-project member: full resolution (due to defaults set in JSON) --&gt;\n&lt;/resource&gt;\n</code></pre> <p>So if you upload this data, and then log in as <code>KnownUser</code>, i.e. a logged-in user who is not member of the project,  you will see the following:</p> <ul> <li><code>permissions=\"public\"</code>: <code>V</code> rights: Normal view.</li> <li><code>permissions=\"limited_view\"</code>: <code>RV</code> rights: Blurred image.</li> <li><code>permissions=\"private\"</code>: no rights: No view possible.</li> <li><code>(blank)</code>: The default from the JSON project file apply: <code>V</code> rights: Normal view. </li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#defining-the-authorships","title":"Defining the authorships","text":"<p>Every multimedia asset must be accompanied by an authorship, meaning the natural person who authored the work. The authorship can be defined in the following way:</p> <pre><code>&lt;authorship id=\"authorship_1\"&gt;\n    &lt;author&gt;Lukas Rosenthaler&lt;/author&gt;\n&lt;/authorship&gt;\n&lt;authorship id=\"authorship_2\"&gt;\n    &lt;author&gt;Nora Ammann&lt;/author&gt;\n    &lt;author&gt;Johannes Nussbaum&lt;/author&gt;\n&lt;/authorship&gt;\n</code></pre> <p>These identifiers can later be referenced in the <code>&lt;bitstream&gt;</code> and <code>&lt;iiif-uri&gt;</code> elements.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#describing-resources-with-the-resource-element","title":"Describing Resources With the <code>&lt;resource&gt;</code> Element","text":"<p>A <code>&lt;resource&gt;</code> element contains all necessary information to create a resource. It has the following attributes:</p> <ul> <li><code>label</code> (required): a human-readable, preferably meaningful short name of the resource</li> <li><code>restype</code> (required): the resource type as defined within the ontology </li> <li><code>id</code> (required): an arbitrary string providing a unique ID to the resource   in order to be referenceable by other resources;    the ID is only used during the import process    and later replaced by the IRI used internally by DSP </li> <li><code>permissions</code> (optional): a reference to a permission ID</li> <li><code>iri</code> (optional): a custom IRI, used when migrating existing resources (DaSCH-internal only)</li> <li><code>ark</code> (optional): a version 0 ARK, used when migrating existing resources. It is not possible    to use <code>iri</code> and <code>ark</code> in the same resource. When <code>ark</code> is used, it overrides <code>iri</code> (DaSCH-internal only).</li> <li><code>creation_date</code> (optional): the creation date of the resource, used when migrating existing resources.   It must be formatted according to the constraints of    xsd:dateTimeStamp,    which means that the timezone is required, e.g.: <code>2005-10-23T13:45:12.502951+02:00</code> (DaSCH-internal only)</li> </ul> <p>A complete <code>&lt;resource&gt;</code> element may look as follows:</p> <pre><code>&lt;resource label=\"EURUS015a\"\n          restype=\":Postcard\"\n          id=\"238807\"\n          permissions=\"private\"&gt;\n   ...\n&lt;/resource&gt;\n</code></pre> <p>For every property that the ontology requires, the <code>&lt;resource&gt;</code> element contains one property  element (e.g. <code>&lt;integer-prop name=\"property_name&gt;</code>). The property element contains one or more values.</p> <p>Example of a property element of type integer with two values:</p> <pre><code>&lt;integer-prop name=\":hasInteger\"&gt;\n    &lt;integer&gt;4711&lt;/integer&gt;\n    &lt;integer&gt;1&lt;/integer&gt;\n&lt;/integer-prop&gt;\n</code></pre> <p>The following property elements exist:</p> <ul> <li><code>&lt;bitstream&gt;</code>: contains a path to a file (if the resource is a multimedia resource)</li> <li><code>&lt;iiif-uri&gt;</code>: contains a URI to an IIIF image server (resource must be a <code>StillImageRepresentation</code>)</li> <li><code>&lt;boolean-prop&gt;</code>: contains a boolean value</li> <li><code>&lt;color-prop&gt;</code>: contains color values</li> <li><code>&lt;date-prop&gt;</code>: contains date values</li> <li><code>&lt;decimal-prop&gt;</code>: contains decimal values</li> <li><code>&lt;geometry-prop&gt;</code>: contains JSON geometry definitions for a region</li> <li><code>&lt;geoname-prop&gt;</code>: contains geonames.org location codes</li> <li><code>&lt;list-prop&gt;</code>: contains list element labels</li> <li><code>&lt;integer-prop&gt;</code>: contains integer values</li> <li><code>&lt;period-prop&gt;</code>: contains time period values (not yet implemented)</li> <li><code>&lt;resptr-prop&gt;</code>: contains links to other resources</li> <li><code>&lt;text-prop&gt;</code>: contains text values</li> <li><code>&lt;time-prop&gt;</code>: contains time values</li> <li><code>&lt;uri-prop&gt;</code>: contains URI values</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#bitstream","title":"<code>&lt;bitstream&gt;</code>","text":"<p>The <code>&lt;bitstream&gt;</code> element is used for bitstream data. It contains the path to a bitstream object like an image file, a ZIP container, an audio file etc. It must only be used if the resource is a <code>StillImageRepresentation</code>, an <code>AudioRepresentation</code>, a <code>DocumentRepresentation</code> etc.</p> <p>Notes:</p> <ul> <li>There is only one <code>&lt;bitstream&gt;</code> element allowed per representation.</li> <li>The <code>&lt;bitstream&gt;</code> element must be the first element.</li> <li>If a resource has a <code>&lt;bitstream&gt;</code> element, it cannot have a <code>&lt;iiif-uri&gt;</code> element.</li> <li>By default, the path is relative to the working directory where <code>dsp-tools xmlupload</code> is executed in. This behavior    can be modified with the flag <code>--imgdir</code>. If you keep the default,   it is recommended to choose the project folder as working directory, <code>my_project</code> in the example below:</li> </ul> <pre><code>my_project\n\u251c\u2500\u2500 files\n\u2502   \u251c\u2500\u2500 data_model.json\n\u2502   \u2514\u2500\u2500 data_file.xml   (&lt;bitstream&gt;images/dog.jpg&lt;/bitstream&gt;)\n\u2514\u2500\u2500 images\n    \u251c\u2500\u2500 dog.jpg\n    \u2514\u2500\u2500 cat.jpg\n</code></pre> <pre><code>my_project % dsp-tools xmlupload files/data_file.xml\n</code></pre> <p>Supported file extensions:</p> Representation Supported formats <code>ArchiveRepresentation</code> ZIP, TAR, GZ, Z, TAR.GZ, TGZ, GZIP, 7Z <code>AudioRepresentation</code> MP3, WAV <code>DocumentRepresentation</code> PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, EPUB <code>MovingImageRepresentation</code> MP4 <code>StillImageRepresentation</code> JPG, JPEG, PNG, TIF, TIFF, JP2 <code>TextRepresentation</code> TXT, CSV, XML, HTM, HTML, XSL, XSD, ODD, RNG, JSON <p>For more details, please consult the API docs.</p> <p>Attributes:</p> <ul> <li><code>permissions</code> : Permission ID (optional)</li> </ul> <p>Example of an image inside a <code>StillImageRepresentation</code>:</p> <pre><code>&lt;resource restype=\":Image\" id=\"image_1\" label=\"image_1\"&gt;\n    &lt;bitstream \n        license=\"http://rdfh.ch/licenses/cc-by-4.0\" \n        copyright-holder=\"DaSCH\" \n        authorship-id=\"authorship_id_defined_at_the_top\"&gt;\n            postcards/images/EURUS015a.jpg\n    &lt;/bitstream&gt;\n&lt;/resource&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#iiif-uri","title":"<code>&lt;iiif-uri&gt;</code>","text":"<p>The <code>&lt;iiif-uri&gt;</code> element is used for IIIF image server URIs.  All versions of the IIIF-API standards are supported.</p> <p>Notes:</p> <ul> <li>Only one <code>&lt;iiif-uri&gt;</code> element is allowed per <code>StillImageRepresentation</code>. </li> <li>If a resource has a <code>&lt;iiif-uri&gt;</code> element, it cannot have a <code>&lt;bitstream&gt;</code> element.</li> </ul> <p>Please consult the official documentation for details regarding the URI syntax:</p> <ul> <li>IIIF Image API 1.0</li> <li>IIIF Image API 2.0</li> <li>IIIF Image API 3.0</li> </ul> <p>Attributes:</p> <ul> <li><code>permissions</code> : Permission ID (optional)</li> </ul> <p>Example of an image inside a <code>StillImageRepresentation</code>:</p> <pre><code>&lt;resource restype=\":Image\" id=\"image_1\" label=\"image_1\"&gt;\n    &lt;iiif-uri \n        license=\"http://rdfh.ch/licenses/cc-by-4.0\" \n        copyright-holder=\"DaSCH\" \n        authorship-id=\"authorship_id_defined_at_the_top\"&gt;\n            https://iiif.dasch.swiss/0811/1Oi7mdiLsG7-FmFgp0xz2xU.jp2/full/837,530/0/default.jp2\n    &lt;/iiif-uri&gt;\n&lt;/resource&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#boolean-prop","title":"<code>&lt;boolean-prop&gt;</code>","text":"<p>The <code>&lt;boolean-prop&gt;</code> element is used for boolean values. It must contain exactly one <code>&lt;boolean&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#boolean","title":"<code>&lt;boolean&gt;</code>","text":"<p>The <code>&lt;boolean&gt;</code> element must contain the string \"true\"/\"True\" or \"false\"/\"False\", or the numeral 1 (true) or 0 (false).</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a boolean property:</p> <pre><code>&lt;boolean-prop name=\":hasBoolean\"&gt;\n  &lt;boolean&gt;true&lt;/boolean&gt;\n&lt;/boolean-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#color-prop","title":"<code>&lt;color-prop&gt;</code>","text":"<p>The <code>&lt;color-prop&gt;</code> element is used for color values. It must contain at least one <code>&lt;color&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#color","title":"<code>&lt;color&gt;</code>","text":"<p>The <code>&lt;color&gt;</code> element is used to indicate a color value. The color has to be given in web-notation, that is a <code>#</code> followed by 3 or 6 hex numerals.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 color values:</p> <pre><code>&lt;color-prop name=\":hasColor\"&gt;\n    &lt;color&gt;#00ff66&lt;/color&gt;\n    &lt;color&gt;#ff00ff&lt;/color&gt;\n&lt;/color-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#date-prop","title":"<code>&lt;date-prop&gt;</code>","text":"<p>The <code>&lt;date-prop&gt;</code> element is used for date values. It must contain at least one <code>&lt;date&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#date","title":"<code>&lt;date&gt;</code>","text":"<p>The <code>&lt;date&gt;</code> element contains a DSP-specific date value. It has the following format:</p> <pre><code>calendar:epoch:yyyy-mm-dd:epoch:yyyy-mm-dd\n</code></pre> <ul> <li><code>calendar</code>: \"GREGORIAN\", \"JULIAN\" or \"ISLAMIC\" (optional, default: GREGORIAN)</li> <li><code>epoch</code>: either \"AD\", \"BC\", \"BCE\" or \"CE\" (optional, default CE)</li> <li><code>yyyy</code>: year with one to four digits (required)</li> <li><code>mm</code>: month with one or two digits (optional, e.g. 01, 02, ..., 12)</li> <li><code>dd</code>: day with one or two digits (optional, e.g. 01, 02, ..., 31)</li> </ul> <p>Notes regarding precision:</p> <ul> <li>If the day is omitted, then the precision is month, if also the month is omitted, the precision is year.</li> <li>Internally, a date is always represented as a start and end date. </li> <li>If start and end date match, it's an exact date. </li> <li>If start and end date don't match, it's a range.</li> <li>If the end date is omitted,    it's a range from the earliest possible beginning of the start date   to the latest possible end of the start date.    For example:<ul> <li>\"1893\" will be expanded to a range from January 1st 1893 to December 31st 1893.</li> <li>\"1893-01\" will be expanded to a range from January 1st 1893 to January 31st 1893.</li> <li>\"1893-01-01\" will be expanded to a range from January 1st 1893 to the entire year 1893.</li> </ul> </li> <li>Therefore, a day-precision date should always be written with start and end date: <code>GREGORIAN:CE:1893-01-01:CE:1893-01-01</code></li> </ul> <p>Notes regarding calendars:</p> <ul> <li>DSP stores dates using a calendar-independent,   astronomical representation, and converts between calendars as needed. </li> <li>The Gregorian and Julian calendars have 12 months with 28-31 days each.</li> <li>The Islamic calendar has 12 months with 29 or 30 days each.</li> <li>Year 1 of the Islamic calendar began in 622 CE in the Julian calendar.   Years in the Islamic calendar are shorter than years in the Gregorian/Julian calendar,   so 2025 CE corresponds to 1446 AH (not 1403 AH).</li> <li>Eras of the Islamic calendar (AH: Anno Hegirae; BH: Before Hijra) are not supported yet.</li> </ul> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 date values:</p> <pre><code>&lt;date-prop name=\":hasDate\"&gt;\n  &lt;date&gt;GREGORIAN:CE:2014-01-31:CE:2014-01-31&lt;/date&gt;\n  &lt;date&gt;GREGORIAN:CE:1930-09-02:CE:1930-09-03&lt;/date&gt;\n&lt;/date-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#decimal-prop","title":"<code>&lt;decimal-prop&gt;</code>","text":"<p>The <code>&lt;decimal-prop&gt;</code> element is used for decimal values. It must contain at least one <code>&lt;decimal&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#decimal","title":"<code>&lt;decimal&gt;</code>","text":"<p>The <code>&lt;decimal&gt;</code> element contains a decimal number, they must be written with a decimal point <code>.</code> as a separator.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 decimal values:</p> <pre><code>&lt;decimal-prop name=\":hasDecimal\"&gt;\n    &lt;decimal&gt;3.14159&lt;/decimal&gt;\n    &lt;decimal&gt;2.71828&lt;/decimal&gt;\n&lt;/decimal-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#geometry-prop","title":"<code>&lt;geometry-prop&gt;</code>","text":"<p>The <code>&lt;geometry-prop&gt;</code> element is used for a geometric definition of a 2-D region (e.g. a region on an image). It must contain at least one <code>&lt;geometry&gt;</code> element. A <code>&lt;geometry-prop&gt;</code> can only be used inside a  <code>&lt;region&gt;</code> tag. </p> <p>Attributes:</p> <ul> <li><code>name</code>: the only allowed name is <code>hasGeometry</code>, because this property is a DSP base property that can only be used in    the <code>&lt;region&gt;</code> tag.</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#geometry","title":"<code>&lt;geometry&gt;</code>","text":"<p>A geometry value is defined as a JSON object. It contains the following data:</p> <ul> <li><code>status</code>: \"active\" or \"deleted\"</li> <li><code>type</code>: \"circle\", \"rectangle\" or \"polygon\" (only the rectangle can be displayed in DSP-APP. The others can be    looked at in another frontend, e.g. in TANGOH.)</li> <li><code>lineWidth</code>: integer number (in pixels)</li> <li><code>points</code>: array of coordinate objects of the form <code>{\"x\": decimal, \"y\": decimal}</code></li> <li><code>radius</code>: coordinate object of the form <code>{\"x\": decimal, \"y\": decimal}</code></li> <li>In the SALSAH data, there is also a key named <code>original_index</code> in the JSON format of all three shapes, but it doesn't    seem to have an influence on the shapes that TANGOH displays, so it can be omitted. </li> </ul> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example:</p> <pre><code>&lt;geometry-prop name=\"hasGeometry\"&gt;\n    &lt;geometry&gt;\n        {\n            \"status\": \"active\",\n            \"type\": \"rectangle\",\n            \"lineWidth\": 5,\n            \"points\": [\n                {\"x\":0.1,\"y\":0.7},\n                {\"x\":0.3,\"y\":0.2}\n            ]\n        }\n    &lt;/geometry&gt;\n    &lt;geometry&gt;\n        {\n            \"status\": \"active\",\n            \"type\": \"circle\",\n            \"lineWidth\": 5,\n            \"points\": [{\"x\":0.5,\"y\":0.3}],\n            \"radius\": {\"x\":0.1,\"y\":0.1}     // vector (0.1, 0.1)\n        }\n    &lt;/geometry&gt;\n    &lt;geometry&gt;\n        {\n            \"status\": \"active\",\n            \"type\": \"polygon\",\n            \"lineWidth\": 5,\n            \"points\": [{\"x\": 0.4, \"y\": 0.6},\n                       {\"x\": 0.5, \"y\": 0.9},\n                       {\"x\": 0.8, \"y\": 0.9},\n                       {\"x\": 0.7, \"y\": 0.6}]\n        }\n    &lt;/geometry&gt;\n&lt;/geometry-prop&gt;\n</code></pre> <p>The underlying grid is a 0-1 normalized top left-anchored grid. The following coordinate system shows the three shapes that were defined above: </p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#geoname-prop","title":"<code>&lt;geoname-prop&gt;</code>","text":"<p>The <code>&lt;geoname-prop&gt;</code> element is used for values that contain a geonames.org ID.  It must contain at least one <code>&lt;geoname&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#geoname","title":"<code>&lt;geoname&gt;</code>","text":"<p>Contains a valid geonames.org ID.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with a link to Vienna and one to Basel:</p> <pre><code>&lt;geoname-prop name=\":hasLocation\"&gt;\n    &lt;geoname&gt;2761369&lt;/geoname&gt;\n    &lt;geoname&gt;2661604&lt;/geoname&gt;\n&lt;/geoname-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#integer-prop","title":"<code>&lt;integer-prop&gt;</code>","text":"<p>The <code>&lt;integer-prop&gt;</code> element is used for integer values. It must contain at least one <code>&lt;integer&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#integer","title":"<code>&lt;integer&gt;</code>","text":"<p>The <code>&lt;integer&gt;</code> element contains an integer value, these are whole numbers.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 integer values:</p> <pre><code>&lt;integer-prop name=\":hasInteger\"&gt;\n    &lt;integer&gt;4711&lt;/integer&gt;\n    &lt;integer&gt;1&lt;/integer&gt;\n&lt;/integer-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#list-prop","title":"<code>&lt;list-prop&gt;</code>","text":"<p>The <code>&lt;list-prop&gt;</code> element is used as entry point into a list (list node). List nodes are identified by their <code>name</code> attribute that was given when creating the list nodes (which must be unique within each list!). It must contain at least one <code>&lt;list&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> <li><code>list</code>: name of the list as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#list","title":"<code>&lt;list&gt;</code>","text":"<p>The <code>&lt;list&gt;</code> element references a node in a (pull-down or hierarchical) list.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 list values:</p> <pre><code>&lt;list-prop list=\"category\" name=\":hasCategory\"&gt;\n    &lt;list&gt;physics&lt;/list&gt;\n    &lt;list&gt;nature&lt;/list&gt;\n&lt;/list-prop&gt;\n</code></pre> <p>Referencing Existing List IRIs:</p> <p>It is possible to reference existing list IRIs. IRIs can be obtained through API requests or database queries. Please note that every time a project is created anew, new IRIs are generated. Therefore, this workflow is intended for projects that already exist on the production server. To reference the IRI in the XML,  the <code>list</code> attribute must remain empty, but may not be omitted.</p> <pre><code>&lt;list-prop name=\":hasCategory\" list=\"\"&gt;\n    &lt;list&gt;http://rdfh.ch/lists/0001/uuid&lt;/list&gt;\n&lt;/list-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#resptr-prop","title":"<code>&lt;resptr-prop&gt;</code>","text":"<p>The <code>&lt;resptr-prop&gt;</code> element is used to link other resources within DSP. It must contain at least one <code>&lt;resptr&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#resptr","title":"<code>&lt;resptr&gt;</code>","text":"<p>The <code>&lt;resptr&gt;</code> element contains either the internal ID of another resource inside the XML or the IRI of an already existing resource on DSP. </p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with a link to <code>&lt;resource id=\"res_1\" ...&gt;</code>  and a link to <code>&lt;resource id=\"res_2\" ...&gt;</code>:</p> <pre><code>&lt;resptr-prop name=\":hasReferenceTo\"&gt;\n    &lt;resptr\"&gt;res_1&lt;/resptr&gt;\n    &lt;resptr&gt;res_2&lt;/resptr&gt;\n&lt;/resptr-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#text-prop","title":"<code>&lt;text-prop&gt;</code>","text":"<p>The <code>&lt;text-prop&gt;</code> element is used for text values. It must contain at least one <code>&lt;text&gt;</code> element. For details about the formatting of the text see the ontology documentation.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#text","title":"<code>&lt;text&gt;</code>","text":"<p>The <code>&lt;text&gt;</code> element has the following attributes:</p> <ul> <li><code>encoding</code> (required)<ul> <li><code>utf8</code>: To be used for <code>SimpleText</code> and <code>Textarea</code> properties.</li> <li><code>xml</code>: To be used for <code>Richtext</code> properties. It must follow the XML format as defined by the   DSP standard mapping.</li> </ul> </li> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 text values:</p> <pre><code>&lt;text-prop name=\":hasDescription\"&gt;\n    &lt;text encoding=\"xml\"&gt;Probe bei \"Wimberger\". Lokal in Wien?&lt;/text&gt;\n    &lt;text encoding=\"xml\"&gt;\n        &lt;strong&gt;Bold text&lt;/strong&gt; and a &lt;a class=\"salsah-link\" href=\"IRI:obj_0003:IRI\"&gt;link to an ID&lt;/a&gt;.&lt;br/&gt;\n        And a &lt;a class=\"salsah-link\" href=\"http://rdfh.ch/4123/nyOODvYySV2nJ5RWRdmOdQ\"&gt;link to an IRI&lt;/a&gt;.\n    &lt;/text&gt;\n&lt;/text-prop&gt;\n</code></pre> <p>The second text above contains a link to the resource <code>obj_0003</code>, which is defined in the same XML file. It also  contains a link to the resource <code>http://rdfh.ch/4123/nyOODvYySV2nJ5RWRdmOdQ</code>, which already exists on the DSP server.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#encoding-and-gui_element","title":"<code>encoding</code> and <code>gui_element</code>","text":"<p><code>encoding</code> must be combined with <code>gui_element</code> (defined in the ontology) as follows:</p> <code>gui_element</code>(JSON ontology) <code>encoding</code>(XML data) <code>SimpleText</code> <code>utf8</code> <code>Textarea</code> <code>utf8</code> <code>Richtext</code> <code>xml</code> <p>Handling of pretty-print whitespaces and newlines:</p> <ul> <li>encoding <code>utf8</code>: <ul> <li>leading and trailing whitespaces are removed</li> <li>multiple spaces are replaced by a single space</li> <li>(multiple) tab stops are replaced by a single space</li> </ul> </li> <li>encoding <code>xml</code>:<ul> <li>leading and trailing whitespaces are removed</li> <li>whitespaces and newlines don't have a meaning in XML, so they are removed. </li> <li>newlines can be created with <code>&lt;br/&gt;</code>.</li> <li>whitespaces are kept only inside <code>&lt;code&gt;</code> and <code>&lt;pre&gt;</code> tags.</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#examples-of-correct-and-incorrect-formatting","title":"Examples of correct and incorrect formatting","text":"<p><code>SimpleText</code></p> <p>Correct:</p> <pre><code>&lt;text encoding=\"utf8\"&gt;Single line.&lt;/text&gt;\n</code></pre> <p></p> <p>The following text will be displayed as follows in the APP: \"Leading and trailing spaces will be removed.\"</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Leading and trailing spaces will be removed.\n&lt;/text&gt;\n</code></pre> <p></p> <p>Incorrect:</p> <p>This type of entry will result in a validation error.</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Line breaks\n      within a text\n      are not allowed.\n&lt;/text&gt;\n</code></pre> <p></p> <p>This type of entry is not allowed.</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Markup&lt;br/&gt;is not allowed.\n&lt;/text&gt;\n</code></pre> <p></p> <p><code>Textarea</code></p> <p>Correct:</p> <p>The following text will be displayed as follows in the APP: \"Leading and trailing spaces will be removed.\"</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Leading and trailing spaces will be removed.\n&lt;/text&gt;\n</code></pre> <p></p> <p>The line breaks between the two sentences will be preserved and displayed in the APP.</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Leading and trailing spaces will be removed.\n      But this line break will stay.\n&lt;/text&gt;\n</code></pre> <p></p> <p>Incorrect:</p> <p>This type of entry is not allowed.</p> <pre><code>&lt;text encoding=\"utf8\"&gt;\n      Markup&lt;br/&gt; is not allowed.\n&lt;/text&gt;\n</code></pre> <p></p> <p><code>Richtext</code></p> <p>Correct:</p> <p>The following text will be displayed as follows in the APP: \"Leading and trailing spaces will be removed.\"</p> <pre><code>&lt;text encoding=\"xml\"&gt;\n      Leading and trailing spaces will be removed.\n&lt;/text&gt;\n</code></pre> <p></p> <p>The following text will be displayed as a single line in the APP.</p> <pre><code>&lt;text encoding=\"xml\"&gt;\n      Leading and trailing spaces will be removed.\n      This newline will be replaced by a single space.\n&lt;/text&gt;\n</code></pre> <p></p> <p>This will result in a line break in the APP.</p> <pre><code>&lt;text encoding=\"xml\"&gt;\n      Leading and trailing spaces will be removed.&lt;br/&gt;\n      Using this tag will result in a line break.\n&lt;/text&gt;\n</code></pre> <p></p> <p>Incorrect:</p> <p>This text should be converted into XML using the DSP standard mapping.</p> <pre><code>&lt;text encoding=\"xml\"&gt;\n      # Markdown Title\n      - This type of content\n      - Is not allowed\n&lt;/text&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#special-characters-overview","title":"Special Characters: Overview","text":"<p>Depending on the encoding of your text, special characters behave differently. There are two places where this must be taken into account:</p> <ul> <li>When a string is passed to    <code>excel2xml.make_text_prop()</code></li> <li>When a string is written by hand into an XML file</li> </ul> <p>In the tables below, the second column is the output of the first column, and the third column is how DSP-APP displays the second column.</p> <p>Behavior of simple text (<code>SimpleText</code>/<code>Textarea</code> + <code>utf8</code>):</p> input to <code>excel2xml</code> XML file DSP-APP Remarks <code>&lt;</code> <code>&amp;lt;</code> &lt; <code>&gt;</code> <code>&amp;gt;</code> &gt; <code>&lt;</code> \u26d4 invalid XML <code>&gt;</code> &gt; discouraged by XML standard, but possible <code>&amp;</code> <code>&amp;amp;</code> &amp; <code>&amp;</code> \u26d4 invalid XML <code>&amp;gt;</code> \u26d4 discouraged: The leading <code>&amp;</code> will be escaped <code>&lt;tag&gt;</code> <code>&amp;lt;tag&amp;gt;</code> <code>&lt;tag&gt;</code> discouraged: Simple text is not rich text <code>&lt;tag&gt;</code> \u26d4 forbidden: Simple text is not rich text <p>Behavior of text with markup (<code>Richtext</code> + <code>xml</code>):</p> input to <code>excel2xml</code> XML file DSP-APP Remarks <code>&lt;</code> <code>&amp;lt;</code> <code>&amp;lt;</code> <code>&gt;</code> <code>&amp;gt;</code> &gt; <code>&lt;</code> \u26d4 invalid XML <code>&gt;</code> &gt; discouraged by XML standard, but possible <code>&amp;lt;</code> <code>&amp;lt;</code> &lt; <code>&amp;gt;</code> <code>&amp;gt;</code> &gt; <code>&amp;</code> <code>&amp;amp;</code> &amp; <code>&amp;</code> \u26d4 invalid XML <code>&amp;amp;</code> <code>&amp;amp;</code> &amp; <code>&lt;em&gt;text&lt;/em&gt;</code> <code>&lt;em&gt;text&lt;/em&gt;</code> text <code>unclosed &lt;tag&gt;</code> <code>unclosed &amp;lt;tag&amp;gt;</code> <code>unclosed &lt;tag&gt;</code> <code>&amp;lt;not a tag&amp;gt;</code> <code>&lt;not a tag&gt;</code> <code>&amp;nbsp;</code> <code></code> <code></code> <code>&amp;nbsp;</code> \u26d4 invalid XML"},{"location":"DSP-TOOLS/data-file/xml-data-file/#special-characters-rules","title":"Special Characters: Rules","text":"<p>From the systematic analysis above,  the following rules can be derived:</p> <p>For input of excel2xml:</p> <ul> <li>Simple text: Don't use HTML escape sequences.</li> <li>Simple text: Don't use tags. (Mathematical comparisons with <code>&lt;&gt;</code> are allowed).</li> <li>Rich text: The special characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code> are only allowed to construct a tag.</li> <li>Rich text: If tags are used, they must result in well-formed XML.</li> <li>Rich text: HTML escape sequences can be freely used.</li> </ul> <p>If you write an XML file by hand:</p> <ul> <li>Simple text: The special characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code> must be escaped.</li> <li>Simple text: Don't use tags. (Mathematical comparisons with <code>&lt;&gt;</code> are allowed).</li> <li>Rich text: The special characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code> must be escaped if they are not part of a valid HTML tag.</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#time-prop","title":"<code>&lt;time-prop&gt;</code>","text":"<p>The <code>&lt;time-prop&gt;</code> element is used for time values in the Gregorian calendar.  It must contain at least one <code>&lt;time&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#time","title":"<code>&lt;time&gt;</code>","text":"<p>The <code>&lt;time&gt;</code> element represents an exact datetime value  in the form xsd:dateTimeStamp,  which is defined as <code>yyyy-mm-ddThh:mm:ss.sssssssssssszzzzzz</code>.  The following abbreviations describe this form:</p> <ul> <li><code>yyyy</code>: a four-digit numeral that represents the year. The value cannot start with a minus (-) or a plus (+) sign.   0001 is the lexical representation of the year 1 of the Common Era (also known as 1 AD). The value cannot be 0000.    The calendar is always the Gregorian calendar.</li> <li><code>mm</code>: a two-digit numeral that represents the month</li> <li><code>dd</code>: a two-digit numeral that represents the day</li> <li><code>hh</code>: a two-digit numeral representing the hours. Must be between 0 and 23</li> <li><code>mm</code>: a two-digit numeral that represents the minutes</li> <li><code>ss</code>: a two-digit numeral that represents the seconds</li> <li><code>ssssssssssss</code>: If present, a 1-to-12-digit numeral that represents the fractional seconds (optional)</li> <li><code>zzzzzz</code>: represents the time zone (required).</li> </ul> <p>Each part of the datetime value that is expressed as a numeric value is constrained to the maximum value within the  interval that is determined by the next higher part of the datetime value. For example, the day value can never be 32 and cannot be 29 for month 02 and year 2002 (February 2002).</p> <p>The timezone is defined as follows:</p> <ul> <li>A plus (+) or minus (-) sign that is followed by hh:mm:<ul> <li><code>+</code>: Indicates that the specified time instant is in a time zone    that is ahead of the UTC time by hh hours and mm minutes.</li> <li><code>-</code>: Indicates that the specified time instant is in a time zone    that is behind UTC time by hh hours and mm minutes.</li> <li><code>hh</code>: a two-digit numeral (with leading zeros as required) that represents the hours.     The value must be between -14 and +14, inclusive.</li> <li><code>mm</code>: a two-digit numeral that represents the minutes.    The value must be zero when hh is equal to 14.</li> </ul> </li> <li>Z: The literal Z, which represents the time in UTC (Z represents Zulu time, which is equivalent to UTC).    Specifying Z for the time zone is equivalent to specifying +00:00 or -00:00.</li> </ul> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 time values:</p> <pre><code>&lt;time-prop name=\":hasTime\"&gt;\n    &lt;time&gt;2019-10-23T13:45:12Z&lt;/time&gt;\n    &lt;time&gt;2009-10-10T12:00:00-05:00&lt;/time&gt;\n&lt;/time-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#uri-prop","title":"<code>&lt;uri-prop&gt;</code>","text":"<p>The <code>&lt;uri-prop&gt;</code> represents a Uniform Resource Identifier. It must contain at least one <code>&lt;uri&gt;</code> element.</p> <p>Attributes:</p> <ul> <li><code>name</code>: name of the property as defined in the ontology (required)</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#uri","title":"<code>&lt;uri&gt;</code>","text":"<p>The <code>&lt;uri&gt;</code> element contains a syntactically valid URI.</p> <p>Attributes:</p> <ul> <li><code>permissions</code>: Permission ID (optional)</li> <li><code>comment</code>: a comment for this specific value (optional)</li> </ul> <p>Example of a property with 2 URI values:</p> <pre><code>&lt;uri-prop name=\":hasURI\"&gt;\n    &lt;uri&gt;http://www.groove-t-gang.ch&lt;/uri&gt;\n    &lt;uri&gt;http://dasch.swiss&lt;/uri&gt;\n&lt;/uri-prop&gt;\n</code></pre>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#dsp-base-resources-and-base-properties-to-be-used-directly-in-the-xml-file","title":"DSP Base Resources and Base Properties to Be Used Directly in the XML File","text":"<p>There is a number of base resources and base properties from which no subclasses can be derived in a project ontology.  They are directly available in the XML data file.  Please have in mind that built-in names of the knora-base ontology must be used without prepended colon. See also the related part of the JSON project documentation</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#region","title":"<code>&lt;region&gt;</code>","text":"<p>A <code>&lt;region&gt;</code> resource defines a region of interest (ROI) in an image. It must have the following predefined properties:</p> <ul> <li><code>hasColor</code> (1)</li> <li><code>isRegionOf</code> (1)</li> <li><code>hasGeometry</code> (1)</li> <li><code>hasComment</code> (0-n)</li> </ul> <p>Example:</p> <pre><code>&lt;region label=\"Rectangle in image\" id=\"region_0\"&gt;\n    &lt;color-prop name=\"hasColor\"&gt;\n        &lt;color&gt;#5d1f1e&lt;/color&gt;\n    &lt;/color-prop&gt;\n    &lt;resptr-prop name=\"isRegionOf\"&gt;\n        &lt;resptr&gt;img_1&lt;/resptr&gt;\n    &lt;/resptr-prop&gt;\n    &lt;geometry-prop name=\"hasGeometry\"&gt;\n        &lt;geometry&gt;\n            {\n                \"status\": \"active\",\n                \"type\": \"rectangle\",\n                \"lineWidth\": 5,\n                \"points\": [\n                    {\"x\":0.1,\"y\":0.7},\n                    {\"x\":0.3,\"y\":0.2}\n                ]\n            }\n        &lt;/geometry&gt;\n    &lt;/geometry-prop&gt;\n    &lt;text-prop name=\"hasComment\"&gt;\n        &lt;text encoding=\"utf8\"&gt;This is a rectangle-formed region of interest.&lt;/text&gt;\n    &lt;/text-prop&gt;\n&lt;/region&gt;\n</code></pre> <p>More details about the <code>&lt;geometry-prop&gt;</code> are documented here.</p> <p>Technical note: A <code>&lt;region&gt;</code> is in fact a <code>&lt;resource restype=\"Region\"&gt;</code>. But it is mandatory to use the  shortcut, so that the XML file can be validated more precisely.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#link","title":"<code>&lt;link&gt;</code>","text":"<p><code>&lt;link&gt;</code> is a resource linking together several other resources of different classes. It must have the following  predefined properties:</p> <ul> <li><code>hasComment</code> (0-n)</li> <li><code>hasLinkTo</code> (1-n)</li> </ul> <p>Example:</p> <pre><code>&lt;link label=\"Link between three resources\" id=\"link_obj_0\"&gt;\n    &lt;text-prop name=\"hasComment\"&gt;\n        &lt;text encoding=\"utf8\"&gt;\n            A link object can link together an arbitrary number of resources from any resource class.\n        &lt;/text&gt;\n    &lt;/text-prop&gt;\n    &lt;resptr-prop name=\"hasLinkTo\"&gt;\n        &lt;resptr&gt;doc_001&lt;/resptr&gt;\n        &lt;resptr&gt;img_obj_5&lt;/resptr&gt;\n        &lt;resptr&gt;audio_obj_0&lt;/resptr&gt;\n    &lt;/resptr-prop&gt;\n&lt;/link&gt;\n</code></pre> <p>Technical note: A <code>&lt;link&gt;</code> is in fact a <code>&lt;resource restype=\"LinkObj\"&gt;</code>. But it is mandatory to use the  shortcut, so that the XML file can be validated more precisely.</p>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#video-segment-and-audio-segment","title":"<code>&lt;video-segment&gt;</code> and <code>&lt;audio-segment&gt;</code>","text":"<p><code>&lt;video-segment&gt;</code> and <code>&lt;audio-segment&gt;</code> represent sections of an audio/video file.  They can have the following predefined properties:</p> prop name cardinality prop type <code>isSegmentOf</code> 1 link <code>hasSegmentBounds</code> 1 interval <code>hasTitle</code> 0-1 text (unformatted) <code>hasComment</code> 0-n text (formatted) <code>hasDescription</code> 0-n text (formatted) <code>hasKeyword</code> 0-n text (unformatted) <code>relatesTo</code> 0-n link <p>Please be aware that the properties have to be provided in exactly this order.  It is possible to leave out optional properties, but the present ones must fit the order.</p> <p>Example:</p> <pre><code>&lt;video-segment label=\"Video Segment\" id=\"video_segment_1\"&gt;\n    &lt;isSegmentOf&gt;video_thing_1&lt;/isSegmentOf&gt;\n    &lt;!-- The segment bounds must be entered in seconds. Decimal (for fractions of a second) are allowed, e.g. `1.4`--&gt;\n    &lt;hasSegmentBounds segment_start=\"600\" segment_end=\"1200\"/&gt; &lt;!-- from 0h 10min 00s to 0h 20min 00s --&gt;\n    &lt;hasTitle&gt;Title of video segment&lt;/hasTitle&gt;\n    &lt;hasComment&gt;&lt;strong&gt;Comment&lt;/strong&gt; of video segment&lt;/hasComment&gt;\n    &lt;hasDescription&gt;&lt;strong&gt;Description&lt;/strong&gt; of video segment&lt;/hasDescription&gt;\n    &lt;hasKeyword&gt;Keyword of video segment&lt;/hasKeyword&gt;\n    &lt;relatesTo&gt;audio_segment_1&lt;/relatesTo&gt;\n&lt;/video-segment&gt;\n</code></pre> <p>Allowed attributes in these property tags: <code>permissions</code>, <code>comment</code>.  Example: <code>&lt;hasTitle permissions=\"private\" comment=\"Comment to my title\"&gt;Title of video segment&lt;/hasTitle&gt;</code></p> <p>Technical notes: </p> <ul> <li><code>&lt;video-segment&gt;</code> / <code>&lt;audio-segment&gt;</code> are in fact a    <code>&lt;resource restype=\"VideoSegment\"&gt;</code> / <code>&lt;resource restype=\"AudioSegment\"&gt;</code>.    But it is mandatory to use the shortcut, so that the XML file can be validated more precisely.</li> <li><code>isSegmentOf</code> is a knora-base super-property that cannot be used directly.    In the background, DSP-TOOLS converts it to <code>isVideoSegmentOf</code> / <code>isAudioSegmentOf</code>.</li> </ul>"},{"location":"DSP-TOOLS/data-file/xml-data-file/#complete-example","title":"Complete Example","text":"<p>DaSCH provides you with the <code>daschland-scripts</code> repo, an example repository that contains everything which is necessary to create a project and upload data. It also contains an XML file here. (Direct download link)</p>"},{"location":"DSP-TOOLS/data-model/data-model-cli/","title":"Commands to Interact With a Server","text":""},{"location":"DSP-TOOLS/data-model/data-model-cli/#cli-commands","title":"CLI-Commands","text":""},{"location":"DSP-TOOLS/data-model/data-model-cli/#create","title":"<code>create</code>","text":"<p>This command reads a JSON project definition (containing one or more data models) and creates it on a DSP server.</p> <pre><code>dsp-tools create [options] project_definition.json\n</code></pre> <p>The most frequently used options are:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server </li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> </ul> <p>To see all possible options, type <code>dsp-tools create --help</code>.</p> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools create project_definition.json\n</code></pre> <p>This will create the project defined in <code>project_definition.json</code> on <code>localhost</code> for local viewing.</p> <p>In order to create the same project on the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools create -s https://api.dasch.swiss -u 'your@email.com' -p 'password' project_definition.json\n</code></pre> <p>The expected JSON format is documented here.</p>"},{"location":"DSP-TOOLS/data-model/data-model-cli/#get","title":"<code>get</code>","text":"<p>This command retrieves a project with its data model(s) from a DSP server  and writes it into a JSON file.  This JSON file can then be used  to create the same project on another DSP server. </p> <pre><code>dsp-tools get [options] project_definition.json\n</code></pre> <p>The most frequently used options are:</p> <ul> <li><code>-P</code> | <code>--project</code> (mandatory): shortcode, shortname or IRI of the project </li> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server </li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API </li> </ul> <p>To see all possible options, type <code>dsp-tools get --help</code>.</p> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools get -P my_project project_definition.json\n</code></pre> <p>will get <code>my_project</code> from <code>localhost</code>.</p> <p>In order to get a project from the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools get -s https://api.dasch.swiss -u 'your@email.com' -p 'password' -P my_project project_definition.json\n</code></pre> <p>It is possible to get a project from a DSP server without giving credentials. But in this case, the resulting JSON file won't have a \"users\" section.</p> <p>The expected JSON format is documented here.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/","title":"Command excel2json","text":""},{"location":"DSP-TOOLS/data-model/excel2json/#excel-file-format-to-generate-a-json-project","title":"Excel File Format to Generate a JSON Project","text":""},{"location":"DSP-TOOLS/data-model/excel2json/#excel2json","title":"<code>excel2json</code>","text":"<p>This command creates a JSON project definition file from a nested folder structure with Excel files. The Excel format for the <code>lists</code> section has been adapted compared to the previous <code>old-excel2json</code> command.</p> <pre><code>dsp-tools excel2json excelfolder project_definition.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The expected Excel file format and the folder structure are documented  here.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#excel2lists","title":"<code>excel2lists</code>","text":"<p>This command creates the \"lists\" section of a JSON project file from Excel files. The Excel format for the <code>lists</code> section has been adapted compared to the previous <code>old-excel2lists</code> command.</p> <pre><code>dsp-tools excel2lists [options] excelfolder lists_section.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The expected Excel file format and the folder structure are documented  here.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#excel2resources","title":"<code>excel2resources</code>","text":"<p>This command creates the \"resources\" section of a JSON project file from an Excel file.</p> <pre><code>dsp-tools excel2resources resources.xlsx resources_section.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The expected Excel format is documented here.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#excel2properties","title":"<code>excel2properties</code>","text":"<p>This command creates the \"properties\" section of a JSON project file from an Excel file.</p> <pre><code>dsp-tools excel2properties properties.xlsx properties_section.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The expected Excel format is documented here.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#old-excel2json","title":"<code>old-excel2json</code>","text":"<p>This command creates a JSON project definition file from a nested folder structure with Excel files. It will be deprecated in favor of <code>excel2json</code> in the future.</p> <pre><code>dsp-tools old-excel2json excelfolder project_definition.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#old-excel2lists","title":"<code>old-excel2lists</code>","text":"<p>This command creates the \"lists\" section of a JSON project file from Excel files. It will be deprecated in favor of <code>excel2lists</code> in the future.</p> <pre><code>dsp-tools old-excel2lists [options] excelfolder lists_section.json\n</code></pre> <p>The following options are available:</p> <ul> <li><code>-v</code> | <code>--verbose</code> (optional): print more information about the progress to the console</li> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The expected Excel file format and the folder structure are documented  here.</p> <p>With the <code>excel2json</code> command,  a JSON project file can be created from Excel files.</p> <p>To put it simple, a JSON project consists of</p> <ul> <li>1 header section with metadata about the project</li> <li>0-1 \"lists\" sections</li> <li>1-n \"ontologies\", each containing<ul> <li>1 \"properties\" section</li> <li>1 \"resources\" section</li> </ul> </li> </ul> <p>For each of these 4 sections, one or several Excel files are necessary. The Excel files and their format are described  below. </p> <p>If you want to convert the Excel files to JSON, it is possible to invoke a command for each of these sections  separately (as described below).  But it is more convenient to use the command that creates the entire JSON project file.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-folder-structure-for-excel2json","title":"The Folder Structure for <code>excel2json</code>","text":"<p>The following folder structure has to be used when invoking the <code>excel2json</code> command.</p> <pre><code>data_model_files\n\u251c\u2500\u2500 json_header.xlsx (optional)\n\u251c\u2500\u2500 lists\n\u2502   \u251c\u2500\u2500 list.xlsx\n\u2502   \u2514\u2500\u2500 grammar_lists.xlsx\n\u2514\u2500\u2500 onto_name (onto_label)\n    \u251c\u2500\u2500 properties.xlsx\n    \u2514\u2500\u2500 resources.xlsx\n</code></pre> <p>Conventions for the names:</p> <ul> <li>The \"lists\" folder must have exactly this name, if it exists. It can also be omitted.</li> <li>The Excel files containing the lists must have the word \"list\" in the name, otherwise they will be ignored.</li> <li>Replace \"onto_name\" by your ontology's name, and \"onto_label\" by your ontology's label.</li> <li>The only name that can be chosen freely is the name of the topmost folder (\"data_model_files\" in this example).</li> <li>The file \"json_header.xlsx\" is optional. If it exists, it should be located in the top level folder.</li> </ul> <p>Then, use the following command:</p> <pre><code>dsp-tools excel2json data_model_files project.json\n</code></pre> <p>This will create a file <code>project.json</code> with the lists, properties, and resources from the Excel files. </p> <p>If the file \"json_header.xlsx\" is not provided, the \"header\" of the resulting JSON file is empty and thus invalid.  In this case, it is necessary to add the project shortcode, shortname, longname, descriptions, and keywords by hand.  Likewise, there will be no prefixes, no groups and no users in the resulting JSON file.</p> <p>Continue reading the following paragraphs to learn more about the expected structure of the Excel files.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-folder-structure-for-old-excel2json","title":"The Folder Structure for <code>old-excel2json</code>","text":"<p>The convention for the folder structure and naming is the same as for <code>excel2json</code>.</p> <pre><code>data_model_files\n\u251c\u2500\u2500 json_header.xlsx (optional)\n\u251c\u2500\u2500 lists\n\u2502   \u251c\u2500\u2500 en.xlsx\n\u2502   \u2514\u2500\u2500 de.xlsx\n\u2514\u2500\u2500 onto_name (onto_label)\n    \u251c\u2500\u2500 properties.xlsx\n    \u2514\u2500\u2500 resources.xlsx\n</code></pre> <p>Then, use the following command:</p> <pre><code>dsp-tools old-excel2json data_model_files project.json\n</code></pre>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-json_headerxlsx","title":"The <code>json_header.xlsx</code>","text":"<p>The header section can be filled out with the \"json_header.xlsx\" file. The file must be in the top level folder, and the name must be an exact match.</p> <p>It is recommended to use the template in the <code>daschland-scripts</code> repo. (Direct download link)</p> <p>The sheets should be filled as follows:</p> <ul> <li>Prefixes<ul> <li>Both columns (prefixes and URI) are mandatory.</li> <li>At least one prefix has to be declared</li> </ul> </li> <li>Project<ul> <li>All columns are mandatory: shortcode, shortname, longname, default_permissions.</li> <li>Only one row may be filled.</li> </ul> </li> <li>Description<ul> <li>The langauge options are: en, de, fr, it, rm</li> <li>At least one language has to be filled.</li> <li>Only one row may be filled.</li> </ul> </li> <li>Keywords<ul> <li>At least one keyword has to be entered in the column \"keywords\".</li> </ul> </li> <li>Licenses<ul> <li>At least one license IRI. This is required in order to be able to reference it in the data.</li> <li>All the recommended licenses are listed in the template. To disable them simple delete the license from the cell.</li> <li>See the JSON project definition documentation for details.</li> </ul> </li> <li>Users (Optional) <ul> <li>This sheet may be omitted or left empty.</li> <li>For each user, all columns are mandatory: username, email, givenName, familyName, password, lang, role.</li> <li>The lang has to be one of: en, de, fr, it or rm</li> <li>The role has to be projectadmin or projectmember.</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-resources-section","title":"The <code>resources</code> Section","text":"<p>With the <code>excel2resources</code> command,  the <code>resources</code> section used in a data model (JSON) can be created from an Excel file.  Only <code>XLSX</code> files are allowed.  The <code>resources</code> section can be inserted into the ontology file and then be uploaded onto a DSP server.</p> <p>An Excel file template can be found in the <code>daschland-scripts</code> repo. (Direct download link) It is recommended to work from the template. </p> <p>The expected worksheets of the Excel file are:</p> <ul> <li><code>classes</code>: a table with all resource classes intended to be used in the resulting JSON</li> <li><code>class1</code>, <code>class2</code>,...: a table for each resource class named after its name.    If no cardinality should be provided for a class then the sheet can be left empty or omitted entirely.</li> </ul> <p>The worksheet called <code>classes</code> must have the following structure: </p> <p>The expected columns are:</p> <ul> <li><code>name</code>   (mandatory): Unique identifier for the resource class</li> <li><code>label_en</code>, <code>label_de</code>, <code>label_fr</code>, <code>label_it</code>, <code>label_rm</code>    (one language mandatory): Label of the resource class that will be displayed in DSP-APP. Should be rather short.</li> <li><code>comment_en</code>, <code>comment_de</code>, <code>comment_fr</code>, <code>comment_it</code>, <code>comment_rm</code>   (optional): Description of the resource class. Can be longer than the label.</li> <li><code>super</code>   (mandatory): The type of this resource class,    i.e. the base resource class/classes that this resource class is derived from.   Must be one of the values listed in the documentation.    If more than one: separated by commas. </li> <li><code>default_permissions_overrule</code>   (optional): If you have set this project to \"public\" in the <code>json_header.xlsx</code>,   then you can still hide the resources of certain classes.<ul> <li>Use \"private\" on any resource class (including image classes)   to make its resources invisible for people outside of your project.</li> <li>Use \"limited view\" on an image class to blur the image for people outside of your project,   while keeping the rest of the resource public.</li> </ul> </li> </ul> <p>The optional columns may be omitted in the Excel.</p> <p>All other worksheets, one for each resource class, have the following structure: </p> <p>The expected columns are:</p> <ul> <li><code>Property</code>    (mandatory): The unique identifier of the property<ul> <li>If the property references the ontology you are working on    you can enter the property name either as <code>:prop</code> or bare <code>prop</code>.</li> <li>If you reference another ontology from the same project you must use the prefix of that ontology: <code>other-onto:prop</code></li> <li>Special case: <code>isPartOf</code> and <code>seqnum</code> are properties that can be used directly    without having to define them in the ontology, see documentation.   If you add a cardinality for either of those properties you must enter them bare as written above.    If your own ontology has a property called <code>isPartOf</code> and <code>seqnum</code>    then you must enter them with a colon: <code>:isPartOf</code> and <code>:seqnum</code></li> </ul> </li> <li><code>Cardinality</code>    (mandatory): Indicates how often the property may occur. The possible values are:<ul> <li><code>\"1\"</code>: exactly once (mandatory one value and only one)</li> <li><code>\"0-1\"</code>: The value may be omitted, but can occur only once.</li> <li><code>\"1-n\"</code>: At least one value must be present, but multiple values may be present.</li> <li><code>\"0-n\"</code>: The value may be omitted, but may also occur multiple times.</li> </ul> </li> <li><code>gui_order</code>    (optional): By default, DSP-APP displays the properties in the order how they are listed in the Excel sheet.   If you prefer another order, you can make a numbering in this column.   Example: You order the property names alphabetically in the Excel,    but they should be displayed in another order in DSP-APP.</li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-properties-section","title":"The <code>properties</code> Section","text":"<p>With the <code>excel2properties</code> command,  the <code>properties</code> section used in a data model (JSON) can be created from an Excel file. Only the first worksheet of the Excel file is considered and only XLSX files are allowed.  The <code>properties</code> section can be inserted into the ontology file and then be uploaded onto a DSP server.</p> <p>An Excel file template can be found in the <code>daschland-scripts</code> repo. (Direct download link) It is recommended to work from the template.</p> <p>The Excel sheet must have the following structure: </p> <p>The expected columns are:</p> <ul> <li><code>name</code>   (mandatory): Unique identifier for the property</li> <li><code>label_en</code>, <code>label_de</code>, <code>label_fr</code>, <code>label_it</code>, <code>label_rm</code>:   (one language mandatory): Label of the property that will be displayed in DSP-APP.    Should be rather short.</li> <li><code>comment_en</code>, <code>comment_de</code>, <code>comment_fr</code>, <code>comment_it</code>, <code>comment_rm</code>   (optional): Description of the property. Can be longer than the label.</li> <li><code>super</code>    (mandatory): The type of this property, i.e. the base property/properties that this property is derived from.   Must be one of the values listed in the documentation.   If more than one: separated by commas.</li> <li><code>object</code>    (mandatory): Target value of this property.    Must be one of the values listed in the documentation.<ul> <li>If the property is derived from <code>hasValue</code>,    the type of the property must be further specified by the object it takes,    e.g. <code>TextValue</code>, <code>ListValue</code>, or <code>IntValue</code>. </li> <li>If the property is derived from <code>hasLinkTo</code>,    the <code>object</code> specifies the resource class that this property refers to.</li> </ul> </li> <li><code>subject</code>   (optional): The subject defines the resource class the property can be used on.    It has to be provided as prefixed name of the resource class.</li> <li><code>gui_element</code>    (mandatory): The graphic component, defines how this property should be displayed.   Depends on the value of <code>object</code>:    Read the documentation of the respective <code>object</code> to learn which <code>gui_element</code> can be used.</li> <li><code>gui_attributes</code>    (only mandatory for lists): The <code>gui_element</code> <code>List</code> requires the attribute <code>hlist</code>.    Form: <code>hlist: value</code>. </li> <li><code>default_permissions_overrule</code>   (optional): If you have set this project to \"public\" in the <code>json_header.xlsx</code>,   then you can still hide certain properties.   Use \"private\" to make the content of a property invisible for people outside of your project,   while keeping the rest of the resource public.</li> </ul> <p>The optional columns may be omitted in the Excel.  </p> <p>For backwards compatibility,  files with column titles <code>hlist</code>, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, or <code>rm</code> are valid, but deprecated.</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-lists-section","title":"The <code>lists</code> Section","text":"<p>With the <code>excel2lists</code> command,  the <code>lists</code> section of a JSON project file can be created from one or several Excel files.  The lists can then be inserted into a JSON project file and uploaded to a DSP server.</p> <p>The following example shows how to create the \"lists\" section  with Excel files that are located in a directory called <code>listfolder</code>. The Excel files must contain the word \"list\" in the name. All the files containing that word will be included. Files that do not contain that word will not be considered.</p> <pre><code>dsp-tools excel2lists listfolder lists.json\n</code></pre> <p>The Excel sheets must have the following structure:</p> <p></p>"},{"location":"DSP-TOOLS/data-model/excel2json/#formal-requirements-of-the-excel-format","title":"Formal requirements of the Excel format","text":"<ul> <li>One Excel file may contain several lists.</li> <li>Per Excel sheet only one list is allowed.    The name of the sheet is not relevant, but must be unique within one Excel file.</li> <li>The list name (i.e. the content of the columns <code>en_list</code>/<code>de_list</code>/...) must be unique in one project.</li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#columns","title":"Columns","text":"<ul> <li><code>ID (Optional)</code><ul> <li>Column where a custom ID for the node or list can be entered.    This ID will become the <code>name</code> of the list/node in the JSON file.</li> <li>The ID must be unique in the entire project.</li> <li>If this field is left empty, an auto-ID will be generated. </li> <li>In case of duplicate IDs, an auto-ID will be generated, which includes the names of the ancestors of the node.    For example:<ul> <li><code>list1:node1:node1.1</code> for the node <code>node1.1</code> in <code>list1</code></li> <li><code>list2:node1:node1.1</code> for the node <code>node1.1</code> in <code>list2</code></li> </ul> </li> </ul> </li> <li><code>&lt;language&gt;_comments</code>: These are optional but recommended at least for the list itself (the second row of the Excel).   If they are not provided for the list, the labels will be entered in the comments section.   Nodes will not have comments if not explicitly provided.   All languages that are used for one list must also be used for the comments.   It is possible to provide a comment only for some nodes.</li> <li><code>&lt;language&gt;_list</code>: At least one column with the name of the list in that language.</li> <li><code>&lt;language&gt;_number</code>: At least one column which specifies a node level.    It starts with 1 for the highest node hierarchy, and can go on infinitely.</li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#languages","title":"Languages","text":"<ul> <li>The allowed language tags are: <code>de</code>, <code>en</code>, <code>fr</code>, <code>it</code>, <code>rm</code></li> <li>At least one language must be used.</li> <li>There is no limit to the number of columns (i.e. node hierarchies).</li> <li> <p>Within one list, i.e. Excel sheet, all nodes must be consistently translated into the same languages.</p> <ul> <li> <p>Correct:</p> <p></p> </li> <li> <p>Incorrect, because <code>de_list</code> is specified, but <code>de_1</code> is missing:</p> <p></p> </li> </ul> </li> <li> <p>Within one list, i.e. Excel sheet, all nodes must be translated into the same languages.   This example is incorrect, because there is no English translation for <code>Knoten 1</code>:</p> <p></p> </li> <li> <p>The use of language does not have to be consistent across all lists.    For example, it is correct if \"list1\" is translated into English and German,    but \"list2\" is only translated into English.</p> </li> </ul>"},{"location":"DSP-TOOLS/data-model/excel2json/#rows","title":"Rows","text":"<ul> <li>Each sheet must contain at least two rows.</li> <li>The sheet must be ordered correctly as shown in the example above. </li> <li> <p>The order in the Excel corresponds to the order in the JSON file and the DSP-APP.   This example is incorrect, because the second column is unordered:</p> <p></p> </li> <li> <p>The first row of the sheet, directly under the title, must only contain the information for the list itself.    It must not contain anything in the other cells.</p> <ul> <li>Each successive row corresponds to one list node.    Each node must have its own row.</li> <li> <p>In this example, <code>Node 1</code> does not have its own row, which is incorrect. <code>Node 2</code> is correctly done.</p> <p></p> </li> </ul> </li> </ul> <p>It is recommended to work from the template in the <code>daschland-scripts</code> repo. (Direct download link)</p>"},{"location":"DSP-TOOLS/data-model/excel2json/#the-lists-section-for-old-excel2json-and-old-excel2lists","title":"The <code>lists</code> Section for <code>old-excel2json</code> and <code>old-excel2lists</code>","text":"<p>With the <code>old-excel2lists</code> command,  the <code>lists</code> section of a JSON project file can be created from one or several Excel files.  The lists can then be inserted into a JSON project file and uploaded to a DSP server.</p> <p>The following example shows how to create the \"lists\" section  from the two Excel files <code>de.xlsx</code> and <code>en.xlsx</code>  which are located in a directory called <code>listfolder</code>:</p> <pre><code>dsp-tools old-excel2lists listfolder lists.json\n</code></pre> <p>The Excel sheets must have the following structure: </p> <p>Some notes:</p> <ul> <li>The data must be in the first worksheet of each Excel file.</li> <li>It is important that all Excel files have the same structure. So, the translation of a label in the second Excel    file has to be in the exact same cell as the one in the first Excel file.</li> <li>Only Excel files with file extension <code>.xlsx</code> are considered. </li> <li>The file name must consist of the language label, e.g. <code>de.xlsx</code> / <code>en.xlsx</code>. </li> <li>The language has to be one of {<code>de</code>, <code>en</code>, <code>fr</code>, <code>it</code>, <code>rm</code>}.</li> <li>As node name, a simplified version of the English label is taken. If English is not available, one of the other    languages is taken.</li> <li>If there are two nodes with the same name, an incrementing number is appended to the name.</li> <li>After the creation of the list, a validation against the JSON schema for lists is performed. An error message is    printed out if the list is not valid.</li> </ul> <p>It is recommended to work from the following templates: </p> <ul> <li>en.xlsx: File with the English labels</li> <li>de.xlsx: File with the German labels</li> </ul> <p>The output of the above command, with the template files, is:</p> <pre><code>{\n    \"lists\": [\n        {\n            \"name\": \"colors\",\n            \"labels\": {\n                \"de\": \"Farben\",\n                \"en\": \"colors\"\n            },\n            \"comments\": {\n                \"de\": \"Farben\",\n                \"en\": \"colors\"\n            },\n            \"nodes\": [\n                {\n                    \"name\": \"red\",\n                    \"labels\": {\n                        \"de\": \"rot\",\n                        \"en\": \"red\"\n                    }\n                },\n                \"...\"\n            ]\n        },\n        {\n            \"name\": \"category\",\n            \"labels\": {\n                \"de\": \"Kategorie\",\n                \"en\": \"category\"\n            },\n            \"comments\": {\n                \"de\": \"Kategorie\",\n                \"en\": \"category\"\n            },\n            \"nodes\": [\n                {\n                    \"name\": \"artwork\",\n                    \"labels\": {\n                        \"de\": \"Kunstwerk\",\n                        \"en\": \"artwork\"\n                    }\n                },\n                \"...\"\n            ]\n        },\n        {\n            \"name\": \"faculties-of-the-university-of-basel\",\n            \"labels\": {\n                \"de\": \"Fakult\u00e4ten der Universit\u00e4t Basel\",\n                \"en\": \"Faculties of the University of Basel\"\n            },\n            \"comments\": {\n                \"de\": \"Fakult\u00e4ten der Universit\u00e4t Basel\",\n                \"en\": \"Faculties of the University of Basel\"\n            },\n            \"nodes\": [\n                {\n                    \"name\": \"faculty-of-science\",\n                    \"labels\": {\n                        \"de\": \"Philosophisch-Naturwissenschaftliche Fakult\u00e4t\",\n                        \"en\": \"Faculty of Science\"\n                    },\n                      \"comments\": {\n                          \"de\": \"Auch bekannt als Phil II\",\n                          \"en\": \"Also known as Phil II\"\n                      }\n                },\n                \"...\"\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/caveats/","title":"Caveats","text":""},{"location":"DSP-TOOLS/data-model/json-project/caveats/#caveats-when-working-with-a-json-project-file","title":"Caveats when Working With a JSON Project File","text":""},{"location":"DSP-TOOLS/data-model/json-project/caveats/#referencing-ontologies","title":"Referencing Ontologies","text":"<p>For several fields (e.g. <code>super</code> in both <code>resources</code> and <code>properties</code>, or <code>propname</code> in <code>cardinalities</code>), it is necessary to reference entities that are defined elsewhere. The following cases are possible:</p> <ul> <li>DSP-API internals: <ul> <li>They are referenced as such and do not have a leading colon,   e.g. <code>Resource</code>, <code>DocumentRepresentation</code> or <code>hasValue</code></li> </ul> </li> <li>An external ontology: <ul> <li>The prefix of the ontology must be declared in the \"prefixes\" object.</li> <li>The prefix can then be used for referencing the corresponding external ontology,   e.g. <code>foaf:familyName</code> or <code>sdo:Organization</code></li> </ul> </li> <li>The current ontology: <ul> <li>Within the same ontology, references can be made by prepending a colon without a prefix <code>:</code>,   e.g. <code>:hasName</code>.</li> <li>Optionally, the current ontology can be referenced by its <code>name</code>,   e.g. <code>sameOnto:hasName</code></li> <li>It is not necessary to add <code>sameOnto</code> to the \"prefixes\" object.</li> </ul> </li> <li>A different ontology defined in the same file: <ul> <li>Within one data model file, multiple ontologies can be defined.   These will be created in the exact order they appear in the <code>ontologies</code> array. </li> <li>Once an ontology has been created,   it can be referenced by the following ontologies by its <code>name</code>,   e.g. <code>first-onto:hasName</code></li> <li>It is not necessary to add <code>first-onto</code> to \"prefixes\" object.</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/caveats/#dsp-base-resources-and-base-properties-to-be-used-directly-in-the-xml-file","title":"DSP Base Resources and Base Properties to be Used Directly in the XML File","text":"<p>From several DSP base resources, no subclasses can be created in a project ontology.  However, they can be used directly in the XML data file:</p> <ul> <li><code>LinkObj</code> is a resource linking together several other resources of different classes.    It can be used in the XML file with the &lt;link&gt; tag and    has the following predefined properties:<ul> <li><code>hasComment</code> (0-n)</li> <li><code>hasLinkTo</code> (1-n)</li> </ul> </li> <li>A <code>Region</code> resource defines a region of interest (ROI) in an image.    It can be used in the XML file with the &lt;region&gt; tag and    has the following predefined properties:<ul> <li><code>hasColor</code> (1)</li> <li><code>isRegionOf</code> (1)</li> <li><code>hasGeometry</code> (1)</li> <li><code>hasComment</code> (1-n)</li> </ul> </li> </ul> <p>There are some DSP base properties that are used directly in the above-mentioned resource classes.  Subclasses can be created from some of them in the project ontology.</p> <ul> <li><code>hasLinkTo</code>: a link to another resource<ul> <li>subclasses can be created from it (hasLinkTo Property)</li> <li>can be used directly in the XML data file in the &lt;link&gt; tag</li> </ul> </li> <li><code>hasColor</code>: Defines a color value. <ul> <li>subclasses can be created from it (ColorValue)</li> <li>can be used directly in the XML data file in the &lt;region&gt; tag</li> </ul> </li> <li><code>hasComment</code>: Defines a standard comment. <ul> <li>subclasses can be created from it (hasComment Property)</li> <li>can be used directly in the XML data file in the &lt;region&gt; tag or    &lt;link&gt; tag</li> </ul> </li> <li><code>hasGeometry</code>: Defines a geometry value (a JSON describing a polygon, circle or rectangle). <ul> <li>must be used directly in the XML data file in the &lt;region&gt; tag</li> </ul> </li> <li><code>isRegionOf</code>: A special variant of <code>hasLinkTo</code>.    It means that the given resource class is a region of interest in an image. <ul> <li>must be used directly in the XML data file in the &lt;region&gt; tag</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/","title":"Ontologies","text":""},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#the-ontologies-array-of-a-json-project","title":"The <code>ontologies</code> Array of a JSON Project","text":"<p>An ontology is a formal representation of a set of terms which represent real world objects. Dependencies, attributes and relations of and between the individual components of the set are recorded in a logical, formal language. In contrast to a taxonomy, which defines a mere hierarchical structure within a range of terms, an ontology is much more a network of information of logical dependencies of term elements. Or, in other words, an ontology defines a strict, formal \"data model\" for real world concepts such as \"Person\", \"Work\", \"Artist\" etc.</p> <p>An ontology thus has to offer at least two things: </p> <ul> <li>a set of concepts or terms (called resource classes) that represent concepts of real world objects</li> <li>properties describing these resources. These properties are linked either to a final value or may define a    relationship to another resource. </li> </ul> <p>Let's assume that we define a resource class called <code>Person</code> and two properties called <code>hasBirthday</code> and <code>hasParent</code>.  For a specific instance of a <code>Person</code>, <code>hasBirthday</code> will have a final value such as \"1960-05-21\", whereas <code>hasParent</code> will link to another instance of a <code>Person</code>.</p> <p>Within DSP, properties may be re-used for different resources. E.g. a property \"description\" may be used for a resource called \"image\" as well as \"movie\". Therefore, the list of properties is separated from the list of resources. The properties are assigned to the resources by defining \"cardinalities\". A cardinality indicates if a property is mandatory or can be omitted (e.g. if unknown), and if a property may be used several times on the same instance of a resource or not. The cardinality definitions are explained further below.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#the-ontology-object","title":"The <code>ontology</code> Object","text":"<p>Example of an ontology object:</p> <pre><code>{\n  \"name\": \"seworon\",\n  \"label\": \"Secrets of the World Ontology\",\n  \"comment\": \"This is an example ontology\",\n  \"properties\": [\n    ...\n  ],\n  \"resources\": [\n    ...\n  ]\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ontology-name","title":"Ontology: <code>name</code>","text":"<p>(required)</p> <p><code>\"name\": \"&lt;string&gt;\"</code></p> <p>The ontology's (short) name should be in the form of a xsd:NCNAME. This means a string without blanks or special characters but <code>-</code> and <code>_</code> are allowed (although not as first character).</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ontology-label","title":"Ontology: <code>label</code>","text":"<p>(required)</p> <p><code>\"label\": \"&lt;string&gt;\"</code></p> <p>A string that provides the full name of the ontology.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ontology-comment","title":"Ontology: <code>comment</code>","text":"<p>(optional)</p> <p><code>\"comment\": \"&lt;string&gt;\"</code></p> <p>A string that provides a comment to the ontology.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ontology-properties","title":"Ontology: <code>properties</code>","text":"<p>(required)</p> <p><code>\"properties\": [&lt;property-definition&gt;, &lt;property-definition&gt;, ...]</code></p> <p>A <code>properties</code> array contains all properties used to describe resources in the ontology. A property has to be of a certain data type. It is not possible to create a custom data type.</p> <p>The following fields are mandatory:</p> <ul> <li><code>name</code></li> <li><code>labels</code></li> <li><code>super</code></li> <li><code>object</code></li> <li><code>gui_element</code></li> </ul> <p>The following fields are optional:</p> <ul> <li><code>comments</code> </li> <li><code>subject</code></li> <li><code>gui_attributes</code></li> </ul> <p>A detailed description of <code>properties</code> can be found below.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ontology-resources","title":"Ontology: <code>resources</code>","text":"<p>(required)</p> <p>The resource classes are the primary entities of the data model. They are the actual objects inside a terminology space. A resource class can be seen as a template for the representation of a real object that is represented in the DSP. A resource class defines properties (data fields). For each of these properties a data type as well as the cardinality has to be provided.</p> <p><code>\"resources\": [&lt;resource-definition&gt;, &lt;resource-definition&gt;, ...]</code></p> <p>A resource object needs to have the following fields:</p> <ul> <li><code>name</code></li> <li><code>labels</code></li> <li><code>super</code></li> <li><code>cardinalities</code>*</li> </ul> <p>The following field is optional:</p> <ul> <li><code>comments</code> </li> </ul> <p>A detailed description of <code>resources</code> can be found below.</p> <p>(*It is technically possible to have a resource without cardinalities, but in most cases it doesn't make sense to omit them.)</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#the-property-object","title":"The <code>property</code> Object","text":"<pre><code>{\n  \"name\": \"id\",\n  \"subject\": \":School\",\n  \"object\": \"TextValue\",\n  \"super\": [\n      \"hasValue\"\n  ],\n  \"labels\": {\n    \"en\": \"School ID\",\n    \"de\": \"ID der Schule\",\n    \"fr\": \"ID de l'\u00e9cole\"\n  },\n  \"gui_element\": \"SimpleText\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-name","title":"Property: <code>name</code>","text":"<p>(required)</p> <p><code>\"name\": \"&lt;string&gt;\"</code></p> <p>A name for the property, e.g. <code>pageOf</code>, <code>hasBirthdate</code>, <code>createdBy</code>. It should be in the form of a xsd:NCNAME. This means a string without blanks or special characters but <code>-</code> and <code>_</code> are allowed (although not as first character).</p> <p>By convention, property names start with a lower case letter.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-label","title":"Property: <code>label</code>","text":"<p>(required)</p> <p><code>\"labels\": {\"&lt;language&gt;\": \"&lt;string&gt;\", ...}</code></p> <p>Collection of <code>labels</code> for the property as strings with language tag  (currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported).</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-comments","title":"Property: <code>comments</code>","text":"<p>(optional)</p> <p><code>\"comments\": { \"&lt;lang&gt;\": \"&lt;comment&gt;\", \"&lt;lang&gt;\": \"&lt;comment&gt;\", ... }</code></p> <p>Comments with language tags. Currently, <code>de</code>, <code>en</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported.  The <code>comments</code> element is optional.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-super","title":"Property: <code>super</code>","text":"<p>(required)</p> <p><code>\"super\": [\"&lt;super-property&gt;\", \"&lt;super-property&gt;, ...]</code></p> <p>A property is always derived from at least one other property. There are three groups of properties that can serve as  super-property:</p> <ul> <li>DSP base properties</li> <li>properties defined in external ontologies</li> <li>properties defined in the project ontology itself</li> </ul> <p>The syntax how to refer to these different groups of properties is described  here.</p> <p>The following DSP base properties are available:</p> <ul> <li><code>hasValue</code>: This is the most general case,    to be used in all cases when your property is none of the special cases below.</li> <li><code>hasLinkTo</code>: a link to another resource</li> <li><code>isPartOf</code>: A special variant of <code>hasLinkTo</code>. It says that an instance of the given resource class is an integral part   of another resource class. E.g. a \"page\" is part of a \"book\".</li> <li><code>seqnum</code>: An integer that is used to define a sequence number in an ordered set of instances,    e.g. the ordering of the pages in a book.    A resource that has a property derived from <code>seqnum</code> must also have a property derived from <code>isPartOf</code>.</li> <li><code>hasColor</code>: Defines a color value.  </li> <li><code>hasComment</code>: Defines a standard comment.</li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-subject","title":"Property: <code>subject</code>","text":"<p>(optional)</p> <p><code>\"subject\": \"&lt;resource-class&gt;\"</code></p> <p>The <code>subject</code> defines the resource class the property can be used on. It has to be provided as prefixed name of the  resource class (see here on how prefixed names are used).</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#property-object-gui_element-gui_attributes","title":"Property: <code>object</code>, <code>gui_element</code>, <code>gui_attributes</code>","text":"<p>These three are related as follows:</p> <ul> <li><code>object</code> (required) is used to define the data type of the value that the property will store. </li> <li><code>gui_element</code> (required) depends on the value of <code>object</code>.</li> <li><code>gui_attributes</code> only required by the <code>gui_element</code> <code>List</code>.</li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#overview","title":"Overview","text":"DSP base property (<code>super</code>) <code>object</code> <code>gui_element</code> hasValue BooleanValue Checkbox hasColor ColorValue Colorpicker hasValue DateValue Date hasValue DecimalValue Spinbox, SimpleText hasValue GeonameValue Geonames hasValue IntValue Spinbox, SimpleText hasValue ListValue List hasValue TextValue SimpleText, Textarea, Richtext hasComment TextValue Richtext hasValue TimeValue TimeStamp hasValue UriValue SimpleText hasLinkTo (resourceclass) Searchbox hasRepresentation Representation Searchbox isPartOf (resourceclass) Searchbox seqnum IntValue Spinbox, SimpleText"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#booleanvalue","title":"<code>BooleanValue</code>","text":"<p><code>\"object\": \"BooleanValue\"</code></p> <p>Represents a Boolean (\"true\" or \"false\").  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Checkbox</code>: The only GUI element for boolean values: a box to check or uncheck</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasBoolean\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"BooleanValue\",\n  \"labels\": {\n    \"en\": \"Boolean value\"\n  },\n  \"gui_element\": \"Checkbox\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#colorvalue","title":"<code>ColorValue</code>","text":"<p><code>\"object\": \"ColorValue\"</code></p> <p>A string representation of a color in the hexadecimal form.  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Colorpicker</code>: The only GUI element for colors. It's used to choose a color.</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasColor\",\n  \"super\": [\n    \"hasColor\"\n  ],\n  \"object\": \"ColorValue\",\n  \"labels\": {\n    \"en\": \"Color\"\n  },\n  \"gui_element\": \"Colorpicker\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#datevalue","title":"<code>DateValue</code>","text":"<p><code>object\": \"DateValue\"</code> </p> <p>Represents a date. It's a string with the format <code>calendar:start:end</code>.  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Date</code>: The only GUI element for DateValue. A date picker GUI.</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasDate\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"DateValue\",\n  \"labels\": {\n    \"en\": \"Date\"\n  },\n  \"gui_element\": \"Date\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#decimalvalue","title":"<code>DecimalValue</code>","text":"<p><code>\"object\": \"DecimalValue\"</code></p> <p>A number with decimal point.  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Spinbox</code>: Provides a Spinbox to select a decimal value.</li> <li><code>SimpleText</code>: A simple text entry box (one line only).</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasDecimal\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"DecimalValue\",\n  \"labels\": {\n    \"en\": \"Decimal number\"\n  },\n  \"gui_element\": \"SimpleText\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#geonamevalue","title":"<code>GeonameValue</code>","text":"<p><code>\"object\": \"GeonameValue\"</code></p> <p>Represents a location ID of geonames.org.  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Geonames</code>: The only GUI element for GeonameValue. A dropdown to select a geonames.org location, either by ID if    digits are typed in, or by name if letters are typed in.</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasGeoname\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"GeonameValue\",\n  \"labels\": {\n    \"en\": \"Geoname\"\n  },\n  \"gui_element\": \"Geonames\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#intvalue","title":"<code>IntValue</code>","text":"<p><code>\"object\": \"IntValue\"</code></p> <p>Represents an integer value.  See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Spinbox</code>: A GUI element for IntValue.    A text field with and an \"up\" and a \"down\" button for increment/decrement.</li> <li><code>SimpleText</code>: A simple text entry box (one line only).</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasInteger\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"IntValue\",\n  \"labels\": {\n    \"en\": \"Integer\"\n  },\n  \"gui_element\": \"Spinbox\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#listvalue","title":"<code>ListValue</code>","text":"<p><code>\"object\": \"ListValue\"</code></p> <p>Represents a node of a (possibly hierarchical) list.  See the xmlupload documentation for more information.</p> <p>gui_elements / gui_attributes:</p> <ul> <li><code>List</code>: A GUI element for ListValue. A dropdown to select a list node.<ul> <li>gui_attributes (required):<ul> <li><code>hlist: list-name</code>:    The name of a list defined in the <code>lists</code> section.</li> </ul> </li> </ul> </li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasListItem\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"ListValue\",\n  \"labels\": {\n    \"en\": \"List element\"\n  },\n  \"gui_element\": \"List\",\n  \"gui_attributes\": {\n    \"hlist\": \"treelistroot\"\n  }\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#textvalue","title":"<code>TextValue</code>","text":"<p><code>\"object\": \"TextValue\"</code></p> <p>There are three different <code>TextValue</code> types that can be specified in the ontology, namely <code>SimpleText</code>, <code>Textarea</code> and <code>Richtext</code>. The type is indicated through the <code>gui_element</code>. </p> <p>A short overview how to choose the most suitable <code>TextValue</code> type for a particular property:</p> <ul> <li><code>SimpleText</code><ul> <li>Suitable for a one-line text entry.</li> <li>Specifics:<ul> <li>Must not contain line breaks.</li> <li>Must not contain formatting or mark-up of any kind (XML, HTML, markdown, etc.).</li> </ul> </li> </ul> </li> <li><code>Textarea</code><ul> <li>Suitable for a longer text without mark-up.</li> <li>Specifics:<ul> <li>Line breaks are allowed.</li> <li>Line breaks can be indicated through an escape sequence or by putting the text on a new line in the XML.</li> <li>Must not contain formatting or mark-up of any kind (XML, HTML, markdown, etc.).</li> </ul> </li> </ul> </li> <li><code>Richtext</code><ul> <li>Suitable for a longer text containing the    DSP standard mark-up.</li> <li>Please note that <code>Richtext</code> values use much more space in the database than the other types.    To economize space in the database, we advise to use it only if mark-up is required.</li> <li>Specifics:<ul> <li>Line breaks indicated through an escape sequence will not be displayed.</li> <li>To create a line break, the tag <code>&lt;br/&gt;</code> should be used or the text should be wrapped in a paragraph <code>&lt;p&gt;</code>.</li> <li>If your original text contains mark-up other than the DSP standard, it must either be removed or converted.</li> </ul> </li> </ul> </li> </ul> <p>gui_elements:</p> <ul> <li><code>SimpleText</code>: one-line text entry box (for text without markup)</li> <li><code>Textarea</code>: multiline text entry box (for text without markup)</li> <li><code>Richtext</code>: multiline rich-text editor (for text with markup)</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasPictureTitle\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"TextValue\",\n  \"labels\": {\n    \"en\": \"Title\"\n  },\n  \"gui_element\": \"SimpleText\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#hascomment-property","title":"<code>hasComment</code> Property","text":"<p><code>\"object\": \"TextValue\"</code></p> <p>This property is a text field with formatted text. </p> <p>Example:</p> <pre><code>{\n    \"name\": \"hasComment\",\n    \"super\": [\n      \"hasComment\"\n    ],\n    \"object\": \"TextValue\",\n    \"labels\": {\n      \"de\": \"Kommentar\",\n      \"en\": \"Comment\",\n      \"fr\": \"Commentaire\"\n    },\n    \"gui_element\": \"Richtext\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#timevalue","title":"<code>TimeValue</code>","text":"<p><code>\"object\": \"TimeValue\"</code></p> <p>A time value represents a precise moment in time in the Gregorian calendar. See the  xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>TimeStamp</code>: A GUI element for TimeValue which contains a date picker and a time picker.</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasTime\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"TimeValue\",\n  \"labels\": {\n    \"en\": \"Time\"\n  },\n  \"gui_element\": \"TimeStamp\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#urivalue","title":"<code>UriValue</code>","text":"<p><code>\"object\": \"UriValue\"</code></p> <p>Represents an URI. See the xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>SimpleText</code>: A simple text entry box (one line only).</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasUri\",\n  \"super\": [\n    \"hasValue\"\n  ],\n  \"object\": \"UriValue\",\n  \"labels\": {\n    \"en\": \"URI\"\n  },\n  \"gui_element\": \"SimpleText\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#link-properties","title":"Link-Properties","text":"<p>Link-properties do not follow the pattern of the previous data types, because they do not connect to a final value but  to an existing resource. Thus, the <code>object</code> denominates the resource class the link will point to.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#haslinkto-property","title":"<code>hasLinkTo</code> Property","text":"<p><code>\"object\": \"&lt;resourceclass&gt;\"</code></p> <p>The most basic kind of link-property is the <code>hasLinkTo</code> property. Its \"super\" element has to be <code>hasLinkTo</code> or derived  from <code>hasLinkTo</code>. There are different groups of resource classes that can be the object:</p> <ul> <li>project resources: a resource class defined in the present ontology itself</li> <li>external resources: a resource class defined in another ontology</li> <li>DSP base resources:<ul> <li><code>Resource</code>: the most generic one, can point to any resource class, be it a DSP base resource, a project resource,    or an external resource. <code>Resource</code> is at the very top of the inheritance hierarchy.</li> <li><code>Region</code>: a region in an image</li> <li><code>StillImageRepresentation</code>, <code>MovingImageRepresentation</code>, <code>TextRepresentation</code>, <code>AudioRepresentation</code>,    <code>DDDRepresentation</code>, <code>DocumentRepresentation</code>, or <code>ArchiveRepresentation</code></li> </ul> </li> </ul> <p>The syntax how to refer to these different groups of resources is described here.</p> <p>gui_elements:</p> <ul> <li><code>Searchbox</code>: The only GUI element for hasLinkTo. Allows searching resources by entering the target resource name.</li> </ul> <p>Example:</p> <pre><code>{\n  \"name\": \"hasOtherThing\",\n  \"super\": [\n    \"hasLinkTo\"\n  ],\n  \"object\": \":Thing\",\n  \"labels\": {\n    \"en\": \"Another thing\"\n  },\n  \"gui_element\": \"Searchbox\"\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#hasrepresentation-property","title":"<code>hasRepresentation</code> Property","text":"<p><code>\"object\": \"Representation\"</code></p> <p>A property pointing to the DSP base resource class <code>Representation</code>, which is the parent class of the DSP base resource  classes <code>StillImageRepresentation</code>, <code>AudioRepresentation</code>, <code>MovingImageRepresentation</code>, ... Has to be used in  combination with <code>\"super\": [\"hasRepresentation\"]</code>.  This generic property can point to any type of the aforementioned representations, or to a subclass of them. See the  xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Searchbox</code>: Allows searching resources that have super class <code>Representation</code>    by entering at least 3 characters into a searchbox.</li> </ul> <p>Example:</p> <pre><code>{\n    \"name\": \"hasRep\",\n    \"super\": [\n        \"hasRepresentation\"\n    ],\n    \"object\": \"Representation\",\n    \"labels\": {\n        \"en\": \"Represented by\"\n    },\n        \"gui_element\": \"Searchbox\"\n    }\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#ispartof-property","title":"<code>isPartOf</code> Property","text":"<p><code>\"object\": \"&lt;resourceclass&gt;\"</code></p> <p>A special case of linked resources are resources in a part-whole relation,  i.e. resources that are composed of other resources.  A <code>isPartOf</code> property has to be added to the resource that is part of another resource.  In case of resources that are of type <code>StillImageRepresentation</code>,  an additional property derived from <code>seqnum</code> with object <code>IntValue</code> is required.  When defined, the user is able to leaf through the parts of a compound object,  e.g. to leaf through pages of a book.</p> <p>The DSP base properties <code>isPartOf</code> and <code>seqnum</code>  can be used to derive a custom property from them,  or they can be used directly as cardinalities in a resource.  The example below shows both possibilities.</p> <p>gui_elements:</p> <ul> <li><code>Searchbox</code>: The only GUI element for isPartOf. Allows searching resources by entering the target resource name.</li> </ul> <p>Example:</p> <pre><code>\"properties\": [\n    {\n        \"name\": \"partOfBook\",\n        \"super\": [\"isPartOf\"],\n        \"object\": \":Book\",\n        \"labels\": {\"en\": \"is part of\"},\n        \"gui_element\": \"Searchbox\"\n    },\n    {\n        \"name\": \"hasPageNumber\",\n        \"super\": [\"seqnum\"],\n        \"object\": \"IntValue\",\n        \"labels\": {\"en\": \"has page number\"},\n        \"gui_element\": \"SimpleText\"\n    }\n],\n\"resources\": [\n    {\n        \"name\": \"Page\",\n        \"labels\": {\"en\": \"Page using properties derived from 'isPartOf' and 'seqnum'\"},\n        \"super\": \"StillImageRepresentation\",\n        \"cardinalities\": [\n            {\n                \"propname\": \":partOfBook\",\n                \"cardinality\": \"1\"\n            },\n            {\n                \"propname\": \":hasPageNumber\",\n                \"cardinality\": \"1\"\n            }\n        ]\n    },\n    {\n        \"name\": \"MinimalisticPage\",\n        \"labels\": {\"en\": \"Page using 'isPartOf' and 'seqnum' directly\"},\n        \"super\": \"StillImageRepresentation\",\n        \"cardinalities\": [\n            {\n                \"propname\": \"isPartOf\",\n                \"cardinality\": \"1\"\n            },\n            {\n                \"propname\": \"seqnum\",\n                \"cardinality\": \"1\"\n            }\n        ]\n    }\n]\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#seqnum-property","title":"<code>seqnum</code> Property","text":"<p><code>\"object\": \"IntValue\"</code></p> <p>This property can be attached to a <code>StillImageRepresentation</code>, together with <code>isPartOf</code>. The <code>seqnum</code> is then the page number of the image inside the compound object. Apart from this, <code>seqnum</code> is like an integer property. See the  xmlupload documentation for more information.</p> <p>gui_elements:</p> <ul> <li><code>Spinbox</code>: A GUI element for IntValue.    A text field with and an \"up\" and a \"down\" button for increment/decrement.</li> <li><code>SimpleText</code>: A simple text entry box (one line only). </li> </ul> <p>Example: See the <code>isPartOf</code> Property above.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#the-resource-object","title":"The <code>resource</code> Object","text":"<pre><code>{\n  \"name\": \"school\",\n  \"labels\": {\n    \"de\": \"Schule\",\n    \"en\": \"School\",\n    \"fr\": \"Ecole\",\n    \"it\": \"Scuola\"\n  },\n  \"super\": \"Resource\",\n  \"comments\": {\n    \"de\": \"Eine Bildungsinstitution f\u00fcr Grundbildung\",\n    \"en\": \"An education institution for basic education\",\n    \"fr\": \"Une institution de formation de base\",\n    \"it\": \"Un'istituzione educativa per l'istruzione di base\"\n  },\n  \"cardinalities\": [\n    {\n      \"propname\": \":schulcode\",\n      \"gui_order\": 1,\n      \"cardinality\": \"1\"\n    },\n    {\n      \"propname\": \":schulname\",\n      \"gui_order\": 2,\n      \"cardinality\": \"1\"\n    },\n    {\n      \"propname\": \":bildungsgang\",\n      \"gui_order\": 3,\n      \"cardinality\": \"0-n\"\n    }\n  ]\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#resource-name","title":"Resource: <code>name</code>","text":"<p>(required)</p> <p><code>\"name\": \"&lt;string&gt;\"</code></p> <p>A name for the resource, e.g. \"Book\", \"Manuscript\", \"Person\". It should be in the form of a xsd:NCNAME. This means a string without blanks or special characters but <code>-</code> and <code>_</code> are allowed (although not as first character).</p> <p>By convention, resource names start with an upper case letter.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#resource-labels","title":"Resource: <code>labels</code>","text":"<p>(required)</p> <p><code>\"labels\": {\"&lt;language&gt;\": \"&lt;string&gt;\", ...}</code></p> <p>Collection of <code>labels</code> for the resource as strings with language tag  (currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported).</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#resource-super","title":"Resource: <code>super</code>","text":"<p>(required)</p> <p><code>\"super\": [\"&lt;super-resource&gt;\", \"&lt;super-resource&gt;\", ...]</code></p> <p>A resource is always derived from at least one other resource. There are three groups of resources that can serve  as super-resource:</p> <ul> <li>DSP base resources</li> <li>resources defined in external ontologies</li> <li>resources defined in the project ontology itself</li> </ul> <p>The syntax how to refer to these different groups of resources is described here.</p> <p>The following base resources can be used as super-resource:</p> <ul> <li><code>Resource</code>: A generic resource representing an item from the real world.    This is the most general case,    to be used in all cases when your resource is none of the special cases below.</li> <li><code>ArchiveRepresentation</code>: A resource representing an archive file (e.g. ZIP)</li> <li><code>AudioRepresentation</code>: A resource representing an audio file</li> <li><code>DDDRepresentation</code>: A resource representing a 3-D representation (not yet implemented)</li> <li><code>DocumentRepresentation</code>: A resource representing an opaque document (e.g. a PDF)</li> <li><code>MovingImageRepresentation</code>: A resource representing a video</li> <li><code>StillImageRepresentation</code>: A resource representing an image</li> <li><code>TextRepresentation</code>: A resource representing a text</li> </ul> <p>File Extensions: An overview of the supported file types per representation can be found in the  xmlupload documentation.</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#resource-cardinalities","title":"Resource: <code>cardinalities</code>","text":"<p>(required*)</p> <pre><code>\"cardinalities\": [\n  {\n    \"propname\": \":hasText\",\n    \"gui_order\": 1,\n    \"cardinality\": \"1-n\"\n  },\n  {\n    ...\n  }\n]\n</code></pre> <p>An array that contains information about the relation between resources and properties.  It tells what properties a resource can have  as well as how many values a property can have. A cardinality is defined as follows:</p> <ul> <li><code>propname</code> (mandatory): The name of the property.    If it's used in the form <code>:my_property</code>, the current ontology is referenced.   If the property was defined in another ontology, the prefix of that ontology must be provided.</li> <li><code>gui_order</code> (optional): By default, DSP-APP displays the properties in the order    how they are defined in the <code>cardinalities</code> array.   If you prefer another order, you can provide a positive integer here.   Example: You order the propnames alphabetically in the JSON file,    but they should be displayed in another order in DSP-APP.</li> <li><code>cardinality</code> (mandatory): Indicates how often a given property may occur. The possible values are:<ul> <li><code>\"1\"</code>: exactly once (mandatory one value and only one)</li> <li><code>\"0-1\"</code>: The value may be omitted, but can occur only once.</li> <li><code>\"1-n\"</code>: At least one value must be present, but multiple values may be present.</li> <li><code>\"0-n\"</code>: The value may be omitted, but may also occur multiple times.</li> </ul> </li> </ul> <p>(*A resource can have no cardinalities. If the <code>super</code> is a class of the own ontology, the child class will inherit the cardinalities.  If this is not the case then no properties can be used with this class.)</p>"},{"location":"DSP-TOOLS/data-model/json-project/ontologies/#resource-comments","title":"Resource: <code>comments</code>","text":"<p>(optional)</p> <p><code>\"comments\": { \"&lt;lang&gt;\": \"&lt;comment&gt;\", \"&lt;lang&gt;\": \"&lt;comment&gt;\", ... }</code></p> <p>Comments with language tags (currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported). The <code>comments</code> element is optional.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/","title":"Overview","text":""},{"location":"DSP-TOOLS/data-model/json-project/overview/#json-project-definition-format","title":"JSON Project Definition Format","text":"<p>This document describes the structure of a JSON project definition file  that can be uploaded to a DSP server with the <code>create</code> command.</p> <p>A project on a DSP server is like a container for data.  It defines some basic metadata, the data model(s)  and optionally the user(s) who will be able to access the data.  After the creation of a project,  data can be uploaded that conforms with the data model(s).</p> <p>This documentation is divided into the following parts:</p> <ul> <li>Overview of the project description file (this page)</li> <li>The \"ontologies\" section explained in detail</li> <li>Some caveats to have in mind</li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#a-short-overview","title":"A Short Overview","text":"<p>A complete project definition looks like this:</p> <pre><code>{\n  \"prefixes\": {\n    \"foaf\": \"http://xmlns.com/foaf/0.1/\",\n    \"dcterms\": \"http://purl.org/dc/terms/\"\n  },\n  \"$schema\": \"https://raw.githubusercontent.com/dasch-swiss/dsp-tools/main/src/dsp_tools/resources/schema/project.json\",\n  \"project\": {\n    \"shortcode\": \"0123\",\n    \"shortname\": \"BiZ\",\n    \"longname\": \"Bildung in Zahlen\",\n    \"descriptions\": {\n      \"en\": \"This is a simple example project\",\n      \"de\": \"Dies ist ein einfaches Beispielprojekt\"\n    },\n    \"keywords\": [\n      \"example\",\n      \"simple\"\n    ],\n    \"enabled_licenses\": [\n        ...\n    ],\n    \"default_permissions\": \"public|private\",\n    \"default_permissions_overrule\": {\n        \"private\": [...],\n        \"limited_view\": \"all\" | [...],\n    }\n    \"groups\": [\n      ...\n    ],\n    \"users\": [\n      ...\n    ],\n    \"lists\": [\n      ...\n    ],\n    \"ontologies\": [\n      ...\n    ]\n  }\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#prefixes","title":"<code>prefixes</code>","text":"<p>(optional)</p> <p><code>\"prefixes\": { \"prefix\": \"&lt;iri&gt;\", ...}</code></p> <p>The <code>prefixes</code> object contains the prefixes of external ontologies that are used in the current file. All prefixes are composed of the prefix and a URI. The prefix is used as namespace, so one does not have to write the fully qualified name of the referenced object each time it is used. Instead of writing a property called <code>familyName</code>  as <code>http://xmlns.com/foaf/0.1/familyName</code> one can simply write <code>foaf:familyName</code>.</p> <pre><code>{\n  \"prefixes\": {\n    \"foaf\": \"http://xmlns.com/foaf/0.1/\",\n    \"dcterms\": \"http://purl.org/dc/terms/\"\n  }\n}\n</code></pre> <p>It is not necessary to define prefixes for the ontologies that are defined in the same file. Ontologies in the same file can be referenced by their name. See this section for more information about referencing ontologies.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#schema","title":"<code>$schema</code>","text":"<p>(required)</p> <p>The <code>$schema</code> object refers to the JSON schema for DSP data model definitions and is mandatory.</p> <p><code>\"$schema\": \"https://raw.githubusercontent.com/dasch-swiss/dsp-tools/main/src/dsp_tools/resources/schema/project.json\"</code></p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#project","title":"<code>project</code>","text":"<p>(required)</p> <p><code>\"project\": {\"key\": \"&lt;value&gt;\", ...}</code></p> <p>The <code>project</code> object contains the basic metadata about the project. The following fields are required:</p> <ul> <li>shortcode</li> <li>shortname</li> <li>longname</li> <li>descriptions</li> <li>keywords</li> <li>default_permissions</li> <li>enabled_licenses</li> <li>ontologies</li> </ul> <p>The following fields are optional (if one or more of these fields are not used, they should be omitted):</p> <ul> <li>default_permissions_overrule (only if default_permissions = public)</li> <li>groups</li> <li>users</li> <li>lists</li> </ul>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#the-project-object-in-detail","title":"The <code>project</code> Object in Detail","text":"<p>In the following section, all fields of the <code>project</code> object are explained in detail.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#shortcode","title":"<code>shortcode</code>","text":"<p>(required)</p> <p><code>\"shortcode\": \"&lt;4-hex-characters&gt;\"</code></p> <p>The shortcode has to be unique and is represented by a 4 digit hexadecimal string. The shortcode has to be provided by  the DaSCH.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#shortname","title":"<code>shortname</code>","text":"<p>(required)</p> <p><code>\"shortname\": \"&lt;string&gt;\"</code></p> <p>The shortname has to be unique.  It should be in the form of a xsd:NCNAME.  This means a string without blanks or special characters, but with <code>-</code> and <code>_</code> are allowed (although not as first character).</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#longname","title":"<code>longname</code>","text":"<p>(required)</p> <p><code>\"longname\": \"&lt;string&gt;\"</code></p> <p>The longname is a string that provides the full name of the project.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#descriptions","title":"<code>descriptions</code>","text":"<p>(required)</p> <p><code>\"descriptions\": {\"&lt;lang&gt;\": \"&lt;string&gt;\", ...}</code></p> <p>The description is represented as a collection of strings with language tags (currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported).</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#keywords","title":"<code>keywords</code>","text":"<p>(required)</p> <p><code>\"keywords\": [\"&lt;string&gt;\", \"&lt;string&gt;\", ...]</code></p> <p>Keywords are represented as an array of strings and are used to describe and/or tag the project.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#enabled_licenses","title":"<code>enabled_licenses</code>","text":"<p>(required)</p> <p><code>\"enabled_licenses\": [\"&lt;license-iri&gt;\", \"&lt;license-iri&gt;\", ...]</code></p> <p>In order for files/IIIF-URIs to reference a license, the license must be enabled here. Only licenses that exist in DSP can be enabled. They must be referenced by their IRI. For example: <code>http://rdfh.ch/licenses/cc-by-4.0</code> is a valid license IRI. All the licenses listed here will be enabled. Licenses can be disabled by omitting them.</p> <p>See the API documentation for details.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#default_permissions","title":"<code>default_permissions</code>","text":"<p>(required)</p> <p><code>\"default_permissions\": \"public|private\"</code></p> <p>Defines the permissions that will be applied to new resources/values.</p> <ul> <li><code>public</code>: All users can view resources/values.</li> <li><code>private</code>: Only ProjectMembers/ProjectAdmins can view resources/values.</li> </ul> <p>If you work with the Excel templates, this setting is available in the <code>json_header.xlsx</code> file.</p> <p>Info</p> <p>When creating a new resource/value via xmlupload, it is possible to overrule this default with <code>&lt;resource permissions=\"something-else\"&gt;</code>. See here for details.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#default_permissions_overrule","title":"<code>default_permissions_overrule</code>","text":"<p>(optional)</p> <p>If the <code>default_permissions</code> are <code>public</code>, you can define exceptions, by marking certain classes or properties as <code>private</code> or <code>limited_view</code>:</p> <ul> <li><code>private</code>: classes and/or properties that will only be visible for ProjectAdmins and ProjectMembers<ul> <li>For a class, it means that the resources of that class will be invisible for people outside of your project.</li> <li>For a property, it means that the content of that property will be invisible for people outside of your project,   while the rest of the resource is still public.</li> </ul> </li> <li><code>limited_view</code>: image classes which will be blurred/watermarked for users outside of your project.<ul> <li>Only the image will be blurred, the rest of the resource will be public.</li> <li><code>all</code> means all image classes, also the ones created in the future.</li> </ul> </li> </ul> <pre><code>\"default_permissions\": \"public|private\",\n\"default_permissions_overrule\": {  // only \"public\" can be overruled\n    \"private\": [\n        \"my-onto:PrivateResource\",\n        \"my-onto:privateProp\"\n    ],\n    \"limited_view\": \"all\" | [  // \"all\" means all subclasses of StillImageRepresentation\n      \"my-onto:Image1\",\n      \"my-onto:Image2\",  // only subclasses of StillImageRepresentation can appear here\n    ],\n}\n</code></pre> <p>If you work with the Excel templates, these settings are available in the <code>resources.xlsx</code> file and in the <code>properties.xlsx</code> file.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#groups","title":"<code>groups</code>","text":"<p>(optional)</p> <p><code>\"groups\": [&lt;group-definition&gt;, &lt;group-definition&gt;,...]</code></p> <p>The <code>groups</code> object contains project specific group definitions. As opposed to the  built-in groups,  the membership of the users to the project specific groups  can be freely chosen by the <code>ProjectAdmin</code>. A project may define several groups such as \"student-assistant\",  \"editors\", etc. in order to provide their members specific permissions. The groups that were created here are then available in the XML file in the  &lt;permissions&gt; element.</p> <p>A project specific group definition has the following elements:</p> <ul> <li>name (mandatory): name of the group</li> <li>descriptions (mandatory): description of the group with language tags in the form    <code>\"descriptions\": {\"&lt;lang&gt;\": \"&lt;string&gt;\", ...}</code>    (currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported).</li> <li>selfjoin (optional): true if users are allowed to join the group themselves,    false (default) if a <code>ProjectAdmin</code> has to add them</li> <li>status (optional): true (default) if the group is active, false if the group is inactive</li> </ul> <p>Example:</p> <pre><code>{\n  \"groups\": [\n    {\n      \"name\": \"biz-editors\",\n      \"descriptions\": {\"en\" : \"Editors for the BiZ project\"},\n      \"selfjoin\": false,\n      \"status\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#users","title":"<code>users</code>","text":"<p>(optional)</p> <p><code>\"users\": [&lt;user-definition&gt;, &lt;user-definition&gt;,...]</code></p> <p>This object contains user definitions. A user has the following elements:</p> <ul> <li><code>username</code>: username used for login</li> <li><code>email</code>: email that identifies the user, has to be unique within DSP</li> <li><code>givenName</code>: first name of the user</li> <li><code>familyName</code>: surname of the user</li> <li><code>password</code>: password of the user</li> <li><code>lang</code>: the default language of the user: <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, <code>rm</code> (optional, default: <code>en</code>)</li> <li><code>groups</code> (optional): List of groups the user belongs to. The group names must be provided in one of the following forms:<ul> <li><code>other_project_shortname:groupname</code></li> <li><code>:groupname</code> (for groups defined in the current JSON project file)</li> </ul> </li> <li><code>projects</code> (optional): List of projects the user belongs to. The project name has to be followed by a <code>:</code> and either    <code>member</code> or <code>admin</code>. This indicates if the new user has admin rights in the given project or is an ordinary   user. <code>myproject:admin</code> would add the user as admin to the project <code>myproject</code>. The project defined in the same   JSON project file can be omitted, so only <code>:admin</code> or <code>:member</code> is enough. Note that in order to give a user <code>:admin</code>    rights, he also needs to be a <code>:member</code> of the project.<ul> <li>If projects is omitted, the user won't be part in any project.</li> </ul> </li> <li><code>status</code> (optional): true (default) if the user is active, false if the user is deleted/inactive</li> </ul> <p>Example:</p> <pre><code>{\n  \"users\": [\n    {\n      \"username\": \"bizedit\",\n      \"email\": \"bizedit@test.org\",\n      \"givenName\": \"biz-given\",\n      \"familyName\": \"biz-family\",\n      \"password\": \"biz1234\",\n      \"lang\": \"en\",\n      \"groups\": [\n        \":biz-editors\"\n      ],\n      \"projects\": [\n        \":admin\",\n        \"otherProject:member\"\n      ], \n      \"status\": true\n    }\n  ]\n}\n</code></pre> <p>The <code>users</code> element is optional. If not used, it should be omitted.</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#lists","title":"<code>lists</code>","text":"<p>(optional)</p> <p><code>\"lists\": [&lt;list-definition&gt;,&lt;list-definition&gt;,...]</code></p> <p>Lists can be used to provide controlled vocabularies. They can be flat or hierarchical. One advantage of the use of hierarchical lists is that it allows a user to sub-categorize objects. This helps in the formulation of specific search requests. If there is a list node \"Vocal music\" and sub-nodes \"Song\" and \"Opera\", a search for \"Vocal Music\" would return objects classified as \"Song\" and \"Opera\". But a search for \"Song\" would only return objects classified as \"Song\".</p> <p>The \"lists\" section is an array of list definitions. A list definition has one root node whose name is used to identify  the list. The children of the root node are the list nodes. If the list is hierarchical, the list nodes can have children, and these children can again have children, etc.</p> <p>When a project defines a list, resources can use the list values by defining a list property, e.g. a property with  object \"ListValue\".</p> <p>A node of a list may have the following elements:</p> <ul> <li><code>name</code> (mandatory): Name of the node. Has to be unique within the entire \"lists\" section.</li> <li><code>labels</code> (mandatory): Label with language tags in the form <code>{\"&lt;lang&gt;\": \"&lt;label&gt;\", \"&lt;lang&gt;\": \"&lt;label&gt;\", ... }</code>.    At least one language needs to be specified. Currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported.</li> <li><code>comments</code> (mandatory for root node, optional for all other nodes): Comment with language tags in the form    <code>{\"&lt;lang&gt;\": \"&lt;comment&gt;\", \"&lt;lang&gt;\": \"&lt;comment&gt;\", ... }</code>. Currently, <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, and <code>rm</code> are supported.</li> <li><code>nodes</code> (optional): Array of sub-nodes.</li> </ul> <p>Example of a \"lists\" section that contains the two lists \"color\" and \"category\":</p> <pre><code>{\n    \"lists\": [\n        {\n            \"name\": \"color\",\n            \"labels\": {\n                \"de\": \"Farbe\",\n                \"en\": \"Color\"\n            },\n            \"comments\": {\n                \"de\": \"Eine Liste mit einigen Farben\",\n                \"en\": \"A list with some colors\"\n            },\n            \"nodes\": [\n                {\n                    \"name\": \"red\",\n                    \"labels\": {\n                        \"de\": \"rot\",\n                        \"en\": \"red\"\n                    }\n                },\n                {\n                    \"name\": \"yellow\",\n                    \"labels\": {\n                        \"de\": \"gelb\",\n                        \"en\": \"yellow\"\n                    }\n                },\n                {\n                    \"name\": \"blue\",\n                    \"labels\": {\n                        \"de\": \"blau\",\n                        \"en\": \"blue\"\n                    }\n                },\n                {\n                    \"name\": \"green\",\n                    \"labels\": {\n                        \"de\": \"gr\u00fcn\",\n                        \"en\": \"green\"\n                    }\n                }\n            ]\n        },\n        {\n            \"name\": \"category\",\n            \"labels\": {\n                \"de\": \"Kategorie\",\n                \"en\": \"category\"\n            },\n            \"comments\": {\n                \"de\": \"Eine Liste mit Kategorien\",\n                \"en\": \"A list with categories\"\n            },\n            \"nodes\": [\n                {\n                    \"name\": \"artwork\",\n                    \"labels\": {\n                        \"de\": \"Kunstwerk\",\n                        \"en\": \"artwork\"\n                    }\n                },\n                {\n                    \"name\": \"vehicles\",\n                    \"labels\": {\n                        \"de\": \"Fahrzeuge\",\n                        \"en\": \"vehicles\"\n                    }\n                },\n                {\n                    \"name\": \"nature\",\n                    \"labels\": {\n                        \"de\": \"Natur\",\n                        \"en\": \"nature\"\n                    },\n                    \"nodes\": [\n                        {\n                            \"name\": \"humanes\",\n                            \"labels\": {\n                                \"de\": \"Menschen\",\n                                \"en\": \"Humanes\"\n                            }\n                        },\n                        {\n                            \"name\": \"animals\",\n                            \"labels\": {\n                                \"de\": \"Tiere\",\n                                \"en\": \"Animals\"\n                            },\n                            \"nodes\": [\n                                {\n                                    \"name\": \"mammals\",\n                                    \"labels\": {\n                                        \"de\": \"S\u00e4ugetiere\",\n                                        \"en\": \"Mammals\"\n                                    }\n                                },\n                                {\n                                    \"name\": \"insects\",\n                                    \"labels\": {\n                                        \"de\": \"Insekten\",\n                                        \"en\": \"Insects\"\n                                    }\n                                },\n                                {\n                                    \"name\": \"birds\",\n                                    \"labels\": {\n                                        \"de\": \"V\u00f6gel\",\n                                        \"en\": \"Birds\"\n                                    }\n                                },\n                                {\n                                    \"name\": \"amphibians\",\n                                    \"labels\": {\n                                        \"de\": \"Ambhibien\",\n                                        \"en\": \"Amphibians\"\n                                    }\n                                },\n                                {\n                                    \"name\": \"reptiles\",\n                                    \"labels\": {\n                                        \"de\": \"Reptilien\",\n                                        \"en\": \"Reptiles\"\n                                    }\n                                }\n                            ]\n                        },\n                        {\n                            \"name\": \"plants\",\n                            \"labels\": {\n                                \"de\": \"Pflanzen\",\n                                \"en\": \"Plants\"\n                            }\n                        },\n                        {\n                            \"name\": \"weather\",\n                            \"labels\": {\n                                \"de\": \"Wetter\",\n                                \"en\": \"Weather\"\n                            }\n                        },\n                        {\n                            \"name\": \"physics\",\n                            \"labels\": {\n                                \"de\": \"Physik\",\n                                \"en\": \"Physics\"\n                            }\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#ontologies","title":"<code>ontologies</code>","text":"<p>(required)</p> <p><code>\"ontologies\": [&lt;ontology-definition&gt;, &lt;ontology-definition&gt;, ...]</code></p> <p>Inside the <code>ontologies</code> array, a project may have multiple ontology definitions.  An ontology definition consists of the following fields:</p> <ul> <li><code>name</code></li> <li><code>label</code></li> <li><code>properties</code></li> <li><code>resources</code></li> </ul> <p>The <code>ontologies</code> array is documented here</p>"},{"location":"DSP-TOOLS/data-model/json-project/overview/#fully-fleshed-out-example-of-a-json-project-file","title":"Fully Fleshed-Out Example of a JSON Project File","text":"<p>DaSCH provides you with the <code>daschland-scripts</code> repo, an example repository that contains everything which is necessary to create a project and upload data. It also contains a JSON project definition file here. (Direct download link)</p>"},{"location":"DSP-TOOLS/developers/","title":"Developers documentation","text":""},{"location":"DSP-TOOLS/developers/#developers-documentation","title":"Developers Documentation","text":"<p>These pages contain important background information  for developers of the DSP-TOOLS code repository,  as well as Architectural Decision Records.</p> <p>Please read the README first.</p>"},{"location":"DSP-TOOLS/developers/#custom-set-up","title":"Custom Set-Up","text":""},{"location":"DSP-TOOLS/developers/#log-file-location","title":"Log File Location","text":"<p>The log files are by default saved in <code>~/.dsp-tools/logs/</code>. Every DSP-TOOLS run creates a new log file. If you prefer 1 single log file across all DSP-TOOLS runs, in the current working directory,  then set the following variable in an <code>.env</code> file:</p> <pre><code>DSP_TOOLS_SAVE_ADDITIONAL_LOG_FILE_IN_CWD=true\n</code></pre>"},{"location":"DSP-TOOLS/developers/decision-log/","title":"Decision Log","text":""},{"location":"DSP-TOOLS/developers/decision-log/#future-considerations-for-validate-data","title":"Future considerations for <code>validate-data</code>","text":"<ul> <li>Validate data is not feature complete.</li> <li>It assumes that:<ul> <li><code>dsp-tools</code> does its job correctly, i.e. it does not check if the <code>Values</code> are correctly structured.    If <code>dsp-tools</code> started to make mistakes they may not be found or emit very strange validation results.</li> <li>the <code>xsd</code> schema validation passed. Some primitive checks that the <code>xsd</code> finds are not repeated in the SHACL validation</li> </ul> </li> </ul>"},{"location":"DSP-TOOLS/developers/decision-log/#python-class-structure-in-validate-data","title":"Python class structure in <code>validate-data</code>","text":"<p>PR: https://github.com/dasch-swiss/dsp-tools/pull/1360</p> <p>Changing the internal Python representation of the data. A Python dataclass structure between the input XML and the data as an <code>rdflib</code> graph is added that is agnostic to both the specifications of the XML and the data structure required by the API.</p> <p>The structure of the main Python classes <code>PropertyObject</code> and <code>ValueInformation</code> are generic and do not rely on a specific property, object or object data type. Both of these classes represent a part of an RDF triple, the subject of the triple is the dataclass which contains the <code>PropertyObject</code> and <code>ValueInformation</code>.</p> <p>Below are graphs to illustrate where the information contained in the classes will be located in the final graph.</p> <p><code>PropertyObject</code></p> <p>This represents the property and object of a triple. It may be user facing (e.g. the label) or metadata (e.g. permissions).</p> <pre><code>flowchart TD\n    A(:Resource or :Value) --&gt;|:RDF/RDFS/knora Property| B(object Value)</code></pre> <p>With the enum <code>TripleObjectType</code> we can specify the data type of the value or if it is an IRI.</p> <p><code>ValueInformation</code></p> <p>This represents a reified knora Value, e.g. <code>BooleanValue</code>. A knora value itself contains further <code>PropertyObject</code>s, containing user-facing data (e.g. the boolean itself) or metadata (e.g. permissions).</p> <pre><code>flowchart TD\n    C(:Resource) --&gt;|:ontologyProperty| D(PropertyObject)</code></pre> <p>With the enum class <code>KnoraValueType</code> we can specify the knora value type.</p>"},{"location":"DSP-TOOLS/developers/mkdocs/","title":"MkDocs and markdown-link-validator","text":""},{"location":"DSP-TOOLS/developers/mkdocs/#mkdocs-and-markdown-link-validator","title":"MkDocs and markdown-link-validator","text":"<p>The documentation of DSP-TOOLS is built with MkDocs (see README). Please consider the following caveats:</p>"},{"location":"DSP-TOOLS/developers/mkdocs/#styling-constraints-in-the-documentation","title":"Styling Constraints in the Documentation","text":"<p>In our GitHub actions, we check PRs for dead links in the documentation.  Our tool markdown-link-validator is only able to check internal links if they start with <code>./</code>. For example:</p> <ul> <li><code>[prefixes]\u2063(./dsp-tools-create.md#prefixes-object)</code> instead of <code>[prefixes](dsp-tools-create.md#prefixes-object)</code></li> <li><code>![Colors_en]\u2063(./assets/images/img-list-english-colors.png)</code> instead of <code>![Colors_en](assets/images/img-list-english-colors.png)</code></li> </ul> <p>It is okay, however, to make an internal link to a title of the current document: <code>[prefixes]\u2063(#prefixes-object)</code></p> <p>Please follow this constraint, so that markdown-link-validator can check the internal links.</p>"},{"location":"DSP-TOOLS/developers/mkdocs/#handling-false-positives-of-markdown-link-validator","title":"Handling False Positives of markdown-link-validator","text":"<p>What can be done if your links are correct, but markdown-link-validator doesn't recognize them? One solution is to add an \"ignore\" pattern  to the call to markdown-link-validator in <code>.github/workflows/tests-on-push.yml</code>.</p> <p>If your link is in a code block, and isn't intended to be used as link, you can also add an invisible Unicode character, like in the examples above.</p>"},{"location":"DSP-TOOLS/developers/mkdocs/#no-duplicate-headings-no-special-characters-in-headings","title":"No Duplicate Headings, No Special Characters in Headings","text":"<p>When linking to a heading, the name heading is slugified. Unfortunately, there are different flavors of Markdown, and different slug algorithms. As long as the heading is unique in the document, and doesn't contain special characters, there is no problem.</p> <p>But consider a document like this:</p> <pre><code># Heading / Title\nFirst heading with this name\n\n# Heading / Title\nSecond heading with this name\n\n# Further down in the document\n[link to second heading]\u2063(#heading-title_1)    &lt;!--MkDocs supports only this syntax--&gt;\n[link to second heading]\u2063(#heading--title-1)   &lt;!--npm markdown-link-validator supports only this syntax--&gt;\n</code></pre> <p>To make things worse, different IDEs use different slug algorithms, too,  which might lead to misleading hints from the IDE.</p> <p>The real danger lies within MkDocs: while it doesn't support the <code>heading--title-1</code> syntax,  it doesn't complain if you use it, not even when using the <code>--strict</code> flag. This can lead to broken links on https://docs.dasch.swiss/,  without anyone noticing.</p>"},{"location":"DSP-TOOLS/developers/mkdocs/#the-best-solution-how-to-deal-with-this","title":"The Best Solution How to Deal With This","text":"<ul> <li>give a unique name to every heading within the same document</li> <li>don't use special characters in headings</li> </ul>"},{"location":"DSP-TOOLS/developers/mkdocs/#a-short-overview-of-markdown-tools-and-slug-algorithms","title":"A Short Overview of Markdown Tools and Slug Algorithms","text":"<ul> <li>MkDocs uses Python Markdown to translate Markdown files into HTML   (see here).</li> <li>Python Markdown's default slugify used to strip out all Unicode chars   (see here).</li> <li>markdown-link-validator uses uslug (<code>https://www.npmjs.com/package/uslug</code>) to create the slugs    (see here).</li> <li>VS Code targets the CommonMark Markdown specification using the    markdown-it library   (see here). </li> </ul> <p>Another useful reading is here.</p>"},{"location":"DSP-TOOLS/developers/packaging/","title":"Dependencies, packaging & distribution","text":""},{"location":"DSP-TOOLS/developers/packaging/#dependency-management-packaging-and-distribution","title":"Dependency Management, Packaging, and Distribution","text":""},{"location":"DSP-TOOLS/developers/packaging/#general-considerations","title":"General Considerations","text":"<p>There are a number of tasks necessary to develop and distribute a Python package,  and a number of tools to assist with these processes.  The Python Packaging User Guide lists the following, among others:</p> Requirement uv poetry Hatch pdm pipenv venv build setuptools flit twine Installable w/o Python X X Install Python X X X Dependency management X X X X Virtual environment X X X X X X Build frontend X X X X X Build backend X X X X X Publishing to pypi.org X X X X X <p>DSP-TOOLS uses uv for most of these tasks. </p> <p>uv needs 3 config files:</p> <ul> <li><code>pyproject.toml</code>: Manifest file, a modern configuration/metadata file replacing the deprecated files listed below</li> <li><code>uv.lock</code>: Lock file, containing the pinned versions of all (sub-)dependencies, allowing a deterministic installation</li> <li><code>.python-version</code>: tells uv which Python version to use when creating the project's virtual environment</li> </ul>"},{"location":"DSP-TOOLS/developers/packaging/#is-the-tool-dependent-on-a-certain-python-interpreter","title":"Is the tool dependent on a certain Python interpreter?","text":"<p>Many tools are written in Python and can only be installed by a Python interpreter.  But unfortunately, Python can be installed in various ways,  so that Python installations can live in many different places.  And these locations are sometimes unstable. </p> <p>A concrete problem that often arises:  When a Homebrew-installed Python is used to install the tool,  a <code>brew upgrade</code> might break the tool.</p> <p>Additionally, problems might arise if the tool is used to create a venv  with a Python version higher than the Python that was used to install the tool. </p> <p>UV avoids all these problems: it is a static binary that doesn't depend on a Python installation.</p>"},{"location":"DSP-TOOLS/developers/packaging/#dependency-management","title":"Dependency Management","text":"<p>The classic way to manage the dependencies was to write the required packages by hand into a <code>requirements.txt</code> and  into a <code>setup.py</code> file. But this is cumbersome and error-prone. Moreover, <code>setup.py</code> is problematic and not recommended anymore, especially calling <code>python setup.py</code>.  Python projects should define their dependencies and metadata in the modern <code>pyproject.toml</code> file. </p> <p>So it is necessary to dynamically manage the dependencies in <code>pyproject.toml</code>.  And uv is one of the few tools capable of doing this.</p> <p>uv is one of the few tools that cleanly distinguishes </p> <ul> <li>dependencies necessary to run the application, </li> <li>dependencies necessary for development, and </li> <li>transitive dependencies, i.e. dependencies of your dependencies. </li> </ul> <p>It is also one of the few tools that makes the distinction between </p> <ul> <li>the manifest file, i.e. a human-friendly list of (mostly unpinned) direct dependencies and </li> <li>the lock file, i.e. a machine-friendly definition of exact (pinned) versions of all dependencies.</li> </ul>"},{"location":"DSP-TOOLS/developers/packaging/#packaging","title":"Packaging","text":"<p>All project metadata, together with the dependencies and the configuration of the packaging tool hatchling, is defined in <code>pyproject.toml</code>.  The authoritative resource on how to create this file is  https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#writing-pyproject-toml.</p> <p>The table <code>[build-system]</code> of <code>pyproject.toml</code> tells frontend build tools what backend build tool to use. The backend  doesn't need to be installed. It will be installed by the frontend in a temporary, isolated environment for use during  the build process. DSP-TOOLS uses uv as frontend and hatchling as backend.</p> <p>What happens when a distribution package of DSP-TOOLS is created?  uv creates two files in the <code>dist</code> folder:  a <code>.tar.gz</code> compressed archive (the sdist or source distribution) and a <code>.whl</code> file (a wheel).  Both contain the contents of the <code>src</code> folder plus some metadata - they are equivalent.  They are then uploaded to the Python Package Index (PyPI).  </p> <p>When a user installs DSP-TOOLS with <code>pip install dsp-tools</code>, pip takes the sdist or the wheel, unpacks it, and copies  it into the <code>site-packages</code> folder of the user's Python installation. As a result, the user has the same packages in  his <code>site-packages</code> folder as the <code>src</code> folder of the dsp-tools repository. In our case, this is the <code>dsp_tools</code>  package. Since <code>site-packages</code> is on <code>sys.path</code>, the user can then import the package <code>dsp_tools</code> in his script.</p>"},{"location":"DSP-TOOLS/developers/packaging/#advantages-of-the-src-layout","title":"Advantages of the src Layout","text":"<p>Putting all packages into a <code>src</code> folder has an important consequence: It forces the developer to work with an  editable installation of his package. Why? Without an editable installation, it is impossible to write correct import  statements. <code>from src.package import module</code> will not work, because the user has <code>package</code> installed, not <code>src</code>. And  relative imports like <code>import module</code> will not work either, because when the test code (situated in a separate  <code>test</code> folder) imports the actual code, the relative imports in the actual code fail. This is because relative imports  depend on the location of the file that is run, not on the file that contains the import statement. </p> <p>The solution is to always have an editable installation of the package under development. uv does this  automatically. This makes the package <code>dsp_tools</code> importable - just like on a  user's machine. And exactly this is the big advantage: With the src layout and an editable installation, the setup on  the developer's machine is more similar to the user's setup. </p> <p>The advantages of the src layout are:</p> <ul> <li>import parity</li> <li>The tests run against the package as it will be installed by the user - not against the situation in the    developer's repository.</li> <li>It is obvious to both humans and tools if a folder is a package to be distributed, or not.</li> <li>The editable installation is only able to import modules that will also be importable in a regular installation.</li> <li>For the developer, the working directory is the root of the repository, so the root will implicitly be included in    <code>sys.path</code>. Users will never have the same current working directory than the developer. So, removing the packages    from the root by putting them into <code>src</code> prevents some practices that will not work on the user's machine. </li> </ul> <p>For more in-depth explanations, please visit the following pages:</p> <ul> <li>https://blog.ionelmc.ro/2014/05/25/python-packaging</li> <li>https://hynek.me/articles/testing-packaging</li> <li>https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout</li> </ul>"},{"location":"DSP-TOOLS/developers/start-stack/","title":"Running DSP locally","text":""},{"location":"DSP-TOOLS/developers/start-stack/#run-the-dsp-stack-on-your-local-machine","title":"Run the DSP Stack on Your Local Machine","text":"<p>DSP-API is the heart of the DaSCH service platform.  It is a server application for archiving data from the Humanities.  DSP-APP is a generic user interface for the user to look at and work with data stored in DSP-API.  It's a server application, too.  For testing purposes, it is sometimes necessary to run DSP-API and DSP-APP on a local machine.  There are two ways to do this:</p> <ul> <li>simple: run <code>dsp-tools start-stack</code></li> <li>advanced: execute commands from within the DSP-API/DSP-APP repositories</li> </ul> <p>Here's an overview of the two ways:</p> simple advanced target group researchers, RDU employees developers of DSP-API or DSP-APP how it works run <code>dsp-tools start-stack</code> execute commands from within locally cloned DSP-API/DSP-APP repositories software dependencies Docker, Python, DSP-TOOLS XCode command line tools, Docker, sbt, Java, Angular, node, yarn mechanism in the background run pre-built Docker images build DSP-API and DSP-APP from a branch in the repository available versions latest released version, or <code>main</code> branch any branch, or locally modified working tree caveats dependencies must be kept up to date <p>Login credentials for DSP-APP</p> <p>To gain system administration rights inside a locally running DSP-APP,  login with username <code>root@example.com</code> and password <code>test</code>.</p>"},{"location":"DSP-TOOLS/developers/start-stack/#the-simple-way-dsp-tools-start-stack","title":"The Simple Way: <code>dsp-tools start-stack</code>","text":"<p>The <code>start-stack</code> command runs Docker images  with the latest released versions of DSP-API and DSP-APP,  i.e. the versions that are running on https://app.dasch.swiss. (Optionally, you can specify to run the latest development version of DSP-API, from the <code>main</code> branch.)</p> <p>The only prerequisite for this is that Docker is running,  and that you have Python and DSP-TOOLS installed.</p> <p>Some notes:</p> <ul> <li>As long as you want to keep the data in the database, don't execute <code>dsp-tools stop-stack</code>. </li> <li>It is possible to leave DSP-API up for a long time.    If you want to save power, you can pause Docker.    When you resume it, DSP-API will still be running, in the state how you left it.</li> <li>You can also send your computer to sleep while the DSP stack is running.    For this, you don't even need to pause Docker.</li> </ul>"},{"location":"DSP-TOOLS/developers/start-stack/#when-should-i-restart-the-dsp-api","title":"When Should I Restart the DSP-API?","text":"<p>After creating a data model and adding some data into your local DSP stack,  you can work on DSP as if it was the live platform.  But there are certain actions that are irreversible or can only be executed once,  e.g. uploading the same JSON project file.  If you edit your data model in the JSON file,  and you want to upload it a second time,  DSP-API will refuse to create the same project again.  So, you might want to restart the stack and start over again from a clean setup.</p> <p>It is possible, however, to modify the XML data file and upload it again and again.  But after some uploads, DSP is cluttered with data, so you might want to restart the stack.</p>"},{"location":"DSP-TOOLS/developers/start-stack/#the-advanced-way","title":"The Advanced Way","text":"<p>If you want to run a specific branch of DSP-API / DSP-APP, or to modify them yourself, you need to:</p> <ul> <li>install the dependencies:    follow the instructions on https://github.com/dasch-swiss/dsp-api   and https://github.com/dasch-swiss/dsp-das</li> <li>keep the dependencies up to date (keep in mind that dependencies might be replaced over time)</li> <li>clone the repositories from GitHub</li> <li>keep them up to date with <code>git pull</code></li> <li>execute commands from within the repositories (<code>just</code> for DSP-API, <code>angular</code> for DSP-APP)</li> <li>take care that the repositories don't get cluttered with old data over time</li> </ul>"},{"location":"DSP-TOOLS/developers/start-stack/#before-starting-have-in-mind-the-subdomains-of-a-dsp-server","title":"Before Starting: Have in Mind the Subdomains of a DSP Server","text":"<p>DaSCH follows some conventions when setting up DSP servers.  Most of the commands documented on this page assume that you know how to address the subdomains of a DSP server. There are three relevant URLs you should know about:</p> <ul> <li>Subdomains <code>admin</code>/<code>app</code> stand for the DSP-APP frontend that you look at in your browser</li> <li>Subdomain <code>api</code> stands for the DSP-API (where DSP-TOOLS sends its data to) </li> <li>Subdomain <code>ingest</code> stands for the ingest server interface (where DSP-TOOLS uploads multimedia files to)</li> </ul> <p>This means that for uploading data to the DSP server  on the domain <code>dasch.swiss</code>,  you have to type the following:</p> <pre><code>dsp-tools xmlupload -s https://api.dasch.swiss -u 'your@email.com' -p 'password' xml_data_file.xml\n</code></pre> <p>If the user input is not correct, DSP-TOOLS tries to guess the correct subdomains. If the provided server is any one of the following:</p> <pre><code>http(s)://admin.dasch.swiss\nhttp(s)://app.dasch.swiss\nhttp(s)://api.dasch.swiss\nhttp(s)://ingest.dasch.swiss\nhttp(s)://dasch.swiss\ndasch.swiss\n</code></pre> <p>then DSP-TOOLS will treat it as <code>https://api.dasch.swiss</code>, and derive the ingest server URL <code>https://ingest.dasch.swiss</code> from it.</p> <p>This guessing feature comes with a price, though:</p> <ul> <li>Only servers ending with <code>dasch.swiss</code> are supported.</li> <li>If a server's configuration differs from the convention described above, DSP-TOOLS will fail.</li> </ul>"},{"location":"DSP-TOOLS/developers/user-data/","title":"User data","text":""},{"location":"DSP-TOOLS/developers/user-data/#user-data-in-the-users-home-directory","title":"User Data in the User's Home Directory","text":"<p>DSP-TOOLS saves user data in the user's home directory,  in the folder <code>.dsp-tools</code>.  Here is an overview of its structure:</p> file/folder command using it description xmluploads/(server)/resumable/*.pkl <code>xmlupload</code> Upload state of interrupted xmluploads start-stack <code>start-stack</code> files necessary to startup Docker containers (*) rosetta <code>rosetta</code> a clone of the rosetta test project logging.log, logging.log.1, ... several ones These two grow up to a predefined size, then the oldest log files are deleted <p>(*) Docker is normally not able to access files stored in the <code>site-packages</code> of a Python installation. Therefore, it's necessary to copy the distributed <code>src/dsp_tools/resources/start-stack/</code> folder to the user's home directory.</p>"},{"location":"DSP-TOOLS/developers/user-data/#how-to-ship-data-files-to-the-user","title":"How to Ship Data Files to the User","text":"<p>Accessing non-Python files (aka resources, aka data files)  in the code needs special attention.</p> <p>Firstly, the build tool must be told to include this folder/files in the distribution. In our case, this is automatically done by hatchling.</p> <p>Secondly, when accessing the files on the customer's machine,  the files inside <code>site-packages</code> should be read-only  to avoid a series of common problems  (e.g. when multiple users share a common Python installation,  when the package is loaded from a zip file,  or when multiple instances of a Python application run in parallel).</p> <p>Thirdly, the files can neither be accessed  with a relative path from the referencing file, nor with a path relative to the root of the project.</p> <p>For example, if you have a structure like this:</p> <pre><code>dsp-tools\n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 dsp_tools\n        \u251c\u2500\u2500 schemas\n        \u2502   \u2514\u2500\u2500 data.xsd\n        \u251c\u2500\u2500 __init__.py\n        \u2514\u2500\u2500 dsp_tools.py\n</code></pre> <p>it is not possible to do one of the following in dsp_tools/dsp_tools.py:</p> <pre><code>with open('schemas/data.xsd') as data_file:\n     ...\nwith open('src/dsp_tools/resources/schema/data.xsd') as data_file:\n     ...\n</code></pre> <p>The reason why these two approaches fail is  that the working directory on the user's machine  is determined by the directory where  DSP-TOOLS is called from -  not the directory where the distribution files are situated in.</p> <p>To circumvent this problem, it was once common to manipulate a package's <code>__file__</code> attribute  in order to find the location of data files:</p> <pre><code>import os\ndata_path = os.path.join(os.path.dirname(__file__), 'schemas', 'data.xsd')\nwith open(data_path) as data_file:\n     ...\n</code></pre> <p>However, this manipulation isn't compatible with PEP 302-based import hooks,  including importing from zip files and Python Eggs.</p> <p>The canonical way is to use importlib.resources: </p> <pre><code>from importlib.resources import files\n# address \"schemas\" directory in module syntax: needs __init__.py\ndata_text = files('dsp_tools.resources.schema').joinpath('data.xsd').read_text()\n# avoid module syntax when addressing \"schemas\" directory: no __init__.py necessary\ndata_text = files('dsp_tools').joinpath('resources/schema/data.xsd').read_text()\n</code></pre> <p>Note that depending on how the directory is addressed,  an <code>__init__.py</code> file is necessary or can be omitted.</p> <p>The information on this page is mainly based upon:</p> <ul> <li>https://stackoverflow.com/a/20885799/14414188</li> <li>https://stackoverflow.com/a/58941536/14414188</li> <li>https://setuptools.pypa.io/en/latest/userguide/datafiles.html#accessing-data-files-at-runtime</li> </ul>"},{"location":"DSP-TOOLS/developers/architecture/create-command/","title":"<code>create</code> Command","text":""},{"location":"DSP-TOOLS/developers/architecture/create-command/#overview","title":"Overview","text":"<p>The JSON schema validation takes over a lot of validation, therefore there are only minimal errors we may encounter after a successful validation, primarily relating to inexistent references to other objects that can be caused by typos.</p> <p>If the user provided incorrect input, we do not try and extrapolate a fix, but communicate the problem precisely so that the user may easily fix it themselves.</p> <p>We aim for a fast-fail approach before we begin with the upload. If we have upload failures during the upload, we will not stop the entire process, but continue to create as much of the project and ontologies as possible. The upload failures should be communicated at the end of an upload in a precise and user-friendly message.</p> <pre><code>---\ntitle: Overview of Code Flow for create\n---\nstateDiagram-v2\n    state \"JSON Schema Validation\" as val\n    state \"JSON File\" as jsonFile1\n    state \"JSON File\" as jsonFile2\n    state \"JSON into Python representation\" as jsonPy\n    state \"ParsedProject\" as parsedProj1\n    state \"ParsedProject\" as parsedProj2\n    state \"Sorting Dependencies\" as sortingDeps\n    state \"ProcessedProject\" as processedProj1\n    state \"Upload\" as upload\n    state \"ProcessedProject\" as processedProj2\n    state \"Upload all Information\" as uploadAll\n    state \"Collected Creation Errors\" as collErr\n    state \"Print Upload Failures Message\" as printErr\n    state \"Print Success Message\" as printSucc\n    [*] --&gt; val\n    state val {\n        jsonFile1 --&gt; [*]: error\n        jsonFile1 --&gt; jsonFile2: success\n    }\n\n    state jsonPy {\n        jsonFile2 --&gt; [*]: IRI resolving error\n        jsonFile2 --&gt; parsedProj1: IRI resolving\n        parsedProj1 --&gt; parsedProj2\n    }\n\n    state sortingDeps {\n        parsedProj2 --&gt; [*]: dependencies could not be resolved\n        parsedProj2 --&gt; processedProj1: finding dependencies&lt;br/&gt;generating upload order\n        processedProj1 --&gt; processedProj2\n    }\n\n    state upload {\n        processedProj2 --&gt; uploadAll: upload all information\n        uploadAll --&gt; collErr: collect errors on the way\n        collErr --&gt; printErr: print all error messages\n        uploadAll --&gt; printSucc: print success message\n    }</code></pre>"},{"location":"DSP-TOOLS/developers/architecture/create-command/#upload-order-to-api","title":"Upload Order to API","text":"<p>Within one project we have several dependencies that dictate the upload order.</p> <p>While the Groups, Users, Lists and Cardinalities do not have to be sorted \"within\", the order of Classes and Properties are relevant as they may have dependencies on others.</p> <p>The following table contains the possible dependencies. The first column is the object type we are looking at, the other columns indicate how they may depend on other object types.</p> Object Type List Class Propery Group User List Class super-classes Property list properties object / subject class constraint super-properties Cardinality cardinality on class cardinality on property Group User if custom <p>Note, that one project may have more than one ontology, in that case it is permissible to reference classes and properties from the other ontologies. Therefore, we need to handle the classes of all ontologies first, before we may move on to the properties.</p> <pre><code>---\ntitle: Upload Order\n---\nstateDiagram-v2\n    state \"ProcessedProject\" as processedProj\n    state \"Create Project\" as crProj\n    state \"Create Groups\" as crGr\n    state \"Create Users\" as crUser\n    state \"Create Lists\" as crLists\n    state \"Create Ontology &amp; Classes\" as crCls\n    state \"Create Properties\" as crProp\n    state \"Create Cardinalities\" as crCards\n    state \"Upload Finished\" as upFini\n    state \"Collected Creation Errors\" as collErr\n    state \"Print Upload Failures Message\" as printErr\n    state \"Print Success Message\" as printSucc\n    processedProj --&gt; crProj\n    crProj --&gt; [*]: project creation error\n    crProj --&gt; crGr\n    crGr --&gt; crUser: continue\n    crUser --&gt; collErr: add to\n    crUser --&gt; crLists: continue\n    crLists --&gt; collErr: add to\n    crLists --&gt; crCls: continue\n    crCls --&gt; collErr: add to\n    crCls --&gt; crProp: continue\n    crProp --&gt; collErr: add to\n    crProp --&gt; crCards: continue\n    crCards --&gt; collErr: add to\n    crCards --&gt; upFini: continue\n    upFini --&gt; printErr: with errors\n    collErr --&gt; printErr: continue\n    upFini --&gt; printSucc: no errors</code></pre> <p>Unless the upload stopped (which is indicated by a circle), a failure in a previous step does not prevent the upload of the next object categories. The following section explains how we deal with dependencies that were not created.</p>"},{"location":"DSP-TOOLS/developers/architecture/create-command/#dependency-checks-during-an-upload","title":"Dependency Checks During an Upload","text":"<p>Properties, Classes and Cardinalities may depend on the existence of other Classes, Properties and Lists. If the dependencies of an object were not successfully created, we should not attempt to upload the object and generate additional errors.</p> <p>See the table above for the dependencies one object type may have, and consequently which checks are required.</p> <pre><code>---\ntitle: Upload Mechanism of a Single Object\n---\nstateDiagram-v2\n    state \"Processing one Object\" as preUp\n    state \"Object\" as preObj\n    state \"dependency failed\" as checkFail1\n    state \"FailureCollection\" as checkFail2\n    state \"dependency exists\" as checkSucc\n    state \"Upload\" as upload\n    state \"Object\" as upObj\n    state \"Failure\" as upFail\n    state \"Success\" as upSucc\n    state \"FailureCollection\" as upFailColl\n    state \"SuccessCollection\" as upSuccColl\n\n    state preUp {\n        preObj --&gt; checkFail1: dependencies in failures\n        checkFail1 --&gt; checkFail2: add to failures\n        preObj --&gt; checkSucc: dependencies successfully uploaded\n        checkSucc --&gt; upload: continue upload\n    }\n\n    state upload {\n        upObj --&gt; upFail: upload failed\n        upFail --&gt; upFailColl: add\n        upObj --&gt; upSucc: upload success\n        upSucc --&gt; upSuccColl: add\n    }</code></pre>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/","title":"XML File Parsing and Processing for <code>xmlupload</code> and <code>validate-data</code>","text":""},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#parsing-xml-files-and-transformations","title":"Parsing XML Files and Transformations","text":"<p>The <code>ParsedResource</code> is the internal Python representation of our data XML file. In order to keep breaking changes minimal when changes to the XML are required  all processes that interact with the XML file should use the <code>ParsedResource</code> as its starting point.</p>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#overview","title":"Overview","text":"<pre><code>---\ntitle: Overview of Code Flow for xmlupload and validate-data\n---\nstateDiagram-v2\n    state \"etree Root\" as eroot1\n    state \"etree Root\" as eroot2\n    state \"etree Root\" as eroot3\n    state \"Root Modifications\" as rootwork\n    state \"etree Into Python Representation\" as pywork\n    state \"CLI: xmlupload\" as processed\n    state \"ParsedResource\" as parsedres1\n    state \"ParsedResource\" as parsedres2\n    state \"ParsedResource\" as parsedres3\n    state \"ProcessedResource\" as Processedres\n    state \"CLI: validate-data\" as valdata\n    [*] --&gt; eroot1\n    state rootwork {\n        eroot1 --&gt; eroot2: xsd validation success\n        eroot1 --&gt; [*]: xsd validation error raised\n    }\n    eroot2 --&gt; pywork\n    state pywork {\n        eroot3 --&gt; parsedres1: processed representation\n    }\n    pywork --&gt; processed\n    state processed {\n        valdata --&gt; [*]: validation failure\n        valdata --&gt; parsedres2: validation success\n        parsedres2 --&gt; Processedres: resolve data\n    }\n    pywork --&gt; valdata\n    state valdata {\n        parsedres3 --&gt; RdfLikeResource: processing\n    }</code></pre>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#parsing-xml-files-in-detail","title":"Parsing XML Files in Detail","text":"<pre><code>---\ntitle: Parsing of XML File and Transformations Into ParsedResource\n---\nstateDiagram-v2\n    state \"Transform etree Root\" as eroot\n    state \"Transform etree Root Into Python Representation\" as transpy\n    state \"Resource etree\" as resetree1\n    state \"ParsedResource\" as respars\n    state \"Value etree\" as valtree\n    state \"IIIF/bitstream etree\" as filetree\n    state \"ParsedValue\" as valpars\n    state \"ParsedFileValue\" as filepars\n    state \"Transform Value\" as transval\n    state \"Transform FileValue\" as transfile\n    [*] --&gt; r1: Parse file\n    r4 --&gt; transpy\n    state eroot {\n        state \"etree root\" as r1\n        state \"etree root\" as r2\n        state \"etree root\" as r3\n        state \"etree root\" as r4\n        r1 --&gt; r2: Remove Comments\n        r2 --&gt; [*]: xsd validation failure\n        r2 --&gt; r3: xsd validation success\n        r3 --&gt; r4: make localnames\n    }\n    state transpy {\n        resetree1 --&gt; transval: extract values\n        resetree1 --&gt; transfile: extract file or iiif\n        resetree1 --&gt; respars: transform special tags&lt;br/&gt;&lt;br/&gt;resolve prefixes into absolute IRIs\n\n        state transval {\n            valtree --&gt; valpars: transform special tags&lt;br/&gt;&lt;br/&gt;resolve prefixes into absolute IRIs&lt;br/&gt;&lt;br/&gt;resolve value type to Python Class&lt;br/&gt;&lt;br/&gt;strip whitespaces from content\n        }\n        transval --&gt; respars: add to resource\n\n        state transfile {\n            filetree --&gt; filepars: resolve file type&lt;br/&gt;&lt;br/&gt;strip whitespaces from content\n        }\n        transfile --&gt; respars: add to resource\n    }</code></pre>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#validate-data","title":"<code>validate-data</code>","text":"<p><code>validate-data</code> has a specific process as in some cases  the success of a previous step is required for subsequent validations.</p>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#validation-process","title":"Validation Process","text":"<pre><code>stateDiagram-v2\n    state \"XSD validation\" as XSD\n    state \"&lt;b&gt;STOP&lt;b&gt;\" as stopXSD\n    state \"Check for Unknown Classes&lt;br&gt;(Python Logic)\" as unknownCls\n    state \"&lt;b&gt;STOP&lt;b&gt;\" as stopUnknown\n    state \"Ontology Validation&lt;br&gt;(SHACL-CLI)\" as ontoVal\n    state \"&lt;b&gt;STOP&lt;b&gt;\" as ontoViolation\n    state \"flag &lt;em&gt;--ignore-duplicate-files-warning&lt;em&gt;\" as ignoreF\n    state \"Check for Duplicate Filepaths&lt;br&gt;(Python Logic)\" as duplicFile\n    state \"severity: WARNING\" as warning\n    state \"severity: INFO\" as info\n    state \"severity: ERROR\" as err\n    state \"Data Validation&lt;br&gt;(SHACL-CLI)\" as dataSH\n    [*] --&gt; XSD\n    XSD --&gt; stopXSD: validation failure\n    XSD --&gt; unknownCls: success\n    unknownCls --&gt; stopUnknown: unknown found\n    unknownCls --&gt; ontoVal: success\n    ontoVal --&gt; ontoViolation: violations found\n    ontoVal --&gt; ignoreF: success\n    ignoreF --&gt; dataSH: present\n    ignoreF --&gt; duplicFile: not present\n    duplicFile --&gt; dataSH: continue\n    duplicFile --&gt; warning: duplicates found\n    dataSH --&gt; info: problems\n    dataSH --&gt; err: problems\n    dataSH --&gt; warning: problems</code></pre>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#determine-validation-success","title":"Determine Validation Success","text":"<p>The validation success, i.e. if an <code>xmlupload</code> would be possible and is allowed to continue, is dependent on the server.</p> <p>Some validation problems are allowed on test environments (including localhost), while the \"prod-like\" servers are stricter. Prod like servers include prod, ls-prod, stage, and rdu-stage.</p> TEST ENVIRONMENTS PROD-LIKE ENVIRONMENTS INFO success success WARNING success failure ERROR failure failure"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#xmlupload","title":"<code>xmlupload</code>","text":"<p>The <code>xmlupload</code> requires validation and transformation before we can send an upload request. The Python class <code>ProcessedResource</code> has a completely correct state, e.g. all the types are correct, etc. and is used to create the graph for the upload.</p>"},{"location":"DSP-TOOLS/developers/architecture/xml-parsing-processing/#from-parsedresource-to-processedresource","title":"From <code>ParsedResource</code> to <code>ProcessedResource</code>","text":"<pre><code>---\ntitle: Transformations from ParsedResource for xmlupload\n---\nstateDiagram-v2\n    state \"Process Resource\" as processedres\n    state \"Process Value\" as processedationval\n    state \"Process FileValues\" as processedfile\n    state \"ParsedValue\" as parsedval\n    state \"ParsedResource\" as parsedres\n    state \"ProcessedValue\" as valdes\n    state \"Continue\" as cont\n    parsedres --&gt; processedfile\n    parsedres --&gt; processedationval\n    parsedres --&gt; processedres\n    state processedres {\n        ParsedResource --&gt; Permissions: resolve permissions\n    }\n    state processedationval {\n        parsedval --&gt; valdes: resolve permissions&lt;br/&gt;&lt;br/&gt;resolve listnodes to IRIs\n    }\n    state processedfile {\n        ParsedFileValue --&gt; ProcessedFileValue: resolve permissions&lt;br/&gt;&lt;br/&gt;resolve metadata\n    }\n    processedres --&gt; ProcessedResource: return result\n    processedationval --&gt; ProcessedResource: return result\n    processedfile --&gt; ProcessedResource: return result\n    ProcessedResource --&gt; cont: success\n    ProcessedResource --&gt; [*]: unexpected transformation failure</code></pre>"},{"location":"DSP-TOOLS/developers/code-quality-tools/code-quality-tools/","title":"Overview","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/code-quality-tools/#code-quality-tools","title":"Code Quality Tools","text":"<p>There are a variety of tools that help to keep code quality high.</p> <p>DSP-TOOLS uses the ones listed on this page.</p> <p>The decision to use this set of tools is based on the information in the following pages.</p> Task Tool Configuration General formatting EditorConfig <code>.editorconfig</code> MarkdownLint <code>.markdownlint.yml</code> Python formatting Ruff <code>pyproject.toml</code> Python docstring formatting darglint <code>.darglint</code> Python type checking mypy <code>pyproject.toml</code> Python linting Ruff <code>pyproject.toml</code> Security checks Dependabot <code>.github/dependabot.yml</code> CodeQL GitHub settings Gitleaks * <code>.gitleaks.toml</code> Bandit <code>.github/workflows/bandit.yml</code> <p>(*) coming soon  </p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/general-formatting/","title":"General formatting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/general-formatting/#general-formatting","title":"General Formatting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/general-formatting/#editorconfig","title":"EditorConfig","text":"<p>Language-independent, cross-editor settings for indentation, line endings, etc.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/general-formatting/#markdownlint","title":"MarkdownLint","text":"<p>A CLI for David Anson's MarkdownLint, a static analysis tool with a library of rules. The flexibility of the Markdown syntax is both a benefit and a drawback.  Many styles are possible, so formatting can be inconsistent.  Some constructs don't work well in all parsers and should be avoided.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/","title":"Python docstring formatting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#python-docstring-formatting","title":"Python Docstring Formatting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#docstring-flavors","title":"Docstring Flavors","text":"<p>Python uses docstrings to document code.  A docstring is a string that is the first statement in a package, module, class or function.  Python docstrings are written in the reStructuredText syntax (abbreviated as RST or reST).</p> <p>There are at least 4 flavors of docstrings, each following the PEP 257 conventions. The following examples show how to document a function parameter:</p> <p>Epytext:</p> <pre><code>@type param1: int\n@param param1: The first parameter\n</code></pre> <p>Sphinx:</p> <pre><code>:param param1: The first parameter\n:type: int\n</code></pre> <p>Google:</p> <pre><code>Args:\n    param1 (int): The first parameter\n</code></pre> <p>NumPy:</p> <pre><code>Parameters\n----------\nparam1 : int\n    The first parameter\n</code></pre> <p>DSP-TOOLS uses the Google style without typing,  as defined here.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#existing-formatters","title":"Existing Formatters","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#pydocstyle","title":"pydocstyle","text":"<p>Static analysis tool for checking compliance with Python docstring conventions. Pydocstyle supports most PEP 257 conventions out of the box,  but it should not be considered a reference implementation. Pydocstyle seems to be the most popular docstring checker. It supports the styles \"pep257\", \"numpy\", and \"google\".</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#pydocstringformatter","title":"pydocstringformatter","text":"<p>A docstring formatter that follows  PEP 8 and PEP 257  but makes some of the more controversial elements of those PEPs optional. Can be configured for other styles as well.  This project is heavily inspired by docformatter. Supported styles: \"pep257\", \"numpy\".</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#docformatter","title":"docformatter","text":"<p>Automatically formats docstrings to follow a subset of  the PEP 257 conventions. Currently, only the style \"sphinx\" and \"epytext\" are recognized,  but \"numpy\" and \"google\" are future styles.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-docstring-formatting/#darglint","title":"darglint","text":"<p>Docstring linter which checks whether a docstring's description matches the actual function/method implementation. Supports the styles \"sphinx\", \"google\", and \"numpy\".</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/","title":"Python formatting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#python-formatting","title":"Python Formatting","text":"<p>There is a variety of style checkers (tools that give a feedback)  and auto-formatters (tools that are able to fix the formatting violations automatically).</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#existing-type-checkers-and-auto-formatters","title":"Existing Type Checkers and Auto-Formatters","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#pycodestyle","title":"pycodestyle","text":"<p>Checks Python code against some style conventions in PEP 8.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#autopep8","title":"autopep8","text":"<p>Automatically fixes most of the formatting issues reported by pycodestyle. Since PEP 8 is rather liberal, autopep8/pycodestyle don't modify code too much.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#black","title":"Black","text":"<p>A PEP 8 compliant opinionated auto-formatter with its own style, going further than autopep8/pycodestyle. Style configuration options are deliberately limited to a minimum. Black aims for readability and reducing git diffs. Black is an easy-to-use tool, with sensible and useful defaults. Its style is very elegant.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#ruff","title":"Ruff","text":"<p>Besides being a linter, Ruff is also an auto-formatter. It is designed as a drop-in replacement for Black.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#yapf","title":"yapf","text":"<p>Auto-formatter that can be configured to support different styles.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-formatting/#isort","title":"isort","text":"<p>Sorts <code>import</code> statements alphabetically, and separates them into sections, according to their type.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/","title":"Python linting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#python-linting","title":"Python Linting","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#existing-linters","title":"Existing Linters","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#pylint","title":"Pylint","text":"<p>Checks Python code against a very broad list of rules,  some of which are purely formatting oriented,  but some of which are very sophisticated code smell and error detectors. Pylint is very slow, but perhaps the most thorough linter around.  A big plus is that it makes an inference of actual types,  instead of relying on type annotations.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#pyflakes","title":"Pyflakes","text":"<p>A pure error detector, without formatting checks, and without configuration options. It is faster than Pylint, because it doesn't dig as deep (e.g., it examines the syntax tree of each file individually).</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#flake8","title":"Flake8","text":"<p>Flake8 checks Python code by wrapping the output of these tools:</p> <ul> <li>Pyflakes (pure error detector)</li> <li>pycodestyle (pure style checker)</li> <li>McCabe (complexity checker)</li> </ul> <p>Unlike Pyflakes, Flake8 can be configured.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#ruff","title":"Ruff","text":"<p>The fastest, most promising and most exciting linter, although still in beta. Ruff is a linter with autofix support. It has near-parity with Flake8, and they are working on implementing pylint rules as well (see How Does Ruff's Linter Compare to Pylint?). Ruff can be used to replace </p> <ul> <li>Flake8 (wrapper around Pyflakes, pycodestyle, and McCabe) plus dozens of plugins</li> <li>Pyflakes (error detector)</li> <li>pycodestyle (checks formatting for violations of PEP 8)</li> <li>McCabe (complexity checker)</li> <li>isort (sorts imports alphabetically)</li> <li>pydocstyle (docstring checker)</li> <li>yesqa (tool to remove unnecessary <code># noqa</code> comments)</li> <li>eradicate (removes commented-out code)</li> <li>pyupgrade (automated upgrade to newer python syntax)</li> <li>autoflake (automated removal of unused imports or variables)</li> </ul> <p>Additionally, Ruff's formatter can be used to replace Black.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-linting/#vulture","title":"Vulture","text":"<p>Static code analyzer that finds unused code in Python programs.  Vulture uses the ast module to build abstract syntax trees for all given files.  While traversing all syntax trees it records the names of defined and used objects.  Afterwards, it reports the objects which have been defined, but not used.  This analysis ignores scopes and only takes object names into account. Vulture also detects unreachable code by looking for code after <code>return</code>, <code>break</code>, <code>continue</code> and <code>raise</code> statements,  and by searching for unsatisfiable if- and while-conditions.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-see-also/","title":"See also","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-see-also/#see-also","title":"See Also","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-see-also/#prospector","title":"Prospector","text":"<p>Prospector is a wrapper around the following tools:</p> <ul> <li>pylint (very through linter and error detector)</li> <li>pycodestyle (checks formatting for violations of PEP 8)</li> <li>Pyflakes (error detector)</li> <li>McCabe (complexity checker)</li> <li>Dodgy (simple regex check to detect accidental SCM diff checkins or secrets hard coded into files)</li> <li>Pydocstyle (docstring checker)</li> <li>Pyroma (checks <code>setup.py</code> files)</li> <li>Vulture (finds unused code)</li> <li>Frosted (fork of Pyflakes)</li> <li>Mypy (type checker)</li> <li>Bandit (finds common security issues)</li> </ul> <p>The primary aim of Prospector is to be useful out of the box.  A common complaint of other Python analysis tools is that it takes a long time to filter through which errors are relevant.  Prospector provides some default profiles,  which hopefully will provide a good starting point and will be useful straight away.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-see-also/#pylance","title":"Pylance","text":"<p>Pylance (<code>ms-python.vscode-pylance</code>) is the default language support  for the Python extension (<code>ms-python.python</code>) in Visual Studio Code. It relies on the type checker pyright, but does much more:</p> <ul> <li>docstring</li> <li>parameter suggestion</li> <li>code completion</li> <li>auto-imports</li> <li>code navigation</li> </ul>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-see-also/#pylama","title":"Pylama","text":"<p>Pylama is a wrapper around other tools.  As of mid-2023, it doesn't seem to be actively maintained anymore. Pylama wraps these tools:</p> <ul> <li>pycodestyle (checks formatting for violations of PEP 8)</li> <li>pydocstyle (docstring checker)</li> <li>PyFlakes (error detector)</li> <li>McCabe (complexity checker)</li> <li>Pylint (very through linter and error detector)</li> <li>Radon (computes various metrics from source code, such as McCabe's complexity, SLOC, Halstead metrics, etc.)</li> <li>eradicate (removes commented-out code)</li> <li>Mypy (type checker)</li> <li>Vulture (finds unused code)</li> </ul>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/","title":"Python type checking","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#python-type-checking","title":"Python Type Checking","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#pythons-typing-system","title":"Python's Typing System","text":"<p>The Python language allows adding type hints (see PEP 484),  but ignores them when running the code. In this sense, type hints are similar to comments: A Python program can still be run, even if the type hints are wrong. The Python language leaves type checking to external tools that must be run separately.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#existing-type-checkers","title":"Existing Type Checkers","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#mypy","title":"mypy","text":"<p>Mypy is the oldest and most popular static type checker. It warns you when you use type annotations incorrectly. Mypy is designed with gradual typing in mind.  This means you can add type hints to your code base slowly  and that you can always fall back to dynamic typing when static typing is not convenient.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#pyright","title":"pyright","text":"<p>Microsoft's static type checker for Python. Via Pylance, it is included in VS Code's Python extension <code>ms-python.python</code>.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/python-type-checking/#pyre","title":"Pyre","text":"<p>Performant type checker by Facebook, compliant with the relevant PEP conventions. Pyre can analyze codebases with millions of lines of code incrementally, providing instantaneous feedback to developers as they write code. Depends on watchman,  a brew-installable FOSS file watching service by Facebook. Pyre ships with Pysa, a security tool built on top of Pyre that reasons about data flows in Python applications. </p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/security/","title":"Security checks","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#security-checks","title":"Security Checks","text":""},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#bandit","title":"Bandit","text":"<p>Finds common security issues in Python code. For every single file, Bandit builds an AST, and runs plugins (i.e. tests) against the AST nodes. Bandit supports many plugins (i.e. tests) to detect various security issues. </p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#dependabot","title":"Dependabot","text":"<p>GitHub's built-in feature to keep the supply chain secure. Dependabot monitors vulnerabilities in dependencies used in a project  and keep the dependencies up-to-date.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#codeql","title":"CodeQL","text":"<p>Semantic code analysis engine by GitHub. CodeQL lets you query code as though it were data.  Write a query to find all variants of a vulnerability, eradicating it forever.  Then share your query to help others do the same.  CodeQL is free for research and open source, and can be activated in the GitHub settings of a repository.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#gitleaks","title":"Gitleaks","text":"<p>Secret scanner for git repositories, available as GitHub action.</p>"},{"location":"DSP-TOOLS/developers/code-quality-tools/security/#pysa","title":"Pysa","text":"<p>Pysa is a feature of Facebook's type checker Pyre. It performs taint analysis to identify potential security issues. Tainted data is data that must be treated carefully.  Pysa works by tracking flows of data from where they originate (sources)  to where they terminate in a dangerous location (sinks).  Example: User-controllable data that flows into an eval call  leads to a remote code execution vulnerability. </p>"},{"location":"DSP-TOOLS/special-workflows/env-set-up/","title":"<code>.env</code> Options for <code>dsp-tools</code> Workflows","text":""},{"location":"DSP-TOOLS/special-workflows/env-set-up/#passwords-in-excel2json-and-create","title":"Passwords in <code>excel2json</code> and <code>create</code>","text":"<p>To hide user passwords in the JSON the value <code>null</code> is allowed.</p> <ul> <li><code>excel2json</code>: leave the cell for passwords empty</li> <li>JSON file example:</li> </ul> <pre><code>{\n    \"username\": \"testerProjectAdmin\",\n    \"email\": \"tester.projectadmin@test.org\",\n    \"givenName\": \"Tester\",\n    \"familyName\": \"Project Admin\",\n    \"password\": null,\n    \"lang\": \"de\",\n    \"projects\": [\n        \":admin\"\n    ],\n    \"status\": true\n}\n</code></pre> <p>However, during the <code>create</code> command a password is required.  To set a global default password for all users that do not have a password specified, add the variable <code>DSP_USER_PASSWORD</code> to an <code>.env</code> file in your root directory.  If you want to use it in GitHub workflows, add it to your repository secrets and enter in in the workflow yaml.</p>"},{"location":"DSP-TOOLS/special-workflows/update-legal/","title":"Update Legal Info In XML","text":""},{"location":"DSP-TOOLS/special-workflows/update-legal/#context","title":"Context","text":"<p>If an XML file contains multimedia files, they must be accompanied by legal metadata in this format: </p> <pre><code>&lt;bitstream \n    license=\"http://rdfh.ch/licenses/cc-by-4.0\" \n    copyright-holder=\"Louvre\" \n    authorship-id=\"authorship_0\"&gt;\n</code></pre> <p>Older XML files may contain legal metadata as text properties.  This document guides you through the process of updating them to the new format.</p>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#step-1-find-out-the-property-names-and-run-the-command","title":"Step 1: Find Out The Property Names And Run The Command","text":"<p>Every XML file uses different property names.  Therefore, there cannot be an automatism in DSP-TOOLS to treat all XML files equally. Rather, you have to call the command with the right flags. Let's consider this example:</p> <pre><code>&lt;knora&gt;\n    &lt;resource label=\"lbl\" restype=\":type\" id=\"res_1\"&gt;\n        &lt;bitstream&gt;testdata/bitstreams/test.jpg&lt;/bitstream&gt;\n        &lt;text-prop name=\":hasAuthor\"&gt;&lt;text encoding=\"utf8\"&gt;M. Chuzeville&lt;/text&gt;&lt;/text-prop&gt;\n        &lt;text-prop name=\":hasCopyright\"&gt;&lt;text encoding=\"utf8\"&gt;Louvre&lt;/text&gt;&lt;/text-prop&gt;\n        &lt;text-prop name=\":hasLicense\"&gt;&lt;text encoding=\"utf8\"&gt;CC BY&lt;/text&gt;&lt;/text-prop&gt;\n    &lt;/resource&gt;\n&lt;/knora&gt;\n</code></pre> <p>In this case, you need to run the command like this:</p> <pre><code>dsp-tools update-legal \\\n--authorship_prop=\":hasAuthor\" \\\n--copyright_prop=\":hasCopyright\" \\\n--license_prop=\":hasLicense\" \\\ndata.xml\n</code></pre> <p>The output will be written to <code>data_updated.xml</code>:</p> <pre><code>&lt;knora&gt;\n    &lt;authorship id=\"authorship_0\"&gt;\n        &lt;author&gt;M. Chuzeville&lt;/author&gt;\n    &lt;/authorship&gt;\n\n    &lt;resource label=\"lbl\" restype=\":type\" id=\"res_1\"&gt;\n        &lt;bitstream \n            license=\"http://rdfh.ch/licenses/cc-by-4.0\" \n            copyright-holder=\"Louvre\" \n            authorship-id=\"authorship_0\"\n        &gt;\n            testdata/bitstreams/test.jpg\n        &lt;/bitstream&gt;\n    &lt;/resource&gt;\n&lt;/knora&gt;\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#set-defaults-to-prevent-repetitive-errors","title":"Set Defaults to Prevent Repetitive Errors","text":"<p>In case that the properties are present for some resources, but missing for others, you would get a lot of repetitive errors. To prevent this, you can provide default values that will be filled in if a property is missing. Run the command with the following flags:</p> <pre><code>dsp-tools update-legal \\\n--authorship_prop=\":hasAuthor\" \\\n--authorship_default=\"Project Member\" \\\n--copyright_prop=\":hasCopyright\" \\\n--copyright_default=\"University of Basel\" \\\n--license_prop=\":hasLicense\" \\\n--license_default=\"CC BY SA\" \\\ndata.xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#automatically-treating-invalid-licenses-as-unknown","title":"Automatically Treating Invalid Licenses as \"Unknown\"","text":"<p>If your XML file contains many resources with invalid licenses (licenses that cannot be parsed), you can use the <code>--treat-invalid-licenses-as-unknown</code> flag to automatically convert them to <code>unknown</code> instead of generating FIXME entries:</p> <pre><code>dsp-tools update-legal \\\n--authorship_prop=\":hasAuthor\" \\\n--copyright_prop=\":hasCopyright\" \\\n--license_prop=\":hasLicense\" \\\n--treat-invalid-licenses-as-unknown \\\ndata.xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#step-2-fix-the-update-errors-in-the-csv-error-file","title":"Step 2: Fix The Update Errors in The CSV Error File","text":"<p>For each multimedia resource, one or more of these errors may occur:</p> <ol> <li>copyright absent</li> <li>authorship absent</li> <li>license absent</li> <li>license not parseable<ul> <li>If license information is present,    an attempt is made to parse it using <code>xmllib.find_license_in_string()</code></li> </ul> </li> </ol> <p>If there were errors, you will get 2 output files:</p> <ul> <li><code>&lt;input_file&gt;_PARTIALLY_updated.xml</code></li> <li><code>&lt;input_file&gt;_legal_errors.csv</code>: lists the problematic resources</li> </ul> <p>Please go through the CSV and fix the errors directly in the CSV.</p>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#1-problem-copyright-absent-or-multiple-copyrights","title":"1. Problem: Copyright Absent or Multiple Copyrights","text":"<p>CSV Output:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 CC BY FIXME: Copyright missing Jane Doe Alice Jenkins cat.jpg res_2 CC BY FIXME: Multiple copyrights found. Choose one: DaSCH, Louvre Jane Doe Alice Jenkins <p>Please add a copyright holder to the CSV:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 CC BY DaSCH Jane Doe Alice Jenkins cat.jpg res_2 CC BY Louvre Jane Doe Alice Jenkins"},{"location":"DSP-TOOLS/special-workflows/update-legal/#2-problem-authorship-absent","title":"2. Problem: Authorship Absent","text":"<p>CSV Output:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 CC BY DaSCH FIXME: Authorship missing <p>Please add at least one authorship to the CSV:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 CC BY DaSCH Jane Doe"},{"location":"DSP-TOOLS/special-workflows/update-legal/#3-problem-license-absent-not-parseable-or-multiple-licenses-found","title":"3. Problem: License Absent, Not Parseable, or Multiple Licenses Found","text":"<p>CSV Output:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 FIXME: License missing DaSCH Jane Doe cat.jpg res_2 FIXME: Invalid license: Courtesy of DaSCH DaSCH Jane Doe bird.jpg res_3 FIXME: Multiple licenses found. Choose one: CC-BY, CC-BY-SA DaSCH Jane Doe <p>Please add a valid license to the CSV, either as IRI or in one of the formats understood by  <code>xmllib.find_license_in_string()</code>:</p> file resource_id license copyright authorship_1 authorship_2 dog.jpg res_1 CC BY DaSCH Jane Doe cat.jpg res_2 unknown DaSCH Jane Doe bird.jpg res_3 CC BY DaSCH Jane Doe"},{"location":"DSP-TOOLS/special-workflows/update-legal/#courtesy-is-not-a-license","title":"\"Courtesy\" Is Not A License","text":"<p>It often happens that the provided license does not fulfill the requirements of a legally valid license. Examples are \"Courtesy of Louvre\", or \"Mit freundlicher Genehmigung des Louvre\". In this case, you don't really have a license, hence you have to set it to <code>unknown</code>.</p>"},{"location":"DSP-TOOLS/special-workflows/update-legal/#step-3-rerun-the-command","title":"Step 3: Rerun The Command","text":"<p>Run the command again, this time with the partially updated XML file and a reference to the fixed errors file:</p> <pre><code>dsp-tools update-legal \\\n--authorship_prop=\":hasAuthor\" \\\n--copyright_prop=\":hasCopyright\" \\\n--license_prop=\":hasLicense\" \\\n--fixed_errors=\"data_legal_errors.csv\" \\      # &lt;-- fixed errors file\ndata_PARTIALLY_updated.xml                    # &lt;-- partially updated XML file\n</code></pre> <p>If everything is fine, <code>data_updated.xml</code> is created. If some of your corrections in the CSV turn out to be problematic, the following happens:</p> <ul> <li><code>data_PARTIALLY_updated.xml</code> is updated (overwritten) </li> <li><code>data_legal_errors_2.csv</code> is created</li> </ul> <p>Repeat the steps 2 and 3 until everything is fine.</p> <p>CSV Values Override Everything</p> <p>When you rerun the command with <code>--fixed_errors</code>, the CSV becomes the single source of truth for the resources listed in it. This means:</p> <ul> <li>Any value you change in the CSV (not just FIXME markers) will be used in the final XML</li> <li>This allows you to correct extraction errors, but be careful not to accidentally modify correct values</li> <li>Only resources with errors are included in the CSV; resources not in the CSV are processed normally</li> </ul>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/","title":"Special Workflows xmlupload","text":""},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#special-workflows-for-xmluploads","title":"Special Workflows for <code>xmluploads</code>","text":""},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#cli-commands","title":"CLI Commands","text":"<p>This new workflow consists of 3 commands:</p> <ul> <li><code>upload-files</code>: upload all files that are referenced in an XML file to a DSP server</li> <li><code>ingest-files</code>: kick off the ingest process, and retrieve the mapping CSV when it is finished</li> <li><code>ingest-xmlupload</code>: create the resources contained in the XML file, using the mapping CSV</li> </ul>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#upload-files","title":"<code>upload-files</code>","text":"<p>This command uploads all files referenced in the <code>&lt;bitstream&gt;</code> tags of an XML file to a server (without any processing/ingesting).</p> <pre><code>dsp-tools upload-files [options] xml_data_file.xml\n</code></pre> <p>The following options are available:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS sends the data to</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API.</li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> <li><code>-i</code> | <code>--imgdir</code> (optional, default: <code>.</code>): folder from where the paths in the <code>&lt;bitstream&gt;</code> tags are evaluated</li> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools upload-files xml_data_file.xml\n</code></pre> <p>will upload the files referenced in the <code>&lt;bitstream&gt;</code> tags of <code>xml_data_file.xml</code> onto <code>localhost</code>, for local viewing.</p> <p>In order to upload the same data to the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools upload-files -s https://api.dasch.swiss -u 'your@email.com' -p 'password' xml_data_file.xml\n</code></pre> <p>The expected XML format is documented here.</p>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#ingest-files","title":"<code>ingest-files</code>","text":"<p>This command kicks off the ingest process on the server, and waits until it has completed. Then, it saves the mapping CSV in the current working directory. The mapping CSV contains a mapping from the original file paths on your machine  to the internal filenames of the ingested files on the target server. This mapping is necessary for the next step (<code>ingest-xmlupload</code>).</p> <p>In order for this to work, the files of the indicated project  must first be uploaded with <code>upload-files</code>.</p> <p>This command might take hours or days until it returns, because it waits until the ingest process on the server has completed. Instead of waiting, you might also kill this process, and execute it again later.</p> <pre><code>dsp-tools ingest-files [options] &lt;shortcode&gt;\n</code></pre> <p>The following options are available:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS sends the data to</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API</li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> <li><code>--suppress-update-prompt</code> (optional): don't prompt when using an outdated version of DSP-TOOLS    (useful for contexts without interactive shell, e.g. when the Terminal output is piped into a file)</li> </ul> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools ingest-files 082E\n</code></pre> <p>will ingest the files of the project <code>082E</code> on <code>localhost</code> for local viewing.</p> <p>In order to ingest the same data on the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools ingest-files -s https://api.dasch.swiss -u 'your@email.com' -p 'password' 082E\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#ingest-xmlupload","title":"<code>ingest-xmlupload</code>","text":"<p>This command creates all resources defined in an XML file on a DSP server.  In order for this to work, the files referenced in the XML file  must first be uploaded with <code>upload-files</code>, and then be ingested with <code>ingest-files</code>.</p> <p>The mapping CSV file that was created by <code>ingest-files</code>  must be present in the current working directory.</p> <pre><code>dsp-tools ingest-xmlupload [options] xml_data_file.xml\n</code></pre> <p>The most frequently used options are:</p> <ul> <li><code>-s</code> | <code>--server</code> (optional, default: <code>0.0.0.0:3333</code>): URL of the DSP server where DSP-TOOLS sends the data to</li> <li><code>-u</code> | <code>--user</code> (optional, default: <code>root@example.com</code>): username (e-mail) used for authentication with the DSP-API </li> <li><code>-p</code> | <code>--password</code> (optional, default: <code>test</code>): password used for authentication with the DSP-API</li> <li><code>--interrupt-after=int</code> (optional): interrupt the upload after <code>int</code> resources have been uploaded</li> </ul> <p>To see all possible options, type <code>dsp-tools ingest-xmlupload --help</code>.</p> <p>The defaults are intended for local testing: </p> <pre><code>dsp-tools ingest-xmlupload xml_data_file.xml\n</code></pre> <p>will create the resources contained in <code>xml_data_file.xml</code> on <code>localhost</code> for local viewing.</p> <p>In order to create the same resources on the DSP server <code>https://app.dasch.swiss</code>, it is necessary to specify the following options:</p> <pre><code>dsp-tools ingest-xmlupload -s https://api.dasch.swiss -u 'your@email.com' -p 'password' xml_data_file.xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#incremental-xmlupload","title":"Incremental <code>xmlupload</code>","text":"<p>When uploading data with the <code>xmlupload</code> command, resources can reference each other with an internal ID, e.g. in the <code>&lt;resptr&gt;</code> tag. Once the data is in DSP, the resources cannot be referenced by their internal ID anymore. Instead, the resource's IRI which was generated by the DSP has to be used. After a successful <code>xmlupload</code>,  the mapping of internal IDs to their respective IRIs  is written to a file called <code>id2iri_mapping_[timestamp].json</code>.</p> <p>The mapping is necessary if at a later point in time additional data should be uploaded. Depending on the type of references the additional data contains, there are 4 different ways how new data has to be uploaded:</p> <ol> <li>no references to existing resources: normal xmlupload</li> <li>references to existing resources via IRIs: incremental xmlupload</li> <li>references to existing resources via internal IDs: first id2iri, then incremental xmlupload</li> <li>continue an interrupted xmlupload: first id2iri, then incremental xmlupload</li> </ol>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#1-no-references-to-existing-resources","title":"1. No References to Existing Resources","text":"<p>The first case is the simplest one: No mapping is required, and the additional data can be uploaded with:</p> <pre><code>dsp-tools xmlupload additional_data.xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#2-references-to-existing-resources-via-iris","title":"2. References to Existing Resources Via IRIs","text":"<p>The second case is relatively easy, too: The file <code>additional_data.xml</code> contains references like <code>&lt;resptr&gt;http://rdfh.ch/4123/nyOODvYySV2nJ5RWRdmOdQ&lt;/resptr&gt;</code>.  Such a file can be uploaded with:</p> <pre><code>dsp-tools xmlupload additional_data.xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#3-references-to-existing-resources-via-internal-ids","title":"3. References to Existing Resources Via Internal IDs","text":"<p>The third case, however, is a bit more complicated: The file <code>additional_data.xml</code> contains references like <code>&lt;resptr&gt;book_1&lt;/resptr&gt;</code>, or <code>&lt;text&gt;&lt;a class=\"salsah-link\" href=\"IRI:book_1:IRI\"&gt;link to book_1&lt;/a&gt;&lt;/text&gt;</code>, where <code>book_1</code> was the internal ID of a resource that had previously been uploaded to DSP.</p> <p>Before such an XML file can be uploaded, the internal IDs must be replaced with their respective IRIs. That's where the JSON mapping file comes in: It contains a mapping from <code>book_1</code> to <code>http://rdfh.ch/4123/nyOODvYySV2nJ5RWRdmOdQ</code>.</p> <p>As a first step,  a new file must be generated  with the <code>id2iri</code> command:</p> <pre><code>dsp-tools id2iri additional_data.xml id2iri_mapping_[timestamp].json\n</code></pre> <p>In a second step, the newly generated XML file can be uploaded to DSP:</p> <pre><code>dsp-tools xmlupload additional_data_replaced_[timestamp].xml\n</code></pre>"},{"location":"DSP-TOOLS/special-workflows/workflow-xmlupload/#4-continue-an-interrupted-xmlupload","title":"4. Continue an Interrupted Xmlupload","text":"<p>If a xmlupload didn't finish successfully,  some resources have already been created, while others have not. If one of the remaining resources references an already created resource by its internal ID, this internal ID must be replaced by the IRI of the already created resource.</p> <p>Additionally, the already created resources must be removed from the XML file. Otherwise, they would be created a second time.</p> <p>In such a case, proceed as follows:</p> <ol> <li>Initial xmlupload: <code>dsp-tools xmlupload data.xml</code></li> <li>A crash happens. Some resources have been uploaded, and a <code>id2iri_mapping_[timestamp].json</code> file has been written</li> <li>Fix the reason for the crash</li> <li>Replace the internal IDs and remove the created resources with:     <code>dsp-tools id2iri data.xml --remove-resources id2iri_mapping_[timestamp].json</code></li> <li>Upload the outputted XML file with <code>dsp-tools xmlupload data_replaced_[timestamp].xml</code></li> </ol>"},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/","title":"Advanced Set-Up Options","text":""},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#using-an-env-file","title":"Using an <code>.env</code> File","text":"<p>The advanced set-up options are configured through an <code>.env</code> file. This file should lie in the directory where you run your code from.</p> <p>If you already have an <code>.env</code> file you can add the new variables to the existing file.</p> <p>Please note that if a parameter is omitted it has the same meaning as setting it to <code>false</code>.</p> <p>Oftentimes, <code>.env</code> files are used to store sensitive parameters, such as passwords. Therefore, it is best practice to add it to your <code>.gitignore</code> file if it is not already.</p>"},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#save-warnings-output-to-csv","title":"Save Warnings Output to CSV","text":"<p>User information, warnings and errors are printed out on the command line. It is possible to save them into a CSV file instead. To do so, set <code>XMLLIB_WARNINGS_CSV_SAVEPATH</code> to the path of the CSV file.</p> <p>Example <code>.env</code> file content:</p> <pre><code>XMLLIB_WARNINGS_CSV_SAVEPATH=\"my_folder/my_file.csv\"\n</code></pre> <p>Warnings will no longer be printed out on the terminal, but you will get a print notification when writing the XML if any problems were encountered. If a CSV file from a previous run already exists, it is overwritten. If you wish to keep the old file, you must move or rename it.</p>"},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#configure-warnings-level","title":"Configure Warnings Level","text":"<p>During the runtime of the <code>xmllib</code>, there are three possible levels of user information  that may be printed out or saved as csv, namely info, warning and error.</p> <ul> <li>Info:<ul> <li>The input may be incorrect in some cases</li> <li>For example, the list you provided does not contain any elements</li> <li>Set the variable <code>XMLLIB_IGNORE_USER_INFO</code> to ignore this</li> </ul> </li> <li>Warnings:<ul> <li>The input is wrong, but the XML can be created</li> <li>For example, a value which is expected to be a boolean could not be converted into a boolean</li> <li>Set the variable <code>XMLLIB_IGNORE_USER_WARNING</code> to ignore this</li> </ul> </li> <li>Errors: <ul> <li>The input is so wrong, that the code cannot be executed</li> <li>Cannot be ignored</li> </ul> </li> </ul> <p>If both info and warnings should be ignored, you need to set both variables to <code>true</code>.</p> <p>Example <code>.env</code> file content:</p> <pre><code>XMLLIB_IGNORE_USER_INFO=true\nXMLLIB_IGNORE_USER_WARNING=true\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#configurations-for-the-resulting-xml-file","title":"Configurations for the Resulting XML File","text":""},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#sorting-of-resources-and-values-in-the-xml","title":"Sorting of Resources and Values in the XML","text":"<p>By default, resources and values are not sorted when creating the XML. You can configure sorting through the following <code>.env</code> variables.</p> <ul> <li><code>XMLLIB_SORT_RESOURCES</code>: sort resources by resource id</li> <li><code>XMLLIB_SORT_PROPERTIES</code>: sort properties by the property name, and the values within the properties</li> </ul> <p>Example <code>.env</code> file content:</p> <pre><code>XMLLIB_SORT_RESOURCES=true\nXMLLIB_SORT_PROPERTIES=true\n</code></pre> <p>If you want to enable only one of these sortings, the other can either be omitted or set to <code>false</code>.</p> <p>Note on the sorting order:</p> <ul> <li>The order is determined by the character number in the Unicode chart.</li> <li>This means that for example: <code>B</code> will come before <code>a</code>, as capital letters have a lower number than lower case letters.</li> <li>Numbers are treated as strings. This means that for example <code>01</code> and <code>1</code> are treated differently.</li> </ul>"},{"location":"DSP-TOOLS/xmllib-docs/advanced-set-up/#authorship-reference-ids","title":"Authorship Reference IDs","text":"<p>By default, authorship IDs are generated using a UUID. If the references should be consistent across all runs, then this <code>.env</code> variable can be set. When this variable is set, the authorships are sorted alphabetically and the IDs will start at 1.</p> <p>Example <code>.env</code> file content:</p> <pre><code>XMLLIB_AUTHORSHIP_ID_WITH_INTEGERS=true\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/config-options/","title":"Configuration Options","text":""},{"location":"DSP-TOOLS/xmllib-docs/config-options/#xmllib.models.config_options.NewlineReplacement","title":"<code>NewlineReplacement</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Options how to deal with <code>\\n</code> inside rich text values.</p> <ul> <li><code>NONE</code>: don't modify the rich text (<code>\\n</code> will be lost, because it is meaningless in an XML file)</li> <li><code>PARAGRAPH</code>: replace <code>Start\\nEnd</code> with <code>&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;</code></li> <li><code>LINEBREAK</code>: replace <code>Start\\nEnd</code> with <code>Start&lt;br/&gt;End</code></li> </ul> <p>Examples:</p> <pre><code># setting the replacement options for newlines\nresource = resource.add_richtext(\n    prop_name=\":propName\",\n    value=\"Start\\n\\nEnd\",\n    newline_replacement=xmllib.NewlineReplacement.PARAGRAPH\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/config_options.py</code> <pre><code>class NewlineReplacement(Enum):\n    \"\"\"\n    Options how to deal with `\\\\n` inside rich text values.\n\n    - `NONE`: don't modify the rich text (`\\\\n` will be lost, because it is meaningless in an XML file)\n    - `PARAGRAPH`: replace `Start\\\\nEnd` with `&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;`\n    - `LINEBREAK`: replace `Start\\\\nEnd` with `Start&lt;br/&gt;End`\n\n    Examples:\n        ```python\n        # setting the replacement options for newlines\n        resource = resource.add_richtext(\n            prop_name=\":propName\",\n            value=\"Start\\\\n\\\\nEnd\",\n            newline_replacement=xmllib.NewlineReplacement.PARAGRAPH\n        )\n        ```\n    \"\"\"\n\n    NONE = auto()\n    PARAGRAPH = auto()\n    LINEBREAK = auto()\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/date_formats/","title":"Date Formats","text":""},{"location":"DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.DateFormat","title":"<code>DateFormat</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Date format options for the <code>reformat_date</code> function.</p> <ul> <li><code>YYYY_MM_DD</code></li> <li><code>DD_MM_YYYY</code></li> <li><code>MM_DD_YYYY</code></li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/date_formats.py</code> <pre><code>class DateFormat(Enum):\n    \"\"\"\n    Date format options for the [`reformat_date`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.reformat_date) function.\n\n    - `YYYY_MM_DD`\n    - `DD_MM_YYYY`\n    - `MM_DD_YYYY`\n    \"\"\"  # noqa: E501\n\n    YYYY_MM_DD = auto()\n    DD_MM_YYYY = auto()\n    MM_DD_YYYY = auto()\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.Calendar","title":"<code>Calendar</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Calendar options for the <code>reformat_date</code> function.</p> <ul> <li><code>GREGORIAN</code></li> <li><code>JULIAN</code></li> <li><code>ISLAMIC</code></li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/date_formats.py</code> <pre><code>class Calendar(Enum):\n    \"\"\"\n    Calendar options for the [`reformat_date`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.reformat_date) function.\n\n    - `GREGORIAN`\n    - `JULIAN`\n    - `ISLAMIC`\n    \"\"\"  # noqa: E501\n\n    GREGORIAN = \"GREGORIAN\"\n    JULIAN = \"JULIAN\"\n    ISLAMIC = \"ISLAMIC\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.Era","title":"<code>Era</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Era options for the <code>reformat_date</code> function.</p> <ul> <li><code>CE</code></li> <li><code>BCE</code></li> <li><code>AD</code></li> <li><code>BC</code></li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/date_formats.py</code> <pre><code>class Era(Enum):\n    \"\"\"\n    Era options for the [`reformat_date`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.reformat_date) function.\n\n    - `CE`\n    - `BCE`\n    - `AD`\n    - `BC`\n    \"\"\"  # noqa: E501\n\n    CE = \"CE\"\n    BCE = \"BCE\"\n    AD = \"AD\"\n    BC = \"BC\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/","title":"General Functions","text":""},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup","title":"<code>ListLookup</code>","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>@dataclass\nclass ListLookup:\n    _lookup: dict[str, dict[str, str]]\n    _prop_to_list_name: dict[str, str]\n    _label_language: str\n\n    @staticmethod\n    def create_new(project_json_path: str | Path, language_of_label: str, default_ontology: str) -&gt; ListLookup:\n        \"\"\"\n        Creates a list lookup based on list labels in a specified language and returning list node names.\n        Works for all lists in a project.json\n\n        Args:\n            project_json_path: path to a JSON project file (a.k.a. ontology)\n            language_of_label: label language used for the list\n            default_ontology: ontology prefix which is defined as default in the XML file\n\n        Returns:\n            `ListLookup` for a project\n\n        Examples:\n            ```python\n            list_lookup = xmllib.ListLookup.create_new(\n                project_json_path=\"project.json\",\n                language_of_label=\"en\",\n                default_ontology=\"default-onto\",\n            )\n            ```\n        \"\"\"\n        with open(project_json_path, encoding=\"utf-8\") as f:\n            json_file = json.load(f)\n        label_to_list_node_lookup = _get_label_to_node_all_lists(json_file[\"project\"][\"lists\"], language_of_label)\n        prop_to_list_mapper = _get_property_to_list_name_mapping(json_file[\"project\"][\"ontologies\"], default_ontology)\n        return ListLookup(\n            _lookup=label_to_list_node_lookup,\n            _prop_to_list_name=prop_to_list_mapper,\n            _label_language=language_of_label,\n        )\n\n    def get_node_via_list_name(self, list_name: str, node_label: str) -&gt; str:\n        \"\"\"\n        Returns the list node name based on a label.\n        The language of the label was specified when creating the `ListLookup`.\n\n        Args:\n            list_name: name of the list\n            node_label: label of the node\n\n        Returns:\n            node name\n\n        Examples:\n            ```python\n            node_name = list_lookup.get_node_via_list_name(\n                list_name=\"list1\",\n                node_label=\"Label 1\"  # or: \"label 1\" (capitalisation is not relevant)\n            )\n            # node_name == \"node1\"\n            ```\n        \"\"\"\n        if not (list_lookup := self._lookup.get(list_name)):\n            emit_xmllib_input_warning(\n                MessageInfo(f\"The entered list name '{list_name}' was not found. An empty string is returned.\")\n            )\n            return \"\"\n        if not (found_node := list_lookup.get(node_label)):\n            emit_xmllib_input_warning(\n                MessageInfo(\n                    f\"'{node_label}' was not recognised as label of the list '{list_name}'. \"\n                    f\"This ListLookup is configured for '{self._label_language}' labels. An empty string is returned.\"\n                )\n            )\n            return \"\"\n        return found_node\n\n    def get_list_name_and_node_via_property(self, prop_name: str, node_label: str) -&gt; tuple[str, str]:\n        \"\"\"\n        Returns the list name and the node name based on a property that is used with the list and the label of a node.\n        The language of the label was specified when creating the `ListLookup`.\n        The list name needs to be referenced in the XML file.\n\n        Args:\n            prop_name: name of the list\n            node_label: label of the node\n\n        Returns:\n            list name and node name\n\n        Examples:\n            ```python\n            list_name, node_name = list_lookup.get_list_name_and_node_via_property(\n                prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n                node_label=\"label 1\"\n            )\n            # list_name == \"list1\"\n            # node_name == \"node1\"\n            ```\n        \"\"\"\n        if not (list_name := self.get_list_name_via_property(prop_name)):\n            return \"\", \"\"\n        return list_name, self.get_node_via_list_name(list_name, node_label)\n\n    def get_list_name_via_property(self, prop_name: str) -&gt; str:\n        \"\"\"\n        Returns the list name as specified in the ontology for a property.\n        The list name needs to be referenced in the XML file.\n\n        Args:\n            prop_name: name of the property\n\n        Returns:\n            Name of the list\n\n        Examples:\n            ```python\n            list_name = list_lookup.get_list_name_via_property(\n                prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n            )\n            # list_name == \"list1\"\n            ```\n        \"\"\"\n        if not (list_name := self._prop_to_list_name.get(prop_name)):\n            emit_xmllib_input_warning(\n                MessageInfo(f\"The entered property '{prop_name}' was not found. An empty string is returned.\")\n            )\n            return \"\"\n        return list_name\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup.create_new","title":"<code>create_new</code>","text":"<p>Creates a list lookup based on list labels in a specified language and returning list node names. Works for all lists in a project.json</p> <p>Parameters:</p> Name Type Description Default <code>project_json_path</code> <code>str | Path</code> <p>path to a JSON project file (a.k.a. ontology)</p> required <code>language_of_label</code> <code>str</code> <p>label language used for the list</p> required <code>default_ontology</code> <code>str</code> <p>ontology prefix which is defined as default in the XML file</p> required <p>Returns:</p> Type Description <code>ListLookup</code> <p><code>ListLookup</code> for a project</p> <p>Examples:</p> <pre><code>list_lookup = xmllib.ListLookup.create_new(\n    project_json_path=\"project.json\",\n    language_of_label=\"en\",\n    default_ontology=\"default-onto\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>@staticmethod\ndef create_new(project_json_path: str | Path, language_of_label: str, default_ontology: str) -&gt; ListLookup:\n    \"\"\"\n    Creates a list lookup based on list labels in a specified language and returning list node names.\n    Works for all lists in a project.json\n\n    Args:\n        project_json_path: path to a JSON project file (a.k.a. ontology)\n        language_of_label: label language used for the list\n        default_ontology: ontology prefix which is defined as default in the XML file\n\n    Returns:\n        `ListLookup` for a project\n\n    Examples:\n        ```python\n        list_lookup = xmllib.ListLookup.create_new(\n            project_json_path=\"project.json\",\n            language_of_label=\"en\",\n            default_ontology=\"default-onto\",\n        )\n        ```\n    \"\"\"\n    with open(project_json_path, encoding=\"utf-8\") as f:\n        json_file = json.load(f)\n    label_to_list_node_lookup = _get_label_to_node_all_lists(json_file[\"project\"][\"lists\"], language_of_label)\n    prop_to_list_mapper = _get_property_to_list_name_mapping(json_file[\"project\"][\"ontologies\"], default_ontology)\n    return ListLookup(\n        _lookup=label_to_list_node_lookup,\n        _prop_to_list_name=prop_to_list_mapper,\n        _label_language=language_of_label,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup.get_node_via_list_name","title":"<code>get_node_via_list_name</code>","text":"<p>Returns the list node name based on a label. The language of the label was specified when creating the <code>ListLookup</code>.</p> <p>Parameters:</p> Name Type Description Default <code>list_name</code> <code>str</code> <p>name of the list</p> required <code>node_label</code> <code>str</code> <p>label of the node</p> required <p>Returns:</p> Type Description <code>str</code> <p>node name</p> <p>Examples:</p> <pre><code>node_name = list_lookup.get_node_via_list_name(\n    list_name=\"list1\",\n    node_label=\"Label 1\"  # or: \"label 1\" (capitalisation is not relevant)\n)\n# node_name == \"node1\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def get_node_via_list_name(self, list_name: str, node_label: str) -&gt; str:\n    \"\"\"\n    Returns the list node name based on a label.\n    The language of the label was specified when creating the `ListLookup`.\n\n    Args:\n        list_name: name of the list\n        node_label: label of the node\n\n    Returns:\n        node name\n\n    Examples:\n        ```python\n        node_name = list_lookup.get_node_via_list_name(\n            list_name=\"list1\",\n            node_label=\"Label 1\"  # or: \"label 1\" (capitalisation is not relevant)\n        )\n        # node_name == \"node1\"\n        ```\n    \"\"\"\n    if not (list_lookup := self._lookup.get(list_name)):\n        emit_xmllib_input_warning(\n            MessageInfo(f\"The entered list name '{list_name}' was not found. An empty string is returned.\")\n        )\n        return \"\"\n    if not (found_node := list_lookup.get(node_label)):\n        emit_xmllib_input_warning(\n            MessageInfo(\n                f\"'{node_label}' was not recognised as label of the list '{list_name}'. \"\n                f\"This ListLookup is configured for '{self._label_language}' labels. An empty string is returned.\"\n            )\n        )\n        return \"\"\n    return found_node\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup.get_list_name_and_node_via_property","title":"<code>get_list_name_and_node_via_property</code>","text":"<p>Returns the list name and the node name based on a property that is used with the list and the label of a node. The language of the label was specified when creating the <code>ListLookup</code>. The list name needs to be referenced in the XML file.</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the list</p> required <code>node_label</code> <code>str</code> <p>label of the node</p> required <p>Returns:</p> Type Description <code>tuple[str, str]</code> <p>list name and node name</p> <p>Examples:</p> <pre><code>list_name, node_name = list_lookup.get_list_name_and_node_via_property(\n    prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n    node_label=\"label 1\"\n)\n# list_name == \"list1\"\n# node_name == \"node1\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def get_list_name_and_node_via_property(self, prop_name: str, node_label: str) -&gt; tuple[str, str]:\n    \"\"\"\n    Returns the list name and the node name based on a property that is used with the list and the label of a node.\n    The language of the label was specified when creating the `ListLookup`.\n    The list name needs to be referenced in the XML file.\n\n    Args:\n        prop_name: name of the list\n        node_label: label of the node\n\n    Returns:\n        list name and node name\n\n    Examples:\n        ```python\n        list_name, node_name = list_lookup.get_list_name_and_node_via_property(\n            prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n            node_label=\"label 1\"\n        )\n        # list_name == \"list1\"\n        # node_name == \"node1\"\n        ```\n    \"\"\"\n    if not (list_name := self.get_list_name_via_property(prop_name)):\n        return \"\", \"\"\n    return list_name, self.get_node_via_list_name(list_name, node_label)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup.get_list_name_via_property","title":"<code>get_list_name_via_property</code>","text":"<p>Returns the list name as specified in the ontology for a property. The list name needs to be referenced in the XML file.</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <p>Returns:</p> Type Description <code>str</code> <p>Name of the list</p> <p>Examples:</p> <pre><code>list_name = list_lookup.get_list_name_via_property(\n    prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n)\n# list_name == \"list1\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def get_list_name_via_property(self, prop_name: str) -&gt; str:\n    \"\"\"\n    Returns the list name as specified in the ontology for a property.\n    The list name needs to be referenced in the XML file.\n\n    Args:\n        prop_name: name of the property\n\n    Returns:\n        Name of the list\n\n    Examples:\n        ```python\n        list_name = list_lookup.get_list_name_via_property(\n            prop_name=\":hasList\",  # or: \"default-onto:hasList\"\n        )\n        # list_name == \"list1\"\n        ```\n    \"\"\"\n    if not (list_name := self._prop_to_list_name.get(prop_name)):\n        emit_xmllib_input_warning(\n            MessageInfo(f\"The entered property '{prop_name}' was not found. An empty string is returned.\")\n        )\n        return \"\"\n    return list_name\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_footnote_string","title":"<code>create_footnote_string</code>","text":"<p>Takes the text for a footnote, and returns a string with the correct formatting. You can use this if you want to add the footnote to a string. Currently, the newline replacement options are restricted to <code>LINEBREAK</code> and <code>NONE</code>. The reserved characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code> will be escaped temporarily, but they will be correctly displayed in DSP-APP.</p> Attention <ul> <li>The text in the footnote may be richtext, i.e. contain XML tags.</li> <li>Not all tags supported in ordinary richtext are currently implemented.</li> <li>The allowed tags are:<ul> <li><code>&lt;br&gt;</code> (break line)</li> <li><code>&lt;strong&gt;</code> (bold)</li> <li><code>&lt;em&gt;</code> (italic)</li> <li><code>&lt;u&gt;</code> (underline)</li> <li><code>&lt;strike&gt;</code> (strike through)</li> <li><code>&lt;a href=\"URI\"&gt;</code> (link to a URI)</li> <li><code>&lt;a class=\"salsah-link\" href=\"Knora IRI\"&gt;</code> (link to a resource)</li> </ul> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>footnote_text</code> <code>str</code> <p>Text for the footnote</p> required <code>newline_replacement_option</code> <code>NewlineReplacement</code> <p>options to replace newlines</p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>str</code> <p>The footnote as a string</p> <p>Examples:</p> <pre><code>result = xmllib.create_footnote_string(\"Text\")\n# result == '&lt;footnote content=\"Text\"/&gt;'\n</code></pre> <pre><code>result = xmllib.create_footnote_string(\"Text\\nSecond Line\")\n# result == '&lt;footnote content=\"Text&amp;lt;br/&amp;gt;Second Line\"/&gt;'\n</code></pre> <pre><code>result = xmllib.create_footnote_string(\"Already escaped &amp;lt;&amp;gt;\")\n# already escaped characters will not be escaped again\n# result == '&lt;footnote content=\"Already escaped &amp;lt;&amp;gt;\"/&gt;'\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_footnote_string(\n    footnote_text: str, newline_replacement_option: NewlineReplacement = NewlineReplacement.LINEBREAK\n) -&gt; str:\n    \"\"\"\n    Takes the text for a footnote, and returns a string with the correct formatting.\n    You can use this if you want to add the footnote to a string.\n    Currently, the newline replacement options are restricted to `LINEBREAK` and `NONE`.\n    The reserved characters `&lt;`, `&gt;` and `&amp;` will be escaped temporarily,\n    but they will be correctly displayed in DSP-APP.\n\n    Attention:\n        - The text in the footnote may be richtext, i.e. contain XML tags.\n        - Not all tags supported in ordinary richtext are currently implemented.\n        - The allowed tags are:\n            - `&lt;br&gt;` (break line)\n            - `&lt;strong&gt;` (bold)\n            - `&lt;em&gt;` (italic)\n            - `&lt;u&gt;` (underline)\n            - `&lt;strike&gt;` (strike through)\n            - `&lt;a href=\"URI\"&gt;` (link to a URI)\n            - `&lt;a class=\"salsah-link\" href=\"Knora IRI\"&gt;` (link to a resource)\n\n    Args:\n        footnote_text: Text for the footnote\n        newline_replacement_option: options to replace newlines\n\n    Raises:\n        XmllibInputError: If the text is empty, or if a newline replacement which is not implemented is entered\n\n    Returns:\n        The footnote as a string\n\n    Examples:\n        ```python\n        result = xmllib.create_footnote_string(\"Text\")\n        # result == '&lt;footnote content=\"Text\"/&gt;'\n        ```\n\n        ```python\n        result = xmllib.create_footnote_string(\"Text\\\\nSecond Line\")\n        # result == '&lt;footnote content=\"Text&amp;lt;br/&amp;gt;Second Line\"/&gt;'\n        ```\n\n        ```python\n        result = xmllib.create_footnote_string(\"Already escaped &amp;lt;&amp;gt;\")\n        # already escaped characters will not be escaped again\n        # result == '&lt;footnote content=\"Already escaped &amp;lt;&amp;gt;\"/&gt;'\n        ```\n    \"\"\"\n    text_tag = create_footnote_element(footnote_text, newline_replacement_option)\n    return etree.tostring(text_tag, encoding=\"unicode\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_footnote_element","title":"<code>create_footnote_element</code>","text":"<p>Takes the text for a footnote, and returns an <code>etree.Element</code>. You can use this if you are working with <code>lxml</code>. Currently, the newline replacement options are restricted to <code>LINEBREAK</code> and <code>NONE</code>.</p> Attention <ul> <li>The text in the footnote may be richtext, i.e. contain XML tags.</li> <li>Not all tags supported in ordinary richtext are currently implemented.</li> <li>The allowed tags are:<ul> <li><code>&lt;br&gt;</code> (break line)</li> <li><code>&lt;strong&gt;</code> (bold)</li> <li><code>&lt;em&gt;</code> (italic)</li> <li><code>&lt;u&gt;</code> (underline)</li> <li><code>&lt;strike&gt;</code> (strike through)</li> <li><code>&lt;a href=\"URI\"&gt;</code> (link to a URI)</li> <li><code>&lt;a class=\"salsah-link\" href=\"Knora IRI\"&gt;</code> (link to a resource)</li> </ul> </li> </ul> <p>Parameters:</p> Name Type Description Default <code>footnote_text</code> <code>str</code> <p>Text for the footnote</p> required <code>newline_replacement_option</code> <code>NewlineReplacement</code> <p>options to replace newlines</p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>_Element</code> <p>The footnote as a string</p> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_footnote_element(\n    footnote_text: str, newline_replacement_option: NewlineReplacement = NewlineReplacement.LINEBREAK\n) -&gt; etree._Element:\n    \"\"\"\n    Takes the text for a footnote, and returns an `etree.Element`.\n    You can use this if you are working with `lxml`.\n    Currently, the newline replacement options are restricted to `LINEBREAK` and `NONE`.\n\n    Attention:\n        - The text in the footnote may be richtext, i.e. contain XML tags.\n        - Not all tags supported in ordinary richtext are currently implemented.\n        - The allowed tags are:\n            - `&lt;br&gt;` (break line)\n            - `&lt;strong&gt;` (bold)\n            - `&lt;em&gt;` (italic)\n            - `&lt;u&gt;` (underline)\n            - `&lt;strike&gt;` (strike through)\n            - `&lt;a href=\"URI\"&gt;` (link to a URI)\n            - `&lt;a class=\"salsah-link\" href=\"Knora IRI\"&gt;` (link to a resource)\n\n    Args:\n        footnote_text: Text for the footnote\n        newline_replacement_option: options to replace newlines\n\n    Raises:\n        XmllibInputError: If the text is empty, or if a newline replacement which is not implemented is entered\n\n    Returns:\n        The footnote as a string\n    \"\"\"\n    if newline_replacement_option not in {NewlineReplacement.LINEBREAK, NewlineReplacement.NONE}:\n        raise_xmllib_input_error(\n            MessageInfo(\"Currently the only supported newline replacement is linebreak (&lt;br/&gt;) or None.\")\n        )\n    if not is_nonempty_value_internal(footnote_text):\n        raise_xmllib_input_error(MessageInfo(\"The input value is empty.\"))\n    footnote_text = replace_newlines_with_tags(str(footnote_text), newline_replacement_option)\n    unescaped_text = unescape_reserved_xml_chars(footnote_text)\n    return etree.Element(\"footnote\", attrib={\"content\": unescaped_text})\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_standoff_link_to_resource","title":"<code>create_standoff_link_to_resource</code>","text":"<p>Creates a standoff link to a resource.</p> <p>Parameters:</p> Name Type Description Default <code>resource_id</code> <code>str</code> <p>ID of the resource that is linked</p> required <code>displayed_text</code> <code>str</code> <p>text to display for the embedded link</p> required <p>Returns:</p> Type Description <code>str</code> <p>A standoff link in string form.</p> <p>Examples:</p> <pre><code>result = xmllib.create_standoff_link_to_resource(\"resource_id\", \"Text\")\n# result == '&lt;a class=\"salsah-link\" href=\"IRI:resource_id:IRI\"&gt;Text&lt;/a&gt;'\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_standoff_link_to_resource(resource_id: str, displayed_text: str) -&gt; str:\n    \"\"\"\n    Creates a standoff link to a resource.\n\n    Args:\n        resource_id: ID of the resource that is linked\n        displayed_text: text to display for the embedded link\n\n    Returns:\n        A standoff link in string form.\n\n    Raises:\n        XmllibInputError: if the resource ID or the displayed text are empty\n\n    Examples:\n        ```python\n        result = xmllib.create_standoff_link_to_resource(\"resource_id\", \"Text\")\n        # result == '&lt;a class=\"salsah-link\" href=\"IRI:resource_id:IRI\"&gt;Text&lt;/a&gt;'\n        ```\n    \"\"\"\n    if not all([is_nonempty_value_internal(resource_id), is_nonempty_value_internal(displayed_text)]):\n        msg_str = (\n            f\"The entered resource ID and displayed text may not be empty. \"\n            f\"Your input: resource_id '{resource_id}' / displayed_text '{displayed_text}'\"\n        )\n        raise_xmllib_input_error(MessageInfo(msg_str))\n    attribs = {\"class\": \"salsah-link\", \"href\": f\"IRI:{resource_id}:IRI\"}\n    ele = etree.Element(\"a\", attrib=attribs)\n    ele.text = displayed_text\n    return etree.tostring(ele, encoding=\"unicode\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_standoff_link_to_uri","title":"<code>create_standoff_link_to_uri</code>","text":"<p>Creates a standoff link to a URI.</p> <p>Parameters:</p> Name Type Description Default <code>uri</code> <code>str</code> <p>the target URI that should be linked to</p> required <code>displayed_text</code> <code>str</code> <p>text to display for the embedded link</p> required <p>Returns:</p> Type Description <code>str</code> <p>A standoff link in string form.</p> <p>Examples:</p> <pre><code>result = xmllib.create_standoff_link_to_uri(\"https://www.dasch.swiss/\", \"This is DaSCH\")\n# result == '&lt;a href=\"https://www.dasch.swiss/\"&gt;This is DaSCH&lt;/a&gt;'\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_standoff_link_to_uri(uri: str, displayed_text: str) -&gt; str:\n    \"\"\"\n    Creates a standoff link to a URI.\n\n    Args:\n        uri: the target URI that should be linked to\n        displayed_text: text to display for the embedded link\n\n    Returns:\n        A standoff link in string form.\n\n    Raises:\n        XmllibInputError: if the URI or the displayed text are empty\n\n    Examples:\n        ```python\n        result = xmllib.create_standoff_link_to_uri(\"https://www.dasch.swiss/\", \"This is DaSCH\")\n        # result == '&lt;a href=\"https://www.dasch.swiss/\"&gt;This is DaSCH&lt;/a&gt;'\n        ```\n    \"\"\"\n    if not all([is_nonempty_value_internal(uri), is_nonempty_value_internal(displayed_text)]):\n        msg_str = (\n            f\"The entered URI and displayed text may not be empty. \"\n            f\"Your input: uri '{uri}' / displayed_text '{displayed_text}'\"\n        )\n        raise_xmllib_input_error(MessageInfo(msg_str))\n    attribs = {\"href\": uri}\n    ele = etree.Element(\"a\", attrib=attribs)\n    ele.text = displayed_text\n    return etree.tostring(ele, encoding=\"unicode\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.get_list_nodes_from_string_via_list_name","title":"<code>get_list_nodes_from_string_via_list_name</code>","text":"<p>Resolves list labels to node names.</p> <p>Parameters:</p> Name Type Description Default <code>string_with_list_labels</code> <code>str</code> <p>the string containing list labels</p> required <code>label_separator</code> <code>str</code> <p>separator in the string that contains the labels</p> required <code>list_name</code> <code>str</code> <p>name of the list</p> required <code>list_lookup</code> <code>ListLookup</code> <p><code>ListLookup</code> of the project</p> required <p>Returns:</p> Type Description <code>list[str]</code> <p>A list of node names. If the string is empty, it returns an empty list.</p> <p>Examples:</p> <pre><code>string_with_list_labels = \"Label 1; Label 2\"\nnodes = xmllib.get_list_nodes_from_string_via_list_name(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    list_name=\"list1\",\n    list_lookup=list_lookup,\n)\n# nodes == [\"node1\", \"node2\"]\n</code></pre> <pre><code>string_with_list_labels = \"\"\nnodes = xmllib.get_list_nodes_from_string_via_list_name(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    list_name=\"list1\",\n    list_lookup=list_lookup,\n)\n# nodes == []\n</code></pre> <pre><code>string_with_list_labels = pd.NA\nnodes = xmllib.get_list_nodes_from_string_via_list_name(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    list_name=\"list1\",\n    list_lookup=list_lookup,\n)\n# nodes == []\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def get_list_nodes_from_string_via_list_name(\n    string_with_list_labels: str, label_separator: str, list_name: str, list_lookup: ListLookup\n) -&gt; list[str]:\n    \"\"\"\n    Resolves list labels to node names.\n\n    Args:\n        string_with_list_labels: the string containing list labels\n        label_separator: separator in the string that contains the labels\n        list_name: name of the list\n        list_lookup: `ListLookup` of the project\n\n    Returns:\n        A list of node names. If the string is empty, it returns an empty list.\n\n    Examples:\n        ```python\n        string_with_list_labels = \"Label 1; Label 2\"\n        nodes = xmllib.get_list_nodes_from_string_via_list_name(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            list_name=\"list1\",\n            list_lookup=list_lookup,\n        )\n        # nodes == [\"node1\", \"node2\"]\n        ```\n\n        ```python\n        string_with_list_labels = \"\"\n        nodes = xmllib.get_list_nodes_from_string_via_list_name(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            list_name=\"list1\",\n            list_lookup=list_lookup,\n        )\n        # nodes == []\n        ```\n\n        ```python\n        string_with_list_labels = pd.NA\n        nodes = xmllib.get_list_nodes_from_string_via_list_name(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            list_name=\"list1\",\n            list_lookup=list_lookup,\n        )\n        # nodes == []\n        ```\n    \"\"\"\n    if not is_nonempty_value_internal(string_with_list_labels):\n        return []\n    labels_list = create_list_from_input(string_with_list_labels, label_separator)\n    nodes_list = [list_lookup.get_node_via_list_name(list_name, label) for label in labels_list]\n    return nodes_list\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.get_list_nodes_from_string_via_property","title":"<code>get_list_nodes_from_string_via_property</code>","text":"<p>Takes a string containing list labels, the separator by which they can be split, a property name and the list lookup. Resolves the labels and returns the list name to be referenced in the XML file and a list of node names. If the string is empty, it returns an empty list.</p> <p>Parameters:</p> Name Type Description Default <code>string_with_list_labels</code> <code>str</code> <p>the string containing the labels</p> required <code>label_separator</code> <code>str</code> <p>separator in the string that contains the labels</p> required <code>property_name</code> <code>str</code> <p>name of the property</p> required <code>list_lookup</code> <code>ListLookup</code> <p><code>ListLookup</code> of the project</p> required <p>Returns:</p> Type Description <code>tuple[str, list[str]]</code> <p>The name of the list and a list of node names.</p> <p>Examples:</p> <pre><code>string_with_list_labels = \"Label 1; Label 2\"\nlist_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    property_name=\":hasList\",\n    list_lookup=list_lookup,\n)\n# list_name == \"list1\"\n# nodes == [\"node1\", \"node2\"]\n</code></pre> <pre><code>string_with_list_labels = \"\"\nlist_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    property_name=\":hasList\",\n    list_lookup=list_lookup,\n)\n# list_name == \"\"\n# nodes == []\n</code></pre> <pre><code>string_with_list_labels = pd.NA\nlist_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n    string_with_list_labels=string_with_list_labels,\n    label_separator=\";\",\n    property_name=\":hasList\",\n    list_lookup=list_lookup,\n)\n# list_name == \"\"\n# nodes == []\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def get_list_nodes_from_string_via_property(\n    string_with_list_labels: str, label_separator: str, property_name: str, list_lookup: ListLookup\n) -&gt; tuple[str, list[str]]:\n    \"\"\"\n    Takes a string containing list labels, the separator by which they can be split,\n    a property name and the list lookup.\n    Resolves the labels and returns the list name to be referenced in the XML file and a list of node names.\n    If the string is empty, it returns an empty list.\n\n    Args:\n        string_with_list_labels: the string containing the labels\n        label_separator: separator in the string that contains the labels\n        property_name: name of the property\n        list_lookup: `ListLookup` of the project\n\n    Returns:\n        The name of the list and a list of node names.\n\n    Examples:\n        ```python\n        string_with_list_labels = \"Label 1; Label 2\"\n        list_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            property_name=\":hasList\",\n            list_lookup=list_lookup,\n        )\n        # list_name == \"list1\"\n        # nodes == [\"node1\", \"node2\"]\n        ```\n\n        ```python\n        string_with_list_labels = \"\"\n        list_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            property_name=\":hasList\",\n            list_lookup=list_lookup,\n        )\n        # list_name == \"\"\n        # nodes == []\n        ```\n\n        ```python\n        string_with_list_labels = pd.NA\n        list_name, nodes = xmllib.get_list_nodes_from_string_via_property(\n            string_with_list_labels=string_with_list_labels,\n            label_separator=\";\",\n            property_name=\":hasList\",\n            list_lookup=list_lookup,\n        )\n        # list_name == \"\"\n        # nodes == []\n        ```\n    \"\"\"\n    if not is_nonempty_value_internal(string_with_list_labels):\n        return \"\", []\n    labels_list = create_list_from_input(string_with_list_labels, label_separator)\n    list_name = \"\"\n    nodes = []\n    for lbl in labels_list:\n        list_name, node_name = list_lookup.get_list_name_and_node_via_property(property_name, lbl)\n        nodes.append(node_name)\n    return list_name, nodes\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.escape_reserved_xml_characters","title":"<code>escape_reserved_xml_characters</code>","text":"<p>From richtext strings (encoding=\"xml\"), escape the reserved characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code>, but only if they are not part of a standard standoff tag or escape sequence.</p> <p>See the documentation for the standard standoff tags allowed by DSP-API, which will not be escaped.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>the richtext string to be escaped</p> required <p>Returns:</p> Type Description <code>str</code> <p>The escaped richtext string</p> <p>Examples:</p> <pre><code>result = xmllib.escape_reserved_xml_characters(\"Text &lt;unknownTag&gt;\")\n# result == \"Text &amp;lt;unknownTag&amp;gt;\"\n</code></pre> <pre><code>result = xmllib.escape_reserved_xml_characters(\"Text &lt;br/&gt; text after\")\n# result == \"Text &lt;br/&gt; text after\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def escape_reserved_xml_characters(text: str) -&gt; str:\n    \"\"\"\n    From richtext strings (encoding=\"xml\"), escape the reserved characters `&lt;`, `&gt;` and `&amp;`,\n    but only if they are not part of a standard standoff tag or escape sequence.\n\n    [See the documentation for the standard standoff tags allowed by DSP-API,\n    which will not be escaped.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n\n    Args:\n        text: the richtext string to be escaped\n\n    Returns:\n        The escaped richtext string\n\n    Examples:\n        ```python\n        result = xmllib.escape_reserved_xml_characters(\"Text &lt;unknownTag&gt;\")\n        # result == \"Text &amp;lt;unknownTag&amp;gt;\"\n        ```\n\n        ```python\n        result = xmllib.escape_reserved_xml_characters(\"Text &lt;br/&gt; text after\")\n        # result == \"Text &lt;br/&gt; text after\"\n        ```\n    \"\"\"\n    allowed_tags_regex = \"|\".join(KNOWN_XML_TAG_REGEXES)\n    lookahead = rf\"(?!/?({allowed_tags_regex})/?&gt;)\"\n    illegal_lt = rf\"&lt;{lookahead}\"\n    lookbehind = rf\"(?&lt;!&lt;/?({allowed_tags_regex})/?)\"\n    illegal_gt = rf\"{lookbehind}&gt;\"\n    illegal_amp = r\"&amp;(?![#a-zA-Z0-9]+;)\"\n    text = regex.sub(illegal_lt, \"&amp;lt;\", text)\n    text = regex.sub(illegal_gt, \"&amp;gt;\", text)\n    text = regex.sub(illegal_amp, \"&amp;amp;\", text)\n    return text\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.make_xsd_compatible_id","title":"<code>make_xsd_compatible_id</code>","text":"<p>An xsd:ID may not contain all types of special characters, and it must start with a letter or underscore. Replace illegal characters with <code>_</code>, and prepend a leading <code>_</code> if necessary.</p> <p>The string must contain at least one Unicode letter (matching the regex <code>\\p{L}</code>), <code>_</code>, <code>!</code>, <code>?</code>, or number, but must not be <code>None</code>, <code>&lt;NA&gt;</code>, <code>N/A</code>, or <code>-</code>.</p> <p>Parameters:</p> Name Type Description Default <code>input_value</code> <code>str | float | int</code> <p>input value</p> required <p>Returns:</p> Type Description <code>str</code> <p>An xsd ID compatible string based on the input value</p> <p>Examples:</p> <pre><code>result = xmllib.make_xsd_compatible_id(\"0_Universit\u00e4t_Basel\")\n# result == \"_0_Universit_t_Basel\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def make_xsd_compatible_id(input_value: str | float | int) -&gt; str:\n    \"\"\"\n    An xsd:ID may not contain all types of special characters,\n    and it must start with a letter or underscore.\n    Replace illegal characters with `_`, and prepend a leading `_` if necessary.\n\n    The string must contain at least one Unicode letter (matching the regex ``\\\\p{L}``),\n    `_`, `!`, `?`, or number, but must not be `None`, `&lt;NA&gt;`, `N/A`, or `-`.\n\n    Args:\n        input_value: input value\n\n    Raises:\n        XmllibInputError: if the input cannot be transformed to an xsd:ID\n\n    Returns:\n        An xsd ID compatible string based on the input value\n\n    Examples:\n        ```python\n        result = xmllib.make_xsd_compatible_id(\"0_Universit\u00e4t_Basel\")\n        # result == \"_0_Universit_t_Basel\"\n        ```\n    \"\"\"\n    if not is_nonempty_value_internal(input_value):\n        raise_xmllib_input_error(MessageInfo(f\"The input '{input_value}' cannot be transformed to an xsd:ID\"))\n    # if the start of string is neither letter nor underscore, add an underscore\n    res = regex.sub(r\"^(?=[^A-Za-z_])\", \"_\", str(input_value))\n    # replace all illegal characters by underscore\n    res = regex.sub(r\"[^\\w_\\-.]\", \"_\", res, flags=regex.ASCII)\n    return res\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.make_xsd_compatible_id_with_uuid","title":"<code>make_xsd_compatible_id_with_uuid</code>","text":"<p>An xsd:ID may not contain all types of special characters, and it must start with a letter or underscore. Replace illegal characters with <code>_</code>, and prepend a leading <code>_</code> if necessary. Additionally, add a UUID at the end. The UUID will be different each time the function is called.</p> <p>The string must contain at least one Unicode letter (matching the regex <code>\\p{L}</code>), <code>_</code>, <code>!</code>, <code>?</code>, or number, but must not be <code>None</code>, <code>&lt;NA&gt;</code>, <code>N/A</code>, or <code>-</code>.</p> <p>Parameters:</p> Name Type Description Default <code>input_value</code> <code>str | float | int</code> <p>input value</p> required <p>Returns:</p> Type Description <code>str</code> <p>an xsd ID based on the input value, with a UUID attached.</p> <p>Examples:</p> <pre><code>result = xmllib.make_xsd_compatible_id_with_uuid(\"Universit\u00e4t_Basel\")\n# result == \"Universit_t_Basel_88f5cd0b-f333-4174-9030-65900b17773d\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def make_xsd_compatible_id_with_uuid(input_value: str | float | int) -&gt; str:\n    \"\"\"\n    An xsd:ID may not contain all types of special characters,\n    and it must start with a letter or underscore.\n    Replace illegal characters with `_`, and prepend a leading `_` if necessary.\n    Additionally, add a UUID at the end.\n    The UUID will be different each time the function is called.\n\n    The string must contain at least one Unicode letter (matching the regex ``\\\\p{L}``),\n    `_`, `!`, `?`, or number, but must not be `None`, `&lt;NA&gt;`, `N/A`, or `-`.\n\n    Args:\n        input_value: input value\n\n    Raises:\n        XmllibInputError: if the input cannot be transformed to an xsd:ID\n\n    Returns:\n        an xsd ID based on the input value, with a UUID attached.\n\n    Examples:\n        ```python\n        result = xmllib.make_xsd_compatible_id_with_uuid(\"Universit\u00e4t_Basel\")\n        # result == \"Universit_t_Basel_88f5cd0b-f333-4174-9030-65900b17773d\"\n        ```\n    \"\"\"\n    res = make_xsd_compatible_id(input_value)\n    _uuid = uuid.uuid4()\n    res = f\"{res}_{_uuid}\"\n    return res\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_list_from_string","title":"<code>create_list_from_string</code>","text":"Attention <p>This function is deprecated, use the new function called 'create_list_from_input' instead.</p> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_list_from_string(string: str, separator: str) -&gt; list[str]:  # noqa:ARG001\n    \"\"\"\n    Attention:\n        This function is deprecated, use the new function called 'create_list_from_input' instead.\n    \"\"\"\n    raise_xmllib_input_error(\n        MessageInfo(\n            \"The function 'create_list_from_string' is deprecated. \"\n            \"Use the new function called 'create_list_from_input' instead.\"\n        )\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_list_from_input","title":"<code>create_list_from_input</code>","text":"<p>Create a list of strings from the input value, using the provided separator. If the input is empty it returns an empty list.</p> <p>Parameters:</p> Name Type Description Default <code>input_value</code> <code>Any</code> <p>input value to check and convert</p> required <code>separator</code> <code>str</code> <p>The character that separates the different values in the string. For example, a comma or newline.</p> required <p>Returns:</p> Type Description <code>list[str]</code> <p>The list that results from splitting the input string.</p> <p>Examples:</p> <pre><code>result = xmllib.create_list_from_input(\"  one, two,  three\", \",\")\n# result == [\"one\", \"two\", \"three\"]\n</code></pre> <pre><code>result = xmllib.create_list_from_input(1, \"-\")\n# result == [\"1\"]\n</code></pre> <pre><code>result = xmllib.create_list_from_input(\"   \\n    \", \"\\n\")\n# result == []\n</code></pre> <pre><code>result = xmllib.create_list_from_input(None, \",\")\n# result == []\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_list_from_input(input_value: Any, separator: str) -&gt; list[str]:\n    \"\"\"\n    Create a list of strings from the input value, using the provided separator.\n    If the input is empty it returns an empty list.\n\n    Args:\n        input_value: input value to check and convert\n        separator: The character that separates the different values in the string.\n            For example, a comma or newline.\n\n    Returns:\n        The list that results from splitting the input string.\n\n    Examples:\n        ```python\n        result = xmllib.create_list_from_input(\"  one, two,  three\", \",\")\n        # result == [\"one\", \"two\", \"three\"]\n        ```\n\n        ```python\n        result = xmllib.create_list_from_input(1, \"-\")\n        # result == [\"1\"]\n        ```\n\n        ```python\n        result = xmllib.create_list_from_input(\"   \\\\n    \", \"\\\\n\")\n        # result == []\n        ```\n\n        ```python\n        result = xmllib.create_list_from_input(None, \",\")\n        # result == []\n        ```\n    \"\"\"\n    if not is_nonempty_value_internal(input_value):\n        return []\n    if isinstance(input_value, str):\n        return [strpd for x in input_value.split(separator) if (strpd := x.strip())]\n    return [str(input_value)]\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.create_non_empty_list_from_string","title":"<code>create_non_empty_list_from_string</code>","text":"<p>Creates a list from a string. Trailing and leading whitespaces are removed from the list items.</p> <p>If the resulting list is empty it will raise an <code>XmllibInputError</code>.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>input string</p> required <code>separator</code> <code>str</code> <p>The character that separates the different values in the string. For example, a comma or newline.</p> required <code>resource_id</code> <code>str | None</code> <p>If the ID of the resource is provided, a better error message can be composed</p> <code>None</code> <code>prop_name</code> <code>str | None</code> <p>If the name of the property is provided, a better error message can be composed</p> <code>None</code> <p>Returns:</p> Type Description <code>list[str]</code> <p>The list that results from splitting the input string.</p> <p>Examples:</p> <pre><code>result = xmllib.create_non_empty_list_from_string(\"One\\nTwo   \", \"\\n\")\n# result == [\"One\", \"Two\"]\n</code></pre> <pre><code>result = xmllib.create_non_empty_list_from_string(\"   \\n/    \", \"/\")\n# raises XmllibInputError\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def create_non_empty_list_from_string(\n    string: str, separator: str, resource_id: str | None = None, prop_name: str | None = None\n) -&gt; list[str]:\n    \"\"\"\n    Creates a list from a string.\n    Trailing and leading whitespaces are removed from the list items.\n\n    If the resulting list is empty it will raise an `XmllibInputError`.\n\n    Args:\n        string: input string\n        separator: The character that separates the different values in the string.\n            For example, a comma or newline.\n        resource_id: If the ID of the resource is provided, a better error message can be composed\n        prop_name: If the name of the property is provided, a better error message can be composed\n\n    Returns:\n        The list that results from splitting the input string.\n\n    Raises:\n        XmllibInputError: If the resulting list is empty.\n\n    Examples:\n        ```python\n        result = xmllib.create_non_empty_list_from_string(\"One\\\\nTwo   \", \"\\\\n\")\n        # result == [\"One\", \"Two\"]\n        ```\n\n        ```python\n        result = xmllib.create_non_empty_list_from_string(\"   \\\\n/    \", \"/\")\n        # raises XmllibInputError\n        ```\n    \"\"\"\n    lst = create_list_from_input(string, separator)\n    if len(lst) == 0:\n        msg_info = MessageInfo(\n            message=\"The input for this function must result in a non-empty list. Your input results in an empty list.\",\n            resource_id=resource_id,\n            prop_name=prop_name,\n        )\n        raise_xmllib_input_error(msg_info)\n    return lst\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.clean_whitespaces_from_string","title":"<code>clean_whitespaces_from_string</code>","text":"<p>Remove redundant whitespaces (space, <code>\\n</code>, <code>\\t</code>, etc.) and replace them with a single space.</p> <p>If the resulting string is empty, a warning will be printed.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>input string</p> required <p>Returns:</p> Type Description <code>str</code> <p>The cleaned string.</p> <p>Examples:</p> <pre><code>result = xmllib.clean_whitespaces_from_string(\"\\t Text\\nafter newline\")\n# result == \"Text after newline\"\n</code></pre> <pre><code>result = xmllib.clean_whitespaces_from_string(\"      \\n\\t \")\n# result == \"\"\n# warns that the string is now empty\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def clean_whitespaces_from_string(string: str) -&gt; str:\n    \"\"\"\n    Remove redundant whitespaces (space, `\\\\n`, `\\\\t`, etc.) and replace them with a single space.\n\n    If the resulting string is empty, a warning will be printed.\n\n    Args:\n        string: input string\n\n    Returns:\n        The cleaned string.\n\n    Examples:\n        ```python\n        result = xmllib.clean_whitespaces_from_string(\"\\\\t Text\\\\nafter newline\")\n        # result == \"Text after newline\"\n        ```\n\n        ```python\n        result = xmllib.clean_whitespaces_from_string(\"      \\\\n\\\\t \")\n        # result == \"\"\n        # warns that the string is now empty\n        ```\n    \"\"\"\n    cleaned = regex.sub(r\"\\s+\", \" \", string).strip()\n    if len(cleaned) == 0:\n        emit_xmllib_input_warning(\n            MessageInfo(\n                \"The entered string is empty after all redundant whitespaces were removed. An empty string is returned.\"\n            )\n        )\n    return cleaned\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.find_license_in_string","title":"<code>find_license_in_string</code>","text":"<p>Checks if a string contains a license, and returns it. Returns None if no license was found. The case (upper case/lower case) is ignored.</p> <p>Look out: Your string should contain no more than 1 license. If it contains more, there is no guarantee which one will be returned.</p> <p>See recommended licenses for details.</p> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>string to check</p> required <p>Returns:</p> Type Description <code>License | None</code> <p><code>License</code> object or <code>None</code></p> <p>Examples:</p> <pre><code>result = xmllib.find_license_in_string(\"CC BY\")\n# result == LicenseRecommended.CC.BY\n</code></pre> <pre><code>result = xmllib.find_license_in_string(\"Creative Commons Developing Nations 2.0 Generic Deed\")\n# result == None\n</code></pre> Currently supported license formats <ul> <li>\"AI\" -&gt; LicenseRecommended.DSP.AI_GENERATED</li> <li>\"KI\" -&gt; LicenseRecommended.DSP.AI_GENERATED</li> <li>\"IA\" -&gt; LicenseRecommended.DSP.AI_GENERATED</li> <li>\"public domain\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"gemeinfrei\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"frei von Urheberrechten\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"urheberrechtsbefreit\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"libre de droits\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"domaine public\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN</li> <li>\"unknown\" -&gt; LicenseRecommended.DSP.UNKNOWN</li> <li>\"unbekannt\" -&gt; LicenseRecommended.DSP.UNKNOWN</li> <li>\"inconnu\" -&gt; LicenseRecommended.DSP.UNKNOWN</li> <li>\"CC BY\" -&gt; LicenseRecommended.CC.BY</li> <li>\"Creative Commons BY 4.0\" -&gt; LicenseRecommended.CC.BY</li> <li>\"CC 0 1.0\" -&gt; LicenseOther.Public.CC_0_1_0</li> <li>\"CC PDM 1.0\" -&gt; LicenseOther.Public.CC_PDM_1_0</li> <li>\"BORIS Standard License\" -&gt; LicenseOther.Various.BORIS_STANDARD</li> <li>\"LICENCE OUVERTE 2.0\" -&gt; LicenseOther.Various.FRANCE_OUVERTE</li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/general_functions.py</code> <pre><code>def find_license_in_string(string: str) -&gt; License | None:  # noqa: PLR0911 (too many return statements)\n    \"\"\"\n    Checks if a string contains a license, and returns it.\n    Returns None if no license was found.\n    The case (upper case/lower case) is ignored.\n\n    Look out: Your string should contain no more than 1 license.\n    If it contains more, there is no guarantee which one will be returned.\n\n    See [recommended licenses](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/)\n    for details.\n\n    Args:\n        string: string to check\n\n    Returns:\n        `License` object or `None`\n\n    Examples:\n        ```python\n        result = xmllib.find_license_in_string(\"CC BY\")\n        # result == LicenseRecommended.CC.BY\n        ```\n\n        ```python\n        result = xmllib.find_license_in_string(\"Creative Commons Developing Nations 2.0 Generic Deed\")\n        # result == None\n        ```\n\n    Currently supported license formats:\n        - \"AI\" -&gt; LicenseRecommended.DSP.AI_GENERATED\n        - \"KI\" -&gt; LicenseRecommended.DSP.AI_GENERATED\n        - \"IA\" -&gt; LicenseRecommended.DSP.AI_GENERATED\n        - \"public domain\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"gemeinfrei\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"frei von Urheberrechten\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"urheberrechtsbefreit\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"libre de droits\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"domaine public\" -&gt; LicenseRecommended.DSP.PUBLIC_DOMAIN\n        - \"unknown\" -&gt; LicenseRecommended.DSP.UNKNOWN\n        - \"unbekannt\" -&gt; LicenseRecommended.DSP.UNKNOWN\n        - \"inconnu\" -&gt; LicenseRecommended.DSP.UNKNOWN\n        - \"CC BY\" -&gt; LicenseRecommended.CC.BY\n        - \"Creative Commons BY 4.0\" -&gt; LicenseRecommended.CC.BY\n        - \"CC 0 1.0\" -&gt; LicenseOther.Public.CC_0_1_0\n        - \"CC PDM 1.0\" -&gt; LicenseOther.Public.CC_PDM_1_0\n        - \"BORIS Standard License\" -&gt; LicenseOther.Various.BORIS_STANDARD\n        - \"LICENCE OUVERTE 2.0\" -&gt; LicenseOther.Various.FRANCE_OUVERTE\n    \"\"\"\n    if lic := _get_already_parsed_license(string):\n        return lic\n\n    sep = r\"[-_\\p{Zs}]+\"  # Zs = unicode category for space separator characters\n\n    if regex.search(rf\"\\b(Creative{sep}Commons|CC){sep}0({sep}1\\.0)?\\b\", string, flags=regex.IGNORECASE):\n        return LicenseOther.Public.CC_0_1_0\n\n    if regex.search(rf\"\\b(Creative{sep}Commons|CC){sep}PDM({sep}1\\.0)?\\b\", string, flags=regex.IGNORECASE):\n        return LicenseOther.Public.CC_PDM_1_0\n\n    if match := regex.search(\n        rf\"\\b(CC|Creative{sep}Commons)({sep}(BY|NC|ND|SA))*({sep}[\\d\\.]+)?\\b\", string, flags=regex.IGNORECASE\n    ):\n        return _find_cc_license(match.group(0))\n\n    if regex.search(r\"\\b(AI|IA|KI)\\b\", string, flags=regex.IGNORECASE):\n        return LicenseRecommended.DSP.AI_GENERATED\n\n    rgx_public_domain = (\n        rf\"\\b(public{sep}domain|gemeinfrei|frei{sep}von{sep}Urheberrechten|urheberrechtsbefreit|\"\n        rf\"libre{sep}de{sep}droits|domaine{sep}public)\\b\"\n    )\n    if regex.search(rgx_public_domain, string, flags=regex.IGNORECASE):\n        return LicenseRecommended.DSP.PUBLIC_DOMAIN\n\n    if regex.search(r\"\\b(unknown|unbekannt|inconnu)\\b\", string, flags=regex.IGNORECASE):\n        return LicenseRecommended.DSP.UNKNOWN\n\n    if regex.search(\n        rf\"\\b(BORIS|Bern{sep}Open{sep}Repository{sep}and{sep}Information{sep}System){sep}Standard{sep}License\\b\",\n        string,\n        flags=regex.IGNORECASE,\n    ):\n        return LicenseOther.Various.BORIS_STANDARD\n\n    if regex.search(\n        rf\"\\b(France{sep})?Licence{sep}ouverte({sep}2\\.0)?\\b\",\n        string,\n        flags=regex.IGNORECASE,\n    ):\n        return LicenseOther.Various.FRANCE_OUVERTE\n\n    return None\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/","title":"Using the <code>xmllib</code>","text":""},{"location":"DSP-TOOLS/xmllib-docs/overview/#overview","title":"Overview","text":"<p>The following code shows a minimal overview how you can use the <code>xmllib</code> to create an XML file for a mass import to DSP.</p> <p>It does not show, nor detail all the available functions and features,  but will give you links to the relevant and comprehensive documentation.</p> <p>The core functionality that the <code>xmllib</code> provides you is as follows:</p> <ul> <li>Classes that will help you construct the resources and add values to it.</li> <li>Functions that help you clean and transform your input.</li> <li>Functions that help you validate your input.</li> <li>Configuration options such as Permissions.</li> </ul> <p>We recommend you to create the import script for your data once your data model is relatively stable, as the construction of the code is highly dependent on the data model.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#code-example","title":"Code Example","text":"<p>Import the <code>xmllib</code></p> <pre><code>from dsp_tools import xmllib\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#creating-the-root","title":"Creating the Root","text":"<p>The <code>XMLRoot</code> is the central element where you add all your resources.</p> <p>See the documentation for details.</p> <pre><code>root = xmllib.XMLRoot.create_new(shortcode=\"0000\", default_ontology=\"onto\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#creating-a-resource","title":"Creating a Resource","text":"<p>Resources which were defined in the ontology JSON are created as follows.</p> <p>See the documentation for details.</p> <pre><code>resource = xmllib.Resource.create_new(\n    res_id=\"general_resource\",\n    restype=\":ResourceType\",\n    label=\"Title in the DSP-APP\",\n)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#adding-values-to-a-resource","title":"Adding Values to a Resource","text":"<p>Once you created a <code>Resource</code> you can add values to it. For each value type we provide three functionalities:</p> <p>Adding one value</p> <pre><code>resource = resource.add_integer(prop_name=\":hasInt\", value=1)\n</code></pre> <p>Adding multiple values</p> <pre><code>resource = resource.add_integer_multiple(prop_name=\":hasInt\", values=[1, 2, 3])\n</code></pre> <p>Adding optional values</p> <p>With this function we check if the input is empty, if it is the resource is returned as is, otherwise the value is added.</p> <pre><code>resource = resource.add_integer_optional(prop_name=\":hasInt\", value=None)\n</code></pre> <p>See the documentation for all options.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#reformatting-the-input-with-conversion-functions","title":"Reformatting the Input With Conversion Functions","text":"<p>We provide a number of functions to help convert your input. For example DSP requires a special format for dates.  Reformat  your input into the correct format.</p> <pre><code>formatted_date = xmllib.value_converters.reformat_date(\n    date=\"10.1990-11.1990\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n)\n\nresource = resource.add_date(prop_name=\":hasDate\", value=formatted_date)\n</code></pre> <p>Find further functions to convert values here</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#data-cleaning-functions","title":"Data Cleaning Functions","text":"<p>Oftentimes, similar data cleaning steps must be carried out again and again, before values can be added to the resource. For example, many strings extracted from data sources represent not one value, but a list of values. We provide the following function to clean your input:</p> <pre><code>input_string = \"This should be\\na list\\nof strings.\"\ncleaned_list = xmllib.create_list_from_input(\n    input_value=input_string,\n    separator=\"\\n\"\n)\n</code></pre> <p>You can find this and other functions to help you process your data here.</p> <p>Please contact us with a feature request if you need a function that doesn't exist yet in the <code>xmllib</code>,  especially if you feel that it may be generic enough to be helpful for other users.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#adding-a-file-to-a-resource","title":"Adding A File To a Resource","text":"<p>In the ontology you can  specify that a resource should have a file attached.</p> <p>You can add a file to the resource with the following function. Please note that only one file (or IIIF-URI, see below) is allowed per resource.</p> <pre><code>image_resource = image_resource.add_file(\n    filename=\"cat.tiff\",\n    license=xmllib.LicenseRecommended.CC.BY,\n    copyright_holder=\"Mouse University\",\n    authorship=[\"Minnie Mouse\"],\n)\n</code></pre> <p>We require that legal information be provided for resources with files.  While the copyright holder and authorships are free text fields, the license must be chosen from a predefined set. The recommended licenses are listed here, and some others are listed here.</p> <p>Please contact us if you required license is not available.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#adding-iiif-uris-to-a-resource","title":"Adding IIIF-URIs To a Resource","text":"<p>We provide the option to add a IIIF-URI to a Resource with the super-class <code>StillImageRepresentation</code>. This way you can reference images that are hosted on other servers.</p> <pre><code>resource = resource.add_iiif_uri(\n    iiif_uri=\"https://iiif.wellcomecollection.org/image/b20432033_B0008608.JP2/full/1338%2C/0/default.jpg\",\n    license=xmllib.LicenseRecommended.CC.BY_NC,\n    copyright_holder=\"Wellcome Collection\",\n    authorship=[\"Cavanagh, Annie\"]\n)\n</code></pre> <p>Please note that the IIIF-URI must follow the official syntax specified here.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#adding-a-comment-to-a-value","title":"Adding a Comment To a Value","text":"<p>It is possible to add a comment to individual values or files with the following parameter.</p> <pre><code>resource = resource.add_integer(\n    prop_name=\":hasInt\",\n    value=1,\n    comment=\"This text is a comment on this integer.\",\n)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#specifying-permissions","title":"Specifying Permissions","text":"<p>We recommend to specify permissions on the project level or on individual classes and properties.</p> <p>However, you can overrule the default permissions with the following designated parameter.</p> <pre><code>image_resource = image_resource.add_simpletext(\n    prop_name=\":hasRemark\",\n    value=\"Text only visible for the project.\",\n    permissions=xmllib.Permissions.PRIVATE,\n)\n</code></pre> <p>See the documentation for details.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#adding-a-resource-to-the-root","title":"Adding a Resource To the Root","text":"<p>Once you have added all information to the resource, you can add the resource to the root.</p> <pre><code>root = root.add_resource(resource)\n</code></pre> <p>Similarly to the values, we also provide the possibility to add multiple or optional resources to the root.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#creating-dsp-base-resources","title":"Creating DSP-Base Resources","text":"<p>DSP has four additional resource types that can be used out of the box without defining them in the data model.</p> <ul> <li><code>AudioSegmentResource</code> and    <code>VideoSegmentResource</code>    are resources that can be used to annotate a segment of an audio or video file of another resource.</li> <li><code>RegionResource</code> describes a region of a resource with an image file.</li> <li><code>LinkResource</code> is a collection of links to other resources.</li> </ul> <p>These four types have pre-defined properties,  which either are added directly when the resource is created or can be added afterwards with a dedicated function.</p> <pre><code>region = xmllib.RegionResource.create_new(\n    res_id=\"region_1\",\n    label=\"Region label\",\n    region_of=\"image_resource\"\n)\nregion = region.add_rectangle(\n    point1=(0.1, 0.1),\n    point2=(0.2, 0.2),\n)\n</code></pre> <p>Please consult the individual documentations (linked above) for details.</p>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#writing-the-file","title":"Writing the File","text":"<p>Once you have added all data, you can write the XML file with the following function.</p> <pre><code>root.write_file(\"data.xml\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/overview/#validating-your-input","title":"Validating Your Input","text":"<p>When your resources are created and data is added, the <code>xmllib</code> validates your input. In the background we use the validation functions specified here,  so there is no need to check your input manually.</p> <p>Due to this, the <code>xmllib</code> may print a large amount of information on your terminal. You can configure the warning level as described here.</p> <p>It is also possible to save the warnings into a csv file instead of the print message,  see here for details.</p>"},{"location":"DSP-TOOLS/xmllib-docs/permissions/","title":"Permissions","text":""},{"location":"DSP-TOOLS/xmllib-docs/permissions/#xmllib.models.permissions.Permissions","title":"<code>Permissions</code>","text":"<p>               Bases: <code>Enum</code></p> <p>Options of permissions for resources and values:</p> <ul> <li><code>PROJECT_SPECIFIC_PERMISSIONS</code>: the permissions defined on project level will be applied</li> <li><code>PUBLIC</code>: the resource/value is visible for everyone</li> <li><code>PRIVATE</code>: the resource/value is only visible for project members</li> <li><code>LIMITED_VIEW</code>: the resource/value is visible for everyone,   but images are blurred/watermarked for non-project members</li> </ul> <p>Deprecated terms:</p> <ul> <li><code>OPEN</code>: use <code>PUBLIC</code> instead</li> <li><code>RESTRICTED</code>: use <code>PRIVATE</code> instead</li> <li><code>RESTRICTED_VIEW</code>: use <code>LIMITED_VIEW</code> instead</li> </ul> <p>Examples:</p> <pre><code>resource = xmllib.Resource.create_new(\n    res_id=\"ID\",\n    restype=\":ResourceType\",\n    label=\"label\",\n    permissions=xmllib.Permissions.PRIVATE,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/permissions.py</code> <pre><code>class Permissions(Enum):\n    \"\"\"\n    Options of permissions for resources and values:\n\n    - `PROJECT_SPECIFIC_PERMISSIONS`: the permissions defined on project level will be applied\n    - `PUBLIC`: the resource/value is visible for everyone\n    - `PRIVATE`: the resource/value is only visible for project members\n    - `LIMITED_VIEW`: the resource/value is visible for everyone,\n      but images are blurred/watermarked for non-project members\n\n    Deprecated terms:\n\n    - `OPEN`: use `PUBLIC` instead\n    - `RESTRICTED`: use `PRIVATE` instead\n    - `RESTRICTED_VIEW`: use `LIMITED_VIEW` instead\n\n    Examples:\n        ```python\n        resource = xmllib.Resource.create_new(\n            res_id=\"ID\",\n            restype=\":ResourceType\",\n            label=\"label\",\n            permissions=xmllib.Permissions.PRIVATE,\n        )\n        ```\n    \"\"\"\n\n    PROJECT_SPECIFIC_PERMISSIONS = \"\"\n    PUBLIC = \"public\"\n    PRIVATE = \"private\"\n    LIMITED_VIEW = \"limited_view\"\n\n    # Deprecated terminology\n    OPEN = \"open\"\n    RESTRICTED = \"restricted\"\n    RESTRICTED_VIEW = \"restricted-view\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/","title":"Resource","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>@dataclass\nclass Resource:\n    res_id: str\n    restype: str\n    label: str\n    values: list[Value] = field(default_factory=list)\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS\n    file_value: AbstractFileValue | None = None\n    migration_metadata: MigrationMetadata | None = None\n\n    @staticmethod\n    def create_new(\n        res_id: str,\n        restype: str,\n        label: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    ) -&gt; Resource:\n        \"\"\"\n        Create a new resource.\n\n        Tip:\n            Use the helper function [`make_xsd_compatible_id()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.make_xsd_compatible_id)\n            to transform the resource ID into a format that meets the requirements for an XML ID.\n\n        Args:\n            res_id: resource ID\n            restype: resource type\n            label: resource label\n            permissions: optional permissions of this resource\n\n        Returns:\n            Resource\n\n        Examples:\n            ```python\n            resource = xmllib.Resource.create_new(\n                res_id=\"ID\",\n                restype=\":ResourceType\",\n                label=\"label\",\n            )\n            ```\n\n            ```python\n            # resource with restricted permissions\n            resource = xmllib.Resource.create_new(\n                res_id=\"ID\",\n                restype=\":ResourceType\",\n                label=\"label\",\n                permissions=xmllib.Permissions.PRIVATE,\n            )\n            ```\n        \"\"\"\n        if not is_valid_resource_id(res_id):\n            res_id = str(res_id)\n            emit_xmllib_input_type_mismatch_warning(\n                expected_type=\"xsd:ID\", value=res_id, res_id=res_id, value_field=\"resource ID\"\n            )\n        if not is_nonempty_value(restype):\n            restype = str(restype)\n            emit_xmllib_input_type_mismatch_warning(\n                expected_type=\"resource type\", value=restype, res_id=res_id, value_field=\"restype\"\n            )\n        lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n\n        return Resource(\n            res_id=res_id,\n            restype=restype,\n            label=lbl,\n            permissions=permissions,\n        )\n\n    #######################\n    # BooleanValue\n    #######################\n\n    def add_bool(\n        self,\n        prop_name: str,\n        value: bool | str | int | float,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a boolean value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#boolean)\n\n        Conversions:\n         - The conversion is case-insensitive, meaning that the words can also be capitalised.\n         - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `false`\n         - `true`, `1`, `1.0`, `yes`, `oui`, `ja` -&gt; `true`\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_bool(\n                prop_name=\":propName\",\n                value=True\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            BooleanValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_bool_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#boolean)\n\n        Conversions:\n         - The conversion is case-insensitive, meaning that the words can also be capitalised.\n         - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `false`\n         - `true`, `1`, `1.0`, `yes`, `oui`, `ja` -&gt; `true`\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_bool_optional(\n                prop_name=\":propName\",\n                value=True\n            )\n            ```\n\n            ```python\n            resource = resource.add_bool_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_bool(value=value, prop_name=prop_name, permissions=permissions, comment=comment)\n        return self\n\n    #######################\n    # ColorValue\n    #######################\n\n    def add_color(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a color value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_color(\n                prop_name=\":propName\",\n                value=\"#00ff66\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            ColorValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_color_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several color values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_color_multiple(\n                prop_name=\":propName\",\n                values=[\"#00ff66\", \"#00ff55\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_color(prop_name, v, permissions, comment)\n        return self\n\n    def add_color_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_color_optional(\n                prop_name=\":propName\",\n                value=\"#00ff66\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_color_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_color(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # DateValue\n    #######################\n\n    def add_date(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a date value to the resource.\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n        Tip:\n            Use one of the helper functions [`reformat_date()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.reformat_date)\n            or [`find_dates_in_string()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.find_dates_in_string)\n            to transform a date into the DSP conform format.\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_date(\n                prop_name=\":propName\",\n                value=\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            DateValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_date_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several date values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_date_multiple(\n                prop_name=\":propName\",\n                values=[\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\", \"CE:1849:CE:1850\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_date(prop_name, v, permissions, comment)\n        return self\n\n    def add_date_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_date_optional(\n                prop_name=\":propName\",\n                value=\"CE:1849:CE:1850\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_date_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_date(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # DecimalValue\n    #######################\n\n    def add_decimal(\n        self,\n        prop_name: str,\n        value: float | int | str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a decimal value to the resource.\n        If the value is provided as string, it must be convertible to integer or float.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_decimal(\n                prop_name=\":propName\",\n                value=1.4,\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            DecimalValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_decimal_multiple(\n        self,\n        prop_name: str,\n        values: Collection[float | int | str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several decimal values to the resource.\n        If the values are provided as string, they must be convertible to integer or float.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_decimal_multiple(\n                prop_name=\":propName\",\n                values=[1.4, 2.9],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_decimal(prop_name, v, permissions, comment)\n        return self\n\n    def add_decimal_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n        If the value is provided as string, it must be convertible to integer or float.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_decimal_optional(\n                prop_name=\":propName\",\n                value=1.0,\n            )\n            ```\n\n            ```python\n            resource = resource.add_decimal_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_decimal(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # GeonameValue\n    #######################\n\n    def add_geoname(\n        self,\n        prop_name: str,\n        value: int | str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a [geonames.org](https://www.geonames.org/) value to the resource.\n        The [geonames.org](https://www.geonames.org/) identifier must be provided as integer\n        or string that is convertible to integer.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_geoname(\n                prop_name=\":propName\",\n                value=\"2761369\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            GeonameValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_geoname_multiple(\n        self,\n        prop_name: str,\n        values: Collection[int | str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several [geonames.org](https://www.geonames.org/) values to the resource.\n        The [geonames.org](https://www.geonames.org/) identifiers must be provided as integers\n        or strings that are convertible to integers.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_geoname_multiple(\n                prop_name=\":propName\",\n                values=[\"2761369\", \"2661604\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_geoname(prop_name, v, permissions, comment)\n        return self\n\n    def add_geoname_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n        The [geonames.org](https://www.geonames.org/) identifier must be provided as integer\n        or string that is convertible to integer.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_geoname_optional(\n                prop_name=\":propName\",\n                value=\"2661604\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_geoname_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_geoname(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # IntValue\n    #######################\n\n    def add_integer(\n        self,\n        prop_name: str,\n        value: int | str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add an integer value to the resource.\n        If the value is provided as string, it must be convertible to integer.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_integer(\n                prop_name=\":propName\",\n                value=399,\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            IntValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_integer_multiple(\n        self,\n        prop_name: str,\n        values: Collection[int | str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several integer values to the resource.\n        If the values are provided as string, they must be convertible to integer.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_integer_multiple(\n                prop_name=\":propName\",\n                values=[24, \"66\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_integer(prop_name, v, permissions, comment)\n        return self\n\n    def add_integer_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n        If the value is provided as string, it must be convertible to integer.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_integer_optional(\n                prop_name=\":propName\",\n                value=\"2604\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_integer_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_integer(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # LinkValue\n    #######################\n\n    def add_link(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a link value to the resource, in the form of an ID of another resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n        Args:\n            prop_name: name of the property\n            value: target resource ID\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_link(\n                prop_name=\":propName\",\n                value=\"target_resource_id\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            LinkValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_link_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several link values to the resource, in the form of IDs of other resources.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n        Args:\n            prop_name: name of the property\n            values: list of target resources IDs\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_link_multiple(\n                prop_name=\":propName\",\n                values=[\"target_resource_id_1\", \"target_resource_id_2\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_link(prop_name, v, permissions, comment)\n        return self\n\n    def add_link_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n        If non-empty, the value must be an ID of another resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n        Args:\n            prop_name: name of the property\n            value: target resource ID or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_link_optional(\n                prop_name=\":propName\",\n                value=\"target_resource_id\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_link_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_link(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # ListValue\n    #######################\n\n    def add_list(\n        self,\n        prop_name: str,\n        list_name: str | int | float,\n        value: str | int | float,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a list value to the resource, i.e. a name of a list node.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n        Tip:\n            Use the helper [`ListLookup`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup)\n            to retrieve the correct list name based on the label.\n\n        Args:\n            prop_name: name of the property\n            list_name: name of the list (N.B. not the label, but the name of the list)\n            value: name of a list node (N.B. not the label, but the name of the list node)\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_list(\n                prop_name=\":propName\",\n                list_name=\"listName\",\n                value=\"nodeName\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            ListValue.new(\n                value=value,\n                list_name=list_name,\n                prop_name=prop_name,\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_list_multiple(\n        self,\n        prop_name: str,\n        list_name: str | int | float,\n        values: Collection[str | int | float],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several list values to the resource, i.e. names of list nodes.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n        Args:\n            prop_name: name of the property\n            list_name: name of the list (N.B. not the label, but the name of the list)\n            values: names of list nodes (N.B. not the labels, but the names of the list nodes)\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_list_multiple(\n                prop_name=\":propName\",\n                list_name=\"listName\",\n                values=[\"nodeName_1\", \"nodeName_2\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_list(prop_name, list_name, v, permissions, comment)\n        return self\n\n    def add_list_optional(\n        self,\n        prop_name: str,\n        list_name: str | int | float,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n        Args:\n            prop_name: name of the property\n            list_name: name of the list (N.B. not the label, but the name of the list)\n            value: name of a list node (N.B. not the label, but the name of the list node) or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_list_optional(\n                prop_name=\":propName\",\n                list_name=\"listName\",\n                value=\"nodeName\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_list_optional(\n                prop_name=\":propName\",\n                list_name=\"listName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_list(prop_name, list_name, value, permissions, comment)\n        return self\n\n    #######################\n    # TextValue: SimpleText\n    #######################\n\n    def add_simpletext(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a simple text value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_simpletext(\n                prop_name=\":propName\",\n                value=\"text\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            SimpleText.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_simpletext_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several simple text values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_simpletext_multiple(\n                prop_name=\":propName\",\n                values=[\"text 1\", \"text 2\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_simpletext(prop_name, v, permissions, comment)\n        return self\n\n    def add_simpletext_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_simpletext_optional(\n                prop_name=\":propName\",\n                value=\"text\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_simpletext_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_simpletext(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # TextValue: Textarea\n    #######################\n\n    def add_textarea(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a textarea value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_textarea(\n                prop_name=\":propName\",\n                value=\"text\",\n            )\n            ```\n        \"\"\"\n        self.add_simpletext(prop_name, value, permissions, comment)\n        return self\n\n    def add_textarea_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several textarea values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_textarea_multiple(\n                prop_name=\":propName\",\n                values=[\"text 1\", \"text 2\"],\n            )\n            ```\n        \"\"\"\n        self.add_simpletext_multiple(prop_name, values, permissions, comment)\n        return self\n\n    def add_textarea_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_textarea_optional(\n                prop_name=\":propName\",\n                value=\"text\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_textarea_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        self.add_simpletext_optional(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # TextValue: Richtext\n    #######################\n\n    def add_richtext(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a rich text value to the resource.\n        Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n        as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n        Only the documented tags are allowed.\n\n        Conversions:\n            By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n            Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n            [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_richtext(\n                prop_name=\":propName\",\n                value=\"line 1\\\\nline 2\",\n            )\n            ```\n\n            ```python\n            # changing the replacement options for newlines `\\\\n`\n            resource = resource.add_richtext(\n                prop_name=\":propName\",\n                value=\"line 1\\\\nline 2\",\n                newline_replacement=xmllib.NewlineReplacement.PARAGRAPH,\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=value,\n                prop_name=prop_name,\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_richtext_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several rich text values to the resource.\n        Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n        as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n        Only the documented tags are allowed.\n\n        Conversions:\n            By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n            Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n            [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_richtext_multiple(\n                prop_name=\":propName\",\n                values=[\"&lt;strong&gt;Bold text&lt;/strong&gt;\", \"text 2\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        self.values.extend(\n            [\n                Richtext.new(\n                    value=v,\n                    prop_name=prop_name,\n                    permissions=permissions,\n                    comment=comment,\n                    resource_id=self.res_id,\n                    newline_replacement=newline_replacement,\n                )\n                for v in vals\n            ]\n        )\n        return self\n\n    def add_richtext_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n        Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n        as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n        Only the documented tags are allowed.\n\n        Conversions:\n            By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n            Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n            [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_richtext_optional(\n                prop_name=\":propName\",\n                value=\"&lt;strong&gt;Bold text&lt;/strong&gt;\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_richtext_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            return self.add_richtext(prop_name, value, permissions, comment, newline_replacement)\n        return self\n\n    #######################\n    # TimeValue\n    #######################\n\n    def add_time(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a time value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_time(\n                prop_name=\":propName\",\n                value=\"2019-10-23T13:45:12Z\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            TimeValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_time_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several time values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_time_multiple(\n                prop_name=\":propName\",\n                values=[\"2019-10-23T13:45:12Z\", \"2009-10-10T12:00:00-05:00\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_time(prop_name, v, permissions, comment)\n        return self\n\n    def add_time_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_time_optional(\n                prop_name=\":propName\",\n                value=\"2019-10-23T13:45:12Z\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_time_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_time(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # UriValue\n    #######################\n\n    def add_uri(\n        self,\n        prop_name: str,\n        value: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a URI value to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n        Args:\n            prop_name: name of the property\n            value: value to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_uri(\n                prop_name=\":propName\",\n                value=\"https://dasch.swiss\",\n            )\n            ```\n        \"\"\"\n        self.values.append(\n            UriValue.new(\n                value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n            )\n        )\n        return self\n\n    def add_uri_multiple(\n        self,\n        prop_name: str,\n        values: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add several URI values to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n        Args:\n            prop_name: name of the property\n            values: values to add\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added values\n\n        Examples:\n            ```python\n            resource = resource.add_uri_multiple(\n                prop_name=\":propName\",\n                values=[\"https://dasch.swiss\", \"https://docs.dasch.swiss\"],\n            )\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n        for v in vals:\n            self.add_uri(prop_name, v, permissions, comment)\n        return self\n\n    def add_uri_optional(\n        self,\n        prop_name: str,\n        value: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n        Args:\n            prop_name: name of the property\n            value: value to add or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n        Examples:\n            ```python\n            resource = resource.add_uri_optional(\n                prop_name=\":propName\",\n                value=\"https://dasch.swiss\",\n            )\n            ```\n\n            ```python\n            resource = resource.add_uri_optional(\n                prop_name=\":propName\",\n                value=None,\n            )\n            ```\n        \"\"\"\n        if is_nonempty_value(value):\n            self.add_uri(prop_name, value, permissions, comment)\n        return self\n\n    #######################\n    # AbstractFileValue\n    #######################\n\n    def add_file(\n        self,\n        filename: str | Path,\n        license: License | None = None,\n        copyright_holder: str | None = None,\n        authorship: list[str] | None = None,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a file (bitstream) to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#bitstream)\n\n        Args:\n            filename: path to the file\n            license: License of the file (predefined or custom) [see the documentation for the options.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/).\n                A license states the circumstances how you are allowed to share/reuse something.\n            copyright_holder: The person or institution who owns the economic rights of something.\n            authorship: The (natural) person who authored something.\n            permissions: optional permissions of this file\n            comment: optional comment\n\n        Raises:\n            XmllibInputError: If the resource already has a file or IIIF URI value\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_file(\n                filename=\"images/cat.jpg\",\n                license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n                copyright_holder=\"Meow University\",\n                authorship=[\"Kitty Meow\"],\n            )\n            ```\n\n            ```python\n            # a file with restricted view permissions\n            resource = resource.add_file(\n                filename=\"images/dog.jpg\",\n                license=xmllib.LicenseRecommended.CC.BY_NC_ND,\n                copyright_holder=\"Bark University\",\n                authorship=[\"Bark McDog\"],\n                permissions=xmllib.Permissions.LIMITED_VIEW,\n            )\n            ```\n        \"\"\"\n        if self.file_value:\n            msg_info = MessageInfo(\n                f\"This resource already contains a file with the name: '{self.file_value.value}'. \"\n                f\"The new file with the name '{filename}' cannot be added.\",\n                resource_id=self.res_id,\n                field=\"file / iiif-uri\",\n            )\n            raise_xmllib_input_error(msg_info)\n        meta = Metadata.new(\n            license=license,\n            copyright_holder=copyright_holder,\n            authorship=authorship,\n            permissions=permissions,\n            resource_id=self.res_id,\n        )\n        self.file_value = FileValue.new(value=filename, metadata=meta, comment=comment, resource_id=self.res_id)\n        return self\n\n    def add_iiif_uri(\n        self,\n        iiif_uri: str,\n        license: License | None = None,\n        copyright_holder: str | None = None,\n        authorship: list[str] | None = None,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; Resource:\n        \"\"\"\n        Add a IIIF URI to the resource.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#iiif-uri)\n\n        Args:\n            iiif_uri: valid IIIF URI\n            license: License of the file (predefined or custom) [see the documentation for the options.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/).\n                A license states the circumstances how you are allowed to share/reuse something.\n            copyright_holder: The person or institution who owns the economic rights of something.\n            authorship: The (natural) person who authored something.\n            permissions: optional permissions of this file\n            comment: optional comment\n\n        Raises:\n            XmllibInputError: If the resource already has a file or IIIF URI value\n\n        Returns:\n            The original resource, with the added value\n\n        Examples:\n            ```python\n            resource = resource.add_iiif_uri(\n                iiif_uri=\"https://iiif.wellcomecollection.org/image/b20432033_B0008608.JP2/full/1338%2C/0/default.jpg\",\n                license=xmllib.LicenseRecommended.CC.BY_NC,\n                copyright_holder=\"Wellcome Collection\",\n                authorship=[\"Cavanagh, Annie\"]\n            )\n            ```\n        \"\"\"\n        if self.file_value:\n            msg_info = MessageInfo(\n                f\"This resource already contains a file with the name: '{self.file_value.value}'. \"\n                f\"The new file with the name '{iiif_uri}' cannot be added.\",\n                resource_id=self.res_id,\n                field=\"file / iiif-uri\",\n            )\n            raise_xmllib_input_error(msg_info)\n        meta = Metadata.new(\n            license=license,\n            copyright_holder=copyright_holder,\n            authorship=authorship,\n            permissions=permissions,\n            resource_id=self.res_id,\n        )\n        self.file_value = IIIFUri.new(value=iiif_uri, metadata=meta, comment=comment, resource_id=self.res_id)\n        return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.create_new","title":"<code>create_new</code>","text":"<p>Create a new resource.</p> Tip <p>Use the helper function <code>make_xsd_compatible_id()</code> to transform the resource ID into a format that meets the requirements for an XML ID.</p> <p>Parameters:</p> Name Type Description Default <code>res_id</code> <code>str</code> <p>resource ID</p> required <code>restype</code> <code>str</code> <p>resource type</p> required <code>label</code> <code>str</code> <p>resource label</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this resource</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <p>Returns:</p> Type Description <code>Resource</code> <p>Resource</p> <p>Examples:</p> <pre><code>resource = xmllib.Resource.create_new(\n    res_id=\"ID\",\n    restype=\":ResourceType\",\n    label=\"label\",\n)\n</code></pre> <pre><code># resource with restricted permissions\nresource = xmllib.Resource.create_new(\n    res_id=\"ID\",\n    restype=\":ResourceType\",\n    label=\"label\",\n    permissions=xmllib.Permissions.PRIVATE,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>@staticmethod\ndef create_new(\n    res_id: str,\n    restype: str,\n    label: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n) -&gt; Resource:\n    \"\"\"\n    Create a new resource.\n\n    Tip:\n        Use the helper function [`make_xsd_compatible_id()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.make_xsd_compatible_id)\n        to transform the resource ID into a format that meets the requirements for an XML ID.\n\n    Args:\n        res_id: resource ID\n        restype: resource type\n        label: resource label\n        permissions: optional permissions of this resource\n\n    Returns:\n        Resource\n\n    Examples:\n        ```python\n        resource = xmllib.Resource.create_new(\n            res_id=\"ID\",\n            restype=\":ResourceType\",\n            label=\"label\",\n        )\n        ```\n\n        ```python\n        # resource with restricted permissions\n        resource = xmllib.Resource.create_new(\n            res_id=\"ID\",\n            restype=\":ResourceType\",\n            label=\"label\",\n            permissions=xmllib.Permissions.PRIVATE,\n        )\n        ```\n    \"\"\"\n    if not is_valid_resource_id(res_id):\n        res_id = str(res_id)\n        emit_xmllib_input_type_mismatch_warning(\n            expected_type=\"xsd:ID\", value=res_id, res_id=res_id, value_field=\"resource ID\"\n        )\n    if not is_nonempty_value(restype):\n        restype = str(restype)\n        emit_xmllib_input_type_mismatch_warning(\n            expected_type=\"resource type\", value=restype, res_id=res_id, value_field=\"restype\"\n        )\n    lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n\n    return Resource(\n        res_id=res_id,\n        restype=restype,\n        label=lbl,\n        permissions=permissions,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_bool","title":"<code>add_bool</code>","text":"<p>Add a boolean value to the resource.</p> <p>See XML documentation for details</p> Conversions <ul> <li>The conversion is case-insensitive, meaning that the words can also be capitalised.</li> <li><code>false</code>, <code>0</code>, <code>0.0</code>, <code>no</code>, <code>non</code>, <code>nein</code> -&gt; <code>false</code></li> <li><code>true</code>, <code>1</code>, <code>1.0</code>, <code>yes</code>, <code>oui</code>, <code>ja</code> -&gt; <code>true</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>bool | str | int | float</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_bool(\n    prop_name=\":propName\",\n    value=True\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_bool(\n    self,\n    prop_name: str,\n    value: bool | str | int | float,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a boolean value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#boolean)\n\n    Conversions:\n     - The conversion is case-insensitive, meaning that the words can also be capitalised.\n     - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `false`\n     - `true`, `1`, `1.0`, `yes`, `oui`, `ja` -&gt; `true`\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_bool(\n            prop_name=\":propName\",\n            value=True\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        BooleanValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_bool_optional","title":"<code>add_bool_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> Conversions <ul> <li>The conversion is case-insensitive, meaning that the words can also be capitalised.</li> <li><code>false</code>, <code>0</code>, <code>0.0</code>, <code>no</code>, <code>non</code>, <code>nein</code> -&gt; <code>false</code></li> <li><code>true</code>, <code>1</code>, <code>1.0</code>, <code>yes</code>, <code>oui</code>, <code>ja</code> -&gt; <code>true</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_bool_optional(\n    prop_name=\":propName\",\n    value=True\n)\n</code></pre> <pre><code>resource = resource.add_bool_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_bool_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#boolean)\n\n    Conversions:\n     - The conversion is case-insensitive, meaning that the words can also be capitalised.\n     - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `false`\n     - `true`, `1`, `1.0`, `yes`, `oui`, `ja` -&gt; `true`\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_bool_optional(\n            prop_name=\":propName\",\n            value=True\n        )\n        ```\n\n        ```python\n        resource = resource.add_bool_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_bool(value=value, prop_name=prop_name, permissions=permissions, comment=comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_color","title":"<code>add_color</code>","text":"<p>Add a color value to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_color(\n    prop_name=\":propName\",\n    value=\"#00ff66\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_color(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a color value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_color(\n            prop_name=\":propName\",\n            value=\"#00ff66\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        ColorValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_color_multiple","title":"<code>add_color_multiple</code>","text":"<p>Add several color values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_color_multiple(\n    prop_name=\":propName\",\n    values=[\"#00ff66\", \"#00ff55\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_color_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several color values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_color_multiple(\n            prop_name=\":propName\",\n            values=[\"#00ff66\", \"#00ff55\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_color(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_color_optional","title":"<code>add_color_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_color_optional(\n    prop_name=\":propName\",\n    value=\"#00ff66\",\n)\n</code></pre> <pre><code>resource = resource.add_color_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_color_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#color)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_color_optional(\n            prop_name=\":propName\",\n            value=\"#00ff66\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_color_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_color(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_date","title":"<code>add_date</code>","text":"<p>Add a date value to the resource. See XML documentation for details</p> Tip <p>Use one of the helper functions <code>reformat_date()</code> or <code>find_dates_in_string()</code> to transform a date into the DSP conform format.</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_date(\n    prop_name=\":propName\",\n    value=\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_date(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a date value to the resource.\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n    Tip:\n        Use one of the helper functions [`reformat_date()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.reformat_date)\n        or [`find_dates_in_string()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.find_dates_in_string)\n        to transform a date into the DSP conform format.\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_date(\n            prop_name=\":propName\",\n            value=\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        DateValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_date_multiple","title":"<code>add_date_multiple</code>","text":"<p>Add several date values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_date_multiple(\n    prop_name=\":propName\",\n    values=[\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\", \"CE:1849:CE:1850\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_date_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several date values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_date_multiple(\n            prop_name=\":propName\",\n            values=[\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\", \"CE:1849:CE:1850\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_date(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_date_optional","title":"<code>add_date_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_date_optional(\n    prop_name=\":propName\",\n    value=\"CE:1849:CE:1850\",\n)\n</code></pre> <pre><code>resource = resource.add_date_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_date_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_date_optional(\n            prop_name=\":propName\",\n            value=\"CE:1849:CE:1850\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_date_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_date(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_decimal","title":"<code>add_decimal</code>","text":"<p>Add a decimal value to the resource. If the value is provided as string, it must be convertible to integer or float.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>float | int | str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_decimal(\n    prop_name=\":propName\",\n    value=1.4,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_decimal(\n    self,\n    prop_name: str,\n    value: float | int | str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a decimal value to the resource.\n    If the value is provided as string, it must be convertible to integer or float.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_decimal(\n            prop_name=\":propName\",\n            value=1.4,\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        DecimalValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_decimal_multiple","title":"<code>add_decimal_multiple</code>","text":"<p>Add several decimal values to the resource. If the values are provided as string, they must be convertible to integer or float.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[float | int | str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_decimal_multiple(\n    prop_name=\":propName\",\n    values=[1.4, 2.9],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_decimal_multiple(\n    self,\n    prop_name: str,\n    values: Collection[float | int | str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several decimal values to the resource.\n    If the values are provided as string, they must be convertible to integer or float.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_decimal_multiple(\n            prop_name=\":propName\",\n            values=[1.4, 2.9],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_decimal(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_decimal_optional","title":"<code>add_decimal_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged. If the value is provided as string, it must be convertible to integer or float.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_decimal_optional(\n    prop_name=\":propName\",\n    value=1.0,\n)\n</code></pre> <pre><code>resource = resource.add_decimal_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_decimal_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n    If the value is provided as string, it must be convertible to integer or float.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#decimal)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_decimal_optional(\n            prop_name=\":propName\",\n            value=1.0,\n        )\n        ```\n\n        ```python\n        resource = resource.add_decimal_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_decimal(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_geoname","title":"<code>add_geoname</code>","text":"<p>Add a geonames.org value to the resource. The geonames.org identifier must be provided as integer or string that is convertible to integer.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>int | str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_geoname(\n    prop_name=\":propName\",\n    value=\"2761369\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_geoname(\n    self,\n    prop_name: str,\n    value: int | str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a [geonames.org](https://www.geonames.org/) value to the resource.\n    The [geonames.org](https://www.geonames.org/) identifier must be provided as integer\n    or string that is convertible to integer.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_geoname(\n            prop_name=\":propName\",\n            value=\"2761369\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        GeonameValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_geoname_multiple","title":"<code>add_geoname_multiple</code>","text":"<p>Add several geonames.org values to the resource. The geonames.org identifiers must be provided as integers or strings that are convertible to integers.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[int | str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_geoname_multiple(\n    prop_name=\":propName\",\n    values=[\"2761369\", \"2661604\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_geoname_multiple(\n    self,\n    prop_name: str,\n    values: Collection[int | str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several [geonames.org](https://www.geonames.org/) values to the resource.\n    The [geonames.org](https://www.geonames.org/) identifiers must be provided as integers\n    or strings that are convertible to integers.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_geoname_multiple(\n            prop_name=\":propName\",\n            values=[\"2761369\", \"2661604\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_geoname(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_geoname_optional","title":"<code>add_geoname_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged. The geonames.org identifier must be provided as integer or string that is convertible to integer.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_geoname_optional(\n    prop_name=\":propName\",\n    value=\"2661604\",\n)\n</code></pre> <pre><code>resource = resource.add_geoname_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_geoname_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n    The [geonames.org](https://www.geonames.org/) identifier must be provided as integer\n    or string that is convertible to integer.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geoname)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_geoname_optional(\n            prop_name=\":propName\",\n            value=\"2661604\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_geoname_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_geoname(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_integer","title":"<code>add_integer</code>","text":"<p>Add an integer value to the resource. If the value is provided as string, it must be convertible to integer.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>int | str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_integer(\n    prop_name=\":propName\",\n    value=399,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_integer(\n    self,\n    prop_name: str,\n    value: int | str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add an integer value to the resource.\n    If the value is provided as string, it must be convertible to integer.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_integer(\n            prop_name=\":propName\",\n            value=399,\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        IntValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_integer_multiple","title":"<code>add_integer_multiple</code>","text":"<p>Add several integer values to the resource. If the values are provided as string, they must be convertible to integer.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[int | str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_integer_multiple(\n    prop_name=\":propName\",\n    values=[24, \"66\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_integer_multiple(\n    self,\n    prop_name: str,\n    values: Collection[int | str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several integer values to the resource.\n    If the values are provided as string, they must be convertible to integer.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_integer_multiple(\n            prop_name=\":propName\",\n            values=[24, \"66\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_integer(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_integer_optional","title":"<code>add_integer_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged. If the value is provided as string, it must be convertible to integer.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_integer_optional(\n    prop_name=\":propName\",\n    value=\"2604\",\n)\n</code></pre> <pre><code>resource = resource.add_integer_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_integer_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n    If the value is provided as string, it must be convertible to integer.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#integer)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_integer_optional(\n            prop_name=\":propName\",\n            value=\"2604\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_integer_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_integer(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_link","title":"<code>add_link</code>","text":"<p>Add a link value to the resource, in the form of an ID of another resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>target resource ID</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_link(\n    prop_name=\":propName\",\n    value=\"target_resource_id\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_link(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a link value to the resource, in the form of an ID of another resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n    Args:\n        prop_name: name of the property\n        value: target resource ID\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_link(\n            prop_name=\":propName\",\n            value=\"target_resource_id\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        LinkValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_link_multiple","title":"<code>add_link_multiple</code>","text":"<p>Add several link values to the resource, in the form of IDs of other resources.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>list of target resources IDs</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_link_multiple(\n    prop_name=\":propName\",\n    values=[\"target_resource_id_1\", \"target_resource_id_2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_link_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several link values to the resource, in the form of IDs of other resources.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n    Args:\n        prop_name: name of the property\n        values: list of target resources IDs\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_link_multiple(\n            prop_name=\":propName\",\n            values=[\"target_resource_id_1\", \"target_resource_id_2\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_link(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_link_optional","title":"<code>add_link_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged. If non-empty, the value must be an ID of another resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>target resource ID or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_link_optional(\n    prop_name=\":propName\",\n    value=\"target_resource_id\",\n)\n</code></pre> <pre><code>resource = resource.add_link_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_link_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n    If non-empty, the value must be an ID of another resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#resptr)\n\n    Args:\n        prop_name: name of the property\n        value: target resource ID or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_link_optional(\n            prop_name=\":propName\",\n            value=\"target_resource_id\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_link_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_link(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_list","title":"<code>add_list</code>","text":"<p>Add a list value to the resource, i.e. a name of a list node.</p> <p>See XML documentation for details</p> Tip <p>Use the helper <code>ListLookup</code> to retrieve the correct list name based on the label.</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>list_name</code> <code>str | int | float</code> <p>name of the list (N.B. not the label, but the name of the list)</p> required <code>value</code> <code>str | int | float</code> <p>name of a list node (N.B. not the label, but the name of the list node)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_list(\n    prop_name=\":propName\",\n    list_name=\"listName\",\n    value=\"nodeName\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_list(\n    self,\n    prop_name: str,\n    list_name: str | int | float,\n    value: str | int | float,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a list value to the resource, i.e. a name of a list node.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n    Tip:\n        Use the helper [`ListLookup`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.ListLookup)\n        to retrieve the correct list name based on the label.\n\n    Args:\n        prop_name: name of the property\n        list_name: name of the list (N.B. not the label, but the name of the list)\n        value: name of a list node (N.B. not the label, but the name of the list node)\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_list(\n            prop_name=\":propName\",\n            list_name=\"listName\",\n            value=\"nodeName\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        ListValue.new(\n            value=value,\n            list_name=list_name,\n            prop_name=prop_name,\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_list_multiple","title":"<code>add_list_multiple</code>","text":"<p>Add several list values to the resource, i.e. names of list nodes.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>list_name</code> <code>str | int | float</code> <p>name of the list (N.B. not the label, but the name of the list)</p> required <code>values</code> <code>Collection[str | int | float]</code> <p>names of list nodes (N.B. not the labels, but the names of the list nodes)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_list_multiple(\n    prop_name=\":propName\",\n    list_name=\"listName\",\n    values=[\"nodeName_1\", \"nodeName_2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_list_multiple(\n    self,\n    prop_name: str,\n    list_name: str | int | float,\n    values: Collection[str | int | float],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several list values to the resource, i.e. names of list nodes.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n    Args:\n        prop_name: name of the property\n        list_name: name of the list (N.B. not the label, but the name of the list)\n        values: names of list nodes (N.B. not the labels, but the names of the list nodes)\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_list_multiple(\n            prop_name=\":propName\",\n            list_name=\"listName\",\n            values=[\"nodeName_1\", \"nodeName_2\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_list(prop_name, list_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_list_optional","title":"<code>add_list_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>list_name</code> <code>str | int | float</code> <p>name of the list (N.B. not the label, but the name of the list)</p> required <code>value</code> <code>Any</code> <p>name of a list node (N.B. not the label, but the name of the list node) or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_list_optional(\n    prop_name=\":propName\",\n    list_name=\"listName\",\n    value=\"nodeName\",\n)\n</code></pre> <pre><code>resource = resource.add_list_optional(\n    prop_name=\":propName\",\n    list_name=\"listName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_list_optional(\n    self,\n    prop_name: str,\n    list_name: str | int | float,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#list)\n\n    Args:\n        prop_name: name of the property\n        list_name: name of the list (N.B. not the label, but the name of the list)\n        value: name of a list node (N.B. not the label, but the name of the list node) or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_list_optional(\n            prop_name=\":propName\",\n            list_name=\"listName\",\n            value=\"nodeName\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_list_optional(\n            prop_name=\":propName\",\n            list_name=\"listName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_list(prop_name, list_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_simpletext","title":"<code>add_simpletext</code>","text":"<p>Add a simple text value to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_simpletext(\n    prop_name=\":propName\",\n    value=\"text\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_simpletext(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a simple text value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_simpletext(\n            prop_name=\":propName\",\n            value=\"text\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        SimpleText.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_simpletext_multiple","title":"<code>add_simpletext_multiple</code>","text":"<p>Add several simple text values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_simpletext_multiple(\n    prop_name=\":propName\",\n    values=[\"text 1\", \"text 2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_simpletext_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several simple text values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_simpletext_multiple(\n            prop_name=\":propName\",\n            values=[\"text 1\", \"text 2\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_simpletext(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_simpletext_optional","title":"<code>add_simpletext_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_simpletext_optional(\n    prop_name=\":propName\",\n    value=\"text\",\n)\n</code></pre> <pre><code>resource = resource.add_simpletext_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_simpletext_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_simpletext_optional(\n            prop_name=\":propName\",\n            value=\"text\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_simpletext_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_simpletext(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_textarea","title":"<code>add_textarea</code>","text":"<p>Add a textarea value to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_textarea(\n    prop_name=\":propName\",\n    value=\"text\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_textarea(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a textarea value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_textarea(\n            prop_name=\":propName\",\n            value=\"text\",\n        )\n        ```\n    \"\"\"\n    self.add_simpletext(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_textarea_multiple","title":"<code>add_textarea_multiple</code>","text":"<p>Add several textarea values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_textarea_multiple(\n    prop_name=\":propName\",\n    values=[\"text 1\", \"text 2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_textarea_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several textarea values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_textarea_multiple(\n            prop_name=\":propName\",\n            values=[\"text 1\", \"text 2\"],\n        )\n        ```\n    \"\"\"\n    self.add_simpletext_multiple(prop_name, values, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_textarea_optional","title":"<code>add_textarea_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_textarea_optional(\n    prop_name=\":propName\",\n    value=\"text\",\n)\n</code></pre> <pre><code>resource = resource.add_textarea_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_textarea_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_textarea_optional(\n            prop_name=\":propName\",\n            value=\"text\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_textarea_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    self.add_simpletext_optional(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_richtext","title":"<code>add_richtext</code>","text":"<p>Add a rich text value to the resource. Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags as documented here. Only the documented tags are allowed.</p> Conversions <p>By default, replace newline characters inside the text value with <code>&lt;br/&gt;</code>, which preserves the linebreak. Without this replacement, the newline would disappear, because <code>\\n</code> is meaningless in an XML file. Click here for more details</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_richtext(\n    prop_name=\":propName\",\n    value=\"line 1\\nline 2\",\n)\n</code></pre> <pre><code># changing the replacement options for newlines `\\n`\nresource = resource.add_richtext(\n    prop_name=\":propName\",\n    value=\"line 1\\nline 2\",\n    newline_replacement=xmllib.NewlineReplacement.PARAGRAPH,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_richtext(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; Resource:\n    \"\"\"\n    Add a rich text value to the resource.\n    Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n    as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n    Only the documented tags are allowed.\n\n    Conversions:\n        By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n        Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n        [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_richtext(\n            prop_name=\":propName\",\n            value=\"line 1\\\\nline 2\",\n        )\n        ```\n\n        ```python\n        # changing the replacement options for newlines `\\\\n`\n        resource = resource.add_richtext(\n            prop_name=\":propName\",\n            value=\"line 1\\\\nline 2\",\n            newline_replacement=xmllib.NewlineReplacement.PARAGRAPH,\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=value,\n            prop_name=prop_name,\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_richtext_multiple","title":"<code>add_richtext_multiple</code>","text":"<p>Add several rich text values to the resource. Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags as documented here. Only the documented tags are allowed.</p> Conversions <p>By default, replace newline characters inside the text value with <code>&lt;br/&gt;</code>, which preserves the linebreak. Without this replacement, the newline would disappear, because <code>\\n</code> is meaningless in an XML file. Click here for more details</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_richtext_multiple(\n    prop_name=\":propName\",\n    values=[\"&lt;strong&gt;Bold text&lt;/strong&gt;\", \"text 2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_richtext_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; Resource:\n    \"\"\"\n    Add several rich text values to the resource.\n    Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n    as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n    Only the documented tags are allowed.\n\n    Conversions:\n        By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n        Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n        [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_richtext_multiple(\n            prop_name=\":propName\",\n            values=[\"&lt;strong&gt;Bold text&lt;/strong&gt;\", \"text 2\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    self.values.extend(\n        [\n            Richtext.new(\n                value=v,\n                prop_name=prop_name,\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n            for v in vals\n        ]\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_richtext_optional","title":"<code>add_richtext_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged. Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags as documented here. Only the documented tags are allowed.</p> Conversions <p>By default, replace newline characters inside the text value with <code>&lt;br/&gt;</code>, which preserves the linebreak. Without this replacement, the newline would disappear, because <code>\\n</code> is meaningless in an XML file. Click here for more details</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_richtext_optional(\n    prop_name=\":propName\",\n    value=\"&lt;strong&gt;Bold text&lt;/strong&gt;\",\n)\n</code></pre> <pre><code>resource = resource.add_richtext_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_richtext_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n    Rich text values must be provided as strings, potentially containing DSP Standard Standoff Markup XML tags\n    as [documented here.](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/)\n    Only the documented tags are allowed.\n\n    Conversions:\n        By default, replace newline characters inside the text value with `&lt;br/&gt;`, which preserves the linebreak.\n        Without this replacement, the newline would disappear, because `\\\\n` is meaningless in an XML file.\n        [Click here for more details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags)\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#text)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_richtext_optional(\n            prop_name=\":propName\",\n            value=\"&lt;strong&gt;Bold text&lt;/strong&gt;\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_richtext_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        return self.add_richtext(prop_name, value, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_time","title":"<code>add_time</code>","text":"<p>Add a time value to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_time(\n    prop_name=\":propName\",\n    value=\"2019-10-23T13:45:12Z\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_time(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a time value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_time(\n            prop_name=\":propName\",\n            value=\"2019-10-23T13:45:12Z\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        TimeValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_time_multiple","title":"<code>add_time_multiple</code>","text":"<p>Add several time values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_time_multiple(\n    prop_name=\":propName\",\n    values=[\"2019-10-23T13:45:12Z\", \"2009-10-10T12:00:00-05:00\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_time_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several time values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_time_multiple(\n            prop_name=\":propName\",\n            values=[\"2019-10-23T13:45:12Z\", \"2009-10-10T12:00:00-05:00\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_time(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_time_optional","title":"<code>add_time_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_time_optional(\n    prop_name=\":propName\",\n    value=\"2019-10-23T13:45:12Z\",\n)\n</code></pre> <pre><code>resource = resource.add_time_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_time_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#time)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_time_optional(\n            prop_name=\":propName\",\n            value=\"2019-10-23T13:45:12Z\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_time_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_time(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_uri","title":"<code>add_uri</code>","text":"<p>Add a URI value to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>str</code> <p>value to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_uri(\n    prop_name=\":propName\",\n    value=\"https://dasch.swiss\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_uri(\n    self,\n    prop_name: str,\n    value: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a URI value to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n    Args:\n        prop_name: name of the property\n        value: value to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_uri(\n            prop_name=\":propName\",\n            value=\"https://dasch.swiss\",\n        )\n        ```\n    \"\"\"\n    self.values.append(\n        UriValue.new(\n            value=value, prop_name=prop_name, permissions=permissions, comment=comment, resource_id=self.res_id\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_uri_multiple","title":"<code>add_uri_multiple</code>","text":"<p>Add several URI values to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>values</code> <code>Collection[str]</code> <p>values to add</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added values</p> <p>Examples:</p> <pre><code>resource = resource.add_uri_multiple(\n    prop_name=\":propName\",\n    values=[\"https://dasch.swiss\", \"https://docs.dasch.swiss\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_uri_multiple(\n    self,\n    prop_name: str,\n    values: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add several URI values to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n    Args:\n        prop_name: name of the property\n        values: values to add\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added values\n\n    Examples:\n        ```python\n        resource = resource.add_uri_multiple(\n            prop_name=\":propName\",\n            values=[\"https://dasch.swiss\", \"https://docs.dasch.swiss\"],\n        )\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(values, prop_name, self.res_id)\n    for v in vals:\n        self.add_uri(prop_name, v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_uri_optional","title":"<code>add_uri_optional</code>","text":"<p>If the value is not empty, add it to the resource, otherwise return the resource unchanged.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>prop_name</code> <code>str</code> <p>name of the property</p> required <code>value</code> <code>Any</code> <p>value to add or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value if it was not empty, else the unchanged original resource.</p> <p>Examples:</p> <pre><code>resource = resource.add_uri_optional(\n    prop_name=\":propName\",\n    value=\"https://dasch.swiss\",\n)\n</code></pre> <pre><code>resource = resource.add_uri_optional(\n    prop_name=\":propName\",\n    value=None,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_uri_optional(\n    self,\n    prop_name: str,\n    value: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    If the value is not empty, add it to the resource, otherwise return the resource unchanged.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#uri)\n\n    Args:\n        prop_name: name of the property\n        value: value to add or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added value if it was not empty, else the unchanged original resource.\n\n    Examples:\n        ```python\n        resource = resource.add_uri_optional(\n            prop_name=\":propName\",\n            value=\"https://dasch.swiss\",\n        )\n        ```\n\n        ```python\n        resource = resource.add_uri_optional(\n            prop_name=\":propName\",\n            value=None,\n        )\n        ```\n    \"\"\"\n    if is_nonempty_value(value):\n        self.add_uri(prop_name, value, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_file","title":"<code>add_file</code>","text":"<p>Add a file (bitstream) to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>filename</code> <code>str | Path</code> <p>path to the file</p> required <code>license</code> <code>License | None</code> <p>License of the file (predefined or custom) see the documentation for the options.. A license states the circumstances how you are allowed to share/reuse something.</p> <code>None</code> <code>copyright_holder</code> <code>str | None</code> <p>The person or institution who owns the economic rights of something.</p> <code>None</code> <code>authorship</code> <code>list[str] | None</code> <p>The (natural) person who authored something.</p> <code>None</code> <code>permissions</code> <code>Permissions</code> <p>optional permissions of this file</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_file(\n    filename=\"images/cat.jpg\",\n    license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n    copyright_holder=\"Meow University\",\n    authorship=[\"Kitty Meow\"],\n)\n</code></pre> <pre><code># a file with restricted view permissions\nresource = resource.add_file(\n    filename=\"images/dog.jpg\",\n    license=xmllib.LicenseRecommended.CC.BY_NC_ND,\n    copyright_holder=\"Bark University\",\n    authorship=[\"Bark McDog\"],\n    permissions=xmllib.Permissions.LIMITED_VIEW,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_file(\n    self,\n    filename: str | Path,\n    license: License | None = None,\n    copyright_holder: str | None = None,\n    authorship: list[str] | None = None,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a file (bitstream) to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#bitstream)\n\n    Args:\n        filename: path to the file\n        license: License of the file (predefined or custom) [see the documentation for the options.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/).\n            A license states the circumstances how you are allowed to share/reuse something.\n        copyright_holder: The person or institution who owns the economic rights of something.\n        authorship: The (natural) person who authored something.\n        permissions: optional permissions of this file\n        comment: optional comment\n\n    Raises:\n        XmllibInputError: If the resource already has a file or IIIF URI value\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_file(\n            filename=\"images/cat.jpg\",\n            license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n            copyright_holder=\"Meow University\",\n            authorship=[\"Kitty Meow\"],\n        )\n        ```\n\n        ```python\n        # a file with restricted view permissions\n        resource = resource.add_file(\n            filename=\"images/dog.jpg\",\n            license=xmllib.LicenseRecommended.CC.BY_NC_ND,\n            copyright_holder=\"Bark University\",\n            authorship=[\"Bark McDog\"],\n            permissions=xmllib.Permissions.LIMITED_VIEW,\n        )\n        ```\n    \"\"\"\n    if self.file_value:\n        msg_info = MessageInfo(\n            f\"This resource already contains a file with the name: '{self.file_value.value}'. \"\n            f\"The new file with the name '{filename}' cannot be added.\",\n            resource_id=self.res_id,\n            field=\"file / iiif-uri\",\n        )\n        raise_xmllib_input_error(msg_info)\n    meta = Metadata.new(\n        license=license,\n        copyright_holder=copyright_holder,\n        authorship=authorship,\n        permissions=permissions,\n        resource_id=self.res_id,\n    )\n    self.file_value = FileValue.new(value=filename, metadata=meta, comment=comment, resource_id=self.res_id)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/resource/#xmllib.Resource.add_iiif_uri","title":"<code>add_iiif_uri</code>","text":"<p>Add a IIIF URI to the resource.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>iiif_uri</code> <code>str</code> <p>valid IIIF URI</p> required <code>license</code> <code>License | None</code> <p>License of the file (predefined or custom) see the documentation for the options.. A license states the circumstances how you are allowed to share/reuse something.</p> <code>None</code> <code>copyright_holder</code> <code>str | None</code> <p>The person or institution who owns the economic rights of something.</p> <code>None</code> <code>authorship</code> <code>list[str] | None</code> <p>The (natural) person who authored something.</p> <code>None</code> <code>permissions</code> <code>Permissions</code> <p>optional permissions of this file</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>Resource</code> <p>The original resource, with the added value</p> <p>Examples:</p> <pre><code>resource = resource.add_iiif_uri(\n    iiif_uri=\"https://iiif.wellcomecollection.org/image/b20432033_B0008608.JP2/full/1338%2C/0/default.jpg\",\n    license=xmllib.LicenseRecommended.CC.BY_NC,\n    copyright_holder=\"Wellcome Collection\",\n    authorship=[\"Cavanagh, Annie\"]\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/res.py</code> <pre><code>def add_iiif_uri(\n    self,\n    iiif_uri: str,\n    license: License | None = None,\n    copyright_holder: str | None = None,\n    authorship: list[str] | None = None,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; Resource:\n    \"\"\"\n    Add a IIIF URI to the resource.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#iiif-uri)\n\n    Args:\n        iiif_uri: valid IIIF URI\n        license: License of the file (predefined or custom) [see the documentation for the options.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/).\n            A license states the circumstances how you are allowed to share/reuse something.\n        copyright_holder: The person or institution who owns the economic rights of something.\n        authorship: The (natural) person who authored something.\n        permissions: optional permissions of this file\n        comment: optional comment\n\n    Raises:\n        XmllibInputError: If the resource already has a file or IIIF URI value\n\n    Returns:\n        The original resource, with the added value\n\n    Examples:\n        ```python\n        resource = resource.add_iiif_uri(\n            iiif_uri=\"https://iiif.wellcomecollection.org/image/b20432033_B0008608.JP2/full/1338%2C/0/default.jpg\",\n            license=xmllib.LicenseRecommended.CC.BY_NC,\n            copyright_holder=\"Wellcome Collection\",\n            authorship=[\"Cavanagh, Annie\"]\n        )\n        ```\n    \"\"\"\n    if self.file_value:\n        msg_info = MessageInfo(\n            f\"This resource already contains a file with the name: '{self.file_value.value}'. \"\n            f\"The new file with the name '{iiif_uri}' cannot be added.\",\n            resource_id=self.res_id,\n            field=\"file / iiif-uri\",\n        )\n        raise_xmllib_input_error(msg_info)\n    meta = Metadata.new(\n        license=license,\n        copyright_holder=copyright_holder,\n        authorship=authorship,\n        permissions=permissions,\n        resource_id=self.res_id,\n    )\n    self.file_value = IIIFUri.new(value=iiif_uri, metadata=meta, comment=comment, resource_id=self.res_id)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/","title":"Value Checkers","text":""},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_nonempty_value","title":"<code>is_nonempty_value</code>","text":"<p>Check if a value is not None-like or that its string representation contains at least one of the following characters:</p> <ul> <li><code>\\p{S}</code> = symbols and special characters</li> <li><code>\\p{P}</code> = punctuation</li> <li><code>\\w</code> = all Unicode letters, numbers, and _</li> </ul> <p>If the value is a collection (i.e. list, tuple, set or dictionary) all the elements must be non-empty to return True.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value of any type</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if the value is not None-like and contains at least one of the above-mentioned characters</p> <p>Examples:</p> <pre><code># True values:\nassert xmllib.is_nonempty_value(\"word\") == True\nassert xmllib.is_nonempty_value([\"word\"]) == True\nassert xmllib.is_nonempty_value(\"None\") == True\nassert xmllib.is_nonempty_value(\"-\") == True\nassert xmllib.is_nonempty_value(0) == True\nassert xmllib.is_nonempty_value(1) == True\nassert xmllib.is_nonempty_value(\"0\") == True\nassert xmllib.is_nonempty_value(\"1\") == True\nassert xmllib.is_nonempty_value(True) == True\nassert xmllib.is_nonempty_value(False) == True\nassert xmllib.is_nonempty_value(\"\u05e2\u05b4\u05d1\u05b0\u05e8\u05b4\u05d9\u05ea\") == True\n\n# False values:\nassert xmllib.is_nonempty_value(pd.NA) == False\nassert xmllib.is_nonempty_value(None) == False\nassert xmllib.is_nonempty_value(\"\") == False\nassert xmllib.is_nonempty_value([\"\", \"some-content\"]) == False\nassert xmllib.is_nonempty_value({\"dict-key\": \"\"}) == False\nassert xmllib.is_nonempty_value(\" \") == False\nassert xmllib.is_nonempty_value(\"\\n\") == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_nonempty_value(value: Any) -&gt; bool:\n    \"\"\"\n    Check if a value is not None-like\n    or that its string representation contains at least one of the following characters:\n\n    - ``\\\\p{S}`` = symbols and special characters\n    - ``\\\\p{P}`` = punctuation\n    - ``\\\\w`` = all Unicode letters, numbers, and _\n\n    If the value is a collection (i.e. list, tuple, set or dictionary)\n    all the elements must be non-empty to return True.\n\n    Args:\n        value: value of any type\n\n    Returns:\n        True if the value is not None-like and contains at least one of the above-mentioned characters\n\n    Examples:\n        ```python\n        # True values:\n        assert xmllib.is_nonempty_value(\"word\") == True\n        assert xmllib.is_nonempty_value([\"word\"]) == True\n        assert xmllib.is_nonempty_value(\"None\") == True\n        assert xmllib.is_nonempty_value(\"-\") == True\n        assert xmllib.is_nonempty_value(0) == True\n        assert xmllib.is_nonempty_value(1) == True\n        assert xmllib.is_nonempty_value(\"0\") == True\n        assert xmllib.is_nonempty_value(\"1\") == True\n        assert xmllib.is_nonempty_value(True) == True\n        assert xmllib.is_nonempty_value(False) == True\n        assert xmllib.is_nonempty_value(\"\u05e2\u05b4\u05d1\u05b0\u05e8\u05b4\u05d9\u05ea\") == True\n\n        # False values:\n        assert xmllib.is_nonempty_value(pd.NA) == False\n        assert xmllib.is_nonempty_value(None) == False\n        assert xmllib.is_nonempty_value(\"\") == False\n        assert xmllib.is_nonempty_value([\"\", \"some-content\"]) == False\n        assert xmllib.is_nonempty_value({\"dict-key\": \"\"}) == False\n        assert xmllib.is_nonempty_value(\" \") == False\n        assert xmllib.is_nonempty_value(\"\\\\n\") == False\n        ```\n    \"\"\"\n    if isinstance(value, (tuple, list, set)):\n        all_vals = [is_nonempty_value(v) for v in value]\n        return all(all_vals)\n    if isinstance(value, dict):\n        all_vals = []\n        for k, v in value.items():\n            all_vals.append(is_nonempty_value(k))\n            all_vals.append(is_nonempty_value(v))\n        return all(all_vals)\n    if pd.isna(value):\n        return False\n    if regex.search(r\"[\\p{S}\\p{P}\\w]\", str(value), flags=regex.UNICODE):\n        return True\n    return False\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_bool_like","title":"<code>is_bool_like</code>","text":"<p>Checks if a value is a bool or can be converted into a bool. It is case-insensitive, meaning that the words can also be capitalised.</p> Accepted values <ul> <li><code>false</code>, <code>0</code>, <code>0.0</code>, <code>no</code>, <code>non</code>, <code>nein</code> -&gt; <code>False</code></li> <li><code>true</code>, <code>1</code>, <code>1.0</code>, <code>yes</code>, <code>oui</code>, <code>ja</code> -&gt; <code>True</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it conforms</p> <p>Examples:</p> <pre><code>result = xmllib.is_bool_like(\"yes\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_bool_like(\"not like a bool\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_bool_like(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a bool or can be converted into a bool.\n    It is case-insensitive, meaning that the words can also be capitalised.\n\n    Accepted values:\n         - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `False`\n         - `true`, `1`, `1.0`, `yes`, `oui`, `ja` -&gt; `True`\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if it conforms\n\n    Examples:\n        ```python\n        result = xmllib.is_bool_like(\"yes\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_bool_like(\"not like a bool\")\n        # result == False\n        ```\n    \"\"\"\n    value = str(value).lower().strip()\n    if value in (\"false\", \"0\", \"0.0\", \"no\", \"non\", \"nein\"):\n        return True\n    elif value in (\"true\", \"1\", \"1.0\", \"yes\", \"oui\", \"ja\"):\n        return True\n    return False\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_color","title":"<code>is_color</code>","text":"<p>Checks if a value is a color value.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it conforms</p> <p>Examples:</p> <pre><code>result = xmllib.is_color(\"#00ff66\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_color(\"not a color\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_color(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a color value.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if it conforms\n\n    Examples:\n        ```python\n        result = xmllib.is_color(\"#00ff66\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_color(\"not a color\")\n        # result == False\n        ```\n    \"\"\"\n    return bool(regex.search(r\"^#[0-9a-f]{6}$\", str(value).strip(), flags=regex.IGNORECASE))\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_date","title":"<code>is_date</code>","text":"<p>Checks if a value is a date value.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it conforms</p> <p>Examples:</p> <pre><code>result = xmllib.is_date(\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_date(\"not a date\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_date(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a date value.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if it conforms\n\n    Examples:\n        ```python\n        result = xmllib.is_date(\"GREGORIAN:CE:2014-01-31:CE:2014-01-31\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_date(\"not a date\")\n        # result == False\n        ```\n    \"\"\"\n    calendar_optional = r\"(?:(GREGORIAN|JULIAN|ISLAMIC):)?\"\n    first_era_optional = r\"(?:(CE|BCE|BC|AD):)?\"\n    second_area_optional = r\"(?::(CE|BCE|BC|AD))?\"\n    date = r\"\\d{1,4}(?:-\\d{1,2}){0,2}\"\n    date_mandatory = rf\"({date})\"\n    date_optional = rf\"(:{date})?\"\n    full_date_pattern = (\n        rf\"^{calendar_optional}{first_era_optional}{date_mandatory}{second_area_optional}{date_optional}$\"\n    )\n    found = regex.search(full_date_pattern, str(value))\n    if not found:\n        return False\n    if found.group(1) == \"ISLAMIC\" and (found.group(2) or found.group(4)):\n        # eras are not supported yet for the islamic calendar\n        return False\n    return True\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_geoname","title":"<code>is_geoname</code>","text":"<p>Checks if a value is a geoname value.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it conforms</p> <p>Examples:</p> <pre><code>result = xmllib.is_geoname(\"8879000\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_geoname(\"not a geoname code\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_geoname(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a geoname value.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if it conforms\n\n    Examples:\n        ```python\n        result = xmllib.is_geoname(\"8879000\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_geoname(\"not a geoname code\")\n        # result == False\n        ```\n    \"\"\"\n    return is_integer(value)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_decimal","title":"<code>is_decimal</code>","text":"<p>Checks if a value is a float, an integer, or a string which can be converted into a float.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if conforms to the above-mentioned criteria.</p> <p>Examples:</p> <pre><code>result = xmllib.is_decimal(\"0.1\")\n# result == True\n</code></pre> <pre><code># because this is equivalent to 9.0 it is accepted\n\nresult = xmllib.is_decimal(9)\n# result == True\n</code></pre> <pre><code>result = xmllib.is_decimal(\"not a decimal\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_decimal(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a float, an integer, or a string which can be converted into a float.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if conforms to the above-mentioned criteria.\n\n    Examples:\n        ```python\n        result = xmllib.is_decimal(\"0.1\")\n        # result == True\n        ```\n\n        ```python\n        # because this is equivalent to 9.0 it is accepted\n\n        result = xmllib.is_decimal(9)\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_decimal(\"not a decimal\")\n        # result == False\n        ```\n    \"\"\"\n    if pd.isna(value):\n        return False\n\n    match value:\n        case bool():\n            return False\n        case int() | float():\n            return True\n    try:\n        float(value)\n        return True\n    except ValueError:\n        return False\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_integer","title":"<code>is_integer</code>","text":"<p>Checks if a value is an integer or a string which can be converted into an integer.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if conforms to the above-mentioned criteria.</p> <p>Examples:</p> <pre><code>result = xmllib.is_integer(\"1\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_integer(9.1)\n# result == False\n</code></pre> <pre><code>result = xmllib.is_integer(\"not an integer\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_integer(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is an integer or a string which can be converted into an integer.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if conforms to the above-mentioned criteria.\n\n    Examples:\n        ```python\n        result = xmllib.is_integer(\"1\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_integer(9.1)\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.is_integer(\"not an integer\")\n        # result == False\n        ```\n    \"\"\"\n    match value:\n        case bool():\n            return False\n        case int():\n            return True\n        case str():\n            return bool(regex.search(r\"^\\d+$\", value))\n        case _:\n            return False\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_link_value","title":"<code>is_link_value</code>","text":"<p>Check if a value is a valid internal ID of a resource (xsd:ID) or a valid internal DSP IRI. Both of these values are allowed in LinkValues.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>the target ID of a LinkValue</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it is a permissible value.</p> <p>Examples:</p> <pre><code>result = xmllib.is_link_value(\"1_must_not_start_with_number\")\n# result == False\n</code></pre> <pre><code>result = xmllib.is_link_value(\"characters|not|allowed\")\n# result == False\n</code></pre> <pre><code>result = xmllib.is_link_value(\"resource_id_1\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_link_value(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n# result == True\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_link_value(value: Any) -&gt; bool:\n    \"\"\"\n    Check if a value is a valid internal ID of a resource (xsd:ID) or a valid internal DSP IRI.\n    Both of these values are allowed in LinkValues.\n\n    Args:\n        value: the target ID of a LinkValue\n\n    Returns:\n        True if it is a permissible value.\n\n    Examples:\n        ```python\n        result = xmllib.is_link_value(\"1_must_not_start_with_number\")\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.is_link_value(\"characters|not|allowed\")\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.is_link_value(\"resource_id_1\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_link_value(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n        # result == True\n        ```\n    \"\"\"\n    if is_valid_resource_id(value):\n        return True\n    return is_dsp_iri(value)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_valid_resource_id","title":"<code>is_valid_resource_id</code>","text":"<p>Check if a value is a valid internal ID of a resource (xsd:ID).</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>the ID of a Resource</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it is a permissible value.</p> <p>Examples:</p> <pre><code>result = xmllib.is_valid_resource_id(\"1_must_not_start_with_number\")\n# result == False\n</code></pre> <pre><code>result = xmllib.is_valid_resource_id(\"characters|not|allowed\")\n# result == False\n</code></pre> <pre><code>result = xmllib.is_valid_resource_id(\"resource_id_1\")\n# result == True\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_valid_resource_id(value: Any) -&gt; bool:\n    \"\"\"\n    Check if a value is a valid internal ID of a resource (xsd:ID).\n\n    Args:\n        value: the ID of a Resource\n\n    Returns:\n        True if it is a permissible value.\n\n    Examples:\n        ```python\n        result = xmllib.is_valid_resource_id(\"1_must_not_start_with_number\")\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.is_valid_resource_id(\"characters|not|allowed\")\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.is_valid_resource_id(\"resource_id_1\")\n        # result == True\n        ```\n    \"\"\"\n    allowed_letters = \"a-zA-Z\u00e0\u00e1\u00e2\u00e4\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f2\u00f3\u00f4\u00f6\u00f9\u00fa\u00fb\u00fc\u00e7\u00f1\u00df_\"\n    if is_nonempty_value(value):\n        # None, etc. would not be recognised as invalid since it is converted into a string.\n        return bool(\n            regex.search(rf\"^[{allowed_letters}][{allowed_letters}\\d.\\-]*$\", str(value)),\n        )\n    return False\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_timestamp","title":"<code>is_timestamp</code>","text":"<p>Checks if a value is a valid timestamp.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to check</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it conforms</p> <p>Examples:</p> <pre><code>result = xmllib.is_timestamp(\"2019-10-23T13:45:12Z\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_timestamp(\"not a time stamp\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_timestamp(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a valid timestamp.\n\n    Args:\n        value: value to check\n\n    Returns:\n        True if it conforms\n\n    Examples:\n        ```python\n        result = xmllib.is_timestamp(\"2019-10-23T13:45:12Z\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_timestamp(\"not a time stamp\")\n        # result == False\n        ```\n    \"\"\"\n    validation_regex = r\"^\\d{4}-[0-1]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d(\\.\\d{1,12})?(Z|[+-][0-1]\\d:[0-5]\\d)$\"\n    return bool(regex.search(validation_regex, str(value)))\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_dsp_iri","title":"<code>is_dsp_iri</code>","text":"<p>Check if a value is a valid internal DSP IRI.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>IRI</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it is valid, else false</p> <p>Examples:</p> <pre><code>result = xmllib.is_dsp_iri(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_dsp_iri(\"http://dbpedia.org/resource/Internationalized_Resource_Identifier\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_dsp_iri(value: Any) -&gt; bool:\n    \"\"\"\n    Check if a value is a valid internal DSP IRI.\n\n    Args:\n        value: IRI\n\n    Returns:\n        True if it is valid, else false\n\n    Examples:\n        ```python\n        result = xmllib.is_dsp_iri(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_dsp_iri(\"http://dbpedia.org/resource/Internationalized_Resource_Identifier\")\n        # result == False\n        ```\n    \"\"\"\n    return bool(regex.search(r\"^http://rdfh\\.ch/[\\dA-F]{4}/\", str(value)))\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.is_dsp_ark","title":"<code>is_dsp_ark</code>","text":"<p>Checks if a value is a valid ARK.</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>ARK</p> required <p>Returns:</p> Type Description <code>bool</code> <p>True if it is valid, else false</p> <p>Examples:</p> <pre><code>result = xmllib.is_dsp_ark(\"ark:/72163/4123-31ec6eab334-a.2022829\")\n# result == True\n</code></pre> <pre><code>result = xmllib.is_dsp_ark(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n# result == False\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def is_dsp_ark(value: Any) -&gt; bool:\n    \"\"\"\n    Checks if a value is a valid ARK.\n\n    Args:\n        value: ARK\n\n    Returns:\n        True if it is valid, else false\n\n    Examples:\n        ```python\n        result = xmllib.is_dsp_ark(\"ark:/72163/4123-31ec6eab334-a.2022829\")\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.is_dsp_ark(\"http://rdfh.ch/4123/54SYvWF0QUW6a\")\n        # result == False\n        ```\n    \"\"\"\n    return bool(regex.search(r\"^ark:/\", str(value)))\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-checkers/#xmllib.value_checkers.check_richtext_syntax","title":"<code>check_richtext_syntax</code>","text":"<p>DSP richtexts must be convertible into valid XML. This checker escapes the reserved characters <code>&lt;</code>, <code>&gt;</code> and <code>&amp;</code>, but only if they are not part of a standard standoff tag or escape sequence. Then, it tries to parse the resulting XML.</p> <p>Note: Only DSP standard standoff tags are allowed in richtexts. They are documented here.</p> <p>Parameters:</p> Name Type Description Default <code>richtext</code> <code>str</code> <p>richtext to check</p> required <p>Warns:</p> Type Description <code>XmllibInputWarning</code> <p>if the input contains XML syntax problems</p> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_checkers.py</code> <pre><code>def check_richtext_syntax(richtext: str) -&gt; None:\n    \"\"\"\n    DSP richtexts must be convertible into valid XML.\n    This checker escapes the reserved characters `&lt;`, `&gt;` and `&amp;`,\n    but only if they are not part of a standard standoff tag or escape sequence.\n    Then, it tries to parse the resulting XML.\n\n    Note: Only DSP standard standoff tags are allowed in richtexts. They are documented\n    [here](https://docs.dasch.swiss/latest/DSP-API/03-endpoints/api-v2/text/standard-standoff/).\n\n    Args:\n        richtext: richtext to check\n\n    Warns:\n        XmllibInputWarning: if the input contains XML syntax problems\n    \"\"\"\n    result = parse_richtext_as_xml(richtext)\n    if isinstance(result, MessageInfo):\n        emit_xmllib_input_warning(result)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/","title":"Value Converters","text":""},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.convert_to_bool_string","title":"<code>convert_to_bool_string</code>","text":"<p>Turns a value into a bool string, suitable for an XML. It is case-insensitive, meaning that the words can also be capitalised.</p> Accepted values <ul> <li><code>false</code>, <code>0</code>, <code>0.0</code>, <code>no</code>, <code>non</code>, <code>nein</code> -&gt; <code>False</code></li> <li><code>true</code>, <code>1</code>, <code>1.0</code>, <code>yes</code>, <code>oui</code>, <code>ja</code>, <code>s\u00ec</code> -&gt; <code>True</code></li> </ul> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>Any</code> <p>value to transform</p> required <p>Returns:</p> Type Description <code>bool</code> <p><code>True</code> or <code>False</code> if it is an accepted value.</p> <p>Examples:</p> <pre><code>result = xmllib.convert_to_bool_string(1)\n# result == True\n</code></pre> <pre><code>result = xmllib.convert_to_bool_string(\"nein\")\n# result == False\n</code></pre> <pre><code>result = xmllib.convert_to_bool_string(None)\n# raises XmllibInputError\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def convert_to_bool_string(value: Any) -&gt; bool:\n    \"\"\"\n    Turns a value into a bool string, suitable for an XML.\n    It is case-insensitive, meaning that the words can also be capitalised.\n\n    Accepted values:\n         - `false`, `0`, `0.0`, `no`, `non`, `nein` -&gt; `False`\n         - `true`, `1`, `1.0`, `yes`, `oui`, `ja`, `s\u00ec` -&gt; `True`\n\n    Args:\n        value: value to transform\n\n    Returns:\n        `True` or `False` if it is an accepted value.\n\n    Raises:\n        XmllibInputError: If the value is not convertable to a boolean\n\n    Examples:\n        ```python\n        result = xmllib.convert_to_bool_string(1)\n        # result == True\n        ```\n\n        ```python\n        result = xmllib.convert_to_bool_string(\"nein\")\n        # result == False\n        ```\n\n        ```python\n        result = xmllib.convert_to_bool_string(None)\n        # raises XmllibInputError\n        ```\n    \"\"\"\n    str_val = str(value).lower().strip()\n    if str_val in (\"false\", \"0\", \"0.0\", \"no\", \"non\", \"nein\"):\n        return False\n    elif str_val in (\"true\", \"1\", \"1.0\", \"yes\", \"oui\", \"ja\", \"s\u00ec\"):\n        return True\n    raise_xmllib_input_error(MessageInfo(f\"The entered value '{value}' cannot be converted to a bool.\"))\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_tags","title":"<code>replace_newlines_with_tags</code>","text":"<p>Converts the newlines in a string to XML tags.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>string to convert</p> required <code>converter_option</code> <code>NewlineReplacement</code> <p>specifies what tag to use instead of the newline</p> required <p>Returns:</p> Type Description <code>str</code> <p>String with replaced values</p> <p>Examples:</p> <pre><code>result = xmllib.replace_newlines_with_tags(\n    \"Start\\nEnd\", xmllib.NewlineReplacement.NONE\n)\n# result == \"Start\\nEnd\"\n</code></pre> <pre><code>result = xmllib.replace_newlines_with_tags(\n    \"Start\\nEnd\", xmllib.NewlineReplacement.LINEBREAK\n)\n# result == \"Start&lt;br/&gt;End\"\n</code></pre> <pre><code>result = xmllib.replace_newlines_with_tags(\n    \"Start\\n\\nEnd\", xmllib.NewlineReplacement.PARAGRAPH\n)\n# result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def replace_newlines_with_tags(text: str, converter_option: NewlineReplacement) -&gt; str:\n    \"\"\"\n    Converts the newlines in a string to XML tags.\n\n    Args:\n        text: string to convert\n        converter_option: specifies what tag to use instead of the newline\n\n    Returns:\n        String with replaced values\n\n    Raises:\n        XmllibInputError: If an invalid conversion option is given\n\n    Examples:\n        ```python\n        result = xmllib.replace_newlines_with_tags(\n            \"Start\\\\nEnd\", xmllib.NewlineReplacement.NONE\n        )\n        # result == \"Start\\\\nEnd\"\n        ```\n\n        ```python\n        result = xmllib.replace_newlines_with_tags(\n            \"Start\\\\nEnd\", xmllib.NewlineReplacement.LINEBREAK\n        )\n        # result == \"Start&lt;br/&gt;End\"\n        ```\n\n        ```python\n        result = xmllib.replace_newlines_with_tags(\n            \"Start\\\\n\\\\nEnd\", xmllib.NewlineReplacement.PARAGRAPH\n        )\n        # result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n        ```\n    \"\"\"\n    match converter_option:\n        case NewlineReplacement.NONE:\n            return text\n        case NewlineReplacement.LINEBREAK:\n            return replace_newlines_with_br_tags(text)\n        case NewlineReplacement.PARAGRAPH:\n            return replace_newlines_with_paragraph_tags(text)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_paragraph_tags","title":"<code>replace_newlines_with_paragraph_tags</code>","text":"<p>Replace <code>Start\\nEnd</code> with <code>&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;</code></p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>string to be formatted</p> required <p>Returns:</p> Type Description <code>str</code> <p>Formatted string with paragraph tags</p> <p>Examples:</p> <pre><code>result = xmllib.replace_newlines_with_paragraph_tags(\"Start\\nEnd\")\n# result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n</code></pre> <pre><code># multiple consecutive newlines will be treated as one newline\n\nresult = xmllib.replace_newlines_with_paragraph_tags(\"Start\\n\\nEnd\")\n# result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def replace_newlines_with_paragraph_tags(text: str) -&gt; str:\n    \"\"\"\n    Replace `Start\\\\nEnd` with `&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;`\n\n    Args:\n        text: string to be formatted\n\n    Returns:\n        Formatted string with paragraph tags\n\n    Examples:\n        ```python\n        result = xmllib.replace_newlines_with_paragraph_tags(\"Start\\\\nEnd\")\n        # result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n        ```\n\n        ```python\n        # multiple consecutive newlines will be treated as one newline\n\n        result = xmllib.replace_newlines_with_paragraph_tags(\"Start\\\\n\\\\nEnd\")\n        # result == \"&lt;p&gt;Start&lt;/p&gt;&lt;p&gt;End&lt;/p&gt;\"\n        ```\n    \"\"\"\n    splt = [x for x in text.split(\"\\n\") if x != \"\"]\n    formatted = [f\"&lt;p&gt;{x}&lt;/p&gt;\" for x in splt]\n    return \"\".join(formatted)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.replace_newlines_with_br_tags","title":"<code>replace_newlines_with_br_tags</code>","text":"<p>Replaces <code>\\n</code> with <code>&lt;br/&gt;</code></p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>string to be formatted</p> required <p>Returns:</p> Type Description <code>str</code> <p>Formatted string with break-line tags</p> <p>Examples:</p> <pre><code>result = xmllib.replace_newlines_with_br_tags(\"Start\\nEnd\")\n# result == \"Start&lt;br/&gt;End\"\n</code></pre> <pre><code># multiple consecutive newlines will be converted into multiple break-lines\n\nresult = xmllib.replace_newlines_with_br_tags(\"Start\\n\\nEnd\")\n# result == \"Start&lt;br/&gt;&lt;br/&gt;End\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def replace_newlines_with_br_tags(text: str) -&gt; str:\n    \"\"\"\n    Replaces `\\\\n` with `&lt;br/&gt;`\n\n    Args:\n        text: string to be formatted\n\n    Returns:\n        Formatted string with break-line tags\n\n    Examples:\n        ```python\n        result = xmllib.replace_newlines_with_br_tags(\"Start\\\\nEnd\")\n        # result == \"Start&lt;br/&gt;End\"\n        ```\n\n        ```python\n        # multiple consecutive newlines will be converted into multiple break-lines\n\n        result = xmllib.replace_newlines_with_br_tags(\"Start\\\\n\\\\nEnd\")\n        # result == \"Start&lt;br/&gt;&lt;br/&gt;End\"\n        ```\n    \"\"\"\n    return text.replace(\"\\n\", \"&lt;br/&gt;\")\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.reformat_date","title":"<code>reformat_date</code>","text":"<p>Reformats a date string into the DSP format.</p> <ul> <li>If the input cannot be reformatted according to the configuration, or if the result   is not a valid DSP date, a warning is emitted and the original input is returned.</li> <li>If the input is empty, a warning is emitted and an empty string is returned.</li> <li>If the input is already a correctly formatted DSP-date, the original input is returned.</li> </ul> <p>Parameters:</p> Name Type Description Default <code>date</code> <code>str | int</code> <p>date string to be reformatted</p> required <code>date_precision_separator</code> <code>str | None</code> <p>the separation between the day, month and year</p> required <code>date_range_separator</code> <code>str | None</code> <p>the separation between two dates</p> required <code>date_format</code> <code>DateFormat</code> <p>the format of the date, see <code>DateFormat</code> for options</p> required <code>calendar</code> <code>Calendar</code> <p>the calendar of the date, see <code>Calendar</code> for options</p> <code>GREGORIAN</code> <code>era</code> <code>Era | None</code> <p>the era of the date, see <code>Era</code> for options</p> <code>CE</code> <code>resource_id</code> <code>str | None</code> <p>the ID of the associated resource, this is to improve the error message</p> <code>None</code> <p>Returns:</p> Type Description <code>str</code> <p>A reformatted date or the original input if the reformatted result is not a valid DSP date</p> <p>Examples:</p> <pre><code># default configuration, starting with the day\nresult = xmllib.reformat_date(\n    date=\"1.11.2000\",\n    date_precision_separator=\".\",\n    date_range_separator=None,\n    date_format=xmllib.DateFormat.DD_MM_YYYY\n)\n# result == \"GREGORIAN:CE:2000-11-1:CE:2000-11-1\"\n</code></pre> <pre><code># default configuration, but starting with the year\nresult = xmllib.reformat_date(\n    date=\"2000.11.1\",\n    date_precision_separator=\".\",\n    date_range_separator=None,\n    date_format=xmllib.DateFormat.YYYY_MM_DD,\n)\n# result == \"GREGORIAN:CE:2000-11-1:CE:2000-11-1\"\n</code></pre> <pre><code># with a date range\nresult = xmllib.reformat_date(\n    date=\"1.11.2000-2001\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n)\n# result == \"GREGORIAN:CE:2000-11-1:CE:2001\"\n</code></pre> <pre><code># islamic calendar, where eras are not allowed\nresult = xmllib.reformat_date(\n    date=\"1.11.2000\",\n    date_precision_separator=\".\",\n    date_range_separator=None,\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n    calendar=xmllib.Calendar.ISLAMIC,\n    era=None\n)\n# result == \"ISLAMIC:2000-11-1:2000-11-1\"\n</code></pre> <pre><code># with a different era\nresult = xmllib.reformat_date(\n    date=\"1.11.2000\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n    era=xmllib.Era.AD\n)\n# result == \"GREGORIAN:AD:2000-11-1:AD:2000-11-1\"\n</code></pre> <pre><code># reformatted date, no precision in the date string is required\nresult = xmllib.reformat_date(\n    date=\"2000\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n)\n# result == \"GREGORIAN:CE:2000:CE:2000\"\n</code></pre> <pre><code># already correctly formatted date\nresult = xmllib.reformat_date(\n    date=\"GREGORIAN:CE:2000:CE:2000\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n)\n# result == \"GREGORIAN:CE:2000:CE:2000\"\n</code></pre> <pre><code># invalid input: a warning is emitted and the original input is returned\nresult = xmllib.reformat_date(\n    date=\"not-a-date\",\n    date_precision_separator=\".\",\n    date_range_separator=\"-\",\n    date_format=xmllib.DateFormat.DD_MM_YYYY,\n)\n# WARNING is emitted\n# result == \"not-a-date\"\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def reformat_date(\n    date: str | int,\n    date_precision_separator: str | None,\n    date_range_separator: str | None,\n    date_format: DateFormat,\n    calendar: Calendar = Calendar.GREGORIAN,\n    era: Era | None = Era.CE,\n    resource_id: str | None = None,\n) -&gt; str:\n    \"\"\"\n    Reformats a date string into the DSP format.\n\n    - If the input cannot be reformatted according to the configuration, or if the result\n      is not a valid DSP date, a warning is emitted and the original input is returned.\n    - If the input is empty, a warning is emitted and an empty string is returned.\n    - If the input is already a correctly formatted DSP-date, the original input is returned.\n\n    Args:\n        date: date string to be reformatted\n        date_precision_separator: the separation between the day, month and year\n        date_range_separator: the separation between two dates\n        date_format: the format of the date, see [`DateFormat` for options](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.DateFormat)\n        calendar: the calendar of the date, see [`Calendar` for options](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.Calendar)\n        era: the era of the date, see [`Era` for options](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/date_formats/#xmllib.models.date_formats.Era)\n        resource_id: the ID of the associated resource, this is to improve the error message\n\n    Returns:\n        A reformatted date or the original input if the reformatted result is not a valid DSP date\n\n    Examples:\n        ```python\n        # default configuration, starting with the day\n        result = xmllib.reformat_date(\n            date=\"1.11.2000\",\n            date_precision_separator=\".\",\n            date_range_separator=None,\n            date_format=xmllib.DateFormat.DD_MM_YYYY\n        )\n        # result == \"GREGORIAN:CE:2000-11-1:CE:2000-11-1\"\n        ```\n\n        ```python\n        # default configuration, but starting with the year\n        result = xmllib.reformat_date(\n            date=\"2000.11.1\",\n            date_precision_separator=\".\",\n            date_range_separator=None,\n            date_format=xmllib.DateFormat.YYYY_MM_DD,\n        )\n        # result == \"GREGORIAN:CE:2000-11-1:CE:2000-11-1\"\n        ```\n\n        ```python\n        # with a date range\n        result = xmllib.reformat_date(\n            date=\"1.11.2000-2001\",\n            date_precision_separator=\".\",\n            date_range_separator=\"-\",\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n        )\n        # result == \"GREGORIAN:CE:2000-11-1:CE:2001\"\n        ```\n\n        ```python\n        # islamic calendar, where eras are not allowed\n        result = xmllib.reformat_date(\n            date=\"1.11.2000\",\n            date_precision_separator=\".\",\n            date_range_separator=None,\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n            calendar=xmllib.Calendar.ISLAMIC,\n            era=None\n        )\n        # result == \"ISLAMIC:2000-11-1:2000-11-1\"\n        ```\n\n        ```python\n        # with a different era\n        result = xmllib.reformat_date(\n            date=\"1.11.2000\",\n            date_precision_separator=\".\",\n            date_range_separator=\"-\",\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n            era=xmllib.Era.AD\n        )\n        # result == \"GREGORIAN:AD:2000-11-1:AD:2000-11-1\"\n        ```\n\n        ```python\n        # reformatted date, no precision in the date string is required\n        result = xmllib.reformat_date(\n            date=\"2000\",\n            date_precision_separator=\".\",\n            date_range_separator=\"-\",\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n        )\n        # result == \"GREGORIAN:CE:2000:CE:2000\"\n        ```\n\n        ```python\n        # already correctly formatted date\n        result = xmllib.reformat_date(\n            date=\"GREGORIAN:CE:2000:CE:2000\",\n            date_precision_separator=\".\",\n            date_range_separator=\"-\",\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n        )\n        # result == \"GREGORIAN:CE:2000:CE:2000\"\n        ```\n\n        ```python\n        # invalid input: a warning is emitted and the original input is returned\n        result = xmllib.reformat_date(\n            date=\"not-a-date\",\n            date_precision_separator=\".\",\n            date_range_separator=\"-\",\n            date_format=xmllib.DateFormat.DD_MM_YYYY,\n        )\n        # WARNING is emitted\n        # result == \"not-a-date\"\n        ```\n    \"\"\"\n    if not is_nonempty_value_internal(date):\n        msg_info = MessageInfo(\n            \"The date to be reformatted is empty. An empty string is returned.\", resource_id=resource_id\n        )\n        emit_xmllib_input_warning(msg_info)\n        return \"\"\n    date = str(date).strip()\n    invalid_date_info = MessageInfo(\n        f\"The provided date '{date}' does not conform to the expected format, the original value is returned.\",\n        resource_id=resource_id,\n    )\n    # Here we want to check if the input is already a reformatted date. In that case, we would expect a calendar.\n    # The function that checks if an input is a valid date does not require a calendar,\n    # so unformatted input for example, '2000' may be accepted as a valid date.\n    if regex.search(r\"(GREGORIAN|JULIAN|ISLAMIC)\", date):\n        if is_date_internal(date):\n            return date\n        else:\n            emit_xmllib_input_warning(invalid_date_info)\n            return date\n    if date_precision_separator and date_range_separator:\n        if date_precision_separator == date_range_separator:\n            msg_info = MessageInfo(\n                f\"The precision separator and range separator provided are identical: '{date_precision_separator}'. \"\n                f\"This is not allowed.\",\n                resource_id=resource_id,\n            )\n            raise_xmllib_input_error(msg_info)\n    if date_range_separator is not None:\n        date_split = [found for x in date.split(date_range_separator) if (found := x.strip())]\n    else:\n        date_split = [date.strip()]\n    all_dates = [_reformat_single_date(x, date_precision_separator, date_format, resource_id) for x in date_split]\n    if era:\n        all_dates = [f\"{era.value}:{x}\" for x in all_dates]\n    if len(all_dates) == 1:\n        all_dates.append(all_dates[0])\n    reformatted_str = \":\".join(all_dates)\n    if calendar:\n        reformatted_str = f\"{calendar.value}:{reformatted_str}\"\n    if is_date_internal(reformatted_str):\n        return reformatted_str\n    emit_xmllib_input_warning(invalid_date_info)\n    return date\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/value-converters/#xmllib.value_converters.find_dates_in_string","title":"<code>find_dates_in_string</code>","text":"<p>Checks if a string contains date values (single dates, or date ranges), and return all found dates as set of DSP-formatted strings. Returns an empty set if no date was found. See XML documentation for details.</p> Notes <ul> <li>If no era or calendar is given, dates are interpreted in the Common Era and the Gregorian calendar.</li> <li>Standalone numbers from 000-2999, in 3/4-digit form, are interpreted as years CE.</li> <li>If a number (with any number of digits) is followed by CE, C.E., AD, A.D., it is interpreted as years CE.</li> <li>If a number (with any number of digits) is followed by BCE, BC, B.C., B.C.E., av. J.-C.,   it is interpreted as years BCE.</li> <li>Dates written with slashes are always interpreted in a European manner: 5/11/2021 is the 5th of November.</li> <li>In the European notation, 2-digit years are expanded to 4 digits, with the current year as watershed:<ul> <li>30.4.24 -&gt; 30.04.2024</li> <li>30.4.50 -&gt; 30.04.1950</li> </ul> </li> </ul> Currently supported date formats <ul> <li>0476-09-04 -&gt; GREGORIAN:CE:0476-09-04:CE:0476-09-04</li> <li>0476_09_04 -&gt; GREGORIAN:CE:0476-09-04:CE:0476-09-04</li> <li>30.4.2021 -&gt; GREGORIAN:CE:2021-04-30:CE:2021-04-30</li> <li>30.4.21 -&gt; GREGORIAN:CE:2021-04-30:CE:2021-04-30</li> <li>5/11/2021 -&gt; GREGORIAN:CE:2021-11-05:CE:2021-11-05</li> <li>Jan 26, 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26</li> <li>26 Jan 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26</li> <li>26 January 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26</li> <li> <ol> <li>Jan. 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26</li> </ol> </li> <li> <ol> <li>Januar 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26</li> </ol> </li> <li>28.2.-1.12.1515 -&gt; GREGORIAN:CE:1515-02-28:CE:1515-12-01</li> <li>25.-26.2.0800 -&gt; GREGORIAN:CE:0800-02-25:CE:0800-02-26</li> <li>1.9.2022-3.1.2024 -&gt; GREGORIAN:CE:2022-09-01:CE:2024-01-03</li> <li>1848 -&gt; GREGORIAN:CE:1848:CE:1848</li> <li>1849/1850 -&gt; GREGORIAN:CE:1849:CE:1850</li> <li>1849/50 -&gt; GREGORIAN:CE:1849:CE:1850</li> <li>1845-50 -&gt; GREGORIAN:CE:1845:CE:1850</li> <li>840-50 -&gt; GREGORIAN:CE:840:CE:850</li> <li>840-1 -&gt; GREGORIAN:CE:840:CE:841</li> <li>9 BC / 9 B.C. / 9 B.C.E. / 9 BCE -&gt; GREGORIAN:BC:9:BC:9</li> <li>20 BCE - 50 CE -&gt; GREGORIAN:BC:20:CE:50</li> <li>1000-900 av. J.-C. -&gt; GREGORIAN:BC:1000:BC:900</li> <li>45 av. J.-C. -&gt; GREGORIAN:BC:45:BC:45</li> </ul> <p>Parameters:</p> Name Type Description Default <code>string</code> <code>str</code> <p>string to check</p> required <p>Returns:</p> Type Description <code>set[str]</code> <p>(possibly empty) set of DSP-formatted date strings</p> <p>Examples:</p> <pre><code>result = xmllib.find_dates_in_string(\"1849/1850\")\n# result == {\"GREGORIAN:CE:1849:CE:1850\"}\n</code></pre> <pre><code>result = xmllib.find_dates_in_string(\"not a valid date\")\n# result == {}\n</code></pre> <pre><code>result = xmllib.find_dates_in_string(\"first date: 2024. Second: 2025.\")\n# result == {\"GREGORIAN:CE:2024:CE:2024\", \"GREGORIAN:CE:2025:CE:2025\"}\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/value_converters.py</code> <pre><code>def find_dates_in_string(string: str) -&gt; set[str]:\n    \"\"\"\n    Checks if a string contains date values (single dates, or date ranges),\n    and return all found dates as set of DSP-formatted strings.\n    Returns an empty set if no date was found.\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#date).\n\n    Notes:\n        - If no era or calendar is given, dates are interpreted in the Common Era and the Gregorian calendar.\n        - Standalone numbers from 000-2999, in 3/4-digit form, are interpreted as years CE.\n        - If a number (with any number of digits) is followed by CE, C.E., AD, A.D., it is interpreted as years CE.\n        - If a number (with any number of digits) is followed by BCE, BC, B.C., B.C.E., av. J.-C.,\n          it is interpreted as years BCE.\n        - Dates written with slashes are always interpreted in a European manner: 5/11/2021 is the 5th of November.\n        - In the European notation, 2-digit years are expanded to 4 digits, with the current year as watershed:\n            - 30.4.24 -&gt; 30.04.2024\n            - 30.4.50 -&gt; 30.04.1950\n\n    Currently supported date formats:\n        - 0476-09-04 -&gt; GREGORIAN:CE:0476-09-04:CE:0476-09-04\n        - 0476_09_04 -&gt; GREGORIAN:CE:0476-09-04:CE:0476-09-04\n        - 30.4.2021 -&gt; GREGORIAN:CE:2021-04-30:CE:2021-04-30\n        - 30.4.21 -&gt; GREGORIAN:CE:2021-04-30:CE:2021-04-30\n        - 5/11/2021 -&gt; GREGORIAN:CE:2021-11-05:CE:2021-11-05\n        - Jan 26, 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26\n        - 26 Jan 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26\n        - 26 January 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26\n        - 26. Jan. 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26\n        - 26. Januar 1993 -&gt; GREGORIAN:CE:1993-01-26:CE:1993-01-26\n        - 28.2.-1.12.1515 -&gt; GREGORIAN:CE:1515-02-28:CE:1515-12-01\n        - 25.-26.2.0800 -&gt; GREGORIAN:CE:0800-02-25:CE:0800-02-26\n        - 1.9.2022-3.1.2024 -&gt; GREGORIAN:CE:2022-09-01:CE:2024-01-03\n        - 1848 -&gt; GREGORIAN:CE:1848:CE:1848\n        - 1849/1850 -&gt; GREGORIAN:CE:1849:CE:1850\n        - 1849/50 -&gt; GREGORIAN:CE:1849:CE:1850\n        - 1845-50 -&gt; GREGORIAN:CE:1845:CE:1850\n        - 840-50 -&gt; GREGORIAN:CE:840:CE:850\n        - 840-1 -&gt; GREGORIAN:CE:840:CE:841\n        - 9 BC / 9 B.C. / 9 B.C.E. / 9 BCE -&gt; GREGORIAN:BC:9:BC:9\n        - 20 BCE - 50 CE -&gt; GREGORIAN:BC:20:CE:50\n        - 1000-900 av. J.-C. -&gt; GREGORIAN:BC:1000:BC:900\n        - 45 av. J.-C. -&gt; GREGORIAN:BC:45:BC:45\n\n    Args:\n        string: string to check\n\n    Returns:\n        (possibly empty) set of DSP-formatted date strings\n\n    Examples:\n        ```python\n        result = xmllib.find_dates_in_string(\"1849/1850\")\n        # result == {\"GREGORIAN:CE:1849:CE:1850\"}\n        ```\n\n        ```python\n        result = xmllib.find_dates_in_string(\"not a valid date\")\n        # result == {}\n        ```\n\n        ```python\n        result = xmllib.find_dates_in_string(\"first date: 2024. Second: 2025.\")\n        # result == {\"GREGORIAN:CE:2024:CE:2024\", \"GREGORIAN:CE:2025:CE:2025\"}\n        ```\n    \"\"\"\n\n    # sanitise input, just in case that the function was called on an empty or N/A cell\n    if not is_nonempty_value_internal(string):\n        return set()\n    return _find_dates_in_string(string)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/","title":"XMLRoot","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>@dataclass\nclass XMLRoot:\n    shortcode: str\n    default_ontology: str\n    resources: list[AnyResource] = field(default_factory=list)\n    _res_id_to_type_lookup: dict[str, list[str]] = field(default_factory=dict)\n\n    @staticmethod\n    def create_new(shortcode: str, default_ontology: str) -&gt; XMLRoot:\n        \"\"\"\n        Create a new XML root, for one file.\n\n        Args:\n            shortcode: project shortcode\n            default_ontology: name of the default ontology\n\n        Returns:\n            Instance of `XMLRoot`\n\n        Examples:\n            ```python\n            root = xmllib.XMLRoot.create_new(\n                shortcode=\"0000\",\n                default_ontology=\"onto\"\n            )\n            ```\n        \"\"\"\n        return XMLRoot(shortcode=shortcode, default_ontology=default_ontology)\n\n    def add_resource(self, resource: AnyResource) -&gt; XMLRoot:\n        \"\"\"\n        Add one resource to the root.\n\n        Args:\n            resource: any one of:\n                    `Resource`,\n                    `RegionResource`,\n                    `LinkResource`,\n                    `VideoSegmentResource`,\n                    `AudioSegmentResource`\n\n        Returns:\n            The original XMLRoot, with the added resource\n\n        Warning:\n            If the ID of the new resource is already used.\n\n        Examples:\n            ```python\n            resource = xmllib.Resource.create_new(\n                res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n            )\n\n            root = root.add_resource(resource)\n            ```\n        \"\"\"\n        if isinstance(resource, Resource):\n            res_type = resource.restype\n        else:\n            res_type = resource.__class__.__name__\n        if types_used := self._res_id_to_type_lookup.get(resource.res_id):\n            existing_types = [f\"'{x}'\" for x in types_used]\n            msg = (\n                f\"The ID for this resource of type '{res_type}' \"\n                f\"is already used by resource(s) of the following type(s): {', '.join(existing_types)}.\"\n            )\n            info_msg = MessageInfo(\n                message=msg,\n                resource_id=resource.res_id,\n                field=\"Resource ID\",\n            )\n            emit_xmllib_input_warning(info_msg)\n            self._res_id_to_type_lookup[resource.res_id].append(res_type)\n        else:\n            self._res_id_to_type_lookup[resource.res_id] = [res_type]\n        self.resources.append(resource)\n        return self\n\n    def add_resource_multiple(self, resources: Collection[AnyResource]) -&gt; XMLRoot:\n        \"\"\"\n        Add a list of resources to the root.\n\n        Args:\n            resources: a list of:\n                    `Resource`,\n                    `RegionResource`,\n                    `LinkResource`,\n                    `VideoSegmentResource`,\n                    `AudioSegmentResource`\n                    The types of the resources may be mixed.\n\n        Returns:\n            The original XMLRoot, with the added resource\n\n        Warning:\n            If the ID of the new resource is already used.\n\n        Examples:\n            ```python\n            resource_1 = xmllib.Resource.create_new(\n                res_id=\"ID_1\", restype=\":ResourceType\", label=\"label 1\"\n            )\n            resource_2 = xmllib.Resource.create_new(\n                res_id=\"ID_2\", restype=\":ResourceType\", label=\"label 2\"\n            )\n\n            root = root.add_resource_multiple([resource_1, resource_2])\n            ```\n        \"\"\"\n        for res in resources:\n            self.add_resource(res)\n        return self\n\n    def add_resource_optional(self, resource: AnyResource | None) -&gt; XMLRoot:\n        \"\"\"\n        If the resource is not None, add it to the XMLRoot, otherwise return the XMLRoot unchanged.\n\n        Args:\n            resource: any one of:\n                    `Resource`,\n                    `RegionResource`,\n                    `LinkResource`,\n                    `VideoSegmentResource`,\n                    `AudioSegmentResource`\n\n        Returns:\n            The original XMLRoot, with the added value if it was not empty. Else the unchanged original XMLRoot.\n\n        Warning:\n            If the ID of the new resource is already used.\n\n        Examples:\n            ```python\n            resource = xmllib.Resource.create_new(\n                res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n            )\n\n            root = root.add_resource_optional(resource)\n            ```\n\n            ```python\n            root = root.add_resource_optional(None)\n            ```\n        \"\"\"\n        if resource:\n            self.add_resource(resource)\n        return self\n\n    def write_file(self, filepath: str | Path, default_permissions: Permissions | None = None) -&gt; None:\n        \"\"\"\n        Write the finished XML to a file.\n\n        Args:\n            filepath: where to save the file\n            default_permissions: This parameter is deprecated and has no effect.\n                Default permissions can be set in the JSON project file.\n\n        Warning:\n            if the XML is not valid according to the schema\n\n        Examples:\n            ```python\n            root.write_file(\"xml_file_name.xml\")\n            ```\n        \"\"\"\n\n        if default_permissions:\n            msg = (\n                \"You added a default permission. This has no effect. This functionality is deprecated, \"\n                \"because project wide default permissions are set in the JSON project file. \"\n                \"This parameter will be removed soon.\"\n            )\n            warnings.warn(DspToolsFutureWarning(msg))\n\n        root = self.serialise()\n\n        # The logging is only configured when using the CLI entry point.\n        # If this is not disabled, then the statements will also be printed out on the terminal.\n        logger.disable(\"dsp_tools\")\n        validate_root_emit_user_message(root, Path(filepath).parent)\n\n        etree.indent(root, space=\"    \")\n        xml_string = etree.tostring(\n            root,\n            encoding=\"unicode\",\n            pretty_print=True,\n            doctype='&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;',\n        )\n        with open(filepath, \"w\", encoding=\"utf-8\") as f:\n            f.write(xml_string)\n            print(f\"The XML file was successfully saved to {filepath}.\")\n        if file_path := os.getenv(\"XMLLIB_WARNINGS_CSV_SAVEPATH\"):\n            df = pd.read_csv(file_path)\n            if len(df) &gt; 0:\n                msg = f\"{len(df)} warnings occurred, please consult '{file_path}' for details.\"\n                print(BOLD_RED, msg, RESET_TO_DEFAULT)\n            else:\n                msg = \"No warnings occurred during the runtime.\"\n                print(BOLD_GREEN, msg, RESET_TO_DEFAULT)\n\n    def serialise(self) -&gt; etree._Element:\n        \"\"\"\n        Create an `lxml.etree._Element` with the information in the root.\n        If you wish to create a file, we recommend using the `write_file` method instead.\n\n        Returns:\n            The `XMLRoot` serialised as XML\n        \"\"\"\n        root = self._make_root()\n        root.extend(self._get_permissions())\n        author_lookup = _make_authorship_lookup(self.resources)\n        authorship = _serialise_authorship(author_lookup.lookup)\n        root.extend(authorship)\n        serialised_resources = serialise_resources(self.resources, author_lookup)\n        root.extend(serialised_resources)\n        return root\n\n    def _get_permissions(self) -&gt; list[etree._Element]:\n        contains_old_permissions, contains_new_permissions = self._find_permission_types()\n        if contains_old_permissions:\n            msg = (\n                \"Your data contains old permissions. Please migrate to the new ones:\\n\"\n                \" - Permissions.OPEN            -&gt; use Permissions.PUBLIC instead\\n\"\n                \" - Permissions.RESTRICTED      -&gt; use Permissions.PRIVATE instead\\n\"\n                \" - Permissions.RESTRICTED_VIEW -&gt; use Permissions.LIMITED_VIEW instead\\n\"\n            )\n            warnings.warn(msg, category=DspToolsFutureWarning)\n        return XMLPermissions().serialise(contains_old_permissions, contains_new_permissions)\n\n    def _find_permission_types(self) -&gt; tuple[bool, bool]:\n        contains_old_permissions = False\n        contains_new_permissions = False\n        for res in self.resources:\n            if self._is_old(res.permissions):\n                contains_old_permissions = True\n            elif self._is_new(res.permissions):\n                contains_new_permissions = True\n            for val in res.values:\n                if self._is_old(val.permissions):\n                    contains_old_permissions = True\n                elif self._is_new(val.permissions):\n                    contains_new_permissions = True\n            if isinstance(res, Resource):\n                if res.file_value:\n                    if self._is_old(res.file_value.metadata.permissions):\n                        contains_old_permissions = True\n                    elif self._is_new(res.file_value.metadata.permissions):\n                        contains_new_permissions = True\n            if contains_old_permissions and contains_new_permissions:\n                # no need to continue, the end result won't change any more\n                return True, True\n        return contains_old_permissions, contains_new_permissions\n\n    def _is_old(self, perm: Permissions) -&gt; bool:\n        return perm in [Permissions.OPEN, Permissions.RESTRICTED_VIEW, Permissions.RESTRICTED]\n\n    def _is_new(self, perm: Permissions) -&gt; bool:\n        return perm in [Permissions.PUBLIC, Permissions.LIMITED_VIEW, Permissions.PRIVATE]\n\n    def _make_root(self) -&gt; etree._Element:\n        schema_url = (\n            \"https://raw.githubusercontent.com/dasch-swiss/dsp-tools/main/src/dsp_tools/resources/schema/data.xsd\"\n        )\n        schema_location_key = str(etree.QName(\"http://www.w3.org/2001/XMLSchema-instance\", \"schemaLocation\"))\n        schema_location_value = f\"https://dasch.swiss/schema {schema_url}\"\n        return etree.Element(\n            f\"{DASCH_SCHEMA}knora\",\n            attrib={\n                schema_location_key: schema_location_value,\n                \"shortcode\": self.shortcode,\n                \"default-ontology\": self.default_ontology,\n            },\n            nsmap=XML_NAMESPACE_MAP,\n        )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.create_new","title":"<code>create_new</code>","text":"<p>Create a new XML root, for one file.</p> <p>Parameters:</p> Name Type Description Default <code>shortcode</code> <code>str</code> <p>project shortcode</p> required <code>default_ontology</code> <code>str</code> <p>name of the default ontology</p> required <p>Returns:</p> Type Description <code>XMLRoot</code> <p>Instance of <code>XMLRoot</code></p> <p>Examples:</p> <pre><code>root = xmllib.XMLRoot.create_new(\n    shortcode=\"0000\",\n    default_ontology=\"onto\"\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>@staticmethod\ndef create_new(shortcode: str, default_ontology: str) -&gt; XMLRoot:\n    \"\"\"\n    Create a new XML root, for one file.\n\n    Args:\n        shortcode: project shortcode\n        default_ontology: name of the default ontology\n\n    Returns:\n        Instance of `XMLRoot`\n\n    Examples:\n        ```python\n        root = xmllib.XMLRoot.create_new(\n            shortcode=\"0000\",\n            default_ontology=\"onto\"\n        )\n        ```\n    \"\"\"\n    return XMLRoot(shortcode=shortcode, default_ontology=default_ontology)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.add_resource","title":"<code>add_resource</code>","text":"<p>Add one resource to the root.</p> <p>Parameters:</p> Name Type Description Default <code>resource</code> <code>AnyResource</code> <p>any one of:     <code>Resource</code>,     <code>RegionResource</code>,     <code>LinkResource</code>,     <code>VideoSegmentResource</code>,     <code>AudioSegmentResource</code></p> required <p>Returns:</p> Type Description <code>XMLRoot</code> <p>The original XMLRoot, with the added resource</p> Warning <p>If the ID of the new resource is already used.</p> <p>Examples:</p> <pre><code>resource = xmllib.Resource.create_new(\n    res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n)\n\nroot = root.add_resource(resource)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>def add_resource(self, resource: AnyResource) -&gt; XMLRoot:\n    \"\"\"\n    Add one resource to the root.\n\n    Args:\n        resource: any one of:\n                `Resource`,\n                `RegionResource`,\n                `LinkResource`,\n                `VideoSegmentResource`,\n                `AudioSegmentResource`\n\n    Returns:\n        The original XMLRoot, with the added resource\n\n    Warning:\n        If the ID of the new resource is already used.\n\n    Examples:\n        ```python\n        resource = xmllib.Resource.create_new(\n            res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n        )\n\n        root = root.add_resource(resource)\n        ```\n    \"\"\"\n    if isinstance(resource, Resource):\n        res_type = resource.restype\n    else:\n        res_type = resource.__class__.__name__\n    if types_used := self._res_id_to_type_lookup.get(resource.res_id):\n        existing_types = [f\"'{x}'\" for x in types_used]\n        msg = (\n            f\"The ID for this resource of type '{res_type}' \"\n            f\"is already used by resource(s) of the following type(s): {', '.join(existing_types)}.\"\n        )\n        info_msg = MessageInfo(\n            message=msg,\n            resource_id=resource.res_id,\n            field=\"Resource ID\",\n        )\n        emit_xmllib_input_warning(info_msg)\n        self._res_id_to_type_lookup[resource.res_id].append(res_type)\n    else:\n        self._res_id_to_type_lookup[resource.res_id] = [res_type]\n    self.resources.append(resource)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.add_resource_multiple","title":"<code>add_resource_multiple</code>","text":"<p>Add a list of resources to the root.</p> <p>Parameters:</p> Name Type Description Default <code>resources</code> <code>Collection[AnyResource]</code> <p>a list of:     <code>Resource</code>,     <code>RegionResource</code>,     <code>LinkResource</code>,     <code>VideoSegmentResource</code>,     <code>AudioSegmentResource</code>     The types of the resources may be mixed.</p> required <p>Returns:</p> Type Description <code>XMLRoot</code> <p>The original XMLRoot, with the added resource</p> Warning <p>If the ID of the new resource is already used.</p> <p>Examples:</p> <pre><code>resource_1 = xmllib.Resource.create_new(\n    res_id=\"ID_1\", restype=\":ResourceType\", label=\"label 1\"\n)\nresource_2 = xmllib.Resource.create_new(\n    res_id=\"ID_2\", restype=\":ResourceType\", label=\"label 2\"\n)\n\nroot = root.add_resource_multiple([resource_1, resource_2])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>def add_resource_multiple(self, resources: Collection[AnyResource]) -&gt; XMLRoot:\n    \"\"\"\n    Add a list of resources to the root.\n\n    Args:\n        resources: a list of:\n                `Resource`,\n                `RegionResource`,\n                `LinkResource`,\n                `VideoSegmentResource`,\n                `AudioSegmentResource`\n                The types of the resources may be mixed.\n\n    Returns:\n        The original XMLRoot, with the added resource\n\n    Warning:\n        If the ID of the new resource is already used.\n\n    Examples:\n        ```python\n        resource_1 = xmllib.Resource.create_new(\n            res_id=\"ID_1\", restype=\":ResourceType\", label=\"label 1\"\n        )\n        resource_2 = xmllib.Resource.create_new(\n            res_id=\"ID_2\", restype=\":ResourceType\", label=\"label 2\"\n        )\n\n        root = root.add_resource_multiple([resource_1, resource_2])\n        ```\n    \"\"\"\n    for res in resources:\n        self.add_resource(res)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.add_resource_optional","title":"<code>add_resource_optional</code>","text":"<p>If the resource is not None, add it to the XMLRoot, otherwise return the XMLRoot unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>resource</code> <code>AnyResource | None</code> <p>any one of:     <code>Resource</code>,     <code>RegionResource</code>,     <code>LinkResource</code>,     <code>VideoSegmentResource</code>,     <code>AudioSegmentResource</code></p> required <p>Returns:</p> Type Description <code>XMLRoot</code> <p>The original XMLRoot, with the added value if it was not empty. Else the unchanged original XMLRoot.</p> Warning <p>If the ID of the new resource is already used.</p> <p>Examples:</p> <pre><code>resource = xmllib.Resource.create_new(\n    res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n)\n\nroot = root.add_resource_optional(resource)\n</code></pre> <pre><code>root = root.add_resource_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>def add_resource_optional(self, resource: AnyResource | None) -&gt; XMLRoot:\n    \"\"\"\n    If the resource is not None, add it to the XMLRoot, otherwise return the XMLRoot unchanged.\n\n    Args:\n        resource: any one of:\n                `Resource`,\n                `RegionResource`,\n                `LinkResource`,\n                `VideoSegmentResource`,\n                `AudioSegmentResource`\n\n    Returns:\n        The original XMLRoot, with the added value if it was not empty. Else the unchanged original XMLRoot.\n\n    Warning:\n        If the ID of the new resource is already used.\n\n    Examples:\n        ```python\n        resource = xmllib.Resource.create_new(\n            res_id=\"ID\", restype=\":ResourceType\", label=\"label\"\n        )\n\n        root = root.add_resource_optional(resource)\n        ```\n\n        ```python\n        root = root.add_resource_optional(None)\n        ```\n    \"\"\"\n    if resource:\n        self.add_resource(resource)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.write_file","title":"<code>write_file</code>","text":"<p>Write the finished XML to a file.</p> <p>Parameters:</p> Name Type Description Default <code>filepath</code> <code>str | Path</code> <p>where to save the file</p> required <code>default_permissions</code> <code>Permissions | None</code> <p>This parameter is deprecated and has no effect. Default permissions can be set in the JSON project file.</p> <code>None</code> Warning <p>if the XML is not valid according to the schema</p> <p>Examples:</p> <pre><code>root.write_file(\"xml_file_name.xml\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>def write_file(self, filepath: str | Path, default_permissions: Permissions | None = None) -&gt; None:\n    \"\"\"\n    Write the finished XML to a file.\n\n    Args:\n        filepath: where to save the file\n        default_permissions: This parameter is deprecated and has no effect.\n            Default permissions can be set in the JSON project file.\n\n    Warning:\n        if the XML is not valid according to the schema\n\n    Examples:\n        ```python\n        root.write_file(\"xml_file_name.xml\")\n        ```\n    \"\"\"\n\n    if default_permissions:\n        msg = (\n            \"You added a default permission. This has no effect. This functionality is deprecated, \"\n            \"because project wide default permissions are set in the JSON project file. \"\n            \"This parameter will be removed soon.\"\n        )\n        warnings.warn(DspToolsFutureWarning(msg))\n\n    root = self.serialise()\n\n    # The logging is only configured when using the CLI entry point.\n    # If this is not disabled, then the statements will also be printed out on the terminal.\n    logger.disable(\"dsp_tools\")\n    validate_root_emit_user_message(root, Path(filepath).parent)\n\n    etree.indent(root, space=\"    \")\n    xml_string = etree.tostring(\n        root,\n        encoding=\"unicode\",\n        pretty_print=True,\n        doctype='&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;',\n    )\n    with open(filepath, \"w\", encoding=\"utf-8\") as f:\n        f.write(xml_string)\n        print(f\"The XML file was successfully saved to {filepath}.\")\n    if file_path := os.getenv(\"XMLLIB_WARNINGS_CSV_SAVEPATH\"):\n        df = pd.read_csv(file_path)\n        if len(df) &gt; 0:\n            msg = f\"{len(df)} warnings occurred, please consult '{file_path}' for details.\"\n            print(BOLD_RED, msg, RESET_TO_DEFAULT)\n        else:\n            msg = \"No warnings occurred during the runtime.\"\n            print(BOLD_GREEN, msg, RESET_TO_DEFAULT)\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/xmlroot/#xmllib.XMLRoot.serialise","title":"<code>serialise</code>","text":"<p>Create an <code>lxml.etree._Element</code> with the information in the root. If you wish to create a file, we recommend using the <code>write_file</code> method instead.</p> <p>Returns:</p> Type Description <code>_Element</code> <p>The <code>XMLRoot</code> serialised as XML</p> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/root.py</code> <pre><code>def serialise(self) -&gt; etree._Element:\n    \"\"\"\n    Create an `lxml.etree._Element` with the information in the root.\n    If you wish to create a file, we recommend using the `write_file` method instead.\n\n    Returns:\n        The `XMLRoot` serialised as XML\n    \"\"\"\n    root = self._make_root()\n    root.extend(self._get_permissions())\n    author_lookup = _make_authorship_lookup(self.resources)\n    authorship = _serialise_authorship(author_lookup.lookup)\n    root.extend(authorship)\n    serialised_resources = serialise_resources(self.resources, author_lookup)\n    root.extend(serialised_resources)\n    return root\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/","title":"AudioSegmentResource","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@dataclass\nclass AudioSegmentResource:\n    res_id: str\n    label: str\n    segment_bounds: SegmentBounds\n    values: list[Value]\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS\n    migration_metadata: MigrationMetadata | None = None\n\n    @staticmethod\n    def create_new(\n        res_id: str,\n        label: str,\n        segment_of: str,\n        segment_start: float | int | str,\n        segment_end: float | int | str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Creates a new audio segment resource, i.e. a time span of an AudioRepresentation.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#video-segment-and-audio-segment)\n\n        Args:\n            res_id: ID of this audio segment resource\n            label: label of this audio segment resource\n            segment_of: ID of the audio resource that this segment refers to (cardinality 1)\n            segment_start: start of the segment in seconds (cardinality 1)\n            segment_end: end of the segment in seconds (cardinality 1)\n            permissions: permissions of this resource\n\n        Returns:\n            An audio segment resource\n        \"\"\"\n        _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n        res_id = str(res_id)\n        lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n        segment_of_val = LinkValue.new(\n            value=segment_of, prop_name=\"isSegmentOf\", permissions=permissions, comment=None, resource_id=res_id\n        )\n        return AudioSegmentResource(\n            res_id=res_id,\n            label=lbl,\n            segment_bounds=SegmentBounds(segment_start, segment_end, permissions, res_id),\n            values=[segment_of_val],\n            permissions=permissions,\n        )\n\n    def add_title(\n        self,\n        title: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add a title to the resource.\n\n        Args:\n            title: text\n            permissions: permissions of the value\n            comment: comments on the value\n\n        Returns:\n            The original resource, with the added title\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_title(\"segment title\")\n            ```\n        \"\"\"\n        existing_title = [x for x in self.values if x.prop_name == \"hasTitle\"]\n        if any(existing_title):\n            _warn_value_exists(\n                old_value=existing_title.pop(0).value, new_value=title, value_field=\"title\", res_id=self.res_id\n            )\n        self.values.append(\n            SimpleText.new(\n                value=title,\n                prop_name=\"hasTitle\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_title_optional(\n        self,\n        title: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as title, otherwise return the resource unchanged.\n\n        Args:\n            title: text or empty value\n            permissions: permissions of the value\n            comment: comments on the value\n\n        Returns:\n            The original resource, with the added title\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_title(\"segment title\")\n            ```\n\n            ```python\n            audio_segment = audio_segment.add_title(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(title):\n            self.add_title(title, permissions, comment)\n        return self\n\n    def add_comment(\n        self,\n        text: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add a comment to the resource\n\n        Args:\n            text: text of the comment\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_comment(\"comment text\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=text,\n                prop_name=\"hasComment\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_comment_multiple(\n        self,\n        texts: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add several comments to the resource\n\n        Args:\n            texts: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment about these comments\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comments\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n        for v in vals:\n            self.add_comment(v, permissions, comment, newline_replacement)\n        return self\n\n    def add_comment_optional(\n        self,\n        text: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n        Args:\n            text: text of the comment (or empty value)\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_comment_optional(\"comment text\")\n            ```\n\n            ```python\n            audio_segment = audio_segment.add_comment_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(text):\n            self.add_comment(text, permissions, comment, newline_replacement)\n        return self\n\n    def add_description(\n        self,\n        description: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add a description to the resource\n\n        Args:\n            description: text\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added description\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_description(\"description text\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=description,\n                prop_name=\"hasDescription\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_description_multiple(\n        self,\n        descriptions: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add several descriptions to the resource\n\n        Args:\n            descriptions: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added descriptions\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_description_multiple([\"description 1\", \"description 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(descriptions, \"description\", self.res_id)\n        for v in vals:\n            self.add_description(v, permissions, comment, newline_replacement)\n        return self\n\n    def add_description_optional(\n        self,\n        description: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as description, otherwise return the resource unchanged.\n\n        Args:\n            description: text or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added description\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_description_optional(\"description text\")\n            ```\n\n            ```python\n            audio_segment = audio_segment.add_description_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(description):\n            self.add_description(description, permissions, comment, newline_replacement)\n        return self\n\n    def add_keyword(\n        self,\n        keyword: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add a keyword to the resource\n\n        Args:\n            keyword: text\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keyword\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_keyword(\"keyword\")\n            ```\n        \"\"\"\n        self.values.append(\n            SimpleText.new(\n                value=keyword,\n                prop_name=\"hasKeyword\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_keyword_multiple(\n        self,\n        keywords: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add several keywords to the resource\n\n        Args:\n            keywords: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keywords\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(keywords, \"keywords\", self.res_id)\n        for v in vals:\n            self.add_keyword(v, permissions, comment)\n        return self\n\n    def add_keyword_optional(\n        self,\n        keyword: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as keyword, otherwise return the resource unchanged.\n\n        Args:\n            keyword: text or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keyword\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_keyword_optional(\"keyword\")\n            ```\n\n            ```python\n            audio_segment = audio_segment.add_keyword_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(keyword):\n            self.add_keyword(keyword, permissions, comment)\n        return self\n\n    def add_relates_to(\n        self,\n        relates_to: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add a link to a related resource\n\n        Args:\n            relates_to: ID of the related resource\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resource\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_relates_to(\"target_resource_id\")\n            ```\n        \"\"\"\n        self.values.append(\n            LinkValue.new(\n                value=relates_to,\n                prop_name=\"relatesTo\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_relates_to_multiple(\n        self,\n        relates_to: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        Add several links to related resources\n\n        Args:\n            relates_to: list of IDs of the related resources\n            permissions: optional permissions of these values\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resources\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(relates_to, \"relatesTo\", self.res_id)\n        for v in vals:\n            self.add_relates_to(v, permissions, comment)\n        return self\n\n    def add_relates_to_optional(\n        self,\n        relates_to: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; AudioSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as related resource, otherwise return the resource unchanged.\n\n        Args:\n            relates_to: ID of the related resource or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resources\n\n        Examples:\n            ```python\n            audio_segment = audio_segment.add_relates_to_optional(\"target_resource_id\")\n            ```\n\n            ```python\n            audio_segment = audio_segment.add_relates_to_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(relates_to):\n            self.add_relates_to(relates_to, permissions, comment)\n        return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.create_new","title":"<code>create_new</code>","text":"<p>Creates a new audio segment resource, i.e. a time span of an AudioRepresentation.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>res_id</code> <code>str</code> <p>ID of this audio segment resource</p> required <code>label</code> <code>str</code> <p>label of this audio segment resource</p> required <code>segment_of</code> <code>str</code> <p>ID of the audio resource that this segment refers to (cardinality 1)</p> required <code>segment_start</code> <code>float | int | str</code> <p>start of the segment in seconds (cardinality 1)</p> required <code>segment_end</code> <code>float | int | str</code> <p>end of the segment in seconds (cardinality 1)</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of this resource</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>An audio segment resource</p> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@staticmethod\ndef create_new(\n    res_id: str,\n    label: str,\n    segment_of: str,\n    segment_start: float | int | str,\n    segment_end: float | int | str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Creates a new audio segment resource, i.e. a time span of an AudioRepresentation.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#video-segment-and-audio-segment)\n\n    Args:\n        res_id: ID of this audio segment resource\n        label: label of this audio segment resource\n        segment_of: ID of the audio resource that this segment refers to (cardinality 1)\n        segment_start: start of the segment in seconds (cardinality 1)\n        segment_end: end of the segment in seconds (cardinality 1)\n        permissions: permissions of this resource\n\n    Returns:\n        An audio segment resource\n    \"\"\"\n    _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n    res_id = str(res_id)\n    lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n    segment_of_val = LinkValue.new(\n        value=segment_of, prop_name=\"isSegmentOf\", permissions=permissions, comment=None, resource_id=res_id\n    )\n    return AudioSegmentResource(\n        res_id=res_id,\n        label=lbl,\n        segment_bounds=SegmentBounds(segment_start, segment_end, permissions, res_id),\n        values=[segment_of_val],\n        permissions=permissions,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_title","title":"<code>add_title</code>","text":"<p>Add a title to the resource.</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of the value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>comments on the value</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added title</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_title(\"segment title\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_title(\n    self,\n    title: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add a title to the resource.\n\n    Args:\n        title: text\n        permissions: permissions of the value\n        comment: comments on the value\n\n    Returns:\n        The original resource, with the added title\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_title(\"segment title\")\n        ```\n    \"\"\"\n    existing_title = [x for x in self.values if x.prop_name == \"hasTitle\"]\n    if any(existing_title):\n        _warn_value_exists(\n            old_value=existing_title.pop(0).value, new_value=title, value_field=\"title\", res_id=self.res_id\n        )\n    self.values.append(\n        SimpleText.new(\n            value=title,\n            prop_name=\"hasTitle\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_title_optional","title":"<code>add_title_optional</code>","text":"<p>If the value is not empty, add it as title, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of the value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>comments on the value</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added title</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_title(\"segment title\")\n</code></pre> <pre><code>audio_segment = audio_segment.add_title(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_title_optional(\n    self,\n    title: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as title, otherwise return the resource unchanged.\n\n    Args:\n        title: text or empty value\n        permissions: permissions of the value\n        comment: comments on the value\n\n    Returns:\n        The original resource, with the added title\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_title(\"segment title\")\n        ```\n\n        ```python\n        audio_segment = audio_segment.add_title(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(title):\n        self.add_title(title, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_comment","title":"<code>add_comment</code>","text":"<p>Add a comment to the resource</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>text of the comment</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_comment(\"comment text\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment(\n    self,\n    text: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add a comment to the resource\n\n    Args:\n        text: text of the comment\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_comment(\"comment text\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=text,\n            prop_name=\"hasComment\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_comment_multiple","title":"<code>add_comment_multiple</code>","text":"<p>Add several comments to the resource</p> <p>Parameters:</p> Name Type Description Default <code>texts</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about these comments</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added comments</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_multiple(\n    self,\n    texts: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add several comments to the resource\n\n    Args:\n        texts: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment about these comments\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comments\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n    for v in vals:\n        self.add_comment(v, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_comment_optional","title":"<code>add_comment_optional</code>","text":"<p>If the value is not empty, add it as comment, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>Any</code> <p>text of the comment (or empty value)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_comment_optional(\"comment text\")\n</code></pre> <pre><code>audio_segment = audio_segment.add_comment_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_optional(\n    self,\n    text: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n    Args:\n        text: text of the comment (or empty value)\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_comment_optional(\"comment text\")\n        ```\n\n        ```python\n        audio_segment = audio_segment.add_comment_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(text):\n        self.add_comment(text, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_description","title":"<code>add_description</code>","text":"<p>Add a description to the resource</p> <p>Parameters:</p> Name Type Description Default <code>description</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added description</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_description(\"description text\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description(\n    self,\n    description: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add a description to the resource\n\n    Args:\n        description: text\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added description\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_description(\"description text\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=description,\n            prop_name=\"hasDescription\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_description_multiple","title":"<code>add_description_multiple</code>","text":"<p>Add several descriptions to the resource</p> <p>Parameters:</p> Name Type Description Default <code>descriptions</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added descriptions</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_description_multiple([\"description 1\", \"description 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description_multiple(\n    self,\n    descriptions: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add several descriptions to the resource\n\n    Args:\n        descriptions: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added descriptions\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_description_multiple([\"description 1\", \"description 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(descriptions, \"description\", self.res_id)\n    for v in vals:\n        self.add_description(v, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_description_optional","title":"<code>add_description_optional</code>","text":"<p>If the value is not empty, add it as description, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>description</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added description</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_description_optional(\"description text\")\n</code></pre> <pre><code>audio_segment = audio_segment.add_description_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description_optional(\n    self,\n    description: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as description, otherwise return the resource unchanged.\n\n    Args:\n        description: text or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added description\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_description_optional(\"description text\")\n        ```\n\n        ```python\n        audio_segment = audio_segment.add_description_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(description):\n        self.add_description(description, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_keyword","title":"<code>add_keyword</code>","text":"<p>Add a keyword to the resource</p> <p>Parameters:</p> Name Type Description Default <code>keyword</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added keyword</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_keyword(\"keyword\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword(\n    self,\n    keyword: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add a keyword to the resource\n\n    Args:\n        keyword: text\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keyword\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_keyword(\"keyword\")\n        ```\n    \"\"\"\n    self.values.append(\n        SimpleText.new(\n            value=keyword,\n            prop_name=\"hasKeyword\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_keyword_multiple","title":"<code>add_keyword_multiple</code>","text":"<p>Add several keywords to the resource</p> <p>Parameters:</p> Name Type Description Default <code>keywords</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added keywords</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword_multiple(\n    self,\n    keywords: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add several keywords to the resource\n\n    Args:\n        keywords: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keywords\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(keywords, \"keywords\", self.res_id)\n    for v in vals:\n        self.add_keyword(v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_keyword_optional","title":"<code>add_keyword_optional</code>","text":"<p>If the value is not empty, add it as keyword, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>keyword</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added keyword</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_keyword_optional(\"keyword\")\n</code></pre> <pre><code>audio_segment = audio_segment.add_keyword_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword_optional(\n    self,\n    keyword: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as keyword, otherwise return the resource unchanged.\n\n    Args:\n        keyword: text or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keyword\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_keyword_optional(\"keyword\")\n        ```\n\n        ```python\n        audio_segment = audio_segment.add_keyword_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(keyword):\n        self.add_keyword(keyword, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_relates_to","title":"<code>add_relates_to</code>","text":"<p>Add a link to a related resource</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>str</code> <p>ID of the related resource</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added related resource</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_relates_to(\"target_resource_id\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to(\n    self,\n    relates_to: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add a link to a related resource\n\n    Args:\n        relates_to: ID of the related resource\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resource\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_relates_to(\"target_resource_id\")\n        ```\n    \"\"\"\n    self.values.append(\n        LinkValue.new(\n            value=relates_to,\n            prop_name=\"relatesTo\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_relates_to_multiple","title":"<code>add_relates_to_multiple</code>","text":"<p>Add several links to related resources</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>Collection[str]</code> <p>list of IDs of the related resources</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added related resources</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to_multiple(\n    self,\n    relates_to: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    Add several links to related resources\n\n    Args:\n        relates_to: list of IDs of the related resources\n        permissions: optional permissions of these values\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resources\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(relates_to, \"relatesTo\", self.res_id)\n    for v in vals:\n        self.add_relates_to(v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/audio-segment-resource/#xmllib.AudioSegmentResource.add_relates_to_optional","title":"<code>add_relates_to_optional</code>","text":"<p>If the value is not empty, add it as related resource, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>Any</code> <p>ID of the related resource or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>AudioSegmentResource</code> <p>The original resource, with the added related resources</p> <p>Examples:</p> <pre><code>audio_segment = audio_segment.add_relates_to_optional(\"target_resource_id\")\n</code></pre> <pre><code>audio_segment = audio_segment.add_relates_to_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to_optional(\n    self,\n    relates_to: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; AudioSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as related resource, otherwise return the resource unchanged.\n\n    Args:\n        relates_to: ID of the related resource or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resources\n\n    Examples:\n        ```python\n        audio_segment = audio_segment.add_relates_to_optional(\"target_resource_id\")\n        ```\n\n        ```python\n        audio_segment = audio_segment.add_relates_to_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(relates_to):\n        self.add_relates_to(relates_to, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/link-resource/","title":"LinkResource","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@dataclass\nclass LinkResource:\n    res_id: str\n    label: str\n    values: list[Value]\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS\n    migration_metadata: MigrationMetadata | None = None\n\n    @staticmethod\n    def create_new(\n        res_id: str,\n        label: str,\n        link_to: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    ) -&gt; LinkResource:\n        \"\"\"\n        Creates a new link resource.\n        A link resource is like a container that groups together several other resources of different classes.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#link)\n\n        Args:\n            res_id: ID of this link resource\n            label: label of this link resource\n            link_to: IDs of the resources that should be linked together (cardinality 1-n)\n            permissions: permissions of this link resource\n\n        Returns:\n            A link resource\n\n        Examples:\n            ```python\n            link_resource = xmllib.LinkResource.create_new(\n                res_id=\"ID\",\n                label=\"label\",\n                link_to=[\"target_resource_id_1\", \"target_resource_id_2\"],\n            )\n            ```\n        \"\"\"\n        _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n        res_id = str(res_id)\n        lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n        links_to = check_and_fix_collection_input(link_to, \"hasLinkTo\", res_id)\n        link_vals: list[Value] = [\n            LinkValue.new(value=x, prop_name=\"hasLinkTo\", resource_id=res_id, comment=None, permissions=permissions)\n            for x in links_to\n        ]\n        return LinkResource(\n            res_id=res_id,\n            label=lbl,\n            values=link_vals,\n            permissions=permissions,\n        )\n\n    def add_comment(\n        self,\n        text: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; LinkResource:\n        \"\"\"\n        Add a comment to the resource\n\n        Args:\n            text: text of the comment\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            link_resource = link_resource.add_comment(\"comment text\")\n            ```\n\n            ```python\n            link_resource = link_resource.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=text,\n                prop_name=\"hasComment\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_comment_multiple(\n        self,\n        texts: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; LinkResource:\n        \"\"\"\n        Add several comments to the resource\n\n        Args:\n            texts: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comments\n\n        Examples:\n            ```python\n            link_resource = link_resource.add_comment_multiple([\"comment 1\", \"comment 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n        for v in vals:\n            self.add_comment(v, permissions, comment, newline_replacement)\n        return self\n\n    def add_comment_optional(\n        self,\n        text: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; LinkResource:\n        \"\"\"\n        If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n        Args:\n            text: text of the comment (or empty value)\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            link_resource = link_resource.add_comment_optional(\"comment text\")\n            ```\n\n            ```python\n            link_resource = link_resource.add_comment_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(text):\n            return self.add_comment(text, permissions, comment, newline_replacement)\n        return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/link-resource/#xmllib.LinkResource.create_new","title":"<code>create_new</code>","text":"<p>Creates a new link resource. A link resource is like a container that groups together several other resources of different classes.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>res_id</code> <code>str</code> <p>ID of this link resource</p> required <code>label</code> <code>str</code> <p>label of this link resource</p> required <code>link_to</code> <code>Collection[str]</code> <p>IDs of the resources that should be linked together (cardinality 1-n)</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of this link resource</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <p>Returns:</p> Type Description <code>LinkResource</code> <p>A link resource</p> <p>Examples:</p> <pre><code>link_resource = xmllib.LinkResource.create_new(\n    res_id=\"ID\",\n    label=\"label\",\n    link_to=[\"target_resource_id_1\", \"target_resource_id_2\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@staticmethod\ndef create_new(\n    res_id: str,\n    label: str,\n    link_to: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n) -&gt; LinkResource:\n    \"\"\"\n    Creates a new link resource.\n    A link resource is like a container that groups together several other resources of different classes.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#link)\n\n    Args:\n        res_id: ID of this link resource\n        label: label of this link resource\n        link_to: IDs of the resources that should be linked together (cardinality 1-n)\n        permissions: permissions of this link resource\n\n    Returns:\n        A link resource\n\n    Examples:\n        ```python\n        link_resource = xmllib.LinkResource.create_new(\n            res_id=\"ID\",\n            label=\"label\",\n            link_to=[\"target_resource_id_1\", \"target_resource_id_2\"],\n        )\n        ```\n    \"\"\"\n    _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n    res_id = str(res_id)\n    lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n    links_to = check_and_fix_collection_input(link_to, \"hasLinkTo\", res_id)\n    link_vals: list[Value] = [\n        LinkValue.new(value=x, prop_name=\"hasLinkTo\", resource_id=res_id, comment=None, permissions=permissions)\n        for x in links_to\n    ]\n    return LinkResource(\n        res_id=res_id,\n        label=lbl,\n        values=link_vals,\n        permissions=permissions,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/link-resource/#xmllib.LinkResource.add_comment","title":"<code>add_comment</code>","text":"<p>Add a comment to the resource</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>text of the comment</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>LinkResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>link_resource = link_resource.add_comment(\"comment text\")\n</code></pre> <pre><code>link_resource = link_resource.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment(\n    self,\n    text: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; LinkResource:\n    \"\"\"\n    Add a comment to the resource\n\n    Args:\n        text: text of the comment\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        link_resource = link_resource.add_comment(\"comment text\")\n        ```\n\n        ```python\n        link_resource = link_resource.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=text,\n            prop_name=\"hasComment\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/link-resource/#xmllib.LinkResource.add_comment_multiple","title":"<code>add_comment_multiple</code>","text":"<p>Add several comments to the resource</p> <p>Parameters:</p> Name Type Description Default <code>texts</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>LinkResource</code> <p>The original resource, with the added comments</p> <p>Examples:</p> <pre><code>link_resource = link_resource.add_comment_multiple([\"comment 1\", \"comment 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_multiple(\n    self,\n    texts: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; LinkResource:\n    \"\"\"\n    Add several comments to the resource\n\n    Args:\n        texts: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comments\n\n    Examples:\n        ```python\n        link_resource = link_resource.add_comment_multiple([\"comment 1\", \"comment 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n    for v in vals:\n        self.add_comment(v, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/link-resource/#xmllib.LinkResource.add_comment_optional","title":"<code>add_comment_optional</code>","text":"<p>If the value is not empty, add it as comment, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>Any</code> <p>text of the comment (or empty value)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>LinkResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>link_resource = link_resource.add_comment_optional(\"comment text\")\n</code></pre> <pre><code>link_resource = link_resource.add_comment_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_optional(\n    self,\n    text: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; LinkResource:\n    \"\"\"\n    If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n    Args:\n        text: text of the comment (or empty value)\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        link_resource = link_resource.add_comment_optional(\"comment text\")\n        ```\n\n        ```python\n        link_resource = link_resource.add_comment_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(text):\n        return self.add_comment(text, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/","title":"RegionResource","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@dataclass\nclass RegionResource:\n    res_id: str\n    label: str\n    values: list[Value]\n    geometry: GeometryShape | None\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS\n    migration_metadata: MigrationMetadata | None = None\n\n    @staticmethod\n    def create_new(\n        res_id: str,\n        label: str,\n        region_of: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Creates a new region resource.\n        A region is a region of interest (ROI) in a StillImageRepresentation.\n\n        Exactly one geometry shape has to be added to the resource with one of the following methods:\n        `add_rectangle`, `add_polygon`, `add_circle` (see documentation below for more information).\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#region)\n\n        Args:\n            res_id: ID of this region resource\n            label: label of this region resource\n            region_of: ID of the image resource that this region refers to (cardinality 1)\n            permissions: permissions of this region resource\n\n        Returns:\n            A region resource\n\n        Examples:\n            ```python\n            region = xmllib.RegionResource.create_new(\n                res_id=\"ID\",\n                label=\"label\",\n                region_of=\"image_id\",\n            )\n            ```\n        \"\"\"\n        _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n        res_id = str(res_id)\n        lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n        return RegionResource(\n            res_id=res_id,\n            label=lbl,\n            values=[\n                LinkValue.new(\n                    value=region_of, prop_name=\"isRegionOf\", resource_id=res_id, comment=None, permissions=permissions\n                )\n            ],\n            geometry=None,\n            permissions=permissions,\n        )\n\n    def add_rectangle(\n        self,\n        point1: tuple[float, float],\n        point2: tuple[float, float],\n        line_width: float = 2,\n        color: str = \"#5b24bf\",\n        active: bool = True,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Add a rectangle shape to the region.\n\n        [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n        Args:\n            point1: first point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)\n            point2: second point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)\n            line_width: A number in pixels between 1 - 5\n            color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n                The default value was chosen as it is distinguishable for most color-blind people.\n            active: If set to `False`, the region is marked as 'deleted'\n\n        Returns:\n            Region with added rectangle\n\n        Examples:\n            ```python\n            region = region.add_rectangle(\n                point1=(0.1, 0.1),\n                point2=(0.2, 0.2),\n            )\n            ```\n\n            ```python\n            # with custom display values\n            region = region.add_rectangle(\n                point1=(0.1, 0.1),\n                point2=(0.2, 0.2),\n                line_width=3,\n                color=\"#32a873\",\n            )\n            ```\n        \"\"\"\n        self.geometry = Rectangle(\n            point1=GeometryPoint(point1[0], point1[1], self.res_id),\n            point2=GeometryPoint(point2[0], point2[1], self.res_id),\n            line_width=line_width,\n            color=color,\n            active=active,\n            resource_id=self.res_id,\n        )\n        return self\n\n    def add_polygon(\n        self,\n        points: list[tuple[float, float]],\n        line_width: float = 2,\n        color: str = \"#5b24bf\",\n        active: bool = True,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Add a polygon shape to the region.\n        A polygon should have at least three points.\n        If you wish to create a rectangle, please use the designated `add_rectangle` method.\n\n        [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n        **Please note that this cannot currently be displayed in the dsp-app.**\n\n        Args:\n            points: list of tuples containing two numbers between 0 and 1 in the format (x, y)\n            line_width: A number in pixels between 1 - 5\n            color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n                The default value was chosen as it is distinguishable for most color-blind people.\n            active: If set to `False` the region is marked as 'deleted'\n\n        Returns:\n            Region with added polygon\n\n        Examples:\n            ```python\n            region = region.add_polygon(\n                points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n            )\n            ```\n\n            ```python\n            # with custom display values\n            region = region.add_polygon(\n                points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n                line_width=3,\n                color=\"#32a873\",\n            )\n            ```\n        \"\"\"\n        geom_points = [GeometryPoint(val[0], val[1], self.res_id) for val in points]\n        self.geometry = Polygon(\n            points=geom_points, line_width=line_width, color=color, active=active, resource_id=self.res_id\n        )\n        return self\n\n    def add_circle(\n        self,\n        center: tuple[float, float],\n        radius: tuple[float, float],\n        line_width: float = 2,\n        color: str = \"#5b24bf\",\n        active: bool = True,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Add a circle shape to the region.\n\n        [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n        **Please note that this cannot currently be displayed in the dsp-app.**\n\n        Args:\n            center: center of the circle, represented as two numbers between 0 and 1 in the format (x, y)\n            radius: radius of the circle, represented as a 2-dimensional vector,\n                i.e. two numbers between 0 and 1 in the format (x, y)\n            line_width: A number in pixels between 1 - 5\n            color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n                The default value was chosen as it is distinguishable for most color-blind people.\n            active: If set to `False` the region is marked as 'deleted'\n\n        Returns:\n            Region with added circle\n\n        Examples:\n            ```python\n            region = region.add_circle(\n                center=(0.1, 0.1),\n                radius=(0.2, 0.2),\n            )\n            ```\n\n            ```python\n            # with custom display values\n            region = region.add_circle(\n                center=(0.1, 0.1),\n                radius=(0.2, 0.2),\n                line_width=3,\n                color=\"#32a873\",\n            )\n            ```\n        \"\"\"\n        self.geometry = Circle(\n            center=GeometryPoint(center[0], center[1], self.res_id),\n            radius=Vector(radius[0], radius[1], self.res_id),\n            line_width=line_width,\n            color=color,\n            active=active,\n            resource_id=self.res_id,\n        )\n        return self\n\n    def add_comment(\n        self,\n        text: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Add a comment to the region\n\n        Args:\n            text: text of the comment\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original region, with the added comment\n\n        Examples:\n            ```python\n            region = region.add_comment(\"comment text\")\n            ```\n\n            ```python\n            region = region.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=text,\n                prop_name=\"hasComment\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_comment_multiple(\n        self,\n        texts: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; RegionResource:\n        \"\"\"\n        Add several comments to the region\n\n        Args:\n            texts: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment about these comments\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original region, with the added comments\n\n        Examples:\n            ```python\n            region = region.add_comment_multiple([\"comment 1\", \"comment 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n        comnts = [\n            Richtext.new(\n                value=x,\n                prop_name=\"hasComment\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n            for x in vals\n        ]\n        self.values.extend(comnts)\n        return self\n\n    def add_comment_optional(\n        self,\n        text: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; RegionResource:\n        \"\"\"\n        If the value is not empty, add it as comment, otherwise return the region unchanged.\n\n        Args:\n            text: text of the comment (or empty value)\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original region, with the added comment\n\n        Examples:\n            ```python\n            region = region.add_comment_optional(\"comment text\")\n            ```\n\n            ```python\n            region = region.add_comment_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(text):\n            return self.add_comment(text, permissions, comment, newline_replacement)\n        return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.create_new","title":"<code>create_new</code>","text":"<p>Creates a new region resource. A region is a region of interest (ROI) in a StillImageRepresentation.</p> <p>Exactly one geometry shape has to be added to the resource with one of the following methods: <code>add_rectangle</code>, <code>add_polygon</code>, <code>add_circle</code> (see documentation below for more information).</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>res_id</code> <code>str</code> <p>ID of this region resource</p> required <code>label</code> <code>str</code> <p>label of this region resource</p> required <code>region_of</code> <code>str</code> <p>ID of the image resource that this region refers to (cardinality 1)</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of this region resource</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>A region resource</p> <p>Examples:</p> <pre><code>region = xmllib.RegionResource.create_new(\n    res_id=\"ID\",\n    label=\"label\",\n    region_of=\"image_id\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@staticmethod\ndef create_new(\n    res_id: str,\n    label: str,\n    region_of: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n) -&gt; RegionResource:\n    \"\"\"\n    Creates a new region resource.\n    A region is a region of interest (ROI) in a StillImageRepresentation.\n\n    Exactly one geometry shape has to be added to the resource with one of the following methods:\n    `add_rectangle`, `add_polygon`, `add_circle` (see documentation below for more information).\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#region)\n\n    Args:\n        res_id: ID of this region resource\n        label: label of this region resource\n        region_of: ID of the image resource that this region refers to (cardinality 1)\n        permissions: permissions of this region resource\n\n    Returns:\n        A region resource\n\n    Examples:\n        ```python\n        region = xmllib.RegionResource.create_new(\n            res_id=\"ID\",\n            label=\"label\",\n            region_of=\"image_id\",\n        )\n        ```\n    \"\"\"\n    _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n    res_id = str(res_id)\n    lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n    return RegionResource(\n        res_id=res_id,\n        label=lbl,\n        values=[\n            LinkValue.new(\n                value=region_of, prop_name=\"isRegionOf\", resource_id=res_id, comment=None, permissions=permissions\n            )\n        ],\n        geometry=None,\n        permissions=permissions,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_rectangle","title":"<code>add_rectangle</code>","text":"<p>Add a rectangle shape to the region.</p> <p>For a visual example see the XML documentation</p> <p>Parameters:</p> Name Type Description Default <code>point1</code> <code>tuple[float, float]</code> <p>first point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)</p> required <code>point2</code> <code>tuple[float, float]</code> <p>second point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)</p> required <code>line_width</code> <code>float</code> <p>A number in pixels between 1 - 5</p> <code>2</code> <code>color</code> <code>str</code> <p>A hexadecimal color value which starts with a <code>#</code> followed by 3 or 6 numerals. The default value was chosen as it is distinguishable for most color-blind people.</p> <code>'#5b24bf'</code> <code>active</code> <code>bool</code> <p>If set to <code>False</code>, the region is marked as 'deleted'</p> <code>True</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>Region with added rectangle</p> <p>Examples:</p> <pre><code>region = region.add_rectangle(\n    point1=(0.1, 0.1),\n    point2=(0.2, 0.2),\n)\n</code></pre> <pre><code># with custom display values\nregion = region.add_rectangle(\n    point1=(0.1, 0.1),\n    point2=(0.2, 0.2),\n    line_width=3,\n    color=\"#32a873\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_rectangle(\n    self,\n    point1: tuple[float, float],\n    point2: tuple[float, float],\n    line_width: float = 2,\n    color: str = \"#5b24bf\",\n    active: bool = True,\n) -&gt; RegionResource:\n    \"\"\"\n    Add a rectangle shape to the region.\n\n    [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n    Args:\n        point1: first point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)\n        point2: second point of the rectangle represented as two numbers between 0 and 1 in the format (x, y)\n        line_width: A number in pixels between 1 - 5\n        color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n            The default value was chosen as it is distinguishable for most color-blind people.\n        active: If set to `False`, the region is marked as 'deleted'\n\n    Returns:\n        Region with added rectangle\n\n    Examples:\n        ```python\n        region = region.add_rectangle(\n            point1=(0.1, 0.1),\n            point2=(0.2, 0.2),\n        )\n        ```\n\n        ```python\n        # with custom display values\n        region = region.add_rectangle(\n            point1=(0.1, 0.1),\n            point2=(0.2, 0.2),\n            line_width=3,\n            color=\"#32a873\",\n        )\n        ```\n    \"\"\"\n    self.geometry = Rectangle(\n        point1=GeometryPoint(point1[0], point1[1], self.res_id),\n        point2=GeometryPoint(point2[0], point2[1], self.res_id),\n        line_width=line_width,\n        color=color,\n        active=active,\n        resource_id=self.res_id,\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_polygon","title":"<code>add_polygon</code>","text":"<p>Add a polygon shape to the region. A polygon should have at least three points. If you wish to create a rectangle, please use the designated <code>add_rectangle</code> method.</p> <p>For a visual example see the XML documentation</p> <p>Please note that this cannot currently be displayed in the dsp-app.</p> <p>Parameters:</p> Name Type Description Default <code>points</code> <code>list[tuple[float, float]]</code> <p>list of tuples containing two numbers between 0 and 1 in the format (x, y)</p> required <code>line_width</code> <code>float</code> <p>A number in pixels between 1 - 5</p> <code>2</code> <code>color</code> <code>str</code> <p>A hexadecimal color value which starts with a <code>#</code> followed by 3 or 6 numerals. The default value was chosen as it is distinguishable for most color-blind people.</p> <code>'#5b24bf'</code> <code>active</code> <code>bool</code> <p>If set to <code>False</code> the region is marked as 'deleted'</p> <code>True</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>Region with added polygon</p> <p>Examples:</p> <pre><code>region = region.add_polygon(\n    points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n)\n</code></pre> <pre><code># with custom display values\nregion = region.add_polygon(\n    points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n    line_width=3,\n    color=\"#32a873\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_polygon(\n    self,\n    points: list[tuple[float, float]],\n    line_width: float = 2,\n    color: str = \"#5b24bf\",\n    active: bool = True,\n) -&gt; RegionResource:\n    \"\"\"\n    Add a polygon shape to the region.\n    A polygon should have at least three points.\n    If you wish to create a rectangle, please use the designated `add_rectangle` method.\n\n    [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n    **Please note that this cannot currently be displayed in the dsp-app.**\n\n    Args:\n        points: list of tuples containing two numbers between 0 and 1 in the format (x, y)\n        line_width: A number in pixels between 1 - 5\n        color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n            The default value was chosen as it is distinguishable for most color-blind people.\n        active: If set to `False` the region is marked as 'deleted'\n\n    Returns:\n        Region with added polygon\n\n    Examples:\n        ```python\n        region = region.add_polygon(\n            points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n        )\n        ```\n\n        ```python\n        # with custom display values\n        region = region.add_polygon(\n            points=[(0.1, 0.1), (0.2, 0.2), (0.3, 0.3)],\n            line_width=3,\n            color=\"#32a873\",\n        )\n        ```\n    \"\"\"\n    geom_points = [GeometryPoint(val[0], val[1], self.res_id) for val in points]\n    self.geometry = Polygon(\n        points=geom_points, line_width=line_width, color=color, active=active, resource_id=self.res_id\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_circle","title":"<code>add_circle</code>","text":"<p>Add a circle shape to the region.</p> <p>For a visual example see the XML documentation</p> <p>Please note that this cannot currently be displayed in the dsp-app.</p> <p>Parameters:</p> Name Type Description Default <code>center</code> <code>tuple[float, float]</code> <p>center of the circle, represented as two numbers between 0 and 1 in the format (x, y)</p> required <code>radius</code> <code>tuple[float, float]</code> <p>radius of the circle, represented as a 2-dimensional vector, i.e. two numbers between 0 and 1 in the format (x, y)</p> required <code>line_width</code> <code>float</code> <p>A number in pixels between 1 - 5</p> <code>2</code> <code>color</code> <code>str</code> <p>A hexadecimal color value which starts with a <code>#</code> followed by 3 or 6 numerals. The default value was chosen as it is distinguishable for most color-blind people.</p> <code>'#5b24bf'</code> <code>active</code> <code>bool</code> <p>If set to <code>False</code> the region is marked as 'deleted'</p> <code>True</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>Region with added circle</p> <p>Examples:</p> <pre><code>region = region.add_circle(\n    center=(0.1, 0.1),\n    radius=(0.2, 0.2),\n)\n</code></pre> <pre><code># with custom display values\nregion = region.add_circle(\n    center=(0.1, 0.1),\n    radius=(0.2, 0.2),\n    line_width=3,\n    color=\"#32a873\",\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_circle(\n    self,\n    center: tuple[float, float],\n    radius: tuple[float, float],\n    line_width: float = 2,\n    color: str = \"#5b24bf\",\n    active: bool = True,\n) -&gt; RegionResource:\n    \"\"\"\n    Add a circle shape to the region.\n\n    [For a visual example see the XML documentation](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#geometry)\n\n    **Please note that this cannot currently be displayed in the dsp-app.**\n\n    Args:\n        center: center of the circle, represented as two numbers between 0 and 1 in the format (x, y)\n        radius: radius of the circle, represented as a 2-dimensional vector,\n            i.e. two numbers between 0 and 1 in the format (x, y)\n        line_width: A number in pixels between 1 - 5\n        color: A hexadecimal color value which starts with a `#` followed by 3 or 6 numerals.\n            The default value was chosen as it is distinguishable for most color-blind people.\n        active: If set to `False` the region is marked as 'deleted'\n\n    Returns:\n        Region with added circle\n\n    Examples:\n        ```python\n        region = region.add_circle(\n            center=(0.1, 0.1),\n            radius=(0.2, 0.2),\n        )\n        ```\n\n        ```python\n        # with custom display values\n        region = region.add_circle(\n            center=(0.1, 0.1),\n            radius=(0.2, 0.2),\n            line_width=3,\n            color=\"#32a873\",\n        )\n        ```\n    \"\"\"\n    self.geometry = Circle(\n        center=GeometryPoint(center[0], center[1], self.res_id),\n        radius=Vector(radius[0], radius[1], self.res_id),\n        line_width=line_width,\n        color=color,\n        active=active,\n        resource_id=self.res_id,\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_comment","title":"<code>add_comment</code>","text":"<p>Add a comment to the region</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>text of the comment</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>The original region, with the added comment</p> <p>Examples:</p> <pre><code>region = region.add_comment(\"comment text\")\n</code></pre> <pre><code>region = region.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment(\n    self,\n    text: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; RegionResource:\n    \"\"\"\n    Add a comment to the region\n\n    Args:\n        text: text of the comment\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original region, with the added comment\n\n    Examples:\n        ```python\n        region = region.add_comment(\"comment text\")\n        ```\n\n        ```python\n        region = region.add_comment(text=\"comment text\", comment=\"Comment about the comment.\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=text,\n            prop_name=\"hasComment\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_comment_multiple","title":"<code>add_comment_multiple</code>","text":"<p>Add several comments to the region</p> <p>Parameters:</p> Name Type Description Default <code>texts</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about these comments</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>The original region, with the added comments</p> <p>Examples:</p> <pre><code>region = region.add_comment_multiple([\"comment 1\", \"comment 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_multiple(\n    self,\n    texts: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; RegionResource:\n    \"\"\"\n    Add several comments to the region\n\n    Args:\n        texts: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment about these comments\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original region, with the added comments\n\n    Examples:\n        ```python\n        region = region.add_comment_multiple([\"comment 1\", \"comment 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n    comnts = [\n        Richtext.new(\n            value=x,\n            prop_name=\"hasComment\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n        for x in vals\n    ]\n    self.values.extend(comnts)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/region-resource/#xmllib.RegionResource.add_comment_optional","title":"<code>add_comment_optional</code>","text":"<p>If the value is not empty, add it as comment, otherwise return the region unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>Any</code> <p>text of the comment (or empty value)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>RegionResource</code> <p>The original region, with the added comment</p> <p>Examples:</p> <pre><code>region = region.add_comment_optional(\"comment text\")\n</code></pre> <pre><code>region = region.add_comment_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_optional(\n    self,\n    text: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; RegionResource:\n    \"\"\"\n    If the value is not empty, add it as comment, otherwise return the region unchanged.\n\n    Args:\n        text: text of the comment (or empty value)\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original region, with the added comment\n\n    Examples:\n        ```python\n        region = region.add_comment_optional(\"comment text\")\n        ```\n\n        ```python\n        region = region.add_comment_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(text):\n        return self.add_comment(text, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/","title":"VideoSegmentResource","text":"Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@dataclass\nclass VideoSegmentResource:\n    res_id: str\n    label: str\n    segment_bounds: SegmentBounds\n    values: list[Value]\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS\n    migration_metadata: MigrationMetadata | None = None\n\n    @staticmethod\n    def create_new(\n        res_id: str,\n        label: str,\n        segment_of: str,\n        segment_start: float | int | str,\n        segment_end: float | int | str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Creates a new video segment resource, i.e. a time span of a MovingImageRepresentation.\n\n        [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#video-segment-and-audio-segment)\n\n        Args:\n            res_id: ID of this video segment resource\n            label: label of this video segment resource\n            segment_of: ID of the video resource that this segment refers to (cardinality 1)\n            segment_start: start of the segment in seconds (cardinality 1)\n            segment_end: end of the segment in seconds (cardinality 1)\n            permissions: permissions of this resource\n\n        Returns:\n            A video segment resource\n\n        Examples:\n            ```python\n            video_segment = xmllib.VideoSegmentResource.create_new(\n                res_id=\"ID\",\n                label=\"label\",\n                segment_of=\"video_resource_id\",\n                segment_start=1.2,\n                segment_end=3.4,\n            )\n            ```\n        \"\"\"\n        _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n        res_id = str(res_id)\n        lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n        segment_of_val = LinkValue.new(\n            value=segment_of, prop_name=\"isSegmentOf\", permissions=permissions, comment=None, resource_id=res_id\n        )\n        return VideoSegmentResource(\n            res_id=res_id,\n            label=lbl,\n            values=[segment_of_val],\n            segment_bounds=SegmentBounds(segment_start, segment_end, permissions, res_id),\n            permissions=permissions,\n        )\n\n    def add_title(\n        self,\n        title: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add a title to the resource.\n\n        Args:\n            title: text\n            permissions: permissions of the value\n            comment: comments on the value\n\n        Returns:\n            The original resource, with the added title\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_title(\"segment title\")\n            ```\n        \"\"\"\n        existing_titles = [x for x in self.values if x.prop_name == \"hasTitle\"]\n        if any(existing_titles):\n            _warn_value_exists(\n                old_value=existing_titles.pop(0).value, new_value=title, value_field=\"title\", res_id=self.res_id\n            )\n        self.values.append(\n            SimpleText.new(\n                value=title,\n                prop_name=\"hasTitle\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_title_optional(\n        self,\n        title: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as title, otherwise return the resource unchanged.\n\n        Args:\n            title: text or empty value\n            permissions: permissions of the value\n            comment: comments on the value\n\n        Returns:\n            The original resource, with the added title\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_title(\"segment title\")\n            ```\n\n            ```python\n            video_segment = video_segment.add_title(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(title):\n            self.add_title(title, permissions, comment)\n        return self\n\n    def add_comment(\n        self,\n        text: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add a comment to the resource\n\n        Args:\n            text: text\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_comment(\"comment text\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=text,\n                prop_name=\"hasComment\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_comment_multiple(\n        self,\n        texts: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add several comments to the resource\n\n        Args:\n            texts: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment about these comments\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comments\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n        for v in vals:\n            self.add_comment(v, permissions, comment, newline_replacement)\n        return self\n\n    def add_comment_optional(\n        self,\n        text: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n        Args:\n            text: text of the comment (or empty value)\n            permissions: optional permissions of this value\n            comment: optional comment about this comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added comment\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_comment_optional(\"comment text\")\n            ```\n\n            ```python\n            video_segment = video_segment.add_comment_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(text):\n            self.add_comment(text, permissions, comment, newline_replacement)\n        return self\n\n    def add_description(\n        self,\n        description: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add a description to the resource\n\n        Args:\n            description: text\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added description\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_description(\"description text\")\n            ```\n        \"\"\"\n        self.values.append(\n            Richtext.new(\n                value=description,\n                prop_name=\"hasDescription\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n                newline_replacement=newline_replacement,\n            )\n        )\n        return self\n\n    def add_description_multiple(\n        self,\n        descriptions: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add several descriptions to the resource\n\n        Args:\n            descriptions: list of texts\n            permissions: optional permissions of these value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added descriptions\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_description_multiple([\"description 1\", \"description 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(descriptions, \"description\", self.res_id)\n        for v in vals:\n            self.add_description(v, permissions, comment, newline_replacement)\n        return self\n\n    def add_description_optional(\n        self,\n        description: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n        newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as description, otherwise return the resource unchanged.\n\n        Args:\n            description: text or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n            newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n        Returns:\n            The original resource, with the added description\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_description_optional(\"description text\")\n            ```\n\n            ```python\n            video_segment = video_segment.add_description_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(description):\n            self.add_description(description, permissions, comment, newline_replacement)\n        return self\n\n    def add_keyword(\n        self,\n        keyword: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add a keyword to the resource\n\n        Args:\n            keyword: text\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keyword\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_keyword(\"keyword\")\n            ```\n        \"\"\"\n        self.values.append(\n            SimpleText.new(\n                value=keyword,\n                prop_name=\"hasKeyword\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_keyword_multiple(\n        self,\n        keywords: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add several keywords to the resource\n\n        Args:\n            keywords: list of texts\n            permissions: optional permissions of these values\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keywords\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(keywords, \"keywords\", self.res_id)\n        for v in vals:\n            self.add_keyword(v, permissions, comment)\n        return self\n\n    def add_keyword_optional(\n        self,\n        keyword: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as keyword, otherwise return the resource unchanged.\n\n        Args:\n            keyword: text or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added keyword\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_keyword_optional(\"keyword\")\n            ```\n\n            ```python\n            video_segment = video_segment.add_keyword_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(keyword):\n            self.add_keyword(keyword, permissions, comment)\n        return self\n\n    def add_relates_to(\n        self,\n        relates_to: str,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add a link to a related resource\n\n        Args:\n            relates_to: ID of the related resource\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resource\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_relates_to(\"target_resource_id\")\n            ```\n        \"\"\"\n        self.values.append(\n            LinkValue.new(\n                value=relates_to,\n                prop_name=\"relatesTo\",\n                permissions=permissions,\n                comment=comment,\n                resource_id=self.res_id,\n            )\n        )\n        return self\n\n    def add_relates_to_multiple(\n        self,\n        relates_to: Collection[str],\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        Add several links to related resources\n\n        Args:\n            relates_to: list of IDs of the related resources\n            permissions: optional permissions of these values\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resources\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n            ```\n        \"\"\"\n        vals = check_and_fix_collection_input(relates_to, \"relatesTo\", self.res_id)\n        for v in vals:\n            self.add_relates_to(v, permissions, comment)\n        return self\n\n    def add_relates_to_optional(\n        self,\n        relates_to: Any,\n        permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n        comment: str | None = None,\n    ) -&gt; VideoSegmentResource:\n        \"\"\"\n        If the value is not empty, add it as related resource, otherwise return the resource unchanged.\n\n        Args:\n            relates_to: ID or the related resource or empty value\n            permissions: optional permissions of this value\n            comment: optional comment\n\n        Returns:\n            The original resource, with the added related resources\n\n        Examples:\n            ```python\n            video_segment = video_segment.add_relates_to_optional(\"target_resource_id\")\n            ```\n\n            ```python\n            video_segment = video_segment.add_relates_to_optional(None)\n            ```\n        \"\"\"\n        if is_nonempty_value(relates_to):\n            self.add_relates_to(relates_to, permissions, comment)\n        return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.create_new","title":"<code>create_new</code>","text":"<p>Creates a new video segment resource, i.e. a time span of a MovingImageRepresentation.</p> <p>See XML documentation for details</p> <p>Parameters:</p> Name Type Description Default <code>res_id</code> <code>str</code> <p>ID of this video segment resource</p> required <code>label</code> <code>str</code> <p>label of this video segment resource</p> required <code>segment_of</code> <code>str</code> <p>ID of the video resource that this segment refers to (cardinality 1)</p> required <code>segment_start</code> <code>float | int | str</code> <p>start of the segment in seconds (cardinality 1)</p> required <code>segment_end</code> <code>float | int | str</code> <p>end of the segment in seconds (cardinality 1)</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of this resource</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>A video segment resource</p> <p>Examples:</p> <pre><code>video_segment = xmllib.VideoSegmentResource.create_new(\n    res_id=\"ID\",\n    label=\"label\",\n    segment_of=\"video_resource_id\",\n    segment_start=1.2,\n    segment_end=3.4,\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>@staticmethod\ndef create_new(\n    res_id: str,\n    label: str,\n    segment_of: str,\n    segment_start: float | int | str,\n    segment_end: float | int | str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Creates a new video segment resource, i.e. a time span of a MovingImageRepresentation.\n\n    [See XML documentation for details](https://docs.dasch.swiss/latest/DSP-TOOLS/data-file/xml-data-file/#video-segment-and-audio-segment)\n\n    Args:\n        res_id: ID of this video segment resource\n        label: label of this video segment resource\n        segment_of: ID of the video resource that this segment refers to (cardinality 1)\n        segment_start: start of the segment in seconds (cardinality 1)\n        segment_end: end of the segment in seconds (cardinality 1)\n        permissions: permissions of this resource\n\n    Returns:\n        A video segment resource\n\n    Examples:\n        ```python\n        video_segment = xmllib.VideoSegmentResource.create_new(\n            res_id=\"ID\",\n            label=\"label\",\n            segment_of=\"video_resource_id\",\n            segment_start=1.2,\n            segment_end=3.4,\n        )\n        ```\n    \"\"\"\n    _check_strings(string_to_check=res_id, res_id=res_id, field_name=\"Resource ID\")\n    res_id = str(res_id)\n    lbl = check_and_fix_is_non_empty_string(value=label, res_id=res_id, value_field=\"label\")\n    segment_of_val = LinkValue.new(\n        value=segment_of, prop_name=\"isSegmentOf\", permissions=permissions, comment=None, resource_id=res_id\n    )\n    return VideoSegmentResource(\n        res_id=res_id,\n        label=lbl,\n        values=[segment_of_val],\n        segment_bounds=SegmentBounds(segment_start, segment_end, permissions, res_id),\n        permissions=permissions,\n    )\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_title","title":"<code>add_title</code>","text":"<p>Add a title to the resource.</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of the value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>comments on the value</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added title</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_title(\"segment title\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_title(\n    self,\n    title: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add a title to the resource.\n\n    Args:\n        title: text\n        permissions: permissions of the value\n        comment: comments on the value\n\n    Returns:\n        The original resource, with the added title\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_title(\"segment title\")\n        ```\n    \"\"\"\n    existing_titles = [x for x in self.values if x.prop_name == \"hasTitle\"]\n    if any(existing_titles):\n        _warn_value_exists(\n            old_value=existing_titles.pop(0).value, new_value=title, value_field=\"title\", res_id=self.res_id\n        )\n    self.values.append(\n        SimpleText.new(\n            value=title,\n            prop_name=\"hasTitle\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_title_optional","title":"<code>add_title_optional</code>","text":"<p>If the value is not empty, add it as title, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>title</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>permissions of the value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>comments on the value</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added title</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_title(\"segment title\")\n</code></pre> <pre><code>video_segment = video_segment.add_title(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_title_optional(\n    self,\n    title: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as title, otherwise return the resource unchanged.\n\n    Args:\n        title: text or empty value\n        permissions: permissions of the value\n        comment: comments on the value\n\n    Returns:\n        The original resource, with the added title\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_title(\"segment title\")\n        ```\n\n        ```python\n        video_segment = video_segment.add_title(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(title):\n        self.add_title(title, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_comment","title":"<code>add_comment</code>","text":"<p>Add a comment to the resource</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_comment(\"comment text\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment(\n    self,\n    text: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add a comment to the resource\n\n    Args:\n        text: text\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_comment(\"comment text\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=text,\n            prop_name=\"hasComment\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_comment_multiple","title":"<code>add_comment_multiple</code>","text":"<p>Add several comments to the resource</p> <p>Parameters:</p> Name Type Description Default <code>texts</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about these comments</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added comments</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_multiple(\n    self,\n    texts: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add several comments to the resource\n\n    Args:\n        texts: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment about these comments\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comments\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_comment_multiple([\"comment 1\", \"comment 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(texts, \"hasComment\", self.res_id)\n    for v in vals:\n        self.add_comment(v, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_comment_optional","title":"<code>add_comment_optional</code>","text":"<p>If the value is not empty, add it as comment, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>Any</code> <p>text of the comment (or empty value)</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment about this comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added comment</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_comment_optional(\"comment text\")\n</code></pre> <pre><code>video_segment = video_segment.add_comment_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_comment_optional(\n    self,\n    text: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as comment, otherwise return the resource unchanged.\n\n    Args:\n        text: text of the comment (or empty value)\n        permissions: optional permissions of this value\n        comment: optional comment about this comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added comment\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_comment_optional(\"comment text\")\n        ```\n\n        ```python\n        video_segment = video_segment.add_comment_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(text):\n        self.add_comment(text, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_description","title":"<code>add_description</code>","text":"<p>Add a description to the resource</p> <p>Parameters:</p> Name Type Description Default <code>description</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added description</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_description(\"description text\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description(\n    self,\n    description: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add a description to the resource\n\n    Args:\n        description: text\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added description\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_description(\"description text\")\n        ```\n    \"\"\"\n    self.values.append(\n        Richtext.new(\n            value=description,\n            prop_name=\"hasDescription\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n            newline_replacement=newline_replacement,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_description_multiple","title":"<code>add_description_multiple</code>","text":"<p>Add several descriptions to the resource</p> <p>Parameters:</p> Name Type Description Default <code>descriptions</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added descriptions</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_description_multiple([\"description 1\", \"description 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description_multiple(\n    self,\n    descriptions: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add several descriptions to the resource\n\n    Args:\n        descriptions: list of texts\n        permissions: optional permissions of these value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added descriptions\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_description_multiple([\"description 1\", \"description 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(descriptions, \"description\", self.res_id)\n    for v in vals:\n        self.add_description(v, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_description_optional","title":"<code>add_description_optional</code>","text":"<p>If the value is not empty, add it as description, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>description</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <code>newline_replacement</code> <code>NewlineReplacement</code> <p>options how to deal with <code>\\n</code> inside the text value. Default: replace with <code>&lt;br/&gt;</code></p> <code>LINEBREAK</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added description</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_description_optional(\"description text\")\n</code></pre> <pre><code>video_segment = video_segment.add_description_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_description_optional(\n    self,\n    description: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n    newline_replacement: NewlineReplacement = NewlineReplacement.LINEBREAK,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as description, otherwise return the resource unchanged.\n\n    Args:\n        description: text or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n        newline_replacement: options how to deal with `\\\\n` inside the text value. Default: replace with `&lt;br/&gt;`\n\n    Returns:\n        The original resource, with the added description\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_description_optional(\"description text\")\n        ```\n\n        ```python\n        video_segment = video_segment.add_description_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(description):\n        self.add_description(description, permissions, comment, newline_replacement)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_keyword","title":"<code>add_keyword</code>","text":"<p>Add a keyword to the resource</p> <p>Parameters:</p> Name Type Description Default <code>keyword</code> <code>str</code> <p>text</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added keyword</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_keyword(\"keyword\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword(\n    self,\n    keyword: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add a keyword to the resource\n\n    Args:\n        keyword: text\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keyword\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_keyword(\"keyword\")\n        ```\n    \"\"\"\n    self.values.append(\n        SimpleText.new(\n            value=keyword,\n            prop_name=\"hasKeyword\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_keyword_multiple","title":"<code>add_keyword_multiple</code>","text":"<p>Add several keywords to the resource</p> <p>Parameters:</p> Name Type Description Default <code>keywords</code> <code>Collection[str]</code> <p>list of texts</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added keywords</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword_multiple(\n    self,\n    keywords: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add several keywords to the resource\n\n    Args:\n        keywords: list of texts\n        permissions: optional permissions of these values\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keywords\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_keyword_multiple([\"keyword 1\", \"keyword 2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(keywords, \"keywords\", self.res_id)\n    for v in vals:\n        self.add_keyword(v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_keyword_optional","title":"<code>add_keyword_optional</code>","text":"<p>If the value is not empty, add it as keyword, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>keyword</code> <code>Any</code> <p>text or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added keyword</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_keyword_optional(\"keyword\")\n</code></pre> <pre><code>video_segment = video_segment.add_keyword_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_keyword_optional(\n    self,\n    keyword: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as keyword, otherwise return the resource unchanged.\n\n    Args:\n        keyword: text or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added keyword\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_keyword_optional(\"keyword\")\n        ```\n\n        ```python\n        video_segment = video_segment.add_keyword_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(keyword):\n        self.add_keyword(keyword, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_relates_to","title":"<code>add_relates_to</code>","text":"<p>Add a link to a related resource</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>str</code> <p>ID of the related resource</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added related resource</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_relates_to(\"target_resource_id\")\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to(\n    self,\n    relates_to: str,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add a link to a related resource\n\n    Args:\n        relates_to: ID of the related resource\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resource\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_relates_to(\"target_resource_id\")\n        ```\n    \"\"\"\n    self.values.append(\n        LinkValue.new(\n            value=relates_to,\n            prop_name=\"relatesTo\",\n            permissions=permissions,\n            comment=comment,\n            resource_id=self.res_id,\n        )\n    )\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_relates_to_multiple","title":"<code>add_relates_to_multiple</code>","text":"<p>Add several links to related resources</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>Collection[str]</code> <p>list of IDs of the related resources</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of these values</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added related resources</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to_multiple(\n    self,\n    relates_to: Collection[str],\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    Add several links to related resources\n\n    Args:\n        relates_to: list of IDs of the related resources\n        permissions: optional permissions of these values\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resources\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_relates_to_multiple([\"target_resource_id_1\", \"target_resource_id_2\"])\n        ```\n    \"\"\"\n    vals = check_and_fix_collection_input(relates_to, \"relatesTo\", self.res_id)\n    for v in vals:\n        self.add_relates_to(v, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/dsp-base-resources/video-segment-resource/#xmllib.VideoSegmentResource.add_relates_to_optional","title":"<code>add_relates_to_optional</code>","text":"<p>If the value is not empty, add it as related resource, otherwise return the resource unchanged.</p> <p>Parameters:</p> Name Type Description Default <code>relates_to</code> <code>Any</code> <p>ID or the related resource or empty value</p> required <code>permissions</code> <code>Permissions</code> <p>optional permissions of this value</p> <code>PROJECT_SPECIFIC_PERMISSIONS</code> <code>comment</code> <code>str | None</code> <p>optional comment</p> <code>None</code> <p>Returns:</p> Type Description <code>VideoSegmentResource</code> <p>The original resource, with the added related resources</p> <p>Examples:</p> <pre><code>video_segment = video_segment.add_relates_to_optional(\"target_resource_id\")\n</code></pre> <pre><code>video_segment = video_segment.add_relates_to_optional(None)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/dsp_base_resources.py</code> <pre><code>def add_relates_to_optional(\n    self,\n    relates_to: Any,\n    permissions: Permissions = Permissions.PROJECT_SPECIFIC_PERMISSIONS,\n    comment: str | None = None,\n) -&gt; VideoSegmentResource:\n    \"\"\"\n    If the value is not empty, add it as related resource, otherwise return the resource unchanged.\n\n    Args:\n        relates_to: ID or the related resource or empty value\n        permissions: optional permissions of this value\n        comment: optional comment\n\n    Returns:\n        The original resource, with the added related resources\n\n    Examples:\n        ```python\n        video_segment = video_segment.add_relates_to_optional(\"target_resource_id\")\n        ```\n\n        ```python\n        video_segment = video_segment.add_relates_to_optional(None)\n        ```\n    \"\"\"\n    if is_nonempty_value(relates_to):\n        self.add_relates_to(relates_to, permissions, comment)\n    return self\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/other/","title":"Other","text":""},{"location":"DSP-TOOLS/xmllib-docs/licenses/other/#xmllib.models.licenses.other.LicenseOther","title":"<code>LicenseOther</code>","text":"<p>Pre-defined licenses that are available in DSP. If the user is free to choose a license, we recommend to choose from our recommended licenses.</p> <ul> <li><code>Public</code>: See <code>Public</code> for details.</li> <li><code>Various</code>: See <code>Various</code> for details.</li> </ul> <p>Examples:</p> <pre><code># adding a BORIS Standard License to a file\nresource = resource.add_file(\n    filename=\"images/cat.jpg\",\n    license=xmllib.LicenseOther.Various.BORIS_STANDARD,\n    copyright_holder=\"Meow University\",\n    authorship=[\"Kitty Meow\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/other.py</code> <pre><code>class LicenseOther:\n    \"\"\"\n    Pre-defined licenses that are available in DSP.\n    If the user is free to choose a license, we recommend to choose from our [recommended licenses](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/).\n\n    - `Public`: [See `Public` for details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/other/#xmllib.models.licenses.other.Public).\n    - `Various`: [See `Various` for details](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/other/#xmllib.models.licenses.other.Various).\n\n    Examples:\n        ```python\n        # adding a BORIS Standard License to a file\n        resource = resource.add_file(\n            filename=\"images/cat.jpg\",\n            license=xmllib.LicenseOther.Various.BORIS_STANDARD,\n            copyright_holder=\"Meow University\",\n            authorship=[\"Kitty Meow\"],\n        )\n        ```\n    \"\"\"\n\n    Public: type[Public]\n    Various: type[Various]\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/other/#xmllib.models.licenses.other.Public","title":"<code>Public</code>","text":"<p>               Bases: <code>License</code></p> <p>Pre-defined public domain licenses. See the API documentation for details about the licenses.</p> <ul> <li><code>CC_0_1_0</code>: CC0 1.0 Universal</li> <li><code>CC_PDM_1_0</code>: Public Domain Mark 1.0 Universal</li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/other.py</code> <pre><code>class Public(License):\n    \"\"\"\n    Pre-defined public domain licenses.\n    [See the API documentation for details about the licenses.](https://docs.dasch.swiss/latest/DSP-API/01-introduction/legal-info/#license)\n\n    - `CC_0_1_0`: CC0 1.0 Universal\n    - `CC_PDM_1_0`: Public Domain Mark 1.0 Universal\n    \"\"\"\n\n    CC_0_1_0 = \"http://rdfh.ch/licenses/cc-0-1.0\"\n    CC_PDM_1_0 = \"http://rdfh.ch/licenses/cc-pdm-1.0\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/other/#xmllib.models.licenses.other.Various","title":"<code>Various</code>","text":"<p>               Bases: <code>License</code></p> <p>A collection of various, pre-defined licenses. See the API documentation for details about the licenses.</p> <ul> <li><code>BORIS_STANDARD</code>: BORIS Standard License</li> <li><code>FRANCE_OUVERTE</code>: LICENCE OUVERTE 2.0</li> <li><code>RIGHTSSTATEMENTS_NOC_NC</code>: Rightsstatements: No Copyright - Non-Commercial Use Only</li> </ul> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/other.py</code> <pre><code>class Various(License):\n    \"\"\"\n    A collection of various, pre-defined licenses.\n    [See the API documentation for details about the licenses.](https://docs.dasch.swiss/latest/DSP-API/01-introduction/legal-info/#license)\n\n    - `BORIS_STANDARD`: BORIS Standard License\n    - `FRANCE_OUVERTE`: LICENCE OUVERTE 2.0\n    - `RIGHTSSTATEMENTS_NOC_NC`: Rightsstatements: No Copyright - Non-Commercial Use Only\n    \"\"\"\n\n    BORIS_STANDARD = \"http://rdfh.ch/licenses/boris\"\n    FRANCE_OUVERTE = \"http://rdfh.ch/licenses/open-licence-2.0\"\n    RIGHTSSTATEMENTS_NOC_NC = \"http://rdfh.ch/licenses/noc-nc-1.0\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/recommended/","title":"Recommended","text":""},{"location":"DSP-TOOLS/xmllib-docs/licenses/recommended/#xmllib.models.licenses.recommended.LicenseRecommended","title":"<code>LicenseRecommended</code>","text":"<p>Recommended licenses:</p> <ul> <li><code>DSP</code>: Licenses created and curated by DaSCH, see <code>DSP</code> for details.</li> <li><code>CC</code>: Creative Commons licenses, see <code>CC</code> for details.</li> </ul> Tip <p>Use the helper function <code>find_license_in_string()</code> to parse a license from a string.</p> <p>Examples:</p> <pre><code># adding a Creative Commons license to a file\nresource = resource.add_file(\n    filename=\"images/cat.jpg\",\n    license=xmllib.LicenseRecommended.CC.BY,\n    copyright_holder=\"Meow University\",\n    authorship=[\"Kitty Meow\"],\n)\n</code></pre> <pre><code># adding a DSP license to a file\nresource = resource.add_file(\n    filename=\"images/dog.jpg\",\n    license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n    copyright_holder=\"Bark University\",\n    authorship=[\"Bark McDog\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/recommended.py</code> <pre><code>class LicenseRecommended:\n    \"\"\"\n    Recommended licenses:\n\n    - `DSP`: Licenses created and curated by DaSCH, [see `DSP` for details.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/#xmllib.models.licenses.recommended.DSP)\n    - `CC`: Creative Commons licenses, [see `CC` for details.](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/licenses/recommended/#xmllib.models.licenses.recommended.CC)\n\n    Tip:\n        Use the helper function [`find_license_in_string()`](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.find_license_in_string)\n        to parse a license from a string.\n\n    Examples:\n        ```python\n        # adding a Creative Commons license to a file\n        resource = resource.add_file(\n            filename=\"images/cat.jpg\",\n            license=xmllib.LicenseRecommended.CC.BY,\n            copyright_holder=\"Meow University\",\n            authorship=[\"Kitty Meow\"],\n        )\n        ```\n\n        ```python\n        # adding a DSP license to a file\n        resource = resource.add_file(\n            filename=\"images/dog.jpg\",\n            license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n            copyright_holder=\"Bark University\",\n            authorship=[\"Bark McDog\"],\n        )\n        ```\n    \"\"\"\n\n    CC: type[CC]\n    DSP: type[DSP]\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/recommended/#xmllib.models.licenses.recommended.CC","title":"<code>CC</code>","text":"<p>               Bases: <code>License</code></p> <p>Pre-defined and recommended Creative Commons licenses:</p> <ul> <li><code>BY</code>: Attribution 4.0</li> <li><code>BY_SA</code>: Attribution-ShareAlike 4.0</li> <li><code>BY_NC</code>: Attribution-NonCommercial 4.0</li> <li><code>BY_NC_SA</code>: Attribution-NonCommercial-ShareAlike 4.0</li> <li><code>BY_ND</code>: Attribution-NoDerivatives 4.0</li> <li><code>BY_NC_ND</code>: Attribution-NonCommercial-NoDerivatives 4.0</li> </ul> Tip <p>Use the helper function find_license_in_string() to parse a license from a string.</p> <p>Examples:</p> <pre><code># adding a Creative Commons license to a file\nresource = resource.add_file(\n    filename=\"images/dog.jpg\",\n    license=xmllib.LicenseRecommended.CC.BY_NC_ND,\n    copyright_holder=\"Bark University\",\n    authorship=[\"Bark McDog\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/recommended.py</code> <pre><code>class CC(License):\n    \"\"\"\n    Pre-defined and recommended [Creative Commons licenses:](https://creativecommons.org/share-your-work/)\n\n    - `BY`: [Attribution 4.0](https://creativecommons.org/licenses/by/4.0/)\n    - `BY_SA`: [Attribution-ShareAlike 4.0](https://creativecommons.org/licenses/by-sa/4.0/)\n    - `BY_NC`: [Attribution-NonCommercial 4.0](https://creativecommons.org/licenses/by-nc/4.0/)\n    - `BY_NC_SA`: [Attribution-NonCommercial-ShareAlike 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/)\n    - `BY_ND`: [Attribution-NoDerivatives 4.0](https://creativecommons.org/licenses/by-nd/4.0/)\n    - `BY_NC_ND`: [Attribution-NonCommercial-NoDerivatives 4.0](https://creativecommons.org/licenses/by-nc-nd/4.0/)\n\n    Tip:\n        Use the helper function [find_license_in_string()](https://docs.dasch.swiss/latest/DSP-TOOLS/xmllib-docs/general-functions/#xmllib.general_functions.find_license_in_string)\n        to parse a license from a string.\n\n    Examples:\n        ```python\n        # adding a Creative Commons license to a file\n        resource = resource.add_file(\n            filename=\"images/dog.jpg\",\n            license=xmllib.LicenseRecommended.CC.BY_NC_ND,\n            copyright_holder=\"Bark University\",\n            authorship=[\"Bark McDog\"],\n        )\n        ```\n    \"\"\"\n\n    BY = \"http://rdfh.ch/licenses/cc-by-4.0\"\n    BY_SA = \"http://rdfh.ch/licenses/cc-by-sa-4.0\"\n    BY_NC = \"http://rdfh.ch/licenses/cc-by-nc-4.0\"\n    BY_NC_SA = \"http://rdfh.ch/licenses/cc-by-nc-sa-4.0\"\n    BY_ND = \"http://rdfh.ch/licenses/cc-by-nd-4.0\"\n    BY_NC_ND = \"http://rdfh.ch/licenses/cc-by-nc-nd-4.0\"\n</code></pre>"},{"location":"DSP-TOOLS/xmllib-docs/licenses/recommended/#xmllib.models.licenses.recommended.DSP","title":"<code>DSP</code>","text":"<p>               Bases: <code>License</code></p> <p>Pre-defined and recommended licenses created and curated by DaSCH:</p> <ul> <li><code>AI_GENERATED</code>: AI-Generated Content - Not Protected by Copyright</li> <li><code>UNKNOWN</code>: Unknown License - Ask Copyright Holder for Permission</li> <li><code>PUBLIC_DOMAIN</code>: Public Domain - Not Protected by Copyright</li> </ul> <p>Examples:</p> <pre><code># adding a DSP license to a file\nresource = resource.add_file(\n    filename=\"images/cat.jpg\",\n    license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n    copyright_holder=\"Meow University\",\n    authorship=[\"Kitty Meow\"],\n)\n</code></pre> Source code in <code>dsp/dsp-tools/src/dsp_tools/xmllib/models/licenses/recommended.py</code> <pre><code>class DSP(License):\n    \"\"\"\n    Pre-defined and recommended licenses created and curated by DaSCH:\n\n    - `AI_GENERATED`: AI-Generated Content - Not Protected by Copyright\n    - `UNKNOWN`: Unknown License - Ask Copyright Holder for Permission\n    - `PUBLIC_DOMAIN`: Public Domain - Not Protected by Copyright\n\n    Examples:\n        ```python\n        # adding a DSP license to a file\n        resource = resource.add_file(\n            filename=\"images/cat.jpg\",\n            license=xmllib.LicenseRecommended.DSP.PUBLIC_DOMAIN,\n            copyright_holder=\"Meow University\",\n            authorship=[\"Kitty Meow\"],\n        )\n        ```\n    \"\"\"\n\n    AI_GENERATED = \"http://rdfh.ch/licenses/ai-generated\"\n    UNKNOWN = \"http://rdfh.ch/licenses/unknown\"\n    PUBLIC_DOMAIN = \"http://rdfh.ch/licenses/public-domain\"\n</code></pre>"},{"location":"Dsp-Ingest/","title":"Dsp-Ingest","text":"<p>The Dsp-Ingest service is designed to streamline and optimize the process of ingesting and managing data within the DaSCH Service Platform.</p> <p>It provides a RESTful API for the digital asset management.</p>"},{"location":"Dsp-Ingest/#assets","title":"Assets","text":"<p>Assets are the core of the Dsp-Ingest service. They can be different sort of files, like: images, videos, audios, etc. For each asset, the service stores the metadata, its original file and possibly derivative files such as keyframes for videos.</p> <p>Assets are identified by a unique identifier, the <code>internal_filename</code>, eg. <code>100W6vpQQtG-Fk81LUxUheF.jp2</code>.</p>"},{"location":"Dsp-Ingest/#types-of-assets","title":"Types of Assets","text":"<p>The service supports several different types of assets:</p> <ul> <li>Images</li> <li>Videos</li> <li>Audio files</li> <li>Excel files</li> <li>PDF files</li> <li>Ebooks (<code>.epub</code>)</li> <li>Html files (<code>.html</code>, <code>.htm</code>)</li> <li>And others in binary format</li> </ul> <p>The supported file formats are explained in detail in the DSP-API documentation.</p>"},{"location":"Dsp-Ingest/#projects","title":"Projects","text":"<p>Assets are group within projects. A project is a collection of assets and corresponds to a project in the DSP-API.</p>"},{"location":"Dsp-Ingest/authentication/","title":"API Authentication","text":""},{"location":"Dsp-Ingest/authentication/#authentication","title":"Authentication","text":"<p>Authentication is done via the <code>Authorization</code> header. For secured endpoints the value of the header must be <code>Bearer &lt;token&gt;</code>, where <code>&lt;token&gt;</code> is a JWT token issued by the DSP-API.</p> <p>The token is a JSON Web Token (JWT) that must contain the following claims:</p> <ul> <li><code>iss</code> (issuer): The issuer of the token, the DSP-API</li> <li><code>sub</code> (subject): The subject of the token, grants access to certain routes, format described below.</li> <li><code>aud</code> (audience): The audience of the token, the Dsp-Ingest service specific audience</li> <li><code>exp</code> (expiration time): The expiration time of the token, in seconds since epoch</li> <li><code>iat</code> (issued at): The time at which the token was issued, in seconds since epoch</li> <li><code>jti</code> (JWT ID): A unique identifier for the token</li> </ul>"},{"location":"Dsp-Ingest/authentication/#authorization-and-subject-format","title":"Authorization and subject format","text":"<p>Subject should be either empty or contain an object of form <code>{\"scope\": \"admin\"}</code> where the value should contain space-delimited string combined from allowed values:</p> <ul> <li><code>admin</code> \u2013 allows access to any route requiring authorization,</li> <li><code>write:project:1234</code> \u2013\u00a0grants writing permissions for project with the shortcode <code>1234</code>.</li> <li><code>read:project:1234</code> \u2013\u00a0grants reading permissions for project with the shortcode <code>1234</code>.</li> <li><code>badvalue</code> \u2013 unrecognized values will be ignored for future-compatibility.</li> </ul> <p>Example subject contents: * \"\" or empty * <code>write:project:ABCD read:project:8F8F write:project:1A2B</code>.</p>"},{"location":"Dsp-Ingest/ingest/","title":"Ingesting Assets","text":"<p>Every asset belongs to a project. </p>"},{"location":"Dsp-Ingest/ingest/#bulk-ingest","title":"Bulk Ingest","text":""},{"location":"Dsp-Ingest/ingest/#preparation","title":"Preparation","text":"<p>The assets must be in <code>STORAGE_TEMP_DIR/import/{shortcode}</code>, a folder named after the Project Shortcode. The assets may be organized in sub-folders inside the <code>import/{shortcode}</code> folder. For example: <pre><code>import/\n    \u2514\u2500\u2500 0001/ \n        \u251c\u2500\u2500 someImage.jp2\n        \u2514\u2500\u2500 some-sub-folder/\n            \u251c\u2500\u2500 someText.txt\n            \u2026\n</code></pre></p>"},{"location":"Dsp-Ingest/ingest/#triggering-a-bulk-ingest","title":"Triggering a Bulk Ingest","text":"<p>You can trigger a Bulk Ingest with a request to the Bulk Ingest Endpoint.  The Bulk Ingest will run in the background, and you can check its status in the logs of the service.</p> <p>The Bulk Ingest will create a new asset for each valid file in the <code>import/{shortcode}/</code> folder, and move the file to the <code>STORAGE_ASSET_DIR/{shortcode}</code> folder. It will create relevant derivatives for the asset, such as keyframes for videos or and archival version of images. It will extract the metadata from the file and store it with the asset. Once a file was successfully ingested, it will be deleted from the <code>import/{shortcode}/</code> folder. Files that are not valid or could not be ingested will be ignored and remain in the <code>import/{shortcode}/</code> folder unchanged.</p> <p>Additionally, the Bulk Ingest will create a <code>mapping-{shortcode}.csv</code> CSV file in the <code>{STORAGE_TEMP_DIR}/import</code> folder.  This file contains a mapping of the original filenames to the <code>internal_filename</code> of the assets.</p> <pre><code>original,derivative\nsomeImage.jp2,4lNd38JEiHC-lofT60RQbYm.jp2\nsome-sub-folder/someText.txt,2hWjjyahcMM-Kkkm8qJpSGk.txt\n</code></pre> <p>You can use this mapping to create the respective resource in the DSP-API.</p>"},{"location":"Dsp-Ingest/ingest/#finalizing-a-bulk-ingest","title":"Finalizing a Bulk Ingest","text":"<p>Once you have verified the success of the ingest and/or created the resources in the DSP-API,  you should finalize the Bulk Ingest with a request to the Bulk Ingest Finalize Endpoint. The Bulk Ingest will then delete the <code>mapping-{shortcode}.csv</code> file and the <code>import/{shortcode}/</code> folder and all its content.</p>"},{"location":"Dsp-Ingest/openapi/","title":"OpenAPI Documentation","text":"<p>We provide automatically generated OpenAPI documentation for DSP-INGEST. The OpenAPI specification is available both as YAML specification files and through Swagger UI.</p> <p>The documentation for the version currently deployed in production can be found at:</p> <ul> <li>OpenAPI Specification (YAML)</li> <li>Swagger UI</li> </ul> <p>The documentation for the current main branch can be found at:</p> <ul> <li>OpenAPI Specification (YAML)</li> <li>Swagger UI</li> </ul> <p>Documentation for any other server is available on the according routes:</p> <ul> <li>OpenAPI Specification (YAML): <code>/docs/docs.yaml</code></li> <li>Swagger UI: <code>/docs/</code></li> </ul> <p>With the API URL prefixed. That is: <code>http://localhost:3340</code> when running the API locally,  or <code>https://ingest.{server}.dasch.swiss</code> when running on a server.</p>"},{"location":"Dsp-Ingest/service-configuration/","title":"Configuration","text":"<p>Configuring the service is done through environment variables.</p> <p>There are a couple of groups of variables:</p> <ul> <li>Service - configuration of the service itself, e.g. ports and logging</li> <li>Storage - configuration of the storage, e.g. file paths to asset folder</li> <li>Jwt - configuration of the JWT authentication, e.g. secret key</li> <li>Features - configuration options for enabling or disabling certain features</li> </ul>"},{"location":"Dsp-Ingest/service-configuration/#service","title":"Service","text":"Variable Default Description <code>SERVICE_PORT</code> <code>3340</code> Port on which the service will listen <code>SERVICE_HOST</code> <code>0.0.0.0</code> Host on which the service will listen <code>SERVICE_LOG_FORMAT</code> <code>text</code> Log output format: <code>json</code> for json logging, <code>text</code> for human readable logging <code>SERVICE_LOG_LEVEL</code> <code>info</code> Log level (trace, debug, info, warn, error, fatal)"},{"location":"Dsp-Ingest/service-configuration/#storage","title":"Storage","text":"Variable Default Description <code>STORAGE_ASSET_DIR</code> <code>localdev/storage/images</code> Path to the folder where the assets will be stored <code>STORAGE_TEMP_DIR</code> <code>localdev/storage/temp</code> Path to the folder where temporary files will be created <p>The layout in these folders is explained in detail in the chapter \"Filesystem Setup\".</p>"},{"location":"Dsp-Ingest/service-configuration/#jwt","title":"Jwt","text":"Variable Default Description <code>JWT_SECRET</code> <code>UP 4888, nice 4-8-4 steam engine</code> Secret key used to sign the JWT tokens, must be a valid H256 secret <code>JWT_ISSUER</code> <code>http://0.0.0.0:3333</code> Expected issuer claim in the JWT <code>JWT_AUDIENCE</code> <code>http://localhost:3340</code> Expected audience claim in the JWT <code>JWT_DISABLE_AUTH</code> <code>false</code> Disable JWT authentication, useful for local development. When set to <code>true</code> protected routes still expect a <code>Bearer</code> token but it can be any value."},{"location":"Dsp-Ingest/service-configuration/#database","title":"Database","text":"Variable Default Description <code>DB_JDBC_URL</code> <code>jdbc:sqlite:localdev/storage/db/ingest.sqlite</code> Jdbc Url for the sqlite database. Everything after <code>jdbc:sqlite:</code> is the path to the file where the data is stored."},{"location":"Dsp-Ingest/service-configuration/#features","title":"Features","text":"Variable Default Description <code>ALLOW_ERASE_PROJECTS</code> <code>false</code> If set to <code>true</code>, the endpoint <code>DELETE /projects/:shortcode/erase</code> will be enabled. This endpoint can remove all data related to a project permanently."},{"location":"Dsp-Ingest/service-filesystem-setup/","title":"Filesystem Setup","text":"<p>The service expects the following filesystem structure:</p> <pre><code> {asset_directory} \n  \u251c\u2500\u2500 {project_folder} \n  |    \u2514\u2500\u2500{asset_segment_1}\n  |        \u2514\u2500\u2500 {asset_segment_2}\n  |              \u251c\u2500\u2500 xxx.info\n  |              \u251c\u2500\u2500 xxx.jpg.orig\n  |              \u2514\u2500\u2500 xxx.jp2\n  \u251c\u2500\u2500 {project_folder} \n  \u2026    \u2514\u2500\u2500{asset_segment_1}\n           \u2514\u2500\u2500 {asset_segment_2}\n                 \u251c\u2500\u2500 xxx.info\n                 \u251c\u2500\u2500 xxx.jpg.orig\n                 \u2514\u2500\u2500 xxx.jp2               \n {temp_directory}\n  \u251c\u2500\u2500 export\n  \u2514\u2500\u2500 import\n</code></pre> <p>Here is a description of the folders:</p> <ul> <li><code>{asset_directory}</code>: the folder where the assets are stored</li> <li><code>{project_folder}</code>: each project has its own folder containing the assets belonging to that project, the name of the   folder   is the project's shortcode</li> <li><code>{asset_segment_1}</code>: the first 2 characters of the <code>internal_filename</code> of an asset</li> <li><code>{asset_segment_2}</code>: the next 2 characters of the <code>internal_filename</code> of an asset</li> <li><code>{temp_directory}</code>: the folder where temporary files are stored</li> <li><code>{temp_directory}/export</code>: the folder where exported files are temporarily stored</li> <li><code>{temp_directory}/import</code>: the folder where imported files are temporarily stored</li> </ul> <p>Files are stored in the <code>{asset_directory}/{project_folder}/{asset_segment_1}/{asset_segment_2}</code> folder, <code>{asset_directory}/0123/ab/cd/abcdefg.jp2</code> for example.</p> <p>Each asset is stored in a file named <code>{internal_filename}</code> which consists of two parts <code>{asset_id}.{ext}</code>. The <code>{asset_id}</code> is a unique identifier for the asset and the <code>{ext}</code> is the file extension. Every derivative and metadata file of an asset are stored in files starting with <code>{asset_id}</code> and the respective <code>{ext}</code>.</p> <p>For each asset there are different files in the <code>{asset_segment_2}</code> folder:</p> <ul> <li><code>{internal_filename}</code>: (mandatory) the asset, <code>{asset_id}.jp2</code> for images, <code>{asset_id}.mp4</code> for videos, etc.</li> <li><code>{asset_id}.info</code>: (mandatory) the metadata of the asset</li> <li><code>{asset_id}.{ext}.orig</code>: the original file of the asset if it was an image and has been converted to a   JPEG 2000</li> </ul>"},{"location":"developers/contribution/","title":"How to contribute to the development of the DSP","text":"<p>The DSP software is developed under git version control using GitHub. It includes the  following main repositories:</p> <p> </p> <p>In all these repositories, we follow the GitHub flow  recommendations:</p> <ol> <li>Create a branch from main.</li> <li>Add commits.</li> <li>Open a pull request.</li> <li>Discuss and review your code.</li> <li>Merge into <code>main</code> branch.</li> </ol>"},{"location":"developers/contribution/#create-branch-guidelines","title":"Create Branch Guidelines","text":"<p>You will work on an own branch to resolve one issue or user story defined on Jira.  Each of those issues has a DEV-number which has to be used in the branch name:</p> <pre><code>wip/&lt;DEV-nr&gt;-&lt;subject&gt;\n</code></pre> <p>The prefix <code>wip</code> stands for \"work in progress\" followed by a \"/\" (slash). The second part starts with the DEV-number  followed by a short subject which contains a succinct description of the issue/user story. DEV-number and subject have  to be written in kebab-case with \"-\" (hyphens).</p>"},{"location":"developers/contribution/#git-commit-guidelines","title":"Git Commit Guidelines","text":"<p>We follow strict rules how a commit message has to look like. This leads to more readable messages that are easy to  follow when looking through the project history and release notes. Since release notes are automatically generated from  commits, it is important to follow the Conventional Commit messages.</p>"},{"location":"developers/contribution/#commit-message-format","title":"Commit Message Format","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n</code></pre>"},{"location":"developers/contribution/#type","title":"Type","text":"<p>Must be one of the following:</p> <ul> <li>fix: represents bug fixes, and correlates to a SemVer patch.</li> <li>refactor: represents production code refactoring, and correlates to a patch.</li> <li>feat: represents a new feature, and correlates to a SemVer minor.</li> <li>feat!, fix!, refactor!, etc.: represents a breaking change (indicated by the <code>!</code>) and will result in a SemVer major.\\   \u26a0 It is important that the exclamation mark is placed before the colon. For example <code>feat!: &lt;subject&gt;</code> or <code>feat(api-v2)!: &lt;subject&gt;</code></li> <li>docs: documentation changes (no production code change).</li> <li>chore: maintenance tasks (no production code change).</li> <li>style: styles update (no production code change).</li> <li>test: all about tests: adding, refactoring tests (no production code change).</li> </ul> <p>The first four items on this list are taken into account for the release notes and have an effect on the version number.</p>"},{"location":"developers/contribution/#scope-optional","title":"Scope (optional)","text":"<p>The scope could be anything specifying place of the commit change.</p>"},{"location":"developers/contribution/#subject","title":"Subject","text":"<p>The subject contains succinct description of the change:</p> <ul> <li>use the imperative, present tense: \"change\" not \"changed\" nor \"changes\"</li> <li>don't capitalize first letter</li> <li>no dot (.) at the end</li> </ul>"},{"location":"developers/contribution/#pull-request-guidelines","title":"Pull Request Guidelines","text":""},{"location":"developers/contribution/#set-title-and-add-description","title":"Set title and add description","text":"<p>A pull request usually resolves one issue or user story defined on Jira. Since we started to use the release-please-action it's  very important to set the PR title in the correct way, especially because all commits added within the pull request are  squashed. Otherwise, PRs with bad titles won't be added to the automatically generated CHANGELOG and release notes.  Thus, every PR title has to follow the commit message convention mentioned above, with small  modifications. </p>"},{"location":"developers/contribution/#pr-title-format","title":"PR Title Format","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt; (&lt;DEV-no.&gt;)\n</code></pre> <p>It's crucial to start the PR title with the <code>&lt;type&gt;</code> (allowed types), followed by optional<code>&lt;scope&gt;</code>  (in brackets and without space between type and scope). <code>&lt;subject&gt;</code> should be Jira task title or its short version. At  the end of the PR title add inside the brackets <code>&lt;DEV-no.&gt;</code>, which represents the number of the task(s) related to the  PR. Here is an example:</p> <pre><code>docs(contribution): example pull request title (DEV-001)\n</code></pre> <p>The PR description should contain important information for its reviewers. Don't copy/paste the Jira task description  here. Instead, start the description by adding the following:</p> <pre><code>Resolves &lt;DEV-no.&gt;\n</code></pre> <p>GitHub's Autolink Setting  will automatically generate a link to the Jira issue.</p>"},{"location":"developers/contribution/#add-a-label-optional","title":"Add a label (optional)","text":"<p>This step is optional, since it has no impact on the release process anymore. However, adding at least one of the  corresponding labels to your PR will help quickly realize its purpose:</p> <ul> <li>breaking: breaking changes.</li> <li>enhancement: new feature.</li> <li>bug: a bug fix.</li> <li>styling update style (no production code change).</li> <li>documentation: changes to the documentation.</li> <li>testing: all about tests: adding, refactoring tests (no production code change).</li> <li>refactor: refactoring production code.</li> <li>chore: maintenance tasks (no production code change).</li> <li>dependencies: update a dependency package version.</li> </ul>"},{"location":"developers/contribution/#make-a-draft","title":"Make a draft","text":"<p>Please convert the pull request to draft  as long it isn't ready for reviewing. As soon as the PR is ready for review,  click on the corresponding button \"Ready for review\".</p>"},{"location":"developers/contribution/#branch-protection-rules","title":"Branch protection rules","text":"<p>The main branch of each repo (it's usually the <code>main</code> branch) is protected by the following rules:</p> <ul> <li>Require pull request reviews before merging<ul> <li>At least from one reviewer</li> </ul> </li> <li>Require status checks to pass before merging<ul> <li>Require branches to be up-to-date before merging</li> <li>Status checks e.g. tests defined in each repository's CI</li> </ul> </li> </ul> <p>When the PR is merged, the branch will be deleted automatically.</p>"},{"location":"developers/contribution/#code-review-guidelines","title":"Code Review Guidelines","text":"<ul> <li>Reviewers should pay attention to proper PR title setting.</li> </ul>"},{"location":"developers/contribution/#general-github-actions-workflows-ci","title":"General GitHub actions workflows (CI)","text":"<p>We use GitHub actions to automate some processes.</p>"},{"location":"developers/contribution/#run-tests","title":"Run tests","text":"<p>With each push to GitHub, the tests of the repository are executed. Successful tests are needed to merge code into the  repository's main branch (s. Branch protection rules).</p>"},{"location":"developers/contribution/#prepare-release","title":"Prepare release","text":"<p>We use release-please-action to prepare the next release.  This action script automates the CHANGELOG generation, the creation of GitHub releases, and version bumps. In doing so,  it creates a release PR which updates itself with each push into main branch following the commit messages. It's  important to use the defined rules from above in all commits and in PR titles.</p>"},{"location":"developers/contribution/#create-release","title":"Create release","text":"<p>When we are ready to tag a release, simply merge the release PR. This will create a release on GitHub, builds the npm  package or the docker image and publishes on the corresponding platform.</p> <p> </p>"},{"location":"developers/getting-started/","title":"Getting started with DSP","text":"<p>The DaSCH Service Platform (DSP) is a bundle of software that runs on servers hosted by DaSCH. For some purposes, it is necessary to run the DSP software stack on a local machine.</p> <p>Follow the instructions on this page to install the DSP software stack on your local machine.</p> <p>The basic components of DSP are:</p> Component Description DSP-API The core of our software stack: the RDF database that offers an access via API DSP-APP The web application that allows you to view and edit data in your browser DSP-TOOLS A Python library and command line tool to upload data models and big data sets to a DSP server <p>The DSP software can only be run on macOS and Linux. Windows is not supported.</p> <p>This page is divided in 2 sections:</p> <ul> <li>Install DSP: Instructions for users:   Researchers, data stewards, and other users can take this shortcut.</li> <li>Install DSP: Instructions for developers:   Developers must install everything.</li> </ul>"},{"location":"developers/getting-started/#install-dsp-instructions-for-users","title":"Install DSP: Instructions for users","text":"<p>If you are a researcher or data steward who wants to use DSP to manage your data, you can get started quite quickly.</p> <p>DSP-TOOLS offers you a shortcut, so you only have to install DSP-TOOLS and its prerequisites:</p>"},{"location":"developers/getting-started/#xcode-command-line-tools","title":"XCode command line tools","text":"<p>Some Terminal commands used for the instructions below are not shipped with macOS by default. They must be installed separately. Install the XCode command line tools (not to be confused with the entire XCode application) by opening a Terminal window and typing:</p> <pre><code>xcode-select --install\n</code></pre> <p>You will be asked in a prompt if you want to install the command line developer tools. Click \"Install\".</p>"},{"location":"developers/getting-started/#docker-desktop","title":"Docker Desktop","text":"<p>DSP-API and DSP-APP are shipped as Docker containers. Install Docker Desktop from https://www.docker.com/products/docker-desktop/. Make sure to use the correct chip architecture (Intel versus Apple M1 chip).</p>"},{"location":"developers/getting-started/#python","title":"Python","text":"<p>Python is the language in which DSP-TOOLS is written. Even if there is a pre-installed version of Python on your computer, we recommend installing it separately. It can be downloaded from https://www.python.org/downloads/.</p>"},{"location":"developers/getting-started/#dsp-tools","title":"DSP-TOOLS","text":"<p>With these prerequisites installed, you are now ready to install DSP-TOOLS!</p> <p>Open a Terminal window and type:</p> <pre><code>pip3 install dsp-tools\n</code></pre> <p>Before using DSP-TOOLS, you should always execute the upgrade command:</p> <pre><code>pip3 install --upgrade dsp-tools\n</code></pre> <p>This command upgrades DSP-TOOLS to the latest version.</p>"},{"location":"developers/getting-started/#dsp-api-and-dsp-app-run-from-within-dsp-tools","title":"DSP-API and DSP-APP: run from within DSP-TOOLS","text":"<p>Now that you have DSP-TOOLS installed, you can use it to run DSP-API and DSP-APP according to these instructions.</p>"},{"location":"developers/getting-started/#test-project-rosetta","title":"Test project Rosetta","text":"<p>Now you are ready to try out our test project Rosetta. Make sure that DSP-API and DSP-APP are running, then open a Terminal window and type:</p> <pre><code>cd ~/Desktop                                                        # go to your Desktop  \ngit clone https://github.com/dasch-swiss/082E-rosetta-scripts.git   # clone the repository\ncd 082E-rosetta-scripts                                             # enter the repository\ndsp-tools create rosetta.json                                       # create the data model\ndsp-tools xmlupload rosetta.xml                                     # upload the data\n</code></pre> <p>You can then look at the data in a browser at the address http://0.0.0.0:4200/.</p> <p>Feel free to modify <code>rosetta.json</code> and <code>rosetta.xml</code> to your liking, restart DSP-API, create <code>rosetta.json</code> and upload <code>rosetta.xml</code> again, and see how the data changes in DSP-APP.</p> <p>That's it, you are ready to start working!</p>"},{"location":"developers/getting-started/#install-dsp-instructions-for-developers","title":"Install DSP: Instructions for developers","text":"<p>If you want to work with the code of the DSP software, you have to install the prerequisites used to build the code from source.</p>"},{"location":"developers/getting-started/#xcode-command-line-tools_1","title":"XCode command line tools","text":"<p>Some Terminal commands used for the instructions below are not shipped with macOS by default. They must be installed separately. Install the XCode command line tools (not to be confused with the entire XCode application) as follows:</p> <pre><code>xcode-select --install\n</code></pre> <p>You will be asked in a prompt if you want to install the command line developer tools. Click \"Install\".</p>"},{"location":"developers/getting-started/#homebrew","title":"Homebrew","text":"<p>Homebrew is a package manager that allows us to install other software. Install it with</p> <pre><code>/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n</code></pre>"},{"location":"developers/getting-started/#docker-desktop_1","title":"Docker Desktop","text":"<p>DSP-API and DSP-APP are shipped as Docker containers. Install Docker Desktop with</p> <pre><code>brew install --cask docker\n</code></pre>"},{"location":"developers/getting-started/#python_1","title":"Python","text":"<p>Python is the language in which DSP-TOOLS is written. It is also required to build the documentation of DSP-API and DSP-APP. Even if there is a pre-installed version of Python on your computer, we recommend installing it separately, with</p> <pre><code>brew install python\n</code></pre>"},{"location":"developers/getting-started/#git","title":"Git","text":"<p>All software developed by DaSCH is under Git version control, and hosted on GitHub. Git comes with the XCode command line tools, but we recommend installing it separately, with</p> <pre><code>brew install git\n</code></pre>"},{"location":"developers/getting-started/#openjdk-21","title":"OpenJDK 21","text":"<p>DSP-API is written in Scala, so building DSP-API from source requires Java. The recommended way to install it is SDK Man, because SDK Man takes care of the environment variable <code>JAVA_HOME</code>. Installing Java by other means (e.g. Homebrew) is also possible, but requires some manual work and has caused problems in the past.</p> <p>First, install SDK Man with</p> <pre><code>curl -s \"https://get.sdkman.io\" | bash\n</code></pre> <p>Then, pick a version to install:</p> <pre><code>sdk ls java\n</code></pre> <p>This command gives you a list of all available versions. Scroll down with the <code>Arrow Down</code> key and copy the name of the most recent version 21 of Temurin, e.g. <code>21.0.1-tem</code>. Then, exit the list view with <code>q</code>, and install the version you copied with</p> <pre><code>sdk install java 21.0.1-tem\n</code></pre> <p>Technical note: SDKMAN will take care of the environment variable JAVA_HOME. If we had installed Java with Homebrew, we would have to take care that JAVA_HOME points to the correct directory, which might vary from machine to machine.</p>"},{"location":"developers/getting-started/#sbt","title":"sbt","text":"<p>DSP-API uses sbt as a build tool. Install sbt with</p> <pre><code>brew install sbt\n</code></pre>"},{"location":"developers/getting-started/#just","title":"Just","text":"<p>just is a command runner run project-specific commands. It is used in the DSP-API repository. Install it with</p> <pre><code>brew install just\n</code></pre>"},{"location":"developers/getting-started/#nodejs-npm-and-angular","title":"Node.js, npm, and Angular","text":"<p>Parts of DSP-APP are written in Angular, which requires Node.js and its package manager npm.</p> <p>Install node.js and npm with</p> <pre><code>brew install node\n</code></pre> <p>Install Angular with</p> <pre><code>npm install -g @angular/cli\n</code></pre>"},{"location":"developers/getting-started/#dsp-api-and-dsp-app-build-from-source","title":"DSP-API and DSP-APP: build from source","text":"<p>Clone DSP-API from GitHub and build the Docker image from source:</p> <pre><code>git clone https://github.com/dasch-swiss/dsp-api.git\ncd dsp-api\nmake init-db-test-minimal\nmake stack-up\n</code></pre> <p>This starts the DSP stack consisting of Fuseki, DSP-API, SIPI, INGEST, and DSP-APP. If everything worked properly, the Dashboard in Docker Desktop should show those containers running.</p> <p>Please note that the DSP-APP container that was automatically started from within the DSP-API repo is just for convenience. If you want to actively work on DSP-APP, you should clone the DSP-DAS repo separately and run it according to its own instructions.</p> <p>To stop everything, type</p> <pre><code>make stack-down-delete-volumes\n</code></pre> <p>Please see the <code>Makefile</code> for other useful <code>make</code> targets.</p>"},{"location":"developers/getting-started/#dsp-tools-and-rosetta","title":"DSP-TOOLS and Rosetta","text":"<p>DSP-TOOLS is a command line tool used for creating complex data models and uploading big data sets. Install it with</p> <pre><code>pip3 install dsp-tools\n</code></pre> <p>If DSP-API and DSP-APP are running on your machine, you can try out DSP-TOOLS with our test project Rosetta:</p> <pre><code>git clone https://github.com/dasch-swiss/082E-rosetta-scripts.git\ncd 082E-rosetta-scripts\ndsp-tools create rosetta.json\ndsp-tools xmlupload rosetta.xml\n</code></pre> <p>You can then look at the data in DSP-APP at http://0.0.0.0:4200/.</p> <p>If you want to actively work on DSP-TOOLS, you should clone the DSP-TOOLS repo separately and run it according to its own instructions.</p>"},{"location":"developers/introduction/","title":"Introduction to DSP-API","text":"<p>The main software framework in the back-end of the DaSCH Service Platform is called DSP-API (previously Knora). DSP-API is a content management system for the long-term preservation and reuse of humanities data. It is designed to accommodate data with a complex internal structure, including data that could be stored in relational databases.</p> <p>DSP-API aims to solve key problems in the long-term preservation and reuse of humanities data:</p> <ul> <li>Traditional archives preserve data, but do not facilitate reuse. Typically, only metadata can be searched, not the data itself. Downloading the data to check whether the data are interesting or not is time-consuming and makes it impractical to reuse data from many different sources. DSP-API solves this problem by keeping the data alive. You can query all the data in a DSP repository, not just the metadata. You can import thousands of databases into DSP-API, and run queries that search through all of them at once.</li> <li>Another problem is that researchers use a multitude of different data formats, many of which are proprietary and quickly become obsolete. It is not practical to maintain all the programs that were used to create and read old data files, or even all the operating systems that these programs ran on. Instead of preserving all these data formats, DSP-API supports the conversion of all sorts of data to a small number of formats that are suitable for long-term preservation, and that maintain the data\u2019s meaning and structure:</li> <li>Non-binary data is stored as Resource Description Framework (RDF), in a dedicated database called a triplestore. RDF is an open, vendor-independent standard that can express any data structure. For a concise information about RDF basics see here.</li> <li>Binary media files (images, audio, and video) are converted to a few specialised archival file formats and stored by the media server SIPI, with metadata stored in the triplestore. For a concise information about SIPI see here.</li> <li>Moreover, DSP-API has built-in support for special data structures that occur on a regular basis in humanities data: persistent links, calender-independent dates and flexible searchable text markup.</li> <li>Persistent links are a very important feature. If a resource is changed, a new resource will be created in DSP-API. The older version remains available and citable, there will be no dead links. This means that if in a publication an older version is referenced, the cited version still can be displayed, but there will be a notice that a newer version exists with the corresponding link attached to it.</li> <li>A date could be given in any kind of calendar - e.g. the Julian, Gregorian, Jewish or Islamic - just to name the most frequent ones. DSP-API stores dates using the Julian day count that was established by astronomers. Use of the Julian day count easily allows for conversion from one calendar into another and to calculate distances between two dates. It is possible to search for a date in one calendar and to convert it into another one.</li> <li>Commonly used text markup systems have troubles to cope with overlapping markup. DSP-API solves this problem by using Standoff/RDF markup where the markup is stored as RDF data, separately from the text. This enables overlapping markup. DSP-API\u2019s RDF-based standoff is designed to support the needs of complex digital critical editions. DSP-API can import any XML document (including TEI/XML) for storage as standoff/RDF, and can regenerate the original XML document at any time.</li> </ul> <p>The following table contains a non-exhaustive list of data formats and the information on how these formats are stored and managed by DSP-API (and SIPI):</p> Original format Format in DSP-API Text (XML, LaTEX, Word, etc.) DSP resources (RDF) containing Standoff/RDF Tabular data, including relational databases DSP resources Data in tree or graph structures DSP resources Images (jpg, png, tiff, etc.) JPEG 2000 files stored by SIPI Audio and video files format not decided yet, stored by SIPI pdf stored by SIPI, but data reuse is improved by extracting the text for storage as Standoff/RDF <p>DSP-API makes data available for reuse via its generic, standards-based Application Programming Interfaces (APIs). A Virtual Research Environment (VRE) can then use these APIs to search, link together, and add to data from different research projects in a unified way.</p> <p>The full DSP-API documentation can be found here.</p> <p></p>"},{"location":"developers/introduction/#layout-of-dasch-service-platform","title":"Layout of DaSCH Service Platform","text":"<p>The DaSCH Service Platform is a platform that includes five layers (see Figure 1). The bottom layer consists of an RDF triplestore, the IIIF-based media server SIPI, the <code>knora-base</code> ontology and any project specific ontologies that extend the base ontology. The second layer is occupied by the DSP-API which is a RESTful API, i.e. an application program interface that uses HTTP requests to GET, PUT, POST and DELETE data. The DSP API has an implemented access control. It returns information in JSON-LD format. In order to make the data accessible in an easy way, three more layers are built on top of the DSP API. The DSP-JS library comprises the third layer, it contains a reusable Node.js module for HTTP requests written in TypeScript. Layer four is occupied by DSP UI modules. These modules help to create a graphical user interface. They are developed with Angular and TypeScript and designed in such a way that they can be integrated to an Angular project. The top layer is made up of the generic DSP-APP and the more specific project Apps. From the top layer Gravsearch queries are sent to the DSP API, where permissions are checked and the queries translated into SPARQL queries, which are sent further down to the triplestore. The results are returned to the DSP-APP if the user has the sufficient permissions. In such a way, copyrighted material can be protected.</p> <p> Figure 1: DaSCH Service Platform architecture.</p> <p>The generic web app DSP-APP itself consists of three different parts (see Figure 2). First, there is the project administration part where you can manage your project - build your data model, set permissions, add users, etc. Then, there is a cross-project research platform where you search (full text, advanced or expert search), add or modify your data - this is your working environment. The third component is the Manifest+ viewer wich is designed for project presentation. Alternatively, it is possible to build more elaborate project-specific Apps based on the provided DSP-API modules in the different layers. However, it's up to you to keep such project-specific Apps compatible with the latest DSP API version.</p> <p> Figure 2: Details of DSP-APP.</p> <p>Currently, the following programming languages, software and formats are used for the various components:</p> Component Software and formats RDF triplestore Apache Jena Fuseki Ontologies <code>knora-base</code> ontology and derived project ontologies SIPI C++, Lua, API-format: JSON DSP API Scala, API-formats: JSON-LD, RDF/XML or Turtle DSP-JS TypeScript, communication with DSP-API DSP-UI modules Angular modules, TypeScript, uses DSP-JS DSP-APP Angular, TypeScript, uses DSP-UI modules and DSP-JS <p></p>"},{"location":"developers/introduction/#the-knora-base-ontology","title":"The knora-base ontology","text":"<p>DSP-API has a base ontology, i.e. a data model, with pre-defined basic data types. In addition to this base ontology, each project can create its own data model which is capable to describe the types of items it wishes to store. Project specific ontologies must be extensions of the <code>knora-base</code> ontology.</p> <p>The <code>knora-base</code> ontology is identified by the IRI <code>http://www.knora.org/ontology/knora-base</code>. In our documents it will be identified by the prefix <code>knora-base</code> or simply <code>kb</code>. TODO: add link to <code>knora-base</code> doc.</p> <p></p>"},{"location":"developers/introduction/#standoffrdf-text-markup","title":"Standoff/RDF Text Markup","text":"<p>Standoff markup is text markup that is stored separately from the content it describes. DSP-API\u2019s Standoff/RDF markup stores content as a simple Unicode string, and represents markup separately as RDF data. By storing markup as RDF, DSP-API can search for markup structures in the same way as for any RDF data structure. This enables searches that combine text-related criteria with other sorts of criteria. For example, if persons and events are represented as DSP resources, and texts are represented in Standoff/RDF, a text can contain tags representing links to persons or events. One could then search for a text that mentions a person who lived in the same city as another person who is the author of a text that mentions an event that occurred during a certain period of time.</p> <p>In DSP-API\u2019s Standoff/RDF, a tag is an RDF entity that is linked to a text value. Each tag points to a substring of the text, but has its own semantic properties. It is possible to define own tag classes in the ontology by creating subclasses of the already defined <code>kb:StandoffTag</code>, and to attach own properties to them.</p> <pre><code>###  http://www.knora.org/ontology/knora-base#StandoffLinkTag\n\nkb:StandoffLinkTag rdf:type owl:Class ;\n\n              rdfs:subClassOf kb:StandoffTag ,\n                              [ rdf:type owl:Restriction ;\n                                owl:onProperty kb:standoffTagHasLink ;\n                                owl:cardinality \"1\"^^xsd:nonNegativeInteger\n                              ] ;\n\n              rdfs:comment \"Represents a reference to a Knora resource in a TextValue\"@en .\n</code></pre> <p>DSP-API supports automatic conversion between XML and Standoff/RDF. This can be achieved by Standoff/RDF storing the order of tags and their hierarchical relationships. Then, an XML-to-Standoff Mapping for the standoff tag classes and properties has to be defined. The mapping is written in XML. Afterwards, an XML document can be imported into DSP-API, which will store it in Standoff/RDF format. The following example shows a possible mapping for a knoraDate:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;mapping&gt;\n     &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;text&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/standoff#StandoffRootTag&lt;/classIri&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n\n    &lt;mappingElement&gt;\n        &lt;tag&gt;\n            &lt;name&gt;mydate&lt;/name&gt;\n            &lt;class&gt;noClass&lt;/class&gt;\n            &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n            &lt;separatesWords&gt;false&lt;/separatesWords&gt;\n        &lt;/tag&gt;\n        &lt;standoffClass&gt;\n            &lt;classIri&gt;http://www.knora.org/ontology/0001/anything#StandoffEventTag&lt;/classIri&gt;\n            &lt;attributes&gt;\n                &lt;attribute&gt;\n                    &lt;attributeName&gt;description&lt;/attributeName&gt;\n                    &lt;namespace&gt;noNamespace&lt;/namespace&gt;\n                    &lt;propertyIri&gt;http://www.knora.org/ontology/0001/anything#standoffEventTagHasDescription&lt;/propertyIri&gt;\n                &lt;/attribute&gt;\n            &lt;/attributes&gt;\n            &lt;datatype&gt;\n                &lt;type&gt;http://www.knora.org/ontology/knora-base#StandoffDateTag&lt;/type&gt;\n                &lt;attributeName&gt;knoraDate&lt;/attributeName&gt;\n            &lt;/datatype&gt;\n        &lt;/standoffClass&gt;\n    &lt;/mappingElement&gt;\n&lt;/mapping&gt;\n</code></pre> <p>Once the mapping has been created, an XML like the following could be sent to DSP-API and converted to standoff:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;text&gt;\n    We had a party on &lt;mydate description=\"new year\" knoraDate=\"GREGORIAN:2016-12-31\"&gt;New Year's Eve&lt;/mydate&gt;. It was a lot of fun.\n&lt;/text&gt;\n</code></pre> <p>The text and markup can then be searched using the search language Gravsearch (TODO: add link). When the document is retrieved, DSP-API converts it back to the original XML.</p>"},{"location":"developers/introduction/#using-gravsearch-for-searches","title":"Using Gravsearch for searches","text":"<p>DSP-API provides a search language called Gravsearch that is based on the SPARQL language. Gravsearch supports DSP\u2019s humanites-focused data structures, including calendar-independent dates and standoff markup, as well as fast full-text searches. This allows for combining text-related criteria with any other criteria in searches. TODO: add link to Gravsearch doc.</p>"},{"location":"developers/libraries/","title":"Libraries","text":""},{"location":"developers/libraries/#dsp-js","title":"DSP-JS","text":"<p>DSP-JS is a library to facilitate the communication with DSP-API in web clients developed with TypeScript/JavaScript. It depends on RxJS and is web framework agnostic (it can be used with Angular, React, Vue.js etc.).</p> <p>\u2192 Go to the DSP-JS documentation</p>"},{"location":"developers/rdf/","title":"Resource Description Framework (RDF) basics","text":"<p>The Resource Description Framework (RDF) is the basic representation language and foundation of the Semantic Web. It addresses the fundamental issue of managing distributed data. All things in the world are referred to as resources. Resources can be anything: documents, people, physical objects as well as abstract concepts. The Resource Description Framework (RDF) is the framework for expressing information about such resources. It is useful if information on the Web is not only displayed, but needs to be processed by applications. </p> <p>The following introduction to RDF draws heavily on the book of Dean Allemang &amp; James Hendler, Semantic Web for the Working Ontologist. Effective Modeling in RDFS and OWL, Second Edition, 2011, 27\u201350 which we warmly recommend for reading. Further information can be found in the RDF 1.1 Primer.</p> <p></p>"},{"location":"developers/rdf/#a-note-about-the-examples-in-this-document","title":"A note about the examples in this document","text":"<p>It was aimed for to explain all following language features by using only one exemplary project. The setting of the chosen project is the following: It is about archaeological objects stemming from different findspots - known and unknown - and kept in different institutions around the world today. These objects show depictions of mythological scenes that illustrate episodes known from ancient literature, e.g. the Iliad or the Odyssey of Homer, or reflect thoughts of various ancient philosophers about the nature of our world and all creatures living therein. For some of these objects other data and documents exist on the Web, e.g. entries in museum databases, and we may possess low or high resolution images of them. Furthermore, the findspots - if known - can be identified unambigously by reference to geographical databases, e.g. GeoNames. </p> <p></p> <p>If data are available in tabular form, the rows represent the items we intend to describe and each column represents some property of these items. The cells in the table then denote particular values for these properties. Table 1 shows a small excerpt of such a table from our exemplary project.</p> ID Category City Institution InventoryNr. 1 Ceramics Boston Museum of Fine Arts 28.46 2 Glyptics London British Museum 2717 3 Relief New York Metropolitan Museum 24.97.11 <p>In RDF, each of these cells has to be represented with three values which are called triples: a global reference for the row, a global reference for the column, and the value in the cell itself. The identifier for the row is the subject of the triple, the identifier for the column the predicate of the triple, and the value in the cell the object of the triple. </p> <p>There are three types of RDF data that can occur in triples: International Resource Identifiers (IRIs) / Universal Resource Identifiers (URIs), literals and blank nodes.</p> <p>A triple now describes the relationship between two resources which are the subject and the object of the triple. The predicate represents the nature of the relationship between subject and object. The relationship is directional - the predicate always points from the subject to the object - and is called a property. </p> <p>Table 2 shows all the triples of the data in Table 1. |Subject|Predicate|Object| |-----|:----:|---| |ID 1|belongsToCategory|Ceramics| |ID 1|todayIn|Boston| |ID 1|isKeptIn|Museum of Fine Arts| |ID 1|hasInventory|28.46| |ID 2|belongsToCategory|Glyptics| |ID 2|todayIn|London| |ID 2|isKeptIn|British Museum| |ID 2|hasInventory|2717| |ID 3|belongsToCategory|Relief| |ID 3|todayIn|New York| |ID 3|isKeptIn|Metropolitan Museum| |ID 3|hasInventory|24.97.11|</p> <p>Often, the same resource, e.g. a person, is referenced in multiple triples. When more than one triple refers to the same thing, it is more useful to view the triples in a directed graph where each triple is depicted by nodes and arcs: the subjects and objects of the triples are the nodes while the predicates denote the arcs with the predicate as label on the arc:</p> <p></p> <p>Furthermore, if the subject or object is a URI/IRI or a blank node, it is depicted within an ellipse, if it is a literal value, however, within a rectangle. </p> <p>The graph display of the triples in Table 2 then looks as follows: </p> <p>Let's assume we possess the information in Table 3 from another source which we intend to merge with our data presented in Table 1. |Work|Author|Depiction| |-----|:----:|---| |Iliad|Homer|24.97.11| |Odyssey|Homer|24.97.11| This provides us with the following triples in Table 4: |Subject|Predicate|Object| |-----|:----:|---| |Iliad|hasAuthor|Homer| |Odyssey|hasAuthor|Homer| |Iliad|hasDepictionOn|24.97.11| |Odyssey|hasDepictionOn|24.97.11| The graph display of the triples in Table 2 concerning ID 3 and of the triples in Table 4 looks as follows:  Since we now look at one specific example, namely \"ID 3\", all the values are literals and hence depicted in yellow rectangles.</p> <p></p>"},{"location":"developers/rdf/#namespaces-uniform-resource-identifiers-uris-and-international-resource-identifiers-iris","title":"Namespaces, Uniform Resource Identifiers (URIs) and International Resource Identifiers (IRIs)","text":"<p>If we intend to merge information from different sources, an essential question is whether a node in one graph is the same node as a node in another graph. RDF solves this issue through use of Uniform Resource Identifiers (URIs) or International Resource Identifiers (IRIs). Our well known web addresses, the URLs, are just a special case of URIs and IRIs. An International Resource Identifier is the internationalised form of a URI. IRIs extend the allowed characters in URIs from a subset of the ASCII character set to almost all characters of the Universal Code Character Set (Unicode / ISO 10646). </p> <p>The syntax of the URI/IRI allows to deference it, i.e. to use all the information in the URI/IRI such as server name, protocol, port number, file name etc. to locate a file or a location on the Web. The possibility of dereferencing enables participation in a global Web infrastructure.</p> <p>URIs and IRIs are painful to write out in detail when expressing models. Hence, it is common to use an abbreviation scheme. Then a URI/IRI has two parts: a namespace and an identifier with a colon in between. The representation for the identifier United Kingdom in the namespace geonames is <code>geonames:UnitedKingdom</code>.</p> <p>URIs/IRIs may not contain embedded spaces. Hence, the so-called InterCap convention is followed: names that consist of multiple words are transformed to identifiers without spaces by capitalizing each word: \"part of\" becomes <code>partOf</code>, \"Measure for Measure\" <code>MeasureForMeasure</code>, and so on. The selection of namespaces is unrestricted. However, it is common practice to refer to related identifiers in a single namespace. Following the above example all geographical information would be placed into the suggestive namespace geonames. These names correspond to fully qualified URIs - geonames stands for material in the geographical database GeoNames. </p> <p>Using URIs/IRIs as standard for global identifiers enables for a worldwide reference and thus, two peolpe anywhere in the world to refer to the same thing unequivocally. This property allows for specifying certain terms by a standard organization such as W3C. W3C standards provide definitions for terms such as e.g. <code>type</code>, <code>Class</code>, <code>subClassOf</code> which are intended to apply globally across the Semantic Web.</p> <p>W3C has defined a number of standard namespaces for use with Web technologies. The most important are: * <code>xsd:</code> Indicates identifiers for XML schema definition. The global IRI for the xsd namespace is http://www.w3.org/2001/XMLSchema#. * <code>xslns:</code>  Indicates identifiers for XML namespaces. The global IRI for the xslns namespace is https://www.w3.org/XML/1998/namespace. * <code>rdf:</code> Indicates identifiers used in RDF. The global IRI for the rdf namespace is http://www.w3.org/1999/02/22-rdf-syntax-ns#. * <code>rdfs:</code> Indicates identifiers used for the RDF Schema language (RDFS). The global IRI for the rdfs namespace is http://www.w3.org/2000/01/rdf-schema#. * <code>owl:</code> Indicates identifiers used for the Web Ontology Language (OWL). The global IRI for the owl namespace is http://www.w3.org/2002/07/owl#.</p> <p>Any URI in one of these namespaces - e.g. <code>rdfs:subClassOf</code> which is short for http://www.w3.org/2000/01/rdf-schema#subClassOf - refers to a particular term defined in the RDFS standard by the W3C. The term can also be dereferenced: at the server www.w3.org there is a page at the location <code>2000/01/rdf-schema</code> with an entry about <code>rdfs:subClassOf</code> which gives additional information about this resource.</p> <p></p>"},{"location":"developers/rdf/#literals","title":"Literals","text":"<p>Literals are values that are not URIs/IRIs. They may be simple strings such as \"Homer\", dates such as \"April 30th, 700 BCE\", numbers such as \"2.71828\". They are often associated with one of the following datatypes (list non-exhaustive): * boolean with value true or false * string with value character string * decimal with an arbitrary-precision decimal number as value * integer with an arbitrary-precision integer number as value * date with value in format yyyy-mm-dd</p> <p>Literals may only appear as object of a triple.</p> <p></p>"},{"location":"developers/rdf/#identifiers-in-the-rdf-namespace","title":"Identifiers in the RDF namespace","text":"<p>The RDF data model specifies the notion of triples and the merging of sets of triples. With the introduction of namespaces RDF provides agreements on how to refer to a particular entity. The RDF standard defines a small number of standard identifiers in the namespace rdf.</p> <ul> <li> <p><code>rdf:type</code> is a property that provides an elementary system in RDF to define types. <code>rdf:type</code> can be the predicate of a triple, the subject of the triple can be any identifier and the object of the triple is understood to be a type. <code>rdf:type</code> can be used to e.g. state, that Homers works belong to a group of literary works we call Poetry:</p> Subject Predicate Object Iliad rdf:type Poetry Odyssey rdf:type Poetry </li> <li> <p><code>rdf:Property</code> is an identifier to indicate when another identifier is to be used as a predicate rather than as subject or object. Some triples from our examples in Table 2 and Table 4 can be expressed with <code>rdf:Property</code> in the following way:</p> Subject Predicate Object wrote rdf:type rdf:Property isKeptIn rdf:type rdf:Property hasDepictionOn rdf:type rdf:Property </li> </ul> <p></p>"},{"location":"developers/rdf/#reification","title":"Reification","text":"<p>The strict subject - predicate - object form of RDF triples is limiting if one wants to qualify a statement further, if a statement about another statement seems desireable. We may wish to express that our object with ID 3 in Table 1 was bought by the Metropolitan Museum in 1924. Such a process of a statement about a statement is called reification. Reification can be achieved by different approaches. The easiest approach is to add just further triples expressing the desired relationship. </p> <p><pre><code>myonto:ID3 myonto:todayIn \"New York\" .\nmyonto:ID3 myonto:keptIn \"Metropolitan Museum\" .\nmyonto:ID3 myonto:hasAccessionDate 1924 .\n</code></pre> The namespace myonto is used in the above example to express that the statements concern resources and properties which are defined in our own namespace. In contrast, otheronto will be used in following examples to express that an external not further defined namespace is referred to.</p> <p>The simple approach shown above works well if more information about some event or statement needs to be specified. However, it doesn't work well in cases when information about the statement itself shall be expressed: We may wish to express that the information that on our object with ID 3 in Table 1 scenes from the Iliad are depicted (information contained in Table 3) stems from the catalogue entry of this object in the online collection of the Metropolitan Museum. Such metadata about statements are often related with provenance indications, likelihood expressions, context information or time spans. In such cases it is necessary to explicitly make a statement about a statement. This process, called explicit reification is supported by the RDF standard with three resources called <code>rdf:subject</code>, <code>rdf:predicate</code> and <code>rdf:object</code>. With the following set of triples we can express that in the online collection of the Metropolitan Museum is written that ID 3 contains a depiction of scenes from the Iliad:  <pre><code>myonto:n1 rdf:subject myonto:Iliad ;\n          rdf:predicate myonto:hasDepictionOn ;\n          rdf:object myonto:ID 3 .\nweb:MetropolitanMuseum myonto:says myonto:n1 .\n</code></pre></p> <p></p>"},{"location":"developers/rdf/#expressing-rdf-in-textual-form-turtle","title":"Expressing RDF in textual form: Turtle","text":"<p>When data are published in RDF on the Web the issue of representing RDF in text arises. There are multiple ways of achieving this. We are using a compact serialization of RDF which is called Turtle. It uses pre-defined shortcuts or namespaces. Since a binding between the local used namespaces and the global URIs/IRIs have to be achieved, Turtle begins with a preamble in which these bindings are defined: <pre><code>@prefix myonto: http://www.myontology\n@prefix rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# \n</code></pre> With these abbreviations the triples can be expressed in subject/predicate/object order followed by a period. <pre><code>myonto:HomerWorks rdf:type myonto:Poetry .\n</code></pre> This statement expresses that Homer's literary works belong to the category of poetry.</p> <p>If several triples share a common subject it need not be repeated each time. Instead of terminating the first triple with a period, a semicolon (;) is used to indicate that another triple with the same subject follows.  <pre><code>myonto:Homer rdf:type myonto:Author ;\n             myonto:wrote \"Iliad\" .\n</code></pre> This statement expresses that in my ontology named myonto Homer is part of my class Author and that he wrote the Iliad.</p> <p>If there are several triples that share both subject and predicate, a comma (,) is used to separate the objects. E.g. to express, that Homer wrote both the Iliad and the Odyssey, I can use the following statement: <pre><code>myonto:Homer myonto:wrote myonto:Iliad, myonto:Odyssey .\n</code></pre></p> <p>To improve terseness and readability Turtle provides some abbreviations. The most widley used abbreviation is the word a to mean <code>rdf:type</code>. Thus, the following two triples are equivalent, both telling that the class Ceramics in my ontology is part of a larger class called Category: <pre><code>myonto:Ceramics rdf:type myonto:Category .\nmyonto:Ceramics a myonto:Category .\n</code></pre> </p>"},{"location":"developers/rdf/#blank-nodes","title":"Blank nodes","text":"<p>Sometimes we are aware of that something exists, that we know some things about it, but its identity is unknown. We want to express what we know about this resource without bothering to use a global identifier. Such a resource without a global identifier can be represented by a blank node. Blank nodes are comparable to the unknown variables x or y in an equation - they represent something without saying what their value is. Blank nodes can be the subject and/or the object of a triple. Within the framework of our example of archaeological objects showing depictions of Homeric poetry which are held by different institutions, the exact provenience of some objects may be unknown since they stem from illicit excavations and were bought on the antiquities market many years ago. Nevertheless, we know that each object possesses a provenience.  </p> <p>A blank node is indicated by square brackets ([]). All triples of which it is a subject are placed within these brackets. The information that if an object was bought on the antiquities market no detail information about its find context is available can be put inside a blank node: <pre><code> [ rdf:type myonto:Market ;\n   myonto:noInfo myonto:FindContext ]\n</code></pre></p> <p>Such a blank node can then be referred to in other triples by including the entire bracketed sequence in place of the blank node. The following example expresses that all my objects which belong to the class UnprovenancedObj in my ontology myonto were bought on the antiquities market and for them I have no detail information about their find contexts available:  <pre><code>myonto:UnprovenancedObj myonto:isPartOf \n    [ rdf:type myonto:Market ;\n      myonto:noInfo myonto:FindContext ]\n</code></pre> </p>"},{"location":"developers/rdf/#ordered-information-in-rdf","title":"Ordered information in RDF","text":"<p>Ordering of RDF triples has to be specified explicitly: elements can be ordered in a list format. In Turtle an ordered list can be expressed by putting a sequence of objects within brackets (()). If we want to express that the king of Mykene, Agamemnon, was the father of four children, Iphigeneia being the oldest and Orestes being the youngest, we can express that in the following way: <pre><code>Agamemnon myonto:isFatherOf (Iphigeneia,\n                             Elektra, \n                             Chrysothemis, \n                             Orestes) .\n</code></pre></p> <p></p>"},{"location":"developers/rdf/#rdf-schema-rdfs","title":"RDF Schema (RDFS)","text":"<p>RDF simply creates a graph structure to represent data. The RDF Schema (RDFS) is a semantic extension of RDF wich provides some guidelines about how to use this graph structure, i.e. it imposes special syntactic conditions or restrictions upon RDF graphs. The schema is informaton about the data. It should help to provide meaning to the data. Thus, it is a layer on top of the RDF layer to describe consistency constraints in the data. The key to these levels is inferencing. The statements of meaning are given in the form of an inference pattern: \"Given some initial information, the following new information can be derived.\" That's the way the RDF Schema language (RDFS) and also the Web Ontology Language (OWL) work. All schema information in RDFS is expressed by RDF triples. The meaning of asserted triples is defined with new inferred triples. The structures that describe the meaning of the data are also in triples. </p> <p>The following introduction to RDF Schema draws heavily on the book of Dean Allemang &amp; James Hendler, Semantic Web for the Working Ontologist. Effective Modeling in RDFS and OWL, Second Edition, 2011, 113\u2013152 which we warmly recommend for reading. Further information can be found in the Recommendations of RDF Schema 1.1.</p> <p></p>"},{"location":"developers/rdf/#asserted-triples-and-inferred-triples","title":"Asserted triples and inferred triples","text":"<p>Asserted triples are triple data that were explicitly added in the original RDF store. Inferred triples are additional triples that are inferred by one of the inference rules. There is no logical distinction between inferred and asserted triples. Hence, one should be careful concerning inference rules and how to implement them. The RDFS and OWL standards define for certain patterns of triples which inferences are valid.</p> <p>The simplest approach is to store all triples in a single store and to ignore whether they are asserted or inferred. This approach is called cached inferencing since all inferences are stored with the data. It is simple, but the number of triples in the triple store increases and some inferred triples may later turn out to be incorrect und unwarranted. The other extreme is to never actually store any inferred triples in any persistent store. Then, inferencing is done in response to queries only. This approach can be called just in time inferencing, since the inferences are made just in time. The query responses are produced such that they respect all the appropriate inferences, but no inferred triple is retained. Both approaches have an important impact if data sources change, i.e. if a triple is deleted or a new triple added. If cached inferencing was chosen, originally inferred triples which are no longer valid must be identified and removed or new ones added. An important variant of just in time inferencing is where explicit inferencing is undesired.</p> <p>What kind of inferencing is needed depends on the required level of expressivity for a certain task. There are different inferencing levels. RDFS operates on a small number of inference rules that deal mostly with relating classes to subclasses and properties to classes. OWL includes constraints on properties and notions of equality and includes rules for describing classes based on allowed values for properties. All these standards use inferencing, but they differ in the inferencing that they support.</p> <p></p>"},{"location":"developers/rdf/#classes","title":"Classes","text":"<p>Resources can be grouped in classes which are themselves resources. The members of such a class are known as instances of the class. Classes are often identified by URIs/IRIs. All RDF datatypes are classes. The instances of a class that is a datatype are the members of the value space of the datatype. Thus, \"3.14\" is an instance of the class decimal, \"4\" is an instance of the class integer, \"2000-01-01\" is an instance of the class date, etc.</p> <p>The basic construct for specifying a group of related resources in RDFS is called an <code>rdfs:Class</code>. The way to express that something is a class is with a triple in which the predicate is <code>rdf:type</code> and the object is <code>rdfs:Class</code> as in the following examples:  <pre><code>myonto:Ceramics rdf:type rdfs:Class .\nmyonto:BlackFigured rdf:type rdfs:Class .\n</code></pre> These triples express that our resources <code>Ceramics</code> and <code>BlackFigured</code> are classes.</p> <p>One of the basic terms is <code>rdfs:subClassOf</code>. The meaning of \"B is a <code>subClassOf</code> C\" is \"every member of class B is also a member of class C\", expressed in the form of an inference. From a further information \"x is a member of B\" one can derive the new information \"x is a member of C\". Speaking more generally, if a class A is a subclass of another class B, then anything of type A is also of type B. This is called the type propagation rule. This feature of inference systems is particulary useful in a Semantic Web context in which new combinations of relationships likely occur as data from multiple sources are merged. In the framework of our example the class <code>BlackFigured</code> is a subclass of the class <code>Ceramics</code>. For any member of the class <code>BlackFigured</code> we can then derive that it is also a member of the class <code>Ceramics</code>due to the following statement : <pre><code>myonto:BlackFigured rdfs:subClassOf myonto:Ceramics .\n</code></pre>  A class may be a member of its own class extension and an instance of itself, this applies e.g. for <code>rdfs:Class</code>. </p> <p></p>"},{"location":"developers/rdf/#properties","title":"Properties","text":"<p>An RDF property describes the relationship between a subject resource and an object resource. </p>"},{"location":"developers/rdf/#properties-with-inferences","title":"Properties with inferences","text":"<p>One of the most fundemantal terms in RDFS is <code>rdfs:subPropertyOf</code>. It is a transitive property and allows a modeler to describe a hierarchy of related properties. If we want to express that some of the people who work for a museum are permanently employed while others possess only loose contracts we could express this fact with the following triples: <pre><code>myonto:isEmployedBy rdfs:subPropertyOf myonto:worksFor .\nmyonto:contractsTo rdfs:subPropertyOf myonto:worksFor .\n</code></pre> Regardless whether a person is employed by the museum or is a contractor, the person works for the museum.</p> <p>Other basic properties are <code>rdfs:range</code> and <code>rdfs:domain</code>. They have meanings inspired by the mathematical use of the words range and domain: the domain of a function is the set of values for which it is defined, its range is the set of values it can take. Both give informaton about how a property <code>P</code> is to be used: <code>domain</code> refers to the subject of any triple that uses <code>P</code> as its predicate, <code>range</code> refers to the object of any such triple.</p>"},{"location":"developers/rdf/#rdfsdomain","title":"<code>rdfs:domain</code>","text":"<p><pre><code>P rdfs:domain D .\n</code></pre> means that property <code>P</code> has domain <code>D</code>. From this we can infer that the subject of that triple is a member of the class <code>D</code>. <code>rdfs:domain</code> can be used to specify with which class the defined property can be used with. It is possible to specify multiple <code>rdfs:domain</code> properties when defining a property. We pick just two classes from our example - <code>Ceramics</code> and <code>BlackFigured</code> - which show a subclass relation:  <pre><code>myonto:BlackFigured rdfs:subClassOf myonto:Ceramics .\n</code></pre> We now have a property called <code>incised</code> whose domain is <code>BlackFigured</code>. <pre><code>myonto:incised rdfs:domain myonto:BlackFigured .\n</code></pre> This means that all my objects with incised decoration belong to the class <code>BlackFigured</code>.</p>"},{"location":"developers/rdf/#rdfsrange","title":"<code>rdfs:range</code>","text":"<p><pre><code>P rdfs:range R .\n</code></pre> means that the property <code>P</code> has range <code>R</code>. From this we can infer that the object (the value of <code>P</code>) of that triple is a member of class <code>R</code>. If the predicate of a triple has more than one <code>rdfs:range</code> property, the resources denoted by the objects of triples are instances of all the classes stated by the <code>rdfs:range</code> properties. If we want to specify that queens who gave birth to a son could theoretically become queen mothers, we could do that with the following combination of  <code>rdfs:domain</code> and <code>rdfs:range</code>: <pre><code>myonto:hasSon rdfs:domain myonto:Queen .\nmyonto:hasSon rdfs:range myonto:QueenMother .\n</code></pre></p> <p>It is important to know that if <code>P</code> is used in an inconsistent way with this declaration, RDFS does not signal an error, but rather infers the necessary type information to bring <code>P</code> into accordance with its domain and range declarations! In RDFS, there is no notion of an incorrect or inconsistent inference, i.e. it will never proclaim an input as invalid but simply infer appropriate type information. Domains and ranges are not used to validate information, but to determine new information based on old information. In practice, there are often better and more appropriate options to use instead of <code>rdfs:domain</code> and <code>rdfs:range</code> alone.</p> <p></p>"},{"location":"developers/rdf/#properties-without-inferences","title":"Properties without inferences","text":"<p>RDFS provides some properties from which no inferences can be drawn, i.e. no inference semantics is defined for them. They are useful and important for documentation purposes. These are <code>rdfs:label</code>, <code>rdfs:comment</code>, <code>rdfs:seeAlso</code> and <code>rdfs:isDefinedBy</code>.</p> <p>Resources on the Semantic Web are specified by IRIs/URIs which are not meaningful to people. Thus, RDFS provides the property <code>rdfs:label</code> whose intended use is to provide a human-readable version for any resource's name. Multilingual labels are possible if the language tagging facility of RDF literals is used.  <pre><code>myonto:BlackFigured rdfs:label \n                \"black-figured vessels\"@en, \n                \"schwarzfigurige Gef\u00e4sse\"@de .\n</code></pre> Frequently it is useful to add comments about a model, i.e. to document it properly. In RDFS, <code>rdfs:comment</code> is an instance of <code>rdf:Property</code> that can be used to provide a human-readable description of a resource. Multilingual documentation is possible if the language tagging facility of RDF literals is used. To make a comment a triple using the property <code>rdfs:comment</code> as a predicate has to be asserted.  <pre><code>myonto:BlackFigured rdfs:comment \"The class BlackFigured contains ceramic vessels where the decoration is painted with black paint.\" .\n</code></pre> In the case where a resource is an URL, supplementary information about this resource may be useful. This additional information is often included in documents. <code>rdfs:seeAlso</code> provides a way to specify the web location of such supplementary information. The web location has to be given in the form of an IRI/URI! The precise behaviour of a processor is not specified, but most tools that encounter <code>rdfs:seeAlso</code> link them to those links in a browser or application interface. In our example we could link findspots of archaeological objects to a web resource with geodata, e.g. GeoNames, in the following way: <pre><code>myonto:latitude rdfs:seeAlso geonames:lat .\n</code></pre> <code>rdfs:isDefinedby</code> provides a link to the primary resource of information about a resource. Thus, the definitional description of a resource can be found, e.g. <code>rdfs:isDefinedBy</code> is defined in RDF to be a <code>rdfs:subPropertyOf</code> of <code>rdfs:seeAlso</code>.</p> <p></p>"},{"location":"developers/rdf/#combinations-and-patterns","title":"Combinations and patterns","text":""},{"location":"developers/rdf/#intersection","title":"Intersection","text":"<p>RDFS inference rules are few and rather simple. More specific patterns can be obtained by combining basic RDFS features. One such case is set intersection. If we intend to draw the inference that if a resource <code>x</code> is an instance of class <code>C</code>, then it should also be an instance of classes <code>A</code> and <code>B</code>, expressing the formal relationship <code>C</code> \u2286 <code>A</code> \u2229 <code>B</code>. Such an inference can be obtained by making <code>C</code> a subclass of <code>A</code> and <code>B</code>: <pre><code>:C rdfs:subClassOf :A .\n:C rdfs:subClassOf :B .\n</code></pre> Due to the inference rule defined for <code>rdfs:subClassOf</code> we can infer from the triple <pre><code>x rdf:type :C .\n</code></pre> the desired triples <pre><code>x rdf:type :A .\nx rdf:type :B .\n</code></pre> Thus, from a membership in <code>C</code> membership in <code>A</code> and <code>B</code> can be inferred. But from membership in <code>A</code> and <code>B</code> membership in <code>C</code> cannot be inferred! Inferences can only be drawn in one direction.</p> <p>In an analogous way to the treatment of classes, set intersection can be defined for properties using the construct <code>rdfs:subPropertyOf</code>.</p>"},{"location":"developers/rdf/#union","title":"Union","text":"<p>The union of two sets (<code>A</code> \u222a <code>B</code> \u2286 <code>C</code>) can be obtained by making <code>C</code> a superclass of <code>A</code> and <code>B</code>.  <pre><code>:A rdfs:subClassOf :C .\n:B rdfs:subClassOf :C .\n</code></pre> Then, for any instance <code>x</code> that is either a member of class <code>A</code> or of <code>B</code> it will be inferred that it is also a member of class <code>C</code>.</p> <p>In an analogous way to the treatment of classes, set union can be defined for properties using <code>rdfs:subPropertyOf</code>.</p> <p></p>"},{"location":"developers/rdf/#collections","title":"Collections","text":"<p>A collection is represented as a list of items. <code>rdf:List</code> is an instance of <code>rdfs:Class</code> that can be used to build descriptions of lists and other list-like structures.</p> <p></p>"},{"location":"developers/rdf/#summary","title":"Summary","text":"<p>The following Figure 4 illustrates the concepts of resource, class, and sub-class based on our example project.  </p> <p>Figure 5 shows the same in a more general way: resources are denoted by a large black dot and arrows are drawn from a resource to the class it defines. A sub-class is shown by a rectangle (the sub-class) completely enclosed by another (the super-class), i.e. class ConstraintProperty is a subclass of class Property. The notion <code>rdf:type</code> specifies that something is a member of a group, i.e. an instance of a class. By using <code>rdfs:Class</code> instead of <code>rdf:type</code> a description of the meaning of a membership in a group is gained. Meaning is expressed through the mechanisms of inference in RDFS that can be drawn when a resource is used in a certain way.</p> <p></p> <p>The following Figure 6 expresses the same information about the class hierarchy, but does so using a graphic representation of the RDF data model. If a class is a subset of another, there is an arc labelled \"s\" from the node representing the first class to the node representing the second one (\"s\" stands for <code>rdfs:subClassOf</code>). If a resource was an instance of a class, then there is an arc labelled \"t\" from the resource to the node representing the class (\"t\" stands for <code>rdf:type</code>). Not all arcs are drawn, e.g. <code>rdfs:ConstraintProperty</code> is a subclass of <code>rdfs:Resource</code> because it is a subclass of <code>rdf:Property</code> which is a subclass of <code>rdfs:Resource</code>.</p> <p></p> <p>Examples:  - The class <code>rdfs:Literal</code> is an instance of <code>rdfs:Class</code> and an instance of <code>rdfs:Resource</code>.  - The class <code>rdf:Property</code> is the class of RDF properties and an instance of <code>rdfs:Class</code>.</p> <p></p>"},{"location":"developers/rdf/#web-ontology-language-owl","title":"Web Ontology Language (OWL)","text":"<p>OWL is intended to be used when information contained in documents needs to be processed by applications, it explicitly represents the meaning of terms in vocabularies and the relationship between those terms. The representation of terms and their interrelationships are called an ontology. A concrete syntax is needed in order to store ontologies and to exchange them among tools and applications. The primary exchange syntax for OWL is the XML syntax for RDF (RDF/XML), but other syntaxes such as e.g. Turtle are also frequently used. The data described by an OWL ontology is interpreted as a set of \"individuals\" and a set of \"property assertions\" which relate these individuals to each other. An ontology consists of a set of axioms which place constraints on sets of individuals called \"classes\" and the types of relationships permitted between them. OWL ontologies can import other ontologies, adding information from the imported ontology to the current ontology.</p> <p>The main building blocks of the OWL language are an RDF graph and at least one concrete syntax - there may be more than one - that can be used to serialize and exchange ontologies. </p> <p>OWL has been designed to meet the needs for a Web Ontology Language. It is part of the W3C recommendations related to the Semantic Web: - XML provides a surface syntax for structured documents, but imposes no semantic constraints. - XML Schema is a language for restricting the structure of XML documents and extends XML with datatypes. - RDF is a datamodel for objects and relations between them. Furthermore, it provides a simple semantics for this datamodel and these datamodels can be represented in an XML syntax. - RDF Schema is a vocabulary for describing properties and classes of RDF resources, with a semantics for generalization-hierarchies of such properties and classes. - OWL then adds more vocabulary to RDF for describing properties and classes: e.g. relations between classes, cardinality, equality, characteristics of properties and enumerated classes.</p> <p>The following introduction to OWL draws heavily on the book of Dean Allemang &amp; James Hendler, Semantic Web for the Working Ontologist. Effective Modeling in RDFS and OWL, Second Edition, 2011, 153\u2013305 which we warmly recommend for reading. Further information can be found in the Recommendations of the OWL 2 Web Ontology Language Document Overview (Second Edition) and the Wikipedia entry of OWL.</p> <p></p>"},{"location":"developers/rdf/#owlclass","title":"<code>owl:Class</code>","text":"<p>In OWL, a Class defines a group of individuals that belong together because they share some properties. An <code>owl:Class</code> differs from an <code>rdfs:Class</code> - an <code>owl:Class</code> is a special case of an <code>rdfs:Class</code>. Classes can be organised in a hierarchy using <code>rdfs:subClassOf</code>. Thus, <code>owl:Class</code> is defined as a subclass of <code>rdfs:Class</code>: <pre><code>owl:Class rdfs:subClassOf rdfs:Class .\n</code></pre> This means that every member of an <code>owl:Class</code>  is also a member of <code>rdfs:Class</code>. </p> <p>There is a built-in most general class named <code>owl:Thing</code> which is the class of all individuals. It is a superclass of all OWL classes. There is also a built-in class named <code>owl:Nothing</code> which is the class that has no instances. It is a subclass of all OWL classes. </p> <p></p>"},{"location":"developers/rdf/#owlinverseof","title":"<code>owl:inverseOf</code>","text":"<p>Extra language features that are not directly provided by OWL, but that one may desire, such as e.g. <code>superClassOf</code>, are often supported by OWL as a combination of other features. The construct <code>owl:inverseOf</code> inverses a property, i.e. the direction of the property is reversed. This property can be used to define e.g. the <code>superClassOf</code> of a resource by combining it with <code>rdfs:subClassOf</code> in the following way: <pre><code>myonto:superClassOf owl:inverseOf rdfs:subClassOf .\n</code></pre></p> <p></p>"},{"location":"developers/rdf/#owlsymmetricproperty","title":"<code>owl:SymmetricProperty</code>","text":"<p>For a symmetric property holds that if a pair (x,y) is an instance of the property P, then also the pair (y,x) is an instance of this property P. Such a property is provided by <code>owl:SymmetricProperty</code> and expressed in OWL as a Class. An example for such a property is to be married - if Agamemnon is married to Klytaimnestra, Klytaimnestra is also married to Agamemnon. Thus we can define a property <code>married</code> in our ontology with the following triples: <pre><code>myonto:married rdf:type owl:SymmetricProperty .\nAgamemnon myonto:married Klytaimnestra .\n</code></pre></p> <p>Be aware - to make sure that <code>owl:inverseOf</code> works in both directions, one has to assert that <pre><code>owl:inverseOf rdf:type owl:SymmetricProperty .\n</code></pre></p> <p></p>"},{"location":"developers/rdf/#owltransitiveproperty","title":"<code>owl:TransitiveProperty</code>","text":"<p>Another important property is transitivity. Transitivity is a relation between three elements such that if it holds between the first and second and it also holds between the second and third, it must necessarily hold between the first and the third. In OWL, transitivity is provided by the construct <code>owl:TransitiveProperty</code> which is a class of properties. To model the property <code>isLocatedIn</code> in our ontology as a member of the transitive class we can state <pre><code>myonto:isLocatedIn rdf:type owl:TransitiveProperty .\n</code></pre> Together with the triples <pre><code>Rome myonto:isLocatedIn Italy .\nItaly myonto:isLocatedIn Europe .\n</code></pre> we can infer that Rome is located in Europe.</p> <p></p>"},{"location":"developers/rdf/#owlequivalentclass","title":"<code>owl:equivalentClass</code>","text":"<p>A frequent situation is that if information about the same entity from different sources is merged then the two providers of this information will not have used the same URI/IRI for refering to the same entity. When combining these data it may be useful to state that two URIs/IRIs actually refer to the same entity. When two classes are known to always have the same members, they are said to be equivalent. Such a situation can be expressed with one simple statement using <code>owl:equivalentClass</code>: <pre><code> owl:equivalentClass rdf:type owl:SymmetricProperty .\n myonto:GreekGods owl:equivalentClass otheronto:Deities .\n</code></pre> The second triple expresses that the class <code>GreekGods</code> in our ontology is equivalent to the class <code>Deities</code> in some other ontology we refer to.</p> <p>Note that when two classes are equivalent, it only means that they have the same members. But other properties of these classes aren't shared!</p> <p></p>"},{"location":"developers/rdf/#owlequivalentproperty","title":"<code>owl:equivalentProperty</code>","text":"<p>If one intends to state that two properties are equivalent, <code>owl:equivalentProperty</code> can be used:  <pre><code> myonto:isInvisible owl:equivalentClass otheronto:notSeen .\n</code></pre> This statement expresses that the property which is called <code>isInvisible</code> in our ontology, is named <code>notSeen</code> in some other ontology.</p> <p></p>"},{"location":"developers/rdf/#owlsameas","title":"<code>owl:sameAs</code>","text":"<p>If it turns out that two individuals are actually one and the same, <code>owl:sameAs</code> can be used to state this fact: <pre><code> myonto:Puteoli owl:sameAs otheronto:Puzzeoli .\n</code></pre> This statement expresses that the site which is called <code>Puteoli</code> in our ontology, is the same as a site named <code>Puzzeoli</code> in some other ontology.</p> <p></p>"},{"location":"developers/rdf/#owlfunctionalproperty","title":"<code>owl:FunctionalProperty</code>","text":"<p>A functional property <code>owl:FunctionalProperty</code>is a property which can only have one single value. An everyday example for such a property is e.g. <code>hasBirthplace</code> since each person has only one birth place. Functional properties can be useful to infer sameness, e.g. if names with foreign characters are transliterated differently in two sources - a Greek \"B\" may be transliterated either as \"B\" or as \"V\", we can state: <pre><code> myonto:GreekB owl:FunctionalProperty otheronto:GreekV .\n</code></pre></p> <p></p>"},{"location":"developers/rdf/#owlinversefunctionalproperty","title":"<code>owl:InverseFunctionalProperty</code>","text":"<p>However, it is more common to use the related notion of <code>owl:InverseFunctionalProperty</code>. One can think of this construct to be the inverse of <code>owl:FunctionalProperty</code> as its name suggests. Especially identifying numbers are inverse functional properties.  <pre><code> myonto:hasInventoryNumber rdf:type owl:InverseFunctionalProperty .\n myonto:ID3 myonto:hasInventoryNumber \"24.97.11\" .\n otheronto:ID2435 myonto:hasInventoryNumber \"24.97.11\" .\n</code></pre> From the above example follows that ID 3 in my data set is the same object as ID 2435 in another data set.</p> <p>It is sometimes useful for a single property to be an <code>owl:FunctionalProperty</code> and an <code>owl:InverseFunctionalProperty</code>. This means that it is a one-to-one property: for each individual  there is exactly one value for the property and the other way round. This feature is intended in the case of unique identifiers as in the following example:  <pre><code> myonto:hasID rdfs:domain myonto:Monument .\n myonto:hasID rdfs:range xsd:Integer .\n myonto:hasID rfd:type owl:FunctionalProperty .\n myonto:hasID rfd:type owl:InverseFunctionalProperty .\n</code></pre> This means that each member of class <code>Monument</code> possesses a unique identifier that is an integer number. Any two monuments that share an <code>ID</code> must be the same (due to inverse functionality) and in addition, each monument can have at most one ID (due to functionality).</p> <p></p>"},{"location":"developers/rdf/#owlobjectproperty-and-owldatatypeproperty","title":"<code>owl:ObjectProperty</code> and <code>owl:DatatypeProperty</code>","text":"<p>The constructs <code>owl:sameAs</code>, <code>owl:FunctionalProperty</code> and <code>owl:InverseFunctionalProperty</code> especially help to describe how information from multiple sources can be merged. OWL can also provide useful information for editing tools if a value of some property may be either a link to another object or a widget for a particular data type. For this purpose OWL distinguishes between <code>owl:DatatypeProperty</code> and <code>owl:ObjectProperty</code>. <code>owl:DatatypeProperty</code> can have a data value as object, <code>owl:ObjectProperty</code> can have a resource as object.  <pre><code>myonto:inSameMuseum rdf:type owl:ObjectProperty.\nmyonto:shipVoyage rdf:type owl:DatatypeProperty. \n</code></pre> The first example may be used to express that one archaeological object is kept in the same museum as another archaeological object while the second example may select those individuals who participated in a ship voyage such as e.g. the Argonauts.</p> <p></p>"},{"location":"developers/rdf/#restrictions","title":"Restrictions","text":"<p>The construct <code>owl:Restriction</code> allows to describe individuals of classes in terms of existing properties and classes that have already been modeled. The class of all things in OWL called <code>owl:Thing</code> is unrestricted. A restriction provides some description that limits the kinds of things that can be said about a member of the class. A restriction class in OWL is defined by the keyword <code>owl:onProperty</code>. A description of how the new class is constrained can be provided e.g. by <code>owl:allValuesFrom</code>, <code>owl:someValuesFrom</code> and <code>owl:hasValue</code>. The membership in a restriction class must satisfy the specified conditions as well as the <code>owl:onProperty</code> specification. </p> <p></p>"},{"location":"developers/rdf/#property-constraints","title":"Property constraints","text":"<p><code>owl:someValuesFrom</code> selects all individuals from a class for which at least one value of the property <code>P</code> comes from class <code>C</code>. In our example we can formulate such a restriction as: <pre><code>[a owl:Restriction;\n   owl:onProperty myonto:isLocatedIn;\n   owl:someValuesFrom myonto:Museum]\n</code></pre> All archaeological objects kept in a museum today thus have been defined as all archaeological objects for which at least one value of the property <code>isLocatedIn</code> comes from the class <code>Museum</code>. The [ ] notation refers to a blank node which is described by the properties listed here. This restriction class has no specific name associated with it - it is defined by the properties of the restriction and is hence called an unnamed class.</p> <p></p> <p><code>owl:allValuesFrom</code> selects all individuals from a class for which all values of the property <code>P</code> come from class <code>C</code>. In our example we can formulate such a restriction as: <pre><code>[a owl:Restriction;\n   owl:onProperty myonto:hasProvenience;\n   owl:allValuesFrom myonto:Findspot]\n</code></pre> This restriction selects all our archaeological objects for which the findspot is known.</p> <p>A noteworthy difference between <code>owl:someValuesFrom</code> and <code>owl:allValuesFrom</code> is that the former implies that there must be such a member, while the latter technically means if there are any members, then they all must have this property which doesn't imply that there are any members.</p> <p></p> <p><code>owl:hasValue</code> is used to produce a restriction of the form \"all individuals that have the value <code>A</code> for the property <code>P</code>\". We can formulate such a restriction as: <pre><code>[ a owl:Restriction ;\n    owl:onProperty myonto:P ;\n    owl:hasValue myonto:A ] .\n</code></pre> Let's assume we defined a property <code>myonto:hasImage</code> which helps to select archaeological objects for which we possess images. We can now state a restriction for those with high resolution images: <pre><code>myonto:HighResolutionObject owl:equivalentClass\n [ a owl:Restriction ;\n     owl:onProperty myonto:hasImage;\n     owl:hasValue myonto:hasHighresImage ] .\n</code></pre> That we have such a high resolution image of a certain object we can formulate with the following triple: <pre><code>myonto:ID3 myonto:hasImage myonto:hasHighresImage .\n</code></pre> Then it is possible to deduce <pre><code>myonto:ID3 a myonto:HighResolutionObject .\n</code></pre></p> <p><code>owl:hasValue</code> is just a special case of the <code>owl:someValuesFrom</code> restriction. Nevertheless, it is very useful because it effectively turns specific instance descriptions into class descriptions.</p> <p></p> <p>OWL provides a facility for defining new classes as unions (<code>owl:unionOf</code>) and intersections (<code>owl:intersectionOf</code>) of previously defined classes. The union of two or more classes includes the members of all those classes while the intersection includes only those that belong to every one of the classes. </p> <p></p> <p>OWL allows to enumerate the members of a class using the construct <code>owl:oneOf</code>. If I have a class <code>myonto:ObjectsSomeSmallMuseum</code> with the members \"vase1\", \"vase2\" and \"relief1\", then: <pre><code>myonto:ObjectsSomeSmallMuseum rdf:type owl:Class;\n       owl:oneOf (myonto:vase1 myonto:vase2 myonto:relief1).\n</code></pre> My class <code>myonto:ObjectsSomeSmallMuseum</code> is related via the property <code>owl:oneOf</code> to a list of the members of the class. However, <code>owl:oneOf</code> should be used only in situations in which the definition of the class is not likely to change at all or at least not frequently. One such case would e.g. be the number of planets in the solar system. In contrast, the above example may be appropriate for our own immediate needs, but not for a more general approach: although we include only three objects of this small museum in our data, the museum itself for sure owns many more. </p> <p></p> <p>Sometimes it may be useful to state that one thing is different from another thing. OWL provides <code>owl:differentFrom</code> for this. An example is the following: <pre><code>myonto:Zenon owl:differentFrom otheronto:Zenon.\n</code></pre> Two different ancient Greek philosophers with the name Zenon are known. The above triple states that the Zenon in our ontology (e.g. Zenon of Elea) is not the same Zenon as in another ontology (e.g. Zenon of Kition).</p> <p></p>"},{"location":"developers/rdf/#cardinalities","title":"Cardinalities","text":"<p>OWL also includes restrictions that refer to cardinalities, i.e. the number of values for a specific property. Cardinality restrictions can be used to define sets of particular interest. Cardinality refers to the number of distinct values a property has. The fact that we only know about two works attributed to Homer - the Iliad and the Odyssey - we may state by using <code>owl:cardinality</code>: <pre><code>[a owl:Restriction;\n   owl:onProperty myonto:HomerWorks;\n   owl:cardinality 2]\n</code></pre> Cardinality restrictions can also be used to specify upper and lower boundaries, the respective constructs are named <code>owl:maxCardinality</code> and <code>owl:minCardinality</code>. The restriction to cardinalities of 0 and 1 have special modeling utility:</p> <ul> <li><code>minCardinality 0</code> indicates a set of individuals for which some value for a specified property is optional</li> <li><code>minCardinality 1</code> indicates a set of individuals for which some value for a specified property is required</li> <li><code>maxCardinality 0</code> specifies that no value for the specified property is allowed</li> <li><code>maxCardinality 1</code> specifies that a value is unique (but need not exist)</li> </ul> <p></p>"},{"location":"developers/rdf/#reasoning-with-individuals-and-classes","title":"Reasoning with individuals and classes","text":"<p>From an RDF perspective inferences about individuals and inferences about classes are very similar: in both cases new triples are added to the model based on the asserted triples. However, from a modeling perspective, these two kinds of reasoning are very different. The former draws specific conclusions about individuals while the latter draws general conclusions about classes of individuals. In the case of reasoning about individuals the information specified in one source is transformed according to a model for use in another context with the help of constructs such as <code>rdfs:subClassOf</code>, <code>rdfs:subPropertyOf</code> and various <code>owl:Restriction</code>. Class reasoning determines how data are related in general with constructs such as <code>rdfs:subClassOf</code>, <code>rdfs:subPropertyOf</code>, <code>rdfs:domain</code> or <code>rdfs:range</code>. Once these more general relationships have been inferred, the processing of the data can be done much easier.</p> <p></p>"},{"location":"developers/rdf/#composing-files","title":"Composing files","text":"<p>OWL provides a built-in class <code>owl:Ontology</code>. The URI/IRI of an ontology usually corresponds to the URL of the file on the Web where the ontology is stored. The corresponding URI/IRI can be eclosed in angle brackets as follows: <pre><code>&lt;http://www.knora.org/ontology/knora-base&gt; rdf:type owl:Ontology.\n</code></pre> This can be useful when modularity of semantic models is specified. The most frequent way to specify modularity is with the property <code>owl:imports</code>. This property connects two instances of the class <code>owl:Ontology</code>.</p> <p></p>"},{"location":"developers/rdf/#summary-of-constructs","title":"Summary of constructs","text":"<ul> <li><code>rdfs:subClassOf</code> - the members of a subclass are also a member of a superclass</li> <li><code>rdfs:subPropertyOf</code> - relations described by a subproperty also hold for the superproperty</li> <li><code>rdfs:domain</code> - the subject of a triple is classified into the domain of the predicate</li> <li><code>rdfs:range</code> - the object of a triple is classified into the range of the predicate</li> <li><code>rdfs:label</code> - human-readable name of a resource, no semantics inferable</li> <li><code>rdfs:comment</code> - human-readable information of the model, no semantics inferable</li> <li><code>owl:equivalentClass</code> - the members of each class are also members of the other class</li> <li><code>owl:equivalentProperty</code> - relations that hold for each property also hold for the other property</li> <li><code>owl:sameAs</code> - all statements about one instance hold for the other instance</li> <li><code>owl:inverseOf</code> - exchanges subject and object</li> <li><code>owl:TransitiveProperty</code> - the chains of a relationship collapse into a single relationship</li> <li><code>owl:SymmetricProperty</code> - the property is its own inverse</li> <li><code>owl:FunctionalProperty</code> - only one value as object allowed</li> <li><code>owl:InverseFunctionalProperty</code> - only one value as subject allowed</li> <li><code>owl:ObjectProperty</code> - the property can have a resource as object</li> <li><code>owl:DatatypeProperty</code> - the property can have a data value as object</li> <li><code>owl:Restriction</code> - a building block in OWL that describes classes by restricting the values that are allowed for certain properties</li> <li><code>owl:hasValue</code> - a type of restriction that refers to a single value for a property</li> <li><code>owl:someValuesFrom</code> - a type of restriction that refers to a set from which some value for a property must come</li> <li><code>owl:allValuesFrom</code> -  a type of restriction that refers to a set from which all values for a property must come</li> <li><code>owl:onProperty</code> - a link from a restriction to the property it restricts.   </li> <li><code>owl:unionOf</code> - unites classes and creates a new class</li> <li><code>owl:intersectionOf</code> - determines the intersection of classes and creates a new class</li> <li><code>owl:complementOf</code> - determines the compliment of a class and creates a new class</li> <li><code>owl:oneOf</code> - specifies that a class consists just of the listed members</li> <li><code>owl:differentFrom</code> - specifies that one individual is not identical to another one</li> <li><code>owl:disjointWith</code> - specifies that two classes cannot share a member</li> <li><code>owl:cardinality</code> - specifies information about the number of distict values for some property</li> <li><code>owl:minCardinality</code> - specifies information about the minimum number of distinct values for a property</li> <li><code>owl:maxCardinality</code> - specifies information about the maximum number of distinct values for a property</li> <li><code>owl:imports</code> -  allows one ontology to refer explicitly to another ontology.</li> </ul>"},{"location":"developers/sipi/","title":"SIPI basics","text":""},{"location":"developers/sipi/#the-media-server-sipi","title":"The media server SIPI","text":"<p>The Simple Image Presentation Interface (Sipi) takes care of storing, converting and serving image, audio and video files as well as other documents such as pdf files. It is designed to be used by all institutions that need to preserve high-quality images and to make them available online.</p> <p>SIPI implements the International Image Interoperability Framework (IIIF), which aims at supporting interoperability between different image repositories. SIPI efficiently converts lossless between image formats while preserving the metadata contained in the image files. If images are stored in JPEG 2000 format, SIPI can convert them on the fly to formats that are commonly used on the Internet.  SIPI is written in C++ and runs on Linux and Mac OS X. It offers a flexible framework for specifying authentication and authorization logic which is obtained by scripts written in the scripting language Lua. SIPI supports restricted access to images, either by reducing the image dimensions or by adding watermarks to the images. </p>"},{"location":"developers/sipi/#interaction-of-dsp-api-and-sipi","title":"Interaction of DSP-API and SIPI","text":"<p>If a file is requested from SIPI by e.g. an image link served by DSP-API, a preflight function is called. This function needs three parameters: a prefix, the identifier (the name of the requested file) and a cookie. All file links created by DSP-API use the project number as prefix. An example link from our incunabula project may look as follows: <code>0.0.0.0:1024/0803/incunabula_0000003328.jp2/full/2613,3505/0/default.jpg</code>.</p> <p>Based on the provided information, SIPI asks DSP-API about the permissions on the file in question of the current user. Therefore, the cookie is needed: it contains the current user's DSP-API session ID. Hence, DSP-API can match SIPI's request with a given user profile and tell SIPI the permissions this user has on the requested file. If the user has sufficient permissions, the file is served in full quality. If the user has only preview rights, SIPI serves a reduced quality of the file or integrates a watermark. If the user has no permissions, SIPI refuses to serve the file. However, all of this behaviour is defined in the preflight function in SIPI and not controlled by DSP-API. DSP-API only provides the permission code.</p> <p>Thus, DSP-API and SIPI stick to a clear division of responsibility regarding files: DSP-API knows about the names of files that are attached to resources as well as some metadata and is capable of creating the URLs for the client to request them from SIPI, but the whole handling of files (storing, naming, organization of the internal directory structure, format conversions, and serving) is taken care of by SIPI.</p> <p>When a user creates a resource with a digital representation attached to it in DSP-API either via the Graphical User Interface (GUI) or directly via the Application Programming Interface (API), the file is directly sent to SIPI to calculate a thumbnail hosted by SIPI which then gets displayed to the user in the browser. SIPI copies the original file into a temporary directory and keeps it there for later processing in another request. In its answer in JSON format, SIPI returns the path to the thumbnail, the name of the temporarily stored original file managed by SIPI, the mime type of the original file and the original name of the file submitted by the client. At the moment when the user wants to attach the file to a resource, the request is sent to DSP-API's API providing all the required parameters to create the resource along with additional information about the file to be attached. The file itself is not submitted to the DSP-API's API, but its filename returned by SIPI.</p>"}]}