openapi: 3.1.0
info:
  title: dsp-ingest-monitoring
  version: v0.4.0-48-g798b45c-dirty
servers:
- url: http://localhost:3340
  description: Local development server
- url: https://ingest.dev.dasch.swiss
  description: Production server
paths:
  /info:
    get:
      tags:
      - monitoring
      operationId: getInfo
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoEndpointResponse'
              example:
                name: dsp-ingest
                version: v0.4.0-48-g798b45c-dirty
                scalaVersion: 3.3.1
                sbtVersion: 1.9.7
                buildTime: 2023-12-15 11:15:55.044+0100
                gitCommit: 798b45ccad3b5d49d906a327b9f45a379012362a
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequest'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFound'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
        '503':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unhealthy'
  /health:
    get:
      tags:
      - monitoring
      operationId: getHealth
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Health'
              example:
                status: UP
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequest'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFound'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
        '503':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unhealthy'
  /metrics:
    get:
      tags:
      - monitoring
      operationId: getMetrics
      responses:
        '200':
          description: ''
          content:
            text/plain:
              schema:
                type: string
        '400':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequest'
        '401':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unauthorized'
        '404':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotFound'
        '500':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerError'
        '503':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Unhealthy'
components:
  schemas:
    Argument:
      required:
      - argument
      - reason
      type: object
      properties:
        argument:
          type: string
        reason:
          type: string
    BadRequest:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: '#/components/schemas/Argument'
    DOWN:
      type: object
    Health:
      required:
      - status
      type: object
      properties:
        status:
          $ref: '#/components/schemas/Status'
    InfoEndpointResponse:
      required:
      - name
      - version
      - scalaVersion
      - sbtVersion
      - buildTime
      - gitCommit
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        scalaVersion:
          type: string
        sbtVersion:
          type: string
        buildTime:
          type: string
        gitCommit:
          type: string
    InternalServerError:
      required:
      - errorMessage
      type: object
      properties:
        errorMessage:
          type: string
    NotFound:
      required:
      - id
      - type
      type: object
      properties:
        id:
          type: string
        type:
          type: string
    Status:
      oneOf:
      - $ref: '#/components/schemas/DOWN'
      - $ref: '#/components/schemas/UP'
    UP:
      type: object
    Unauthorized:
      required:
      - reason
      type: object
      properties:
        reason:
          type: string
    Unhealthy:
      required:
      - status
      type: object
      properties:
        status:
          $ref: '#/components/schemas/Status'
